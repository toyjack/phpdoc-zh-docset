<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Set locale information</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.rtrim.html">? rtrim</a></li>
      <li style="float: right;"><a href="function.sha1-file.html">sha1_file ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.strings.html">字符串 函数</a></li>
    <li>Set locale information</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.setlocale" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">setlocale</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">setlocale</span> &mdash; <span class="dc-title">Set locale information</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.setlocale-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><strong>setlocale</strong></span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$category</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$locale</code></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$...</code></span>
  ] )</div>

  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><strong>setlocale</strong></span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$category</code></span>
   , <span class="methodparam"><span class="type">array</span> <code class="parameter">$locale</code></span>
   )</div>

  <p class="para rdfs-comment">
   Sets locale information.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.setlocale-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">category</code></dt>

     <dd>

      <p class="para">
       <code class="parameter">category</code> is a named constant specifying the
       category of the functions affected by the locale setting:
       <ul class="itemizedlist">
        <li class="listitem">
         <span class="simpara">
          <strong><code>LC_ALL</code></strong> for all of the below
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <strong><code>LC_COLLATE</code></strong> for string comparison, see
          <span class="function"><a href="function.strcoll.html" class="function">strcoll()</a></span>
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <strong><code>LC_CTYPE</code></strong> for character classification and conversion, for
          example <span class="function"><a href="function.strtoupper.html" class="function">strtoupper()</a></span>
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <strong><code>LC_MONETARY</code></strong> for <span class="function"><a href="function.localeconv.html" class="function">localeconv()</a></span>
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <strong><code>LC_NUMERIC</code></strong> for decimal separator (See also
          <span class="function"><a href="function.localeconv.html" class="function">localeconv()</a></span>)
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <strong><code>LC_TIME</code></strong> for date and time formatting with
          <span class="function"><a href="function.strftime.html" class="function">strftime()</a></span>
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <strong><code>LC_MESSAGES</code></strong> for system responses (available if PHP was compiled with
          <em>libintl</em>)
         </span>
        </li>
       </ul>
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">locale</code></dt>

     <dd>

      <p class="para">
       If <code class="parameter">locale</code> is <strong><code>NULL</code></strong> or the empty string
       <em>&quot;&quot;</em>, the locale names will be set from the
       values of environment variables with the same names as the above
       categories, or from &quot;LANG&quot;.
      </p>
      <p class="para">
       If <code class="parameter">locale</code> is <em>&quot;0&quot;</em>,
       the locale setting is not affected, only the current setting is returned.
      </p>
      <p class="para">
       If <code class="parameter">locale</code> is an array or followed by additional
       parameters then each array element or parameter is tried to be set as
       new locale until success. This is useful if a locale is known under
       different names on different systems or for providing a fallback
       for a possibly not available locale.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">...</code></dt>

     <dd>

      <p class="para">
       (Optional string or array parameters to try as locale settings until
       success.)
      </p>
     </dd>

    
   </dl>

   <blockquote class="note"><p><strong class="note">Note</strong>: 
    <p class="para">
     On Windows, setlocale(LC_ALL, &#039;&#039;) sets the locale names from the
     system&#039;s regional/language settings (accessible via Control Panel).
    </p>
   </p></blockquote>
  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.setlocale-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   Returns the new current locale, or <strong><code>FALSE</code></strong> if the locale functionality is
   not implemented on your platform, the specified locale does not exist or
   the category name is invalid.
  </p>
  <p class="para">
   An invalid category name also causes a warning message. Category/locale
   names can be found in <a href="http://www.faqs.org/rfcs/rfc1766" class="link external" title="Link : http://www.faqs.org/rfcs/rfc1766">&raquo;&nbsp;RFC 1766</a>
   and <a href="http://www.w3.org/WAI/ER/IG/ert/iso639.htm" class="link external" title="Link : http://www.w3.org/WAI/ER/IG/ert/iso639.htm">&raquo;&nbsp;ISO 639</a>.
   Different systems have different naming schemes for locales.
  </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    The return value of <span class="function"><strong>setlocale()</strong></span> depends
    on the system that PHP is running.  It returns exactly
    what the system <em>setlocale</em> function returns.
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.setlocale-changelog">
  <h3 class="title">更新日志</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>版本</th>
       <th>说明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.3.0</td>
       <td>
        This function now throws an <strong><code>E_DEPRECATED</code></strong> notice if a string is passed 
        to the <code class="parameter">category</code> parameter instead of one of the 
        <em>LC_*</em> constants.
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.setlocale-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-4890">
    <p><strong>Example #1 <span class="function"><strong>setlocale()</strong></span> Examples</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;Set&nbsp;locale&nbsp;to&nbsp;Dutch&nbsp;*/<br /></span><span style="color: #0000BB">setlocale</span><span style="color: #007700">(</span><span style="color: #0000BB">LC_ALL</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'nl_NL'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;Output:&nbsp;vrijdag&nbsp;22&nbsp;december&nbsp;1978&nbsp;*/<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">strftime</span><span style="color: #007700">(</span><span style="color: #DD0000">"%A&nbsp;%e&nbsp;%B&nbsp;%Y"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">mktime</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">12</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">22</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1978</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">/*&nbsp;try&nbsp;different&nbsp;possible&nbsp;locale&nbsp;names&nbsp;for&nbsp;german&nbsp;as&nbsp;of&nbsp;PHP&nbsp;4.3.0&nbsp;*/<br /></span><span style="color: #0000BB">$loc_de&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">setlocale</span><span style="color: #007700">(</span><span style="color: #0000BB">LC_ALL</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'de_DE@euro'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'de_DE'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'de'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'ge'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"Preferred&nbsp;locale&nbsp;for&nbsp;german&nbsp;on&nbsp;this&nbsp;system&nbsp;is&nbsp;'</span><span style="color: #0000BB">$loc_de</span><span style="color: #DD0000">'"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-4891">
    <p><strong>Example #2 <span class="function"><strong>setlocale()</strong></span> Examples for Windows</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;Set&nbsp;locale&nbsp;to&nbsp;Dutch&nbsp;*/<br /></span><span style="color: #0000BB">setlocale</span><span style="color: #007700">(</span><span style="color: #0000BB">LC_ALL</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'nld_nld'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;Output:&nbsp;vrijdag&nbsp;22&nbsp;december&nbsp;1978&nbsp;*/<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">strftime</span><span style="color: #007700">(</span><span style="color: #DD0000">"%A&nbsp;%d&nbsp;%B&nbsp;%Y"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">mktime</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">12</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">22</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1978</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">/*&nbsp;try&nbsp;different&nbsp;possible&nbsp;locale&nbsp;names&nbsp;for&nbsp;german&nbsp;as&nbsp;of&nbsp;PHP&nbsp;4.3.0&nbsp;*/<br /></span><span style="color: #0000BB">$loc_de&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">setlocale</span><span style="color: #007700">(</span><span style="color: #0000BB">LC_ALL</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'de_DE@euro'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'de_DE'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'deu_deu'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"Preferred&nbsp;locale&nbsp;for&nbsp;german&nbsp;on&nbsp;this&nbsp;system&nbsp;is&nbsp;'</span><span style="color: #0000BB">$loc_de</span><span style="color: #DD0000">'"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.setlocale-notes">
  <h3 class="title">注释</h3>
  <div class="warning"><strong class="warning">Warning</strong>
   <p class="para">
    The locale information is maintained per process, not per thread. If you
    are running PHP on a multithreaded server API like IIS, HHVM or Apache on
    Windows, you may experience sudden changes in locale settings while a
    script is running, though the script itself never called 
    <span class="function"><strong>setlocale()</strong></span>. This happens due to other scripts
    running in different threads of the same process at the same time,
    changing the process-wide locale using <span class="function"><strong>setlocale()</strong></span>.
   </p>
  </div>
  <div class="tip"><strong class="tip">Tip</strong>
   <p class="para">
    Windows users will find useful information about
    <code class="parameter">locale</code> strings at Microsoft&#039;s
    <acronym title="Microsoft Developer Network">MSDN</acronym> website. Supported language strings can be found
    in the
    <a href="http://msdn.microsoft.com/en-us/library/39cwe7zf%28v=vs.90%29.aspx" class="link external" title="Link : http://msdn.microsoft.com/en-us/library/39cwe7zf%28v=vs.90%29.aspx">&raquo;&nbsp;language strings documentation</a>
    and supported country/region strings in the
    <a href="http://msdn.microsoft.com/en-us/library/cdax410z%28v=vs.90%29.aspx" class="link external" title="Link : http://msdn.microsoft.com/en-us/library/cdax410z%28v=vs.90%29.aspx">&raquo;&nbsp;country/region strings documentation</a>.
   </p>
  </div>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="116796""></a>
  <div class="note">
   <strong class="user">aaaaa976 at gmail dot com</strong>
   <a href="#116796" class="date">02-Mar-2015 05:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In Windows some times setlocale don't work, it return a empty array, buts the locale is set. I found that apache start before windows "load" locales, you must restart apache to solve this.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113764""></a>
  <div class="note">
   <strong class="user">RobQuist</strong>
   <a href="#113764" class="date">28-Nov-2013 11:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In addition to russ, about getting / backing up the locale:<br />
I'm using this in unit-tests. I wanted to test something based on locale, and reset the locale after the tests were done.<br />
<br />
Yet there were some errors;<br />
* setlocale doesn't like strings anymore. You need to use constants.<br />
* Some contants don't exist anymore. <br />
<br />
Here's an updated piece of code:<br />
<br />
<span class="default">&lt;?php<br />
$originalLocales </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">";"</span><span class="keyword">, </span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">));<br />
</span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="string">'nl_NL.UTF-8'</span><span class="keyword">);<br />
<br />
</span><span class="comment">//Do something here<br />
<br />
//Recover to the default setting<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$skipConstants </span><span class="keyword">= array( </span><span class="comment">//these will be returned by setlocale(LC_ALL, 0), but don't exist anymore.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'LC_PAPER'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'LC_NAME'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'LC_ADDRESS'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'LC_TELEPHONE'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'LC_MEASUREMENT'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'LC_IDENTIFICATION'<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$originalLocales </span><span class="keyword">as </span><span class="default">$localeSetting</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$localeSetting</span><span class="keyword">, </span><span class="string">"="</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; list (</span><span class="default">$category</span><span class="keyword">, </span><span class="default">$locale</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"="</span><span class="keyword">, </span><span class="default">$localeSetting</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$category </span><span class="keyword">= </span><span class="default">LC_ALL</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$locale&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">$localeSetting</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$category</span><span class="keyword">, </span><span class="default">$skipConstants</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">constant</span><span class="keyword">(</span><span class="default">$category</span><span class="keyword">), </span><span class="default">$locale</span><span class="keyword">); </span><span class="comment">//Using strings is deprecated.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111218""></a>
  <div class="note">
   <strong class="user">c dot madmax at gmail dot com</strong>
   <a href="#111218" class="date">28-Jan-2013 12:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// the last foldername only contains a german umlaut (lower a with two dots = \xE4 in ISO-8859-1)<br />
</span><span class="default">$path </span><span class="keyword">= </span><span class="string">"/home/madmax/photos_from_the_last_10_years/\xE4"<br />
<br />
</span><span class="comment">// php escapeshellarg remove characters (depends on locale settings)<br />
// the following example will delete /home/madmax/photos_from_the_last_10_years/<br />
// instead of /home/madmax/photos_from_the_last_10_years/?<br />
<br />
</span><span class="default">shell_exec</span><span class="keyword">(</span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">'rm -fr %s' </span><span class="default">escapeshellarg</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">)));<br />
<br />
</span><span class="comment">// dear php developers, how stupid is that?<br />
// I tell you: it is very very stupid! The problem exists since years and nothing happens (see bug #54391)<br />
<br />
// this code will not remove all your photos of the last 10 years :)<br />
</span><span class="keyword">function </span><span class="default">binary_safe_escapeshellarg_that_is_not_totally_buggy_and_do_not_remove_f___ing_characters</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; return(@</span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">"'%s'"</span><span class="keyword">, @</span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, Array(</span><span class="string">"\x27" </span><span class="keyword">=&gt; </span><span class="string">"\x27\x5C\x27\x27"</span><span class="keyword">))));<br />
};<br />
<br />
</span><span class="comment">// delete /home/madmax/photos_from_the_last_10_years/?<br />
// and not /home/madmax/photos_from_the_last_10_years/<br />
</span><span class="default">shell_exec</span><span class="keyword">(</span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">'rm -fr %s' </span><span class="default">binary_safe_escapeshellarg_that_is_not_totally_buggy_and_do_not_remove_f___ing_characters</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">))); </span><span class="comment">// binary safe!<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111150""></a>
  <div class="note">
   <strong class="user">data dot ocean dot italia at gmail dot com</strong>
   <a href="#111150" class="date">21-Jan-2013 04:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Instead, using php with IIS, I had to use this line for Italian language...<br />
<br />
<span class="default">&lt;?php setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="string">'Italian_Italy.1250'</span><span class="keyword">); </span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106811""></a>
  <div class="note">
   <strong class="user">russ at eatmymonkeydust dot com</strong>
   <a href="#106811" class="date">08-Dec-2011 12:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are looking for a getlocale() function simply pass 0 (zero) as the second parameter to setlocale().<br />
<br />
Beware though if you use the category LC_ALL and some of the locales differ as a string containing all the locales is returned:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">echo </span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
<br />
</span><span class="comment">// LC_CTYPE=en_US.UTF-8;LC_NUMERIC=C;LC_TIME=C;LC_COLLATE=C;LC_MONETARY=C;LC_MESSAGES=C;LC_PAPER=C;LC_NAME=C;<br />
// LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=C;LC_IDENTIFICATION=C<br />
<br />
</span><span class="keyword">echo </span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_CTYPE</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
<br />
</span><span class="comment">// en_US.UTF-8<br />
<br />
</span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="string">"en_US.UTF-8"</span><span class="keyword">);<br />
echo </span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
<br />
</span><span class="comment">// en_US.UTF-8<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
If you are looking to store and reset the locales you could do something like this:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$originalLocales </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">";"</span><span class="keyword">, </span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">));<br />
</span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="string">"nb_NO.utf8"</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Do something<br />
<br />
</span><span class="keyword">foreach (</span><span class="default">$originalLocales </span><span class="keyword">as </span><span class="default">$localeSetting</span><span class="keyword">) {<br />
&nbsp; if (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$localeSetting</span><span class="keyword">, </span><span class="string">"="</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; list (</span><span class="default">$category</span><span class="keyword">, </span><span class="default">$locale</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"="</span><span class="keyword">, </span><span class="default">$localeSetting</span><span class="keyword">);<br />
&nbsp; }<br />
&nbsp; else {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$category </span><span class="keyword">= </span><span class="default">LC_ALL</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$locale&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">$localeSetting</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; </span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">$category</span><span class="keyword">, </span><span class="default">$locale</span><span class="keyword">); <br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
The above works here (Ubuntu Linux) but as the setlocale() function is just wrapping the equivalent system calls, your mileage may vary on the result.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105074""></a>
  <div class="note">
   <strong class="user">phcorp</strong>
   <a href="#105074" class="date">26-Jul-2011 03:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To find the locale of a Unix system:<br />
<span class="default">&lt;?php system</span><span class="keyword">(</span><span class="string">'locale -a'</span><span class="keyword">) </span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104441""></a>
  <div class="note">
   <strong class="user">flavioacvalverde at gmail dot com</strong>
   <a href="#104441" class="date">15-Jun-2011 06:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For Portugal I had to use
<br />

<br />
<span class="default">&lt;?php setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="string">'Portuguese_Portugal.1252'</span><span class="keyword">); </span><span class="default">?&gt;
<br />
</span>
<br />
using php with IIS on Windows server.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103627""></a>
  <div class="note">
   <strong class="user">tomas dot hampl at gmail dot com</strong>
   <a href="#103627" class="date">23-Apr-2011 10:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On Linux, setlocale() depends on the installed locales. To see which locales are available to PHP, run this from the terminal:<br />
<br />
"locale -a"<br />
<br />
Provided list are all locales that are available on your server for PHP to use. To add a new one, run<br />
<br />
locale-gen &lt;locale name&gt; (this may need sudo / root permissions), for example to add a Czech locale, run something like this:<br />
<br />
"sudo locale-gen cs_CZ.utf8"<br />
<br />
Then you can use this locale declaration:<br />
<br />
setlocale(LC_ALL, 'cs_CZ.utf8');</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99415""></a>
  <div class="note">
   <strong class="user">leif at neland dot dk</strong>
   <a href="#99415" class="date">16-Aug-2010 01:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Regarding dash'es in locale, it appears they should be omitted entirely.<br />
<br />
In /etc/locale.gen I have<br />
<br />
da_DK.ISO-8859-15 ISO-8859-15<br />
<br />
but locale -a gives <br />
<br />
da_DK.iso885915<br />
<br />
which is the format setlocale()&nbsp; wants.<br />
<br />
(Debian)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98649""></a>
  <div class="note">
   <strong class="user">garygendron at yahoo dot com</strong>
   <a href="#98649" class="date">29-Jun-2010 05:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For a php Mysql query, you could also use, for french canadian, in this example :<br />
<br />
$query = 'SET lc_time_names = "fr_CA"';<br />
$result = mysql_query($query) or die("Query failed");<br />
<br />
$query = 'SELECT @@lc_time_names';<br />
$result = mysql_query($query) or die("Query failed");<br />
<br />
$query = 'SELECT id, created, YEAR(created) as year, MONTH(created) as month,' .<br />
' CONCAT_WS(" ", MONTHNAME(created), YEAR(created)) as archive' .&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
' FROM #__TABLE as e' .<br />
' GROUP BY archive' .<br />
' ORDER BY id DESC'; <br />
<br />
Your data will be displayed in any locale setting you want. You may even $_GET[lc_time_name] from your multilanguage website.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96887""></a>
  <div class="note">
   <strong class="user">Omer Sabic</strong>
   <a href="#96887" class="date">21-Mar-2010 04:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On Linux/Apache, when you install and try to use a new locale, the setlocale() function with the new locale will fail sometimes, but not always. To furthermore complicate, setlocale() will always complete with any of the previously installed locales. This would seem a really weird behaviour, which you can fix by restarting Apache, as Kari Sderholm aka Haprog mentioned, but I felt it needed to be properly pointed out.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90919""></a>
  <div class="note">
   <strong class="user">Kari Sderholm aka Haprog</strong>
   <a href="#90919" class="date">16-May-2009 01:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It took me a while to figure out how to get a Finnish locale correctly set on Ubuntu Server with Apache2 and PHP5.<br />
<br />
At first the output for "locale -a" was this:<br />
C<br />
en_US.utf8<br />
POSIX<br />
<br />
I had to install a finnish language pack with<br />
"sudo apt-get install language-pack-fi-base"<br />
<br />
Now the output for "locale -a" is:<br />
C<br />
en_US.utf8<br />
fi_FI.utf8<br />
POSIX<br />
<br />
The last thing you need to do after installing the correct language pack is restart Apache with "sudo apache2ctl restart". The locale "fi_FI.utf8" can then be used in PHP5 after restarting Apache.<br />
<br />
For setting Finnish timezone and locale in PHP use:<br />
<span class="default">&lt;?php<br />
date_default_timezone_set</span><span class="keyword">(</span><span class="string">'Europe/Helsinki'</span><span class="keyword">);<br />
</span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, array(</span><span class="string">'fi_FI.UTF-8'</span><span class="keyword">,</span><span class="string">'fi_FI@euro'</span><span class="keyword">,</span><span class="string">'fi_FI'</span><span class="keyword">,</span><span class="string">'finnish'</span><span class="keyword">));<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90538""></a>
  <div class="note">
   <strong class="user">wisborg</strong>
   <a href="#90538" class="date">27-Apr-2009 02:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It is correct as stated below that it is common that the UTF-8 should be used without the dash. However on some systems (e.g. MacOS 10.4) the dash is essential.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89076""></a>
  <div class="note">
   <strong class="user">brice/axice/be</strong>
   <a href="#89076" class="date">20-Feb-2009 02:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Pay attention to the syntax.
<br />
- UTF8 without dash ('-')
<br />
- locale.codeset and not locale-codeset.
<br />

<br />
Stupid newbie error but worth knowing them when starting with gettext.
<br />

<br />
<span class="default">&lt;?php
<br />
$codeset </span><span class="keyword">= </span><span class="string">"UTF8"</span><span class="keyword">;&nbsp; </span><span class="comment">// warning ! not UTF-8 with dash '-'
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
// for windows compatibility (e.g. xampp) : theses 3 lines are useless for linux systems 
<br />

<br />
</span><span class="default">putenv</span><span class="keyword">(</span><span class="string">'LANG='</span><span class="keyword">.</span><span class="default">$lang</span><span class="keyword">.</span><span class="string">'.'</span><span class="keyword">.</span><span class="default">$codeset</span><span class="keyword">);
<br />
</span><span class="default">putenv</span><span class="keyword">(</span><span class="string">'LANGUAGE='</span><span class="keyword">.</span><span class="default">$lang</span><span class="keyword">.</span><span class="string">'.'</span><span class="keyword">.</span><span class="default">$codeset</span><span class="keyword">);
<br />
</span><span class="default">bind_textdomain_codeset</span><span class="keyword">(</span><span class="string">'mydomain'</span><span class="keyword">, </span><span class="default">$codeset</span><span class="keyword">);
<br />

<br />
</span><span class="comment">// set locale
<br />
</span><span class="default">bindtextdomain</span><span class="keyword">(</span><span class="string">'mydomain'</span><span class="keyword">, </span><span class="default">ABSPATH</span><span class="keyword">.</span><span class="string">'/locale/'</span><span class="keyword">);
<br />
</span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="default">$lang</span><span class="keyword">.</span><span class="string">'.'</span><span class="keyword">.</span><span class="default">$codeset</span><span class="keyword">);
<br />
</span><span class="default">textdomain</span><span class="keyword">(</span><span class="string">'mydomain'</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
where directory structure of locale is (for example) :
<br />
locale/fr_FR/LC_MESSAGES/mydomain.mo
<br />
locale/en_US/LC_MESSAGES/mydomain.mo
<br />

<br />
and ABSPATH is the absolute path to the locale dir
<br />

<br />
further note, under linux systems, it seems to be necessary to create the locale at os level using 'locale-gen'.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87038""></a>
  <div class="note">
   <strong class="user">Un_passant</strong>
   <a href="#87038" class="date">16-Nov-2008 12:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For debian/ubuntu, don't forget the charset UFT8. <br />
<br />
// Works on Ubuntu 8.04 Server<br />
setlocale(LC_TIME, 'fr_FR.UTF8', 'fr.UTF8', 'fr_FR.UTF-8', 'fr.UTF-8');</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86078""></a>
  <div class="note">
   <strong class="user">Leigh Morresi</strong>
   <a href="#86078" class="date">02-Oct-2008 08:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Setting locale that is not supported by your system will result in some string operations returning a question mark "?" in your strings where it needs to perform transliteration.<br />
<br />
1) Always check the return of setlocale() to ensure it has set to something supported<br />
<br />
2) on Linux you can use the "locale -a" command to find a list of supported locales</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84735""></a>
  <div class="note">
   <strong class="user">Arjon</strong>
   <a href="#84735" class="date">28-Jul-2008 06:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please take heed and read the warning above if you are running on a XAMPP or any other Windows apache server! It just took me far too long to figure this out; and all the while there was a warning right on the page.<br />
<br />
If you're experiencing shifting locale settings (check with setlocale(LC_ALL,0), returning the current locale stuff) and you're running a windows server, then it's not just you! Again, I urge everyone to read the red, but oh so easy not to read, warning message on this page.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84719""></a>
  <div class="note">
   <strong class="user">michal dot kocarek at brainbox dot cz</strong>
   <a href="#84719" class="date">27-Jul-2008 05:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note about using UTF-8 locale charset on Windows systems:
<br />

<br />
According to MSDN, Windows setlocale()'s implementation does not support UTF-8 encoding.
<br />

<br />
Citation from "MSDN setlocale, _wsetlocale" page (<a href="http://msdn.microsoft.com/en-us/library/x99tb11d.aspx" rel="nofollow" target="_blank">http://msdn.microsoft.com/en-us/library/x99tb11d.aspx</a>):
<br />
The set of available languages, country/region codes, and code pages includes all those supported by the Win32 NLS API except code pages that require more than two bytes per character, such as UTF-7 and UTF-8. If you provide a code page like UTF-7 or UTF-8, setlocale will fail, returning NULL.
<br />

<br />
So basically, code like
<br />
<span class="default">&lt;?php setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="string">'Czech_Czech Republic.65001'</span><span class="keyword">); </span><span class="comment">// 65001 is UTF-8 codepage </span><span class="default">?&gt;
<br />
</span>does not work on Windows at all.
<br />

<br />
(written in time of PHP 5.2.4)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84038""></a>
  <div class="note">
   <strong class="user">de ronino at kde (reverse it)</strong>
   <a href="#84038" class="date">25-Jun-2008 11:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I experienced the behavior stated in the above Warning box: Running PHP5 on a multithreaded Apache made the current locale change sometimes all of a sudden within a script, so strftime() output wasn't in the required format.<br />
<br />
I recompiled Apache with the prefork MPM and now it works like a charm. Took me a long time to find out the reason as I overlooked the warning box searching for either a bug report or a programming error of mine...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83477""></a>
  <div class="note">
   <strong class="user">jonas at jonashaag dot de</strong>
   <a href="#83477" class="date">27-May-2008 09:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On Ubuntu, you have to take p.e. "de_DE.utf8", all available languages you can get with:<br />
&nbsp;&nbsp;&nbsp; locale -a</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80540""></a>
  <div class="note">
   <strong class="user">bryn AT lunarvis DOT com</strong>
   <a href="#80540" class="date">21-Jan-2008 02:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Posting this in the hope it might be useful to others, as I could find very little info anywhere. If you want to use a Welsh locale and have the suitable language support installed, you pass 'cym' (abbreviated form of Cymraeg) to setlocale:<br />
<br />
<span class="default">&lt;?php<br />
setlocale</span><span class="keyword">(</span><span class="default">LC_TIME</span><span class="keyword">, </span><span class="string">'cym'</span><span class="keyword">);<br />
</span><span class="default">$welsh</span><span class="keyword">= </span><span class="default">gmstrftime</span><span class="keyword">(</span><span class="string">"%A, %B %Y - %H:%M"</span><span class="keyword">,</span><span class="default">time</span><span class="keyword">());<br />
echo </span><span class="default">$welsh</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
The above certainly applies to Windows systems, but should also apply to Unix if the required support is installed.<br />
<br />
Cheers,<br />
<br />
Bryn.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80054""></a>
  <div class="note">
   <strong class="user">ostapk</strong>
   <a href="#80054" class="date">27-Dec-2007 11:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is a new PECL extension under development called intl (it will be available in PHP5.3). Meanwhile all who rely on the setlocale() and friends should be aware about the limitations of them as covered in this post on the onPHP5.com blog: <a href="http://www.onphp5.com/article/22" rel="nofollow" target="_blank">http://www.onphp5.com/article/22</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77795""></a>
  <div class="note">
   <strong class="user">Periklis</strong>
   <a href="#77795" class="date">13-Sep-2007 11:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In *some* Windows systems, setting LC_TIME only will not work, you must either set LC_ALL or both LC_CTYPE and LC_TIME. BUT if you have already set LC_TIME using setlocale earlier in the script, dates will not be affected! For example:<br />
<span class="default">&lt;?php<br />
setlocale</span><span class="keyword">(</span><span class="default">LC_TIME</span><span class="keyword">, </span><span class="string">'greek'</span><span class="keyword">);<br />
</span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_CTYPE</span><span class="keyword">, </span><span class="string">'greek'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>will not work, while <br />
<span class="default">&lt;?php<br />
setlocale</span><span class="keyword">(</span><span class="default">LC_CTYPE</span><span class="keyword">, </span><span class="string">'greek'</span><span class="keyword">);<br />
</span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_TIME</span><span class="keyword">, </span><span class="string">'greek'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>will do the job.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75032""></a>
  <div class="note">
   <strong class="user">mvanbaak</strong>
   <a href="#75032" class="date">09-May-2007 02:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To complement Sven K's tip about debian:<br />
<br />
You can also install the package locales-all<br />
That one holds all the locales there are in compiled form.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73347""></a>
  <div class="note">
   <strong class="user">szepeshazi at gmail dot com</strong>
   <a href="#73347" class="date">19-Feb-2007 04:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those of you who are unfortunate enough (like me) to work in Windows environment, and try to set the locale to a language _and_ to UTF-8 charset, and were unable to do it, here is a workaround.<br />
<br />
For example to output the date in hungarian with UTF-8 charset, this will work:<br />
<br />
&nbsp;&nbsp;&nbsp; $dateString = "%B %d., %A";<br />
&nbsp;&nbsp;&nbsp; setlocale(LC_ALL,'hungarian');<br />
&nbsp;&nbsp;&nbsp; $res=strftime($dateString);<br />
&nbsp;&nbsp;&nbsp; echo(iconv('ISO-8859-1', 'UTF-8', $res));<br />
<br />
If anybody knows how to set the locale on Windows to the equivalent of "hu_HU.UTF-8" on unix, please do tell me.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71276""></a>
  <div class="note">
   <strong class="user">lifeless</strong>
   <a href="#71276" class="date">20-Nov-2006 06:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if your server is an ubuntu (debian like)<br />
you need to install the locales you want (default is english and your language) go to aptitude and install -language-pack-*-base it will resolve dependencies and will try to install a suggested package, remove it if you don't care and proceed.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="67436""></a>
  <div class="note">
   <strong class="user">Sven K</strong>
   <a href="#67436" class="date">08-Jun-2006 12:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If your system doesn't show any installed locales by "locale -a", try installing them by "dpkg-reconfigure locales" (on debian).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="62748""></a>
  <div class="note">
   
   <a href="#62748" class="date">08-Mar-2006 09:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The example from bruno dot cenou at revues dot org below shows the possibility, but I want to spell it out: you can add charset info to setlocale.<br />
<br />
Example:<br />
<br />
Into my utf-8-encoded page I want to insert the name of the current month, which happens to be March, in German "M?rz" - with umlaut. If you use<br />
<br />
&nbsp;&nbsp; setlocale(LC_TIME, 'de_DE');<br />
&nbsp;&nbsp; echo strftime("%B");<br />
<br />
this will return "M&amp;auml;rz", but that html-entity will look like this on a utf-8 page: "M?rz". Not what I want.<br />
<br />
But if you use<br />
<br />
&nbsp;&nbsp; setlocale(LC_TIME, 'de_DE.UTF8');&nbsp; // note the charset info !<br />
&nbsp;&nbsp; echo strftime("%B");<br />
<br />
this returns "M√§rz", which, on utf-8, looks like it should: "M?rz".</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="62111""></a>
  <div class="note">
   <strong class="user">Edwin Martin</strong>
   <a href="#62111" class="date">20-Feb-2006 01:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Debian users: Addition to Gabor Deri's note: if setlocale doesn't work in your locale and you're on Debian, and Gabor Deri's note doesn't work, you have to install the locales package.<br />
<br />
As root, type: "apt-get install locales" and it will be installed.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="59232""></a>
  <div class="note">
   <strong class="user">glenn at europlan dot no</strong>
   <a href="#59232" class="date">30-Nov-2005 08:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In most Unix/Linux system, you could use:<br />
<br />
locale -a<br />
<br />
This will list all available locales on the server.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55834""></a>
  <div class="note">
   <strong class="user">birkholz at web dot de</strong>
   <a href="#55834" class="date">15-Aug-2005 05:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When i tried to get the current locale (e.g. after i set the lang to german with setlocale(LC_ALL, 'de_DE'); ), the following did not work on my suse linux 9.0-box:<br />
$currentLocale = setlocale(LC_ALL, NULL);<br />
This code did a reset to the server-setting.<br />
<br />
$currentLocale = setlocale(LC_ALL, 0); works perfectly for me, but the manual says NULL and 0 are equal in this case, but NULL seems to act like "".</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46640""></a>
  <div class="note">
   <strong class="user">pigmeu at pigmeu dot net</strong>
   <a href="#46640" class="date">18-Oct-2004 10:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
!!WARNING!!<br />
<br />
The "locale" always depend on the server configuration.<br />
<br />
i.e.:<br />
When trying to use "pt_BR" on some servers you will ALWAYS get false. Even with other languages.<br />
<br />
The locale string need to be supported by the server. Sometimes there are diferents charsets for a language, like "pt_BR.utf-8" and "pt_BR.iso-8859-1", but there is no support for a _standard_ "pt_BR".<br />
<br />
This problem occours in Windows platform too. Here you need to call "portuguese" or "spanish" or "german" or...<br />
<br />
Maybe the only way to try to get success calling the function setlocale() is:<br />
setlocale(LC_ALL, "pt_BR", "pt_BR.iso-8859-1", "pt_BR.utf-8", "portuguese", ...);<br />
<br />
But NEVER trust on that when making functions like date conversions or number formating. The best way to make sure you are doing the right thing, is using the default "en_US" or "en_UK", by not calling the setlocale() function. Or, make sure that your server support the lang you want to use, with some tests.<br />
<br />
Remember that: Using the default locale setings is the best way to "talk" with other applications, like dbs or rpc servers, too.<br />
<br />
[]s<br />
<br />
Pigmeu</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="44685""></a>
  <div class="note">
   <strong class="user">dv at josheli dot com</strong>
   <a href="#44685" class="date">13-Aug-2004 01:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On Novell Netware, the language codes require hyphens, not underscores, and using anything other than LC_ALL doesn't work directly.<br />
<br />
So... (from their support list)....<br />
<br />
You have to set TIME, NUMERIC etc. info in two steps as given below rather than one. This is due to the limitation of setlocale function of LibC.<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="string">'es-ES'</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$loc </span><span class="keyword">= </span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_TIME</span><span class="keyword">, </span><span class="default">NULL</span><span class="keyword">);<br />
&nbsp;&nbsp; echo </span><span class="default">strftime</span><span class="keyword">(</span><span class="string">"%A %e %B %Y"</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">12</span><span class="keyword">, </span><span class="default">22</span><span class="keyword">, </span><span class="default">1978</span><span class="keyword">));<br />
&nbsp; </span><span class="comment">// jeuves 22 diciembre 1978<br />
</span><span class="default">?&gt;<br />
</span>This should work.<br />
<br />
or of course, reset LC_ALL...<br />
<span class="default">&lt;?php<br />
setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="string">'es-ES'</span><span class="keyword">);<br />
echo </span><span class="default">strftime</span><span class="keyword">(</span><span class="string">"%A %e %B %Y"</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">12</span><span class="keyword">, </span><span class="default">22</span><span class="keyword">, </span><span class="default">1978</span><span class="keyword">));<br />
</span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">);<br />
</span><span class="comment">// jeuves 22 diciembre 1978<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="39370""></a>
  <div class="note">
   <strong class="user">mk at totu dot com</strong>
   <a href="#39370" class="date">26-Jan-2004 01:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be carefull - setting a locale which uses commas instead of dots in numbers may cause a mysql db not to understand the query:
<br />
<span class="default">&lt;?php
<br />
setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">,</span><span class="string">"pl"</span><span class="keyword">);
<br />
</span><span class="default">$price </span><span class="keyword">= </span><span class="default">1234 </span><span class="keyword">/ </span><span class="default">100</span><span class="keyword">; </span><span class="comment">// now the price looks like 12,34
<br />
</span><span class="default">$query </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="string">"SELECT Id FROM table WHERE price='"</span><span class="keyword">.</span><span class="default">$price</span><span class="keyword">.</span><span class="string">"'"</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>Even if there is a price 12.34 - nothing will be found</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="25041""></a>
  <div class="note">
   <strong class="user">r dot nospam dot velseboer at quicknet dot nospam dot nl</strong>
   <a href="#25041" class="date">09-Sep-2002 04:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
be careful with the LC_ALL setting, as it may introduce some unwanted conversions. For example, I used <br />
<br />
setlocale (LC_ALL, "Dutch");<br />
<br />
to get my weekdays in dutch on the page. From that moment on (as I found out many hours later) my floating point values from MYSQL where interpreted as integers because the Dutch locale wants a comma (,) instead of a point (.) before the decimals. I tried printf, number_format, floatval.... all to no avail. 1.50 was always printed as 1.00 :(<br />
<br />
When I set my locale to :<br />
<br />
&nbsp;setlocale (LC_TIME, "Dutch");<br />
<br />
my weekdays are good now and my floating point values too. <br />
<br />
I hope I can save some people the trouble of figuring this out by themselves.<br />
<br />
Rob</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="13494""></a>
  <div class="note">
   <strong class="user">misc dot anders at feder dot dk</strong>
   <a href="#13494" class="date">19-Jun-2001 03:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Under FreeBSD, locale definitions are stored in the /usr/share/locale/ directory. Danish time formats and weekdays, for instance, are stored in /usr/share/locale/da_DK.ISO_8859-1/LC_TIME.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="9794""></a>
  <div class="note">
   <strong class="user">noog at libero dot it</strong>
   <a href="#9794" class="date">24-Nov-2000 12:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On windows:
<br />
Control Panel-&gt;International Settings
<br />
You can set your locale and customize it
<br />
And locale-related PHP functions work perfectly</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="4724""></a>
  <div class="note">
   <strong class="user">Morgan Christiansson &amp;lt;mog at linux dot nu&amp;gt;</strong>
   <a href="#4724" class="date">29-Mar-2000 09:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
check /usr/share/locale/ if you want more info about the locale available with your *NIX box
<br />

<br />
there is also a file called /usr/share/locale/locale.alias with a list of aliases
<br />
such as swedish for sv_SE
<br />

<br />
so on all boxes i have accounts on (rh 6.0 and slack 3.4) you can just use setlocale("LC_ALL","swedish"); or other prefered language in plain english.
<br />

<br />
However, the weekdays were in all lowercase :(
<br />

<br />
Note: export LC_ALL=swedish made a lot of programs swedish for me, it's also possible to make them russian or japanese :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

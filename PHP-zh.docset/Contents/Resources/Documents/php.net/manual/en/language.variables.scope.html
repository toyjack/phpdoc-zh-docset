<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>变量范围</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="language.variables.predefined.html">? 预定义变量</a></li>
      <li style="float: right;"><a href="language.variables.variable.html">可变变量 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="language.variables.html">变量</a></li>
    <li>变量范围</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="language.variables.scope" class="sect1">
   <h2 class="title">变量范围</h2>

   <p class="simpara">
    变量的范围即它定义的上下文背景（也就是它的生效范围）。大部分的
    PHP 变量只有一个单独的范围。这个单独的范围跨度同样包含了
    include 和 require 引入的文件。例如：
   </p>
   <div class="informalexample">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$a&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />include&nbsp;</span><span style="color: #DD0000">'b.inc'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
   <p class="simpara">
    这里变量 <var class="varname"><var class="varname">$a</var></var> 将会在包含文件
    <var class="filename">b.inc</var> 中生效。但是，在用户自定义函数中，一个局部函数范围将被引入。任何用于函数内部的变量按缺省情况将被限制在局部函数范围内。例如：
   </p>

   <div class="informalexample">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$a&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">/*&nbsp;global&nbsp;scope&nbsp;*/<br /><br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">Test</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">/*&nbsp;reference&nbsp;to&nbsp;local&nbsp;scope&nbsp;variable&nbsp;*/<br /></span><span style="color: #007700">}<br /><br /></span><span style="color: #0000BB">Test</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>

   <p class="simpara">
    这个脚本不会有任何输出，因为 echo 语句引用了一个局部版本的变量
    <var class="varname"><var class="varname">$a</var></var>，而且在这个范围内，它并没有被赋值。你可能注意到
    PHP 的全局变量和 C 语言有一点点不同，在 C
    语言中，全局变量在函数中自动生效，除非被局部变量覆盖。这可能引起一些问题，有些人可能不小心就改变了一个全局变量。PHP
    中全局变量在函数中使用时必须声明为 global。
   </p>

   <div class="sect2" id="language.variables.scope.global">
    <h3 class="title">global 关键字</h3>
    <p class="simpara">
     首先，一个使用 <em>global</em> 的例子：
    </p>
    <p class="para">
     <div class="example" id="example-112">
      <p><strong>Example #1 使用 global</strong></p>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$a&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$b&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">;<br /><br />function&nbsp;</span><span style="color: #0000BB">Sum</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;global&nbsp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$b&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">Sum</span><span style="color: #007700">();<br />echo&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
    </p>

    <p class="simpara">
     以上脚本的输出将是"3"。在函数中声明了全局变量
     <var class="varname"><var class="varname">$a</var></var> 和 <var class="varname"><var class="varname">$b</var></var>
     之后，对任一变量的所有引用都会指向其全局版本。对于一个函数能够声明的全局变量的最大个数，PHP 没有限制。
    </p>

    <p class="simpara">
     在全局范围内访问变量的第二个办法，是用特殊的 PHP 自定义
     <var class="varname"><var class="varname"><a href="reserved.variables.globals.html" class="classname">$GLOBALS</a></var></var> 数组。前面的例子可以写成：
    </p>

    <p class="para">
     <div class="example" id="example-113">
      <p><strong>Example #2 使用 <var class="varname"><var class="varname"><a href="reserved.variables.globals.html" class="classname">$GLOBALS</a></var></var> 替代 global</strong></p>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$a&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$b&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">;<br /><br />function&nbsp;</span><span style="color: #0000BB">Sum</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$GLOBALS</span><span style="color: #007700">[</span><span style="color: #DD0000">'b'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$GLOBALS</span><span style="color: #007700">[</span><span style="color: #DD0000">'a'</span><span style="color: #007700">]&nbsp;+&nbsp;</span><span style="color: #0000BB">$GLOBALS</span><span style="color: #007700">[</span><span style="color: #DD0000">'b'</span><span style="color: #007700">];<br />}<br /><br /></span><span style="color: #0000BB">Sum</span><span style="color: #007700">();<br />echo&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
    </p>

    <p class="simpara">
     <var class="varname"><var class="varname"><a href="reserved.variables.globals.html" class="classname">$GLOBALS</a></var></var>
     是一个关联数组，每一个变量为一个元素，键名对应变量名，值对应变量的内容。<var class="varname"><var class="varname"><a href="reserved.variables.globals.html" class="classname">$GLOBALS</a></var></var>
     之所以在全局范围内存在，是因为 $GLOBALS 是一个<a href="language.variables.superglobals.html" class="link">超全局变量</a>。以下范例显示了超全局变量的用处：
    </p>

    <p class="para">
     <div class="example" id="example-114">
      <p><strong>Example #3 演示超全局变量和作用域的例子</strong></p>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">test_global</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;大多数的预定义变量并不&nbsp;"super"，它们需要用&nbsp;'global'&nbsp;关键字来使它们在函数的本地区域中有效。<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">global&nbsp;</span><span style="color: #0000BB">$HTTP_POST_VARS</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$HTTP_POST_VARS</span><span style="color: #007700">[</span><span style="color: #DD0000">'name'</span><span style="color: #007700">];<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Superglobals&nbsp;在任何范围内都有效，它们并不需要&nbsp;'global'&nbsp;声明。Superglobals&nbsp;是在&nbsp;PHP&nbsp;4.1.0&nbsp;引入的。<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'name'</span><span style="color: #007700">];<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
    </p>
   </div>

   <div class="sect2" id="language.variables.scope.static">
    <h3 class="title">使用静态变量</h3>

    <p class="simpara">
     变量范围的另一个重要特性是<em class="emphasis">静态变量</em>（static
     variable）。静态变量仅在局部函数域中存在，但当程序执行离开此作用域时，其值并不丢失。看看下面的例子：
    </p>

    <p class="para">
     <div class="example" id="example-115">
      <p><strong>Example #4 演示需要静态变量的例子</strong></p>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">Test</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">++;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
    </p>

    <p class="simpara">
     本函数没什么用处，因为每次调用时都会将
     <var class="varname"><var class="varname">$a</var></var> 的值设为 <em>0</em> 并输出
     <em>0</em>。将变量加一的 <var class="varname"><var class="varname">$a</var></var>++
     没有作用，因为一旦退出本函数则变量
     <var class="varname"><var class="varname">$a</var></var> 就不存在了。要写一个不会丢失本次计数值的计数函数，要将变量
     <var class="varname"><var class="varname">$a</var></var> 定义为静态的：
    </p>

    <p class="para">
     <div class="example" id="example-116">
      <p><strong>Example #5 使用静态变量的例子</strong></p>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">test</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">++;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
    </p>

    <p class="simpara">
     现在，变量 <var class="varname"><var class="varname">$a</var></var> 仅在第一次调用 test() 函数时被初始化，之后每次调用 test() 函数都会输出
     <var class="varname"><var class="varname">$a</var></var> 的值并加一。
    </p>

    <p class="simpara">
     静态变量也提供了一种处理递归函数的方法。递归函数是一种调用自己的函数。写递归函数时要小心，因为可能会无穷递归下去。必须确保有充分的方法来中止递归。以下这个简单的函数递归计数到
     10，使用静态变量 <var class="varname"><var class="varname">$count</var></var> 来判断何时停止：
    </p>

    <p class="para">
     <div class="example" id="example-117">
      <p><strong>Example #6 静态变量与递归函数</strong></p>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">test</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;</span><span style="color: #0000BB">$count&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$count</span><span style="color: #007700">++;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$count</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$count&nbsp;</span><span style="color: #007700">&lt;&nbsp;</span><span style="color: #0000BB">10</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">test</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$count</span><span style="color: #007700">--;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
    </p>

    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <p class="para">
      静态变量可以按照上面的例子声明。如果在声明中用表达式的结果对其赋值会导致解析错误。
     </p>
     <p class="para">
      <div class="example" id="example-118">
       <p><strong>Example #7 声明静态变量</strong></p>
       <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">foo</span><span style="color: #007700">(){<br />&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;</span><span style="color: #0000BB">$int&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;correct<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">static&nbsp;</span><span style="color: #0000BB">$int&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">+</span><span style="color: #0000BB">2</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;wrong&nbsp;&nbsp;(as&nbsp;it&nbsp;is&nbsp;an&nbsp;expression)<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">static&nbsp;</span><span style="color: #0000BB">$int&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">sqrt</span><span style="color: #007700">(</span><span style="color: #0000BB">121</span><span style="color: #007700">);&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;wrong&nbsp;&nbsp;(as&nbsp;it&nbsp;is&nbsp;an&nbsp;expression&nbsp;too)<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$int</span><span style="color: #007700">++;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$int</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
       </div>

      </div>
     </p>
    </p></blockquote>
    <p class="para">
     静态声明是在编译时解析的。
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <p class="para">
      在函数之外使用 <em>global</em> 关键字不算错。可以用于在一个函数之内包含文件时。
     </p>
    </p></blockquote>
   </div>

   <div class="sect2" id="language.variables.scope.references">
    <h3 class="title">全局和静态变量的引用</h3>
    <p class="simpara">
     在 Zend 引擎 1 代，它驱动了 PHP4，对于变量的
     <a href="language.variables.scope.html#language.variables.scope.static" class="link">static</a> 和
     <a href="language.variables.scope.html#language.variables.scope.global" class="link">global</a>
     定义是以<a href="language.references.html" class="link">引用</a>的方式实现的。例如，在一个函数域内部用
     <em>global</em>
     语句导入的一个真正的全局变量实际上是建立了一个到全局变量的引用。这有可能导致预料之外的行为，如以下例子所演示的：
    </p>

    <div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">test_global_ref</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;global&nbsp;</span><span style="color: #0000BB">$obj</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$obj&nbsp;</span><span style="color: #007700">=&nbsp;&amp;new&nbsp;</span><span style="color: #0000BB">stdclass</span><span style="color: #007700">;<br />}<br /><br />function&nbsp;</span><span style="color: #0000BB">test_global_noref</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;global&nbsp;</span><span style="color: #0000BB">$obj</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$obj&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">stdclass</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">test_global_ref</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$obj</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">test_global_noref</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$obj</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>

   <p class="para">以上例程会输出：</p>

    <div class="example-contents screen"><br />
NULL<br />
object(stdClass)(0) {<br />
}<br />
    </div>

    <p class="simpara">
     类似的行为也适用于
     <em>static</em> 语句。引用并不是静态地存储的：
    </p>

    <div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;&amp;</span><span style="color: #0000BB">get_instance_ref</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;</span><span style="color: #0000BB">$obj</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'Static&nbsp;object:&nbsp;'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$obj</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!isset(</span><span style="color: #0000BB">$obj</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;将一个引用赋值给静态变量<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$obj&nbsp;</span><span style="color: #007700">=&nbsp;&amp;new&nbsp;</span><span style="color: #0000BB">stdclass</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$obj</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">property</span><span style="color: #007700">++;<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$obj</span><span style="color: #007700">;<br />}<br /><br />function&nbsp;&amp;</span><span style="color: #0000BB">get_instance_noref</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;</span><span style="color: #0000BB">$obj</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'Static&nbsp;object:&nbsp;'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$obj</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!isset(</span><span style="color: #0000BB">$obj</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;将一个对象赋值给静态变量<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$obj&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">stdclass</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$obj</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">property</span><span style="color: #007700">++;<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$obj</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">$obj1&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">get_instance_ref</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$still_obj1&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">get_instance_ref</span><span style="color: #007700">();<br />echo&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$obj2&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">get_instance_noref</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$still_obj2&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">get_instance_noref</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>

   <p class="para">以上例程会输出：</p>

    <div class="example-contents screen"><br />
Static object: NULL<br />
Static object: NULL<br />
<br />
Static object: NULL<br />
Static object: object(stdClass)(1) {<br />
  [&quot;property&quot;]=&gt;<br />
  int(1)<br />
}<br />
    </div>

    <p class="simpara">
     上例演示了当把一个引用赋值给一个静态变量时，第二次调用
     <em>&amp;get_instance_ref()</em> 函数时其值并没有被<em class="emphasis">记住</em>。
    </p>
   </div>
  </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="115085""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#115085" class="date">23-May-2014 09:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Exemplo #6 don't work on portuguese version.<br />
<br />
You need to call Teste() function, not Test()</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113913""></a>
  <div class="note">
   <strong class="user">Jonathan Kenigson</strong>
   <a href="#113913" class="date">17-Dec-2013 08:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just a note about static properties declared at class level:<br />
<br />
class Test_Class {<br />
&nbsp; static $a = 0;<br />
&nbsp; public function ReturnVar(){<br />
&nbsp;&nbsp;&nbsp; return $this-&gt;a;<br />
&nbsp; }<br />
&nbsp; }<br />
&nbsp; $b = new Test_Class();<br />
&nbsp; echo $b-&gt;ReturnVar();<br />
<br />
Will not output "0"&nbsp; because $a is declared static. Changing "static" to "public" or "private" will produce the output "0".</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113836""></a>
  <div class="note">
   <strong class="user">Ray.Paseur often uses Gmail</strong>
   <a href="#113836" class="date">07-Dec-2013 01:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Variable "Visibility" in PHP Object Oriented Programming is documented here:<br />
<a href="http://php.net/manual/en/language.oop5.visibility.php" rel="nofollow" target="_blank">http://php.net/manual/en/language.oop5.visibility.php</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113384""></a>
  <div class="note">
   <strong class="user">Tomas Binek</strong>
   <a href="#113384" class="date">04-Oct-2013 10:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be careful when using autoloaders:<br />
Any variables that are declared in autoloaded files in global context are in fact local variables to the autoload function.<br />
Suggestion:<br />
Use explicit global keyword even in global context of a file.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113115""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#113115" class="date">01-Sep-2013 06:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// if you really want to create a variable within its own scope <br />
// that does not have access to variables outside its scope create a function<br />
<br />
</span><span class="default">$var </span><span class="keyword">= </span><span class="string">"hello"</span><span class="keyword">;<br />
<br />
</span><span class="default">$func </span><span class="keyword">= function(){<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="comment">// declare variables here that will only last throughout this scope<br />
<br />
&nbsp;&nbsp; &nbsp; </span><span class="keyword">if( !isset(</span><span class="default">$var</span><span class="keyword">) ) </span><span class="comment">// var will not be set in this scope<br />
&nbsp;&nbsp; &nbsp; </span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$var </span><span class="keyword">= </span><span class="string">"i was out of scope"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; echo </span><span class="default">$var</span><span class="keyword">;<br />
<br />
};<br />
<br />
echo </span><span class="string">"</span><span class="default">$var</span><span class="string">&lt;br /&gt;"</span><span class="keyword">;<br />
<br />
</span><span class="default">$func</span><span class="keyword">(); </span><span class="comment">// invoke the function<br />
<br />
</span><span class="keyword">echo </span><span class="string">"&lt;br /&gt;"</span><span class="keyword">.</span><span class="string">'$var'</span><span class="keyword">.</span><span class="string">" never changed from </span><span class="default">$var</span><span class="string">"</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
outputs :<br />
<br />
hello<br />
i was out of scope<br />
$var never changed from hello</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111164""></a>
  <div class="note">
   <strong class="user">warbo</strong>
   <a href="#111164" class="date">22-Jan-2013 03:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An alternative to static variables is to use an anonymous function. Here's an example with a simple counter which goes up on each call:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// Static version<br />
</span><span class="default">$staticCounter </span><span class="keyword">= function() {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Make $a static, so its value is preserved<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">static </span><span class="default">$a </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$a</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$a</span><span class="keyword">;<br />
};<br />
echo </span><span class="default">$staticCounter</span><span class="keyword">();<br />
echo </span><span class="default">$staticCounter</span><span class="keyword">();<br />
echo </span><span class="default">$staticCounter</span><span class="keyword">();<br />
</span><span class="comment">// Output:<br />
// 1<br />
// 2<br />
// 3<br />
<br />
// Closure version<br />
</span><span class="default">$counterFactory </span><span class="keyword">= function () {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// We *assign* $a in this function<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$a </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return function() use (&amp;</span><span class="default">$a</span><span class="keyword">) {&nbsp; </span><span class="comment">// Notice the &amp;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // We *use* $a in this function<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$a</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; };<br />
};<br />
</span><span class="comment">// The above is a 'counter factory'; when called it returns a counter<br />
</span><span class="default">$closureCounter1 </span><span class="keyword">= </span><span class="default">$counterFactory</span><span class="keyword">();<br />
echo </span><span class="default">$closureCounter1</span><span class="keyword">();<br />
echo </span><span class="default">$closureCounter1</span><span class="keyword">();<br />
echo </span><span class="default">$closureCounter1</span><span class="keyword">();<br />
</span><span class="comment">// Output:<br />
// 1<br />
// 2<br />
// 3<br />
<br />
// If we call our 'factory' again, we get another counter, independent of the first<br />
</span><span class="default">$closureCounter2 </span><span class="keyword">= </span><span class="default">$counterFactory</span><span class="keyword">();<br />
echo </span><span class="default">$closureCounter1</span><span class="keyword">();<br />
echo </span><span class="default">$closureCounter2</span><span class="keyword">();<br />
echo </span><span class="default">$closureCounter1</span><span class="keyword">();<br />
echo </span><span class="default">$closureCounter2</span><span class="keyword">();<br />
</span><span class="comment">// Output (notice that we're calling both counters)<br />
// 4<br />
// 1<br />
// 5<br />
// 2<br />
<br />
// We can do it with arguments too<br />
</span><span class="default">$makeCounterFrom </span><span class="keyword">= function(</span><span class="default">$start</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return function() use (&amp;</span><span class="default">$start</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$start</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$start</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; };<br />
};<br />
</span><span class="default">$yearCounter </span><span class="keyword">= </span><span class="default">$makeCounterFrom</span><span class="keyword">(</span><span class="default">2012</span><span class="keyword">);<br />
echo </span><span class="default">$yearCounter</span><span class="keyword">();<br />
echo </span><span class="default">$yearCounter</span><span class="keyword">();<br />
</span><span class="comment">// Output<br />
// 2013<br />
// 2014<br />
</span><span class="default">?&gt;<br />
</span><br />
This use of closures may be familiar from Javascript's 'one-shot' functions "(function() {...})()". In PHP we can do this on 2 lines using a variable, or with 'call_user_func'.<br />
<br />
It's useful when a regular function isn't enough, but a whole class is overkill.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109479""></a>
  <div class="note">
   <strong class="user">pangxiezhou at gmail dot com</strong>
   <a href="#109479" class="date">20-Jul-2012 11:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
assign after static variable declare：<br />
<br />
<span class="default">&lt;?php <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">test</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; static </span><span class="default">$local_var</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$local_var</span><span class="keyword">=</span><span class="default">9</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$local_var</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">test</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">test</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
</span><span class="default">?&gt;<br />
</span><br />
output:<br />
99<br />
<br />
<span class="default">&lt;?php <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">test</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; static </span><span class="default">$local_var</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$local_var</span><span class="keyword">+=</span><span class="default">3</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$local_var</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">test</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">test</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
</span><span class="default">?&gt;<br />
</span><br />
output:<br />
37</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109310""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#109310" class="date">05-Jul-2012 08:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It will be obvious for most of you: changing value of a static in one instance changes value in all instances.<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">class </span><span class="default">example </span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public static </span><span class="default">$s </span><span class="keyword">= </span><span class="string">'unchanged'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public function </span><span class="default">set</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">::</span><span class="default">$s </span><span class="keyword">= </span><span class="string">'changed'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$o </span><span class="keyword">= new </span><span class="default">example</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$p </span><span class="keyword">= new </span><span class="default">example</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$o</span><span class="keyword">-&gt;</span><span class="default">set</span><span class="keyword">();<br />
<br />
&nbsp;&nbsp;&nbsp; print </span><span class="string">"</span><span class="default">$o</span><span class="string"> static: </span><span class="keyword">{</span><span class="default">$o</span><span class="keyword">::</span><span class="default">$i</span><span class="keyword">}</span><span class="string">\n</span><span class="default">$p</span><span class="string"> static: </span><span class="keyword">{</span><span class="default">$p</span><span class="keyword">::</span><span class="default">$i</span><span class="keyword">}</span><span class="string">"</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Output will be:<br />
<br />
$o static: changed<br />
$p static: changed</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106178""></a>
  <div class="note">
   <strong class="user">sideshowAnthony at googlemail dot com</strong>
   <a href="#106178" class="date">17-Oct-2011 11:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It can be nice to use static variables in class member functions.
<br />
This avoids a 'class global' like $this-&gt;template.
<br />
Also, I like the system of get and set using the same function.
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
</span><span class="keyword">class </span><span class="default">my_page
<br />
</span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">template</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; static </span><span class="default">$template </span><span class="keyword">= </span><span class="string">'templates/page.html'</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$name</span><span class="keyword">) </span><span class="default">$template </span><span class="keyword">= </span><span class="string">"templates/</span><span class="keyword">{</span><span class="default">$name</span><span class="keyword">}</span><span class="string">.html"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else return </span><span class="default">$template</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />

<br />
</span><span class="default">$p </span><span class="keyword">= new </span><span class="default">my_page</span><span class="keyword">;
<br />
</span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">template</span><span class="keyword">(</span><span class="string">'product'</span><span class="keyword">);
<br />
include </span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">template</span><span class="keyword">();
<br />

<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105925""></a>
  <div class="note">
   <strong class="user">dodothedreamer at gmail dot com</strong>
   <a href="#105925" class="date">26-Sep-2011 08:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that unlike Java and C++, variables declared inside blocks such as loops or if's, will also be recognized and accessible outside of the block, so:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">for(</span><span class="default">$j</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$j</span><span class="keyword">&lt;</span><span class="default">3</span><span class="keyword">; </span><span class="default">$j</span><span class="keyword">++)<br />
{<br />
&nbsp;&nbsp; &nbsp; if(</span><span class="default">$j </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a </span><span class="keyword">= </span><span class="default">4</span><span class="keyword">;<br />
}<br />
echo </span><span class="default">$a</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
Would print 4.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101699""></a>
  <div class="note">
   <strong class="user">travesty3 at gmail dot com</strong>
   <a href="#101699" class="date">06-Jan-2011 12:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was struggling forever to figure this out and finally tried the $GLOBALS["filename"] = $filename approach, and it worked for me.
<br />

<br />
This happens on one of my machines, on which I installed Zend AMF a few months before my most recent machine. The globals worked fine when calling the PHP script directly from a browser, but when I called the function from my Flash project, which uses Zend AMF to interface with the PHP script, I was seeing this problem, but it was fixed using this approach.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100884""></a>
  <div class="note">
   <strong class="user">php at keith tyler dot com</strong>
   <a href="#100884" class="date">12-Nov-2010 07:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Sometimes a variable available in global scope is not accessible via the 'global' keyword or the $GLOBALS superglobal array. I have not been able to replicate it in original code, but it occurs when a script is run under PHPUnit.<br />
<br />
PHPUnit provides a variable "$filename" that reflects the name of the file loaded on its command line. This is available in global scope, but not in object scope. For example, the following phpUnit script (call it GlobalScope.php):<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">print </span><span class="string">"Global scope FILENAME [</span><span class="default">$filename</span><span class="string">]\n"</span><span class="keyword">;<br />
class </span><span class="default">MyTestClass </span><span class="keyword">extends </span><span class="default">PHPUnit_Framework_TestCase </span><span class="keyword">{<br />
&nbsp; function </span><span class="default">testMyTest</span><span class="keyword">() {<br />
&nbsp;&nbsp;&nbsp; global </span><span class="default">$filename</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; print </span><span class="string">"Method scope global FILENAME [</span><span class="default">$filename</span><span class="string">]\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; print </span><span class="string">"Method scope GLOBALS[FILENAME] ["</span><span class="keyword">.</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">"filename"</span><span class="keyword">].</span><span class="string">"]\n"</span><span class="keyword">;<br />
&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
If you run this script via "phpunit GlobalScope.php", you will get:<br />
<br />
Global scope FILENAME [/home/ktyler/GlobalScope.php]<br />
PHPUnit 3.4.5 by Sebastian Bergmann.<br />
<br />
Method scope global FILENAME []<br />
Method scope GLOBALS[FILENAME] []<br />
.<br />
<br />
You have to -- strange as it seems -- do the following:<br />
<br />
<span class="default">&lt;?php<br />
$GLOBALS</span><span class="keyword">[</span><span class="string">"filename"</span><span class="keyword">]=</span><span class="default">$filename</span><span class="keyword">;<br />
print </span><span class="string">"Global scope FILENAME [</span><span class="default">$filename</span><span class="string">]\n"</span><span class="keyword">;<br />
class </span><span class="default">MyTestClass </span><span class="keyword">extends </span><span class="default">PHPUnit_Framework_TestCase </span><span class="keyword">{<br />
&nbsp; function </span><span class="default">testMyTest</span><span class="keyword">() {<br />
&nbsp;&nbsp;&nbsp; global </span><span class="default">$filename</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; print </span><span class="string">"Method scope global FILENAME [</span><span class="default">$filename</span><span class="string">]\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; print </span><span class="string">"Method scope GLOBALS[FILENAME] ["</span><span class="keyword">.</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">"filename"</span><span class="keyword">].</span><span class="string">"]\n"</span><span class="keyword">;<br />
&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
By doing this, both "global" and $GLOBALS work!<br />
<br />
I don't know what it is that PHPUnit does (I know it uses Reflection) that causes a globally available variable to be implicitly unavailable via "global" or $GLOBALS. But there it is.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100312""></a>
  <div class="note">
   <strong class="user">eduardo dot ferron at zeion dot net</strong>
   <a href="#100312" class="date">07-Oct-2010 03:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There're times when global variables comes in handy, like universal read only resources you just need to create once in your application and share to the rest of your scripts. But it may become quite hard to track with "variables".</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99074""></a>
  <div class="note">
   <strong class="user">pedro at worcel dot com</strong>
   <a href="#99074" class="date">26-Jul-2010 03:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Another way of working with a large ammount of global variables could be the following.<br />
<br />
<span class="default">&lt;?php<br />
<br />
$var </span><span class="keyword">= </span><span class="string">"3"</span><span class="keyword">;<br />
</span><span class="default">$smarty </span><span class="keyword">= new </span><span class="default">Smarty</span><span class="keyword">();<br />
<br />
function </span><span class="default">headers_set_404</span><span class="keyword">() {<br />
</span><span class="default">extract</span><span class="keyword">(</span><span class="default">$globals</span><span class="keyword">);<br />
<br />
echo </span><span class="default">$var </span><span class="keyword">. </span><span class="string">"&lt;br /&gt;"</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$smarty</span><span class="keyword">);<br />
<br />
return;<br />
<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Regards,<br />
Droope</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98811""></a>
  <div class="note">
   <strong class="user">HOSSEIN doesn&amp;#39;t want spam at TAKI.IR</strong>
   <a href="#98811" class="date">09-Jul-2010 09:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please note for using global variable in child functions:
<br />

<br />
This won't work correctly...
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">foo</span><span class="keyword">(){
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$f_a </span><span class="keyword">= </span><span class="string">'a'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">bar</span><span class="keyword">(){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; global </span><span class="default">$f_a</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'"f_a" in BAR is: ' </span><span class="keyword">. </span><span class="default">$f_a </span><span class="keyword">. </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;&nbsp; </span><span class="comment">// doesn't work, var is empty!
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">bar</span><span class="keyword">();
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'"f_a" in FOO is: ' </span><span class="keyword">. </span><span class="default">$f_a </span><span class="keyword">. </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
This will...
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">foo</span><span class="keyword">(){
<br />
&nbsp;&nbsp;&nbsp; global </span><span class="default">$f_a</span><span class="keyword">;&nbsp;&nbsp; </span><span class="comment">// &lt;- Notice to this
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$f_a </span><span class="keyword">= </span><span class="string">'a'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">bar</span><span class="keyword">(){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; global </span><span class="default">$f_a</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'"f_a" in BAR is: ' </span><span class="keyword">. </span><span class="default">$f_a </span><span class="keyword">. </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;&nbsp; </span><span class="comment">// work!, var is 'a'
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">bar</span><span class="keyword">();
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'"f_a" in FOO is: ' </span><span class="keyword">. </span><span class="default">$f_a </span><span class="keyword">. </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98577""></a>
  <div class="note">
   <strong class="user">jakub dot lopuszanski at nasza-klasa dot pl</strong>
   <a href="#98577" class="date">24-Jun-2010 11:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you use __autoload function to load classes' definitons, beware that "static local variables are resolved at compile time" (whatever it really means) and the order in which autoloads occur may impact the semantic.<br />
<br />
For example if you have:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Singleton</span><span class="keyword">{<br />
&nbsp; static public function </span><span class="default">get_instance</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; static </span><span class="default">$instance </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; if(</span><span class="default">$instance </span><span class="keyword">=== </span><span class="default">null</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$instance </span><span class="keyword">= new static();<br />
&nbsp;&nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; return </span><span class="default">$instance</span><span class="keyword">;<br />
&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
and two separate files A.php and B.php:<br />
class A extends Singleton{}<br />
class B extends A{}<br />
<br />
then depending on the order in which you access those two classes, and consequently, the order in which __autoload includes them, you can get strange results of calling B::get_instance() and A::get_instance().<br />
<br />
It seems that static local variables are alocated in as many copies as there are classes that inherit a method at the time of inclusion of parsing Singleton.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94259""></a>
  <div class="note">
   <strong class="user">moraesdno at gmail dot com</strong>
   <a href="#94259" class="date">26-Oct-2009 02:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Use the superglobal array $GLOBALS is faster than the global keyword. See:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">//Using the keyword global
<br />
</span><span class="default">$a</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;
<br />
</span><span class="default">$b</span><span class="keyword">=</span><span class="default">2</span><span class="keyword">;
<br />
function </span><span class="default">sum</span><span class="keyword">() {
<br />
&nbsp;&nbsp;&nbsp; global </span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$a </span><span class="keyword">+= </span><span class="default">$b</span><span class="keyword">;
<br />
}
<br />

<br />
&nbsp;</span><span class="default">$t </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);
<br />
&nbsp;for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">1000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {
<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">sum</span><span class="keyword">();
<br />
&nbsp;}
<br />
&nbsp;echo </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">)-</span><span class="default">$t</span><span class="keyword">;
<br />
&nbsp;echo </span><span class="string">" -- "</span><span class="keyword">.</span><span class="default">$a</span><span class="keyword">.</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;
<br />

<br />
</span><span class="comment">//Using the superglobal array
<br />
</span><span class="default">$a</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;
<br />
</span><span class="default">$b</span><span class="keyword">=</span><span class="default">2</span><span class="keyword">;
<br />
function </span><span class="default">sum2</span><span class="keyword">() {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'a'</span><span class="keyword">] += </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'b'</span><span class="keyword">];
<br />
}
<br />

<br />
&nbsp; </span><span class="default">$t </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);
<br />
&nbsp;for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">1000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {
<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">sum2</span><span class="keyword">();
<br />
&nbsp;}
<br />
&nbsp;echo </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">)-</span><span class="default">$t</span><span class="keyword">;
<br />
&nbsp;echo </span><span class="string">" -- "</span><span class="keyword">.</span><span class="default">$a</span><span class="keyword">.</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92868""></a>
  <div class="note">
   <strong class="user">Stephen Dewey</strong>
   <a href="#92868" class="date">12-Aug-2009 05:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For nested functions:<br />
<br />
This is probably obvious to most people, but global always refers to the variable in the global (top level) variable of that name, not just a variable in a higher-level scope. So this will not work:<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// $var1 is not declared in the global scope<br />
<br />
</span><span class="keyword">function </span><span class="default">a</span><span class="keyword">(</span><span class="default">$var1</span><span class="keyword">){<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">b</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; global </span><span class="default">$var1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$var1</span><span class="keyword">; </span><span class="comment">// there is no var1 in the global scope so nothing to echo<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">b</span><span class="keyword">();<br />
}<br />
<br />
</span><span class="default">a</span><span class="keyword">(</span><span class="string">'hello'</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92166""></a>
  <div class="note">
   <strong class="user">akam at akameng dot com</strong>
   <a href="#92166" class="date">12-Jul-2009 04:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Many Times Globality of variables will be the small issue, after long time I decided to use super globals.<br />
<br />
Super globals exists any where:<br />
$_SERVER, $_GET, $_POST .....<br />
<br />
Now for example:<br />
<br />
<span class="default">&lt;?php<br />
$foo</span><span class="keyword">[] = </span><span class="default">range</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">);<br />
</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'foo'</span><span class="keyword">] = </span><span class="default">$foo</span><span class="keyword">;<br />
</span><span class="default">a</span><span class="keyword">(); </span><span class="comment">//no parameters needed.<br />
</span><span class="default">b</span><span class="keyword">();<br />
</span><span class="default">$foo </span><span class="keyword">= </span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'foo'</span><span class="keyword">];<br />
<br />
</span><span class="default">Print_r</span><span class="keyword">(</span><span class="default">$foo</span><span class="keyword">);<br />
</span><span class="comment">/* out<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 0<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; 2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [3] =&gt; 3<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 4<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 5<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; 6<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [3] =&gt; 7<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 8<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 9<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; 10<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)<br />
<br />
*/<br />
</span><span class="keyword">function </span><span class="default">a</span><span class="keyword">(){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'foo'</span><span class="keyword">][] = </span><span class="default">range</span><span class="keyword">(</span><span class="default">4</span><span class="keyword">, </span><span class="default">7</span><span class="keyword">);<br />
}<br />
<br />
function </span><span class="default">b</span><span class="keyword">(){<br />
</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'foo'</span><span class="keyword">][] = </span><span class="default">range</span><span class="keyword">(</span><span class="default">8</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span>Note: the key must not be passed by the page via _POST method by the form, else the value will be over written</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91982""></a>
  <div class="note">
   <strong class="user">emartin at sigb dot net</strong>
   <a href="#91982" class="date">03-Jul-2009 04:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are used to include files which declare global variables, and if you now need to include these files in a function, you will see that those globals are declared in the function's scope and so they will be lost at the end of the function.<br />
<br />
You may use something like this to solve this problem:<br />
<br />
main_file.php :<br />
<span class="default">&lt;?php <br />
<br />
</span><span class="comment">//Some innocent variables which exist before the problem<br />
</span><span class="default">$a </span><span class="keyword">= </span><span class="default">42</span><span class="keyword">;<br />
</span><span class="default">$b </span><span class="keyword">= </span><span class="default">33</span><span class="keyword">;<br />
</span><span class="default">$c </span><span class="keyword">= </span><span class="default">56</span><span class="keyword">;<br />
<br />
function </span><span class="default">some_function</span><span class="keyword">() {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//Some variables that we don't want out of the function<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$saucisse </span><span class="keyword">= </span><span class="string">"saucisse"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$jambon </span><span class="keyword">= </span><span class="string">"jambon"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//Let's include another file<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$evalt </span><span class="keyword">= </span><span class="string">"require_once 'anothertest_include.php';"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$before_eval_vars </span><span class="keyword">= </span><span class="default">get_defined_vars</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; eval(</span><span class="default">$evalt</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//Let's extract the variables that were defined AFTER the call to 'eval'<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$function_variable_names </span><span class="keyword">= array(</span><span class="string">"function_variable_names" </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">, </span><span class="string">"before_eval_vars" </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">, </span><span class="string">"created" </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//We can generate a list of the newly created variables by substracting the list of the variables of the function and the list of the variables which existed before the call to the list of current variables at this point<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$created </span><span class="keyword">= </span><span class="default">array_diff_key</span><span class="keyword">(</span><span class="default">get_defined_vars</span><span class="keyword">(), </span><span class="default">$GLOBALS</span><span class="keyword">, </span><span class="default">$function_variable_names</span><span class="keyword">, </span><span class="default">$before_eval_vars</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//Now we globalize them<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$created </span><span class="keyword">as </span><span class="default">$created_name </span><span class="keyword">=&gt; </span><span class="default">$on_sen_fiche</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; global $</span><span class="default">$created_name</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//And we affect them<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">extract</span><span class="keyword">(</span><span class="default">$created</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
}<br />
<br />
</span><span class="default">some_function</span><span class="keyword">();<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">get_defined_vars</span><span class="keyword">());<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
included_file.php :<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">//Some variables that we want in the global scope of main_file.php<br />
</span><span class="default">$included_var_one </span><span class="keyword">= </span><span class="default">123</span><span class="keyword">;<br />
</span><span class="default">$included_var_two </span><span class="keyword">= </span><span class="default">465</span><span class="keyword">;<br />
</span><span class="default">$included_var_three </span><span class="keyword">= </span><span class="default">789</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89872""></a>
  <div class="note">
   <strong class="user">Leigh Harrison</strong>
   <a href="#89872" class="date">26-Mar-2009 07:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
External variables in a function
<br />

<br />
I needed to access dynamically-created variables from an included file within a helper function. Because the list of $path_* variables I needed to access from the other file is itself dynamic, I didn't want to have to declare all possible variables within the function, and I was concerned at the overhead of declaring =all= members of $GLOBALS[] as global. However the following code worked for me:
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp; </span><span class="keyword">function </span><span class="default">makePath</span><span class="keyword">(</span><span class="default">$root</span><span class="keyword">, </span><span class="default">$atom</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$atom</span><span class="keyword">, </span><span class="string">'/'</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$pos </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; global ${</span><span class="string">'path_'</span><span class="keyword">.</span><span class="default">$atom</span><span class="keyword">};&nbsp; 
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$path </span><span class="keyword">= ${</span><span class="string">'path_'</span><span class="keyword">.</span><span class="default">$atom</span><span class="keyword">};
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; else {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; global ${</span><span class="string">'path_'</span><span class="keyword">.</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$atom</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">)};
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$path </span><span class="keyword">= ${</span><span class="string">'path_'</span><span class="keyword">.</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$atom</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">)};
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$path</span><span class="keyword">) 
<br />
&nbsp;&nbsp; &nbsp;&nbsp; return (</span><span class="default">$pos </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ? </span><span class="default">$root</span><span class="keyword">.</span><span class="default">$path
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">: </span><span class="default">$root</span><span class="keyword">.</span><span class="default">$path</span><span class="keyword">.</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$atom</span><span class="keyword">, </span><span class="default">$pos </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; else
<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">NULL</span><span class="keyword">;
<br />
&nbsp; }
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Regards,
<br />

<br />
::Leigh</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88689""></a>
  <div class="note">
   <strong class="user">andrew at planetubh dot com</strong>
   <a href="#88689" class="date">03-Feb-2009 09:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Took me longer than I expected to figure this out, and thought others might find it useful.<br />
<br />
I created a function (safeinclude), which I use to include files; it does processing before the file is actually included (determine full path, check it exists, etc).<br />
<br />
Problem: Because the include was occurring inside the function, all of the variables inside the included file were inheriting the variable scope of the function; since the included files may or may not require global variables that are declared else where, it creates a problem.<br />
<br />
Most places (including here) seem to address this issue by something such as:<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//declare this before include<br />
</span><span class="keyword">global </span><span class="default">$myVar</span><span class="keyword">;<br />
</span><span class="comment">//or declare this inside the include file<br />
</span><span class="default">$nowglobal </span><span class="keyword">= </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'myVar'</span><span class="keyword">];<br />
</span><span class="default">?&gt;<br />
</span><br />
But, to make this work in this situation (where a standard PHP file is included within a function, being called from another PHP script; where it is important to have access to whatever global variables there may be)... it is not practical to employ the above method for EVERY variable in every PHP file being included by 'safeinclude', nor is it practical to staticly name every possible variable in the "global $this" approach. (namely because the code is modulized, and 'safeinclude' is meant to be generic)<br />
<br />
My solution: Thus, to make all my global variables available to the files included with my safeinclude function, I had to add the following code to my safeinclude function (before variables are used or file is included)<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">foreach (</span><span class="default">$GLOBALS </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">) { global $</span><span class="default">$key</span><span class="keyword">; }<br />
</span><span class="default">?&gt;<br />
</span><br />
Thus, complete code looks something like the following (very basic model):<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">safeinclude</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//This line takes all the global variables, and sets their scope within the function:<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$GLOBALS </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">) { global $</span><span class="default">$key</span><span class="keyword">; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/* Pre-Processing here: validate filename input, determine full path<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; of file, check that file exists, etc. This is obviously not<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; necessary, but steps I found useful. */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$exists</span><span class="keyword">==</span><span class="default">true</span><span class="keyword">) { include(</span><span class="string">"</span><span class="default">$file</span><span class="string">"</span><span class="keyword">); }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$exists</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
In the above, 'exists' &amp; 'file' are determined in the pre-processing. File is the full server path to the file, and exists is set to true if the file exists. This basic model can be expanded of course.&nbsp; In my own, I added additional optional parameters so that I can call safeinclude to see if a file exists without actually including it (to take advantage of my path/etc preprocessing, verses just calling the file exists function).<br />
<br />
Pretty simple approach that I could not find anywhere online; only other approach I could find was using PHP's eval().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88570""></a>
  <div class="note">
   <strong class="user">nullhility at gmail dot com</strong>
   <a href="#88570" class="date">29-Jan-2009 04:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Like functions, if you declare a variable in a class, then set it as global in that class, its value will not be retained outside of that class either.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">class </span><span class="default">global_reference
<br />
</span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$val</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__construct </span><span class="keyword">() {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; global </span><span class="default">$var</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">val </span><span class="keyword">= </span><span class="default">$var</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">dump_it </span><span class="keyword">()
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">debug_zval_dump</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">val</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">type_cast </span><span class="keyword">() 
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">val </span><span class="keyword">= (int) </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">val</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />
</span><span class="default">$var </span><span class="keyword">= </span><span class="string">"x"</span><span class="keyword">;
<br />
</span><span class="default">$obj </span><span class="keyword">= new </span><span class="default">global_reference</span><span class="keyword">();
<br />
</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">dump_it</span><span class="keyword">();
<br />
</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">type_cast</span><span class="keyword">();
<br />
echo </span><span class="string">"after change "</span><span class="keyword">;
<br />
</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">dump_it</span><span class="keyword">();
<br />
echo </span><span class="string">"original </span><span class="default">$var</span><span class="string">\n"</span><span class="keyword">;
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
The work-around is of course changing the assignment in the constructor to a reference assignment as such:
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//....
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">val </span><span class="keyword">= &amp;var;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//....
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
If the global you're setting is an object then no reference is necessary because of the way PHP deals with objects. If you don't want to reference to the same object however you can use the clone keyword.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">//...
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">global </span><span class="default">$Obj</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">obj_copy </span><span class="keyword">= clone </span><span class="default">$Obj</span><span class="keyword">;
<br />
</span><span class="comment">//...
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
[EDIT BY danbrown AT php DOT net:&nbsp; Merged all thoughts and notes by this author into a single note.]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85203""></a>
  <div class="note">
   <strong class="user">ddarjany at yahoo dot com</strong>
   <a href="#85203" class="date">20-Aug-2008 05:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that if you declare a variable in a function, then set it as global in that function, its value will not be retained outside of that function.&nbsp; This was tripping me up for a while so I thought it would be worth noting.<br />
<br />
<span class="default">&lt;?PHP<br />
<br />
foo</span><span class="keyword">();<br />
echo </span><span class="default">$a</span><span class="keyword">; </span><span class="comment">// echoes nothing<br />
<br />
</span><span class="default">bar</span><span class="keyword">();<br />
echo </span><span class="default">$b</span><span class="keyword">; </span><span class="comment">//echoes "b";<br />
<br />
</span><span class="keyword">function </span><span class="default">foo</span><span class="keyword">() {<br />
&nbsp; </span><span class="default">$a </span><span class="keyword">= </span><span class="string">"a"</span><span class="keyword">; <br />
&nbsp; global </span><span class="default">$a</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">bar</span><span class="keyword">() {<br />
&nbsp; global </span><span class="default">$b</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$b </span><span class="keyword">= </span><span class="string">"b"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83490""></a>
  <div class="note">
   <strong class="user">lgrk</strong>
   <a href="#83490" class="date">28-May-2008 03:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Useful function:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">cycle</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; static </span><span class="default">$switches </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; if (isset(</span><span class="default">$switches</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">])) </span><span class="default">$switches</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = !</span><span class="default">$switches</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]; else !</span><span class="default">$switches</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return (</span><span class="default">$switches</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">])?</span><span class="default">$a</span><span class="keyword">:</span><span class="default">$b</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Exeample<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">3</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$i</span><span class="keyword">.</span><span class="default">cycle</span><span class="keyword">(</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">).</span><span class="default">PHP_EOL</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$j </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$j</span><span class="keyword">&lt;</span><span class="default">5</span><span class="keyword">; </span><span class="default">$j</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">' '</span><span class="keyword">.</span><span class="default">$j</span><span class="keyword">.</span><span class="default">cycle</span><span class="keyword">(</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">).</span><span class="default">PHP_EOL</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$k </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$k</span><span class="keyword">&lt;</span><span class="default">3</span><span class="keyword">; </span><span class="default">$k</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'&nbsp; '</span><span class="keyword">.</span><span class="default">$k</span><span class="keyword">.</span><span class="default">cycle</span><span class="keyword">(</span><span class="string">'c'</span><span class="keyword">, </span><span class="string">'d'</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">).</span><span class="default">PHP_EOL</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="comment">/**<br />
Output:<br />
1a<br />
&nbsp;1a<br />
&nbsp; 1c<br />
&nbsp; 2d<br />
&nbsp;2b<br />
&nbsp; 1c<br />
&nbsp; 2d<br />
&nbsp;3a<br />
&nbsp; 1c<br />
&nbsp; 2d<br />
&nbsp;4b<br />
&nbsp; 1c<br />
&nbsp; 2d<br />
2b<br />
&nbsp;1a<br />
&nbsp; 1c<br />
&nbsp; 2d<br />
&nbsp;2b<br />
&nbsp; 1c<br />
&nbsp; 2d<br />
&nbsp;3a<br />
&nbsp; 1c<br />
&nbsp; 2d<br />
&nbsp;4b<br />
&nbsp; 1c<br />
&nbsp; 2d<br />
*/<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81506""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#81506" class="date">01-Mar-2008 08:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was pondering a little something regarding caching classes within a function in order to prevent the need to initiate them multiple times and not clutter the caching function's class properties with more values.<br />
<br />
I came here because I remembered something about references being lost. So I made a test to see if I could pull what I wanted to off anyway. Here's and example of how to get around the references lost issue. I hope it is helpful to someone else!<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">test1</span><span class="keyword">{}<br />
class </span><span class="default">test2</span><span class="keyword">{}<br />
class </span><span class="default">test3</span><span class="keyword">{}<br />
<br />
function </span><span class="default">cache</span><span class="keyword">( </span><span class="default">$class </span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; static </span><span class="default">$loaders </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$loaders</span><span class="keyword">[ </span><span class="default">$class </span><span class="keyword">] = new </span><span class="default">$class</span><span class="keyword">();<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">( </span><span class="default">$loaders </span><span class="keyword">);<br />
}<br />
print </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;<br />
</span><span class="default">cache</span><span class="keyword">( </span><span class="string">'test1' </span><span class="keyword">);<br />
</span><span class="default">cache</span><span class="keyword">( </span><span class="string">'test2' </span><span class="keyword">);<br />
</span><span class="default">cache</span><span class="keyword">( </span><span class="string">'test3' </span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78778""></a>
  <div class="note">
   <strong class="user">SID TRIVEDI</strong>
   <a href="#78778" class="date">27-Oct-2007 11:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">/*<br />
VARIABLE SCOPE : GLOBAL V/S STATIC<br />
<br />
If variable $count is defined global as under, instead of static, it does not work well as desired in repeated function calls.<br />
<br />
$count = 1; //if not defined STATIC, in each function call, it starts countig from one to 25.<br />
global $count;<br />
<br />
which gives folowing output:<br />
0123456789101112131415161718192021222324<br />
Total 24 numbers are printed.<br />
So far 26 function call(s) made.<br />
<br />
26272829303132333435363738394041424344454647484950<br />
Total 50 numbers are printed.<br />
So far 52 function call(s) made.<br />
*/<br />
<br />
</span><span class="keyword">function </span><span class="default">print_1to50</span><span class="keyword">()<br />
{<br />
</span><span class="comment">//&nbsp; &nbsp; $count = 1;<br />
//&nbsp; &nbsp; global $count;<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">static </span><span class="default">$count</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">; </span><span class="comment">// Initial assigment of One to $count, static declarion holds the last(previous) value of variable $count in each next function calls.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$limit </span><span class="keyword">= </span><span class="default">$count</span><span class="keyword">+</span><span class="default">24</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while(</span><span class="default">$count</span><span class="keyword">&lt;=</span><span class="default">$limit</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"</span><span class="default">$count</span><span class="string">"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count</span><span class="keyword">=</span><span class="default">$count</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$num_count</span><span class="keyword">= </span><span class="default">$count</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;br&gt;\n"</span><span class="keyword">. </span><span class="string">"Total </span><span class="default">$num_count</span><span class="string"> numbers are printed.&lt;br&gt;"</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return; </span><span class="comment">// return statement without parenthesis()or arguments denotes end of a function rather than returning any values to subsequent function call(s).<br />
</span><span class="keyword">} </span><span class="comment">// end of while loop<br />
<br />
</span><span class="default">$count</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
</span><span class="default">print_1to50</span><span class="keyword">();<br />
</span><span class="default">$count</span><span class="keyword">=</span><span class="default">$count</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">;<br />
print </span><span class="string">"So far </span><span class="default">$count</span><span class="string"> function call(s) made.&lt;br&gt;&lt;br&gt;"</span><span class="keyword">;<br />
<br />
</span><span class="default">print_1to50</span><span class="keyword">();<br />
</span><span class="default">$count</span><span class="keyword">=</span><span class="default">$count</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">;<br />
print </span><span class="string">"So far </span><span class="default">$count</span><span class="string"> function call(s) made.&lt;br&gt;"</span><span class="keyword">;<br />
</span><span class="comment">/*<br />
Which gives following output:<br />
12345678910111213141516171819202122232425<br />
Now I have printed 25 numbers.<br />
I have made 1 function call(s).<br />
26272829303132333435363738394041424344454647484950<br />
Now I have printed 50 numbers.<br />
I have made 2 function call(s).<br />
*/<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73890""></a>
  <div class="note">
   <strong class="user">mod</strong>
   <a href="#73890" class="date">14-Mar-2007 08:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Can not access to global variables from destructor, if obj is not unseted at the end:<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp; </span><span class="keyword">class </span><span class="default">A<br />
&nbsp;&nbsp; </span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; function </span><span class="default">__destruct</span><span class="keyword">()<br />
&nbsp;&nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; global </span><span class="default">$g_Obj</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;br&gt;#step 2: "</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$g_Obj</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; function </span><span class="default">start</span><span class="keyword">()<br />
&nbsp;&nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; global </span><span class="default">$g_Obj</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;br&gt;#step 1: "</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$g_Obj</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; };<br />
<br />
&nbsp; </span><span class="default">$g_Obj </span><span class="keyword">= new </span><span class="default">A</span><span class="keyword">();&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// start here<br />
&nbsp; </span><span class="default">$g_Obj</span><span class="keyword">-&gt;</span><span class="default">start</span><span class="keyword">();<br />
&nbsp; </span><span class="default">$g_Obj </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// !!! comment line and result will changed !!!<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Result, if line is not commented:<br />
<br />
#step 1: object(A)#1 (0) { } <br />
#step 2: object(A)#1 (0) { }<br />
<br />
Result, if line is commented:<br />
<br />
#step 1: object(A)#1 (0) { } <br />
#step 2: NULL</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69611""></a>
  <div class="note">
   <strong class="user">alan</strong>
   <a href="#69611" class="date">12-Sep-2006 07:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Using the global keyword inside a function to define a variable is essentially the same as passing the variable by reference as a parameter:
<br />

<br />
<span class="default">&lt;?php
<br />
somefunction</span><span class="keyword">(){
<br />
&nbsp;&nbsp; global </span><span class="default">$var</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
is the same as:
<br />

<br />
<span class="default">&lt;?php
<br />
somefunction</span><span class="keyword">(&amp; </span><span class="default">$a</span><span class="keyword">) {
<br />

<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
The advantage to using the keyword is if you have a long list of variables&nbsp; needed by the function - you dont have to pass them every time you call the function.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68304""></a>
  <div class="note">
   <strong class="user">sami doesn't want spam at no-eff-eks com</strong>
   <a href="#68304" class="date">21-Jul-2006 06:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PHP 5.1.4 doesn't seem to care about the static keyword. It doesn't let you use $this in a static method, but you can call class methods through an instance of the class using regular -&gt; notation. You can also call instance methods as class methods through the class itself. The documentiation here is plain wrong.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">class </span><span class="default">Foo </span><span class="keyword">{
<br />
&nbsp; public static function </span><span class="default">static_fun</span><span class="keyword">()
<br />
&nbsp; {
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="string">"This is a class method!\n"</span><span class="keyword">;
<br />
&nbsp; }
<br />
&nbsp; 
<br />
&nbsp; public function </span><span class="default">not_static_fun</span><span class="keyword">()
<br />
&nbsp; {
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="string">"This is an instance method!\n"</span><span class="keyword">;
<br />
&nbsp; }
<br />
}
<br />

<br />
echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;
<br />
echo </span><span class="string">"From Foo:\n"</span><span class="keyword">;
<br />
echo </span><span class="default">Foo</span><span class="keyword">::</span><span class="default">static_fun</span><span class="keyword">();
<br />
echo </span><span class="default">Foo</span><span class="keyword">::</span><span class="default">not_static_fun</span><span class="keyword">();
<br />
echo </span><span class="string">"\n"</span><span class="keyword">;
<br />

<br />
echo </span><span class="string">"From \$foo = new Foo():\n"</span><span class="keyword">;
<br />
</span><span class="default">$foo </span><span class="keyword">= new </span><span class="default">Foo</span><span class="keyword">();
<br />
echo </span><span class="default">$foo</span><span class="keyword">-&gt;</span><span class="default">static_fun</span><span class="keyword">();
<br />
echo </span><span class="default">$foo</span><span class="keyword">-&gt;</span><span class="default">not_static_fun</span><span class="keyword">();
<br />
echo </span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
You'll see the following output:
<br />

<br />
From Foo:
<br />
This is a class method!
<br />
This is an instance method!
<br />

<br />
From $foo = new Foo():
<br />
This is a class method!
<br />
This is an instance method!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="63500""></a>
  <div class="note">
   <strong class="user">larax at o2 dot pl</strong>
   <a href="#63500" class="date">23-Mar-2006 12:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
About more complex situation using global variables..<br />
<br />
Let's say we have two files:<br />
a.php<br />
<span class="default">&lt;?php <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">a</span><span class="keyword">() { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; include(</span><span class="string">"b.php"</span><span class="keyword">); <br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">a</span><span class="keyword">();<br />
</span><span class="default">?&gt;<br />
</span><br />
b.php<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $b </span><span class="keyword">= </span><span class="string">"something"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">b</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; global </span><span class="default">$b</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$b </span><span class="keyword">= </span><span class="string">"something new"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">b</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$b</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
You could expect that this script will return "something new" but no, it will return "something". To make it working properly, you must add global keyword in $b definition, in above example it will be:<br />
<br />
global $b;<br />
$b = "something";</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="61756""></a>
  <div class="note">
   <strong class="user">franp at free dot fr</strong>
   <a href="#61756" class="date">11-Feb-2006 01:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to access a table row using $GLOBALS, you must do it outside string delimiters or using curl braces :
<br />

<br />
<span class="default">&lt;?php
<br />
$siteParams</span><span class="keyword">[</span><span class="string">"siteName"</span><span class="keyword">] = </span><span class="string">"myweb"</span><span class="keyword">;
<br />

<br />
function </span><span class="default">foo</span><span class="keyword">() {
<br />
</span><span class="default">$table </span><span class="keyword">= </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">"siteParams"</span><span class="keyword">][</span><span class="string">"siteName"</span><span class="keyword">].</span><span class="string">"articles"</span><span class="keyword">;&nbsp; </span><span class="comment">// OK
<br />
</span><span class="keyword">echo </span><span class="default">$table</span><span class="keyword">; </span><span class="comment">// output&nbsp; "mywebarticles"
<br />
</span><span class="default">$table </span><span class="keyword">= </span><span class="string">"</span><span class="keyword">{</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">"siteParams"</span><span class="keyword">][</span><span class="string">"siteName"</span><span class="keyword">]}</span><span class="string">articles"</span><span class="keyword">; </span><span class="comment">// OK
<br />
</span><span class="keyword">echo </span><span class="default">$table</span><span class="keyword">; </span><span class="comment">// output&nbsp; "mywebarticles"
<br />
</span><span class="default">$table </span><span class="keyword">= </span><span class="string">"</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">siteParams</span><span class="keyword">]</span><span class="string">[siteName]articles"</span><span class="keyword">;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Not OK
<br />
</span><span class="keyword">echo </span><span class="default">$table</span><span class="keyword">; </span><span class="comment">// output&nbsp; "Array[siteName]article"
<br />

<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="string">"UPDATE </span><span class="default">$table</span><span class="string"> ..."</span><span class="keyword">);
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Or use global :
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">foo</span><span class="keyword">() {
<br />
global </span><span class="default">$siteParams</span><span class="keyword">;
<br />
</span><span class="default">$table </span><span class="keyword">= </span><span class="string">"</span><span class="default">$siteParams</span><span class="keyword">[</span><span class="default">siteName</span><span class="keyword">]</span><span class="string">articles"</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// OK
<br />
</span><span class="keyword">echo </span><span class="default">$table</span><span class="keyword">; </span><span class="comment">// output&nbsp; "mywebarticles"
<br />

<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="string">"UPDATE </span><span class="default">$table</span><span class="string"> ..."</span><span class="keyword">);
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60231""></a>
  <div class="note">
   <strong class="user">marcin</strong>
   <a href="#60231" class="date">30-Dec-2005 06:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Sometimes in PHP 4 you need static variabiles in class. You can do it by referencing static variable in constructor to the class variable:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">test&nbsp; </span><span class="keyword">{<br />
<br />
&nbsp;&nbsp; var </span><span class="default">$var</span><span class="keyword">;<br />
&nbsp;&nbsp; var </span><span class="default">$static_var</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">test</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; static </span><span class="default">$s</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">static_var </span><span class="keyword">=&amp; </span><span class="default">$s</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; <br />
}<br />
<br />
&nbsp;</span><span class="default">$a</span><span class="keyword">=new </span><span class="default">test</span><span class="keyword">();<br />
<br />
&nbsp;</span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">static_var</span><span class="keyword">=</span><span class="default">4</span><span class="keyword">;<br />
&nbsp;</span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">var</span><span class="keyword">=</span><span class="default">4</span><span class="keyword">;<br />
&nbsp;<br />
&nbsp;</span><span class="default">$b</span><span class="keyword">=new </span><span class="default">test</span><span class="keyword">();<br />
&nbsp;<br />
&nbsp;echo </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">static_var</span><span class="keyword">; </span><span class="comment">//this will output 4<br />
&nbsp;</span><span class="keyword">echo </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">var</span><span class="keyword">; </span><span class="comment">//this will output nul<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="59676""></a>
  <div class="note">
   <strong class="user">warhog at warhog dot net</strong>
   <a href="#59676" class="date">13-Dec-2005 09:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Some interesting behavior (tested with PHP5), using the static-scope-keyword inside of class-methods.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">sample_class<br />
</span><span class="keyword">{<br />
&nbsp; public function </span><span class="default">func_having_static_var</span><span class="keyword">(</span><span class="default">$x </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; static </span><span class="default">$var </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$x </span><span class="keyword">=== </span><span class="default">NULL</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; { return </span><span class="default">$var</span><span class="keyword">; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$var </span><span class="keyword">= </span><span class="default">$x</span><span class="keyword">;<br />
&nbsp; }<br />
}<br />
<br />
</span><span class="default">$a </span><span class="keyword">= new </span><span class="default">sample_class</span><span class="keyword">();<br />
</span><span class="default">$b </span><span class="keyword">= new </span><span class="default">sample_class</span><span class="keyword">();<br />
<br />
echo </span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">func_having_static_var</span><span class="keyword">().</span><span class="string">"\n"</span><span class="keyword">;<br />
echo </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">func_having_static_var</span><span class="keyword">().</span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="comment">// this will output (as expected):<br />
//&nbsp; 0<br />
//&nbsp; 0<br />
<br />
</span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">func_having_static_var</span><span class="keyword">(</span><span class="default">3</span><span class="keyword">);<br />
<br />
echo </span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">func_having_static_var</span><span class="keyword">().</span><span class="string">"\n"</span><span class="keyword">;<br />
echo </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">func_having_static_var</span><span class="keyword">().</span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="comment">// this will output:<br />
//&nbsp; 3<br />
//&nbsp; 3<br />
// maybe you expected:<br />
//&nbsp; 3<br />
//&nbsp; 0<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
One could expect "3 0" to be outputted, as you might think that $a-&gt;func_having_static_var(3); only alters the value of the static $var of the function "in" $a - but as the name says, these are class-methods. Having an object is just a collection of properties, the functions remain at the class. So if you declare a variable as static inside a function, it's static for the whole class and all of its instances, not for each object.<br />
<br />
Maybe it's senseless to post that.. cause if you want to have the behaviour that I expected, you can simply use a variable of the object itself:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">sample_class<br />
</span><span class="keyword">{ protected </span><span class="default">$var </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; <br />
&nbsp; function </span><span class="default">func</span><span class="keyword">(</span><span class="default">$x </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">)<br />
&nbsp; { </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">var </span><span class="keyword">= </span><span class="default">$x</span><span class="keyword">; }<br />
} </span><span class="default">?&gt;<br />
</span><br />
I believe that all normal-thinking people would never even try to make this work with the static-keyword, for those who try (like me), this note maybe helpfull.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56749""></a>
  <div class="note">
   <strong class="user">tc underline at gmx TLD ch</strong>
   <a href="#56749" class="date">14-Sep-2005 12:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Pay attention while unsetting variables inside functions:<br />
<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= </span><span class="string">"1234"</span><span class="keyword">;<br />
echo </span><span class="string">"&lt;pre&gt;"</span><span class="keyword">;<br />
echo </span><span class="string">"outer: </span><span class="default">$a</span><span class="string">\n"</span><span class="keyword">;<br />
function </span><span class="default">testa</span><span class="keyword">()<br />
{<br />
&nbsp;&nbsp;&nbsp; global </span><span class="default">$a</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"&nbsp;&nbsp; inner testa: </span><span class="default">$a</span><span class="string">\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; unset (</span><span class="default">$a</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"&nbsp;&nbsp; inner testa: </span><span class="default">$a</span><span class="string">\n"</span><span class="keyword">;<br />
}<br />
function </span><span class="default">testb</span><span class="keyword">()<br />
{<br />
&nbsp;&nbsp;&nbsp; global </span><span class="default">$a</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"&nbsp;&nbsp; inner testb: </span><span class="default">$a</span><span class="string">\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$a </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"&nbsp;&nbsp; inner testb: </span><span class="default">$a</span><span class="string">\n"</span><span class="keyword">;<br />
}<br />
</span><span class="default">testa</span><span class="keyword">();<br />
echo </span><span class="string">"outer: </span><span class="default">$a</span><span class="string">\n"</span><span class="keyword">;<br />
</span><span class="default">testb</span><span class="keyword">();<br />
echo </span><span class="string">"outer: </span><span class="default">$a</span><span class="string">\n"</span><span class="keyword">;<br />
echo </span><span class="string">"&lt;/pre&gt;"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
/***** Result:<br />
outer: 1234<br />
&nbsp;&nbsp; inner testa: 1234<br />
&nbsp;&nbsp; inner testa: <br />
outer: 1234<br />
&nbsp;&nbsp; inner testb: 1234<br />
&nbsp;&nbsp; inner testb: <br />
outer: <br />
******/<br />
<br />
Took me 1 hour to find out why my variable was still there after unsetting it ...<br />
<br />
Thomas Candrian</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55595""></a>
  <div class="note">
   <strong class="user">thomas at pixtur dot de</strong>
   <a href="#55595" class="date">08-Aug-2005 05:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be careful with "require", "require_once" and "include" inside functions. Even if the included file seems to define global variables, they might not be defined as such.
<br />

<br />
consider those two files:
<br />

<br />
---index.php------------------------------
<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">foo</span><span class="keyword">() {
<br />
&nbsp;require_once(</span><span class="string">"class_person.inc"</span><span class="keyword">);
<br />

<br />
&nbsp;</span><span class="default">$person</span><span class="keyword">= new </span><span class="default">Person</span><span class="keyword">();
<br />
&nbsp;echo </span><span class="default">$person</span><span class="keyword">-&gt;</span><span class="default">my_flag</span><span class="keyword">; </span><span class="comment">// should be true, but is undefined
<br />
</span><span class="keyword">}
<br />

<br />
</span><span class="default">foo</span><span class="keyword">();
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
---class_person.inc----------------------------
<br />
<span class="default">&lt;?php
<br />
$seems_global</span><span class="keyword">=</span><span class="default">true</span><span class="keyword">;
<br />

<br />
class </span><span class="default">Person </span><span class="keyword">{
<br />
&nbsp; public </span><span class="default">$my_flag</span><span class="keyword">;
<br />

<br />
&nbsp;public function&nbsp; </span><span class="default">__construct</span><span class="keyword">() {
<br />
&nbsp;&nbsp; global </span><span class="default">$seems_global</span><span class="keyword">;
<br />
&nbsp;&nbsp; </span><span class="default">$my_flag</span><span class="keyword">= </span><span class="default">$seems_global
<br />
&nbsp;</span><span class="keyword">}
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
---------------------------------
<br />

<br />
The reason for this behavior is quiet obvious, once you figured it out. Sadly this might not be always as easy as in this example. A solution&nbsp; would be to add the line...
<br />

<br />
<span class="default">&lt;?php </span><span class="keyword">global </span><span class="default">$seems_global</span><span class="keyword">; </span><span class="default">?&gt;
<br />
</span>
<br />
at the beginning of "class_person.inc". That makes sure you set the global-var.
<br />

<br />
&nbsp;&nbsp; best regards
<br />
&nbsp;&nbsp;&nbsp; tom
<br />

<br />
ps: bug search time approx. 1 hour.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53915""></a>
  <div class="note">
   <strong class="user">jameslee at cs dot nmt dot edu</strong>
   <a href="#53915" class="date">16-Jun-2005 11:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It should be noted that a static variable inside a method is static across all instances of that class, i.e., all objects of that class share the same static variable.&nbsp; For example the code:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">test </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">z</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; static </span><span class="default">$n </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$n</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$n</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$a </span><span class="keyword">=&amp; new </span><span class="default">test</span><span class="keyword">();<br />
</span><span class="default">$b </span><span class="keyword">=&amp; new </span><span class="default">test</span><span class="keyword">();<br />
print </span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">z</span><span class="keyword">();&nbsp; </span><span class="comment">// prints 1, as it should<br />
</span><span class="keyword">print </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">z</span><span class="keyword">();&nbsp; </span><span class="comment">// prints 2 because $a and $b have the same $n<br />
</span><span class="default">?&gt;<br />
</span><br />
somewhat unexpectedly prints:<br />
1<br />
2</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52343""></a>
  <div class="note">
   <strong class="user">kouber at php dot net</strong>
   <a href="#52343" class="date">28-Apr-2005 02:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need all your global variables available in a function, you can use this:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">foo</span><span class="keyword">() {
<br />
&nbsp; </span><span class="default">extract</span><span class="keyword">(</span><span class="default">$GLOBALS</span><span class="keyword">);
<br />
&nbsp; </span><span class="comment">// here you have all global variables
<br />

<br />
</span><span class="keyword">}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52294""></a>
  <div class="note">
   
   <a href="#52294" class="date">27-Apr-2005 01:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be careful if your static variable is an array and you return<br />
one of it's elements: Other than a scalar variable, elements<br />
of an array are returned as reference (regardless if you <br />
didn't define them to be returned by reference).<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">incr</span><span class="keyword">(&amp;</span><span class="default">$int</span><span class="keyword">) {<br />
&nbsp; return </span><span class="default">$int</span><span class="keyword">++;<br />
}<br />
<br />
function </span><span class="default">return_copyof_scalar</span><span class="keyword">() {<br />
&nbsp; static </span><span class="default">$v</span><span class="keyword">;<br />
&nbsp; if (!</span><span class="default">$v</span><span class="keyword">)&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$v </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp; return(</span><span class="default">$v</span><span class="keyword">); <br />
} <br />
<br />
function </span><span class="default">return_copyof_arrayelement</span><span class="keyword">() {<br />
&nbsp; static </span><span class="default">$v</span><span class="keyword">;<br />
&nbsp; if (!</span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$v </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$v</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="default">1</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; return(</span><span class="default">$v</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]); <br />
} <br />
<br />
echo </span><span class="string">"scalar: "</span><span class="keyword">.<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">incr</span><span class="keyword">(</span><span class="default">return_copyof_scalar</span><span class="keyword">()).<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">incr</span><span class="keyword">(</span><span class="default">return_copyof_scalar</span><span class="keyword">()).<br />
&nbsp;&nbsp; &nbsp; </span><span class="string">"\n"</span><span class="keyword">; <br />
echo </span><span class="string">"arrayelement: "</span><span class="keyword">.<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">incr</span><span class="keyword">(</span><span class="default">return_copyof_arrayelement</span><span class="keyword">()).<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">incr</span><span class="keyword">(</span><span class="default">return_copyof_arrayelement</span><span class="keyword">()).<br />
&nbsp;&nbsp; &nbsp; </span><span class="string">"\n"</span><span class="keyword">; <br />
</span><span class="default">?&gt;<br />
</span><br />
Should print<br />
<br />
scalar: 11<br />
arrayelement: 11<br />
<br />
but it prints:<br />
<br />
scalar: 11<br />
arrayelement: 12<br />
<br />
as in the second case the arrays element was returned by<br />
reference. According to a guy from the bug reports the <br />
explanation for this behaviour should be somewhere here in <br />
the documentation (in 'the part with title: "References with <br />
global and static variables"'). Unfortunately I can't find <br />
anything about that here. As the guys from the bug reports <br />
are surely right in every case, maybe there is something <br />
missing in the documentation. Sadly I don't have a good <br />
explanation why this happens, so I decided to document at <br />
least the behaviour.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52148""></a>
  <div class="note">
   <strong class="user">vdephily at bluemetrix dot com</strong>
   <a href="#52148" class="date">22-Apr-2005 11:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be carefull about nested functions :<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// won't work :<br />
</span><span class="keyword">function </span><span class="default">foo1</span><span class="keyword">()<br />
{<br />
&nbsp; </span><span class="default">$who </span><span class="keyword">= </span><span class="string">"world"</span><span class="keyword">;<br />
&nbsp; function </span><span class="default">bar1</span><span class="keyword">()<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; global </span><span class="default">$who</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"Hello </span><span class="default">$who</span><span class="string">"</span><span class="keyword">;<br />
&nbsp; }<br />
}<br />
<br />
</span><span class="comment">// will work :<br />
</span><span class="keyword">function </span><span class="default">foo2</span><span class="keyword">()<br />
{<br />
&nbsp; </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'who'</span><span class="keyword">] = </span><span class="string">"world"</span><span class="keyword">;<br />
&nbsp; function </span><span class="default">bar2</span><span class="keyword">()<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; global </span><span class="default">$who</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"Hello </span><span class="default">$who</span><span class="string">"</span><span class="keyword">;<br />
&nbsp; }<br />
}<br />
<br />
</span><span class="comment">// also note, of course :<br />
</span><span class="keyword">function </span><span class="default">foo3</span><span class="keyword">()<br />
{<br />
&nbsp; </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'who'</span><span class="keyword">] = </span><span class="string">"world"</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="comment">// won't work<br />
&nbsp; </span><span class="keyword">echo </span><span class="string">"Hello </span><span class="default">$who</span><span class="string">"</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="comment">// will work<br />
&nbsp; </span><span class="keyword">global </span><span class="default">$who</span><span class="keyword">;<br />
&nbsp; echo </span><span class="string">"Hello </span><span class="default">$who</span><span class="string">"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="45487""></a>
  <div class="note">
   <strong class="user">pulstar at ig dot com dot br</strong>
   <a href="#45487" class="date">09-Sep-2004 03:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need all your global variables available in a function, you can use this:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">foo</span><span class="keyword">(</span><span class="default">parameters</span><span class="keyword">) {<br />
&nbsp; if(</span><span class="default">version_compare</span><span class="keyword">(</span><span class="default">phpversion</span><span class="keyword">(),</span><span class="string">"4.3.0"</span><span class="keyword">)&gt;=</span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$GLOBALS </span><span class="keyword">as </span><span class="default">$arraykey</span><span class="keyword">=&gt;</span><span class="default">$arrayvalue</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; global $</span><span class="default">$arraykey</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; </span><span class="comment">// now all global variables are locally available...<br />
</span><span class="keyword">}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="45282""></a>
  <div class="note">
   <strong class="user">info AT SyPlex DOT net</strong>
   <a href="#45282" class="date">01-Sep-2004 02:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Some times you need to access the same static in more than one function. There is an easy way to solve this problem:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="comment">// We need a way to get a reference of our static<br />
&nbsp; </span><span class="keyword">function &amp;</span><span class="default">getStatic</span><span class="keyword">() {<br />
&nbsp;&nbsp;&nbsp; static </span><span class="default">$staticVar</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$staticVar</span><span class="keyword">;<br />
&nbsp; }<br />
<br />
&nbsp; </span><span class="comment">// Now we can access the static in any method by using it's reference<br />
&nbsp; </span><span class="keyword">function </span><span class="default">fooCount</span><span class="keyword">() {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ref2static </span><span class="keyword">= &amp; </span><span class="default">getStatic</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$ref2static</span><span class="keyword">++;<br />
&nbsp; }<br />
<br />
&nbsp; </span><span class="default">fooCount</span><span class="keyword">(); </span><span class="comment">// 0<br />
&nbsp; </span><span class="default">fooCount</span><span class="keyword">(); </span><span class="comment">// 1<br />
&nbsp; </span><span class="default">fooCount</span><span class="keyword">(); </span><span class="comment">// 2<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42955""></a>
  <div class="note">
   <strong class="user">Michael Bailey (jinxidoru at byu dot net)</strong>
   <a href="#42955" class="date">04-Jun-2004 08:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Static variables do not hold through inheritance.&nbsp; Let class A have a function Z with a static variable.&nbsp; Let class B extend class A in which function Z is not overwritten.&nbsp; Two static variables will be created, one for class A and one for class B.<br />
<br />
Look at this example:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">A </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">Z</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; static </span><span class="default">$count </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">printf</span><span class="keyword">(</span><span class="string">"%s: %d\n"</span><span class="keyword">, </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">), ++</span><span class="default">$count</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">B </span><span class="keyword">extends </span><span class="default">A </span><span class="keyword">{}<br />
<br />
</span><span class="default">$a </span><span class="keyword">= new </span><span class="default">A</span><span class="keyword">();<br />
</span><span class="default">$b </span><span class="keyword">= new </span><span class="default">B</span><span class="keyword">();<br />
</span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">Z</span><span class="keyword">();<br />
</span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">Z</span><span class="keyword">();<br />
</span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">Z</span><span class="keyword">();<br />
</span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">Z</span><span class="keyword">();<br />
</span><span class="default">?&gt;<br />
</span><br />
This code returns:<br />
<br />
A: 1<br />
A: 2<br />
B: 1<br />
A: 3<br />
<br />
As you can see, class A and B are using different static variables even though the same function was being used.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41213""></a>
  <div class="note">
   <strong class="user">Randolpho</strong>
   <a href="#41213" class="date">02-Apr-2004 09:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
More on static variables:
<br />

<br />
A static variable does not retain it's value after the script's execution. Don't count on it being available from one page request to the next; you'll have to use a database for that. 
<br />

<br />
Second, here's a good pattern to use for declaring a static variable based on some complex logic:
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp; </span><span class="keyword">function </span><span class="default">buildStaticVariable</span><span class="keyword">()
<br />
&nbsp; {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$foo </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="comment">// some complex expression or set of
<br />
&nbsp;&nbsp; &nbsp;&nbsp; // expressions/statements to build
<br />
&nbsp;&nbsp; &nbsp;&nbsp; // the return variable.
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$foo</span><span class="keyword">;
<br />
&nbsp; }
<br />

<br />
&nbsp; function </span><span class="default">functionWhichUsesStaticVar</span><span class="keyword">()
<br />
&nbsp; {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; static </span><span class="default">$foo </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(</span><span class="default">$foo </span><span class="keyword">=== </span><span class="default">null</span><span class="keyword">) </span><span class="default">$foo </span><span class="keyword">= </span><span class="default">buildStaticVariable</span><span class="keyword">();
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="comment">// the rest of your code goes here.
<br />
&nbsp; </span><span class="keyword">}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Using such a pattern allows you to separate the code that creates your default static variable value from the function that uses it. Easier to maintain code is good. :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="39091""></a>
  <div class="note">
   <strong class="user">jmarbas at hotmail dot com</strong>
   <a href="#39091" class="date">17-Jan-2004 12:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Whats good for the goose is not always good for the iterative gander. If you declare and initialize the static variable more than once inside a function ie.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">Test</span><span class="keyword">(){
<br />
&nbsp;&nbsp; static </span><span class="default">$count </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; static </span><span class="default">$count </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp; static </span><span class="default">$count </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;
<br />
&nbsp;&nbsp; echo </span><span class="default">$count</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
the variable will take the value of the last declaration. In this case $count=2.
<br />

<br />
But! however when you make that function recursive ie.
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp; </span><span class="keyword">function </span><span class="default">Test</span><span class="keyword">(){
<br />
&nbsp;&nbsp; static </span><span class="default">$count </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; static </span><span class="default">$count </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp; static </span><span class="default">$count </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp; </span><span class="default">$count</span><span class="keyword">++;
<br />
&nbsp;&nbsp; echo </span><span class="default">$count</span><span class="keyword">;
<br />
&nbsp;&nbsp; if (</span><span class="default">$count</span><span class="keyword">&lt;</span><span class="default">10</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">Test</span><span class="keyword">();
<br />
&nbsp;&nbsp; }
<br />
&nbsp; }
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Every call to the function Test() is a differenct SCOPE and therefore the static declarations and initializations are NOT executed again. So what Im trying to say is that its OK to declare and initialize a static variable multiple times if you are in one function... but its NOT OK to declare and initialize a static variable multiple times if you call that same function multiple times. In other words the static variable is set once you LEAVE a function (even if you go back into that very same function).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37427""></a>
  <div class="note">
   <strong class="user">Jack at soinsincere dot com</strong>
   <a href="#37427" class="date">14-Nov-2003 07:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Alright, so you can't set a static variable with a reference.<br />
However, you can set a static variable to an array with an element that is a reference:<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">myReference </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">getOrSet</span><span class="keyword">(</span><span class="default">$array </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; static </span><span class="default">$myValue</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$myValue</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];&nbsp; &nbsp;&nbsp; </span><span class="comment">//Return reference in array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$myValue </span><span class="keyword">= </span><span class="default">$array</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//Set static variable with array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">static </span><span class="default">$myValue</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$static </span><span class="keyword">= </span><span class="string">"Dummy"</span><span class="keyword">;<br />
<br />
</span><span class="default">$dummy </span><span class="keyword">= new </span><span class="default">myReference</span><span class="keyword">;<br />
</span><span class="default">$dummy</span><span class="keyword">-&gt;</span><span class="default">getOrSet</span><span class="keyword">(array(&amp;</span><span class="default">$static</span><span class="keyword">));<br />
<br />
</span><span class="default">$static </span><span class="keyword">= </span><span class="string">"Test"</span><span class="keyword">;<br />
print </span><span class="default">$dummy</span><span class="keyword">-&gt;</span><span class="default">getOrSet</span><span class="keyword">();<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37183""></a>
  <div class="note">
   <strong class="user">flobee at gmx dot net</strong>
   <a href="#37183" class="date">06-Nov-2003 09:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
i found out that on any (still not found) reason the <span class="default">&lt;?php </span><span class="keyword">static </span><span class="default">$val </span><span class="keyword">=</span><span class="default">NULL</span><span class="keyword">; </span><span class="default">?&gt;</span> is not working when trying to extract the data form the $var with a while statment<br />
e.g.:<br />
<span class="default">&lt;?php<br />
funktion get_data</span><span class="keyword">() {<br />
static </span><span class="default">$myarray </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp; if(</span><span class="default">$myarray </span><span class="keyword">== </span><span class="default">NULL</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; </span><span class="comment">//get some info in an array();<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$myarray </span><span class="keyword">= array(</span><span class="string">'one'</span><span class="keyword">,</span><span class="string">'two'</span><span class="keyword">);<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; while(list(</span><span class="default">$key</span><span class="keyword">,</span><span class="default">$val</span><span class="keyword">) = </span><span class="default">each</span><span class="keyword">( </span><span class="default">$myarray </span><span class="keyword">) ) {<br />
&nbsp;&nbsp; </span><span class="comment">// do something<br />
&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="string">"x: </span><span class="default">$key</span><span class="string"> , y: </span><span class="default">$val</span><span class="string">"</span><span class="keyword">;<br />
&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span>when using foreach($myarray AS $key =&gt; $val) { .... instad of while then i see the result!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="33832""></a>
  <div class="note">
   <strong class="user">ppo at beeznest dot net</strong>
   <a href="#33832" class="date">09-Jul-2003 03:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Even if an included file return a value using return(), it's still sharing the same scope as the caller script!<br />
<br />
<span class="default">&lt;?php<br />
$foo </span><span class="keyword">= </span><span class="string">'aaa'</span><span class="keyword">;<br />
</span><span class="default">$bar </span><span class="keyword">= include(</span><span class="string">'include.php'</span><span class="keyword">);<br />
echo(</span><span class="default">$foo</span><span class="keyword">.</span><span class="string">' / '</span><span class="keyword">.</span><span class="default">$bar</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
where include.php is<br />
<span class="default">&lt;?php<br />
$foo </span><span class="keyword">= </span><span class="string">'bbb'</span><span class="keyword">;<br />
return </span><span class="default">$foo</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
The output is: bbb / bbb<br />
Not: aaa / bbb</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="29273""></a>
  <div class="note">
   <strong class="user">jg at nerd-boy dot net</strong>
   <a href="#29273" class="date">08-Feb-2003 01:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It's possible to use a variable variable when specifying a variable as global in a function. That way your function can decide what global variable to access in run-time.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">func</span><span class="keyword">(</span><span class="default">$varname</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp; global $</span><span class="default">$varname</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp; echo $</span><span class="default">$varname</span><span class="keyword">;
<br />
}
<br />

<br />
</span><span class="default">$hello </span><span class="keyword">= </span><span class="string">"hello world!"</span><span class="keyword">;
<br />
</span><span class="default">func</span><span class="keyword">(</span><span class="string">"hello"</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
This will print "hello world!", and is roughly the same as passing by reference, in the case when the variable you want to pass is global. The advantage over references is that they can't have default parameters. With the method above, you can do the following.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">func</span><span class="keyword">(</span><span class="default">$varname </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp; if (</span><span class="default">$varname </span><span class="keyword">=== </span><span class="default">FALSE</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; echo </span><span class="string">"No variable."</span><span class="keyword">;
<br />
&nbsp;&nbsp; else
<br />
&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; global $</span><span class="default">$varname</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp; &nbsp; echo $</span><span class="default">$varname</span><span class="keyword">;
<br />
&nbsp;&nbsp; }
<br />
}
<br />

<br />
</span><span class="default">$hello </span><span class="keyword">= </span><span class="string">"hello world!"</span><span class="keyword">;
<br />
</span><span class="default">func</span><span class="keyword">(</span><span class="string">"hello"</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// prints "hello world!"
<br />
</span><span class="default">func</span><span class="keyword">();&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// prints "No variable."
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="27546""></a>
  <div class="note">
   <strong class="user">wjs@sympaticoDOTca</strong>
   <a href="#27546" class="date">10-Dec-2002 06:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Becareful where you define your global variables: <br />
<br />
This will work:<br />
<span class="default">&lt;?php <br />
&nbsp; $MyArray </span><span class="keyword">= array(</span><span class="string">"Dog"</span><span class="keyword">);<br />
<br />
&nbsp; function </span><span class="default">SeeArray</span><span class="keyword">(){<br />
&nbsp;&nbsp;&nbsp; global </span><span class="default">$MyArray</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">in_array</span><span class="keyword">(</span><span class="string">"Dog"</span><span class="keyword">,</span><span class="default">$MyArray</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$MyArray </span><span class="keyword">as </span><span class="default">$Element</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"</span><span class="default">$Element</span><span class="string"> &lt;hr/&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
<br />
&nbsp; </span><span class="default">SeeArray</span><span class="keyword">();<br />
</span><span class="default">?&gt;<br />
</span><br />
while this will not:<br />
<span class="default">&lt;?php <br />
&nbsp; SeeArray</span><span class="keyword">();<br />
&nbsp; </span><span class="default">$MyArray </span><span class="keyword">= array(</span><span class="string">"Dog"</span><span class="keyword">);<br />
<br />
&nbsp; function </span><span class="default">SeeArray</span><span class="keyword">(){<br />
&nbsp;&nbsp;&nbsp; global </span><span class="default">$MyArray</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">in_array</span><span class="keyword">(</span><span class="string">"Dog"</span><span class="keyword">,</span><span class="default">$MyArray</span><span class="keyword">)){ </span><span class="comment">// an error will generate here<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$MyArray </span><span class="keyword">as </span><span class="default">$Element</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"</span><span class="default">$Element</span><span class="string"> &lt;hr/&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="26015""></a>
  <div class="note">
   <strong class="user">heatwave at fw dot hu</strong>
   <a href="#26015" class="date">15-Oct-2002 02:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Some people (including me) had a problem with defining a long GLOBAL variable list in functions (very error prone). Here is a possible solution. My program parses php file for functions, and compiles GLOBAL variable lists. Then you can just remove from the list those variables which need not be global.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//parser for GLOBAL variable list<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pfile</span><span class="keyword">=</span><span class="default">file</span><span class="keyword">(</span><span class="string">"myfile.php4"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$pfile</span><span class="keyword">);</span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; if(</span><span class="default">eregi</span><span class="keyword">(</span><span class="string">"function"</span><span class="keyword">,</span><span class="default">$pfile</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; list(</span><span class="default">$part1</span><span class="keyword">,</span><span class="default">$part2</span><span class="keyword">)=</span><span class="default">sscanf</span><span class="keyword">(</span><span class="default">$pfile</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">],</span><span class="string">"%s %s"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; echo </span><span class="string">"\n\n </span><span class="default">$part1</span><span class="string"> </span><span class="default">$part2</span><span class="string">:\nGLOBAL "</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$varlist</span><span class="keyword">=array();<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$level</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$end</span><span class="keyword">=</span><span class="default">$i</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; do {<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$lpar</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">"{"</span><span class="keyword">,</span><span class="default">$pfile</span><span class="keyword">[</span><span class="default">$end</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$level</span><span class="keyword">+=</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$lpar</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$lpar</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">"}"</span><span class="keyword">,</span><span class="default">$pfile</span><span class="keyword">[</span><span class="default">$end</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$level</span><span class="keyword">-=</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$lpar</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$end</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp;&nbsp; } while((</span><span class="default">$end</span><span class="keyword">&lt;</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$pfile</span><span class="keyword">))&amp;&amp;(</span><span class="default">$level</span><span class="keyword">&gt;</span><span class="default">0</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$pstr</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; for(</span><span class="default">$j</span><span class="keyword">=</span><span class="default">$i</span><span class="keyword">;</span><span class="default">$j</span><span class="keyword">&lt;=</span><span class="default">$end</span><span class="keyword">;</span><span class="default">$j</span><span class="keyword">++) </span><span class="default">$pstr</span><span class="keyword">.=</span><span class="default">$pfile</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$lpar</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">"$"</span><span class="keyword">,</span><span class="default">$pstr</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; for(</span><span class="default">$j</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;</span><span class="default">$j</span><span class="keyword">&lt;</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$lpar</span><span class="keyword">);</span><span class="default">$j</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">eregi</span><span class="keyword">(</span><span class="string">'[a-zA-Z_][a-zA-Z0-9_]*'</span><span class="keyword">,</span><span class="default">$lpar</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">],</span><span class="default">$cvar</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$varlist</span><span class="keyword">[</span><span class="default">$cvar</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]]=</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">array_walk</span><span class="keyword">(</span><span class="default">$varlist</span><span class="keyword">,</span><span class="string">'var_print'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
function </span><span class="default">var_print </span><span class="keyword">(</span><span class="default">$item</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; echo </span><span class="string">"</span><span class="default">$key</span><span class="string">,"</span><span class="keyword">;<br />
&nbsp;}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="21140""></a>
  <div class="note">
   
   <a href="#21140" class="date">30-Apr-2002 10:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Seems as though when a cookie is saved and referenced as a variable of the same name as the cookie, that variable is NOT global.&nbsp; If you make a function ro read the value of the cookie, the cooke variable name must be declared as a global.
<br />

<br />
example:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">ReturnCookie</span><span class="keyword">()
<br />
{
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$cookieName </span><span class="keyword">= </span><span class="string">"Test_Cookie"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; global $</span><span class="default">$cookieName</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (isset($</span><span class="default">$cookieName</span><span class="keyword">))
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo (</span><span class="string">"</span><span class="default">$cookieName</span><span class="string"> is set"</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$returnvalue </span><span class="keyword">= $</span><span class="default">$cookieName</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newCookieValue </span><span class="keyword">= </span><span class="string">"Test Value"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">setcookie</span><span class="keyword">(</span><span class="string">"</span><span class="default">$cookieName</span><span class="string">"</span><span class="keyword">,</span><span class="string">"</span><span class="default">$newCookieValue</span><span class="string">"</span><span class="keyword">, (</span><span class="default">time</span><span class="keyword">() + </span><span class="default">3153600</span><span class="keyword">));
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo (</span><span class="string">"made a cookie:" </span><span class="keyword">. </span><span class="default">$newCookieValue </span><span class="keyword">.</span><span class="string">"&lt;BR&gt;"</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$returnvalue </span><span class="keyword">= </span><span class="default">$newCookieValue</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo (</span><span class="string">"the cookie that was set is now </span><span class="default">$returnvalue</span><span class="string"> &lt;BR&gt;"</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$returnvalue</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="20407""></a>
  <div class="note">
   <strong class="user">huntsbox at pacbell dot net</strong>
   <a href="#20407" class="date">03-Apr-2002 05:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Not sure of the implications of this but...
<br />
You can create nested functions within functions but you must make sure they aren't defined twice, e.g.:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">norm</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; static </span><span class="default">$first_time </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$first_time</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function </span><span class="default">square</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$x </span><span class="keyword">* </span><span class="default">$x</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$first_time </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">sqrt</span><span class="keyword">(</span><span class="default">square</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">) + </span><span class="default">square</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">));
<br />
}
<br />

<br />
print </span><span class="default">square</span><span class="keyword">(</span><span class="default">5</span><span class="keyword">); </span><span class="comment">// error, not defined yet
<br />
</span><span class="keyword">print </span><span class="default">norm</span><span class="keyword">(</span><span class="default">5</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">);
<br />
print </span><span class="string">"&lt;br&gt;"</span><span class="keyword">;
<br />
print </span><span class="default">norm</span><span class="keyword">(</span><span class="default">3</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">);
<br />
print </span><span class="default">square</span><span class="keyword">(</span><span class="default">5</span><span class="keyword">); </span><span class="comment">// OK
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
If you don't include the if ($first_time) you get an error saying you can't define square() twice.&nbsp; Note that square is not local to the function it just appears there.&nbsp; The last line successfully accesses square in the page scope.&nbsp; This is not terribly useful, but interesting.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="20313""></a>
  <div class="note">
   <strong class="user">jochen_burkhard at web dot de</strong>
   <a href="#20313" class="date">29-Mar-2002 08:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please don't forget:
<br />
values of included (or required) file variables are NOT available in the local script if the included file resides on a remote server:
<br />

<br />
remotefile.php:
<br />

<br />
<span class="default">&lt;?PHP
<br />
$paramVal</span><span class="keyword">=</span><span class="default">10</span><span class="keyword">;
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
localfile.php:
<br />

<br />
<span class="default">&lt;?PHP
<br />
</span><span class="keyword">include </span><span class="string">"<a href="http://example.com/remotefile.php" rel="nofollow" target="_blank">http://example.com/remotefile.php</a>"</span><span class="keyword">;
<br />
echo </span><span class="string">"remote-value= </span><span class="default">$paramVal</span><span class="string">"</span><span class="keyword">;
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Will not work (!!)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="18905""></a>
  <div class="note">
   <strong class="user">steph_rondinaud at club-internet dot fr</strong>
   <a href="#18905" class="date">09-Feb-2002 01:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I'm using PHP 4.1.1<br />
<br />
While designing a database access class, I needed a static variable that will be incremented for all instances of the class each time the class connected to the database. The obvious solution was to declare a "connection" class variable with static scope. Unfortunatly, php doesn't allow such a declaration.<br />
So I went back to defining a static variable in the connect method of my class. But it seems that the static scope is not inherited: if class "a" inherit the "db access" class, then the "connection" variable is shared among "a" instances, not among both "a" AND "db access" instances. <br />
Solution is to declare the static variable out of the db access class, and declare "global" said variable in the connect method.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="18748""></a>
  <div class="note">
   <strong class="user">admin at essentialhost dot com</strong>
   <a href="#18748" class="date">04-Feb-2002 03:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Quick tip for beginners just to speed things up:
<br />
If you have a bunch of global variables to import into a function, it's best to put them into a named array like $variables[stuff].
<br />
When it's time to import them you just so the following;
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">here</span><span class="keyword">() { 
<br />
&nbsp; </span><span class="default">$vars </span><span class="keyword">= </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'variables'</span><span class="keyword">]; 
<br />
&nbsp; print </span><span class="default">$vars</span><span class="keyword">[</span><span class="default">stuff</span><span class="keyword">];
<br />

<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
This really helps with big ugly form submissions.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="17466""></a>
  <div class="note">
   <strong class="user">tomek at pluton dot pl</strong>
   <a href="#17466" class="date">10-Dec-2001 07:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When defining static variables you may use such declarations:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">static </span><span class="default">$var </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="comment">//numbers
<br />
</span><span class="keyword">static </span><span class="default">$var </span><span class="keyword">= </span><span class="string">'strings'</span><span class="keyword">;
<br />
static </span><span class="default">$var </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">,</span><span class="string">'a'</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">); </span><span class="comment">//array construct
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
but these ones would produce errors:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">static </span><span class="default">$var </span><span class="keyword">= </span><span class="default">some_function</span><span class="keyword">(</span><span class="string">'arg'</span><span class="keyword">);
<br />
static </span><span class="default">$var </span><span class="keyword">= (</span><span class="default">some_function</span><span class="keyword">(</span><span class="string">'arg'</span><span class="keyword">));
<br />
static </span><span class="default">$var </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">+</span><span class="default">3</span><span class="keyword">; </span><span class="comment">//any expression
<br />
</span><span class="keyword">static </span><span class="default">$var </span><span class="keyword">= new </span><span class="default">object</span><span class="keyword">;
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="14251""></a>
  <div class="note">
   <strong class="user">danno at wpi dot edu</strong>
   <a href="#14251" class="date">24-Jul-2001 09:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
WARNING!&nbsp; If you create a local variable in a function and then within that function assign it to a global variable by reference the object will be destroyed when the function exits and the global var will contain NOTHING!&nbsp; This main sound obvious but it can be quite tricky you have a large script (like a phpgtk-based gui app ;-) ).
<br />

<br />
example:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">foo </span><span class="keyword">()
<br />
{
<br />
&nbsp;&nbsp; global </span><span class="default">$testvar</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp; </span><span class="default">$localvar </span><span class="keyword">= new </span><span class="default">Object </span><span class="keyword">();
<br />
&nbsp;&nbsp; </span><span class="default">$testvar </span><span class="keyword">= &amp;</span><span class="default">$localvar</span><span class="keyword">;
<br />
}
<br />

<br />
</span><span class="default">foo </span><span class="keyword">();
<br />
</span><span class="default">print_r </span><span class="keyword">(</span><span class="default">$testvar</span><span class="keyword">);&nbsp;&nbsp; </span><span class="comment">// produces NOTHING!!!!
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
hope this helps someone before they lose all their hair</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="12787""></a>
  <div class="note">
   <strong class="user">carpathia_uk at mail dot com</strong>
   <a href="#12787" class="date">07-May-2001 11:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On confusing aspect about global scope...
<br />

<br />
If you want to access a variable such as a cookie inside a function, but theres a chance it may not even be defined, you need to access it using he GLOBALS array, not by defining it as global.
<br />

<br />
This wont work correctly....
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">isLoggedin</span><span class="keyword">()
<br />
{
<br />
global </span><span class="default">$cookie_username</span><span class="keyword">;
<br />
if (isset(</span><span class="default">$cookie_username</span><span class="keyword">) 
<br />
echo </span><span class="string">"blah.."</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
This will..
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">isLoggedin</span><span class="keyword">()
<br />
{
<br />
if (isset(</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">"cookie_username"</span><span class="keyword">]))
<br />
echo </span><span class="string">"blah.."</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="3596""></a>
  <div class="note">
   <strong class="user">shevek at anarres dot org</strong>
   <a href="#3596" class="date">05-Feb-2000 01:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you include a file from within a function using include(), the included file inherits the function scope as its own global scope, it will not be able to see top level globals unless they are explicit in the function.
<br />

<br />
<span class="default">&lt;?php
<br />
$foo </span><span class="keyword">= </span><span class="string">"bar"</span><span class="keyword">;
<br />
function </span><span class="default">baz</span><span class="keyword">() {
<br />
&nbsp;&nbsp;&nbsp; global </span><span class="default">$foo</span><span class="keyword">; </span><span class="comment"># NOTE THIS
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">include(</span><span class="string">"qux"</span><span class="keyword">);
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>把数组中的一部分去掉并用其它值取代</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.array-slice.html">? array_slice</a></li>
      <li style="float: right;"><a href="function.array-sum.html">array_sum ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.array.html">数组 函数</a></li>
    <li>把数组中的一部分去掉并用其它值取代</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.array-splice" class="refentry">
   <div class="refnamediv">
    <h1 class="refname">array_splice</h1>
    <p class="verinfo">(PHP 4, PHP 5, PHP 7)</p><p class="refpurpose"><span class="refname">array_splice</span> &mdash; <span class="dc-title">
     把数组中的一部分去掉并用其它值取代
    </span></p>

   </div>
 <div class="refsect1 description" id="refsect1-function.array-splice-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">array</span> <span class="methodname"><strong>array_splice</strong></span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter reference">&$input</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$offset</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$length</code><span class="initializer"> = 0</span></span>
   [, <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$replacement</code></span>
  ]] )</div>

    <p class="para rdfs-comment">
     把 <code class="parameter">input</code> 数组中由
     <code class="parameter">offset</code> 和 <code class="parameter">length</code>
     指定的单元去掉，如果提供了 <code class="parameter">replacement</code> 参数，则用其中的单元取代。
  </p>
  <p class="para">
     注意
     <code class="parameter">input</code> 中的数字键名不被保留。
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
   <span class="simpara">
    If <code class="parameter">replacement</code> is not an array, it will be
    <a href="language.types.array.html#language.types.array.casting" class="link">typecast</a>
    to one (i.e. <code class="code">(array) $parameter</code>). This may result in unexpected
    behavior when using an object or <strong><code>NULL</code></strong> <code class="parameter">replacement</code>.
   </span>
  </p></blockquote>
  </div>

  <div class="refsect1 parameters" id="refsect1-function.array-splice-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">input</code></dt>

     <dd>

      <p class="para">
       输入的数组。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">offset</code></dt>

     <dd>

      <p class="para">
       如果 <code class="parameter">offset</code> 为正，则从 <code class="parameter">input</code>
     数组中该值指定的偏移量开始移除。如果 <code class="parameter">offset</code>
     为负，则从 <code class="parameter">input</code> 末尾倒数该值指定的偏移量开始移除。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">length</code></dt>

     <dd>

      <p class="para">
       如果省略 <code class="parameter">length</code>，则移除数组中从 <code class="parameter">offset</code>
     到结尾的所有部分。如果指定了 <code class="parameter">length</code>
     并且为正值，则移除这么多单元。如果指定了 <code class="parameter">length</code>
     并且为负值，则移除从 <code class="parameter">offset</code> 到数组末尾倒数
     <code class="parameter">length</code> 为止中间所有的单元。小窍门：当给出了
     <code class="parameter">replacement</code> 时要移除从 <code class="parameter">offset</code>
     到数组末尾所有单元时，用 <em>count($input)</em> 作为 <code class="parameter">length</code>。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">replacement</code></dt>

     <dd>

      <p class="para">
       如果给出了 <code class="parameter">replacement</code> 数组，则被移除的单元被此数组中的单元替代。
      </p>
      <p class="para">
       如果
        <code class="parameter">offset</code> 和 <code class="parameter">length</code>
        的组合结果是不会移除任何值，则 <code class="parameter">replacement</code>
        数组中的单元将被插入到 <code class="parameter">offset</code>
        指定的位置。 注意替换数组中的键名不保留。
      </p>
      <p class="para">
       如果用来替换 <code class="parameter">replacement</code> 只有一个单元，那么不需要给它加上
        <em>array()</em>，除非该单元本身就是一个数组、一个对象或者 <strong><code>NULL</code></strong>。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.array-splice-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
    返回一个包含有被移除单元的数组。
  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.array-splice-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-5437">
    <p><strong>Example #1 <span class="function"><strong>array_splice()</strong></span> 例子</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$input&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"red"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"green"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"blue"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"yellow"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">array_splice</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;$input&nbsp;is&nbsp;now&nbsp;array("red",&nbsp;"green")<br /><br /></span><span style="color: #0000BB">$input&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"red"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"green"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"blue"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"yellow"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">array_splice</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;$input&nbsp;is&nbsp;now&nbsp;array("red",&nbsp;"yellow")<br /><br /></span><span style="color: #0000BB">$input&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"red"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"green"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"blue"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"yellow"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">array_splice</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">),&nbsp;</span><span style="color: #DD0000">"orange"</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;$input&nbsp;is&nbsp;now&nbsp;array("red",&nbsp;"orange")<br /><br /></span><span style="color: #0000BB">$input&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"red"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"green"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"blue"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"yellow"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">array_splice</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">"black"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"maroon"</span><span style="color: #007700">));<br /></span><span style="color: #FF8000">//&nbsp;$input&nbsp;is&nbsp;now&nbsp;array("red",&nbsp;"green",<br />//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"blue",&nbsp;"black",&nbsp;"maroon")<br /><br /></span><span style="color: #0000BB">$input&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"red"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"green"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"blue"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"yellow"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">array_splice</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"purple"</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;$input&nbsp;is&nbsp;now&nbsp;array("red",&nbsp;"green",<br />//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"blue",&nbsp;"purple",&nbsp;"yellow");<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-5438">
    <p><strong>Example #2 <span class="function"><strong>array_splice()</strong></span> 例子</strong></p>
    <div class="example-contents"><p>
     以下表达式以同样方式修改了 <var class="varname"><var class="varname">$input</var></var>：
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />array_push</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$x</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$y</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">array_splice</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #0000BB">$x</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$y</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">array_pop</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">array_splice</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">array_shift</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">array_splice</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">array_unshift</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$x</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$y</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">array_splice</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #0000BB">$x</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$y</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$input</span><span style="color: #007700">[</span><span style="color: #0000BB">$x</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$y</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;对于键名和偏移量等值的数组<br /></span><span style="color: #0000BB">array_splice</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$x</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$y</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.array-splice-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.array-slice.html" class="function" rel="rdfs-seeAlso">array_slice()</a> - 从数组中取出一段</span></li>
    <li class="member"><span class="function"><a href="function.unset.html" class="function" rel="rdfs-seeAlso">unset()</a> - 释放给定的变量</span></li>
    <li class="member"><span class="function"><a href="function.array-merge.html" class="function" rel="rdfs-seeAlso">array_merge()</a> - 合并一个或多个数组</span></li>
   </ul>
  </p>
 </div>
  
  </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="119239""></a>
  <div class="note">
   <strong class="user">gilberg_vrn</strong>
   <a href="#119239" class="date">25-Apr-2016 11:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
array_splice with preserve keys<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_splice_preserve_keys</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$from</span><span class="keyword">, </span><span class="default">$length </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$from</span><span class="keyword">, </span><span class="default">$length</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$from </span><span class="keyword">+ </span><span class="default">$length</span><span class="keyword">, </span><span class="default">null</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Example:<br />
<br />
<span class="default">&lt;?php<br />
$array </span><span class="keyword">= [<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="string">'a'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">2 </span><span class="keyword">=&gt; </span><span class="string">'b'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">26 </span><span class="keyword">=&gt; </span><span class="string">'z'<br />
</span><span class="keyword">];<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_splice_preserve_keys</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">), </span><span class="default">$array</span><span class="keyword">);<br />
</span><span class="comment">/**<br />
&nbsp;* array(1) {<br />
&nbsp;*&nbsp; [1]=&gt;<br />
&nbsp;*&nbsp;&nbsp; string(1) "a"<br />
&nbsp;*&nbsp; }<br />
&nbsp;* array(2) {<br />
&nbsp;*&nbsp; [2]=&gt;<br />
&nbsp;*&nbsp; string(1) "b"<br />
&nbsp;*&nbsp; [26]=&gt;<br />
&nbsp;*&nbsp; string(1) "z"<br />
&nbsp;* }<br />
&nbsp;*/<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119136""></a>
  <div class="note">
   <strong class="user">vitospericolato at gmail dot com</strong>
   <a href="#119136" class="date">08-Apr-2016 05:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To remove elements from an array, based on array values:<br />
<br />
<span class="default">&lt;?php<br />
$i_to_remove</span><span class="keyword">=array();<br />
<br />
foreach(</span><span class="default">$array_to_prune </span><span class="keyword">as </span><span class="default">$i</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">){<br />
&nbsp; if(</span><span class="default">cond_to_delete</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) </span><span class="default">$i_to_remove</span><span class="keyword">[]=</span><span class="default">$i</span><span class="keyword">;<br />
}<br />
foreach(</span><span class="default">$i_to_remove </span><span class="keyword">as </span><span class="default">$j</span><span class="keyword">=&gt;</span><span class="default">$i</span><span class="keyword">)<br />
&nbsp; </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$array_to_prune</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">-</span><span class="default">$j</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118184""></a>
  <div class="note">
   <strong class="user">StanE</strong>
   <a href="#118184" class="date">22-Oct-2015 05:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
array_splice() does not preserve numeric keys. The function posted by "weikard at gmx dot de" won't do that either because array_merge() does not preserve numeric keys either.<br />
<br />
Use following function instead:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">arrayInsert</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$position</span><span class="keyword">, </span><span class="default">$insertArray</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ret </span><span class="keyword">= [];<br />
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$position </span><span class="keyword">== </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ret </span><span class="keyword">= </span><span class="default">$array </span><span class="keyword">+ </span><span class="default">$insertArray</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$position </span><span class="keyword">== </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ret </span><span class="keyword">+= </span><span class="default">$insertArray</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ret</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$ret</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Example:<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= [<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">295 </span><span class="keyword">=&gt; </span><span class="string">"Hello"</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">58 </span><span class="keyword">=&gt; </span><span class="string">"world"</span><span class="keyword">,<br />
];<br />
<br />
</span><span class="default">$a </span><span class="keyword">= </span><span class="default">arrayInsert</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, [</span><span class="default">123 </span><span class="keyword">=&gt; </span><span class="string">"little"</span><span class="keyword">]);<br />
<br />
</span><span class="comment">/*<br />
Output:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [295] =&gt; Hello<br />
&nbsp;&nbsp;&nbsp; [123] =&gt; little<br />
&nbsp;&nbsp;&nbsp; [58] =&gt; world<br />
)<br />
*/<br />
</span><span class="default">?&gt;<br />
</span><br />
It preserves numeric keys. Note that the function does not use a reference to the original array but returns a new array (I see absolutely no reason how the performance would be increased by using a reference when modifying an array through PHP script code).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117507""></a>
  <div class="note">
   <strong class="user">guillaume dot lacourt at gmail dot com</strong>
   <a href="#117507" class="date">20-Jun-2015 10:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Using array_splice when you traverse array with internal pointer's function reset the array, eg:<br />
<br />
<span class="default">&lt;?php<br />
end</span><span class="keyword">(</span><span class="default">$arrOfData</span><span class="keyword">);<br />
</span><span class="default">$last </span><span class="keyword">= </span><span class="default">key</span><span class="keyword">(</span><span class="default">$arrOfData</span><span class="keyword">);<br />
</span><span class="default">reset</span><span class="keyword">(</span><span class="default">$arrOfData</span><span class="keyword">);<br />
while ((</span><span class="default">$data </span><span class="keyword">= </span><span class="default">current</span><span class="keyword">(</span><span class="default">$arrOfData</span><span class="keyword">))) {<br />
&nbsp; if (</span><span class="default">$last </span><span class="keyword">=== </span><span class="default">key</span><span class="keyword">(</span><span class="default">$arrOfData</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$arrOfData</span><span class="keyword">, </span><span class="default">$last</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="comment">// current($arrOfData) =&gt; first value of $arrOfData<br />
&nbsp; </span><span class="keyword">}<br />
}</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115701""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#115701" class="date">11-Sep-2014 10:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_slice2</span><span class="keyword">( </span><span class="default">$array</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">, </span><span class="default">$length </span><span class="keyword">= </span><span class="default">0 </span><span class="keyword">)<br />
{<br />
&nbsp; if( </span><span class="default">$offset </span><span class="keyword">&lt; </span><span class="default">0 </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">sizeof</span><span class="keyword">( </span><span class="default">$array </span><span class="keyword">) + </span><span class="default">$offset</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">$length </span><span class="keyword">= ( !</span><span class="default">$length </span><span class="keyword">? </span><span class="default">sizeof</span><span class="keyword">( </span><span class="default">$array </span><span class="keyword">) : ( </span><span class="default">$length </span><span class="keyword">&lt; </span><span class="default">0 </span><span class="keyword">? </span><span class="default">sizeof</span><span class="keyword">( </span><span class="default">$array </span><span class="keyword">) - </span><span class="default">$length </span><span class="keyword">: </span><span class="default">$length </span><span class="keyword">+ </span><span class="default">$offset </span><span class="keyword">) );<br />
<br />
&nbsp; for( </span><span class="default">$i </span><span class="keyword">= </span><span class="default">$offset</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$length</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++ )<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$tmp</span><span class="keyword">[] = </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
<br />
&nbsp; return </span><span class="default">$tmp</span><span class="keyword">;&nbsp; &nbsp;&nbsp; <br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115351""></a>
  <div class="note">
   <strong class="user">antrik</strong>
   <a href="#115351" class="date">10-Jul-2014 04:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Prompted by dire need, and inspired by some of the existing notes, I came up with this:<br />
<br />
/* Like array_splice(), but preserves the key(s) of the replacement array. */<br />
function array_splice_assoc(&amp;$input, $offset, $length = 0, $replacement = array()) {<br />
&nbsp; $tail = array_splice($input, $offset);<br />
&nbsp; $extracted = array_splice($tail, 0, $length);<br />
&nbsp; $input += $replacement + $tail;<br />
&nbsp; return $extracted;<br />
};<br />
<br />
Apart from preserving the keys, it behaves just like the regular array_splice() for all cases I could think of.<br />
<br />
So for example the regular array_splice()<br />
<br />
$input = array('a' =&gt; 1, 'b' =&gt; 2, 'c' =&gt; 3, 'd' =&gt; 4, 'e' =&gt; 5, 'f' =&gt;6);<br />
print_r(array_splice($input, -4, 3, array('foo1' =&gt; 'bar', 'foo2' =&gt; 'baz'))); <br />
print_r($input); <br />
<br />
will give:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [c] =&gt; 3<br />
&nbsp;&nbsp;&nbsp; [d] =&gt; 4<br />
&nbsp;&nbsp;&nbsp; [e] =&gt; 5<br />
)<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [a] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [b] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; bar<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; baz<br />
&nbsp;&nbsp;&nbsp; [f] =&gt; 6<br />
)<br />
<br />
But with array_splice_assoc()<br />
<br />
$input = array('a' =&gt; 1, 'b' =&gt; 2, 'c' =&gt; 3, 'd' =&gt; 4, 'e' =&gt; 5, 'f' =&gt;6);<br />
print_r(array_splice_assoc($input, -4, 3, array('foo1' =&gt; 'bar', 'foo2' =&gt; 'baz')));<br />
print_r($input);<br />
<br />
we get:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [c] =&gt; 3<br />
&nbsp;&nbsp;&nbsp; [d] =&gt; 4<br />
&nbsp;&nbsp;&nbsp; [e] =&gt; 5<br />
)<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [a] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [b] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [foo1] =&gt; bar<br />
&nbsp;&nbsp;&nbsp; [foo2] =&gt; baz<br />
&nbsp;&nbsp;&nbsp; [f] =&gt; 6<br />
)<br />
<br />
A typical use case would be replacing an element identified by a particular key, which we could achieve with:<br />
<br />
$input = array('a' =&gt; 1, 'b' =&gt; 2, 'c' =&gt; 3, 'd' =&gt; 4, 'e' =&gt; 5, 'f' =&gt;6);<br />
array_splice_assoc($input, array_search('d', array_keys($input)), 1, array('foo' =&gt; 'bar'));<br />
print_r($input);<br />
<br />
giving us:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [a] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [b] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [c] =&gt; 3<br />
&nbsp;&nbsp;&nbsp; [foo] =&gt; bar<br />
&nbsp;&nbsp;&nbsp; [e] =&gt; 5<br />
&nbsp;&nbsp;&nbsp; [f] =&gt; 6<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114027""></a>
  <div class="note">
   <strong class="user">thom</strong>
   <a href="#114027" class="date">02-Jan-2014 11:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Maybe it will help someone else: I was trying to strip off the last part of an array using this section, more or less as follows:<br />
<br />
<span class="default">&lt;?php array_splice</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">); </span><span class="default">?&gt;<br />
</span><br />
Now it could occur in my code that <span class="default">&lt;?php $offset </span><span class="keyword">=== </span><span class="default">0 ?&gt;</span>, in which case the array is returned as-is and not, as you might expect, an empty array because everything is stripped off. Obviously it is not really useful anyway to "strip off everything", but I was reminded of that the hard way and this may spare someone some time, hopefully.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111204""></a>
  <div class="note">
   <strong class="user">royanee at yahoo dot com</strong>
   <a href="#111204" class="date">26-Jan-2013 02:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When trying to splice an associative array into another, array_splice is missing two key ingredients:<br />
&nbsp; - a string key for identifying the offset<br />
&nbsp; - the ability to preserve keys in the replacement array<br />
<br />
This is primarily useful when you want to replace an item in an array with another item, but want to maintain the ordering of the array without rebuilding the array one entry at a time.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_splice_assoc</span><span class="keyword">(&amp;</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">, </span><span class="default">$length</span><span class="keyword">, </span><span class="default">$replacement</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$replacement </span><span class="keyword">= (array) </span><span class="default">$replacement</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$key_indices </span><span class="keyword">= </span><span class="default">array_flip</span><span class="keyword">(</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (isset(</span><span class="default">$input</span><span class="keyword">[</span><span class="default">$offset</span><span class="keyword">]) &amp;&amp; </span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$offset</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">$key_indices</span><span class="keyword">[</span><span class="default">$offset</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (isset(</span><span class="default">$input</span><span class="keyword">[</span><span class="default">$length</span><span class="keyword">]) &amp;&amp; </span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$length</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$length </span><span class="keyword">= </span><span class="default">$key_indices</span><span class="keyword">[</span><span class="default">$length</span><span class="keyword">] - </span><span class="default">$offset</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$input </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">, </span><span class="default">TRUE</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; + </span><span class="default">$replacement<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">+ </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$offset </span><span class="keyword">+ </span><span class="default">$length</span><span class="keyword">, </span><span class="default">NULL</span><span class="keyword">, </span><span class="default">TRUE</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">$fruit </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'orange' </span><span class="keyword">=&gt; </span><span class="string">'orange'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'lemon' </span><span class="keyword">=&gt; </span><span class="string">'yellow'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'lime' </span><span class="keyword">=&gt; </span><span class="string">'green'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'grape' </span><span class="keyword">=&gt; </span><span class="string">'purple'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'cherry' </span><span class="keyword">=&gt; </span><span class="string">'red'</span><span class="keyword">,<br />
);<br />
<br />
</span><span class="comment">// Replace lemon and lime with apple<br />
</span><span class="default">array_splice_assoc</span><span class="keyword">(</span><span class="default">$fruit</span><span class="keyword">, </span><span class="string">'lemon'</span><span class="keyword">, </span><span class="string">'grape'</span><span class="keyword">, array(</span><span class="string">'apple' </span><span class="keyword">=&gt; </span><span class="string">'red'</span><span class="keyword">));<br />
<br />
</span><span class="comment">// Replace cherry with strawberry<br />
</span><span class="default">array_splice_assoc</span><span class="keyword">(</span><span class="default">$fruit</span><span class="keyword">, </span><span class="string">'cherry'</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, array(</span><span class="string">'strawberry' </span><span class="keyword">=&gt; </span><span class="string">'red'</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
Note: I have not tested this with negative offsets and lengths.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106244""></a>
  <div class="note">
   <strong class="user">mrsohailkhan at gmail dot com</strong>
   <a href="#106244" class="date">21-Oct-2011 09:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
array_splice, split an array into 2 arrays. The returned arrays is the 2nd argument actually and the used array e.g $input here contains the 1st argument of array, e.g
<br />

<br />
<span class="default">&lt;?php
<br />
$input </span><span class="keyword">= array(</span><span class="string">"red"</span><span class="keyword">, </span><span class="string">"green"</span><span class="keyword">, </span><span class="string">"blue"</span><span class="keyword">, </span><span class="string">"yellow"</span><span class="keyword">);
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">)); </span><span class="comment">// Array ( [0] =&gt; yellow )&nbsp; 
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">); </span><span class="comment">//Array ( [0] =&gt; red [1] =&gt; green [2] =&gt; blue )
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
if you want to replace any array value do simple like that,
<br />

<br />
first search the array index you want to replace
<br />

<br />
<span class="default">&lt;?php $index </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">'green'</span><span class="keyword">, </span><span class="default">$input</span><span class="keyword">);</span><span class="comment">// index = 1 </span><span class="default">?&gt;
<br />
</span>
<br />
and then use it as according to the definition
<br />

<br />
<span class="default">&lt;?php
<br />
array_splice</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$index</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, array(</span><span class="string">'mygreeen'</span><span class="keyword">)); </span><span class="comment">//Array ( [0] =&gt; red [1] =&gt; mygreeen [2] =&gt; blue [3] =&gt; yellow ) 
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
so here green is replaced by mygreen.
<br />

<br />
here 1 in array_splice above represent the number of items to be replaced. so here start at index '1' and replaced only one item which is 'green'</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104983""></a>
  <div class="note">
   <strong class="user">news_yodpeirs at thoftware dot de</strong>
   <a href="#104983" class="date">20-Jul-2011 05:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Sometimes you may want to insert one array into another and just work on with the resulting array. array_splice() doesn't support this, as the resulting array isn't the returned value but the first argument, which is changed by reference.
<br />

<br />
Therefore you may use the following function, which inserts array $ins in array $src at position $pos. $rep can be used if $ins shouldn't be just inserted, but should replace some existing elements (the number of elements to be replaced is given in $rep).
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">array_insert</span><span class="keyword">(</span><span class="default">$src</span><span class="keyword">,</span><span class="default">$ins</span><span class="keyword">,</span><span class="default">$pos</span><span class="keyword">,</span><span class="default">$rep</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">) {
<br />
&nbsp; </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$src</span><span class="keyword">,</span><span class="default">$pos</span><span class="keyword">,</span><span class="default">$rep</span><span class="keyword">,</span><span class="default">$ins</span><span class="keyword">);
<br />
&nbsp; return(</span><span class="default">$src</span><span class="keyword">);
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99000""></a>
  <div class="note">
   <strong class="user">charette dot s at gmail</strong>
   <a href="#99000" class="date">21-Jul-2010 05:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to append null values wrap them in an array:<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; $a </span><span class="keyword">= array(</span><span class="string">'Hey'</span><span class="keyword">, </span><span class="string">'hey'</span><span class="keyword">, </span><span class="string">'my'</span><span class="keyword">, </span><span class="string">'my'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">null</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span>Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Hey<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; hey<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; my<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; my<br />
)<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; $b </span><span class="keyword">= array(</span><span class="string">'Hey'</span><span class="keyword">, </span><span class="string">'hey'</span><span class="keyword">, </span><span class="string">'my'</span><span class="keyword">, </span><span class="string">'my'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, array(</span><span class="default">null</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span>Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Hey<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; <br />
&nbsp;&nbsp;&nbsp; [2] =&gt; hey<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; my<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; my<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97097""></a>
  <div class="note">
   <strong class="user">news_yodpeirs at thoftware dot de</strong>
   <a href="#97097" class="date">01-Apr-2010 10:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Splicing with NULL as replacement may result in unexpected behavior too. Typecasting NULL into an array results in an empty array (as "(array)NULL" equals "array()"). That means, instead of creating an element with value NULL just no new element ist created (just as if there was no replacement specified).<br />
<br />
If you want the splicing to create a new element with value NULL you have to use "array(NULL)" instead of NULL.<br />
<br />
You should expect this if you read the explanation carefully, but just as objects are considered as a special case for replacement, NULL should be too.<br />
<br />
The explanation of replacement better should read: "If replacement is just one element it is not necessary to put array() around it, unless the element is an array itself, an object or NULL."<br />
<br />
And the note better should be: "If replacement is not an array, it will be typecast to one (i.e. (array) $parameter). This may result in unexpected behavior when using an object or NULL replacement."<br />
<br />
jmtc</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92651""></a>
  <div class="note">
   <strong class="user">daniele centamore</strong>
   <a href="#92651" class="date">02-Aug-2009 04:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
just useful functions to move an element using array_splice.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// info at danielecentamore dot com<br />
<br />
// $input&nbsp; (Array) - the array containing the element<br />
// $index (int) - the index of the element you need to move<br />
<br />
</span><span class="keyword">function </span><span class="default">moveUp</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">,</span><span class="default">$index</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$new_array </span><span class="keyword">= </span><span class="default">$input</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; if((</span><span class="default">count</span><span class="keyword">(</span><span class="default">$new_array</span><span class="keyword">)&gt;</span><span class="default">$index</span><span class="keyword">) &amp;&amp; (</span><span class="default">$index</span><span class="keyword">&gt;</span><span class="default">0</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$new_array</span><span class="keyword">, </span><span class="default">$index</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$input</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$new_array</span><span class="keyword">, </span><span class="default">$index</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } <br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; return </span><span class="default">$new_array</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">moveDown</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">,</span><span class="default">$index</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$new_array </span><span class="keyword">= </span><span class="default">$input</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; if(</span><span class="default">count</span><span class="keyword">(</span><span class="default">$new_array</span><span class="keyword">)&gt;</span><span class="default">$index</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$new_array</span><span class="keyword">, </span><span class="default">$index</span><span class="keyword">+</span><span class="default">2</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$input</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$new_array</span><span class="keyword">, </span><span class="default">$index</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } <br />
&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; return </span><span class="default">$new_array</span><span class="keyword">;<br />
&nbsp;}&nbsp; <br />
<br />
</span><span class="default">$input </span><span class="keyword">= array(</span><span class="string">"red"</span><span class="keyword">, </span><span class="string">"green"</span><span class="keyword">, </span><span class="string">"blue"</span><span class="keyword">, </span><span class="string">"yellow"</span><span class="keyword">);<br />
<br />
</span><span class="default">$newinput </span><span class="keyword">= </span><span class="default">moveUp</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br />
</span><span class="comment">// $newinput is array("red", "blue", "green", "yellow")<br />
<br />
</span><span class="default">$input </span><span class="keyword">= </span><span class="default">moveDown</span><span class="keyword">(</span><span class="default">$newinput</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
</span><span class="comment">// $input is array("red", "green", "blue", "yellow")<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91923""></a>
  <div class="note">
   <strong class="user">strata_ranger at hotmail dot com</strong>
   <a href="#91923" class="date">01-Jul-2009 08:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Should you want a similar function for splicing strings together, here is a rough equivalent:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">str_splice</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">, </span><span class="default">$length</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">, </span><span class="default">$splice</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">)<br />
{<br />
&nbsp; </span><span class="default">$input </span><span class="keyword">= (string)</span><span class="default">$input</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$splice </span><span class="keyword">= (string)</span><span class="default">$splice</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">);<br />
&nbsp; <br />
&nbsp; </span><span class="comment">// Offset handling (negative values measure from end of string)<br />
&nbsp; </span><span class="keyword">if (</span><span class="default">$offset</span><span class="keyword">&lt;</span><span class="default">0</span><span class="keyword">) </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">$count </span><span class="keyword">+ </span><span class="default">$offset</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="comment">// Length handling (positive values measure from $offset; negative, from end of string; omitted = end of string)<br />
&nbsp; </span><span class="keyword">if (</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$length</span><span class="keyword">)) </span><span class="default">$length </span><span class="keyword">= </span><span class="default">$count</span><span class="keyword">;<br />
&nbsp; elseif (</span><span class="default">$length </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">)&nbsp; </span><span class="default">$length </span><span class="keyword">= </span><span class="default">$count</span><span class="keyword">-</span><span class="default">$offset</span><span class="keyword">+</span><span class="default">$length</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="comment">// Do the splice<br />
&nbsp; </span><span class="keyword">return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">) . </span><span class="default">$splice </span><span class="keyword">. </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">+</span><span class="default">$length</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">$string </span><span class="keyword">= </span><span class="string">"The fox jumped over the lazy dog."</span><span class="keyword">;<br />
<br />
</span><span class="comment">// Outputs "The quick brown fox jumped over the lazy dog."<br />
</span><span class="keyword">echo </span><span class="default">str_splice</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="string">"quick brown "</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Obviously this is not for cases where all you need to do is a simple search-and-replace.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88896""></a>
  <div class="note">
   <strong class="user">dead dot screamer at seznam dot cz</strong>
   <a href="#88896" class="date">12-Feb-2009 02:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I need <span class="default">&lt;?php array_Splice</span><span class="keyword">()</span><span class="default">?&gt;</span> function, that use array keys instead of order (offset and length) because of associated arrays, and this is result:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;*&nbsp; &nbsp; first variation<br />
&nbsp;*<br />
&nbsp;*&nbsp; &nbsp; $input is input array<br />
&nbsp;*&nbsp; &nbsp; $start is index of slice begin<br />
&nbsp;*&nbsp; &nbsp; $end is index of slice end, if this is null, $replacement will be inserted (in the same way as original array_Slice())<br />
&nbsp;*indexes of $replacement are preserved in both examples<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">array_KSplice1</span><span class="keyword">(&amp;</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$end</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">, </span><span class="default">$replacement</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$keys</span><span class="keyword">=</span><span class="default">array_Keys</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$values</span><span class="keyword">=</span><span class="default">array_Values</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$replacement</span><span class="keyword">!==</span><span class="default">null</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$replacement</span><span class="keyword">=(array)</span><span class="default">$replacement</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rKeys</span><span class="keyword">=</span><span class="default">array_Keys</span><span class="keyword">(</span><span class="default">$replacement</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rValues</span><span class="keyword">=</span><span class="default">array_Values</span><span class="keyword">(</span><span class="default">$replacement</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$start</span><span class="keyword">=</span><span class="default">array_Search</span><span class="keyword">(</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$keys</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$start</span><span class="keyword">===</span><span class="default">false</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$end</span><span class="keyword">!==</span><span class="default">null</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$end</span><span class="keyword">=</span><span class="default">array_Search</span><span class="keyword">(</span><span class="default">$end</span><span class="keyword">,</span><span class="default">$keys</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// if $end not found, exit<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$end</span><span class="keyword">===</span><span class="default">false</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// if $end is before $start, exit<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$end</span><span class="keyword">&lt;</span><span class="default">$start</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// index to length<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$end</span><span class="keyword">-=</span><span class="default">$start</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// optional arguments<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$replacement</span><span class="keyword">!==</span><span class="default">null</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_Splice</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$end</span><span class="keyword">,</span><span class="default">$rKeys</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_Splice</span><span class="keyword">(</span><span class="default">$values</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$end</span><span class="keyword">,</span><span class="default">$rValues</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_Splice</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$end</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_Splice</span><span class="keyword">(</span><span class="default">$values</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$end</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$input</span><span class="keyword">=</span><span class="default">array_Combine</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">,</span><span class="default">$values</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$input</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">/**<br />
&nbsp;*&nbsp; &nbsp; second variation<br />
&nbsp;*<br />
&nbsp;*&nbsp; &nbsp; $input is input array<br />
&nbsp;*&nbsp; &nbsp; $start is index of slice begin<br />
&nbsp;*&nbsp; &nbsp; $length is length of slice, what will be replaced, if is zero, $replacement will be inserted (in the same way as original array_Slice())<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">array_KSplice2</span><span class="keyword">(&amp;</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$length</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">, </span><span class="default">$replacement</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$keys</span><span class="keyword">=</span><span class="default">array_Keys</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$values</span><span class="keyword">=</span><span class="default">array_Values</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$replacement</span><span class="keyword">!==</span><span class="default">null</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$replacement</span><span class="keyword">=(array)</span><span class="default">$replacement</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rKeys</span><span class="keyword">=</span><span class="default">array_Keys</span><span class="keyword">(</span><span class="default">$replacement</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rValues</span><span class="keyword">=</span><span class="default">array_Values</span><span class="keyword">(</span><span class="default">$replacement</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$start</span><span class="keyword">=</span><span class="default">array_Search</span><span class="keyword">(</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$keys</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$start</span><span class="keyword">===</span><span class="default">false</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// optional arguments<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$replacement</span><span class="keyword">!==</span><span class="default">null</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_Splice</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$length</span><span class="keyword">,</span><span class="default">$rKeys</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_Splice</span><span class="keyword">(</span><span class="default">$values</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$length</span><span class="keyword">,</span><span class="default">$rValues</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_Splice</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$length</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_Splice</span><span class="keyword">(</span><span class="default">$values</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$length</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$input</span><span class="keyword">=</span><span class="default">array_Combine</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">,</span><span class="default">$values</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$input</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$array</span><span class="keyword">=</span><span class="default">range</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">10</span><span class="keyword">);<br />
</span><span class="default">var_Dump</span><span class="keyword">(</span><span class="default">array_KSplice1</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,array(</span><span class="default">100</span><span class="keyword">=&gt;</span><span class="default">101</span><span class="keyword">,</span><span class="default">102</span><span class="keyword">,</span><span class="default">103</span><span class="keyword">,</span><span class="default">104</span><span class="keyword">)));<br />
<br />
</span><span class="default">$array</span><span class="keyword">=</span><span class="default">range</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">10</span><span class="keyword">);<br />
</span><span class="default">var_Dump</span><span class="keyword">(</span><span class="default">array_KSplice2</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,array(</span><span class="default">100</span><span class="keyword">=&gt;</span><span class="default">101</span><span class="keyword">,</span><span class="default">102</span><span class="keyword">,</span><span class="default">103</span><span class="keyword">,</span><span class="default">104</span><span class="keyword">)));<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Both examples output:<br />
array(11) {<br />
&nbsp; [0]=&gt;<br />
&nbsp; int(1)<br />
&nbsp; [1]=&gt;<br />
&nbsp; int(2)<br />
&nbsp; [2]=&gt;<br />
&nbsp; int(3)<br />
&nbsp; [100]=&gt;<br />
&nbsp; int(101)<br />
&nbsp; [101]=&gt;<br />
&nbsp; int(102)<br />
&nbsp; [102]=&gt;<br />
&nbsp; int(103)<br />
&nbsp; [103]=&gt;<br />
&nbsp; int(104)<br />
&nbsp; [6]=&gt;<br />
&nbsp; int(7)<br />
&nbsp; [7]=&gt;<br />
&nbsp; int(8)<br />
&nbsp; [8]=&gt;<br />
&nbsp; int(9)<br />
&nbsp; [9]=&gt;<br />
&nbsp; int(10)<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85904""></a>
  <div class="note">
   <strong class="user">madmax at max-worlds dot net</strong>
   <a href="#85904" class="date">24-Sep-2008 03:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note:&nbsp; If replacement is not an array, it will be typecast to one (i.e. (array) $parameter). This may result in unexpected behavior when using an object replacement .&nbsp; 
<br />

<br />
Example :
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">class </span><span class="default">A</span><span class="keyword">()
<br />
{
<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$a</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$b</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">()
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">a </span><span class="keyword">= </span><span class="string">"foo"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">b </span><span class="keyword">= </span><span class="string">"bar"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />

<br />
</span><span class="default">$array </span><span class="keyword">= array();
<br />
</span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, new </span><span class="default">A</span><span class="keyword">());
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Outputs :
<br />

<br />
Array : Array
<br />
{
<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; foo
<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; bar
<br />
}
<br />

<br />
Solution : Enforce the array() on the object.
<br />

<br />
<span class="default">&lt;?php
<br />
array_splice</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, array(new </span><span class="default">Object</span><span class="keyword">());
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Source : <a href="http://bugs.php.net/bug.php?id=44485" rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=44485</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84733""></a>
  <div class="note">
   <strong class="user">loushou - life dot 42 at gmail dot com</strong>
   <a href="#84733" class="date">28-Jul-2008 01:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
i miss posted the actual function...<br />
here is the real one lol<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">q_sort</span><span class="keyword">(&amp;</span><span class="default">$Info</span><span class="keyword">, </span><span class="default">$Index</span><span class="keyword">, </span><span class="default">$Left</span><span class="keyword">, </span><span class="default">$Right</span><span class="keyword">)<br />
{<br />
&nbsp; echo </span><span class="string">"memory usage &lt;b&gt;"</span><span class="keyword">.</span><span class="default">memory_get_usage</span><span class="keyword">().</span><span class="string">"&lt;/b&gt;&lt;br/&gt;\n"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$L_hold </span><span class="keyword">= </span><span class="default">$Left</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$R_hold </span><span class="keyword">= </span><span class="default">$Right</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$Pivot </span><span class="keyword">= </span><span class="default">$Left</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$PivotValue </span><span class="keyword">= </span><span class="default">$Info</span><span class="keyword">[</span><span class="default">$Left</span><span class="keyword">];<br />
&nbsp; while (</span><span class="default">$Left </span><span class="keyword">&lt; </span><span class="default">$Right</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; while ((</span><span class="default">$Info</span><span class="keyword">[</span><span class="default">$Right</span><span class="keyword">][</span><span class="default">$Index</span><span class="keyword">] &gt;= </span><span class="default">$PivotValue</span><span class="keyword">[</span><span class="default">$Index</span><span class="keyword">]) &amp;&amp; (</span><span class="default">$Left </span><span class="keyword">&lt; </span><span class="default">$Right</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$Right</span><span class="keyword">--;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$Left </span><span class="keyword">!= </span><span class="default">$Right</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$Info</span><span class="keyword">[</span><span class="default">$Left</span><span class="keyword">] = </span><span class="default">$Info</span><span class="keyword">[</span><span class="default">$Right</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$Left</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; while ((</span><span class="default">$Info</span><span class="keyword">[</span><span class="default">$Left</span><span class="keyword">][</span><span class="default">$Index</span><span class="keyword">] &lt;= </span><span class="default">$PivotValue</span><span class="keyword">[</span><span class="default">$Index</span><span class="keyword">]) &amp;&amp; (</span><span class="default">$Left </span><span class="keyword">&lt; </span><span class="default">$Right</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$Left</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$Left </span><span class="keyword">!= </span><span class="default">$Right</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$Info</span><span class="keyword">[</span><span class="default">$Right</span><span class="keyword">] = </span><span class="default">$Info</span><span class="keyword">[</span><span class="default">$Left</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$Right</span><span class="keyword">--;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; </span><span class="default">$Info</span><span class="keyword">[</span><span class="default">$Left</span><span class="keyword">] = </span><span class="default">$PivotValue</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$Pivot </span><span class="keyword">= </span><span class="default">$Left</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$Left </span><span class="keyword">= </span><span class="default">$L_hold</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$Right </span><span class="keyword">= </span><span class="default">$R_hold</span><span class="keyword">;<br />
&nbsp; if (</span><span class="default">$Left </span><span class="keyword">&lt; </span><span class="default">$Pivot</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">q_sort</span><span class="keyword">(</span><span class="default">$Info</span><span class="keyword">, </span><span class="default">$Index</span><span class="keyword">, </span><span class="default">$Left</span><span class="keyword">, </span><span class="default">$Pivot</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">);<br />
&nbsp; if (</span><span class="default">$Right </span><span class="keyword">&gt; </span><span class="default">$Pivot</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">q_sort</span><span class="keyword">(</span><span class="default">$Info</span><span class="keyword">, </span><span class="default">$Index</span><span class="keyword">, </span><span class="default">$Pivot</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">, </span><span class="default">$Right</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82815""></a>
  <div class="note">
   <strong class="user">Francis</strong>
   <a href="#82815" class="date">27-Apr-2008 09:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Do you need to sort a 2D array on just one of its variables while trying to preserve somewhat the original order?
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
</span><span class="keyword">function </span><span class="default">sort_2d_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$position</span><span class="keyword">, </span><span class="default">$order </span><span class="keyword">= </span><span class="string">"ASC"</span><span class="keyword">){
<br />
&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) return </span><span class="default">$array</span><span class="keyword">;
<br />
&nbsp; if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) &lt; </span><span class="default">2</span><span class="keyword">) return </span><span class="default">$array</span><span class="keyword">;
<br />
&nbsp; </span><span class="default">$new </span><span class="keyword">= array(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);
<br />
&nbsp; for (</span><span class="default">$cnt </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$cnt </span><span class="keyword">&lt;= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">; </span><span class="default">$cnt</span><span class="keyword">++){
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$stop </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$splice </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$newcnt </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$newcnt </span><span class="keyword">&lt;= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$new</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">; </span><span class="default">$newcnt</span><span class="keyword">++){
<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">$stop </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$order </span><span class="keyword">== </span><span class="string">"ASC"</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$cnt</span><span class="keyword">][</span><span class="default">$position</span><span class="keyword">] &lt; </span><span class="default">$new</span><span class="keyword">[</span><span class="default">$newcnt</span><span class="keyword">][</span><span class="default">$position</span><span class="keyword">]){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$splice </span><span class="keyword">= </span><span class="default">$newcnt</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$stop </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } </span><span class="comment">// splice position for ASC
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$order </span><span class="keyword">== </span><span class="string">"DESC"</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$cnt</span><span class="keyword">][</span><span class="default">$position</span><span class="keyword">] &gt; </span><span class="default">$new</span><span class="keyword">[</span><span class="default">$newcnt</span><span class="keyword">][</span><span class="default">$position</span><span class="keyword">]){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$splice </span><span class="keyword">= </span><span class="default">$newcnt</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$stop </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } </span><span class="comment">// splice position for DESC
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">} </span><span class="comment">// stop vying for position
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">} </span><span class="comment">// cycle through new array to find position
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$stop </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">){ 
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$new</span><span class="keyword">[] = </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$cnt</span><span class="keyword">];
<br />
&nbsp;&nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$new</span><span class="keyword">, </span><span class="default">$splice</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, array(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$cnt</span><span class="keyword">]));
<br />
&nbsp;&nbsp;&nbsp; } </span><span class="comment">// splice into new array while keeping somewhat the original order
<br />
&nbsp; </span><span class="keyword">} </span><span class="comment">// cycle through original array
<br />
&nbsp; </span><span class="keyword">return </span><span class="default">$new</span><span class="keyword">;
<br />
} </span><span class="comment">// sort_2d_array
<br />

<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Application Example: In-House Search Engine
<br />
Here we are trying to find the word apple in the website by sort of the most recent occurances first, but the number of occurances first.&nbsp; 
<br />

<br />
We've already sorted the mysql output by the date desc and have counted the no of occurances and have placed those in an array for the final query.&nbsp; 
<br />

<br />
I've used this function to further sort the occurances but somewhat keep the original mysql sort order.
<br />

<br />
Key
<br />
[0] Record number
<br />
&nbsp;&nbsp; &nbsp; [0] Record ID
<br />
&nbsp;&nbsp; &nbsp; [1] Source Table
<br />
&nbsp;&nbsp; &nbsp; [2] No of Occurances Pinged
<br />

<br />
&nbsp; ---------------------------
<br />

<br />
[0] 
<br />
&nbsp;&nbsp; &nbsp; [0] 24530
<br />
&nbsp;&nbsp; &nbsp; [1] Blogs
<br />
&nbsp;&nbsp; &nbsp; [2] 1
<br />

<br />
[1] 
<br />
&nbsp;&nbsp; &nbsp; [0] 24400
<br />
&nbsp;&nbsp; &nbsp; [1] Blogs
<br />
&nbsp;&nbsp; &nbsp; [2] 1
<br />

<br />
[2] 
<br />
&nbsp;&nbsp; &nbsp; [0] 24240
<br />
&nbsp;&nbsp; &nbsp; [1] Blogs
<br />
&nbsp;&nbsp; &nbsp; [2] 4
<br />

<br />
[3] 
<br />
&nbsp;&nbsp; &nbsp; [0] 243422
<br />
&nbsp;&nbsp; &nbsp; [1] Classifieds
<br />
&nbsp;&nbsp; &nbsp; [2] 1
<br />

<br />
[4] 
<br />
&nbsp;&nbsp; &nbsp; [0] 243100
<br />
&nbsp;&nbsp; &nbsp; [1] Classifieds
<br />
&nbsp;&nbsp; &nbsp; [2] 1
<br />

<br />
After running... 
<br />

<br />
<span class="default">&lt;?php
<br />
sort_2d_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="string">"DESC"</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
We have...
<br />

<br />
[0] 
<br />
&nbsp;&nbsp; &nbsp; [0] 24240
<br />
&nbsp;&nbsp; &nbsp; [1] Blogs
<br />
&nbsp;&nbsp; &nbsp; [2] 4
<br />

<br />
[1] 
<br />
&nbsp;&nbsp; &nbsp; [0] 24530
<br />
&nbsp;&nbsp; &nbsp; [1] Blogs
<br />
&nbsp;&nbsp; &nbsp; [2] 1
<br />

<br />
[2] 
<br />
&nbsp;&nbsp; &nbsp; [0] 24400
<br />
&nbsp;&nbsp; &nbsp; [1] Blogs
<br />
&nbsp;&nbsp; &nbsp; [2] 1
<br />

<br />
[3] 
<br />
&nbsp;&nbsp; &nbsp; [0] 243422
<br />
&nbsp;&nbsp; &nbsp; [1] Classifieds
<br />
&nbsp;&nbsp; &nbsp; [2] 1
<br />

<br />
[4] 
<br />
&nbsp;&nbsp; &nbsp; [0] 243100
<br />
&nbsp;&nbsp; &nbsp; [1] Classifieds
<br />
&nbsp;&nbsp; &nbsp; [2] 1
<br />

<br />
Might be useful to someone...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80909""></a>
  <div class="note">
   <strong class="user">pauljamescampbell at gmail dot com</strong>
   <a href="#80909" class="date">06-Feb-2008 03:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's my own take on an array slice method that preserves keys from an associative array.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">/**
<br />
&nbsp;* Array slice function that preserves associative keys
<br />
&nbsp;* 
<br />
&nbsp;* @function associativeArraySlice
<br />
&nbsp;*
<br />
&nbsp;* @param&nbsp; Array&nbsp; $array&nbsp; Array to slice
<br />
&nbsp;* @param&nbsp; Integer&nbsp; $start&nbsp; &nbsp; 
<br />
&nbsp;* @param&nbsp; Integer&nbsp; $end
<br />
&nbsp;* 
<br />
&nbsp;* @return&nbsp; Array
<br />
&nbsp;*/
<br />
</span><span class="keyword">function </span><span class="default">associativeArraySlice</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$end</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Method param restrictions
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$start </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">) </span><span class="default">$start </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$end </span><span class="keyword">&gt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) </span><span class="default">$end </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Process vars
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$new </span><span class="keyword">= Array();
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Loop
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$i </span><span class="keyword">&gt;= </span><span class="default">$start </span><span class="keyword">&amp;&amp; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$end</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return(</span><span class="default">$new</span><span class="keyword">);
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73740""></a>
  <div class="note">
   <strong class="user">mip at ycn dot com</strong>
   <a href="#73740" class="date">08-Mar-2007 02:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Ever wounder what array_splice is doing to your references, then try this little script and see the output.<br />
<br />
<span class="default">&lt;?php<br />
<br />
$a </span><span class="keyword">= </span><span class="string">"a"</span><span class="keyword">;<br />
</span><span class="default">$b </span><span class="keyword">= </span><span class="string">"b"</span><span class="keyword">;<br />
</span><span class="default">$c </span><span class="keyword">= </span><span class="string">"c"</span><span class="keyword">;<br />
</span><span class="default">$d </span><span class="keyword">= </span><span class="string">"d"</span><span class="keyword">;<br />
</span><span class="default">$arr </span><span class="keyword">= array();<br />
</span><span class="default">$arr</span><span class="keyword">[] =&amp; </span><span class="default">$a</span><span class="keyword">;<br />
</span><span class="default">$arr</span><span class="keyword">[] =&amp; </span><span class="default">$b</span><span class="keyword">;<br />
</span><span class="default">$arr</span><span class="keyword">[] =&amp; </span><span class="default">$c</span><span class="keyword">;<br />
</span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,array(</span><span class="default">$d</span><span class="keyword">));<br />
</span><span class="default">$sec_arr </span><span class="keyword">= array();<br />
</span><span class="default">$sec_arr</span><span class="keyword">[] =&amp; </span><span class="default">$d</span><span class="keyword">;<br />
</span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$sec_arr</span><span class="keyword">);<br />
<br />
</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="string">"test"</span><span class="keyword">; </span><span class="comment">// should be $a<br />
</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">] = </span><span class="string">"test2"</span><span class="keyword">; </span><span class="comment">// should be $b<br />
</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = </span><span class="string">"this be d?"</span><span class="keyword">; </span><span class="comment">// should be $d<br />
</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] = </span><span class="string">"or this be d?"</span><span class="keyword">; </span><span class="comment">// should be $d<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
The output will be (PHP 4.3.3):<br />
<br />
array(5) {<br />
&nbsp; [0]=&gt;<br />
&nbsp; &amp;string(4) "test"<br />
&nbsp; [1]=&gt;<br />
&nbsp; &amp;string(10) "this be d?"<br />
&nbsp; [2]=&gt;<br />
&nbsp; string(13) "or this be d?"<br />
&nbsp; [3]=&gt;<br />
&nbsp; &amp;string(5) "test2"<br />
&nbsp; [4]=&gt;<br />
&nbsp; &amp;string(1) "c"<br />
}<br />
string(4) "test"<br />
string(5) "test2"<br />
string(10) "this be d?"<br />
<br />
So array_splice is reference safe, but you have to be careful about the generation of the replacement array.<br />
<br />
have fun, cheers!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72558""></a>
  <div class="note">
   <strong class="user">ahigerd at stratitec dot com</strong>
   <a href="#72558" class="date">24-Jan-2007 03:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A comment on array_merge mentioned that array_splice is faster than array_merge for inserting values. This may be the case, but if your goal is instead to reindex a numeric array, array_values() is the function of choice. Performing the following functions in a 100,000-iteration loop gave me the following times: ($b is a 3-element array)<br />
<br />
array_splice($b, count($b)) =&gt; 0.410652<br />
$b = array_splice($b, 0) =&gt; 0.272513<br />
array_splice($b, 3) =&gt; 0.26529<br />
$b = array_merge($b) =&gt; 0.233582<br />
$b = array_values($b) =&gt; 0.151298</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69329""></a>
  <div class="note">
   <strong class="user">bdjumakov at gmail dot com</strong>
   <a href="#69329" class="date">31-Aug-2006 09:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Someone might find this function usefull. It just takes a given element from the array and moves it before given element into the same array.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_move</span><span class="keyword">(</span><span class="default">$which</span><span class="keyword">, </span><span class="default">$where</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$tmp&nbsp; </span><span class="keyword">= </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$which</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$where</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$tmp</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="61793""></a>
  <div class="note">
   <strong class="user">Paul</strong>
   <a href="#61793" class="date">12-Feb-2006 07:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In PHP 4.3.10, at least, it seems that elements that are inserted as part of the replacement array are inserted BY REFERENCE (that is, as though with the =&amp; rather than = assignment operation). So if your replacement array contains elements that references to variables that you can also access via other variable name, then this will be true of the elements in the final array too.<br />
<br />
In particular, this means that it is safe to use array_splice() on arrays of objects, as you won't be creating copies of the objects (as it is so easy to do in PHP 4).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56794""></a>
  <div class="note">
   <strong class="user">weikard at gmx dot de</strong>
   <a href="#56794" class="date">15-Sep-2005 02:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You cannot insert with array_splice an array with your own key. array_splice will always insert it with the key "0".
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">// [DATA]
<br />
</span><span class="default">$test_array </span><span class="keyword">= array (
<br />
&nbsp; </span><span class="default">row1 </span><span class="keyword">=&gt; array (</span><span class="default">col1 </span><span class="keyword">=&gt; </span><span class="string">'foobar!'</span><span class="keyword">, </span><span class="default">col2 </span><span class="keyword">=&gt; </span><span class="string">'foobar!'</span><span class="keyword">),
<br />
&nbsp; </span><span class="default">row2 </span><span class="keyword">=&gt; array (</span><span class="default">col1 </span><span class="keyword">=&gt; </span><span class="string">'foobar!'</span><span class="keyword">, </span><span class="default">col2 </span><span class="keyword">=&gt; </span><span class="string">'foobar!'</span><span class="keyword">),
<br />
&nbsp; </span><span class="default">row3 </span><span class="keyword">=&gt; array (</span><span class="default">col1 </span><span class="keyword">=&gt; </span><span class="string">'foobar!'</span><span class="keyword">, </span><span class="default">col2 </span><span class="keyword">=&gt; </span><span class="string">'foobar!'</span><span class="keyword">)
<br />
);
<br />

<br />
</span><span class="comment">// [ACTION]
<br />
</span><span class="default">array_splice </span><span class="keyword">(</span><span class="default">$test_array</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, array (</span><span class="string">'rowX' </span><span class="keyword">=&gt; array (</span><span class="string">'colX' </span><span class="keyword">=&gt; </span><span class="string">'foobar2'</span><span class="keyword">)));
<br />
echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">; </span><span class="default">print_r </span><span class="keyword">(</span><span class="default">$test_array</span><span class="keyword">); echo </span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
[RESULT]
<br />

<br />
Array (
<br />
&nbsp;&nbsp;&nbsp; [row1] =&gt; Array (
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [col1] =&gt; foobar!
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [col2] =&gt; foobar!
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )
<br />

<br />
&nbsp;&nbsp;&nbsp; [row2] =&gt; Array (
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [col1] =&gt; foobar!
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [col2] =&gt; foobar!
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )
<br />

<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array (
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [colX] =&gt; foobar2
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )
<br />

<br />
&nbsp;&nbsp;&nbsp; [row3] =&gt; Array (
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [col1] =&gt; foobar!
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [col2] =&gt; foobar!
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )
<br />
)
<br />

<br />
But you can use the following function:
<br />

<br />
function array_insert (&amp;$array, $position, $insert_array) {
<br />
&nbsp; $first_array = array_splice ($array, 0, $position);
<br />
&nbsp; $array = array_merge ($first_array, $insert_array, $array);
<br />
}
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">// [ACTION]
<br />

<br />
</span><span class="default">array_insert </span><span class="keyword">(</span><span class="default">$test_array</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, array (</span><span class="string">'rowX' </span><span class="keyword">=&gt; array (</span><span class="string">'colX' </span><span class="keyword">=&gt; </span><span class="string">'foobar2'</span><span class="keyword">)));
<br />
echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">; </span><span class="default">print_r </span><span class="keyword">(</span><span class="default">$test_array</span><span class="keyword">); echo </span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
[RESULT]
<br />

<br />
Array (
<br />
&nbsp;&nbsp;&nbsp; [row1] =&gt; Array (
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [col1] =&gt; foobar!
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [col2] =&gt; foobar!
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )
<br />

<br />
&nbsp;&nbsp;&nbsp; [row2] =&gt; Array (
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [col1] =&gt; foobar!
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [col2] =&gt; foobar!
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )
<br />

<br />
&nbsp;&nbsp;&nbsp; [rowX] =&gt; Array (
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [colX] =&gt; foobar2
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )
<br />

<br />
&nbsp;&nbsp;&nbsp; [row3] =&gt; Array (
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [col1] =&gt; foobar!
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [col2] =&gt; foobar!
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )
<br />
)
<br />

<br />
[NOTE]
<br />

<br />
The position "0" will insert the array in the first position (like array_shift). If you try a position higher than the langth of the array, you add it to the array like the function array_push.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55790""></a>
  <div class="note">
   <strong class="user">csaba at alum dot mit dot edu</strong>
   <a href="#55790" class="date">13-Aug-2005 11:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Appending arrays
<br />
If you have an array $a2 whose values you would like to append to an array $a1 then four methods you could use are listed below in order of increasing time.&nbsp; The last two methods took significantly more time than the first two.&nbsp; The most surprising lesson is that using the &amp; incurs a time hit.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">foreach (</span><span class="default">$a2 </span><span class="keyword">as </span><span class="default">$elem</span><span class="keyword">) </span><span class="default">$a1</span><span class="keyword">[]=</span><span class="default">$elem</span><span class="keyword">;
<br />
foreach (</span><span class="default">$a2 </span><span class="keyword">as &amp;</span><span class="default">$elem</span><span class="keyword">) </span><span class="default">$a1</span><span class="keyword">[]=</span><span class="default">$elem</span><span class="keyword">;
<br />
</span><span class="default">array_splice </span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">, </span><span class="default">count</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">), </span><span class="default">0</span><span class="keyword">, </span><span class="default">$a2</span><span class="keyword">);
<br />
</span><span class="default">$a1 </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">, </span><span class="default">$a2</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Csaba Gabor from Vienna</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55004""></a>
  <div class="note">
   <strong class="user">randomdestination at gmail dot com</strong>
   <a href="#55004" class="date">22-Jul-2005 10:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To split an associative array based on it's keys, use this function:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function &amp;</span><span class="default">array_split</span><span class="keyword">(&amp;</span><span class="default">$in</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$keys </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$keys </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(isset(</span><span class="default">$in</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$in</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$in</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$out</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Example: <br />
<span class="default">&lt;?php<br />
$testin </span><span class="keyword">= array(</span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">'d' </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">);<br />
</span><span class="default">$testout </span><span class="keyword">=&amp; </span><span class="default">array_split</span><span class="keyword">(</span><span class="default">$testin</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">, </span><span class="string">'c'</span><span class="keyword">);<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$testin</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$testout</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Will print:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [d] =&gt; 4<br />
)<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [a] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [b] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [c] =&gt; 3<br />
)<br />
<br />
Hope this helps anyone!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="44204""></a>
  <div class="note">
   <strong class="user">gideon at i6developments dot com</strong>
   <a href="#44204" class="date">18-Jul-2004 06:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
array_splice dynamically updates the total number of entries into the array. So for instance I had a case where I needed to insert a value into every 4th entry of the array from the back. The problem was when it added the first, because the total number was dynamically updated, it would only add after the 3rd then the 2nd and so one. The solution I found is to track the number of inserts which were done and account for them dynamically. <br />
<br />
Code: <br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $modarray </span><span class="keyword">= </span><span class="default">array_reverse</span><span class="keyword">(</span><span class="default">$mili</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$trig</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$modarray </span><span class="keyword">as </span><span class="default">$rubber </span><span class="keyword">=&gt; </span><span class="default">$glue</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$rubber</span><span class="keyword">!=</span><span class="string">"&lt;BR&gt;"</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$b</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$i</span><span class="keyword">==</span><span class="default">4</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$trig</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$trig</span><span class="keyword">&lt;=</span><span class="default">2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$modarray</span><span class="keyword">,</span><span class="default">$b</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="string">"&lt;BR&gt;"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }elseif(</span><span class="default">$trig</span><span class="keyword">&gt;=</span><span class="default">3</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$modarray</span><span class="keyword">,</span><span class="default">$b</span><span class="keyword">+(</span><span class="default">$trig</span><span class="keyword">-</span><span class="default">2</span><span class="keyword">),</span><span class="default">0</span><span class="keyword">,</span><span class="string">"&lt;BR&gt;"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; };<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; };<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; };&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$fixarray </span><span class="keyword">= </span><span class="default">array_reverse</span><span class="keyword">(</span><span class="default">$modarray</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41118""></a>
  <div class="note">
   <strong class="user">rolandfoxx at yahoo dot com</strong>
   <a href="#41118" class="date">30-Mar-2004 09:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be careful, array_splice does not behave like you might expect should you try to pass it an object as the replacement argument.&nbsp; Consider the following:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//Very truncated<br />
</span><span class="keyword">class </span><span class="default">Tree </span><span class="keyword">{<br />
&nbsp; var </span><span class="default">$childNodes<br />
<br />
&nbsp; </span><span class="keyword">function </span><span class="default">addChild</span><span class="keyword">(</span><span class="default">$offset</span><span class="keyword">, </span><span class="default">$node</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">childNodes</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$node</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//...rest of function<br />
&nbsp; </span><span class="keyword">}<br />
<br />
}<br />
<br />
class </span><span class="default">Node </span><span class="keyword">{<br />
&nbsp; var </span><span class="default">$stuff<br />
&nbsp; </span><span class="keyword">...<br />
}<br />
<br />
</span><span class="default">$tree </span><span class="keyword">= new </span><span class="default">Tree</span><span class="keyword">();<br />
</span><span class="comment">// ...set 2 nodes using other functions...<br />
</span><span class="keyword">echo (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$tree</span><span class="keyword">-&gt;</span><span class="default">childNodes</span><span class="keyword">)); </span><span class="comment">//Gives 2<br />
</span><span class="default">$newNode </span><span class="keyword">= new </span><span class="default">Node</span><span class="keyword">();<br />
</span><span class="comment">// ...set node attributes here...<br />
</span><span class="default">$tree</span><span class="keyword">-&gt;</span><span class="default">addChild</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">, </span><span class="default">$newNode</span><span class="keyword">);<br />
echo(</span><span class="default">count</span><span class="keyword">(</span><span class="default">$tree</span><span class="keyword">-&gt;</span><span class="default">childNodes</span><span class="keyword">)); </span><span class="comment">//Expect 3?&nbsp; wrong!<br />
</span><span class="default">?&gt;<br />
</span><br />
In this case, the array has a number of items added to it equal to the number of attributes in the new Node object and the values thereof&nbsp; I.e, if your Node object has 2 attributes with values "foo" and "bar", count($tree-&gt;childNodes) will now return 4, with the items "foo" and "bar" added to it.&nbsp; I'm not sure if this qualifies as a bug, or is just a byproduct of how PHP handles objects.<br />
<br />
Here's a workaround for this problem:<br />
function array_insertobj(&amp;$array, $offset, $insert) {<br />
&nbsp; $firstPart = array_slice($array, 0, $offset);<br />
&nbsp; $secondPart = array_slice($array, $offset);<br />
&nbsp; $insertPart = array($insert);<br />
&nbsp; $array = array_merge($firstPart, $insertPart, $secondPart);<br />
}<br />
<br />
Note that this function makes no allowances for when $offset equals the first or last index in the array.&nbsp; That's because array_unshift and array_push work just fine in those cases.&nbsp; It's only array_splice that can trip you up.&nbsp; Obviously, this is kinda tailor-made for arrays with numeric keys when you don't really care what said keys are, but i'm sure you could adapt it for associative arrays if you needed it.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="34911""></a>
  <div class="note">
   <strong class="user">kbrown at horizon dot sk dot ca</strong>
   <a href="#34911" class="date">11-Aug-2003 09:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
[ Editor's Note: If you're not concerned with the indexes being contiguously numbered (such as for an associative array) then unset($ar[$ind]); will accomplish the same as the code below without requiring splice/splice/merge.&nbsp; If contiguous numbering IS a concern (such as for indexed arrays), you can still save time by using: unset($ar[$ind]); $ar = array_values($ar); ]
<br />

<br />
Removing elements from arrays
<br />

<br />
This works better - much quicker
<br />

<br />
<span class="default">&lt;?php
<br />
$ar </span><span class="keyword">= array(</span><span class="string">"einstein"</span><span class="keyword">, </span><span class="string">"bert"</span><span class="keyword">, </span><span class="string">"colin"</span><span class="keyword">, </span><span class="string">"descartes"</span><span class="keyword">, </span><span class="string">"renoir"</span><span class="keyword">);
<br />
</span><span class="default">$a </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$ar</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$ind</span><span class="keyword">);
<br />
</span><span class="default">$b </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$ar</span><span class="keyword">, </span><span class="default">$ind </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">);
<br />
</span><span class="default">$ar </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="31234""></a>
  <div class="note">
   <strong class="user">plintus at smtp dot ru</strong>
   <a href="#31234" class="date">14-Apr-2003 10:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
key-safe:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">array_kslice </span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">, </span><span class="default">$length </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">) {
<br />
</span><span class="default">$k </span><span class="keyword">= </span><span class="default">array_slice </span><span class="keyword">(</span><span class="default">array_keys </span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">), </span><span class="default">$offset</span><span class="keyword">, </span><span class="default">$length</span><span class="keyword">);
<br />
</span><span class="default">$v </span><span class="keyword">= </span><span class="default">array_slice </span><span class="keyword">(</span><span class="default">array_values </span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">), </span><span class="default">$offset</span><span class="keyword">, </span><span class="default">$length</span><span class="keyword">);
<br />
for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count </span><span class="keyword">(</span><span class="default">$k</span><span class="keyword">); </span><span class="default">$i </span><span class="keyword">++) </span><span class="default">$r</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]] = </span><span class="default">$v</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];
<br />
return </span><span class="default">$r</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
smth like this. hope you like it more than versions above :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="26744""></a>
  <div class="note">
   <strong class="user">tsunaquake DOESNTLIKESPAM @ wp DOT pl</strong>
   <a href="#26744" class="date">11-Nov-2002 07:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It is possible to use a string instead of offset, eg if you want to deletre the entry $myArray['entry'] then you can simply do it like this:
<br />

<br />
<span class="default">&lt;?php
<br />
array_splice</span><span class="keyword">(</span><span class="default">$myArray</span><span class="keyword">, </span><span class="string">'entry'</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Note that you can use unset($myArray['entry']) as well but then, it doesn't enable you to remove more than one entry and it doesn't replace anything in the array, if that's what you intend to do.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="22455""></a>
  <div class="note">
   
   <a href="#22455" class="date">19-Jun-2002 04:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please note that array_splice() 's second argument is an OFFSET and not an INDEX.
<br />

<br />
Lets say you want to 
<br />
$array_of_items = array ('nothing','myitem','hisitem','heritem');
<br />
$sid = array_search('myitem',$array_of_items);
<br />
echo $sid; /* prints out 1, since index element 1 is "myitem" */
<br />

<br />
Now, lets say we want to remove that "myitem" from the array:
<br />

<br />
<span class="default">&lt;?php
<br />
$array_of_items </span><span class="keyword">= </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$array_of_items</span><span class="keyword">,(</span><span class="default">1</span><span class="keyword">+</span><span class="default">$sid</span><span class="keyword">),</span><span class="default">1</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Notice how you have to add a one to the $sid variable?&nbsp; That is because offset item 1 is "nothing" and since $sid is currently 1 (the index of "myitem"), we add 1 more to it to find out
<br />
&nbsp;its OFFSET.
<br />

<br />
DO NOT DO THIS:
<br />
&nbsp;$array_of_items = array_splice($array_of_items,$sid,1);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="22263""></a>
  <div class="note">
   <strong class="user">paule at cs dot tamu dot edu</strong>
   <a href="#22263" class="date">12-Jun-2002 06:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
to kokos@lac.lviv.ua:<br />
<br />
Good point about the code not doing what you expected.<br />
<br />
The failure to check for the insert case like you pointed out is not a bug, however. I didn't add code to handle that because the key of such an added index is more or less undefined in an unordered associative array. Put another way, if your array is associative and not auto-indexed, you most likely care enough about your keys to want to set them explicitly.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="22112""></a>
  <div class="note">
   <strong class="user">paule at cs dot tamu dot edu</strong>
   <a href="#22112" class="date">07-Jun-2002 08:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
After reading KoKos' post above, I thought that the code I posted right before his should do what he wanted. However, my original post neglected to note the little "Tip" in the documentation above, about a single element replacement.
<br />

<br />
If one changes the lines in my code above that says:
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$replacement</span><span class="keyword">))
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$replacement </span><span class="keyword">as </span><span class="default">$r_key</span><span class="keyword">=&gt;</span><span class="default">$r_value</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new_array</span><span class="keyword">[</span><span class="default">$r_key</span><span class="keyword">]=</span><span class="default">$r_value</span><span class="keyword">;
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
to instead say:
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$replacement</span><span class="keyword">))
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new_array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]=</span><span class="default">$replacement</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$replacement</span><span class="keyword">))
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$replacement </span><span class="keyword">as </span><span class="default">$r_key</span><span class="keyword">=&gt;</span><span class="default">$r_value</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new_array</span><span class="keyword">[</span><span class="default">$r_key</span><span class="keyword">]=</span><span class="default">$r_value</span><span class="keyword">;
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
that will solve the problem.
<br />

<br />
Sorry for the omission.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="22111""></a>
  <div class="note">
   <strong class="user">kokos at lac dot lviv dot ua</strong>
   <a href="#22111" class="date">07-Jun-2002 05:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It may seem obvious from the above posts, but cost me a bit of
<br />
braindamage to figure this out...
<br />

<br />
Contrary to the equivalence noted on this page
<br />
$input[$x] = $y&nbsp;&nbsp; &lt;==&gt;&nbsp;&nbsp; array_splice ($input, $x, 1, $y)
<br />
array_splice() will not always work as expected, 
<br />
even provided that you have only INTEGER keys!
<br />

<br />
The following code:
<br />
&nbsp;&nbsp; $t=array('a','b','c','d','e');
<br />
&nbsp;&nbsp; var_dump($t);
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp;&nbsp; </span><span class="keyword">unset(</span><span class="default">$t</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">],</span><span class="default">$t</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">],</span><span class="default">$t</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]);
<br />
&nbsp;&nbsp; </span><span class="default">$t</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]=</span><span class="string">'f'</span><span class="keyword">;
<br />
&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp; </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="string">'g'</span><span class="keyword">);
<br />
&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Will produce:
<br />
array(5) {
<br />
&nbsp; [0]=&gt;
<br />
&nbsp; string(1) "a"
<br />
&nbsp; [1]=&gt;
<br />
&nbsp; string(1) "b"
<br />
&nbsp; [2]=&gt;
<br />
&nbsp; string(1) "c"
<br />
&nbsp; [3]=&gt;
<br />
&nbsp; string(1) "d"
<br />
&nbsp; [4]=&gt;
<br />
&nbsp; string(1) "e"
<br />
}
<br />
array(3) {
<br />
&nbsp; [2]=&gt;
<br />
&nbsp; string(1) "c"
<br />
&nbsp; [4]=&gt;
<br />
&nbsp; string(1) "e"
<br />
&nbsp; [0]=&gt;
<br />
&nbsp; string(1) "f"
<br />
}
<br />
array(3) {
<br />
&nbsp; [0]=&gt;
<br />
&nbsp; string(1) "g"
<br />
&nbsp; [1]=&gt;
<br />
&nbsp; string(1) "e"
<br />
&nbsp; [2]=&gt;
<br />
&nbsp; string(1) "f"
<br />
}
<br />

<br />
Note the position of $t[0] in the second call to var_dump().
<br />
And of course, array_splice() left it intact, changing $t[2] instead.
<br />
This is because it operates the _offset_, not the _index_.&nbsp; :)
<br />
I think that "equivalence note" should be considered buggy.&nbsp; ;)))
<br />

<br />
Best wishes.
<br />
KoKos.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="19084""></a>
  <div class="note">
   <strong class="user">jrhardytwothousandtwo at yahoo dot com</strong>
   <a href="#19084" class="date">15-Feb-2002 08:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A reference is made to INSERT'ing into an array here with array_splice, however its not explained very well.&nbsp; I hope this example will help others find what took me days to research.
<br />

<br />
<span class="default">&lt;?php
<br />
$original_array </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">);
<br />
</span><span class="default">$insert_into_key_position </span><span class="keyword">= </span><span class="default">3</span><span class="keyword">;
<br />
</span><span class="default">$item_to_insert </span><span class="keyword">= </span><span class="string">"blue"</span><span class="keyword">;
<br />

<br />
</span><span class="default">$returned </span><span class="keyword">= </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$original_array</span><span class="keyword">, </span><span class="default">$insert_into_key_position</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$item_to_insert</span><span class="keyword">);
<br />

<br />
</span><span class="comment">// $original_array will now show:
<br />

<br />
// 1,2,3,blue,4,5
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Remember that you are telling the array to insert the element into the KEY position.&nbsp; Thus the elements start with key 0 and so on 0=&gt;1, 1=&gt;2, 2=&gt;3, 3=&gt;blue, 4=&gt;4, 5=&gt;5.&nbsp; And walla, you've inserted.&nbsp; I can't say if this is of any value for named keys, or multidimensional arrays.&nbsp; However it does work for single dimensional arrays.
<br />

<br />
$returned should be an empty array as nothing was returned.&nbsp; This would have substance if you were doing a replace instead.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="18247""></a>
  <div class="note">
   <strong class="user">leingang AT math DOT rutgers DOT edu</strong>
   <a href="#18247" class="date">16-Jan-2002 04:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
array_splice resets the internal pointer of $input.&nbsp; In fact, many array functions do this.&nbsp; Caveat programmor!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

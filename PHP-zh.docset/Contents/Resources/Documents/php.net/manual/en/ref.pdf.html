<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>PDF º¯Êý</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="pdf.examples-basic.html">? Basic Usage Examples</a></li>
      <li style="float: right;"><a href="function.pdf-activate-item.html">PDF_activate_item ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="book.pdf.html">PDF</a></li>
    <li>PDF º¯Êý</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="ref.pdf" class="reference">
  <h1 class="title">PDF º¯Êý</h1>

  <div class="partintro">
    <h1 class="title">Remarks about Deprecated PDFlib Functions</h1> 
   <p class="para">
    Starting with PHP 4.0.5, the PHP extension for PDFlib is
    officially supported by PDFlib GmbH. This means that all the
    functions described in the PDFlib Reference Manual are
    supported by PHP 4 with exactly the same meaning and the same
    parameters. However, with PDFlib Version 5.0.4 or higher all parameters
    have to be specified. For compatibility reasons, this binding for PDFlib
    still supports most of the deprecated functions, but they
    should be replaced by their new versions. PDFlib GmbH will not
    support any problems arising from the use of these deprecated
    functions. The documentation in this section indicates old functions as
    &quot;Deprecated&quot; and gives the replacement function to be used instead. 
   </p>
  </div>

  



















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































 <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="function.pdf-activate-item.html">PDF_activate_item</a> &mdash; Activate structure element or other content item</li><li><a href="function.pdf-add-annotation.html">PDF_add_annotation</a> &mdash; Add annotation [deprecated]</li><li><a href="function.pdf-add-bookmark.html">PDF_add_bookmark</a> &mdash; Add bookmark for current page [deprecated]</li><li><a href="function.pdf-add-launchlink.html">PDF_add_launchlink</a> &mdash; Add launch annotation for current page [deprecated]</li><li><a href="function.pdf-add-locallink.html">PDF_add_locallink</a> &mdash; Add link annotation for current page [deprecated]</li><li><a href="function.pdf-add-nameddest.html">PDF_add_nameddest</a> &mdash; Create named destination</li><li><a href="function.pdf-add-note.html">PDF_add_note</a> &mdash; Set annotation for current page [deprecated]</li><li><a href="function.pdf-add-outline.html">PDF_add_outline</a> &mdash; Add bookmark for current page [deprecated]</li><li><a href="function.pdf-add-pdflink.html">PDF_add_pdflink</a> &mdash; Add file link annotation for current page [deprecated]</li><li><a href="function.pdf-add-table-cell.html">PDF_add_table_cell</a> &mdash; Add a cell to a new or existing table</li><li><a href="function.pdf-add-textflow.html">PDF_add_textflow</a> &mdash; Create Textflow or add text to existing Textflow</li><li><a href="function.pdf-add-thumbnail.html">PDF_add_thumbnail</a> &mdash; Add thumbnail for current page</li><li><a href="function.pdf-add-weblink.html">PDF_add_weblink</a> &mdash; Add weblink for current page [deprecated]</li><li><a href="function.pdf-arc.html">PDF_arc</a> &mdash; Draw a counterclockwise circular arc segment</li><li><a href="function.pdf-arcn.html">PDF_arcn</a> &mdash; Draw a clockwise circular arc segment</li><li><a href="function.pdf-attach-file.html">PDF_attach_file</a> &mdash; Add file attachment for current page [deprecated]</li><li><a href="function.pdf-begin-document.html">PDF_begin_document</a> &mdash; Create new PDF file</li><li><a href="function.pdf-begin-font.html">PDF_begin_font</a> &mdash; Start a Type 3 font definition</li><li><a href="function.pdf-begin-glyph.html">PDF_begin_glyph</a> &mdash; Start glyph definition for Type 3 font</li><li><a href="function.pdf-begin-item.html">PDF_begin_item</a> &mdash; Open structure element or other content item</li><li><a href="function.pdf-begin-layer.html">PDF_begin_layer</a> &mdash; Start layer</li><li><a href="function.pdf-begin-page-ext.html">PDF_begin_page_ext</a> &mdash; Start new page</li><li><a href="function.pdf-begin-page.html">PDF_begin_page</a> &mdash; Start new page [deprecated]</li><li><a href="function.pdf-begin-pattern.html">PDF_begin_pattern</a> &mdash; Start pattern definition</li><li><a href="function.pdf-begin-template-ext.html">PDF_begin_template_ext</a> &mdash; Start template definition</li><li><a href="function.pdf-begin-template.html">PDF_begin_template</a> &mdash; Start template definition [deprecated]</li><li><a href="function.pdf-circle.html">PDF_circle</a> &mdash; Draw a circle</li><li><a href="function.pdf-clip.html">PDF_clip</a> &mdash; Clip to current path</li><li><a href="function.pdf-close-image.html">PDF_close_image</a> &mdash; Close image</li><li><a href="function.pdf-close-pdi-page.html">PDF_close_pdi_page</a> &mdash; Close the page handle</li><li><a href="function.pdf-close-pdi.html">PDF_close_pdi</a> &mdash; Close the input PDF document [deprecated]</li><li><a href="function.pdf-close.html">PDF_close</a> &mdash; Close pdf resource [deprecated]</li><li><a href="function.pdf-closepath-fill-stroke.html">PDF_closepath_fill_stroke</a> &mdash; Close, fill and stroke current path</li><li><a href="function.pdf-closepath-stroke.html">PDF_closepath_stroke</a> &mdash; Close and stroke path</li><li><a href="function.pdf-closepath.html">PDF_closepath</a> &mdash; Close current path</li><li><a href="function.pdf-concat.html">PDF_concat</a> &mdash; Concatenate a matrix to the CTM</li><li><a href="function.pdf-continue-text.html">PDF_continue_text</a> &mdash; Output text in next line</li><li><a href="function.pdf-create-3dview.html">PDF_create_3dview</a> &mdash; Create 3D view</li><li><a href="function.pdf-create-action.html">PDF_create_action</a> &mdash; Create action for objects or events</li><li><a href="function.pdf-create-annotation.html">PDF_create_annotation</a> &mdash; Create rectangular annotation</li><li><a href="function.pdf-create-bookmark.html">PDF_create_bookmark</a> &mdash; Create bookmark</li><li><a href="function.pdf-create-field.html">PDF_create_field</a> &mdash; Create form field</li><li><a href="function.pdf-create-fieldgroup.html">PDF_create_fieldgroup</a> &mdash; Create form field group</li><li><a href="function.pdf-create-gstate.html">PDF_create_gstate</a> &mdash; Create graphics state object</li><li><a href="function.pdf-create-pvf.html">PDF_create_pvf</a> &mdash; Create PDFlib virtual file</li><li><a href="function.pdf-create-textflow.html">PDF_create_textflow</a> &mdash; Create textflow object</li><li><a href="function.pdf-curveto.html">PDF_curveto</a> &mdash; Draw Bezier curve</li><li><a href="function.pdf-define-layer.html">PDF_define_layer</a> &mdash; Create layer definition</li><li><a href="function.pdf-delete-pvf.html">PDF_delete_pvf</a> &mdash; Delete PDFlib virtual file</li><li><a href="function.pdf-delete-table.html">PDF_delete_table</a> &mdash; Delete table object</li><li><a href="function.pdf-delete-textflow.html">PDF_delete_textflow</a> &mdash; Delete textflow object</li><li><a href="function.pdf-delete.html">PDF_delete</a> &mdash; Delete PDFlib object</li><li><a href="function.pdf-encoding-set-char.html">PDF_encoding_set_char</a> &mdash; Add glyph name and/or Unicode value</li><li><a href="function.pdf-end-document.html">PDF_end_document</a> &mdash; Close PDF file</li><li><a href="function.pdf-end-font.html">PDF_end_font</a> &mdash; Terminate Type 3 font definition</li><li><a href="function.pdf-end-glyph.html">PDF_end_glyph</a> &mdash; Terminate glyph definition for Type 3 font</li><li><a href="function.pdf-end-item.html">PDF_end_item</a> &mdash; Close structure element or other content item</li><li><a href="function.pdf-end-layer.html">PDF_end_layer</a> &mdash; Deactivate all active layers</li><li><a href="function.pdf-end-page-ext.html">PDF_end_page_ext</a> &mdash; Finish page</li><li><a href="function.pdf-end-page.html">PDF_end_page</a> &mdash; Finish page</li><li><a href="function.pdf-end-pattern.html">PDF_end_pattern</a> &mdash; Finish pattern</li><li><a href="function.pdf-end-template.html">PDF_end_template</a> &mdash; Finish template</li><li><a href="function.pdf-endpath.html">PDF_endpath</a> &mdash; End current path</li><li><a href="function.pdf-fill-imageblock.html">PDF_fill_imageblock</a> &mdash; Fill image block with variable data</li><li><a href="function.pdf-fill-pdfblock.html">PDF_fill_pdfblock</a> &mdash; Fill PDF block with variable data</li><li><a href="function.pdf-fill-stroke.html">PDF_fill_stroke</a> &mdash; Fill and stroke path</li><li><a href="function.pdf-fill-textblock.html">PDF_fill_textblock</a> &mdash; Fill text block with variable data</li><li><a href="function.pdf-fill.html">PDF_fill</a> &mdash; Fill current path</li><li><a href="function.pdf-findfont.html">PDF_findfont</a> &mdash; Prepare font for later use [deprecated]</li><li><a href="function.pdf-fit-image.html">PDF_fit_image</a> &mdash; Place image or template</li><li><a href="function.pdf-fit-pdi-page.html">PDF_fit_pdi_page</a> &mdash; Place imported PDF page</li><li><a href="function.pdf-fit-table.html">PDF_fit_table</a> &mdash; Place table on page</li><li><a href="function.pdf-fit-textflow.html">PDF_fit_textflow</a> &mdash; Format textflow in rectangular area</li><li><a href="function.pdf-fit-textline.html">PDF_fit_textline</a> &mdash; Place single line of text</li><li><a href="function.pdf-get-apiname.html">PDF_get_apiname</a> &mdash; Get name of unsuccessfull API function</li><li><a href="function.pdf-get-buffer.html">PDF_get_buffer</a> &mdash; Get PDF output buffer</li><li><a href="function.pdf-get-errmsg.html">PDF_get_errmsg</a> &mdash; Get error text</li><li><a href="function.pdf-get-errnum.html">PDF_get_errnum</a> &mdash; Get error number</li><li><a href="function.pdf-get-font.html">PDF_get_font</a> &mdash; Get font [deprecated]</li><li><a href="function.pdf-get-fontname.html">PDF_get_fontname</a> &mdash; Get font name [deprecated]</li><li><a href="function.pdf-get-fontsize.html">PDF_get_fontsize</a> &mdash; Font handling [deprecated]</li><li><a href="function.pdf-get-image-height.html">PDF_get_image_height</a> &mdash; Get image height [deprecated]</li><li><a href="function.pdf-get-image-width.html">PDF_get_image_width</a> &mdash; Get image width [deprecated]</li><li><a href="function.pdf-get-majorversion.html">PDF_get_majorversion</a> &mdash; Get major version number [deprecated]</li><li><a href="function.pdf-get-minorversion.html">PDF_get_minorversion</a> &mdash; Get minor version number [deprecated]</li><li><a href="function.pdf-get-parameter.html">PDF_get_parameter</a> &mdash; Get string parameter</li><li><a href="function.pdf-get-pdi-parameter.html">PDF_get_pdi_parameter</a> &mdash; Get PDI string parameter [deprecated]</li><li><a href="function.pdf-get-pdi-value.html">PDF_get_pdi_value</a> &mdash; Get PDI numerical parameter [deprecated]</li><li><a href="function.pdf-get-value.html">PDF_get_value</a> &mdash; Get numerical parameter</li><li><a href="function.pdf-info-font.html">PDF_info_font</a> &mdash; Query detailed information about a loaded font</li><li><a href="function.pdf-info-matchbox.html">PDF_info_matchbox</a> &mdash; Query matchbox information</li><li><a href="function.pdf-info-table.html">PDF_info_table</a> &mdash; Retrieve table information</li><li><a href="function.pdf-info-textflow.html">PDF_info_textflow</a> &mdash; Query textflow state</li><li><a href="function.pdf-info-textline.html">PDF_info_textline</a> &mdash; Perform textline formatting and query metrics</li><li><a href="function.pdf-initgraphics.html">PDF_initgraphics</a> &mdash; Reset graphic state</li><li><a href="function.pdf-lineto.html">PDF_lineto</a> &mdash; Draw a line</li><li><a href="function.pdf-load-3ddata.html">PDF_load_3ddata</a> &mdash; Load 3D model</li><li><a href="function.pdf-load-font.html">PDF_load_font</a> &mdash; Search and prepare font</li><li><a href="function.pdf-load-iccprofile.html">PDF_load_iccprofile</a> &mdash; Search and prepare ICC profile</li><li><a href="function.pdf-load-image.html">PDF_load_image</a> &mdash; Open image file</li><li><a href="function.pdf-makespotcolor.html">PDF_makespotcolor</a> &mdash; Make spot color</li><li><a href="function.pdf-moveto.html">PDF_moveto</a> &mdash; Set current point</li><li><a href="function.pdf-new.html">PDF_new</a> &mdash; Create PDFlib object</li><li><a href="function.pdf-open-ccitt.html">PDF_open_ccitt</a> &mdash; Open raw CCITT image [deprecated]</li><li><a href="function.pdf-open-file.html">PDF_open_file</a> &mdash; Create PDF file [deprecated]</li><li><a href="function.pdf-open-gif.html">PDF_open_gif</a> &mdash; Open GIF image [deprecated]</li><li><a href="function.pdf-open-image-file.html">PDF_open_image_file</a> &mdash; Read image from file [deprecated]</li><li><a href="function.pdf-open-image.html">PDF_open_image</a> &mdash; Use image data [deprecated]</li><li><a href="function.pdf-open-jpeg.html">PDF_open_jpeg</a> &mdash; Open JPEG image [deprecated]</li><li><a href="function.pdf-open-memory-image.html">PDF_open_memory_image</a> &mdash; Open image created with PHP's image functions [not supported]</li><li><a href="function.pdf-open-pdi-document.html">PDF_open_pdi_document</a> &mdash; Prepare a pdi document</li><li><a href="function.pdf-open-pdi-page.html">PDF_open_pdi_page</a> &mdash; Prepare a page</li><li><a href="function.pdf-open-pdi.html">PDF_open_pdi</a> &mdash; Open PDF file [deprecated]</li><li><a href="function.pdf-open-tiff.html">PDF_open_tiff</a> &mdash; Open TIFF image [deprecated]</li><li><a href="function.pdf-pcos-get-number.html">PDF_pcos_get_number</a> &mdash; Get value of pCOS path with type number or boolean</li><li><a href="function.pdf-pcos-get-stream.html">PDF_pcos_get_stream</a> &mdash; Get contents of pCOS path with type stream, fstream, or string</li><li><a href="function.pdf-pcos-get-string.html">PDF_pcos_get_string</a> &mdash; Get value of pCOS path with type name, string, or boolean</li><li><a href="function.pdf-place-image.html">PDF_place_image</a> &mdash; Place image on the page [deprecated]</li><li><a href="function.pdf-place-pdi-page.html">PDF_place_pdi_page</a> &mdash; Place PDF page [deprecated]</li><li><a href="function.pdf-process-pdi.html">PDF_process_pdi</a> &mdash; Process imported PDF document</li><li><a href="function.pdf-rect.html">PDF_rect</a> &mdash; Draw rectangle</li><li><a href="function.pdf-restore.html">PDF_restore</a> &mdash; Restore graphics state</li><li><a href="function.pdf-resume-page.html">PDF_resume_page</a> &mdash; Resume page</li><li><a href="function.pdf-rotate.html">PDF_rotate</a> &mdash; Rotate coordinate system</li><li><a href="function.pdf-save.html">PDF_save</a> &mdash; Save graphics state</li><li><a href="function.pdf-scale.html">PDF_scale</a> &mdash; Scale coordinate system</li><li><a href="function.pdf-set-border-color.html">PDF_set_border_color</a> &mdash; Set border color of annotations [deprecated]</li><li><a href="function.pdf-set-border-dash.html">PDF_set_border_dash</a> &mdash; Set border dash style of annotations [deprecated]</li><li><a href="function.pdf-set-border-style.html">PDF_set_border_style</a> &mdash; Set border style of annotations [deprecated]</li><li><a href="function.pdf-set-char-spacing.html">PDF_set_char_spacing</a> &mdash; Set character spacing [deprecated]</li><li><a href="function.pdf-set-duration.html">PDF_set_duration</a> &mdash; Set duration between pages [deprecated]</li><li><a href="function.pdf-set-gstate.html">PDF_set_gstate</a> &mdash; Activate graphics state object</li><li><a href="function.pdf-set-horiz-scaling.html">PDF_set_horiz_scaling</a> &mdash; Set horizontal text scaling [deprecated]</li><li><a href="function.pdf-set-info-author.html">PDF_set_info_author</a> &mdash; Fill the author document info field [deprecated]</li><li><a href="function.pdf-set-info-creator.html">PDF_set_info_creator</a> &mdash; Fill the creator document info field [deprecated]</li><li><a href="function.pdf-set-info-keywords.html">PDF_set_info_keywords</a> &mdash; Fill the keywords document info field [deprecated]</li><li><a href="function.pdf-set-info-subject.html">PDF_set_info_subject</a> &mdash; Fill the subject document info field [deprecated]</li><li><a href="function.pdf-set-info-title.html">PDF_set_info_title</a> &mdash; Fill the title document info field [deprecated]</li><li><a href="function.pdf-set-info.html">PDF_set_info</a> &mdash; Fill document info field</li><li><a href="function.pdf-set-layer-dependency.html">PDF_set_layer_dependency</a> &mdash; Define relationships among layers</li><li><a href="function.pdf-set-leading.html">PDF_set_leading</a> &mdash; Set distance between text lines [deprecated]</li><li><a href="function.pdf-set-parameter.html">PDF_set_parameter</a> &mdash; Set string parameter</li><li><a href="function.pdf-set-text-matrix.html">PDF_set_text_matrix</a> &mdash; Set text matrix [deprecated]</li><li><a href="function.pdf-set-text-pos.html">PDF_set_text_pos</a> &mdash; Set text position</li><li><a href="function.pdf-set-text-rendering.html">PDF_set_text_rendering</a> &mdash; Determine text rendering [deprecated]</li><li><a href="function.pdf-set-text-rise.html">PDF_set_text_rise</a> &mdash; Set text rise [deprecated]</li><li><a href="function.pdf-set-value.html">PDF_set_value</a> &mdash; Set numerical parameter</li><li><a href="function.pdf-set-word-spacing.html">PDF_set_word_spacing</a> &mdash; Set spacing between words [deprecated]</li><li><a href="function.pdf-setcolor.html">PDF_setcolor</a> &mdash; Set fill and stroke color</li><li><a href="function.pdf-setdash.html">PDF_setdash</a> &mdash; Set simple dash pattern</li><li><a href="function.pdf-setdashpattern.html">PDF_setdashpattern</a> &mdash; Set dash pattern</li><li><a href="function.pdf-setflat.html">PDF_setflat</a> &mdash; Set flatness</li><li><a href="function.pdf-setfont.html">PDF_setfont</a> &mdash; Set font</li><li><a href="function.pdf-setgray-fill.html">PDF_setgray_fill</a> &mdash; Set fill color to gray [deprecated]</li><li><a href="function.pdf-setgray-stroke.html">PDF_setgray_stroke</a> &mdash; Set stroke color to gray [deprecated]</li><li><a href="function.pdf-setgray.html">PDF_setgray</a> &mdash; Set color to gray [deprecated]</li><li><a href="function.pdf-setlinecap.html">PDF_setlinecap</a> &mdash; Set linecap parameter</li><li><a href="function.pdf-setlinejoin.html">PDF_setlinejoin</a> &mdash; Set linejoin parameter</li><li><a href="function.pdf-setlinewidth.html">PDF_setlinewidth</a> &mdash; Set line width</li><li><a href="function.pdf-setmatrix.html">PDF_setmatrix</a> &mdash; Set current transformation matrix</li><li><a href="function.pdf-setmiterlimit.html">PDF_setmiterlimit</a> &mdash; Set miter limit</li><li><a href="function.pdf-setpolydash.html">PDF_setpolydash</a> &mdash; Set complicated dash pattern [deprecated]</li><li><a href="function.pdf-setrgbcolor-fill.html">PDF_setrgbcolor_fill</a> &mdash; Set fill rgb color values [deprecated]</li><li><a href="function.pdf-setrgbcolor-stroke.html">PDF_setrgbcolor_stroke</a> &mdash; Set stroke rgb color values [deprecated]</li><li><a href="function.pdf-setrgbcolor.html">PDF_setrgbcolor</a> &mdash; Set fill and stroke rgb color values [deprecated]</li><li><a href="function.pdf-shading-pattern.html">PDF_shading_pattern</a> &mdash; Define shading pattern</li><li><a href="function.pdf-shading.html">PDF_shading</a> &mdash; Define blend</li><li><a href="function.pdf-shfill.html">PDF_shfill</a> &mdash; Fill area with shading</li><li><a href="function.pdf-show-boxed.html">PDF_show_boxed</a> &mdash; Output text in a box [deprecated]</li><li><a href="function.pdf-show-xy.html">PDF_show_xy</a> &mdash; Output text at given position</li><li><a href="function.pdf-show.html">PDF_show</a> &mdash; Output text at current position</li><li><a href="function.pdf-skew.html">PDF_skew</a> &mdash; Skew the coordinate system</li><li><a href="function.pdf-stringwidth.html">PDF_stringwidth</a> &mdash; Return width of text</li><li><a href="function.pdf-stroke.html">PDF_stroke</a> &mdash; Stroke path</li><li><a href="function.pdf-suspend-page.html">PDF_suspend_page</a> &mdash; Suspend page</li><li><a href="function.pdf-translate.html">PDF_translate</a> &mdash; Set origin of coordinate system</li><li><a href="function.pdf-utf16-to-utf8.html">PDF_utf16_to_utf8</a> &mdash; Convert string from UTF-16 to UTF-8</li><li><a href="function.pdf-utf32-to-utf16.html">PDF_utf32_to_utf16</a> &mdash; Convert string from UTF-32 to UTF-16</li><li><a href="function.pdf-utf8-to-utf16.html">PDF_utf8_to_utf16</a> &mdash; Convert string from UTF-8 to UTF-16</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="113533""></a>
  <div class="note">
   <strong class="user">sebastien at malot dot fr</strong>
   <a href="#113533" class="date">26-Oct-2013 07:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi,<br />
<br />
I post this comment here because I always wanted to extract text from PDF files, but I never found it.<br />
So now, I spread my tresor.<br />
<br />
So spend much time in creating a PHP library to extract text from pages.<br />
Based on TCPDF parser class, now my lib can handle many cases such as multiple charset encoding, base64 and octal encoding ...<br />
<br />
Project webiste : <a href="http://www.pdfparser.org" rel="nofollow" target="_blank">http://www.pdfparser.org</a><br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// Include Composer autoloader if not already done.<br />
</span><span class="keyword">include </span><span class="string">'vendor/autoload.php'</span><span class="keyword">;<br />
&nbsp;<br />
</span><span class="comment">// Parse pdf file and build necessary objects.<br />
</span><span class="default">$parser </span><span class="keyword">= new \</span><span class="default">Smalot</span><span class="keyword">\</span><span class="default">PdfParser</span><span class="keyword">\</span><span class="default">Parser</span><span class="keyword">();<br />
</span><span class="default">$pdf&nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">$parser</span><span class="keyword">-&gt;</span><span class="default">parseFile</span><span class="keyword">(</span><span class="string">'document.pdf'</span><span class="keyword">);<br />
&nbsp;<br />
</span><span class="comment">// Retrieve all pages from the pdf file.<br />
</span><span class="default">$pages&nbsp; </span><span class="keyword">= </span><span class="default">$pdf</span><span class="keyword">-&gt;</span><span class="default">getPages</span><span class="keyword">();<br />
&nbsp;<br />
</span><span class="comment">// Loop over each page to extract text.<br />
</span><span class="keyword">foreach (</span><span class="default">$pages </span><span class="keyword">as </span><span class="default">$page</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$page</span><span class="keyword">-&gt;</span><span class="default">getText</span><span class="keyword">();<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Don't hesitate to report any bug on github issue report tool.<br />
<br />
Thanks</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112931""></a>
  <div class="note">
   <strong class="user">sebastien at malot dot fr</strong>
   <a href="#112931" class="date">08-Aug-2013 07:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Do you have a sample pdf ?<br />
Can you try those classes :<br />
<br />
<a href="http://gist.github.com/smalot/6183152" rel="nofollow" target="_blank">http://gist.github.com/smalot/6183152</a><br />
or<br />
<a href="http://www.zikko.se/resources/extractFromPDF.php" rel="nofollow" target="_blank">http://www.zikko.se/resources/extractFromPDF.php</a><br />
<br />
can you see your links on the extracted content ?<br />
BR</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90253""></a>
  <div class="note">
   <strong class="user">bolyde at gmail dot com</strong>
   <a href="#90253" class="date">12-Apr-2009 09:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi,<br />
To find the page number of a PDF File, i find this :<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">public function </span><span class="default">getNumPagesInPDF</span><span class="keyword">(array </span><span class="default">$arguments </span><span class="keyword">= array()) <br />
{<br />
@list(</span><span class="default">$PDFPath</span><span class="keyword">) = </span><span class="default">$arguments</span><span class="keyword">;<br />
</span><span class="default">$stream </span><span class="keyword">= @</span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$PDFPath</span><span class="keyword">, </span><span class="string">"r"</span><span class="keyword">);<br />
</span><span class="default">$PDFContent </span><span class="keyword">= @</span><span class="default">fread </span><span class="keyword">(</span><span class="default">$stream</span><span class="keyword">, </span><span class="default">filesize</span><span class="keyword">(</span><span class="default">$PDFPath</span><span class="keyword">));<br />
if(!</span><span class="default">$stream </span><span class="keyword">|| !</span><span class="default">$PDFContent</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
</span><span class="default">$firstValue </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
</span><span class="default">$secondValue </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/\/N\s+([0-9]+)/"</span><span class="keyword">, </span><span class="default">$PDFContent</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$firstValue </span><span class="keyword">= </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br />
}<br />
&nbsp;<br />
if(</span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">"/\/Count\s+([0-9]+)/s"</span><span class="keyword">, </span><span class="default">$PDFContent</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">))<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$secondValue </span><span class="keyword">= </span><span class="default">max</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);<br />
}<br />
return ((</span><span class="default">$secondValue </span><span class="keyword">!= </span><span class="default">0</span><span class="keyword">) ? </span><span class="default">$secondValue </span><span class="keyword">: </span><span class="default">max</span><span class="keyword">(</span><span class="default">$firstValue</span><span class="keyword">, </span><span class="default">$secondValue</span><span class="keyword">));<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86245""></a>
  <div class="note">
   <strong class="user">bondo2 at bondo2 dot info</strong>
   <a href="#86245" class="date">09-Oct-2008 11:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php
<br />

<br />
</span><span class="comment">//getting new instance 
<br />
</span><span class="default">$pdfFile </span><span class="keyword">= </span><span class="default">new_pdf</span><span class="keyword">();
<br />

<br />
</span><span class="default">PDF_open_file</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">, </span><span class="string">" "</span><span class="keyword">);
<br />

<br />
</span><span class="comment">//document info
<br />
</span><span class="default">pdf_set_info</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">, </span><span class="string">"Auther"</span><span class="keyword">, </span><span class="string">"Ahmed Elbshry"</span><span class="keyword">);
<br />
</span><span class="default">pdf_set_info</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">, </span><span class="string">"Creator"</span><span class="keyword">, </span><span class="string">"Ahmed Elbshry"</span><span class="keyword">);
<br />
</span><span class="default">pdf_set_info</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">, </span><span class="string">"Title"</span><span class="keyword">, </span><span class="string">"PDFlib"</span><span class="keyword">);
<br />
</span><span class="default">pdf_set_info</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">, </span><span class="string">"Subject"</span><span class="keyword">, </span><span class="string">"Using PDFlib"</span><span class="keyword">);
<br />

<br />
</span><span class="comment">//starting our page and define the width and highet of the document
<br />
</span><span class="default">pdf_begin_page</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">, </span><span class="default">595</span><span class="keyword">, </span><span class="default">842</span><span class="keyword">);
<br />

<br />
</span><span class="comment">//check if Arial font is found, or exit
<br />
</span><span class="keyword">if(</span><span class="default">$font </span><span class="keyword">= </span><span class="default">PDF_findfont</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">, </span><span class="string">"Arial"</span><span class="keyword">, </span><span class="string">"winansi"</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">)) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">PDF_setfont</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">, </span><span class="default">$font</span><span class="keyword">, </span><span class="default">12</span><span class="keyword">);
<br />
} else {
<br />
&nbsp;&nbsp;&nbsp; echo (</span><span class="string">"Font Not Found!"</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">PDF_end_page</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">PDF_close</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">PDF_delete</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; exit();
<br />
}
<br />

<br />
</span><span class="comment">//start writing from the point 50,780
<br />
</span><span class="default">PDF_show_xy</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">, </span><span class="string">"This Text In Arial Font"</span><span class="keyword">, </span><span class="default">50</span><span class="keyword">, </span><span class="default">780</span><span class="keyword">);
<br />
</span><span class="default">PDF_end_page</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">);
<br />
</span><span class="default">PDF_close</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">);
<br />

<br />
</span><span class="comment">//store the pdf document in $pdf
<br />
</span><span class="default">$pdf </span><span class="keyword">= </span><span class="default">PDF_get_buffer</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">);
<br />
</span><span class="comment">//get&nbsp; the len to tell the browser about it
<br />
</span><span class="default">$pdflen </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">);
<br />

<br />
</span><span class="comment">//telling the browser about the pdf document
<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-type: application/pdf"</span><span class="keyword">);
<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-length: </span><span class="default">$pdflen</span><span class="string">"</span><span class="keyword">);
<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-Disposition: inline; filename=phpMade.pdf"</span><span class="keyword">);
<br />
</span><span class="comment">//output the document
<br />
</span><span class="keyword">print(</span><span class="default">$pdf</span><span class="keyword">);
<br />
</span><span class="comment">//delete the object
<br />
</span><span class="default">PDF_delete</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80521""></a>
  <div class="note">
   <strong class="user">SID TRIVEDI</strong>
   <a href="#80521" class="date">20-Jan-2008 03:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
/*<br />
Folks, There is an excellent tutorial from Rasmus Lerdorf available at (It does not support I.E.)<br />
<br />
<a href="http://talks.php.net/show/osconpdf/" rel="nofollow" target="_blank">http://talks.php.net/show/osconpdf/</a><br />
<br />
Where PHP Mastermind Guru (Father) explained nicely about text, fonts, images and their attributes with working snippets.<br />
<br />
Another tutorial can be found at<br />
<br />
www.devshed.com/c/a/PHP/Building-PDF-Documents-with-PHP-5<br />
<br />
Hence following is the various size of PDF Document.<br />
<br />
Origin is at the lower left and the basic unit is the DTP pt.<br />
<br />
1 pt = 1/72 inch = 0.35277777778 mm<br />
<br />
Some common page sizes<br />
<br />
Format&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Width&nbsp;&nbsp; Height<br />
US-Letter&nbsp; &nbsp; &nbsp; 612&nbsp; &nbsp; &nbsp; 792<br />
US-Legal&nbsp; &nbsp; &nbsp;&nbsp; 612&nbsp; &nbsp; &nbsp; 1008<br />
US-Ledger&nbsp; &nbsp;&nbsp; 1224&nbsp; &nbsp;&nbsp; 792<br />
11x17&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 792&nbsp; &nbsp; &nbsp; 1224<br />
A0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2380&nbsp; &nbsp; 3368<br />
A1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1684&nbsp; &nbsp; 2380<br />
A2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1190&nbsp; &nbsp; 1684<br />
A3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 842&nbsp; &nbsp; &nbsp; 1190<br />
A4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 595&nbsp; &nbsp; &nbsp; 842<br />
A5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 421&nbsp; &nbsp; &nbsp; 595<br />
A6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 297&nbsp; &nbsp; &nbsp; 421<br />
B5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 501&nbsp; &nbsp; &nbsp; 709<br />
<br />
*/</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80322""></a>
  <div class="note">
   <strong class="user">info at tecnick dot com</strong>
   <a href="#80322" class="date">10-Jan-2008 09:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those of us that do not want to pay for a commercial license to use PDFlib I suggest TCPDF:<br />
<br />
<a href="http://tcpdf.sf.net" rel="nofollow" target="_blank">http://tcpdf.sf.net</a><br />
<br />
TCPDF is an Open Source PHP class for generating PDF files on-the-fly without requiring external extensions. This class is already adopted by a large number of php projects such as phpMyAdmin, Drupal, Joomla, Xoops, TCExam, etc.&nbsp; <br />
<br />
Starting from 2.1 version TCPDF supports UTF-8 Unicode and bidirectional languages such as Arabic and Hebrew.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79333""></a>
  <div class="note">
   <strong class="user">Ken McColl</strong>
   <a href="#79333" class="date">21-Nov-2007 02:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To get this to work on Windows do not use escapeshellcmd()<br />
<br />
From online help:<br />
Following characters are preceded by a backslash: #&amp;;`|*?~&lt;&gt;^()[]{}$\, \x0A and \xFF. ' and " are escaped only if they are not paired. In Windows, all these characters plus % are replaced by a space instead.<br />
<br />
So you are probably passing duff paths to pdf2text.exe<br />
<br />
Removing escapeshellcmd worked for me. Just make darned sure you are in control of what is being passed through to your system call.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79266""></a>
  <div class="note">
   <strong class="user">kangaroo232002 at yahoo dot co dot uk</strong>
   <a href="#79266" class="date">18-Nov-2007 09:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To extend alex's example earlier, you can use a couple of switches inside the pdf doc to give you the total number of pages, without using any ext. I would have added the whole code, however the site keeps on saying "line is too long... yadayada".<br />
<br />
Open the doc using fopen("$file", "rb"); (for reading)<br />
<br />
Test the first approx 1000b for the following regex<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/\/N\s+([0-9]+)/"</span><span class="keyword">, </span><span class="default">$contents</span><span class="keyword">, </span><span class="default">$found</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$found</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
If that doesn't return anything, you have to read the rest of the file:<br />
<br />
<span class="default">&lt;?php<br />
<br />
preg_match_all</span><span class="keyword">(</span><span class="string">"/\/Type\s*\/Pages\s*\/Kids\s+<br />
\[.*?\]\s*\/Count\s+([0-9]+)/"</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
This may return more than one, so look through for the highest value, which is the total number of pages in your doc.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74211""></a>
  <div class="note">
   <strong class="user">luc at phpt dot org</strong>
   <a href="#74211" class="date">30-Mar-2007 06:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I am trying to extract the text from PDF files and use it to feed a search engine (Intranet tool). I tried several functions "PDF2TXT" posted below, but not they do not produce the expected result. At least, all words need to be separated by spaces (then used as keywords), and the "junk" codes removed (for example: binary data, pictures...). I start modifying the interesting function posted by Swen, and here is the my current version that starts to work quite well (with PDF version 1.2). Sorry for having a quite different style of programming. Luc<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Patch for pdf2txt() posted Sven Schuberth<br />
// Add/replace following code (cannot post full program, size limitation)<br />
<br />
// handles the verson 1.2<br />
// New version of handleV2($data), only one line changed<br />
</span><span class="keyword">function </span><span class="default">handleV2</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// grab objects and then grab their contents (chunks)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$a_obj </span><span class="keyword">= </span><span class="default">getDataArray</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">,</span><span class="string">"obj"</span><span class="keyword">,</span><span class="string">"endobj"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$a_obj </span><span class="keyword">as </span><span class="default">$obj</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a_filter </span><span class="keyword">= </span><span class="default">getDataArray</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">,</span><span class="string">"&lt;&lt;"</span><span class="keyword">,</span><span class="string">"&gt;&gt;"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$a_filter</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$j</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a_chunks</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">][</span><span class="string">"filter"</span><span class="keyword">] = </span><span class="default">$a_filter</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a_data </span><span class="keyword">= </span><span class="default">getDataArray</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">,</span><span class="string">"stream\r\n"</span><span class="keyword">,</span><span class="string">"endstream"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$a_data</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a_chunks</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">][</span><span class="string">"data"</span><span class="keyword">] = </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$a_data</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">],<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">strlen</span><span class="keyword">(</span><span class="string">"stream\r\n"</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$a_data</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">])-</span><span class="default">strlen</span><span class="keyword">(</span><span class="string">"stream\r\n"</span><span class="keyword">)-</span><span class="default">strlen</span><span class="keyword">(</span><span class="string">"endstream"</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// decode the chunks<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach(</span><span class="default">$a_chunks </span><span class="keyword">as </span><span class="default">$chunk</span><span class="keyword">){<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// look at each chunk and decide how to decode it - by looking at the contents of the filter<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a_filter </span><span class="keyword">= </span><span class="default">split</span><span class="keyword">(</span><span class="string">"/"</span><span class="keyword">,</span><span class="default">$chunk</span><span class="keyword">[</span><span class="string">"filter"</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$chunk</span><span class="keyword">[</span><span class="string">"data"</span><span class="keyword">]!=</span><span class="string">""</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// look at the filter to find out which encoding has been used&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$chunk</span><span class="keyword">[</span><span class="string">"filter"</span><span class="keyword">],</span><span class="string">"FlateDecode"</span><span class="keyword">)!==</span><span class="default">false</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$data </span><span class="keyword">=@ </span><span class="default">gzuncompress</span><span class="keyword">(</span><span class="default">$chunk</span><span class="keyword">[</span><span class="string">"data"</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">)!=</span><span class="string">""</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// CHANGED HERE, before: $result_data .= ps2txt($data);&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result_data </span><span class="keyword">.= </span><span class="default">PS2Text_New</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//$result_data .= "x";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result_data</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// New function - Extract text from PS codes<br />
</span><span class="keyword">function </span><span class="default">ExtractPSTextElement</span><span class="keyword">(</span><span class="default">$SourceString</span><span class="keyword">)<br />
{<br />
</span><span class="default">$CurStartPos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
while ((</span><span class="default">$CurStartText </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$SourceString</span><span class="keyword">, </span><span class="string">'('</span><span class="keyword">, </span><span class="default">$CurStartPos</span><span class="keyword">)) !== </span><span class="default">FALSE</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// New text element found<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$CurStartText </span><span class="keyword">- </span><span class="default">$CurStartPos </span><span class="keyword">&gt; </span><span class="default">8</span><span class="keyword">) </span><span class="default">$Spacing </span><span class="keyword">= </span><span class="string">' '</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; else&nbsp; &nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$SpacingSize </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$SourceString</span><span class="keyword">, </span><span class="default">$CurStartPos</span><span class="keyword">, </span><span class="default">$CurStartText </span><span class="keyword">- </span><span class="default">$CurStartPos</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$SpacingSize </span><span class="keyword">&lt; -</span><span class="default">25</span><span class="keyword">) </span><span class="default">$Spacing </span><span class="keyword">= </span><span class="string">' '</span><span class="keyword">; else </span><span class="default">$Spacing </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$CurStartText</span><span class="keyword">++;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$StartSearchEnd </span><span class="keyword">= </span><span class="default">$CurStartText</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; while ((</span><span class="default">$CurStartPos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$SourceString</span><span class="keyword">, </span><span class="string">')'</span><span class="keyword">, </span><span class="default">$StartSearchEnd</span><span class="keyword">)) !== </span><span class="default">FALSE</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$SourceString</span><span class="keyword">, </span><span class="default">$CurStartPos </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">) != </span><span class="string">'\\'</span><span class="keyword">) break;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$StartSearchEnd </span><span class="keyword">= </span><span class="default">$CurStartPos </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$CurStartPos </span><span class="keyword">=== </span><span class="default">FALSE</span><span class="keyword">) break; </span><span class="comment">// something wrong happened<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; // Remove ending '-'<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$Result</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">) == </span><span class="string">'-'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$Spacing </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$Result </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$Result</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Add to result<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$Result </span><span class="keyword">.= </span><span class="default">$Spacing </span><span class="keyword">. </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$SourceString</span><span class="keyword">, </span><span class="default">$CurStartText</span><span class="keyword">, </span><span class="default">$CurStartPos </span><span class="keyword">- </span><span class="default">$CurStartText</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$CurStartPos</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="comment">// Add line breaks (otherwise, result is one big line...)<br />
</span><span class="keyword">return </span><span class="default">$Result </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// Global table for codes replacement <br />
</span><span class="default">$TCodeReplace </span><span class="keyword">= array (</span><span class="string">'\(' </span><span class="keyword">=&gt; </span><span class="string">'('</span><span class="keyword">, </span><span class="string">'\)' </span><span class="keyword">=&gt; </span><span class="string">')'</span><span class="keyword">);<br />
<br />
</span><span class="comment">// New function, replacing old "pd2txt" function<br />
</span><span class="keyword">function </span><span class="default">PS2Text_New</span><span class="keyword">(</span><span class="default">$PS_Data</span><span class="keyword">)<br />
{<br />
global </span><span class="default">$TCodeReplace</span><span class="keyword">;<br />
<br />
</span><span class="comment">// Catch up some codes<br />
</span><span class="keyword">if (</span><span class="default">ord</span><span class="keyword">(</span><span class="default">$PS_Data</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) &lt; </span><span class="default">10</span><span class="keyword">) return </span><span class="string">''</span><span class="keyword">; <br />
if (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$PS_Data</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">8</span><span class="keyword">) == </span><span class="string">'/CIDInit'</span><span class="keyword">) return </span><span class="string">''</span><span class="keyword">;<br />
<br />
</span><span class="comment">// Some text inside (...) can be found outside the [...] sets, then ignored <br />
// =&gt; disable the processing of [...] is the easiest solution<br />
<br />
</span><span class="default">$Result </span><span class="keyword">= </span><span class="default">ExtractPSTextElement</span><span class="keyword">(</span><span class="default">$PS_Data</span><span class="keyword">);<br />
<br />
</span><span class="comment">// echo "Code=$PS_Data\nRES=$Result\n\n";<br />
<br />
// Remove/translate some codes<br />
</span><span class="keyword">return </span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$Result</span><span class="keyword">, </span><span class="default">$TCodeReplace</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69083""></a>
  <div class="note">
   <strong class="user">brendandonhue at comcast dot net</strong>
   <a href="#69083" class="date">22-Aug-2006 05:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a function to test whether a file is a PDF without using any external library.
<br />
<span class="default">&lt;?php
<br />
define</span><span class="keyword">(</span><span class="string">'PDF_MAGIC'</span><span class="keyword">, </span><span class="string">"\\x25\\x50\\x44\\x46\\x2D"</span><span class="keyword">);
<br />
function </span><span class="default">is_pdf</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">) {
<br />
&nbsp; return (</span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">, </span><span class="default">null</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">PDF_MAGIC</span><span class="keyword">)) === </span><span class="default">PDF_MAGIC</span><span class="keyword">) ? </span><span class="default">true </span><span class="keyword">: </span><span class="default">false</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>It's not checking if the whole file is valid, just if the correct header is present at the beginning of the file.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68192""></a>
  <div class="note">
   <strong class="user">MAGnUm at magnumhome dot servehttp.com</strong>
   <a href="#68192" class="date">17-Jul-2006 11:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
domPDF is also a great PDF creation interface. it basically converts your code to CSS and then builds the PDF from that with the absolute positions, and what not...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60640""></a>
  <div class="note">
   <strong class="user">spingary at yahoo dot com</strong>
   <a href="#60640" class="date">12-Jan-2006 09:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was having trouble with streaming inline PDf's using PHP 5.0.2, Apache 2.0.54.<br />
<br />
This is my code:<br />
<br />
&lt;?<br />
header("Pragma: public");<br />
header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");<br />
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");<br />
header("Cache-Control: must-revalidate");<br />
header("Content-type: application/pdf");<br />
header("Content-Length: ".filesize($file));<br />
header("Content-disposition: inline; filename=$file");<br />
header("Accept-Ranges: ".filesize($file)); <br />
readfile($file);<br />
exit();<br />
?&gt;<br />
It would work fine in Mozilla Firefox (1.0.7) but with IE (6.0.2800.1106) it would not bring up the Adobe Reader plugin and instead ask me to save it or open it as a PHP file.<br />
<br />
Oddly enough, I turned off ZLib.compression and it started working.&nbsp; I guess the compression is confusing IE.&nbsp; I tried leaving out the content-length header thinking maybe it was unmatched filesize (uncompressed number vs actual received compressed size), but then without it it screws up Firefox too.&nbsp; <br />
<br />
What I ended up doing was disabling Zlib compression for the PDF output pages using ini_set:<br />
<br />
&lt;?<br />
ini_set('zlib.output_compression','Off'); <br />
?&gt;<br />
<br />
Maybe this will help someone. Will post over in the PDF section as well.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58420""></a>
  <div class="note">
   <strong class="user">ontwerp AT zonnet.nl</strong>
   <a href="#58420" class="date">03-Nov-2005 08:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was searching for a lowcost/opensource option for combining static html files [as templates] and dynamic output from perl or php routines etc. And the sooner or later I found out that this was the most stable, 'speedest' and customizeable way to produce usable pdf 's with nice formatting :<br />
<br />
1] create html page output [perl-&gt; html output, direct html output from any app or php echo's etc. [sort these html files locally]<br />
<br />
2] parse all html [inluding webimages links, tables font formatting etc] to [E]PS files with the perl app : html2ps [as mentioned beneath] <br />
<a href="http://user.it.uu.se/~jan/html2ps.html [sort all ps files by future pdf page positions]" rel="nofollow" target="_blank">http://user.it.uu.se/~jan/html2ps.html [sort all ps files by future pdf page positions]</a><br />
<br />
3] use the free ps2pdf/ps2pdfwr linux application <br />
<a href="http://www.ps2pdf.com/convert/index.htm [uses gostscript, ghostview libs and so on etc]" rel="nofollow" target="_blank">http://www.ps2pdf.com/convert/index.htm [uses gostscript, ghostview libs and so on etc]</a><br />
Has great formatting options like headers, footers, numbering etc<br />
[sort pdf files]<br />
<br />
4] convert all pdf files to 1 pdf file with : pdftk [pdftoolkit], deliveres optional compressions/encryption, background stamps etc<br />
<br />
One should ask why using different scripts :<br />
- combination perl/php is great : perl is speedier at some issues like conversion to ps files in my experience<br />
- ps to pdf is quickier then direct php to pdf [in my exp.!]<br />
- I have total control over every files whenever i change html files as a template I use only editors or other app. for it [online or offline].<br />
<br />
p.s. I had to make a opensource solution for creating simpel report analyses that's based on things like :<br />
- first page [name / title / #/ date]<br />
- some static info [like introduction, copyrights etc]<br />
- some dynamic info [outputted from php-&gt;dbase queries] combined<br />
with html tags/images etc.<br />
<br />
And this all mixed [so seperated in files for transparancy]. Also the 3 way manner : data-&gt; html, html-&gt;ps, ps-&gt;pdf, is easier and quickier to program or adjust in every step.<br />
<br />
Correct me if i'm wrong [mail me to]<br />
<br />
ing. Valentijn Langendorff<br />
Design &amp; Technologist</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57595""></a>
  <div class="note">
   <strong class="user">ragnar at deulos dot com</strong>
   <a href="#57595" class="date">08-Oct-2005 04:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
After one hole day understanding how pdflib works i got the conclusion that its enough hard to draw just with words to furthermore for drawing a line maybe you will need something like four lines of code, so i did my own functions to do the life easier and the code more understable to modify and draw. I also made a function that will draw a rect with the corners round and the posibility even to fill it ;)<br />
<br />
You can get it from <a href="http://www.deulos.com/pdf_php.php" rel="nofollow" target="_blank">http://www.deulos.com/pdf_php.php</a><br />
<br />
feel free to make suggestions or whatever u like ;o)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56492""></a>
  <div class="note">
   <strong class="user">thodge at ipswich dot qld dot gov dot au</strong>
   <a href="#56492" class="date">05-Sep-2005 07:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Yet another addition to the PDF text extraction code last posted by jorromer. The code only seemed to work for PDF 1.2 (Acrobat 3.x) or below. This pdfExtractText function uses regular expressions to cover cases I have found in PDF 1.3 and 1.4 documents. The code also handles closing brackets in the text stream, which were ignored by the previous version. My regular expression skills are somewhat lacking, so improvements may possible by a more skilled programmer. I'm sure there are still cases that this function will not handle, but I haven't come across any yet...
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
</span><span class="keyword">function </span><span class="default">pdf2string</span><span class="keyword">(</span><span class="default">$sourcefile</span><span class="keyword">) {
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$fp </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$sourcefile</span><span class="keyword">, </span><span class="string">'rb'</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$content </span><span class="keyword">= </span><span class="default">fread</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">filesize</span><span class="keyword">(</span><span class="default">$sourcefile</span><span class="keyword">));
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$searchstart </span><span class="keyword">= </span><span class="string">'stream'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$searchend </span><span class="keyword">= </span><span class="string">'endstream'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pdfText </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pos2 </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$startpos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">$pos </span><span class="keyword">!== </span><span class="default">false </span><span class="keyword">&amp;&amp; </span><span class="default">$pos2 </span><span class="keyword">!== </span><span class="default">false</span><span class="keyword">) {
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">, </span><span class="default">$searchstart</span><span class="keyword">, </span><span class="default">$startpos</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos2 </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">, </span><span class="default">$searchend</span><span class="keyword">, </span><span class="default">$startpos </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$pos </span><span class="keyword">!== </span><span class="default">false </span><span class="keyword">&amp;&amp; </span><span class="default">$pos2 </span><span class="keyword">!== </span><span class="default">false</span><span class="keyword">){
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$content</span><span class="keyword">[</span><span class="default">$pos</span><span class="keyword">] == </span><span class="default">0x0d </span><span class="keyword">&amp;&amp; </span><span class="default">$content</span><span class="keyword">[</span><span class="default">$pos </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">] == </span><span class="default">0x0a</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">+= </span><span class="default">2</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else if (</span><span class="default">$content</span><span class="keyword">[</span><span class="default">$pos</span><span class="keyword">] == </span><span class="default">0x0a</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos</span><span class="keyword">++;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$content</span><span class="keyword">[</span><span class="default">$pos2 </span><span class="keyword">- </span><span class="default">2</span><span class="keyword">] == </span><span class="default">0x0d </span><span class="keyword">&amp;&amp; </span><span class="default">$content</span><span class="keyword">[</span><span class="default">$pos2 </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">] == </span><span class="default">0x0a</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos2 </span><span class="keyword">-= </span><span class="default">2</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else if (</span><span class="default">$content</span><span class="keyword">[</span><span class="default">$pos2 </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">] == </span><span class="default">0x0a</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos2</span><span class="keyword">--;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$textsection </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$content</span><span class="keyword">, 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">+ </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$searchstart</span><span class="keyword">) + </span><span class="default">2</span><span class="keyword">, 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos2 </span><span class="keyword">- </span><span class="default">$pos </span><span class="keyword">- </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$searchstart</span><span class="keyword">) - </span><span class="default">1
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$data </span><span class="keyword">= @</span><span class="default">gzuncompress</span><span class="keyword">(</span><span class="default">$textsection</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pdfText </span><span class="keyword">.= </span><span class="default">pdfExtractText</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$startpos </span><span class="keyword">= </span><span class="default">$pos2 </span><span class="keyword">+ </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$searchend</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/(\s)+/'</span><span class="keyword">, </span><span class="string">' '</span><span class="keyword">, </span><span class="default">$pdfText</span><span class="keyword">);
<br />

<br />
}
<br />

<br />
function </span><span class="default">pdfExtractText</span><span class="keyword">(</span><span class="default">$psData</span><span class="keyword">){
<br />

<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$psData</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">''</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Handle brackets in the text stream that could be mistaken for
<br />
&nbsp;&nbsp;&nbsp; // the end of a text field. I'm sure you can do this as part of the 
<br />
&nbsp;&nbsp;&nbsp; // regular expression, but my skills aren't good enough yet.
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$psData </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'\)'</span><span class="keyword">, </span><span class="string">'##ENDBRACKET##'</span><span class="keyword">, </span><span class="default">$psData</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$psData </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'\]'</span><span class="keyword">, </span><span class="string">'##ENDSBRACKET##'</span><span class="keyword">, </span><span class="default">$psData</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'/(T[wdcm*])[\s]*(\[([^\]]*)\]|\(([^\)]*)\))[\s]*Tj/si'</span><span class="keyword">, 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$psData</span><span class="keyword">, 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$matches
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]); </span><span class="default">$i</span><span class="keyword">++) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">] != </span><span class="string">''</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Run another match over the contents.
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">'/\(([^)]*)\)/si'</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">], </span><span class="default">$subMatches</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$subMatches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] as </span><span class="default">$subMatch</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">.= </span><span class="default">$subMatch</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else if (</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">] != </span><span class="string">''</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">.= (</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">] == </span><span class="string">'Tc' </span><span class="keyword">? </span><span class="string">' ' </span><span class="keyword">: </span><span class="string">''</span><span class="keyword">) . </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Translate special characters and put back brackets.
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$trans </span><span class="keyword">= array(
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'...'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'...'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'\205'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'...'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'\221'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">145</span><span class="keyword">),
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'\222'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">146</span><span class="keyword">),
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'\223'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">147</span><span class="keyword">),
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'\224'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">148</span><span class="keyword">),
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'\226'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'-'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'\267'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'?'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'\('&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'('</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'\['&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'['</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'##ENDBRACKET##'&nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">')'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'##ENDSBRACKET##'&nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">']'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">133</span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; </span><span class="string">'-'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">141</span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">147</span><span class="keyword">),
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">142</span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">148</span><span class="keyword">),
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">143</span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">145</span><span class="keyword">),
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">144</span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">146</span><span class="keyword">),
<br />
&nbsp;&nbsp;&nbsp; );
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">, </span><span class="default">$trans</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$text</span><span class="keyword">;
<br />

<br />
}
<br />

<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53628""></a>
  <div class="note">
   <strong class="user">jorromer at uchile dot cl  -- Krash</strong>
   <a href="#53628" class="date">07-Jun-2005 07:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I recently use mattb code below for the extraction of text from PDF files. I modify this code for only extract text fields.<br />
<br />
Hope i can help some one<br />
<br />
Here is the Function<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp; $text </span><span class="keyword">= </span><span class="default">pdf2string</span><span class="keyword">(</span><span class="string">"file.pdf"</span><span class="keyword">);<br />
&nbsp; echo </span><span class="default">$text</span><span class="keyword">;<br />
<br />
&nbsp; function </span><span class="default">pdf2string</span><span class="keyword">(</span><span class="default">$sourcefile</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$fp </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$sourcefile</span><span class="keyword">, </span><span class="string">'rb'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$content </span><span class="keyword">= </span><span class="default">fread</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">filesize</span><span class="keyword">(</span><span class="default">$sourcefile</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$searchstart </span><span class="keyword">= </span><span class="string">'stream'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$searchend </span><span class="keyword">= </span><span class="string">'endstream'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pdfdocument </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pos2 </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$startpos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; while( </span><span class="default">$pos </span><span class="keyword">!== </span><span class="default">false </span><span class="keyword">&amp;&amp; </span><span class="default">$pos2 </span><span class="keyword">!== </span><span class="default">false </span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">, </span><span class="default">$searchstart</span><span class="keyword">, </span><span class="default">$startpos</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$pos2 </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">, </span><span class="default">$searchend</span><span class="keyword">, </span><span class="default">$startpos </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">$pos </span><span class="keyword">!== </span><span class="default">false </span><span class="keyword">&amp;&amp; </span><span class="default">$pos2 </span><span class="keyword">!== </span><span class="default">false</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$content</span><span class="keyword">[</span><span class="default">$pos</span><span class="keyword">]==</span><span class="default">0x0d </span><span class="keyword">&amp;&amp; </span><span class="default">$content</span><span class="keyword">[</span><span class="default">$pos</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">]==</span><span class="default">0x0a</span><span class="keyword">) </span><span class="default">$pos</span><span class="keyword">+=</span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else if (</span><span class="default">$content</span><span class="keyword">[</span><span class="default">$pos</span><span class="keyword">]==</span><span class="default">0x0a</span><span class="keyword">) </span><span class="default">$pos</span><span class="keyword">++;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$content</span><span class="keyword">[</span><span class="default">$pos2</span><span class="keyword">-</span><span class="default">2</span><span class="keyword">]==</span><span class="default">0x0d </span><span class="keyword">&amp;&amp; </span><span class="default">$content</span><span class="keyword">[</span><span class="default">$pos2</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">]==</span><span class="default">0x0a</span><span class="keyword">) </span><span class="default">$pos2</span><span class="keyword">-=</span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else if (</span><span class="default">$content</span><span class="keyword">[</span><span class="default">$pos2</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">]==</span><span class="default">0x0a</span><span class="keyword">) </span><span class="default">$pos2</span><span class="keyword">--;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$textsection </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">, </span><span class="default">$pos </span><span class="keyword">+ </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$searchstart</span><span class="keyword">) + </span><span class="default">2</span><span class="keyword">, </span><span class="default">$pos2 </span><span class="keyword">- </span><span class="default">$pos </span><span class="keyword">- </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$searchstart</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$data </span><span class="keyword">= @</span><span class="default">gzuncompress</span><span class="keyword">(</span><span class="default">$textsection</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$data </span><span class="keyword">= </span><span class="default">ExtractText2</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$startpos </span><span class="keyword">= </span><span class="default">$pos2 </span><span class="keyword">+ </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$searchend</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$data </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">){ <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return -</span><span class="default">1</span><span class="keyword">;}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pdfdocument </span><span class="keyword">.= </span><span class="default">$data</span><span class="keyword">;}}<br />
&nbsp;&nbsp; return </span><span class="default">$pdfdocument</span><span class="keyword">;}<br />
<br />
function </span><span class="default">ExtractText2</span><span class="keyword">(</span><span class="default">$postScriptData</span><span class="keyword">){<br />
&nbsp; </span><span class="default">$sw </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$textStart </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$postScriptData</span><span class="keyword">);<br />
<br />
&nbsp; while (</span><span class="default">$sw</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ini </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$postScriptData</span><span class="keyword">, </span><span class="string">'('</span><span class="keyword">, </span><span class="default">$textStart</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$postScriptData</span><span class="keyword">, </span><span class="string">')'</span><span class="keyword">, </span><span class="default">$textStart</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if ((</span><span class="default">$ini</span><span class="keyword">&gt;</span><span class="default">0</span><span class="keyword">) &amp;&amp; (</span><span class="default">$end</span><span class="keyword">&gt;</span><span class="default">$ini</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$valtext </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$postScriptData</span><span class="keyword">,</span><span class="string">'Tj'</span><span class="keyword">,</span><span class="default">$end</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">$valtext </span><span class="keyword">== </span><span class="default">$end </span><span class="keyword">+ </span><span class="default">2</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">.= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$postScriptData</span><span class="keyword">,</span><span class="default">$ini</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">,</span><span class="default">$end </span><span class="keyword">- </span><span class="default">$ini </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">);}<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$textStart </span><span class="keyword">= </span><span class="default">$end </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$len</span><span class="keyword">&lt;=</span><span class="default">$textStart</span><span class="keyword">) </span><span class="default">$sw</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if ((</span><span class="default">$ini </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) &amp;&amp; (</span><span class="default">$end </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">)) </span><span class="default">$sw</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">;}<br />
&nbsp; <br />
&nbsp; </span><span class="default">$trans </span><span class="keyword">= array(</span><span class="string">"\\341" </span><span class="keyword">=&gt; </span><span class="string">"a"</span><span class="keyword">,</span><span class="string">"\\351" </span><span class="keyword">=&gt; </span><span class="string">"e"</span><span class="keyword">,</span><span class="string">"\\355" </span><span class="keyword">=&gt; </span><span class="string">"i"</span><span class="keyword">,</span><span class="string">"\\363" </span><span class="keyword">=&gt; </span><span class="string">"o"</span><span class="keyword">,</span><span class="string">"\\223" </span><span class="keyword">=&gt; </span><span class="string">""</span><span class="keyword">,</span><span class="string">"\\224" </span><span class="keyword">=&gt; </span><span class="string">""</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$text&nbsp; </span><span class="keyword">= </span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">, </span><span class="default">$trans</span><span class="keyword">);<br />
&nbsp; return </span><span class="default">$text</span><span class="keyword">;<br />
} <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51623""></a>
  <div class="note">
   <strong class="user">webadmin at secretscreen dot com</strong>
   <a href="#51623" class="date">05-Apr-2005 11:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I found this info about pdflib scope on a Chinese (I think) site and translated it.&nbsp; I was trying to do pdf_setfont and kept getting the wrong scope error.&nbsp; Turns out it has to be in the Page scope.&nbsp; So pdf_setfont will only work when called between pdf_begin_page and pdf_end_page.<br />
<br />
#########################################<br />
When API of the PDFlib is called, the error, Can't - IN 'document' scope occurs <br />
There is a concept of " the scope " in the PDFlib, as for all API of the PDFlib it is called with some scope, the *1 which is decided This error occurs when it is called other than the scope where API is appointed. The chart below in reference, please verify API call position.<br />
<br />
Path: PDF_moveto (), PDF_circle (), PDF_arc (), PDF_arcn (), PDF_rect () in each case PDF_stroke (), PDF_closepath_stroke (), PDF_fill (), PDF_fill_stroke (), PDF_closepath_fill_stroke (), PDF_clip (), PDF_endpath () the between <br />
<br />
Page: PDF_begin_page () with PDF_end_page () in between outside path&nbsp; <br />
<br />
Template: PDF_begin_template () with PDF_end_template () in between outside path&nbsp; <br />
<br />
Pattern: PDF_begin_pattern () with PDF_end_pattern () in between outside path&nbsp; <br />
<br />
Font: PDF_begin_font () with PDF_end_font () in between outside glyph&nbsp; <br />
<br />
Glyph: PDF_begin_glyph () with PDF_end_glyph () in between outside path&nbsp; <br />
<br />
Document: PDF_open_* () with PDF_close () in between outside page tempalte and pattern&nbsp; <br />
<br />
Object: The PDF_new () with the PDF_delete () it belongs to the other no scope in between the place <br />
<br />
Null: Outside object&nbsp; <br />
<br />
Any: All scopes other than&nbsp; <br />
<br />
##########################################<br />
<br />
Hope this helps others as much as it helped me!!!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50678""></a>
  <div class="note">
   <strong class="user">chu61 dot tw at gmail dot com</strong>
   <a href="#50678" class="date">07-Mar-2005 04:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
How to get how many pages in a PDF? I read PDF spec. V1.6 and find this:<br />
<br />
PDF set&nbsp; a "Page Tree Node" to define the ordering of pages in the document. The tree structure allows PDF applications, using little memory to quickly open a document containing thousands of pages.<br />
<br />
If a PDF have 63 pages, the page tree node will like this...<br />
<br />
2 0 obj<br />
&lt;&lt; /Type /Pages<br />
&nbsp;&nbsp;&nbsp; /Kidsn [ 4 0 R<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 10 0 R<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ]<br />
&nbsp;&nbsp; &nbsp; /Count 63&nbsp; &nbsp; &nbsp; &nbsp; &lt;---- YES, got it<br />
&gt;&gt;<br />
endobj<br />
<br />
[P.S]&nbsp;&nbsp; a&nbsp; PDF may not only a pages tree node, The right answer is in "root page tree node", if&nbsp; /Count XX with&nbsp; /Parent XXX node, it not "root page tree node"<br />
<br />
SO, You must find the node with /Count XX and Without /Parent&nbsp; terms, and you'll get total pages of PDF<br />
<br />
%PDF-1.0&nbsp; ~&nbsp; %PDF-1.5 all works<br />
<br />
Alex form Taipei,Taiwan</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="43726""></a>
  <div class="note">
   <strong class="user">michi (Alt+Q) marel.at</strong>
   <a href="#43726" class="date">01-Jul-2004 04:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?PHP<br />
</span><span class="comment">/* A little helpful function to calculate millimeters to points */<br />
</span><span class="keyword">function </span><span class="default">calcToPt</span><span class="keyword">(</span><span class="default">$intMillimeter</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$intPoints </span><span class="keyword">= (</span><span class="default">$intMillimeter</span><span class="keyword">*</span><span class="default">72</span><span class="keyword">)/</span><span class="default">25.4</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$intPoints </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">(</span><span class="default">$intPoints</span><span class="keyword">);<br />
&nbsp; return </span><span class="default">$intPoints</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">/* For example: Create DIN A4 210x297 mm */<br />
</span><span class="default">pdf_begin_page</span><span class="keyword">( </span><span class="default">$pdf</span><span class="keyword">, </span><span class="default">calcToPt</span><span class="keyword">(</span><span class="default">210</span><span class="keyword">), </span><span class="default">calcToPt</span><span class="keyword">(</span><span class="default">297</span><span class="keyword">)); </span><span class="comment">// 595x842 pt<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="43476""></a>
  <div class="note">
   <strong class="user">donatas at spurgius dot com</strong>
   <a href="#43476" class="date">22-Jun-2004 09:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've been looking for a way to extract plain text from PDF documents (needed to search for text inside 'em). Not being able to find one I wrote the needed functions myself. here you go folks.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="keyword">function </span><span class="default">pdf2string </span><span class="keyword">(</span><span class="default">$sourceFile</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$textArray </span><span class="keyword">= array ();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$objStart </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$fp </span><span class="keyword">= </span><span class="default">fopen </span><span class="keyword">(</span><span class="default">$sourceFile</span><span class="keyword">, </span><span class="string">'rb'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$content </span><span class="keyword">= </span><span class="default">fread </span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">filesize </span><span class="keyword">(</span><span class="default">$sourceFile</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">fclose </span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$searchTagStart </span><span class="keyword">= </span><span class="default">chr</span><span class="keyword">(</span><span class="default">13</span><span class="keyword">).</span><span class="default">chr</span><span class="keyword">(</span><span class="default">10</span><span class="keyword">).</span><span class="string">'stream'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$searchTagStartLenght </span><span class="keyword">= </span><span class="default">strlen </span><span class="keyword">(</span><span class="default">$searchTagStart</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; while (((</span><span class="default">$objStart </span><span class="keyword">= </span><span class="default">strpos </span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">, </span><span class="default">$searchTagStart</span><span class="keyword">, </span><span class="default">$objStart</span><span class="keyword">)) &amp;&amp; (</span><span class="default">$objEnd </span><span class="keyword">= </span><span class="default">strpos </span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">, </span><span class="string">'endstream'</span><span class="keyword">, </span><span class="default">$objStart</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">))))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$data </span><span class="keyword">= </span><span class="default">substr </span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">, </span><span class="default">$objStart </span><span class="keyword">+ </span><span class="default">$searchTagStartLenght </span><span class="keyword">+ </span><span class="default">2</span><span class="keyword">, </span><span class="default">$objEnd </span><span class="keyword">- (</span><span class="default">$objStart </span><span class="keyword">+ </span><span class="default">$searchTagStartLenght</span><span class="keyword">) - </span><span class="default">2</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$data </span><span class="keyword">= @</span><span class="default">gzuncompress </span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">$data </span><span class="keyword">!== </span><span class="default">FALSE </span><span class="keyword">&amp;&amp; </span><span class="default">strpos </span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="string">'BT'</span><span class="keyword">) !== </span><span class="default">FALSE </span><span class="keyword">&amp;&amp; </span><span class="default">strpos </span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="string">'ET'</span><span class="keyword">) !== </span><span class="default">FALSE</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$textArray </span><span class="keyword">[] = </span><span class="default">ExtractText </span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$objStart </span><span class="keyword">= </span><span class="default">$objStart </span><span class="keyword">&lt; </span><span class="default">$objEnd </span><span class="keyword">? </span><span class="default">$objEnd </span><span class="keyword">: </span><span class="default">$objStart </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$textArray</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; <br />
&nbsp; function </span><span class="default">ExtractText </span><span class="keyword">(</span><span class="default">$postScriptData</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; while (((</span><span class="default">$textStart </span><span class="keyword">= </span><span class="default">strpos </span><span class="keyword">(</span><span class="default">$postScriptData</span><span class="keyword">, </span><span class="string">'('</span><span class="keyword">, </span><span class="default">$textStart</span><span class="keyword">)) &amp;&amp; (</span><span class="default">$textEnd </span><span class="keyword">= </span><span class="default">strpos </span><span class="keyword">(</span><span class="default">$postScriptData</span><span class="keyword">, </span><span class="string">')'</span><span class="keyword">, </span><span class="default">$textStart </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">)) &amp;&amp; </span><span class="default">substr </span><span class="keyword">(</span><span class="default">$postScriptData</span><span class="keyword">, </span><span class="default">$textEnd </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">) != </span><span class="string">'\\'</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$plainText </span><span class="keyword">.= </span><span class="default">substr </span><span class="keyword">(</span><span class="default">$postScriptData</span><span class="keyword">, </span><span class="default">$textStart </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">, </span><span class="default">$textEnd </span><span class="keyword">- </span><span class="default">$textStart </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">substr </span><span class="keyword">(</span><span class="default">$postScriptData</span><span class="keyword">, </span><span class="default">$textEnd </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">) == </span><span class="string">']'</span><span class="keyword">) </span><span class="comment">//this adds quite some additional spaces between the words<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$plainText </span><span class="keyword">.= </span><span class="string">' '</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$textStart </span><span class="keyword">= </span><span class="default">$textStart </span><span class="keyword">&lt; </span><span class="default">$textEnd </span><span class="keyword">? </span><span class="default">$textEnd </span><span class="keyword">: </span><span class="default">$textStart </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">stripslashes </span><span class="keyword">(</span><span class="default">$plainText</span><span class="keyword">);<br />
&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42356""></a>
  <div class="note">
   <strong class="user">uwe at steinmann dot cx</strong>
   <a href="#42356" class="date">13-May-2004 03:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Those looking for a free replacement of pdflib may consider<br />
pslib at <a href="http://pslib.sourceforge.net which produces PostScript but it can be easily turned into PDF by Acrobat Distiller or ghostscript. The API is very similar and even hypertext functions are supported. There" rel="nofollow" target="_blank">http://pslib.sourceforge.net which produces PostScript but it can be easily turned into PDF by Acrobat Distiller or ghostscript. The API is very similar and even hypertext functions are supported. There</a><br />
is also a php extension for pslib in PECL, called ps.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="33393""></a>
  <div class="note">
   <strong class="user">bmironov at jonview dot com</strong>
   <a href="#33393" class="date">25-Jun-2003 12:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
RedHat 9 + Apache 2.0 + PHP 4.3.2 + Oracle 9i + PDFlib 5.0.1 (binary distribution)<br />
<br />
It seems to be a working bundle if you do some magic with ./configure:<br />
<br />
RedHat 9:<br />
kernel-2.4.20-18.9<br />
<br />
Apache 2.0.46:<br />
./configure --enable-so --enable-rewrite=shared --enable-status --enable-mpm=prefork<br />
<br />
PHP 4.3.2:<br />
./configure \<br />
--program-prefix= \<br />
--prefix=/usr \<br />
--exec-prefix=/usr \<br />
--bindir=/usr/bin \<br />
--sbindir=/usr/sbin \<br />
--sysconfdir=/etc \<br />
--datadir=/usr/share \<br />
--includedir=/usr/include \<br />
--libdir=/usr/lib \<br />
--libexecdir=/usr/libexec \<br />
--localstatedir=/var \<br />
--sharedstatedir=/usr/com \<br />
--mandir=/usr/share/man \<br />
--infodir=/usr/share/info \<br />
--with-config-file-path=/etc \<br />
--with-config-file-scan-dir=/etc/php.d \<br />
--without-tsrm-pthreads \&nbsp; &nbsp; # !!!!!!!!!!!!!!!!!!!!<br />
--with-zlib \<br />
--with-gd \<br />
--enable-gd-native-ttf \<br />
--with-ttf \<br />
--without-mysql \<br />
--with-apxs2filter=/usr/local/apache2/bin/apxs \<br />
--with-oci8 \<br />
--enable-sigchild \<br />
--enable-inline-optimization<br />
<br />
Oracle9i:<br />
ln -s $ORACLE_HOME/rdbms/public/nzerror.h $ORACLE_HOME/rdbms/demo/nzerror.h<br />
<br />
ln -s $ORACLE_HOME/rdbms/public/nzt.h $ORACLE_HOME/rdbms/demo/nzt.h<br />
<br />
ln -s $ORACLE_HOME/rdbms/public/ociextp.h $ORACLE_HOME/rdbms/demo/ociextp.h<br />
<br />
If you want to use bundled GD-library then:<br />
1) install following packages: libjpeg, libjpeg-devel, libpng, libpng-devel, freetype, freetype-devel, libtiff, libtiff-devel, zlib, zlib-devel<br />
<br />
2) ln -s /usr/lib/libjpeg.so.62 /usr/lib/libjpeg.so<br />
ln -s /usr/lib/libpng.so.62 /usr/lib/libpng.so<br />
<br />
It seems to be a working combination, because it is NOT give you:<br />
1) error message in Apache's error_log:<br />
Module compiled with module API=20020429, debug=0, thread-safety=0<br />
PHP compiled with module API=20020429, debug=0, thread-safety=1<br />
<br />
2) error message in Apache's error_log:<br />
[notice] child pid 12345 exit signal Segmentation fault (11)<br />
<br />
3) MS Internet Explorer can show PDF-output from your PHP-script via Acrobat plug-in and does not crush. No confusing messages about opening "Adobe Acrobat Control for ActiveX".<br />
<br />
Hope it will save you some time.<br />
<br />
Good luck,<br />
Boris</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="20245""></a>
  <div class="note">
   <strong class="user">pbierans at lynet dot de</strong>
   <a href="#20245" class="date">27-Mar-2002 06:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Load extension, open a PDF, add a font, modify PDF in memory and send<br />
it to browser:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="comment">// no cache headers:<br />
&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">"Expires: Mon, 26 Jul 1997 05:00:00 GMT"</span><span class="keyword">);<br />
&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">"Last-Modified: "</span><span class="keyword">.</span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">"D, d M Y H:i:s"</span><span class="keyword">).</span><span class="string">" GMT"</span><span class="keyword">);<br />
&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">"Cache-Control: no-store, no-cache, must-revalidate"</span><span class="keyword">);<br />
&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">"Cache-Control: post-check=0, pre-check=0"</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">);<br />
&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">"Pragma: no-cache"</span><span class="keyword">);<br />
<br />
&nbsp; </span><span class="default">$ext_name</span><span class="keyword">=</span><span class="string">"libpdf_php.so"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// libpdf_php.so is the PDFLIB for SunOS by "PDFlib GmbH"<br />
&nbsp;&nbsp;&nbsp; // visit <a href="http://www.pdflib.com" rel="nofollow" target="_blank">http://www.pdflib.com</a><br />
<br />
&nbsp; // if the extension is not automatically loaded by Apache<br />
&nbsp; // dl() will try to load it on demand:<br />
&nbsp; </span><span class="keyword">if (!</span><span class="default">extension_loaded</span><span class="keyword">(</span><span class="default">$ext_name</span><span class="keyword">) &amp;&amp; !@</span><span class="default">dl</span><span class="keyword">(</span><span class="default">$ext_name</span><span class="keyword">))<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">?&gt;<br />
</span>&nbsp; &nbsp; &lt;table width="100%" border="0"&gt;&lt;tr&gt;&lt;td align="center"&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;table style="border: solid #f0f0f0 2px;"&gt;&lt;tr&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;td valign="middle" style="padding: 20px; margin: 0px;"&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;p style="font-family: arial; font-size: 12px; "&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;b&gt;Sorry,&lt;/b&gt;&lt;br&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &amp;nbsp;&lt;br&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; A PDF can not be generated right now.&lt;br&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; The administrator has been informed and will fix this as<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; soon as possible.&lt;br&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Please try again later.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;/p&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;<br />
&nbsp;&nbsp;&nbsp; <span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; mail</span><span class="keyword">(</span><span class="string">'admin@domain.com'</span><span class="keyword">,</span><span class="string">'Error: PDFLib not found'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'Called by script:\n&nbsp; '</span><span class="keyword">.</span><span class="default">$SCRIPT_FILENAME</span><span class="keyword">.</span><span class="string">'?'</span><span class="keyword">.</span><span class="default">$QUERY_STRING</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"From: warnings@domain.com\n"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; exit;<br />
&nbsp; } </span><span class="comment">// verify that extension is usable<br />
<br />
&nbsp; // unique serial number:<br />
&nbsp; </span><span class="default">srand</span><span class="keyword">(</span><span class="default">microtime</span><span class="keyword">()*</span><span class="default">10000</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$usnr</span><span class="keyword">= </span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">"Ymd-His-"</span><span class="keyword">).</span><span class="default">rand</span><span class="keyword">(</span><span class="default">1000</span><span class="keyword">,</span><span class="default">9999</span><span class="keyword">).</span><span class="string">'-'</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$pdf_file</span><span class="keyword">=</span><span class="default">$usnr</span><span class="keyword">.</span><span class="string">'result.pdf'</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$src_file</span><span class="keyword">=</span><span class="string">'source.pdf'</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="comment">// create pdf object<br />
&nbsp; </span><span class="default">$pdf </span><span class="keyword">= </span><span class="default">pdf_new</span><span class="keyword">();<br />
&nbsp; </span><span class="default">pdf_open_file</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">);<br />
&nbsp; </span><span class="default">pdf_set_parameter</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">, </span><span class="string">'serial'</span><span class="keyword">,&nbsp; &nbsp; &nbsp; </span><span class="string">'if-you-have-one'</span><span class="keyword">);<br />
<br />
&nbsp; </span><span class="comment">// fonts to embed, they are in the folder of this file:<br />
&nbsp; </span><span class="default">pdf_set_parameter</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">, </span><span class="string">'FontAFM'</span><span class="keyword">,&nbsp; &nbsp;&nbsp; </span><span class="string">'TradeGothic=Tg______.afm'</span><span class="keyword">);<br />
&nbsp; </span><span class="default">pdf_set_parameter</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">, </span><span class="string">'FontOutline'</span><span class="keyword">, </span><span class="string">'TradeGothic=Tg______.pfb'</span><span class="keyword">);<br />
&nbsp; </span><span class="default">pdf_set_parameter</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">, </span><span class="string">'FontPFM'</span><span class="keyword">,&nbsp; &nbsp;&nbsp; </span><span class="string">'TradeGothic=Tg______.pfm'</span><span class="keyword">);<br />
<br />
&nbsp; </span><span class="comment">// load the source file:<br />
&nbsp; </span><span class="default">$src_doc&nbsp;&nbsp; </span><span class="keyword">=</span><span class="default">pdf_open_pdi</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">,</span><span class="default">$src_file</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$src_page&nbsp; </span><span class="keyword">=</span><span class="default">pdf_open_pdi_page</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">,</span><span class="default">$src_doc</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$src_width </span><span class="keyword">=</span><span class="default">pdf_get_pdi_value</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">,</span><span class="string">'width' </span><span class="keyword">,</span><span class="default">$src_doc</span><span class="keyword">,</span><span class="default">$src_page</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$src_height</span><span class="keyword">=</span><span class="default">pdf_get_pdi_value</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">,</span><span class="string">'height'</span><span class="keyword">,</span><span class="default">$src_doc</span><span class="keyword">,</span><span class="default">$src_page</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">);<br />
<br />
&nbsp; </span><span class="default">pdf_begin_page</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">, </span><span class="default">$src_width</span><span class="keyword">, </span><span class="default">$src_height</span><span class="keyword">);<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// place the sourcefile to the background of the actual page:<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">pdf_place_pdi_page</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">,</span><span class="default">$src_page</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">pdf_close_pdi_page</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">,</span><span class="default">$src_page</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// modify the page:<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">pdf_set_font</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">, </span><span class="string">'TradeGothic'</span><span class="keyword">, </span><span class="default">8</span><span class="keyword">, </span><span class="string">'host'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">pdf_show_xy</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">, </span><span class="string">'Now: '</span><span class="keyword">.</span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">"Y-m-d H:i:s"</span><span class="keyword">),</span><span class="default">50</span><span class="keyword">,</span><span class="default">50</span><span class="keyword">);<br />
&nbsp; }<br />
&nbsp; </span><span class="default">pdf_end_page</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">);<br />
&nbsp; </span><span class="default">pdf_close</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">);<br />
<br />
&nbsp; </span><span class="comment">// prepare output:<br />
&nbsp; </span><span class="default">$pdfdata </span><span class="keyword">= </span><span class="default">pdf_get_buffer</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">); </span><span class="comment">// to echo the pdf-data<br />
&nbsp; </span><span class="default">$pdfsize </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$pdfdata</span><span class="keyword">);&nbsp; &nbsp;&nbsp; </span><span class="comment">// IE requires the datasize<br />
<br />
&nbsp; // real datatype headers:<br />
&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Content-type: application/pdf'</span><span class="keyword">);<br />
&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Content-disposition: attachment; filename="'</span><span class="keyword">.</span><span class="default">$pdf_file</span><span class="keyword">.</span><span class="string">'"'</span><span class="keyword">);<br />
&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Content-length: '</span><span class="keyword">.</span><span class="default">$pdfsize</span><span class="keyword">);<br />
&nbsp; echo </span><span class="default">$pdfdata</span><span class="keyword">;<br />
&nbsp; exit; </span><span class="comment">// keep this one so no #13#10 or #32 will be written<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>查找指定字符在字符串中的最后一次出现</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.strpos.html">? strpos</a></li>
      <li style="float: right;"><a href="function.strrev.html">strrev ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.strings.html">字符串 函数</a></li>
    <li>查找指定字符在字符串中的最后一次出现</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.strrchr" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">strrchr</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7)</p><p class="refpurpose"><span class="refname">strrchr</span> &mdash; <span class="dc-title">查找指定字符在字符串中的最后一次出现</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.strrchr-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><strong>strrchr</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$haystack</code></span>
   , <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$needle</code></span>
   )</div>

  <p class="para rdfs-comment">
   该函数返回 <code class="parameter">haystack</code> 字符串中的一部分，这部分以 <code class="parameter">needle</code> 的最后出现位置开始，直到 <code class="parameter">haystack</code> 末尾。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.strrchr-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">haystack</code></dt>

     <dd>

      <p class="para">
       在该字符串中查找。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">needle</code></dt>

     <dd>

      <p class="para">
       如果 <code class="parameter">needle</code> 包含了不止一个字符，那么仅使用第一个字符。该行为不同于 <span class="function"><a href="function.strstr.html" class="function">strstr()</a></span>。
      </p>
      <p class="para">
       如果 <code class="parameter">needle</code> 不是一个字符串，那么将被转化为整型并被视为字符顺序值。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.strrchr-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   该函数返回字符串的一部分。如果 <code class="parameter">needle</code> 未被找到，返回 <strong><code>FALSE</code></strong>。
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.strrchr-changelog">
  <h3 class="title">更新日志</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>版本</th>
       <th>说明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>4.3.0</td>
       <td>
        该函数是二进制安全的。
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.strrchr-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-5308">
    <p><strong>Example #1 <span class="function"><strong>strrchr()</strong></span> 范例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;获取&nbsp;$PATH&nbsp;中不含磁盘符号的目录<br /></span><span style="color: #0000BB">$dir&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">strrchr</span><span style="color: #007700">(</span><span style="color: #0000BB">$PATH</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">":"</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;获取最后一行内容<br /></span><span style="color: #0000BB">$text&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"Line&nbsp;1\nLine&nbsp;2\nLine&nbsp;3"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$last&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">strrchr</span><span style="color: #007700">(</span><span style="color: #0000BB">$text</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">10</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>   
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.strrchr-notes">
  <h3 class="title">注释</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">此函数可安全用于二进制对象。</span></p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.strrchr-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.strstr.html" class="function" rel="rdfs-seeAlso">strstr()</a> - 查找字符串的首次出现</span></li>
    <li class="member"><span class="function"><a href="function.strrpos.html" class="function" rel="rdfs-seeAlso">strrpos()</a> - 计算指定字符串在目标字符串中最后一次出现的位置</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="109740""></a>
  <div class="note">
   <strong class="user">jphansen at uga dot edu</strong>
   <a href="#109740" class="date">16-Aug-2012 01:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To extract your portion of a string without the actual character you searched for, you can use:<br />
<br />
<span class="default">&lt;?php<br />
$path </span><span class="keyword">= </span><span class="string">'/www/public_html/index.html'</span><span class="keyword">;<br />
</span><span class="default">$filename </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">strrchr</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, </span><span class="string">"/"</span><span class="keyword">), </span><span class="default">1</span><span class="keyword">);<br />
echo </span><span class="default">$filename</span><span class="keyword">; </span><span class="comment">// "index.html"<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103191""></a>
  <div class="note">
   <strong class="user">matthewkastor at live dot com</strong>
   <a href="#103191" class="date">30-Mar-2011 10:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php
<br />
</span><span class="comment">/**
<br />
&nbsp;* Removes the preceeding or proceeding portion of a string
<br />
&nbsp;* relative to the last occurrence of the specified character.
<br />
&nbsp;* The character selected may be retained or discarded.
<br />
&nbsp;* 
<br />
&nbsp;* Example usage:
<br />
&nbsp;* &lt;code&gt;
<br />
&nbsp;* $example = '<a href="http://example.com/path/file.php" rel="nofollow" target="_blank">http://example.com/path/file.php</a>';
<br />
&nbsp;* $cwd_relative[] = cut_string_using_last('/', $example, 'left', true);
<br />
&nbsp;* $cwd_relative[] = cut_string_using_last('/', $example, 'left', false);
<br />
&nbsp;* $cwd_relative[] = cut_string_using_last('/', $example, 'right', true);
<br />
&nbsp;* $cwd_relative[] = cut_string_using_last('/', $example, 'right', false);
<br />
&nbsp;* foreach($cwd_relative as $string) {
<br />
&nbsp;*&nbsp; &nbsp;&nbsp; echo "$string &lt;br&gt;".PHP_EOL;
<br />
&nbsp;* }
<br />
&nbsp;* &lt;/code&gt;
<br />
&nbsp;* 
<br />
&nbsp;* Outputs:
<br />
&nbsp;* &lt;code&gt;
<br />
&nbsp;* <a href="http://example.com/path/" rel="nofollow" target="_blank">http://example.com/path/</a>
<br />
&nbsp;* <a href="http://example.com/path" rel="nofollow" target="_blank">http://example.com/path</a>
<br />
&nbsp;* /file.php
<br />
&nbsp;* file.php
<br />
&nbsp;* &lt;/code&gt;
<br />
&nbsp;* 
<br />
&nbsp;* @param string $character the character to search for.
<br />
&nbsp;* @param string $string the string to search through.
<br />
&nbsp;* @param string $side determines whether text to the left or the right of the character is returned.
<br />
&nbsp;* Options are: left, or right.
<br />
&nbsp;* @param bool $keep_character determines whether or not to keep the character.
<br />
&nbsp;* Options are: true, or false.
<br />
&nbsp;* @return string
<br />
&nbsp;*/
<br />
</span><span class="keyword">function </span><span class="default">cut_string_using_last</span><span class="keyword">(</span><span class="default">$character</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">, </span><span class="default">$side</span><span class="keyword">, </span><span class="default">$keep_character</span><span class="keyword">=</span><span class="default">true</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$offset </span><span class="keyword">= (</span><span class="default">$keep_character </span><span class="keyword">? </span><span class="default">1 </span><span class="keyword">: </span><span class="default">0</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$whole_length </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$right_length </span><span class="keyword">= (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">strrchr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$character</span><span class="keyword">)) - </span><span class="default">1</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$left_length </span><span class="keyword">= (</span><span class="default">$whole_length </span><span class="keyword">- </span><span class="default">$right_length </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; switch(</span><span class="default">$side</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="string">'left'</span><span class="keyword">:
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$piece </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, (</span><span class="default">$left_length </span><span class="keyword">+ </span><span class="default">$offset</span><span class="keyword">));
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="string">'right'</span><span class="keyword">:
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$start </span><span class="keyword">= (</span><span class="default">0 </span><span class="keyword">- (</span><span class="default">$right_length </span><span class="keyword">+ </span><span class="default">$offset</span><span class="keyword">));
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$piece </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; default:
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$piece </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return(</span><span class="default">$piece</span><span class="keyword">);
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="67296""></a>
  <div class="note">
   <strong class="user">readless at gmx dot net</strong>
   <a href="#67296" class="date">07-Jun-2006 04:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
to: repley at freemail dot it<br />
<br />
the code works very well, but as i was trying to cut script names (e.g.: $_SERVER["SCRIPT_NAME"] =&gt; /index.php, cut the string at "/" and return "index.php") it returned nothing (false). i've modified your code and now it works also if the needle is the first char.<br />
- regards from germany<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//strxchr(string haystack, string needle [, bool int leftinclusive [, bool int rightinclusive ]])<br />
</span><span class="keyword">function </span><span class="default">strxchr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$l_inclusive </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$r_inclusive </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp; if(</span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="comment">//Everything before last $needle in $haystack.<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$left </span><span class="keyword">=&nbsp; </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">) + </span><span class="default">$l_inclusive</span><span class="keyword">);<br />
&nbsp;<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="comment">//Switch value of $r_inclusive from 0 to 1 and viceversa.<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$r_inclusive </span><span class="keyword">= (</span><span class="default">$r_inclusive </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) ? </span><span class="default">1 </span><span class="keyword">: </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="comment">//Everything after last $needle in $haystack.<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$right </span><span class="keyword">=&nbsp; </span><span class="default">substr</span><span class="keyword">(</span><span class="default">strrchr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">), </span><span class="default">$r_inclusive</span><span class="keyword">);<br />
&nbsp;<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="comment">//Return $left and $right into an array.<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="keyword">return array(</span><span class="default">$left</span><span class="keyword">, </span><span class="default">$right</span><span class="keyword">);<br />
&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; if(</span><span class="default">strrchr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">)) return array(</span><span class="string">''</span><span class="keyword">, </span><span class="default">substr</span><span class="keyword">(</span><span class="default">strrchr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">), </span><span class="default">$r_inclusive</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; else return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="64157""></a>
  <div class="note">
   <strong class="user">sekati at gmail dot com</strong>
   <a href="#64157" class="date">09-Apr-2006 02:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
just a small addition to carlos dot lage at gmail dot com note which makes it a bit more useful and flexible:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// return everything up to last instance of needle<br />
// use $trail to include needle chars including and past last needle <br />
</span><span class="keyword">function </span><span class="default">reverse_strrchr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$trail</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">) ? </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">) + </span><span class="default">$trail</span><span class="keyword">) : </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="comment">// usage:<br />
</span><span class="default">$ns </span><span class="keyword">= (</span><span class="default">reverse_strrchr</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">"SCRIPT_URI"</span><span class="keyword">], </span><span class="string">"/"</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">));<br />
</span><span class="default">$ns2 </span><span class="keyword">= (</span><span class="default">reverse_strrchr</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">"SCRIPT_URI"</span><span class="keyword">], </span><span class="string">"/"</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">));<br />
echo(</span><span class="default">$ns </span><span class="keyword">. </span><span class="string">"&lt;br&gt;" </span><span class="keyword">. </span><span class="default">$ns2</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60075""></a>
  <div class="note">
   <strong class="user">freakinunreal at hotmail dot com</strong>
   <a href="#60075" class="date">25-Dec-2005 07:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
to marcokonopacki at hotmail dot com.<br />
<br />
I had to make a slight change in your function for it to return the complete needle inclusive.<br />
<br />
// Reverse search of strrchr.<br />
function strrrchr($haystack,$needle)<br />
{<br />
<br />
&nbsp;&nbsp; // Returns everything before $needle (inclusive).<br />
&nbsp;&nbsp; //return substr($haystack,0,strpos($haystack,$needle)+1);<br />
&nbsp;&nbsp; // becomes<br />
&nbsp;&nbsp; return substr($haystack,0,strpos($haystack,$needle)+strlen($needle));<br />
}<br />
<br />
Note: the +1 becomes +strlen($needle)<br />
<br />
Otherwise it only returns the first character in needle backwards.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55306""></a>
  <div class="note">
   <strong class="user"></strong>
   <a href="#55306" class="date">29-Jul-2005 07:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
$filename = 'strrchr_test.php';<br />
print strrchr( $filename, '.' );<br />
<br />
Result:<br />
.php<br />
<br />
$other_filename = 'strrchr_test.asp.php';<br />
print&nbsp; strrchr( $other_filename, '.' );<br />
<br />
Result:<br />
.php</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51551""></a>
  <div class="note">
   <strong class="user">carlos dot lage at gmail dot com</strong>
   <a href="#51551" class="date">03-Apr-2005 08:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I used dchris1 at bigpond dot net dot au 's reverse strrchr and reduced it to one line of code and fixed it's functionality - the real strrchr() returns FALSE if the needle is not found, not the haystack :)<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// reverse strrchr()<br />
</span><span class="keyword">function </span><span class="default">reverse_strrchr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">) ? </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">) +</span><span class="default">1 </span><span class="keyword">) : </span><span class="default">false</span><span class="keyword">;<br />
} <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="39957""></a>
  <div class="note">
   <strong class="user">dchris1 at bigpond dot net dot au</strong>
   <a href="#39957" class="date">17-Feb-2004 04:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The function provided by marcokonopacki at hotmail dot com isn't really a reverse-version of strrchr(), rather a reverse version of strchr(). It returns everything from the start of $haystack up to the FIRST instance of the $needle. This is basically a reverse of the behavior which you expect from strchr(). A reverse version of strrchr() would return everything in $haystack up to the LAST instance of $needle, eg:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// reverse strrchr() - PHP v4.0b3 and above<br />
</span><span class="keyword">function </span><span class="default">reverse_strrchr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$pos </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$haystack</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$pos </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Note that this function will need to be modified slightly to work with pre 4.0b3 versions of PHP due to the return type of strrpos() ('0' is not necessarily 'false'). Check the documentation on strrpos() for more info. <br />
<br />
A function like this can be useful for extracting the path to a script, for example:<br />
<br />
&lt;?<br />
$string = "/path/to/the/file/filename.php";<br />
<br />
echo reverse_strrchr($string, '/'); // will echo "/path/to/the/file/"<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="32336""></a>
  <div class="note">
   <strong class="user">andfarm at thibs dot menloschool dot org</strong>
   <a href="#32336" class="date">24-May-2003 01:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
strrchr is also very useful for finding the extension of a file. For example:<br />
<br />
$ext = strrchr($filename, ".");<br />
<br />
and $ext will contain the extension of the file, including a ".", if the file has an extension, and FALSE if the file has no extension. If the file has multiple extensions, such as "evilfile.jpg.vbs", then this construction will just return the last extension.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="31232""></a>
  <div class="note">
   <strong class="user">marcokonopacki at hotmail dot com</strong>
   <a href="#31232" class="date">14-Apr-2003 09:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
&lt;?<br />
<br />
// Reverse search of strrchr.<br />
function strrrchr($haystack,$needle)<br />
{<br />
<br />
&nbsp;&nbsp;&nbsp; // Returns everything before $needle (inclusive).<br />
&nbsp;&nbsp;&nbsp; return substr($haystack,0,strpos($haystack,$needle)+1);<br />
&nbsp;&nbsp;&nbsp; <br />
}<br />
<br />
$string = "FIELD NUMBER(9) NOT NULL";<br />
<br />
echo strrrchr($string,")"); // Will print FIELD (9)<br />
<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

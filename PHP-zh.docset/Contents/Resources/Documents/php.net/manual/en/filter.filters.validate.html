<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Validate filters</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="filter.filters.html">? Types of filters</a></li>
      <li style="float: right;"><a href="filter.filters.sanitize.html">Sanitize filters ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="filter.filters.html">Types of filters</a></li>
    <li>Validate filters</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="filter.filters.validate" class="section">
  <h2 class="title">Validate filters</h2>
   <p class="para">
    <table class="doctable table">
     <caption><strong>Listing of filters for validation</strong></caption>
     
      <thead>
       <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Options</th>
        <th>Flags</th>
        <th>Description</th>
       </tr>

      </thead>

      <tbody class="tbody">
       <tr>
        <td><strong><code>FILTER_VALIDATE_BOOLEAN</code></strong></td>
        <td>&quot;boolean&quot;</td>
        <td>
         <code class="parameter">default</code>
        </td>
        <td>
          <strong><code>FILTER_NULL_ON_FAILURE</code></strong>
        </td>
        <td>
         <p class="para">
          Returns <strong><code>TRUE</code></strong> for &quot;1&quot;, &quot;true&quot;, &quot;on&quot; and &quot;yes&quot;.
          Returns <strong><code>FALSE</code></strong> otherwise.
         </p>
         <p class="para">
          If <strong><code>FILTER_NULL_ON_FAILURE</code></strong> is set, <strong><code>FALSE</code></strong> is
          returned only for &quot;0&quot;, &quot;false&quot;, &quot;off&quot;, &quot;no&quot;, and &quot;&quot;, and
          <strong><code>NULL</code></strong> is returned for all non-boolean values.
         </p>
        </td>
       </tr>

       <tr>
        <td><strong><code>FILTER_VALIDATE_EMAIL</code></strong></td>
        <td>&quot;validate_email&quot;</td>
        <td>
         <code class="parameter">default</code>
        </td>
        <td class="empty">&nbsp;</td>
        <td>
         <p class="para">
          Validates whether the value is a valid e-mail address.
         </p>
         <p class="para">
          In general, this validates e-mail addresses against the syntax in
          RFC 822, with the exceptions that comments and whitespace folding
          are not supported.
         </p>
        </td>
       </tr>

       <tr>
        <td><strong><code>FILTER_VALIDATE_FLOAT</code></strong></td>
        <td>&quot;float&quot;</td>
        <td>
         <code class="parameter">default</code>,
         <code class="parameter">decimal</code>
        </td>
        <td>
         <strong><code>FILTER_FLAG_ALLOW_THOUSAND</code></strong>
        </td>
        <td>Validates value as float.</td>
       </tr>

       <tr>
        <td><strong><code>FILTER_VALIDATE_INT</code></strong></td>
        <td>&quot;int&quot;</td>
        <td>
         <code class="parameter">default</code>,
         <code class="parameter">min_range</code>,
         <code class="parameter">max_range</code>
        </td>
        <td>
         <strong><code>FILTER_FLAG_ALLOW_OCTAL</code></strong>,
         <strong><code>FILTER_FLAG_ALLOW_HEX</code></strong>
        </td>
        <td>Validates value as integer, optionally from the specified range.</td>
       </tr>

       <tr>
        <td><strong><code>FILTER_VALIDATE_IP</code></strong></td>
        <td>&quot;validate_ip&quot;</td>
        <td>
         <code class="parameter">default</code>
        </td>
        <td>
         <strong><code>FILTER_FLAG_IPV4</code></strong>,
         <strong><code>FILTER_FLAG_IPV6</code></strong>,
         <strong><code>FILTER_FLAG_NO_PRIV_RANGE</code></strong>,
         <strong><code>FILTER_FLAG_NO_RES_RANGE</code></strong>
        </td>
        <td>
         Validates value as IP address, optionally only IPv4 or IPv6 or not
         from private or reserved ranges.
        </td>
       </tr>

       <tr>
        <td><strong><code>FILTER_VALIDATE_REGEXP</code></strong></td>
        <td>&quot;validate_regexp&quot;</td>
        <td>
         <code class="parameter">default</code>,
         <code class="parameter">regexp</code>
        </td>
        <td class="empty">&nbsp;</td>
        <td>
         Validates value against <code class="parameter">regexp</code>, a
         <a href="book.pcre.html" class="link">Perl-compatible</a> regular expression.
        </td>
       </tr>

       <tr>
        <td><strong><code>FILTER_VALIDATE_URL</code></strong></td>
        <td>&quot;validate_url&quot;</td>
        <td>
         <code class="parameter">default</code>
        </td>
        <td>
         <strong><code>FILTER_FLAG_PATH_REQUIRED</code></strong>,
         <strong><code>FILTER_FLAG_QUERY_REQUIRED</code></strong>
        </td>
        <td>Validates value as URL (according to <a href="http://www.faqs.org/rfcs/rfc2396" class="link external" title="Link : http://www.faqs.org/rfcs/rfc2396">&raquo;&nbsp;http://www.faqs.org/rfcs/rfc2396</a>), optionally with required components. Beware a valid URL may not specify the HTTP protocol <code class="parameter">http://</code> so further validation may be required to determine the URL uses an expected protocol, e.g. <code class="parameter">ssh://</code> or <code class="parameter">mailto:</code>. Note that the function will only find ASCII URLs to be valid; internationalized domain names (containing non-ASCII characters) will fail.</td>
       </tr>

      </tbody>
     
    </table>

   </p>
   <blockquote class="note"><p><strong class="note">Note</strong>: 
    <p class="para">
     As of PHP 5.4.11, the numbers +0 and -0 validate as both integers as well
     as floats (using <strong><code>FILTER_VALIDATE_FLOAT</code></strong> and
     <strong><code>FILTER_VALIDATE_INT</code></strong>). Before PHP 5.4.11 they only
     validated as floats (using <strong><code>FILTER_VALIDATE_FLOAT</code></strong>).
    </p>
    <p class="para">
     When <code class="parameter">default</code> is set to option, <code class="parameter">default</code>&#039;s value is used if value is not validated.
    </p>
   </p></blockquote>
 </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="113306""></a>
  <div class="note">
   <strong class="user">Bastien</strong>
   <a href="#113306" class="date">24-Sep-2013 05:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Rejection of so-called partial domains because of "missing" dot is not following section 2.3.5 of RFC 5321.<br />
<br />
It says FQDNs are permitted, and com, org, or va are (well, may be) valids FQDNs. It depends on DNS, not on syntax.<br />
<br />
Some TDLs (although few of them) have MX RRs, the for example "abuse@va" is correct.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111692""></a>
  <div class="note">
   <strong class="user">rowan dot collins at gmail dot com</strong>
   <a href="#111692" class="date">18-Mar-2013 05:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Regarding "partial" addresses with no . in the domain part, a comment in the source code (in ext/filter/logical_filters.c) justifies this rejection thus:<br />
<br />
&nbsp;&nbsp; &nbsp; * The regex below is based on a regex by Michael Rushton.<br />
&nbsp;&nbsp; &nbsp; * However, it is not identical.&nbsp; I changed it to only consider routeable<br />
&nbsp;&nbsp; &nbsp; * addresses as valid.&nbsp; Michael's regex considers a@b a valid address<br />
&nbsp;&nbsp; &nbsp; * which conflicts with section 2.3.5 of RFC 5321 which states that:<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; *&nbsp;&nbsp; Only resolvable, fully-qualified domain names (FQDNs) are permitted<br />
&nbsp;&nbsp; &nbsp; *&nbsp;&nbsp; when domain names are used in SMTP.&nbsp; In other words, names that can<br />
&nbsp;&nbsp; &nbsp; *&nbsp;&nbsp; be resolved to MX RRs or address (i.e., A or AAAA) RRs (as discussed<br />
&nbsp;&nbsp; &nbsp; *&nbsp;&nbsp; in Section 5) are permitted, as are CNAME RRs whose targets can be<br />
&nbsp;&nbsp; &nbsp; *&nbsp;&nbsp; resolved, in turn, to MX or address RRs.&nbsp; Local nicknames or<br />
&nbsp;&nbsp; &nbsp; *&nbsp;&nbsp; unqualified names MUST NOT be used.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110411""></a>
  <div class="note">
   <strong class="user">boy at relaxnow dot nl</strong>
   <a href="#110411" class="date">19-Oct-2012 11:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
FILTER_VALIDATE_URL does not work with URNs, examples of valid URIs according to RFC3986 and if they are accepted by FILTER_VALIDATE_URL:
<br />

<br />
[PASS] <a href="ftp://ftp.is.co.za.example.org/rfc/rfc1808.txt" rel="nofollow" target="_blank">ftp://ftp.is.co.za.example.org/rfc/rfc1808.txt</a>
<br />
[PASS] gopher://spinaltap.micro.umn.example.edu/00/Weather/California/Los%20Angeles
<br />
[PASS] <a href="http://www.math.uio.no.example.net/faq/compression-faq/part1.html" rel="nofollow" target="_blank">http://www.math.uio.no.example.net/faq/compression-faq/part1.html</a>
<br />
[PASS] <a href="mailto:mduerst@ifi.unizh.example.gov" rel="nofollow" target="_blank">mailto:mduerst@ifi.unizh.example.gov</a>
<br />
[PASS] news:comp.infosystems.www.servers.unix
<br />
[PASS] telnet://melvyl.ucop.example.edu/
<br />
[PASS] <a href="http://www.ietf.org/rfc/rfc2396.txt" rel="nofollow" target="_blank">http://www.ietf.org/rfc/rfc2396.txt</a>
<br />
[PASS] ldap://[2001:db8::7]/c=GB?objectClass?one
<br />
[PASS] <a href="mailto:John.Doe@example.com" rel="nofollow" target="_blank">mailto:John.Doe@example.com</a>
<br />
[PASS] news:comp.infosystems.www.servers.unix
<br />
[FAIL] tel:+1-816-555-1212
<br />
[PASS] telnet://192.0.2.16:80/
<br />
[FAIL] urn:oasis:names:specification:docbook:dtd:xml:4.1.2</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108551""></a>
  <div class="note">
   <strong class="user">bee kay two at em ee dot com</strong>
   <a href="#108551" class="date">06-May-2012 01:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Notably missing is a way to validate text entry as printable,<br />
printable multiline,<br />
or printable and safe (tag free)<br />
<br />
FILTER_VALIDATE_TEXT, which validates no special characters<br />
perhaps with FILTER_FLAG_ALLOW_NEWLINE<br />
and FILTER_FLAG_NOTAG to disallow tag starters</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108218""></a>
  <div class="note">
   <strong class="user">Tom</strong>
   <a href="#108218" class="date">09-Apr-2012 07:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be aware!<br />
<br />
In contrary to what the docs say (at least in PHP 5.3.1), this line:<br />
<br />
$value = filter_var(FALSE, FILTER_VALIDATE_BOOLEAN, FILTER_NULL_ON_FAILURE);<br />
<br />
Will return NULL - not false. In other words: a boolean FALSE is not considered a valid boolean value by this function.<br />
<br />
Also:<br />
<br />
$value = filter_var("", FILTER_VALIDATE_BOOLEAN, FILTER_NULL_ON_FAILURE);<br />
<br />
Will also return NULL - no matter what the docs say. So (string) FALSE is not considered a valid boolean input either.<br />
<br />
Thus be aware the that correct usage/workaround for this filter is:<br />
<br />
if (!is_bool($value)) {<br />
&nbsp;&nbsp;&nbsp; $value= filter_var($value, FILTER_VALIDATE_BOOLEAN, FILTER_NULL_ON_FAILURE);<br />
}<br />
<br />
For those of you who feel this is counterintuitive, note that there is an issue filed for this in the bug-tracker.<br />
So you might want to follow the discussion there or vote for issue #49510.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105619""></a>
  <div class="note">
   <strong class="user">Griff</strong>
   <a href="#105619" class="date">01-Sep-2011 01:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
&lt;&lt; FILTER_VALIDATE_EMAIL allows incomplete e-mail addresses to be validated, for examle john@gmail will validate as a proper e-mail address &gt;&gt;<br />
<br />
"Plain" hostnames with no dots are valid in email addresses - <br />
for example, "me@localhost".</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103334""></a>
  <div class="note">
   <strong class="user">php at sethsyberg dot com</strong>
   <a href="#103334" class="date">07-Apr-2011 10:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When validating floats, you must use the Identical/Not identical operators for proper validation of zeros:<br />
<br />
This will not work as expected:<br />
<span class="default">&lt;?php<br />
$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
if (!</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_FLOAT</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"</span><span class="default">$x</span><span class="string"> is a valid float"</span><span class="keyword">;<br />
} else {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"</span><span class="default">$x</span><span class="string"> is NOT a valid float"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
This will work as expected:<br />
<span class="default">&lt;?php<br />
$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
if (</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_FLOAT</span><span class="keyword">)!== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"</span><span class="default">$x</span><span class="string"> is a valid float"</span><span class="keyword">;<br />
} else {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"</span><span class="default">$x</span><span class="string"> is NOT a valid float"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102937""></a>
  <div class="note">
   <strong class="user">chastell at chastell dot net</strong>
   <a href="#102937" class="date">15-Mar-2011 04:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
example@example is a perfectly valid email address - I use chastell@localhost and chastell@devielle (my computer's name) email addresses all the time and they get delivered just fine.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102398""></a>
  <div class="note">
   <strong class="user">php dot net at piskvor dot org</strong>
   <a href="#102398" class="date">11-Feb-2011 05:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
FILTER_VALIDATE_EMAIL is discarding valid e-mail addresses containing IDN. Since there are real, live IDNs on the Internet, that means the filtered output is too strict, leading to false negatives.<br />
<br />
Punycode-encoded IDN addresses pass the filter correctly; so before checking for validity, it is necessary to convert the e-mail address to punycode.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101693""></a>
  <div class="note">
   <strong class="user">Clifton</strong>
   <a href="#101693" class="date">05-Jan-2011 05:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
FILTER_VALIDATE_EMAIL does NOT allow incomplete e-mail addresses to be validated as mentioned by Tomas.
<br />

<br />
Using the following code:
<br />

<br />
<span class="default">&lt;?php
<br />
$email </span><span class="keyword">= </span><span class="string">"clifton@example"</span><span class="keyword">; </span><span class="comment">//Note the .com missing
<br />
</span><span class="keyword">echo </span><span class="string">"PHP Version: "</span><span class="keyword">.</span><span class="default">phpversion</span><span class="keyword">().</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;
<br />
if(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$email</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_EMAIL</span><span class="keyword">)){
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$email</span><span class="keyword">.</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$email</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_EMAIL</span><span class="keyword">));
<br />
}else{
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$email</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_EMAIL</span><span class="keyword">));&nbsp; &nbsp; 
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Returns:
<br />
PHP Version: 5.2.14 //On MY server, may be different depending on which version you have installed.
<br />
bool(false)
<br />

<br />
While the following code:
<br />

<br />
<span class="default">&lt;?php
<br />
$email </span><span class="keyword">= </span><span class="string">"clifton@example.com"</span><span class="keyword">; </span><span class="comment">//Note the .com added
<br />
</span><span class="keyword">echo </span><span class="string">"PHP Version: "</span><span class="keyword">.</span><span class="default">phpversion</span><span class="keyword">().</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;
<br />
if(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$email</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_EMAIL</span><span class="keyword">)){
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$email</span><span class="keyword">.</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$email</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_EMAIL</span><span class="keyword">));
<br />
}else{
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$email</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_EMAIL</span><span class="keyword">));&nbsp; &nbsp; 
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Returns:
<br />
PHP Version: 5.2.14 //On MY server, may be different depending on which version you have installed.
<br />
clifton@example.com
<br />
string(16) "clifton@example.com"
<br />

<br />
This feature is only available for PHP Versions (PHP 5 &gt;= 5.2.0) according to documentation. So make sure your version is correct.
<br />

<br />
Cheers,
<br />
Clifton</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

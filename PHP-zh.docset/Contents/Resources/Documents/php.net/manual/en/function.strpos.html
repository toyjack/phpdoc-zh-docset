<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>查找字符串首次出现的位置</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.strpbrk.html">? strpbrk</a></li>
      <li style="float: right;"><a href="function.strrchr.html">strrchr ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.strings.html">字符串 函数</a></li>
    <li>查找字符串首次出现的位置</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.strpos" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">strpos</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7)</p><p class="refpurpose"><span class="refname">strpos</span> &mdash; <span class="dc-title">查找字符串首次出现的位置</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.strpos-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <span class="methodname"><strong>strpos</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$haystack</code></span>
   , <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$needle</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$offset</code><span class="initializer"> = 0</span></span>
  ] )</div>

  <p class="para rdfs-comment">
   返回 <code class="parameter">needle</code> 在 <code class="parameter">haystack</code> 中首次出现的数字位置。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.strpos-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">haystack</code></dt>

     <dd>

      <p class="para">
       在该字符串中进行查找。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">needle</code></dt>

     <dd>

      <p class="para">
       如果 <code class="parameter">needle</code> 不是一个字符串，那么它将被转换为整型并被视为字符的顺序值。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">offset</code></dt>

     <dd>

      <p class="para">    
       如果提供了此参数，搜索会从字符串该字符数的起始位置开始统计。和 <span class="function"><a href="function.strrpos.html" class="function">strrpos()</a></span>、
       <span class="function"><a href="function.strripos.html" class="function">strripos()</a></span>不一样，这个偏移量不能是负数。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.strpos-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   返回 needle 存在于 <code class="parameter">haystack</code> 字符串起始的位置(独立于 offset)。同时注意字符串位置是从0开始，而不是从1开始的。
  </p>
  <p class="para">
   如果没找到 needle，将返回 <strong><code>FALSE</code></strong>。
  </p>
  <div class="warning"><strong class="warning">Warning</strong><p class="simpara">此函数可能返回布尔值
<strong><code>FALSE</code></strong>，但也可能返回等同于 <strong><code>FALSE</code></strong> 的非布尔值。请阅读 <a href="language.types.boolean.html" class="link">布尔类型</a>章节以获取更多信息。应使用
<a href="language.operators.comparison.html" class="link">===
运算符</a>来测试此函数的返回值。</p></div>
 </div>


 <div class="refsect1 examples" id="refsect1-function.strpos-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-5305">
    <p><strong>Example #1 使用 <em>===</em></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$mystring&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'abc'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$findme&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'a'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$pos&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strpos</span><span style="color: #007700">(</span><span style="color: #0000BB">$mystring</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$findme</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;注意这里使用的是&nbsp;===。简单的&nbsp;==&nbsp;不能像我们期待的那样工作，<br />//&nbsp;因为&nbsp;'a'&nbsp;是第&nbsp;0&nbsp;位置上的（第一个）字符。<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$pos&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"The&nbsp;string&nbsp;'</span><span style="color: #0000BB">$findme</span><span style="color: #DD0000">'&nbsp;was&nbsp;not&nbsp;found&nbsp;in&nbsp;the&nbsp;string&nbsp;'</span><span style="color: #0000BB">$mystring</span><span style="color: #DD0000">'"</span><span style="color: #007700">;<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"The&nbsp;string&nbsp;'</span><span style="color: #0000BB">$findme</span><span style="color: #DD0000">'&nbsp;was&nbsp;found&nbsp;in&nbsp;the&nbsp;string&nbsp;'</span><span style="color: #0000BB">$mystring</span><span style="color: #DD0000">'"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&nbsp;and&nbsp;exists&nbsp;at&nbsp;position&nbsp;</span><span style="color: #0000BB">$pos</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>

   <div class="example" id="example-5306">
    <p><strong>Example #2 使用 !==</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$mystring&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'abc'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$findme&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'a'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$pos&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strpos</span><span style="color: #007700">(</span><span style="color: #0000BB">$mystring</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$findme</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;使用&nbsp;!==&nbsp;操作符。使用&nbsp;!=&nbsp;不能像我们期待的那样工作，<br />//&nbsp;因为&nbsp;'a'&nbsp;的位置是&nbsp;0。语句&nbsp;(0&nbsp;!=&nbsp;false)&nbsp;的结果是&nbsp;false。<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$pos&nbsp;</span><span style="color: #007700">!==&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"The&nbsp;string&nbsp;'</span><span style="color: #0000BB">$findme</span><span style="color: #DD0000">'&nbsp;was&nbsp;found&nbsp;in&nbsp;the&nbsp;string&nbsp;'</span><span style="color: #0000BB">$mystring</span><span style="color: #DD0000">'"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&nbsp;and&nbsp;exists&nbsp;at&nbsp;position&nbsp;</span><span style="color: #0000BB">$pos</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"The&nbsp;string&nbsp;'</span><span style="color: #0000BB">$findme</span><span style="color: #DD0000">'&nbsp;was&nbsp;not&nbsp;found&nbsp;in&nbsp;the&nbsp;string&nbsp;'</span><span style="color: #0000BB">$mystring</span><span style="color: #DD0000">'"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>

   <div class="example" id="example-5307">
    <p><strong>Example #3 使用位置偏移量</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;忽视位置偏移量之前的字符进行查找<br /></span><span style="color: #0000BB">$newstring&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'abcdef&nbsp;abcdef'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$pos&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strpos</span><span style="color: #007700">(</span><span style="color: #0000BB">$newstring</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'a'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;$pos&nbsp;=&nbsp;7,&nbsp;不是&nbsp;0<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.strpos-notes">
  <h3 class="title">注释</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">此函数可安全用于二进制对象。</span></p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.strpos-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.stripos.html" class="function" rel="rdfs-seeAlso">stripos()</a> - 查找字符串首次出现的位置（不区分大小写）</span></li>
    <li class="member"><span class="function"><a href="function.strrpos.html" class="function" rel="rdfs-seeAlso">strrpos()</a> - 计算指定字符串在目标字符串中最后一次出现的位置</span></li>
    <li class="member"><span class="function"><a href="function.strripos.html" class="function" rel="rdfs-seeAlso">strripos()</a> - 计算指定字符串在目标字符串中最后一次出现的位置（不区分大小写）</span></li>
    <li class="member"><span class="function"><a href="function.strstr.html" class="function" rel="rdfs-seeAlso">strstr()</a> - 查找字符串的首次出现</span></li>
    <li class="member"><span class="function"><a href="function.strpbrk.html" class="function" rel="rdfs-seeAlso">strpbrk()</a> - 在字符串中查找一组字符的任何一个字符</span></li>
    <li class="member"><span class="function"><a href="function.substr.html" class="function" rel="rdfs-seeAlso">substr()</a> - 返回字符串的子串</span></li>
    <li class="member"><span class="function"><a href="function.preg-match.html" class="function" rel="rdfs-seeAlso">preg_match()</a> - 执行一个正则表达式匹配</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="119289""></a>
  <div class="note">
   <strong class="user">tuxedobob</strong>
   <a href="#119289" class="date">06-May-2016 02:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
strpos is great for finding the first occurrence of a string, but what if you want the second? Or third?<br />
<br />
Easy enough:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">strposn</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$num </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">, </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$num</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$x </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">$x</span><span class="keyword">+</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$x</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119011""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#119011" class="date">17-Mar-2016 05:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
## html <br />
# HEading <br />
<br />
&amp;nbsp<br />
Click here to go to the support pages.<br />
Click here to submit a bug report.<br />
Click here to request a feature.<br />
(Again, please note, if you ask a question, report a bug, or request a feature, your note will be deleted.)<br />
<br />
***heading***</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118905""></a>
  <div class="note">
   <strong class="user">fabio at naoimporta dot com</strong>
   <a href="#118905" class="date">26-Feb-2016 01:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It is interesting to be aware of the behavior when the treatment of strings with characters using different encodings.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment"># Works like expected. There is no accent<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">strpos</span><span class="keyword">(</span><span class="string">"Fabio"</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">));<br />
</span><span class="comment">#int(2)<br />
<br />
# The "á" letter is occupying two positions<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">strpos</span><span class="keyword">(</span><span class="string">"Fábio"</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">)) ;<br />
</span><span class="comment">#int(3)<br />
<br />
# Now, encoding the string "Fábio" to utf8, we get some "unexpected" outputs. Every letter that is no in regular ASCII table, will use 4 positions(bytes). The starting point remains like before.<br />
# We cant find the characted, because the haystack string is now encoded.<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">utf8_encode</span><span class="keyword">(</span><span class="string">"Fábio"</span><span class="keyword">), </span><span class="string">'á'</span><span class="keyword">));<br />
</span><span class="comment">#bool(false)<br />
<br />
# To get the expected result, we need to encode the needle too<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">utf8_encode</span><span class="keyword">(</span><span class="string">"Fábio"</span><span class="keyword">), </span><span class="default">utf8_encode</span><span class="keyword">(</span><span class="string">'á'</span><span class="keyword">)));<br />
</span><span class="comment">#int(1) <br />
<br />
# And, like said before, "á" occupies 4 positions(bytes)<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">utf8_encode</span><span class="keyword">(</span><span class="string">"Fábio"</span><span class="keyword">), </span><span class="string">'b'</span><span class="keyword">));<br />
</span><span class="comment">#int(5)</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117028""></a>
  <div class="note">
   <strong class="user">lairdshaw at yahoo dot com dot au</strong>
   <a href="#117028" class="date">04-Apr-2015 03:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">/*<br />
&nbsp;* A strpos variant that accepts an array of $needles - or just a string,<br />
&nbsp;* so that it can be used as a drop-in replacement for the standard strpos,<br />
&nbsp;* and in which case it simply wraps around strpos and stripos so as not<br />
&nbsp;* to reduce performance.<br />
&nbsp;*<br />
&nbsp;* The "m" in "strposm" indicates that it accepts *m*ultiple needles.<br />
&nbsp;*<br />
&nbsp;* Finds the earliest match of *all* needles. Returns the position of this match<br />
&nbsp;* or false if none found, as does the standard strpos. Optionally also returns<br />
&nbsp;* via $match either the matching needle as a string (by default) or the index<br />
&nbsp;* into $needles of the matching needle (if the STRPOSM_MATCH_AS_INDEX flag is<br />
&nbsp;* set).<br />
&nbsp;*<br />
&nbsp;* Case-insensitive searching can be specified via the STRPOSM_CI flag.<br />
&nbsp;* Note that for case-insensitive searches, if the STRPOSM_MATCH_AS_INDEX is<br />
&nbsp;* not set, then $match will be in the haystack's case, not the needle's case,<br />
&nbsp;* unless the STRPOSM_NC flag is also set.<br />
&nbsp;*<br />
&nbsp;* Flags can be combined using the bitwise or operator,<br />
&nbsp;* e.g. $flags = STRPOSM_CI|STRPOSM_NC<br />
&nbsp;*/<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">'STRPOSM_CI'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">, </span><span class="default">1</span><span class="keyword">); </span><span class="comment">// CI =&gt; "case insensitive".<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">'STRPOSM_NC'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">, </span><span class="default">2</span><span class="keyword">); </span><span class="comment">// NC =&gt; "needle case".<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">'STRPOSM_MATCH_AS_INDEX'</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">);<br />
function </span><span class="default">strposm</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needles</span><span class="keyword">, </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, &amp;</span><span class="default">$match </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">, </span><span class="default">$flags </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// In the special case where $needles is not an array, simply wrap<br />
&nbsp;&nbsp;&nbsp; // strpos and stripos for performance reasons.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$needles</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$func </span><span class="keyword">= </span><span class="default">$flags </span><span class="keyword">&amp; </span><span class="default">STRPOSM_CI </span><span class="keyword">? </span><span class="string">'stripos' </span><span class="keyword">: </span><span class="string">'strpos'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">$func</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needles</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$pos </span><span class="keyword">!== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$match </span><span class="keyword">= ((</span><span class="default">$flags </span><span class="keyword">&amp; </span><span class="default">STRPOSM_MATCH_AS_INDEX</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ? </span><span class="default">0<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">: ((</span><span class="default">$flags </span><span class="keyword">&amp; </span><span class="default">STRPOSM_NC</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ? </span><span class="default">$needles<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">: </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$needles</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$pos</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else&nbsp; &nbsp; goto </span><span class="default">strposm_no_match</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// $needles is an array. Proceed appropriately, initially by...<br />
&nbsp;&nbsp;&nbsp; // ...escaping regular expression meta characters in the needles.<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$needles_esc </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'preg_quote'</span><span class="keyword">, </span><span class="default">$needles</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// If either of the "needle case" or "match as index" flags are set,<br />
&nbsp;&nbsp;&nbsp; // then create a sub-match for each escaped needle by enclosing it in<br />
&nbsp;&nbsp;&nbsp; // parentheses. We use these later to find the index of the matching<br />
&nbsp;&nbsp;&nbsp; // needle.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if ((</span><span class="default">$flags </span><span class="keyword">&amp; </span><span class="default">STRPOSM_NC</span><span class="keyword">) || (</span><span class="default">$flags </span><span class="keyword">&amp; </span><span class="default">STRPOSM_MATCH_AS_INDEX</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$needles_esc </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; function(</span><span class="default">$needle</span><span class="keyword">) {return </span><span class="string">'('</span><span class="keyword">.</span><span class="default">$needle</span><span class="keyword">.</span><span class="string">')'</span><span class="keyword">;},<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$needles_esc<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Create the regular expression pattern to search for all needles.<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pattern </span><span class="keyword">= </span><span class="string">'('</span><span class="keyword">.</span><span class="default">implode</span><span class="keyword">(</span><span class="string">'|'</span><span class="keyword">, </span><span class="default">$needles_esc</span><span class="keyword">).</span><span class="string">')'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// If the "case insensitive" flag is set, then modify the regular<br />
&nbsp;&nbsp;&nbsp; // expression with "i", meaning that the match is "caseless".<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$flags </span><span class="keyword">&amp; </span><span class="default">STRPOSM_CI</span><span class="keyword">) </span><span class="default">$pattern </span><span class="keyword">.= </span><span class="string">'i'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Find the first match, including its offset.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">, </span><span class="default">PREG_OFFSET_CAPTURE</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Pull the first entry, the overall match, out of the matches array.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$found </span><span class="keyword">= </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If we need the index of the matching needle, then...<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if ((</span><span class="default">$flags </span><span class="keyword">&amp; </span><span class="default">STRPOSM_NC</span><span class="keyword">) || (</span><span class="default">$flags </span><span class="keyword">&amp; </span><span class="default">STRPOSM_MATCH_AS_INDEX</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// ...find the index of the sub-match that is identical<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // to the overall match that we just pulled out.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // Because sub-matches are in the same order as needles,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // this is also the index into $needles of the matching<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // needle.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$index </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$found</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If the "match as index" flag is set, then return in $match<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // the matching needle's index, otherwise...<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$match </span><span class="keyword">= ((</span><span class="default">$flags </span><span class="keyword">&amp; </span><span class="default">STRPOSM_MATCH_AS_INDEX</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ? </span><span class="default">$index<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// ...if the "needle case" flag is set, then index into<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // $needles using the previously-determined index to return<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // in $match the matching needle in needle case, otherwise...<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">: ((</span><span class="default">$flags </span><span class="keyword">&amp; </span><span class="default">STRPOSM_NC</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ? </span><span class="default">$needles</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">]<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// ...by default, return in $match the matching needle in<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // haystack case.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">: </span><span class="default">$found</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; );<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Return the captured offset.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$found</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
</span><span class="default">strposm_no_match</span><span class="keyword">:<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Nothing matched. Set appropriate return values.<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$match </span><span class="keyword">= (</span><span class="default">$flags </span><span class="keyword">&amp; </span><span class="default">STRPOSM_MATCH_AS_INDEX</span><span class="keyword">) ? </span><span class="default">false </span><span class="keyword">: </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116994""></a>
  <div class="note">
   <strong class="user">newartix at mail dot ru</strong>
   <a href="#116994" class="date">31-Mar-2015 08:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Extend (ohcc at 163 dot com)s comment:<br />
<br />
Be careful when the $haystack or $needle parameter is an integer.<br />
If you are not sure of its type, you should&nbsp; convert it into a string.<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; var_dump</span><span class="keyword">(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">12345</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">));</span><span class="comment">//false<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">12345</span><span class="keyword">,</span><span class="string">'1'</span><span class="keyword">));</span><span class="comment">//0<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">strpos</span><span class="keyword">(</span><span class="string">'12345'</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">));</span><span class="comment">//false<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">strpos</span><span class="keyword">(</span><span class="string">'12345'</span><span class="keyword">,</span><span class="string">'1'</span><span class="keyword">));</span><span class="comment">//0<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$a </span><span class="keyword">= </span><span class="default">12345</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$b </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">strval</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">),</span><span class="default">strval</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">)));</span><span class="comment">//0<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">strpos</span><span class="keyword">((string)</span><span class="default">$a</span><span class="keyword">,(string)</span><span class="default">$b</span><span class="keyword">));</span><span class="comment">//0&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; // and wait for interesting... CentOS 6.5 PHP-FPM 5.4.35<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">strpos</span><span class="keyword">(</span><span class="string">'mrwagon'</span><span class="keyword">,</span><span class="default">626</span><span class="keyword">));</span><span class="comment">//1&nbsp; &nbsp; &nbsp; tadaaam!<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116062""></a>
  <div class="note">
   <strong class="user">qrworld.net</strong>
   <a href="#116062" class="date">05-Nov-2014 01:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I found a function in this post <a href="http://softontherocks.blogspot.com/2014/11/buscar-multiples-textos-en-un-texto-con.html " rel="nofollow" target="_blank">http://softontherocks.blogspot.com/2014/11/buscar-multiples-textos-en-un-texto-con.html </a><br />
that implements the search in both ways, case sensitive or case insensitive, depending on an input parameter.<br />
<br />
The function is:<br />
<br />
function getMultiPos($haystack, $needles, $sensitive=true, $offset=0){<br />
&nbsp;&nbsp;&nbsp; foreach($needles as $needle) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $result[$needle] = ($sensitive) ? strpos($haystack, $needle, $offset) : stripos($haystack, $needle, $offset);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return $result;<br />
}<br />
<br />
It was very useful for me.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115404""></a>
  <div class="note">
   <strong class="user">Andres</strong>
   <a href="#115404" class="date">19-Jul-2014 05:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
strpos: Want to find lines in text file, NOT beginning with a comment (// for example)?<br />
That way it Works:<br />
$komm=strpos($var,'//');<br />
if($komm === FALSE || $komm == TRUE){}<br />
<br />
Generally, it is a nonsense. Why 'strpos' cant ALWAYS output an integer?</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115284""></a>
  <div class="note">
   <strong class="user">ohcc at 163 dot com</strong>
   <a href="#115284" class="date">27-Jun-2014 07:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be careful when the $haystack or $needle parameter is an integer.<br />
If you are not sure of its type, you should&nbsp; convert it into a string.<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; var_dump</span><span class="keyword">(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">12345</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">));</span><span class="comment">//false<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">12345</span><span class="keyword">,</span><span class="string">'1'</span><span class="keyword">));</span><span class="comment">//0<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">strpos</span><span class="keyword">(</span><span class="string">'12345'</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">));</span><span class="comment">//false<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">strpos</span><span class="keyword">(</span><span class="string">'12345'</span><span class="keyword">,</span><span class="string">'1'</span><span class="keyword">));</span><span class="comment">//0<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$a </span><span class="keyword">= </span><span class="default">12345</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$b </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">strval</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">),</span><span class="default">strval</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">)));</span><span class="comment">//0<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">strpos</span><span class="keyword">((string)</span><span class="default">$a</span><span class="keyword">,(string)</span><span class="default">$b</span><span class="keyword">));</span><span class="comment">//0&nbsp; &nbsp; <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115177""></a>
  <div class="note">
   <strong class="user">andrew dot macrobert+php at gmail dot com</strong>
   <a href="#115177" class="date">10-Jun-2014 05:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function finds ALL occurrences of a substring, returning an array of indexes referring to the start of each occurrence. Overlapping subtrings are not included.<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">strpos_all</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$instances </span><span class="keyword">= array();<br />
<br />
&nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp; while((</span><span class="default">$offset </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">)) !== </span><span class="default">FALSE</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$instances</span><span class="keyword">[] = </span><span class="default">$offset</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$offset </span><span class="keyword">+= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">);<br />
&nbsp; }<br />
<br />
&nbsp; return </span><span class="default">$instances</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115135""></a>
  <div class="note">
   <strong class="user">mail at nikha dot org</strong>
   <a href="#115135" class="date">02-Jun-2014 06:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
What the manual says about "if $needle is not a string" is confusing.<br />
<br />
in fact, strpos() compares strings, and nothing else. <br />
<br />
Example:<br />
$haystack = "123456789";<br />
<br />
$needle = 2;<br />
strpos($haystack, $needle) returns boolean false<br />
$needle = "2";<br />
strpos($haystack, $needle) returns 1;<br />
<br />
My real life problem were timestamps. I had a list of timestamps like this: "!&lt;timestamp0&gt;!&lt;timestamp1&gt;!&lt;timestamp2&gt;..." Then I tried to find out, wheter an actualy by "mktime()" generated timestamp is found in this list or not. But strpos() returned always boolean 0, because mktime() results are integers.<br />
<br />
It worked only like this: <br />
strpos($timestamp_list, strval($mktime_result))<br />
&nbsp;<br />
may be helpfull for others...<br />
Niklaus</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114716""></a>
  <div class="note">
   <strong class="user">binodluitel at hotmail dot com</strong>
   <a href="#114716" class="date">28-Mar-2014 01:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function will return 0 if the string that you are searching matches i.e. needle matches the haystack<br />
<br />
{code}<br />
echo strpos('bla', 'bla');<br />
{code}<br />
<br />
Output: 0</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114687""></a>
  <div class="note">
   <strong class="user">m at binh dot vn</strong>
   <a href="#114687" class="date">22-Mar-2014 06:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Using strpos can be tricky sometimes. To reuse it for one search you can use this form:<br />
<br />
<span class="default">&lt;?php<br />
$found </span><span class="keyword">= (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
For example:<br />
<br />
<span class="default">&lt;?php<br />
$url </span><span class="keyword">= </span><span class="string">"<a href="http://www.binh.vn" rel="nofollow" target="_blank">http://www.binh.vn</a>"</span><span class="keyword">;<br />
</span><span class="default">$found </span><span class="keyword">= (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">, </span><span class="string">'http'</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">);<br />
if (</span><span class="default">$found</span><span class="keyword">) echo </span><span class="string">"Found http"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
Clearly we see that the position will be 0 but the $found will be true and so we can use more than one time of if ($found) which is much easier.<br />
<br />
To further reuse it we could make a very short function:<br />
<span class="default">&lt;?php <br />
</span><span class="keyword">function </span><span class="default">found</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">) {<br />
&nbsp; return (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Wonder why php didn't have such function for easier use?</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113929""></a>
  <div class="note">
   <strong class="user">harshitpatelrock25 at gmail dot com</strong>
   <a href="#113929" class="date">18-Dec-2013 07:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
TO find the position specific word in a para:-<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; $String </span><span class="keyword">= </span><span class="string">'This is the php language And is Used to develop web programs'</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$find </span><span class="keyword">= </span><span class="string">'1232'</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$find_leg </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$find</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$start_pos </span><span class="keyword">= </span><span class="default">00</span><span class="keyword">;<br />
&nbsp; <br />
&nbsp; while(</span><span class="default">$string_pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$String</span><span class="keyword">,</span><span class="default">$find</span><span class="keyword">,</span><span class="default">$start_pos</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;strong&gt; \" </span><span class="default">$find</span><span class="string"> \" &lt;/strong&gt; was found on position : </span><span class="default">$string_pos</span><span class="string"> &lt;br&gt;" </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$start_pos </span><span class="keyword">= </span><span class="default">$string_pos </span><span class="keyword">+ </span><span class="default">$find_leg</span><span class="keyword">;<br />
&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113911""></a>
  <div class="note">
   <strong class="user">Lurvik</strong>
   <a href="#113911" class="date">17-Dec-2013 04:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Don't know if already posted this, but if I did this is an improvement.<br />
<br />
This function will check if a string contains&nbsp; a needle. It _will_ work with arrays and multidimensional arrays (I've tried with a &gt; 16 dimensional array and had no problem).<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">str_contains</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needles</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//If needles is an array<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$needles</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//go trough all the elements<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">foreach(</span><span class="default">$needles </span><span class="keyword">as </span><span class="default">$needle</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//if the needle is also an array (ie needles is a multidimensional array)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//call this function again<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">str_contains</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Will break out of loop and function.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//when the needle is NOT an array:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //Check if haystack contains the needle, will ignore case and check for whole words only<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">elseif(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/\b</span><span class="default">$needle</span><span class="string">\b/i"</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">) !== </span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//if $needles is not an array...<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/\b</span><span class="default">$needles</span><span class="string">\b/i"</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">) !== </span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113900""></a>
  <div class="note">
   <strong class="user">kiipa at live dot com</strong>
   <a href="#113900" class="date">15-Dec-2013 11:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
So I needed a function to check if a string contains a string. But that also works with arrays. And multidimensional arrays.<br />
<br />
Well commented, because I'm sharing the source I use this in.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">private static </span><span class="default">$found</span><span class="keyword">;<br />
</span><span class="comment">//Sees if a string contains another string, WORKS WITH 2D ARRAYS! Returns true or false.<br />
</span><span class="keyword">public static function </span><span class="default">strcont</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needles</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//If needles is an array<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$needles</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//go trough all the elements<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">foreach(</span><span class="default">$needles </span><span class="keyword">as </span><span class="default">$needle</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//if the needle is also an array (ie needles is a multidimensional array)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//call this function again<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">static::</span><span class="default">strcont</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//when the needle is NOT an array:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">elseif(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Set the bool to true (DO NOT CHANGE TO return true). IT WILL NOT WORK!<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">static::</span><span class="default">$found </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Because we only set the bool if we found something we'll check if the bool is set.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(isset(static::</span><span class="default">$found</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Then return true.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//If the needles is not an array (this function can be used as strpos...)<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needles</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">falsE</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}&nbsp; &nbsp; <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111422""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#111422" class="date">19-Feb-2013 06:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The most straightforward way to prevent this function from returning 0 is:<br />
<br />
&nbsp; strpos('x'.$haystack, $needle, 1)<br />
<br />
The 'x' is simply a garbage character which is only there to move everything 1 position.<br />
The number 1 is there to make sure that this 'x' is ignored in the search.<br />
This way, if $haystack starts with $needle, then the function returns 1 (rather than 0).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108426""></a>
  <div class="note">
   <strong class="user">mtroy dot student at gmail dot com</strong>
   <a href="#108426" class="date">26-Apr-2012 01:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
when you want to know how much of substring occurrences, you'll use "substr_count".<br />
But, retrieve their positions, will be harder.<br />
So, you can do it by starting with the last occurrence :<br />
<br />
function strpos_r($haystack, $needle)<br />
{<br />
&nbsp;&nbsp;&nbsp; if(strlen($needle) &gt; strlen($haystack))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; trigger_error(sprintf("%s: length of argument 2 must be &lt;= argument 1", __FUNCTION__), E_USER_WARNING);<br />
<br />
&nbsp;&nbsp;&nbsp; $seeks = array();<br />
&nbsp;&nbsp;&nbsp; while($seek = strrpos($haystack, $needle))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array_push($seeks, $seek);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $haystack = substr($haystack, 0, $seek);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return $seeks;<br />
}<br />
<br />
it will return an array of all occurrences a the substring in the string<br />
<br />
Example : <br />
<br />
$test = "this is a test for testing a test function... blah blah";<br />
var_dump(strpos_r($test, "test"));<br />
<br />
// output <br />
<br />
array(3) {<br />
&nbsp; [0]=&gt;<br />
&nbsp; int(29)<br />
&nbsp; [1]=&gt;<br />
&nbsp; int(19)<br />
&nbsp; [2]=&gt;<br />
&nbsp; int(10)<br />
}<br />
<br />
Paul-antoine<br />
Malézieux.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107678""></a>
  <div class="note">
   <strong class="user">martijn at martijnfrazer dot nl</strong>
   <a href="#107678" class="date">26-Feb-2012 12:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a function I wrote to find all occurrences of a string, using strpos recursively.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">strpos_recursive</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, &amp;</span><span class="default">$results </span><span class="keyword">= array()) {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$offset </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$results</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$results</span><span class="keyword">[] = </span><span class="default">$offset</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strpos_recursive</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, (</span><span class="default">$offset </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">), </span><span class="default">$results</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
This is how you use it:<br />
<br />
<span class="default">&lt;?php<br />
$string </span><span class="keyword">= </span><span class="string">'This is some string'</span><span class="keyword">;<br />
</span><span class="default">$search </span><span class="keyword">= </span><span class="string">'a'</span><span class="keyword">;<br />
</span><span class="default">$found </span><span class="keyword">= </span><span class="default">strpos_recursive</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$search</span><span class="keyword">);<br />
<br />
if(</span><span class="default">$found</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$found </span><span class="keyword">as </span><span class="default">$pos</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'Found "'</span><span class="keyword">.</span><span class="default">$search</span><span class="keyword">.</span><span class="string">'" in string "'</span><span class="keyword">.</span><span class="default">$string</span><span class="keyword">.</span><span class="string">'" at position &lt;b&gt;'</span><span class="keyword">.</span><span class="default">$pos</span><span class="keyword">.</span><span class="string">'&lt;/b&gt;&lt;br /&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }&nbsp; &nbsp; <br />
} else {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'"'</span><span class="keyword">.</span><span class="default">$search</span><span class="keyword">.</span><span class="string">'" not found in "'</span><span class="keyword">.</span><span class="default">$string</span><span class="keyword">.</span><span class="string">'"'</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107240""></a>
  <div class="note">
   <strong class="user">rjeggens at ijskoud dot org</strong>
   <a href="#107240" class="date">24-Jan-2012 04:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I lost an hour before I noticed that strpos only returns FALSE as a boolean, never TRUE.. This means that<br />
<br />
strpos() !== false <br />
<br />
is a different beast then:<br />
<br />
strpos() === true<br />
<br />
since the latter will never be true. After I found out, The warning in the documentation made a lot more sense.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106407""></a>
  <div class="note">
   <strong class="user">gjh42 - simonokewode at hotmail dot com</strong>
   <a href="#106407" class="date">08-Nov-2011 04:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A pair of functions to replace every nth occurrence of a string with another string, starting at any position in the haystack. The first works on a string and the second works on a single-level array of strings, treating it as a single string for replacement purposes (any needles split over two array elements are ignored).<br />
<br />
Can be used for formatting dynamically-generated HTML output without touching the original generator: e.g. add a newLine class tag to every third item in a floated list, starting with the fourth item.<br />
&nbsp;<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/* String Replace at Intervals&nbsp;&nbsp; by Glenn Herbert (gjh42)&nbsp; &nbsp; 2010-12-17<br />
&nbsp;*/<br />
&nbsp;<br />
//(basic locator by someone else - name unknown)<br />
//strnposr() - Find the position of nth needle in haystack.<br />
</span><span class="keyword">function </span><span class="default">strnposr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$occurrence</span><span class="keyword">, </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return (</span><span class="default">$occurrence</span><span class="keyword">&lt;</span><span class="default">2</span><span class="keyword">)?</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">):</span><span class="default">strnposr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">,</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$occurrence</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">,</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">) + </span><span class="default">1</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="comment">//gjh42<br />
//replace every nth occurrence of $needle with $repl, starting from any position<br />
</span><span class="keyword">function </span><span class="default">str_replace_int</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$repl</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$interval</span><span class="keyword">, </span><span class="default">$first</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">) {<br />
&nbsp; if (</span><span class="default">$pos </span><span class="keyword">&gt;= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">) or </span><span class="default">substr_count</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">) &lt; </span><span class="default">$first</span><span class="keyword">) return </span><span class="default">$haystack</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$firstpos </span><span class="keyword">= </span><span class="default">strnposr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$first</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$nl </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$qty </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">substr_count</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$firstpos </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">)/</span><span class="default">$interval</span><span class="keyword">);<br />
&nbsp; do { </span><span class="comment">//in reverse order<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$nextpos </span><span class="keyword">= </span><span class="default">strnposr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, (</span><span class="default">$qty </span><span class="keyword">* </span><span class="default">$interval</span><span class="keyword">) + </span><span class="default">1</span><span class="keyword">, </span><span class="default">$firstpos</span><span class="keyword">); <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$qty</span><span class="keyword">--;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$haystack </span><span class="keyword">= </span><span class="default">substr_replace</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$repl</span><span class="keyword">, </span><span class="default">$nextpos</span><span class="keyword">, </span><span class="default">$nl</span><span class="keyword">);<br />
&nbsp; } while (</span><span class="default">$nextpos </span><span class="keyword">&gt; </span><span class="default">$firstpos</span><span class="keyword">);<br />
&nbsp; return </span><span class="default">$haystack</span><span class="keyword">;<br />
}<br />
&nbsp; </span><span class="comment">//$needle = string to find<br />
&nbsp; //$repl = string to replace needle<br />
&nbsp; //$haystack = string to do replacing in<br />
&nbsp; //$interval = number of needles in loop<br />
&nbsp; //$first=1 = first occurrence of needle to replace (defaults to first) <br />
&nbsp; //$pos=0 = position in haystack string to start from (defaults to first) <br />
&nbsp;<br />
//replace every nth occurrence of $needle with $repl, starting from any position, in a single-level array<br />
</span><span class="keyword">function </span><span class="default">arr_replace_int</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$repl</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$interval</span><span class="keyword">, </span><span class="default">$first</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">, </span><span class="default">$glue</span><span class="keyword">=</span><span class="string">'|+|'</span><span class="keyword">) {<br />
&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">))&nbsp; return </span><span class="default">$arr</span><span class="keyword">;<br />
&nbsp; foreach(</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">])) return </span><span class="default">$arr</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; </span><span class="default">$haystack </span><span class="keyword">= </span><span class="default">implode</span><span class="keyword">(</span><span class="default">$glue</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$haystack </span><span class="keyword">= </span><span class="default">str_replace_int</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$repl</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$interval</span><span class="keyword">, </span><span class="default">$first</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$tarr </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="default">$glue</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp; foreach(</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$tarr</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$arr</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span>If $arr is not an array, or a multilevel array, it is returned unchanged.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105984""></a>
  <div class="note">
   <strong class="user">jim at terrys dot net</strong>
   <a href="#105984" class="date">30-Sep-2011 08:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
strpos that accepts an array for $needle
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">// strpos that takes an array of values to match against a string
<br />
// note the stupid argument order (to match strpos)
<br />
</span><span class="keyword">function </span><span class="default">strpos_arr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">)) </span><span class="default">$needle </span><span class="keyword">= array(</span><span class="default">$needle</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$needle </span><span class="keyword">as </span><span class="default">$what</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if((</span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$what</span><span class="keyword">))!==</span><span class="default">false</span><span class="keyword">) return </span><span class="default">$pos</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102773""></a>
  <div class="note">
   <strong class="user">akarmenia at gmail dot com</strong>
   <a href="#102773" class="date">05-Mar-2011 01:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
My version of strpos with needles as an array. Also allows for a string, or an array inside an array.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">strpos_array</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needles</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if ( </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$needles</span><span class="keyword">) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$needles </span><span class="keyword">as </span><span class="default">$str</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strpos_array</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$pos </span><span class="keyword">!== </span><span class="default">FALSE</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$pos</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needles</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="comment">// Test<br />
</span><span class="keyword">echo </span><span class="default">strpos_array</span><span class="keyword">(</span><span class="string">'This is a test'</span><span class="keyword">, array(</span><span class="string">'test'</span><span class="keyword">, </span><span class="string">'drive'</span><span class="keyword">)); </span><span class="comment">// Output is 10<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99476""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#99476" class="date">19-Aug-2010 11:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Beware the mindless "if needle is not string":
<br />

<br />
# php -r 'var_dump(strpos("X1234567",5));'
<br />
bool(false)
<br />
# php -r 'var_dump(strpos("X1234567","5"));'
<br />
int(5)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99440""></a>
  <div class="note">
   <strong class="user">gambajaja at yahoo dot com</strong>
   <a href="#99440" class="date">18-Aug-2010 12:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
$my_array </span><span class="keyword">= array (</span><span class="string">'100,101'</span><span class="keyword">, </span><span class="string">'200,201'</span><span class="keyword">, </span><span class="string">'300,301'</span><span class="keyword">);<br />
</span><span class="default">$check_me_in </span><span class="keyword">= array (</span><span class="string">'100'</span><span class="keyword">,</span><span class="string">'200'</span><span class="keyword">,</span><span class="string">'300'</span><span class="keyword">,</span><span class="string">'400'</span><span class="keyword">);<br />
foreach (</span><span class="default">$check_me_in </span><span class="keyword">as </span><span class="default">$value_cmi</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$is_in</span><span class="keyword">=</span><span class="default">FALSE</span><span class="keyword">; </span><span class="comment">#asume that $check_me_in isn't in $my_array<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$my_array </span><span class="keyword">as </span><span class="default">$value_my</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$value_my</span><span class="keyword">, </span><span class="default">$value_cmi</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$pos</span><span class="keyword">===</span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$pos</span><span class="keyword">==</span><span class="default">TRUE</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$is_in</span><span class="keyword">=</span><span class="default">TRUE</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value_my2</span><span class="keyword">=</span><span class="default">$value_my</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$is_in</span><span class="keyword">) echo </span><span class="string">"ID </span><span class="default">$value_cmi</span><span class="string"> in \$check_me_in I found in value '</span><span class="default">$value_my2</span><span class="string">' \n"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
The above example will output<br />
ID 100 in $check_me_in I found in value '100,101' <br />
ID 200 in $check_me_in I found in value '200,201' <br />
ID 300 in $check_me_in I found in value '300,301'</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99332""></a>
  <div class="note">
   <strong class="user">usulaco at gmail dot com</strong>
   <a href="#99332" class="date">11-Aug-2010 02:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Parse strings between two others in to array.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">g</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$end</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">'/' </span><span class="keyword">. </span><span class="default">preg_quote</span><span class="keyword">(</span><span class="default">$start</span><span class="keyword">, </span><span class="string">'/'</span><span class="keyword">) . </span><span class="string">'(.*?)'</span><span class="keyword">. </span><span class="default">preg_quote</span><span class="keyword">(</span><span class="default">$end</span><span class="keyword">, </span><span class="string">'/'</span><span class="keyword">).</span><span class="string">'/i'</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$out </span><span class="keyword">= array();
<br />

<br />
&nbsp;&nbsp; &nbsp; foreach(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$type </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'::'</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; if(</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$type</span><span class="keyword">)&gt;</span><span class="default">1</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$out</span><span class="keyword">[</span><span class="default">$type</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]]))
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$out</span><span class="keyword">[</span><span class="default">$type</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]] = array();
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out</span><span class="keyword">[</span><span class="default">$type</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]][] = </span><span class="default">$type</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out</span><span class="keyword">[] = </span><span class="default">$value</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; }
<br />
&nbsp;&nbsp; &nbsp; }
<br />
&nbsp; return </span><span class="default">$out</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">g</span><span class="keyword">(</span><span class="string">'Sample text, [/text to extract/] Rest of sample text [/WEB::<a href="http://google.com/] bla bla bla. " rel="nofollow" target="_blank">http://google.com/] bla bla bla. </a>'</span><span class="keyword">,</span><span class="string">'[/'</span><span class="keyword">,</span><span class="string">'/]'</span><span class="keyword">));
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
results:
<br />
Array
<br />
(
<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; text to extract
<br />
&nbsp;&nbsp;&nbsp; [WEB] =&gt; Array
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; <a href="http://google.com" rel="nofollow" target="_blank">http://google.com</a>
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )
<br />

<br />
)
<br />

<br />
Can be helpfull to custom parsing :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96926""></a>
  <div class="note">
   <strong class="user">olmstead31 at yahoo dot com</strong>
   <a href="#96926" class="date">23-Mar-2010 04:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I found that whatever I was using as a test with strpos it came out false exept if $pos was == 1<br />
<br />
I figured it gives me a numeric value if found else it is null or false<br />
here is what i did to make my code work:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//EXAMPLE 1:<br />
</span><span class="default">$quiamime </span><span class="keyword">= </span><span class="string">',64,68,70,'</span><span class="keyword">;<br />
</span><span class="default">$me </span><span class="keyword">= </span><span class="string">'64'<br />
</span><span class="default">$posi </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$quiaime</span><span class="keyword">, </span><span class="string">",</span><span class="default">$me</span><span class="string">,"</span><span class="keyword">);&nbsp; </span><span class="comment">//posi is equal to 0<br />
</span><span class="keyword">if (!</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$posi</span><span class="keyword">)){<br />
&nbsp;</span><span class="comment">//code here<br />
</span><span class="keyword">}else{<br />
&nbsp; </span><span class="comment">//else code here<br />
</span><span class="keyword">}<br />
<br />
</span><span class="comment">//EXAMPLE 2:<br />
</span><span class="default">$quiamime </span><span class="keyword">= </span><span class="string">',68,70,64,'</span><span class="keyword">;<br />
</span><span class="default">$me </span><span class="keyword">= </span><span class="string">'64'<br />
</span><span class="default">$posi </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$quiaime</span><span class="keyword">, </span><span class="string">",</span><span class="default">$me</span><span class="string">,"</span><span class="keyword">);&nbsp; </span><span class="comment">//posi is equal to 6<br />
</span><span class="keyword">if (!</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$posi</span><span class="keyword">)){<br />
&nbsp;</span><span class="comment">//code here<br />
</span><span class="keyword">}else{<br />
&nbsp; </span><span class="comment">//else code here<br />
</span><span class="keyword">}<br />
<br />
</span><span class="comment">//EXAMPLE 3:<br />
</span><span class="default">$quiamime </span><span class="keyword">= </span><span class="string">',68,70,'</span><span class="keyword">;<br />
</span><span class="default">$me </span><span class="keyword">= </span><span class="string">'64'<br />
</span><span class="default">$posi </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$quiaime</span><span class="keyword">, </span><span class="string">",</span><span class="default">$me</span><span class="string">,"</span><span class="keyword">);&nbsp; </span><span class="comment">//posi is equal to NULL or FALSE<br />
</span><span class="keyword">if (!</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$posi</span><span class="keyword">)){<br />
&nbsp;</span><span class="comment">//code here<br />
</span><span class="keyword">}else{<br />
&nbsp; </span><span class="comment">//else code here<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95875""></a>
  <div class="note">
   <strong class="user">daevid at daevid dot com</strong>
   <a href="#95875" class="date">26-Jan-2010 11:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Dan Brown and I had a discussion on the PHP list about the speed difference between the popular three string searching techniques. He wrote a simple timing test, and I adapted it further. The end result is that all three are very close and not even noticeable for sets &lt; 1M. Although, technically strpos() is about twice as fast (as the docs allude to above). Here it is for your own amusement and testing purposes.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">1000000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++ )<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$o</span><span class="keyword">[] =<br />
</span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">'%04d-%02d-%02d'</span><span class="keyword">,</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0000</span><span class="keyword">,</span><span class="default">9999</span><span class="keyword">),</span><span class="default">rand</span><span class="keyword">(</span><span class="default">00</span><span class="keyword">,</span><span class="default">99</span><span class="keyword">),</span><span class="default">rand</span><span class="keyword">(</span><span class="default">00</span><span class="keyword">,</span><span class="default">99</span><span class="keyword">));<br />
</span><span class="comment">#print_r($o);<br />
</span><span class="keyword">echo </span><span class="string">"array of "</span><span class="keyword">.</span><span class="default">number_format</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">).</span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="comment">###################################################################<br />
</span><span class="default">$now </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">count</span><span class="keyword">(</span><span class="default">$o</span><span class="keyword">);</span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/^[0]{4,}\-/U'</span><span class="keyword">,</span><span class="default">$o</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//echo "Offset #".$i." matches: ".$o[$i].PHP_EOL;<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="keyword">}<br />
}<br />
</span><span class="default">$rank</span><span class="keyword">[</span><span class="string">'preg_match'</span><span class="keyword">] = (</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">) - </span><span class="default">$now</span><span class="keyword">);<br />
</span><span class="comment">###################################################################<br />
</span><span class="default">$later </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">count</span><span class="keyword">(</span><span class="default">$o</span><span class="keyword">);</span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$o</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">],</span><span class="default">0</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">) == </span><span class="string">"0000"</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//echo "Offset #".$i." matches: ".$o[$i].PHP_EOL;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
}<br />
</span><span class="default">$rank</span><span class="keyword">[</span><span class="string">'substr'</span><span class="keyword">] = (</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">) - </span><span class="default">$later</span><span class="keyword">);<br />
</span><span class="comment">###################################################################<br />
</span><span class="default">$after </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">count</span><span class="keyword">(</span><span class="default">$o</span><span class="keyword">);</span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$o</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], </span><span class="string">'0000'</span><span class="keyword">) === </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//echo "Offset #".$i." matches: ".$o[$i].PHP_EOL;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
}<br />
</span><span class="default">$rank</span><span class="keyword">[</span><span class="string">'strpos'</span><span class="keyword">] = (</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">) - </span><span class="default">$after</span><span class="keyword">);<br />
</span><span class="comment">###################################################################<br />
</span><span class="default">asort</span><span class="keyword">(</span><span class="default">$rank</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$rank</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
array of 10,000<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [strpos] =&gt; 0.00766682624817<br />
&nbsp;&nbsp;&nbsp; [substr] =&gt; 0.0116670131683<br />
&nbsp;&nbsp;&nbsp; [preg_match] =&gt; 0.0124950408936<br />
)<br />
<br />
array of 100,000<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [strpos] =&gt; 0.0817799568176<br />
&nbsp;&nbsp;&nbsp; [substr] =&gt; 0.120522975922<br />
&nbsp;&nbsp;&nbsp; [preg_match] =&gt; 0.125612974167<br />
)<br />
<br />
array of 1,000,000<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [strpos] =&gt; 0.805890083313<br />
&nbsp;&nbsp;&nbsp; [substr] =&gt; 1.19799995422<br />
&nbsp;&nbsp;&nbsp; [preg_match] =&gt; 1.25615906715<br />
)<br />
<br />
I ran out of memory with more than 1M array elements.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94469""></a>
  <div class="note">
   <strong class="user">Achintya</strong>
   <a href="#94469" class="date">06-Nov-2009 11:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A function I made to find the first occurrence of a particular needle not enclosed in quotes(single or double). Works for simple nesting (no backslashed nesting allowed).
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">strposq</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">){
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$charlen </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$flag1 </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$flag2 </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">$offset</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$len</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">) == </span><span class="string">"'"</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$flag1 </span><span class="keyword">= !</span><span class="default">$flag1 </span><span class="keyword">&amp;&amp; !</span><span class="default">$flag2 </span><span class="keyword">? </span><span class="default">true </span><span class="keyword">: </span><span class="default">false</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">) == </span><span class="string">'"'</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$flag2 </span><span class="keyword">= !</span><span class="default">$flag1 </span><span class="keyword">&amp;&amp; !</span><span class="default">$flag2 </span><span class="keyword">? </span><span class="default">true </span><span class="keyword">: </span><span class="default">false</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">$charlen</span><span class="keyword">) == </span><span class="default">$needle </span><span class="keyword">&amp;&amp; !</span><span class="default">$flag1 </span><span class="keyword">&amp;&amp; !</span><span class="default">$flag2</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$i</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;
<br />
}
<br />

<br />
echo </span><span class="default">strposq</span><span class="keyword">(</span><span class="string">"he'llo'character;\"'som\"e;crap"</span><span class="keyword">, </span><span class="string">";"</span><span class="keyword">); </span><span class="comment">//16
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93887""></a>
  <div class="note">
   <strong class="user">yasindagli at gmail dot com</strong>
   <a href="#93887" class="date">05-Oct-2009 06:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function finds postion of nth occurence of a letter starting from offset.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">nth_position</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$letter</span><span class="keyword">, </span><span class="default">$n</span><span class="keyword">, </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str_arr </span><span class="keyword">= </span><span class="default">str_split</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$letter_size </span><span class="keyword">= </span><span class="default">array_count_values</span><span class="keyword">(</span><span class="default">str_split</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">)));<br />
&nbsp;&nbsp;&nbsp; if( !isset(</span><span class="default">$letter_size</span><span class="keyword">[</span><span class="default">$letter</span><span class="keyword">])){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">'letter "' </span><span class="keyword">. </span><span class="default">$letter </span><span class="keyword">. </span><span class="string">'" does not exist in ' </span><span class="keyword">. </span><span class="default">$str </span><span class="keyword">. </span><span class="string">' after ' </span><span class="keyword">. </span><span class="default">$offset </span><span class="keyword">. </span><span class="string">'. position'</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; } else if(</span><span class="default">$letter_size</span><span class="keyword">[</span><span class="default">$letter</span><span class="keyword">] &lt; </span><span class="default">$n</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">'letter "' </span><span class="keyword">. </span><span class="default">$letter </span><span class="keyword">. </span><span class="string">'" does not exist ' </span><span class="keyword">. </span><span class="default">$n </span><span class="keyword">.</span><span class="string">' times in ' </span><span class="keyword">. </span><span class="default">$str </span><span class="keyword">. </span><span class="string">' after ' </span><span class="keyword">. </span><span class="default">$offset </span><span class="keyword">. </span><span class="string">'. position'</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">$offset</span><span class="keyword">, </span><span class="default">$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$count </span><span class="keyword">= (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$str_arr</span><span class="keyword">) - </span><span class="default">$offset</span><span class="keyword">); </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$count</span><span class="keyword">, </span><span class="default">$x </span><span class="keyword">!= </span><span class="default">$n</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$str_arr</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] == </span><span class="default">$letter</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$x</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$i </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">;<br />
}<br />
<br />
echo </span><span class="default">nth_position</span><span class="keyword">(</span><span class="string">'foobarbaz'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">); </span><span class="comment">//7<br />
</span><span class="keyword">echo </span><span class="default">nth_position</span><span class="keyword">(</span><span class="string">'foobarbaz'</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">); </span><span class="comment">//6<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93816""></a>
  <div class="note">
   <strong class="user">digitalpbk [at] gmail.com</strong>
   <a href="#93816" class="date">01-Oct-2009 05:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function raises a warning if the offset is not between 0 and the length of string:
<br />

<br />
Warning: strpos(): Offset not contained in string in %s on line %d</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92849""></a>
  <div class="note">
   <strong class="user">ah dot d at hotmail dot com</strong>
   <a href="#92849" class="date">11-Aug-2009 10:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A strpos modification to return an array of all the positions of a needle in the haystack 
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">strallpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">,</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">){
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array();
<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">$offset</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">,</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$pos </span><span class="keyword">!== </span><span class="default">FALSE</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$offset </span><span class="keyword">=&nbsp; </span><span class="default">$pos</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$offset </span><span class="keyword">&gt;= </span><span class="default">$i</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">$offset</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[] = </span><span class="default">$offset</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
example:-
<br />

<br />
<span class="default">&lt;?php
<br />
$haystack </span><span class="keyword">= </span><span class="string">"ASD is trying to get out of the ASDs cube but the other ASDs told him that his behavior will destroy the ASDs world"</span><span class="keyword">;
<br />

<br />
</span><span class="default">$needle </span><span class="keyword">= </span><span class="string">"ASD"</span><span class="keyword">;
<br />

<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">strallpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">,</span><span class="default">$needle</span><span class="keyword">));
<br />

<br />
</span><span class="comment">//getting all the positions starting from a specified position
<br />

<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">strallpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">,</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">34</span><span class="keyword">));
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89788""></a>
  <div class="note">
   <strong class="user">teddanzig at yahoo dot com</strong>
   <a href="#89788" class="date">23-Mar-2009 06:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
routine to return -1 if there is no match for strpos
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">//instr function to mimic vb instr fucntion
<br />
</span><span class="keyword">function </span><span class="default">InStr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pos</span><span class="keyword">=</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$pos </span><span class="keyword">!== </span><span class="default">false</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$pos</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; else
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return -</span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87868""></a>
  <div class="note">
   <strong class="user">jburns131 at jbwebware dot com</strong>
   <a href="#87868" class="date">28-Dec-2008 01:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The Situation:<br />
<br />
I wanted to return TRUE if strpos returned position 0, and only position 0, without the added overhead of preg_match.<br />
<br />
The Solution:<br />
<br />
As PHP treats 0 (zero) as NULL, and strpos returns the int 0 (but not NULL), I used type casting and the "===" comparison operator (as it compares types) to resolve my issue.<br />
<br />
<span class="default">&lt;?php<br />
<br />
$hayStack </span><span class="keyword">= </span><span class="string">"dbHost"</span><span class="keyword">;<br />
</span><span class="default">$needle&nbsp; </span><span class="keyword">= </span><span class="string">"db"<br />
</span><span class="default">$needlePos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$hayStack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">);<br />
<br />
if((string)</span><span class="default">$needlePos </span><span class="keyword">=== (string)</span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"db is in position zero"</span><span class="keyword">;<br />
} else {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"db is NOT in position zero"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Returns:<br />
db is in position zero<br />
<br />
<span class="default">&lt;?php<br />
<br />
$hayStack </span><span class="keyword">= </span><span class="string">"another_db_host"</span><span class="keyword">;<br />
</span><span class="default">$needle&nbsp; </span><span class="keyword">= </span><span class="string">"db"<br />
</span><span class="default">$needlePos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$hayStack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">);<br />
<br />
if((string)</span><span class="default">$needlePos </span><span class="keyword">=== (string)</span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"db is in position zero"</span><span class="keyword">;<br />
} else {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"db is NOT in position zero"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
This returns:<br />
db is in NOT position zero</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87061""></a>
  <div class="note">
   <strong class="user">Tim</strong>
   <a href="#87061" class="date">18-Nov-2008 02:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you would like to find all occurences of a needle inside a haystack you could use this function strposall($haystack,$needle);. It will return an array with all the strpos's.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">/**
<br />
&nbsp;* strposall
<br />
&nbsp;* 
<br />
&nbsp;* Find all occurrences of a needle in a haystack
<br />
&nbsp;*
<br />
&nbsp;* @param string $haystack
<br />
&nbsp;* @param string $needle
<br />
&nbsp;* @return array or false
<br />
&nbsp;*/
<br />
</span><span class="keyword">function </span><span class="default">strposall</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">,</span><span class="default">$needle</span><span class="keyword">){
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$s</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">is_integer</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">)){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">,</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_integer</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">)) { 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$aStrPos</span><span class="keyword">[] = </span><span class="default">$i</span><span class="keyword">; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">+</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">); 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; if (isset(</span><span class="default">$aStrPos</span><span class="keyword">)) { 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$aStrPos</span><span class="keyword">; 
<br />
&nbsp;&nbsp;&nbsp; } 
<br />
&nbsp;&nbsp;&nbsp; else { 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">; 
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85835""></a>
  <div class="note">
   <strong class="user">mickRacky</strong>
   <a href="#85835" class="date">19-Sep-2008 08:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
here's a php implementation of stdc++ string class find_first_of using strpos.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">find_first_of</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needlesAsString</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">)
<br />
{
<br />
&nbsp; </span><span class="default">$max </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$needlesAsString</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$index </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">)+</span><span class="default">1</span><span class="keyword">;
<br />
&nbsp; for(</span><span class="default">$ii</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$ii</span><span class="keyword">&lt;</span><span class="default">$max</span><span class="keyword">;</span><span class="default">$ii</span><span class="keyword">++){
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">,</span><span class="default">$needlesAsString</span><span class="keyword">[</span><span class="default">$ii</span><span class="keyword">], </span><span class="default">$offset</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; if( </span><span class="default">$result </span><span class="keyword">!== </span><span class="default">FALSE&nbsp; </span><span class="keyword">&amp;&amp; </span><span class="default">$result </span><span class="keyword">&lt; </span><span class="default">$index</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$index </span><span class="keyword">= </span><span class="default">$result</span><span class="keyword">;
<br />
&nbsp; }
<br />
&nbsp; return ( </span><span class="default">$index </span><span class="keyword">&gt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">)? </span><span class="default">FALSE</span><span class="keyword">: </span><span class="default">$index</span><span class="keyword">);
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Example:
<br />
<span class="default">&lt;?php
<br />
$test</span><span class="keyword">=</span><span class="string">"Ralph: One of these days, Alice!!"</span><span class="keyword">;
<br />
</span><span class="default">$look_for</span><span class="keyword">=</span><span class="string">":!,"</span><span class="keyword">;&nbsp;&nbsp; </span><span class="comment">// punctuation marks
<br />

<br />
</span><span class="default">$ss </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
while( </span><span class="default">$answer</span><span class="keyword">=</span><span class="default">find_first_of</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">,</span><span class="default">$look_for</span><span class="keyword">,</span><span class="default">$ss</span><span class="keyword">) ) {
<br />
&nbsp; echo </span><span class="default">$answer </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;
<br />
&nbsp; </span><span class="default">$ss </span><span class="keyword">= </span><span class="default">$answer</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
This prints out:
<br />
5
<br />
24
<br />
31
<br />
32</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83914""></a>
  <div class="note">
   <strong class="user">paul at thiswayupdesign dot co dot uk</strong>
   <a href="#83914" class="date">18-Jun-2008 12:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wasn't aware of the !== operator, only the === for false. I was using this code on strpos:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">while( ! (</span><span class="default">$start</span><span class="keyword">=@</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$source</span><span class="keyword">,</span><span class="default">$startTag</span><span class="keyword">,</span><span class="default">$end</span><span class="keyword">)) === </span><span class="default">false</span><span class="keyword">) {
<br />
&nbsp; </span><span class="comment">// ...
<br />
</span><span class="keyword">}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
This gave a false if the string was found at position 0, which is weird. 
<br />

<br />
However using
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">while((</span><span class="default">$start</span><span class="keyword">=@</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$source</span><span class="keyword">,</span><span class="default">$startTag</span><span class="keyword">,</span><span class="default">$end</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">) {
<br />
&nbsp; </span><span class="comment">// ...
<br />
</span><span class="keyword">}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Gives no such error and seems to work correctly</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82229""></a>
  <div class="note">
   <strong class="user">ilaymyhat-rem0ve at yahoo dot com</strong>
   <a href="#82229" class="date">02-Apr-2008 01:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This might be useful.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">class </span><span class="default">String</span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//Look for a $needle in $haystack in any position
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public static function </span><span class="default">contains</span><span class="keyword">(&amp;</span><span class="default">$haystack</span><span class="keyword">, &amp;</span><span class="default">$needle</span><span class="keyword">, &amp;</span><span class="default">$offset</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$result </span><span class="keyword">!== </span><span class="default">FALSE</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//intuitive implementation .. if not found returns -1.
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public static function </span><span class="default">strpos</span><span class="keyword">(&amp;</span><span class="default">$haystack</span><span class="keyword">, &amp;</span><span class="default">$needle</span><span class="keyword">, &amp;</span><span class="default">$offset</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$result </span><span class="keyword">=== </span><span class="default">FALSE </span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return -</span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
}</span><span class="comment">//String
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80363""></a>
  <div class="note">
   <strong class="user">Suggested re-write for pink WARNING box</strong>
   <a href="#80363" class="date">12-Jan-2008 12:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
WARNING<br />
<br />
As strpos may return either FALSE (substring absent) or 0 (substring at start of string), strict versus loose equivalency operators must be used very carefully.<br />
<br />
To know that a substring is absent, you must use:&nbsp; <br />
<br />
=== FALSE<br />
<br />
To know that a substring is present (in any position including 0), you can use either of:<br />
<br />
!== FALSE&nbsp; (recommended)<br />
&nbsp;&gt; -1&nbsp; (note: or greater than any negative number)<br />
<br />
To know that a substring is at the start of the string, you must use:&nbsp; <br />
<br />
=== 0<br />
<br />
To know that a substring is in any position other than the start, you can use any of: <br />
<br />
&nbsp;&gt; 0&nbsp; (recommended)<br />
!= 0&nbsp; (note: but not !== 0 which also equates to FALSE)<br />
!= FALSE&nbsp; (disrecommended as highly confusing)<br />
<br />
Also note that you cannot compare a value of "" to the returned value of strpos. With a loose equivalence operator (== or !=) it will return results which don't distinguish between the substring's presence versus position. With a strict equivalence operator (=== or !==) it will always return false.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75146""></a>
  <div class="note">
   <strong class="user">user at nomail dot com</strong>
   <a href="#75146" class="date">15-May-2007 11:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a bit more useful when scanning a large string for all occurances between 'tags'.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">getStrsBetween</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$s1</span><span class="keyword">,</span><span class="default">$s2</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">,</span><span class="default">$offset</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/*====================================================================<br />
&nbsp;&nbsp;&nbsp; Function to scan a string for items encapsulated within a pair of tags<br />
<br />
&nbsp;&nbsp;&nbsp; getStrsBetween(string, tag1, &lt;tag2&gt;, &lt;offset&gt;<br />
<br />
&nbsp;&nbsp;&nbsp; If no second tag is specified, then match between identical tags<br />
<br />
&nbsp;&nbsp;&nbsp; Returns an array indexed with the encapsulated text, which is in turn<br />
&nbsp;&nbsp;&nbsp; a sub-array, containing the position of each item.<br />
<br />
&nbsp;&nbsp;&nbsp; Notes:<br />
&nbsp;&nbsp;&nbsp; strpos($needle,$haystack,$offset)<br />
&nbsp;&nbsp;&nbsp; substr($string,$start,$length)<br />
<br />
&nbsp;&nbsp;&nbsp; ====================================================================*/<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if( </span><span class="default">$s2 </span><span class="keyword">=== </span><span class="default">false </span><span class="keyword">) { </span><span class="default">$s2 </span><span class="keyword">= </span><span class="default">$s1</span><span class="keyword">; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$L1 </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$s1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$L2 </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$s2</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; if( </span><span class="default">$L1</span><span class="keyword">==</span><span class="default">0 </span><span class="keyword">|| </span><span class="default">$L2</span><span class="keyword">==</span><span class="default">0 </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; do {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos1 </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$s1</span><span class="keyword">,</span><span class="default">$offset</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">$pos1 </span><span class="keyword">!== </span><span class="default">false </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos1 </span><span class="keyword">+= </span><span class="default">$L1</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos2 </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$s2</span><span class="keyword">,</span><span class="default">$pos1</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">$pos2 </span><span class="keyword">!== </span><span class="default">false </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$key_len </span><span class="keyword">= </span><span class="default">$pos2 </span><span class="keyword">- </span><span class="default">$pos1</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this_key </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$pos1</span><span class="keyword">,</span><span class="default">$key_len</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( !</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$this_key</span><span class="keyword">,</span><span class="default">$result</span><span class="keyword">) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$this_key</span><span class="keyword">] = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$this_key</span><span class="keyword">][] = </span><span class="default">$pos1</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">$pos2 </span><span class="keyword">+ </span><span class="default">$L2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos1 </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; } while(</span><span class="default">$pos1 </span><span class="keyword">!== </span><span class="default">false </span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74286""></a>
  <div class="note">
   <strong class="user">gal_chen123 at hotmail dot co dot il</strong>
   <a href="#74286" class="date">03-Apr-2007 06:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
this function returns the text between 2 strings:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">get_between </span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">, </span><span class="default">$s1</span><span class="keyword">, </span><span class="default">$s2</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$mid_url </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pos_s </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$s1</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pos_e </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$s2</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; for ( </span><span class="default">$i</span><span class="keyword">=</span><span class="default">$pos_s</span><span class="keyword">+</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$s1</span><span class="keyword">) ; ( ( </span><span class="default">$i </span><span class="keyword">&lt; (</span><span class="default">$pos_e</span><span class="keyword">)) &amp;&amp; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">) ) ; </span><span class="default">$i</span><span class="keyword">++ ) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$mid_url </span><span class="keyword">.= </span><span class="default">$text</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$mid_url</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
if $s1 or $s2 are not found, $mid_url will be empty
<br />
to add an offset, simply compare $pos_s to the offset, and only let it continue if the offset is smaller then $pos_s.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70394""></a>
  <div class="note">
   <strong class="user">spinicrus at gmail dot com</strong>
   <a href="#70394" class="date">14-Oct-2006 07:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if you want to get the position of a substring relative to a substring of your string, BUT in REVERSE way:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">strpos_reverse_way</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$charToFind</span><span class="keyword">,</span><span class="default">$relativeChar</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$relativePos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$relativeChar</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$searchPos </span><span class="keyword">= </span><span class="default">$relativePos</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$searchChar </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">while (</span><span class="default">$searchChar </span><span class="keyword">!= </span><span class="default">$charToFind</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newPos </span><span class="keyword">= </span><span class="default">$searchPos</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$searchChar </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$newPos</span><span class="keyword">,</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$charToFind</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$searchPos </span><span class="keyword">= </span><span class="default">$newPos</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (!empty(</span><span class="default">$searchChar</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$searchPos</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">TRUE</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//<br />
</span><span class="keyword">}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58688""></a>
  <div class="note">
   <strong class="user">dale at ucsc dot edu</strong>
   <a href="#58688" class="date">11-Nov-2005 11:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if you want need a fast function to find the first occurrence of any ch element of an needle array this function might be of use: <br />
<span class="default">&lt;?php<br />
$eurl </span><span class="keyword">= </span><span class="default">strpos_needle_array</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">, array(</span><span class="string">'"'</span><span class="keyword">=&gt;</span><span class="default">0</span><span class="keyword">,</span><span class="string">'\''</span><span class="keyword">=&gt;</span><span class="default">0</span><span class="keyword">,</span><span class="string">'&gt;'</span><span class="keyword">=&gt;</span><span class="default">0</span><span class="keyword">, </span><span class="string">' '</span><span class="keyword">=&gt;</span><span class="default">0</span><span class="keyword">, </span><span class="string">"\n"</span><span class="keyword">=&gt;</span><span class="default">0</span><span class="keyword">), </span><span class="default">$surl</span><span class="keyword">);<br />
<br />
function </span><span class="default">strpos_needle_array</span><span class="keyword">(&amp; </span><span class="default">$text</span><span class="keyword">, </span><span class="default">$needle_ary</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">){&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$ch_pos</span><span class="keyword">=</span><span class="default">$offset</span><span class="keyword">;</span><span class="default">$ch_pos</span><span class="keyword">&lt;</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">);</span><span class="default">$ch_pos</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(isset(</span><span class="default">$needle_ary</span><span class="keyword">[</span><span class="default">$text</span><span class="keyword">[</span><span class="default">$ch_pos</span><span class="keyword">]])){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$ch_pos</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49739""></a>
  <div class="note">
   <strong class="user">arias at elleondeoro dot com</strong>
   <a href="#49739" class="date">07-Feb-2005 03:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to get all positions in an array, you can use this function. If the optional parameter count is especified, the function will put there the number of matches.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">strallpos</span><span class="keyword">(</span><span class="default">$pajar</span><span class="keyword">, </span><span class="default">$aguja</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">, &amp;</span><span class="default">$count</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">) {
<br />
&nbsp; if (</span><span class="default">$offset </span><span class="keyword">&gt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$pajar</span><span class="keyword">)) </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">"strallpos(): Offset not contained in string."</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$match </span><span class="keyword">= array();
<br />
&nbsp; for (</span><span class="default">$count</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; ((</span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$pajar</span><span class="keyword">, </span><span class="default">$aguja</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">); </span><span class="default">$count</span><span class="keyword">++) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$match</span><span class="keyword">[] = </span><span class="default">$pos</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">$pos </span><span class="keyword">+ </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$aguja</span><span class="keyword">);
<br />
&nbsp; }
<br />
&nbsp; return </span><span class="default">$match</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="45088""></a>
  <div class="note">
   <strong class="user">philip</strong>
   <a href="#45088" class="date">26-Aug-2004 12:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Many people look for in_string which does not exist in PHP, so, here's the most efficient form of in_string() (that works in both PHP 4/5) that I can think of:
<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">in_string</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$insensitive </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$insensitive</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false </span><span class="keyword">!== </span><span class="default">stristr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false </span><span class="keyword">!== </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41762""></a>
  <div class="note">
   <strong class="user">bishop</strong>
   <a href="#41762" class="date">22-Apr-2004 12:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Code like this:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if (</span><span class="default">strpos</span><span class="keyword">(</span><span class="string">'this is a test'</span><span class="keyword">, </span><span class="string">'is'</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"found it"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
gets repetitive, is not very self-explanatory, and most people handle it incorrectly anyway. Make your life easier:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">str_contains</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$ignoreCase </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$ignoreCase</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$haystack </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$needle&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$needlePos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return (</span><span class="default">$needlePos </span><span class="keyword">=== </span><span class="default">false </span><span class="keyword">? </span><span class="default">false </span><span class="keyword">: (</span><span class="default">$needlePos</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">));<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Then, you may do:<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// simplest use<br />
</span><span class="keyword">if (</span><span class="default">str_contains</span><span class="keyword">(</span><span class="string">'this is a test'</span><span class="keyword">, </span><span class="string">'is'</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"Found it"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// when you need the position, as well whether it's present<br />
</span><span class="default">$needlePos </span><span class="keyword">= </span><span class="default">str_contains</span><span class="keyword">(</span><span class="string">'this is a test'</span><span class="keyword">, </span><span class="string">'is'</span><span class="keyword">);<br />
if (</span><span class="default">$needlePos</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'Found it at position ' </span><span class="keyword">. (</span><span class="default">$needlePos</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="comment">// you may also ignore case<br />
</span><span class="default">$needlePos </span><span class="keyword">= </span><span class="default">str_contains</span><span class="keyword">(</span><span class="string">'this is a test'</span><span class="keyword">, </span><span class="string">'IS'</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
if (</span><span class="default">$needlePos</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'Found it at position ' </span><span class="keyword">. (</span><span class="default">$needlePos</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>取得一个日期的 Unix 时间戳</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.microtime.html">? microtime</a></li>
      <li style="float: right;"><a href="function.strftime.html">strftime ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.datetime.html">Date/Time 函数</a></li>
    <li>取得一个日期的 Unix 时间戳</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.mktime" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">mktime</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7)</p><p class="refpurpose"><span class="refname">mktime</span> &mdash; <span class="dc-title">取得一个日期的 Unix 时间戳</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.mktime-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><strong>mktime</strong></span>
    ([ <span class="methodparam"><span class="type">int</span> <code class="parameter">$hour</code><span class="initializer"> = date(&quot;H&quot;)</span></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$minute</code><span class="initializer"> = date(&quot;i&quot;)</span></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$second</code><span class="initializer"> = date(&quot;s&quot;)</span></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$month</code><span class="initializer"> = date(&quot;n&quot;)</span></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$day</code><span class="initializer"> = date(&quot;j&quot;)</span></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$year</code><span class="initializer"> = date(&quot;Y&quot;)</span></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$is_dst</code><span class="initializer"> = -1</span></span>
  ]]]]]]] )</div>

  <p class="para rdfs-comment">
   根据给出的参数返回 Unix 时间戳。时间戳是一个长整数，包含了从
   Unix 纪元（January 1 1970 00:00:00 GMT）到给定时间的秒数。
  </p>
  <p class="para">
   参数可以从右向左省略，任何省略的参数会被设置成本地日期和时间的当前值。
  </p>
 </div>


  <div class="refsect1 notes" id="refsect1-function.mktime-notes">
  <h3 class="title">注释</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    As of PHP 5.1, when called with no arguments, <span class="function"><strong>mktime()</strong></span>
    throws an <strong><code>E_STRICT</code></strong> notice: use the 
    <span class="function"><a href="function.time.html" class="function">time()</a></span> function instead.
   </p>
  </p></blockquote>
 </div>

 
 <div class="refsect1 parameters" id="refsect1-function.mktime-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">hour</code></dt>

     <dd>

      <p class="para">
       小时数。
       The number of the hour relative to the start of the day determined by
       <code class="parameter">month</code>, <code class="parameter">day</code> and <code class="parameter">year</code>.
       Negative values reference the hour before midnight of the day in question.
       Values greater than 23 reference the appropriate hour in the following day(s).
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">minute</code></dt>

     <dd>

      <p class="para">
       分钟数。
       The number of the minute relative to the start of the <code class="parameter">hour</code>.
       Negative values reference the minute in the previous hour.
       Values greater than 59 reference the appropriate minute in the following hour(s).
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">second</code></dt>

     <dd>

      <p class="para">
       秒数（一分钟之内）。
       The number of seconds relative to the start of the <code class="parameter">minute</code>.
       Negative values reference the second in the previous minute.
       Values greater than 59 reference the appropriate second in the following minute(s).
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">month</code></dt>

     <dd>

      <p class="para">
       月份数。
       The number of the month relative to the end of the previous year.
       Values 1 to 12 reference the normal calendar months of the year in question.
       Values less than 1 (including negative values) reference the months in the previous year in reverse order, so 0 is December, -1 is November, etc.
       Values greater than 12 reference the appropriate month in the following year(s).
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">day</code></dt>

     <dd>

      <p class="para">
       天数。
       The number of the day relative to the end of the previous month.
       Values 1 to 28, 29, 30 or 31 (depending upon the month) reference the normal days in the relevant month.
       Values less than 1 (including negative values) reference the days in the previous month, so 0 is the last day of the previous month, -1 is the day before that, etc.
       Values greater than the number of days in the relevant month reference the appropriate day in the following month(s).
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">year</code></dt>

     <dd>

      <p class="para">
       年份数，可以是两位或四位数字，0-69 对应于 2000-2069，70-100
       对应于 1970-2000。在如今系统中普遍把 time_t 作为一个 32
       位有符号整数的情况下，<code class="parameter">year</code>
       的合法范围是 1901 到 2038 之间，不过此限制自
       PHP 5.1.0 起已被克服了。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">is_dst</code></dt>

     <dd>

      <p class="para">
       本参数可以设为 1，表示正处于夏时制时间（DST），0
       表示不是夏时制，或者 -1（默认值）表示不知道是否是夏时制。如果未知，PHP
       会尝试自己搞明白。这可能产生不可预知（但并非不正确）的结果。如果
       PHP 运行的系统中启用了 DST 或者 <code class="parameter">is_dst</code>
       设为 1，某些时间是无效的。例如 DST 自 2:00 生效，则所有处于
       2:00 到 3:00 之间的时间都无效，<span class="function"><strong>mktime()</strong></span>
       会返回一个未定义（通常为负）的值。某些系统（例如
       Solaris 8）的 DST 在午夜生效，则 DST 生效当天的 0:30
       会被计算为前一天的 23:30。
      </p>
      <blockquote class="note"><p><strong class="note">Note</strong>: 
       <p class="para">
        自 PHP 5.1.0 起，本参数已被废弃。应该使用新的时区处理特性来替代。
       </p>
      </p></blockquote>
     </dd>

    
   </dl>

  </p>
 </div>



 <div class="refsect1 returnvalues" id="refsect1-function.mktime-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   <span class="function"><strong>mktime()</strong></span> 根据给出的参数返回 Unix
   时间戳。如果参数非法，本函数返回
   <strong><code>FALSE</code></strong>（在 PHP 5.1 之前返回 <em>-1</em>）。
  </p>
 </div>

 
 <div class="refsect1 errors" id="refsect1-function.mktime-errors">
  <h3 class="title">错误／异常</h3>
  <p class="para">
在每 次调用日期/时间函数时，如果时区无效则会引发 <strong><code>E_NOTICE</code></strong> 错误，如果使用系统设定值或 <var class="varname"><var class="varname">TZ</var></var>
环境变量，则会引发 <strong><code>E_STRICT</code></strong> 或 <strong><code>E_WARNING</code></strong> 消息。参见
<span class="function"><a href="function.date-default-timezone-set.html" class="function">date_default_timezone_set()</a></span>。</p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.mktime-changelog">
  <h3 class="title">更新日志</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>版本</th>
       <th>说明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.3.0</td>
       <td>
        <span class="function"><strong>mktime()</strong></span> now throws <strong><code>E_DEPRECATED</code></strong> notice 
        if the <code class="parameter">is_dst</code> parameter is used.
       </td>
      </tr>

      <tr>
       <td>5.1.0</td>
       <td>
        <code class="parameter">is_dst</code> 参数被废弃。出错时函数返回
        <strong><code>FALSE</code></strong> 而不再是 <em>-1</em>。修正了本函数可以接受年月日参数全为零。
       </td>
      </tr>

      <tr>
       <td>5.1.0</td>
       <td>
        When called with no arguments, <span class="function"><strong>mktime()</strong></span> throws 
        <strong><code>E_STRICT</code></strong> notice. Use the 
        <span class="function"><a href="function.time.html" class="function">time()</a></span> function instead.
       </td>
      </tr>

            <tr><td>5.1.0</td><td><p class="para">
现在发布 <strong><code>E_STRICT</code></strong> 和 <strong><code>E_NOTICE</code></strong>
时区错误。</p></td></tr>

      
     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.mktime-examples">
  <h3 class="title">范例</h3>
    <p class="para">
   <div class="example" id="example-2455">
<p><strong>Example #1 基本例子 </strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Set&nbsp;the&nbsp;default&nbsp;timezone&nbsp;to&nbsp;use.&nbsp;Available&nbsp;as&nbsp;of&nbsp;PHP&nbsp;5.1<br /></span><span style="color: #0000BB">date_default_timezone_set</span><span style="color: #007700">(</span><span style="color: #DD0000">'UTC'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Prints:&nbsp;July&nbsp;1,&nbsp;2000&nbsp;is&nbsp;on&nbsp;a&nbsp;Saturday<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"July&nbsp;1,&nbsp;2000&nbsp;is&nbsp;on&nbsp;a&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">"l"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">mktime</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">7</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2000</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">//&nbsp;Prints&nbsp;something&nbsp;like:&nbsp;2006-04-05T01:02:03+00:00<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">'c'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">mktime</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2006</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-2456">
    <p><strong>Example #2 <span class="function"><strong>mktime()</strong></span> 例子</strong></p>
    <div class="example-contents"><p>
     <span class="function"><strong>mktime()</strong></span>
     在做日期计算和验证方面很有用，它会自动计算超出范围的输入的正确值。例如下面例子中每一行都会产生字符串
     &quot;Jan-01-1998&quot;。
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">"M-d-Y"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">mktime</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">12</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">32</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1997</span><span style="color: #007700">));<br />echo&nbsp;</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">"M-d-Y"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">mktime</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">13</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1997</span><span style="color: #007700">));<br />echo&nbsp;</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">"M-d-Y"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">mktime</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1998</span><span style="color: #007700">));<br />echo&nbsp;</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">"M-d-Y"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">mktime</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">98</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-2457">
    <p><strong>Example #3 下个月的最后一天</strong></p>
    <div class="example-contents"><p>
     任何给定月份的最后一天都可以被表示为下个月的第 &quot;0&quot;
     天，而不是 -1 天。下面两个例子都会产生字符串
     &quot;The last day in Feb 2000 is: 29&quot;。
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$lastday&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mktime</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2000</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">strftime</span><span style="color: #007700">(</span><span style="color: #DD0000">"Last&nbsp;day&nbsp;in&nbsp;Feb&nbsp;2000&nbsp;is:&nbsp;%d"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$lastday</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$lastday&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mktime</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">31</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2000</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">strftime</span><span style="color: #007700">(</span><span style="color: #DD0000">"Last&nbsp;day&nbsp;in&nbsp;Feb&nbsp;2000&nbsp;is:&nbsp;%d"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$lastday</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.mktime-notes">
  <h3 class="title">注释</h3>
  <div class="caution"><strong class="caution">Caution</strong>
   <p class="para">
    在 PHP 5.1.0 之前，在任何已知 Windows
    版本以及一些其它系统下不支持负的时间戳。因此年份的有效范围限制为
    1970 到 2038。
   </p>
  </div>
 </div>


  <div class="refsect1 seealso" id="refsect1-function.mktime-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.checkdate.html" class="function" rel="rdfs-seeAlso">checkdate()</a> - 验证一个格里高里日期</span></li>
    <li class="member"><span class="function"><a href="function.gmmktime.html" class="function" rel="rdfs-seeAlso">gmmktime()</a> - 取得 GMT 日期的 UNIX 时间戳</span></li>
    <li class="member"><span class="function"><a href="function.date.html" class="function" rel="rdfs-seeAlso">date()</a> - 格式化一个本地时间／日期</span></li> 
    <li class="member"><span class="function"><a href="function.time.html" class="function" rel="rdfs-seeAlso">time()</a> - 返回当前的 Unix 时间戳</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="119247""></a>
  <div class="note">
   <strong class="user">phper</strong>
   <a href="#119247" class="date">26-Apr-2016 11:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please mind function is timezone dependent. Timezone independent funciton is gmmktime</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119040""></a>
  <div class="note">
   <strong class="user">mktime_php at mailinator dot com</strong>
   <a href="#119040" class="date">22-Mar-2016 09:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
One practical and useful example of using negative values in mktime is the following:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//Considering today's date<br />
</span><span class="keyword">echo </span><span class="default">date</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">); </span><span class="comment">//Prints: 2016-03-22<br />
</span><span class="keyword">echo </span><span class="default">date</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">date</span><span class="keyword">(</span><span class="string">"m"</span><span class="keyword">), </span><span class="default">date</span><span class="keyword">(</span><span class="string">"d"</span><span class="keyword">)-</span><span class="default">42</span><span class="keyword">, </span><span class="default">date</span><span class="keyword">(</span><span class="string">"Y"</span><span class="keyword">))); </span><span class="comment">//Prints: 2016-02-09<br />
</span><span class="default">?&gt;<br />
</span><br />
By using date outputs inside mktime and adding or subtracting from them may be simpler than using other methods (string concatenations or timestamp values) and less prone to human calculations' errors.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116949""></a>
  <div class="note">
   <strong class="user">mh240873 at web dot de</strong>
   <a href="#116949" class="date">26-Mar-2015 09:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Pay attention that not all days have the same number of seconds (86400s) if you are using date_default_timezone_set(..) and the used timezone has Daylight Saving Time (DST) e.g. "Europe/Berlin". Under PHP 5.5.16 I get the following results:<br />
<br />
&nbsp; $shortday&nbsp; = mktime(23,59,59, '3','29','2015') - mktime(0,0,0, '3','29','2015) + 1; // result: 82800s&nbsp; (86400s - 3600s)<br />
&nbsp; $normalDay = mktime(23,59,59, '1', '2','2015') - mktime(0,0,0, '1', '1','2015) + 1; // result: 86400s&nbsp; <br />
&nbsp; $longDay&nbsp;&nbsp; = mktime(23,59,59,'10','25','2015') - mktime(0,0,0,'10','25','2015) + 1; // result: 90000s&nbsp; (86400s + 3600s)<br />
<br />
Pitfall is noticeable if you are running an iterative loop with a code like:<br />
&nbsp;&nbsp; echo date( 'd.m.Y', $day );<br />
&nbsp;&nbsp; $day = $day + 86400;&nbsp;&nbsp; // 86400 = 24*3600 - frequently used in PHP code<br />
<br />
which results in wrong date if $day reaches 2015-10-25 (end of summer time in Germany):<br />
&nbsp;&nbsp;&nbsp; 24.10.2015<br />
&nbsp;&nbsp;&nbsp; 25.10.2015&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; 25.10.2015&nbsp;&nbsp; // Ups! Same date twice in calendar<br />
&nbsp;&nbsp;&nbsp; 27.10.2015<br />
<br />
You may workaround this by using date_default_timezone_set('UTC') where all days have the same number of seconds.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114706""></a>
  <div class="note">
   <strong class="user">Rad</strong>
   <a href="#114706" class="date">27-Mar-2014 02:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be careful passing zeros into mktime, in most cases a zero will count as the previous unit of time. The documentation explains this yet most of the comments here still use zeroes.<br />
<br />
For example, if you pass the year 2013 into mktime, with zeroes for everything else, the outcome is probably not what you are looking for.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">echo </span><span class="default">date</span><span class="keyword">(</span><span class="string">'F jS, Y g:i:s a'</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">2013</span><span class="keyword">)); <br />
</span><span class="comment">// November 30th, 2012 12:00:00 am<br />
</span><span class="default">?&gt;<br />
</span><br />
Instead of using 0's, try 1's. This makes more sense (except for minutes/seconds). Maybe not as obvious of a purpose as zeroes to other programmers, though.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">echo </span><span class="default">date</span><span class="keyword">(</span><span class="string">'F jS, Y g:i:s a'</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">2013</span><span class="keyword">));<br />
</span><span class="comment">// January 1st, 2013 1:01:01 am<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114639""></a>
  <div class="note">
   <strong class="user">mogster at redesign dot no</strong>
   <a href="#114639" class="date">15-Mar-2014 09:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just a simple function to return mktime from a db (mysql) datetime (Y-m-d H:i:s):<br />
<br />
function retMktimest($dbdate) {<br />
&nbsp; return mktime(substr($dbdate, 11, 2), substr($dbdate, 14, 2), substr($dbdate, 17, 2), substr($dbdate, 5, 2), substr($dbdate, 8, 2), substr($dbdate, 0, 4));<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114552""></a>
  <div class="note">
   <strong class="user">delfino dot salinas at gmail dot com</strong>
   <a href="#114552" class="date">06-Mar-2014 05:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
this function returns the number of days of a provided month and year, it consider the actual rules for leap years <br />
<br />
(if the year is multiple of 4 which is not a multiple of 100 unless multiple of thousand then is a leap)<br />
Regards, hope this function solves any issue :)<br />
<br />
function daysinmonth($month,$year) {<br />
$dim = 0;<br />
switch ($month) {<br />
&nbsp;&nbsp;&nbsp; case 1:<br />
&nbsp;&nbsp;&nbsp; case 3:<br />
&nbsp;&nbsp;&nbsp; case 5:<br />
&nbsp;&nbsp;&nbsp; case 7:<br />
&nbsp;&nbsp;&nbsp; case 8:<br />
&nbsp;&nbsp;&nbsp; case 10:<br />
&nbsp;&nbsp;&nbsp; case 12:<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $dim=31;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp;&nbsp; case 4:<br />
&nbsp;&nbsp;&nbsp; case 6:<br />
&nbsp;&nbsp;&nbsp; case 9:<br />
&nbsp;&nbsp;&nbsp; case 11:<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $dim=30;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp;&nbsp; case 2:<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if($year%4==0) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if($year%100==0) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if($year%1000==0) { $dim=29; } else { $dim=28; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $dim=29;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {$dim=28;}<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return($dim); <br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113120""></a>
  <div class="note">
   <strong class="user">info at djdb dot be</strong>
   <a href="#113120" class="date">02-Sep-2013 09:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
raw date to clean timestamp<br />
&nbsp;private function dateToTimestamp($date){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $datefrom = explode(" ", $date);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $value = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(strpos($datefrom[0], '-')){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //print "issplit -";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $value = explode("-", $datefrom[0]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(strpos($datefrom[0], '/')){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //print "issplit /";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $value = explode("/", $datefrom[0]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; /*if(){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }*/<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(strlen($value[2])==4){//13/12/2012<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //int mktime([hour[minute[second[month[day[year<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return mktime(0, 0, 0,$value[1],$value[0],$value[2]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }else{&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //2012/12/13<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //int mktime([hour[minute[second[month[day[year<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return mktime(0, 0, 0,$value[1],$value[2],$value[0]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110586""></a>
  <div class="note">
   <strong class="user">Jacob Santos</strong>
   <a href="#110586" class="date">10-Nov-2012 01:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please note that incrementing a date using mktime in a loop is not proper. You could do it, except that there is a far better method found in the DateTime PHP class. Look at the documentation for DateTime::modify, DateTime::add (when supported) and DateTime::sub (when supported).<br />
<br />
Also, adding seconds to a time is, well it isn't as easy as it seems, "Hey I'll just add 3600 seconds or 86400 seconds or x seconds!". The phrase once bitten, twice shy is quite applicable with the usage of adding seconds. If you ever had to 'fix' a time by calculating midnight to add the correct number of seconds, then you are doing it wrong. <br />
<br />
Luckily, knowing is not a requirement, because DateTime and friends exists, removing the complexity for you.<br />
<br />
So if given a choice of<br />
<br />
mktime($seconds, $minutes, $hours+1);<br />
<br />
and<br />
<br />
$datetime-&gt;modify('+1 hour');<br />
<br />
or<br />
<br />
$datetime-&gt;add('P1H');<br />
<br />
I'll go with the second choice, but probably not the third, unless I was using DateInterval::createFromDateString, so that other developers knew my intent.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100733""></a>
  <div class="note">
   <strong class="user">info at microweb dot lt</strong>
   <a href="#100733" class="date">03-Nov-2010 04:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Function to generate array of dates between two dates (date range array)
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">dates_range</span><span class="keyword">(</span><span class="default">$date1</span><span class="keyword">, </span><span class="default">$date2</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp; if (</span><span class="default">$date1</span><span class="keyword">&lt;</span><span class="default">$date2</span><span class="keyword">)
<br />
&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$dates_range</span><span class="keyword">[]=</span><span class="default">$date1</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$date1</span><span class="keyword">=</span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$date1</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$date2</span><span class="keyword">=</span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$date2</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; while (</span><span class="default">$date1</span><span class="keyword">!=</span><span class="default">$date2</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$date1</span><span class="keyword">=</span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">date</span><span class="keyword">(</span><span class="string">"m"</span><span class="keyword">, </span><span class="default">$date1</span><span class="keyword">), </span><span class="default">date</span><span class="keyword">(</span><span class="string">"d"</span><span class="keyword">, </span><span class="default">$date1</span><span class="keyword">)+</span><span class="default">1</span><span class="keyword">, </span><span class="default">date</span><span class="keyword">(</span><span class="string">"Y"</span><span class="keyword">, </span><span class="default">$date1</span><span class="keyword">));
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$dates_range</span><span class="keyword">[]=</span><span class="default">date</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">, </span><span class="default">$date1</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; }
<br />
&nbsp;&nbsp; }
<br />
&nbsp;&nbsp; return </span><span class="default">$dates_range</span><span class="keyword">;
<br />
}
<br />

<br />
echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">dates_range</span><span class="keyword">(</span><span class="string">'2009-12-25'</span><span class="keyword">, </span><span class="string">'2010-01-05'</span><span class="keyword">));
<br />
echo </span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
[EDIT BY danbrown AT php DOT net: Contains a bugfix submitted by (carlosbuz2 AT gmail DOT com) on 04-MAR-2011, with the following note: The first date in array is incorrect.]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99707""></a>
  <div class="note">
   <strong class="user">tom at chegg dot com</strong>
   <a href="#99707" class="date">31-Aug-2010 11:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was using the following to get a list of month names.<br />
<br />
for ($i=1; $i&lt;13; $i++) {<br />
&nbsp; echo date('F', mktime(0,0,0,$i) . ",";<br />
}<br />
<br />
Normally this outputs -<br />
January,February,March,April,May,June,July,August,<br />
September,October,November,December<br />
<br />
However if today's date is the 31st you get instead:<br />
January,March,March,May,May,July,July,August,October,<br />
October,December,December<br />
<br />
Why? Because Feb,Apr,June,Sept, and Nov don't have 31 days!<br />
<br />
The fix, add the 5th parameter, don't let the day of month default to today's date:<br />
<br />
&nbsp; echo date('F', mktime(0,0,0,$i,1) . ",";</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96801""></a>
  <div class="note">
   <strong class="user">zfowler at unomaha dot edu</strong>
   <a href="#96801" class="date">16-Mar-2010 11:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Proper way to convert Excel dates into PHP-friendly timestamps using mktime():
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">// The date 6/30/2009 is stored as 39994 in Excel
<br />
</span><span class="default">$days </span><span class="keyword">= </span><span class="default">39994</span><span class="keyword">;
<br />

<br />
</span><span class="comment">// But you must subtract 1 to get the correct timestamp
<br />
</span><span class="default">$ts </span><span class="keyword">= </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="default">$days</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">,</span><span class="default">1900</span><span class="keyword">);
<br />

<br />
</span><span class="comment">// So, this would then match Excel's representation:
<br />
</span><span class="keyword">echo </span><span class="default">date</span><span class="keyword">(</span><span class="string">"m/d/Y"</span><span class="keyword">,</span><span class="default">$ts</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Excel uses "number of days since Jan. 1, 1900" to store its dates.&nbsp; It also treats 1900 as a leap year when it wasn't, thus there is an extra day which must be accounted for in PHP (and the rest of the world).&nbsp; Subtracting 1 from Excel's number will fix this problem.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93409""></a>
  <div class="note">
   <strong class="user">cebleo at n-trance dot net</strong>
   <a href="#93409" class="date">08-Sep-2009 08:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
to ADD or SUBSTRACT times NOTE that if you dont specify the UTC zone your result is the difference +- your server UTC delay.
<br />

<br />
if you are ina utc/GMT +1
<br />

<br />
<span class="default">&lt;?php
<br />
$hours_diff </span><span class="keyword">= </span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">"20:00:00"</span><span class="keyword">)-</span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">"19:00:00"</span><span class="keyword">);
<br />
echo&nbsp; </span><span class="default">date</span><span class="keyword">(</span><span class="string">'h:i'</span><span class="keyword">, </span><span class="default">$hours_diff</span><span class="keyword">).</span><span class="string">" Hours"</span><span class="keyword">;
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
it shows: 02:00 Hours
<br />

<br />
but if you use a default UTC time:
<br />

<br />
<span class="default">&lt;?php
<br />
date_default_timezone_set</span><span class="keyword">(</span><span class="string">'UTC'</span><span class="keyword">);
<br />
</span><span class="default">$hours_diff </span><span class="keyword">= </span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">"20:00:00"</span><span class="keyword">)-</span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">"19:00:00"</span><span class="keyword">);
<br />
echo </span><span class="string">"&lt;br&gt;"</span><span class="keyword">. </span><span class="default">date</span><span class="keyword">(</span><span class="string">'h:i'</span><span class="keyword">, </span><span class="default">$hours_diff</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
it shows: 01:00 Hours.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88236""></a>
  <div class="note">
   <strong class="user">ronnie dot kurniawan at gmail dot com</strong>
   <a href="#88236" class="date">16-Jan-2009 06:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Add (and subtract) unixtime:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">utime_add</span><span class="keyword">(</span><span class="default">$unixtime</span><span class="keyword">, </span><span class="default">$hr</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">, </span><span class="default">$min</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">, </span><span class="default">$sec</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">, </span><span class="default">$mon</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">, </span><span class="default">$day</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">, </span><span class="default">$yr</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">) {
<br />
&nbsp; </span><span class="default">$dt </span><span class="keyword">= </span><span class="default">localtime</span><span class="keyword">(</span><span class="default">$unixtime</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$unixnewtime </span><span class="keyword">= </span><span class="default">mktime</span><span class="keyword">(
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$dt</span><span class="keyword">[</span><span class="string">'tm_hour'</span><span class="keyword">]+</span><span class="default">$hr</span><span class="keyword">, </span><span class="default">$dt</span><span class="keyword">[</span><span class="string">'tm_min'</span><span class="keyword">]+</span><span class="default">$min</span><span class="keyword">, </span><span class="default">$dt</span><span class="keyword">[</span><span class="string">'tm_sec'</span><span class="keyword">]+</span><span class="default">$sec</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$dt</span><span class="keyword">[</span><span class="string">'tm_mon'</span><span class="keyword">]+</span><span class="default">1</span><span class="keyword">+</span><span class="default">$mon</span><span class="keyword">, </span><span class="default">$dt</span><span class="keyword">[</span><span class="string">'tm_mday'</span><span class="keyword">]+</span><span class="default">$day</span><span class="keyword">, </span><span class="default">$dt</span><span class="keyword">[</span><span class="string">'tm_year'</span><span class="keyword">]+</span><span class="default">1900</span><span class="keyword">+</span><span class="default">$yr</span><span class="keyword">);
<br />
&nbsp; return </span><span class="default">$unixnewtime</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87071""></a>
  <div class="note">
   <strong class="user">Alan</strong>
   <a href="#87071" class="date">18-Nov-2008 04:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Do remember that, counter-intuitively enough, the arguments for month and day are inversed (or middle-endian). A common mistake for Europeans seems to be to feed the date arguments in the expected order (big endian or little endian).<br />
<br />
It's clear to see where this weird order comes from (even with the date being big endian the order for all arguments would still be mixed - it's obviously based on the American date format with the time "prefixed" to allow an easier shorthand) and why this wasn't changed (passing the values in the wrong order produces a valid, though unexpected, result in most cases), but it continues to be a source of confusion for me whenever I come back to PHP from other languages or libraries.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86916""></a>
  <div class="note">
   <strong class="user">yan</strong>
   <a href="#86916" class="date">10-Nov-2008 02:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
caculate days between two date<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="comment">// end date is 2008 Oct. 11 00:00:00<br />
&nbsp; </span><span class="default">$_endDate </span><span class="keyword">= </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">11</span><span class="keyword">,</span><span class="default">10</span><span class="keyword">,</span><span class="default">2008</span><span class="keyword">);<br />
&nbsp; </span><span class="comment">// begin date is 2007 May 31 13:26:26<br />
&nbsp; </span><span class="default">$_beginDate </span><span class="keyword">= </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">13</span><span class="keyword">,</span><span class="default">26</span><span class="keyword">,</span><span class="default">26</span><span class="keyword">,</span><span class="default">05</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">2007</span><span class="keyword">);<br />
<br />
&nbsp; </span><span class="default">$timestamp_diff</span><span class="keyword">= </span><span class="default">$_endDate</span><span class="keyword">-</span><span class="default">$_beginDate </span><span class="keyword">+</span><span class="default">1 </span><span class="keyword">;<br />
&nbsp; </span><span class="comment">// how many days between those two date<br />
&nbsp; </span><span class="default">$days_diff </span><span class="keyword">= </span><span class="default">$timestamp_diff</span><span class="keyword">/</span><span class="default">86400</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86086""></a>
  <div class="note">
   <strong class="user">ionut dot bodea at eydos dot ro</strong>
   <a href="#86086" class="date">02-Oct-2008 05:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is what I use to calculate age. It took me 30 minutes to write and it's quite accurate. What it has special is that it's calculating the number of days a year has (float number), by testing if a year is a leap one or not. This number is used to compute the age.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">get_age</span><span class="keyword">(</span><span class="default">$date_start</span><span class="keyword">, </span><span class="default">$date_end</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$t_lived </span><span class="keyword">= </span><span class="default">get_timestamp</span><span class="keyword">(</span><span class="default">$date_end</span><span class="keyword">) - </span><span class="default">get_timestamp</span><span class="keyword">(</span><span class="default">$date_start</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$seconds_one_year </span><span class="keyword">= </span><span class="default">get_days_per_year</span><span class="keyword">(</span><span class="default">$date_start</span><span class="keyword">, </span><span class="default">$date_end</span><span class="keyword">) * </span><span class="default">24 </span><span class="keyword">* </span><span class="default">60 </span><span class="keyword">* </span><span class="default">60</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$age </span><span class="keyword">= array();
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$age</span><span class="keyword">[</span><span class="string">'years_exact'</span><span class="keyword">] = </span><span class="default">$t_lived </span><span class="keyword">/ </span><span class="default">$seconds_one_year</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$age</span><span class="keyword">[</span><span class="string">'years'</span><span class="keyword">] = </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$t_lived </span><span class="keyword">/ </span><span class="default">$seconds_one_year</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$seconds_remaining </span><span class="keyword">= </span><span class="default">$t_lived </span><span class="keyword">% </span><span class="default">$seconds_one_year</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$age</span><span class="keyword">[</span><span class="string">'days'</span><span class="keyword">] = </span><span class="default">round</span><span class="keyword">(</span><span class="default">$seconds_remaining </span><span class="keyword">/ (</span><span class="default">24 </span><span class="keyword">* </span><span class="default">60 </span><span class="keyword">* </span><span class="default">60</span><span class="keyword">));
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$age</span><span class="keyword">;
<br />
}
<br />
function </span><span class="default">get_timestamp</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; list(</span><span class="default">$y</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">, </span><span class="default">$d</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'-'</span><span class="keyword">, </span><span class="default">$date</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">, </span><span class="default">$d</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">);
<br />
}
<br />
function </span><span class="default">get_days_per_year</span><span class="keyword">(</span><span class="default">$date_start</span><span class="keyword">, </span><span class="default">$date_end</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; list(</span><span class="default">$y1</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'-'</span><span class="keyword">, </span><span class="default">$date_start</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; list(</span><span class="default">$y2</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'-'</span><span class="keyword">, </span><span class="default">$date_end</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$years_days </span><span class="keyword">= array();
<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$y </span><span class="keyword">= </span><span class="default">$y1</span><span class="keyword">; </span><span class="default">$y </span><span class="keyword">&lt;= </span><span class="default">$y2</span><span class="keyword">; </span><span class="default">$y</span><span class="keyword">++) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$years_days</span><span class="keyword">[] = </span><span class="default">date</span><span class="keyword">(</span><span class="string">'L'</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">)) ? </span><span class="default">366 </span><span class="keyword">: </span><span class="default">365</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">round</span><span class="keyword">(</span><span class="default">array_sum</span><span class="keyword">(</span><span class="default">$years_days</span><span class="keyword">) / </span><span class="default">count</span><span class="keyword">(</span><span class="default">$years_days</span><span class="keyword">), </span><span class="default">2</span><span class="keyword">);
<br />
}
<br />

<br />
</span><span class="default">$date_birth </span><span class="keyword">= </span><span class="string">'1979-10-12'</span><span class="keyword">;
<br />
</span><span class="default">$date_now </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">);
<br />

<br />
</span><span class="default">$age </span><span class="keyword">= </span><span class="default">get_age</span><span class="keyword">(</span><span class="default">$date_birth</span><span class="keyword">, </span><span class="default">$date_now</span><span class="keyword">);
<br />
echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$age</span><span class="keyword">);
<br />
echo </span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />

<br />
It will display something like this:
<br />
Array
<br />
(
<br />
&nbsp;&nbsp;&nbsp; [years_exact] =&gt; 28.972974329491
<br />
&nbsp;&nbsp;&nbsp; [years] =&gt; 28
<br />
&nbsp;&nbsp;&nbsp; [days] =&gt; 355
<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85478""></a>
  <div class="note">
   <strong class="user">ooogla at hotmail dot com</strong>
   <a href="#85478" class="date">02-Sep-2008 12:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to increment the day based on a variable when using a loop you can use this when you submit a form<br />
<br />
1. Establish a start date and end date in two different variables<br />
<br />
2. Get the number of days between a date<br />
<br />
$ndays = (strtotime($_POST['edate']) - strtotime($_POST['sdate'])) / (60 * 60 * 24);<br />
<br />
Then here is the string you slip in your loop<br />
<br />
$nextday&nbsp; = date('Y-m-d', mktime(0, 0, 0, date("m", strtotime($_POST['sdate']))&nbsp; , date("d", strtotime($_POST['sdate']))+ $count, date("Y", strtotime($_POST['sdate']))));<br />
<br />
$count is incremented by the loop.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83160""></a>
  <div class="note">
   <strong class="user">thomas_corthals at hotmail dot com</strong>
   <a href="#83160" class="date">13-May-2008 04:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It seems mktime() doesn't return negative timestamps on Linux systems with a version of glibc &lt;= 2.3.3.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80759""></a>
  <div class="note">
   <strong class="user">joseph dot andrew dot hughes at gmail dot com</strong>
   <a href="#80759" class="date">30-Jan-2008 09:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just a small thing to think about if you are only trying to pull the month out using mktime and date.&nbsp; Make sure you place a 1 into day field.&nbsp; Otherwise you will get incorrect dates when a month is followed by a month with less days when the day of the current month is higher then the max day of the month you are trying to find.. (Such as today being Jan 30th and trying to find the month Feb.)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77639""></a>
  <div class="note">
   <strong class="user">PHPcoder at freemail dot ig3 dot net</strong>
   <a href="#77639" class="date">06-Sep-2007 07:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The maximum possible date accepted by mktime() and gmmktime() is dependent on the current location time zone.<br />
<br />
For example, the 32-bit timestamp overflow occurs at 2038-01-19T03:14:08+0000Z.&nbsp; But if you're in a UTC -0500 time zone (such as EST in North America), the maximum accepted time before overflow (for older PHP versions on Windows) is 2038-01-18T22:14:07-0500Z, regardless of whether you're passing it to mktime() or gmmktime().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76460""></a>
  <div class="note">
   <strong class="user">rlz</strong>
   <a href="#76460" class="date">17-Jul-2007 06:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Finding out the number of days in a given month and year, accounting for leap years when February has more than 28 days.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">days_in_month</span><span class="keyword">(</span><span class="default">$year</span><span class="keyword">, </span><span class="default">$month</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; return( </span><span class="default">date</span><span class="keyword">( </span><span class="string">"t"</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">( </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$month</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">$year</span><span class="keyword">) ) );
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Hope it helps a soul out there.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74241""></a>
  <div class="note">
   <strong class="user">rga at merchantpal dot com</strong>
   <a href="#74241" class="date">31-Mar-2007 05:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You cannot simply subtract or add month VARs using mktime to obtain previous or next months as suggested in previous user comments (at least not with a DD &gt; 28 anyway).<br />
<br />
If the date is 03-31-2007, the following yeilds March as a previous month. Not what you wanted.<br />
<br />
<span class="default">&lt;?php<br />
$dateMinusOneMonth </span><span class="keyword">= </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, (</span><span class="default">3</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">), </span><span class="default">31</span><span class="keyword">,&nbsp; </span><span class="default">2007 </span><span class="keyword">);<br />
</span><span class="default">$lastmonth </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">"n | F"</span><span class="keyword">, </span><span class="default">$dateMinusOneMonth</span><span class="keyword">);<br />
echo </span><span class="default">$lastmonth</span><span class="keyword">;&nbsp; &nbsp; </span><span class="comment">//---&gt; 3 | March<br />
</span><span class="default">?&gt;<br />
</span><br />
mktime correctly gives you back the 3rd of March if you subtract 1 month from March 31 (there are only 28 days in Feb 07).<br />
<br />
If you are just looking to do month and year arithmetic using mktime, you can use general days like 1 or 28 to do stuff like this:<br />
<br />
<span class="default">&lt;?php<br />
$d_daysinmonth </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'t'</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$myMonth</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="default">$myYear</span><span class="keyword">));&nbsp; &nbsp;&nbsp; </span><span class="comment">// how many days in month<br />
</span><span class="default">$d_year </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'Y'</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$myMonth</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="default">$myYear</span><span class="keyword">));&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// year<br />
</span><span class="default">$d_isleapyear </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'L'</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$myMonth</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="default">$myYear</span><span class="keyword">));&nbsp; &nbsp; </span><span class="comment">// is YYYY a leapyear?<br />
<br />
</span><span class="default">$d_firstdow </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'w'</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$myMonth</span><span class="keyword">,</span><span class="string">'1'</span><span class="keyword">,</span><span class="default">$myYear</span><span class="keyword">));&nbsp; &nbsp;&nbsp; </span><span class="comment">// FIRST falls on what day of week (0-6)<br />
</span><span class="default">$d_firstname </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'l'</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$myMonth</span><span class="keyword">,</span><span class="string">'1'</span><span class="keyword">,</span><span class="default">$myYear</span><span class="keyword">));&nbsp; &nbsp;&nbsp; </span><span class="comment">// FIRST falls on what day of week Full Name<br />
<br />
</span><span class="default">$d_month </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'n'</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$myMonth</span><span class="keyword">,</span><span class="default">28</span><span class="keyword">,</span><span class="default">$myYear</span><span class="keyword">));&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// month of year (1-12)<br />
</span><span class="default">$d_monthname </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'F'</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$myMonth</span><span class="keyword">,</span><span class="default">28</span><span class="keyword">,</span><span class="default">$myYear</span><span class="keyword">));&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Month Long name (July)<br />
</span><span class="default">$d_month_previous </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'n'</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,(</span><span class="default">$myMonth</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">),</span><span class="default">28</span><span class="keyword">,</span><span class="default">$myYear</span><span class="keyword">));&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// PREVIOUS month of year (1-12)<br />
</span><span class="default">$d_monthname_previous </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'F'</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,(</span><span class="default">$myMonth</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">),</span><span class="default">28</span><span class="keyword">,</span><span class="default">$myYear</span><span class="keyword">));&nbsp; &nbsp;&nbsp; </span><span class="comment">// PREVIOUS Month Long name (July)<br />
</span><span class="default">$d_month_next </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'n'</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,(</span><span class="default">$myMonth</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">),</span><span class="default">28</span><span class="keyword">,</span><span class="default">$myYear</span><span class="keyword">));&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// NEXT month of year (1-12)<br />
</span><span class="default">$d_monthname_next </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'F'</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,(</span><span class="default">$myMonth</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">),</span><span class="default">28</span><span class="keyword">,</span><span class="default">$myYear</span><span class="keyword">));&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// NEXT Month Long name (July)<br />
</span><span class="default">$d_year_previous </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'Y'</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$myMonth</span><span class="keyword">,</span><span class="default">28</span><span class="keyword">,(</span><span class="default">$myYear</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">)));&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// PREVIOUS year<br />
</span><span class="default">$d_year_next </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'Y'</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$myMonth</span><span class="keyword">,</span><span class="default">28</span><span class="keyword">,(</span><span class="default">$myYear</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">)));&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// NEXT year<br />
<br />
</span><span class="default">$d_weeksleft </span><span class="keyword">= (</span><span class="default">52 </span><span class="keyword">- </span><span class="default">$d_weekofyear</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// how many weeks left in year<br />
</span><span class="default">$d_daysinyear </span><span class="keyword">= </span><span class="default">$d_isleapyear </span><span class="keyword">? </span><span class="default">366 </span><span class="keyword">: </span><span class="default">365</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// set correct days in year for leap years<br />
</span><span class="default">$d_daysleft </span><span class="keyword">= (</span><span class="default">$d_daysinyear </span><span class="keyword">- </span><span class="default">$d_dayofyear</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// how many days left in year<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72218""></a>
  <div class="note">
   <strong class="user">Stephen</strong>
   <a href="#72218" class="date">08-Jan-2007 11:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There are several warnings here about using mktime() to determine a date difference because of daylight savings time. However, nobody seems to have mentioned the other obvious problem, which is leap years.
<br />

<br />
Leap years mean that any effort to use mktime() and time() to determine the age (positive or negative) of some timestamp in years will be flawed. There are some years that are 366 days long, therefore you cannot say that there is a set number of seconds per year.
<br />

<br />
Timestamps are good for determining *real* time, which is not the same thing as *human calendar* time. The Gregorian calendar is only an approximation of real time, which is tweaked with daylight savings time and leap years to make it conform more to humans' expectations of how time should or ought to work. Timestamps are not tweaked and therefore are the only authoritative way of recording in computers a proper order of succession of events, but they cannot be integrated with a Gregorian system unless you take both leap years and DST into account. Otherwise, you may get the wrong number of years when you are approaching a value of exactly X years.
<br />

<br />
As for PHP, you could still use timestamps as a way of determining age if you took into account not only DST but also whether or not each year is a leap year and adjusted your calculations accordingly. However, this could become messy and inefficient. 
<br />

<br />
There is an alternative approach to calculating days given the day, month and year of the dates to be compared. Compare the years first, and then compare the month and day - if the month and day have already passed (or, if you like, if they match the current month and day), then add 1 to the total for the years. 
<br />

<br />
This solution works because it stays within the Gregorian system and doesn't venture into the world of timestamps.
<br />

<br />
There is also the issue of leap seconds, but this will only arise if you literally need to get the *exact* age in seconds. In that case, of course, you would also need to verify that your timestamps are exactly correct and are not delayed by script processing time, plus you would need to determine whether your system conforms to UTC, etc. I expect this will hardly be an issue for anybody using PHP, however if you are interested there is an article on this issue on Wikipedia:
<br />

<br />
<a href="http://en.wikipedia.org/wiki/Leap_second" rel="nofollow" target="_blank">http://en.wikipedia.org/wiki/Leap_second</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

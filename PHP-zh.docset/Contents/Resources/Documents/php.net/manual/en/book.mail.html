<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Mail</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.imap-utf8.html">? imap_utf8</a></li>
      <li style="float: right;"><a href="intro.mail.html">简介 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="refs.remote.mail.html">邮件相关扩展</a></li>
    <li>Mail</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="book.mail" class="book">
 
 <h1 class="title">Mail</h1>
 
 
 
 
 
 









 









 




 



<ul class="chunklist chunklist_book"><li><a href="intro.mail.html">简介</a></li><li><a href="mail.setup.html">安装／配置</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="mail.requirements.html">需求</a></li><li><a href="mail.installation.html">安装</a></li><li><a href="mail.configuration.html">运行时配置</a></li><li><a href="mail.resources.html">资源类型</a></li></ul></li><li><a href="mail.constants.html">预定义常量</a></li><li><a href="ref.mail.html">Mail 函数</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="function.ezmlm-hash.html">ezmlm_hash</a> &mdash; 计算 EZMLM 所需的散列值</li><li><a href="function.mail.html">mail</a> &mdash; 发送邮件</li></ul></li></ul></div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="101769""></a>
  <div class="note">
   <strong class="user">Carlos</strong>
   <a href="#101769" class="date">10-Jan-2011 04:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you use the function utf8_decode() for the subject variable you can receive text messages readables in utf-8.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92738""></a>
  <div class="note">
   <strong class="user">pouletfou at gmail dot com</strong>
   <a href="#92738" class="date">06-Aug-2009 07:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I use this script to test webapps using mail with this little php script saved as /usr/sbin/sendmail : <br />
<br />
#!/usr/bin/php<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//====================================================<br />
&nbsp;&nbsp;&nbsp; // Program : Fake send mail<br />
&nbsp;&nbsp;&nbsp; // Author : pouletfou at gmail<br />
&nbsp;&nbsp;&nbsp; // Description : save this file as /usr/sbin/sendmail<br />
&nbsp;&nbsp;&nbsp; //&nbsp; and you can test your PHP applications using mail<br />
&nbsp;&nbsp;&nbsp; //&nbsp; by looking at the /tmp/fakesendmail.log files.<br />
&nbsp;&nbsp;&nbsp; //====================================================<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">define</span><span class="keyword">(</span><span class="string">'LOGFILE'</span><span class="keyword">,</span><span class="string">'/tmp/fakesendmail.log'</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$log </span><span class="keyword">= </span><span class="default">fopen </span><span class="keyword">(</span><span class="default">LOGFILE</span><span class="keyword">,</span><span class="string">'a+'</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$log</span><span class="keyword">,</span><span class="string">"\n"</span><span class="keyword">.</span><span class="default">implode</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">,</span><span class="default">$argv</span><span class="keyword">).<br />
&nbsp;&nbsp; &nbsp; </span><span class="string">" called on : "</span><span class="keyword">.</span><span class="default">date</span><span class="keyword">(</span><span class="string">'Y-m-d H:i:s'</span><span class="keyword">).</span><span class="string">"\n"</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$log</span><span class="keyword">,</span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="string">"php://stdin"</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$log</span><span class="keyword">,<br />
</span><span class="string">"\n===========================================================\n"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$log</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90306""></a>
  <div class="note">
   <strong class="user">Ashlin</strong>
   <a href="#90306" class="date">15-Apr-2009 07:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
2 points have to be set :
<br />

<br />
<span class="default">&lt;?php
<br />
ini_set</span><span class="keyword">(</span><span class="string">"SMTP"</span><span class="keyword">,</span><span class="string">"smtp.example.com" </span><span class="keyword">);
<br />
</span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">'sendmail_from'</span><span class="keyword">, </span><span class="string">'user@example.com'</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
or set them in the php.ini file
<br />

<br />
By doing this, i have fixed definetly this problem :-)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86841""></a>
  <div class="note">
   <strong class="user">burkestar at gmail dot com</strong>
   <a href="#86841" class="date">06-Nov-2008 07:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The workaround mentioned above only works with IIS 5 assuming you've configured the Virtual SMTP Server to accept relays.&nbsp; <br />
<br />
In IIS console, right-click SMTP Virtual Server and choose "Properties". On "Access" tab, click "Relay..." button and make sure "All except the list below" is selected. <br />
<br />
Warning: This is just a quick fix which exposes a security risk because allowing your SMTP server to be a relay with anonymous access could make your computer susceptible to becoming a spam zombie.&nbsp; You should properly add your computer's IP address to the list and choose "Only the list below" instead to lock it down.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85467""></a>
  <div class="note">
   <strong class="user">Some guy</strong>
   <a href="#85467" class="date">01-Sep-2008 02:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Under windows there is a bug in php/mail<br />
<br />
See here: <a href="http://bugs.php.net/bug.php?id=28038" rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=28038</a><br />
<br />
this results in you being unable to send 'From: Full Name &lt;me@domain.com&gt;'<br />
<br />
Workaround is:<br />
<br />
Set the following before calling the mail function:<br />
<br />
ini_set('sendmail_from', 'me@domain.com);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85271""></a>
  <div class="note">
   <strong class="user">dev at realynospamspcweb dot nl</strong>
   <a href="#85271" class="date">22-Aug-2008 11:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
@Crusiatus Black
<br />
23-May-2008 05:00 
<br />

<br />
Code below works without errors
<br />
<span class="default">&lt;?php
<br />

<br />
$Name </span><span class="keyword">= </span><span class="string">"Da Duder"</span><span class="keyword">; </span><span class="comment">//senders name
<br />
</span><span class="default">$email </span><span class="keyword">= </span><span class="string">"email@adress.com"</span><span class="keyword">; </span><span class="comment">//senders e-mail adress
<br />
</span><span class="default">$recipient </span><span class="keyword">= </span><span class="string">"PersonWhoGetsIt@emailadress.com"</span><span class="keyword">; </span><span class="comment">//recipient
<br />
</span><span class="default">$mail_body </span><span class="keyword">= </span><span class="string">"The text for the mail..."</span><span class="keyword">; </span><span class="comment">//mail body
<br />
</span><span class="default">$subject </span><span class="keyword">= </span><span class="string">"Subject for reviever"</span><span class="keyword">; </span><span class="comment">//subject
<br />
</span><span class="default">$header </span><span class="keyword">= </span><span class="string">"From: "</span><span class="keyword">. </span><span class="default">$Name </span><span class="keyword">. </span><span class="string">" &lt;" </span><span class="keyword">. </span><span class="default">$email </span><span class="keyword">. </span><span class="string">"&gt;\r\n"</span><span class="keyword">; </span><span class="comment">//optional headerfields
<br />

<br />
</span><span class="default">mail</span><span class="keyword">(</span><span class="default">$recipient</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$mail_body</span><span class="keyword">, </span><span class="default">$header</span><span class="keyword">); </span><span class="comment">//mail command :)
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

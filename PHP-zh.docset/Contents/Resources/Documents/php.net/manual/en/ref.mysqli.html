<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>别名和过时的Mysqli 函数</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="class.mysqli-sql-exception.html">? mysqli_sql_exception</a></li>
      <li style="float: right;"><a href="function.mysqli-bind-param.html">mysqli_bind_param ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="book.mysqli.html">Mysqli</a></li>
    <li>别名和过时的Mysqli 函数</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="ref.mysqli" class="reference">
 <h1 class="title">别名和过时的Mysqli 函数</h1>

 









































































































































<h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="function.mysqli-bind-param.html">mysqli_bind_param</a> &mdash; mysqli_stmt_bind_param的别名</li><li><a href="function.mysqli-bind-result.html">mysqli_bind_result</a> &mdash; mysqli_stmt_bind_result的别名</li><li><a href="function.mysqli-client-encoding.html">mysqli_client_encoding</a> &mdash; mysqli_character_set_name的别名</li><li><a href="function.mysqli-connect.html">mysqli_connect</a> &mdash; 别名 mysqli::__construct</li><li><a href="function.mysqli-disable-reads-from-master.html">mysqli::disable_reads_from_master</a> &mdash; Disable reads from master</li><li><a href="function.mysqli-disable-rpl-parse.html">mysqli_disable_rpl_parse</a> &mdash; 禁用RPL解析</li><li><a href="function.mysqli-enable-reads-from-master.html">mysqli_enable_reads_from_master</a> &mdash; 开启从主机读取</li><li><a href="function.mysqli-enable-rpl-parse.html">mysqli_enable_rpl_parse</a> &mdash; 开启RPL解析</li><li><a href="function.mysqli-escape-string.html">mysqli_escape_string</a> &mdash; 别名 mysqli_real_escape_string</li><li><a href="function.mysqli-execute.html">mysqli_execute</a> &mdash; mysqli_stmt_execute的别名</li><li><a href="function.mysqli-fetch.html">mysqli_fetch</a> &mdash; mysqli_stmt_fetch的别名。</li><li><a href="mysqli.get-cache-stats.html">mysqli_get_cache_stats</a> &mdash; 返回客户端Zval缓存统计信息</li><li><a href="function.mysqli-get-links-stats.html">mysqli_get_links_stats</a> &mdash; 返回打开和缓存的链接相关信息</li><li><a href="function.mysqli-get-metadata.html">mysqli_get_metadata</a> &mdash; mysqli_stmt_result_metadata的别名</li><li><a href="function.mysqli-master-query.html">mysqli_master_query</a> &mdash; 在主/从机制中强制在主机中执行一个查询</li><li><a href="function.mysqli-param-count.html">mysqli_param_count</a> &mdash; mysqli_stmt_param_count的别名</li><li><a href="function.mysqli-report.html">mysqli_report</a> &mdash; 开启或禁用（Mysql）内部（错误）报告函数</li><li><a href="function.mysqli-rpl-parse-enabled.html">mysqli_rpl_parse_enabled</a> &mdash; 检查是否开启了RPL解析</li><li><a href="function.mysqli-rpl-probe.html">mysqli_rpl_probe</a> &mdash; RPL探测</li><li><a href="function.mysqli-send-long-data.html">mysqli_send_long_data</a> &mdash; mysqli_stmt_send_long_data的别名</li><li><a href="function.mysqli-set-opt.html">mysqli_set_opt</a> &mdash; mysqli_options的别名</li><li><a href="function.mysqli-slave-query.html">mysqli_slave_query</a> &mdash; 在主/从机制中强制在从机上执行一个查询</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="115611""></a>
  <div class="note">
   <strong class="user">nulled elitscripts2000 at yahoo dot com</strong>
   <a href="#115611" class="date">26-Aug-2014 10:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need to install mysqli extension there is no need to recompile PHP5 pr PHP5-fpm... <br />
<br />
apt-get install php5-mysqlnd<br />
<br />
Will install mysql and mysqli and mysqlnd<br />
<br />
If you compile PHP from source then yes add the -use-mysqli in compile config.<br />
<br />
This is Debian and Ubuntu.&nbsp; Or at least Ubuntu.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82365""></a>
  <div class="note">
   <strong class="user">Daniel Sowden</strong>
   <a href="#82365" class="date">08-Apr-2008 12:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had a problem compiling PHP 5.2.5 with mysqli enabled on Mac OS X. Whether this problem was unique to me I do not no, so I am posting this for anybody else that runs into the same problem. Configure would run right to the end, but I had it telling me something had failed and that it was likely messed up. Upon checking debug.log I noticed this:<br />
<br />
dyld: Library not loaded: /usr/local/mysql/lib/mysql/libmysqlclient.15.dylib<br />
Referenced from: /Users/daniel/desktop/php -5.2.5/sapi/cli/php<br />
Reason: image not found<br />
/bin/sh: line 1: /Users/daniel/desktop/php -5.2.5/tmp-php.ini: Permission denied<br />
dyld: Library not loaded: /usr/local/mysql/lib/mysql/libmysqlclient.15.dylib<br />
Referenced from: /Users/daniel/desktop/php -5.2.5/sapi/cli/php<br />
Reason: image not found<br />
make: [test] Error 133 (ignored)<br />
<br />
After screwing around for an hour and screaming many profanities at my computer I looked back at the error and noticed:<br />
<br />
"/usr/local/mysql/lib/&lt;b&gt;mysql/&lt;/b&gt;libmysqlclient.15.dylib<br />
<br />
Why it was using this path I do not know, but I headslapped when I realised how simple it was! I solved the problem by creating a link called mysql that linked back on itself:<br />
<br />
cd /usr/local/mysql/lib<br />
sudo ln -s ./ mysql<br />
<br />
Problem solved! I probably should have figured out why it was doing this instead, but this was easier and saved me from allot more frustration.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79090""></a>
  <div class="note">
   <strong class="user">swong</strong>
   <a href="#79090" class="date">10-Nov-2007 04:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to extend mysqli and establish an connection with SSL authentication, the followings may be useful.<br />
(note: not all php-mysqli supports mysqli_ssl_set())<br />
<br />
class DataAccess extends mysqli<br />
{<br />
&nbsp;&nbsp;&nbsp; function __construct(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $hostname, $username, $passwd=null, $dbname=null,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $port=null, $socket=null, $flags=null,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $privatekey=null, $certificate=null, $caCertificate=null)<br />
&nbsp;&nbsp; &nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $link = parent::init();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($privatekey!=null &amp;&amp; $certificate!=null &amp;&amp; $caCertificate!=null)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $link-&gt;ssl_set($privatekey, $certificate, $caCertificate,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dirname($caCertificate),NULL);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; parent::__construct($hostname, $username,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $passwd, $dbname, $port, $socket);<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; .....<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78225""></a>
  <div class="note">
   <strong class="user">marcus at synchromedia dot co dot uk</strong>
   <a href="#78225" class="date">03-Oct-2007 06:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those having trouble getting MySQLi to work, there is another way that is set to become much more common:<br />
<br />
<a href="http://dev.mysql.com/downloads/connector/php-mysqlnd/" rel="nofollow" target="_blank">http://dev.mysql.com/downloads/connector/php-mysqlnd/</a><br />
<br />
This is the new MySQL native driver which has been backported from PHP6 and replaces MySQLi with a version that doesn't require any local MySQL client libraries or binaries.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76156""></a>
  <div class="note">
   <strong class="user">smurf at smurf dot noris dot de</strong>
   <a href="#76156" class="date">03-Jul-2007 02:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Yay. No more persistent connections. I am NOT happy about that.<br />
<br />
As soon as you get more than 250 requests per second (ever been slashdotted?) there will not be any more free TCP ports for talking to the database server, because each TCP port will be kept in TIME_WAIT for two minutes and there are only 30000 ports in the local range.<br />
<br />
And that's not the only problem. There's also more than twice the packet rate on the network link to the database. Frankly I'd like my CPUs to spend their cycles on something producive. :-/</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69933""></a>
  <div class="note">
   <strong class="user">dan+php dot net-note-about-mysqli at obluda dot cz</strong>
   <a href="#69933" class="date">27-Sep-2006 11:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hints for upgrading PHP code from MySQL to MySQLi:<br />
<br />
Note - MySQLi doesn't support persistent connection. If you need it, you must implement it by self. This case is not covered in this note.<br />
<br />
First - change all occurences of MYSQL_ to MYSQLI_ and mysql_ to mysqli_<br />
<br />
Most of changes is required because mysqli* functions has no implicit link argument, so it need to be added explicitly if not present already. Even if it is present, most mysqli_ functions require 'link' argument as first (and mandatory) argument instead of last (and optional) as required by mysql_ functions. So, we need to change order of arguments at least.<br />
<br />
So, you need to found names of all mysql_ functions used in your code, check if it need reoder of parameters or add the link parameter. Only *_connect() functions need review, but most scripts contain only few connect call.<br />
<br />
If you use functions deprecated in mysql, then may not be impemented in mysqli. Those need to be reimplemented if required. In most case, it's very simple. In advance, PHP script written by carefull programer should not contain deprecated calls, so it's not problem in most cases at all.<br />
<br />
Most of scripts I ported from mysql_ to mysqli_ can be converted by simple sed script followed by *_connect() function call review only. Especially when when programmer doesn't used the link as implicit argument and doesn't use deprecated functions the conversion of PHP source is trivial task and converted script work with no problem.<br />
<br />
Special handling of some functions:<br />
<br />
mysql_connect(),mysql_pconnect()<br />
-----------------------------------------<br />
Call with 3 or less parameters need not to be modified.<br />
4-parameters call - delete 4th parameter as mysqli is always non-persistent<br />
5-parameters - replace it by sequence of mysqli_init();mysqli_options();mysqli_real_connect()<br />
<br />
mysql_create_db(), mysql_drop_db(), mysql_list_dbs(), mysql_db_name(),mysql_list_fields(), mysql_list_processes(), mysql_list_tables(), mysql_db_query(),mysql_table_name()<br />
------------------------------------------<br />
mysqli variant doesn't exist (those functions has been deprecated even in mysql_) but it's easy to reimplement each of it. Use apropropriate SQL command followed by standard loop for processing query results where applicable. If no connection to server yet you need to use explicit mysqli_connect call.<br />
<br />
mysql_result()<br />
-----------------<br />
mysqli variant doesn't exist. Use one of mysqli_fetch_* variant (depending of type of mysql_result() third argument)<br />
<br />
mysql_unbuffered_query()<br />
-----------------<br />
mysqli variant doesn't exist. Use mysqli_real_query()</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="67971""></a>
  <div class="note">
   <strong class="user">chris &lt;at&gt; gerlt.net</strong>
   <a href="#67971" class="date">07-Jul-2006 08:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For installing mysqli extension after PHP is installed on a Linux ubuntu ( or other linux distro with apt-get such as debian, etc...):<br />
<br />
# apt-get install php5-mysqli<br />
<br />
NOTE: after install, you need to reboot apache<br />
# apache2ctl graceful</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="67538""></a>
  <div class="note">
   <strong class="user">Docey</strong>
   <a href="#67538" class="date">08-Jun-2006 08:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It should be noticed that mysqli does not support persistent<br />
connections, so do not bother about implementing them<br />
unless you got a million hits an hour on your website.<br />
<br />
also about using both mysql and mysqli, i want to note <br />
that under windows the best approach is to load either <br />
mysql or mysqli at runtime not both. <br />
<br />
i know that under php5 this is deprecated but it seems <br />
to work fine. i used the same appoach under debian-linux<br />
and seems to work aswell. just don't know for the <br />
speed cost. maybe someone can benchmark this out.<br />
<br />
just my 2 eurocents.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="62794""></a>
  <div class="note">
   <strong class="user">kronicade@yahoo</strong>
   <a href="#62794" class="date">09-Mar-2006 08:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Same problem, no solution.&nbsp; I'm running Solaris sparc with mysql 4.1.12.&nbsp; I've tried every config command I can think of and have modified my PATH as follows:<br />
<br />
setenv PATH /usr/ccs/bin:<br />
/usr/local/bin:<br />
/usr/local/ipw/bin:<br />
/usr/local/ipw/contrib/bin:<br />
/sbin:/usr/sbin:<br />
/usr/bin:<br />
/usr/bin/X11:<br />
/usr/ucb:<br />
/usr/openwin/bin<br />
<br />
./configure '--prefix=/usr/local/php' '--localstatedir=/usr/local'&nbsp; '--mandir=/usr/share/man' '--with-mysqli=/usr/local/mysql/bin/mysql_config' '--includedir=/usr/lib' '--enable-shared=max'&nbsp; '--enable-module=most'&nbsp; '--with-imap=/usr/local/imap'&nbsp; '--with-imap-ssl=/usr/local/ssl'&nbsp; '--with-apxs2=/usr/local/apache2/bin/apxs'&nbsp; '--enable-fastcgi'&nbsp; '--enable-mbstring=all'&nbsp; '--with-zlib-dir=/usr'&nbsp; '--with-openssl=/usr/local/ssl'<br />
<br />
I think it's a compatibility issue with the version of mysql running 64-bit.<br />
<br />
-Andrew</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60654""></a>
  <div class="note">
   <strong class="user">Michael &lt;mstclaire at myprintflow dot com&gt;</strong>
   <a href="#60654" class="date">13-Jan-2006 04:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was running into some random issues using the myqli extension with MySQL 5 on Mac OS X. <br />
<br />
I discovered that when I compiled php 5 with the --with-mysqli flag, it was building php with the pre-installed MySQL 4 client libraries.<br />
<br />
Heres how it fixed it to build php with the correct MySQL client libraries.<br />
<br />
----------------<br />
I had installed the binary version of MySQL 5 from MySQL AB. It installs everything in the default location /usr/local/mysql, which is fine. The MySQL version that comes with OS X ( v.4.x, depends on your OS X version ) installs the mysql_config help utility at /usr/bin/mysql_config. When php configs, it uses that one by default, inheritently using the wrong MySQL client libs.<br />
<br />
No problem I thought, I just changed the --with-mysqli flag to --with-mysqli=/usr/local/mysql/bin/mysql_config ( or sudo find / -name mysql_config to find yours ). Nope, php throws a build error because it can't find the matching libraries. Hmmm...<br />
<br />
So i tested /usr/local/mysql/bin/mysql_config --version, and I am shown my most current MySQL install. The problem is that the binary editions for OS X DO NOT include the shared libs ( libmysqlclient.dylib ). Oh no, I did not want to compile MySQL myself, not because I don't know how, but because MySQL AB does not recommend it, and for good reasons. Trust me, I've found out the hard way.<br />
<br />
So what do you do? Download the source version of MySQL 5 that matches my binary version. <br />
<br />
Configure MySQL:<br />
<br />
./configure --enable-shared ( it's listed as ON as default, but I want to be sure )<br />
<br />
Build MySQL:<br />
<br />
make ( requires Developer Tools, but you knew that )<br />
<br />
DO NOT make install !!! I repeat, DO NOT make install unless you really wish to overwrite your binary verions, which is not a good idea. ( You can configure MySQL with the --without-server flag, but I want to be certain I don't mess up )<br />
<br />
Ok, almost done. Go to the lib directory in your MySQL build location and go to the invisible directory, .libs . There you will find your shared libraries, namely libmysqlclient.15.0.0.dylib.<br />
<br />
Copy this to your /usr/local/mysql/lib directory. Now do the following from the lib directory:<br />
<br />
ln -s libmysqlclient.15.0.0.dylib libmysqlclient.15.dylib <br />
ln -s libmysqlclient.15.0.0.dylib libmysqlclient.dylib <br />
mkdir mysql<br />
cd mysql<br />
ln -s ../libmysqlclient.15.0.0.dylib libmysqlclient.15.0.0.dylib <br />
ln -s ../libmysqlclient.15.0.0.dylib libmysqlclient.15.dylib <br />
ln -s ../libmysqlclient.15.0.0.dylib libmysqlclient.dylib <br />
<br />
Now you can build your php with the correct library. After you build, check your phpinfo(); to validate the client version under the mysqli section. When I restarted Apache, it originally couldn't find my libraries, thus the /usr/local/mysql/lib/mysql directory.<br />
<br />
Hope this helped.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55490""></a>
  <div class="note">
   <strong class="user">arjen at mysql dot com</strong>
   <a href="#55490" class="date">04-Aug-2005 10:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
John Coggeshall wrote a PHP5 ext/mysqli compatibility script for applications that still use the old ext/mysql functions. This prevents the hassle of trying to have both the mysql and mysqli extensions loaded in PHP5, which can be tricky.
<br />

<br />
The script is at:
<br />
<a href="http://www.coggeshall.org/oss/mysql2i/" rel="nofollow" target="_blank">http://www.coggeshall.org/oss/mysql2i/</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50240""></a>
  <div class="note">
   <strong class="user">Andrei Nazarenko</strong>
   <a href="#50240" class="date">22-Feb-2005 08:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are having trouble compiling PHP5 with MySQLi support on Linux and getting a message:<br />
"configure: error: wrong mysql library version or lib not found" <br />
and the config.log shows an error about -lnss_files being not found, here is the solution:<br />
<br />
edit your mysql_config file and *REMOVE* all&nbsp; "-lnss_files" AND "-lnss_dns" entries from it.<br />
After that PHP should not complain anymore.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49871""></a>
  <div class="note">
   <strong class="user">neil</strong>
   <a href="#49871" class="date">10-Feb-2005 11:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have spent far too much time finding this answer:<br />
<br />
Since PHP5 many many people are having installation problems.&nbsp; I found many apps were broken when I upgraded to version 5.&nbsp; I tried to install mysql and mysqli and had problems.<br />
<br />
Here's the solution:<br />
<br />
After doing:<br />
<br />
&nbsp;./configure --with-mysql=/path/to/mysql_config --with-mysqli=/path/to/mysql_config<br />
<br />
do this:<br />
<br />
"<br />
&nbsp;&nbsp;&nbsp; if you want to use both the old mysql and the new mysqli interface, load the Makefile into your editor and search for the line beginning with EXTRA_LIBS; it includes -lmysqlclient twice; remove the second instance<br />
"<br />
<br />
then you can:<br />
<br />
make<br />
make install<br />
<br />
......<br />
Please note:&nbsp; the mysql-dev must be installed or you won't have a mysql_config anywhere.&nbsp; I installed the mysql-dev rpm<br />
<br />
Further note:&nbsp; the information about the Makefile's duplicate instances of "-libmysqlclient" came from Michael Kofler.&nbsp; Thanks should be directed to him.&nbsp; He gives more details at the following link:<br />
<br />
<a href="http://www.kofler.cc/forum/forumthread.php?rootID=3571" rel="nofollow" target="_blank">http://www.kofler.cc/forum/forumthread.php?rootID=3571</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49610""></a>
  <div class="note">
   <strong class="user">php at arwin dot net</strong>
   <a href="#49610" class="date">03-Feb-2005 12:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those having trouble compiling with both --with-mysql AND --with-mysqli, I found a solution at this URL:<br />
<br />
<a href="http://bugs.php.net/bug.php?id=29860&amp;edit=1" rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=29860&amp;edit=1</a><br />
<br />
rjanson at msn dot com writes:<br />
<br />
OK, finally an answer!<br />
<br />
I checked Makefile and found the following line:<br />
<br />
EXTRA_LIBS = -lcrypt -lcrypt -lmysqlclient -lpng -lz -lz -lresolv -lm<br />
-ldl -lnsl -lxml2 -<br />
lz -lm -lxml2 -lz -lm -lmysqlclient -lcrypt -lnsl -lm -lz -lnss_files<br />
-lnss_dns -lresolv -lnss_files<br />
&nbsp;-lnss_dns -lresolv -lxml2 -lz -lm -lcrypt -lxml2 -lz -lm -lcrypt <br />
<br />
By removing one of the -lmysqlclient entries on this line I was able to<br />
successfully make and make install with both mysql and mysqli. As<br />
confirmed by phpInfo().<br />
<br />
I'm not sure why the other libs have multiple entries and don't cause<br />
make to crash.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="47298""></a>
  <div class="note">
   <strong class="user">Yair Lapin</strong>
   <a href="#47298" class="date">10-Nov-2004 04:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I successed to install php support for a mysql 4.1.7 database after several attempts because the instructions are not clear.<br />
I have a server with linux SuSe 9 enterprise with apache 1.3.31. I installed mysql from rpm files, i installed php 4.3.9 as dynamic library. this version database needs its own client library else the mysql functions in php will not work.<br />
configuration must be as following:<br />
<br />
./configure --with-msqli=/usr/bin/mysql_config --with-mysql=/usr&nbsp; --with-apxs=/usr/local/apache/bin/apxs<br />
<br />
&nbsp;Must be installed in your machine the correct mysql librery:<br />
<br />
MySQL-devel-4.1.7-0<br />
MySQL-shared-4.1.7-0</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="45639""></a>
  <div class="note">
   <strong class="user">nathansquires at pacbell dot net</strong>
   <a href="#45639" class="date">13-Sep-2004 07:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to build php with both the Mysql and mysqli extensions, make sure your mysql distribution comes with shared libraries or build mysql yourself with shared libraries. With only static mysql libraries the compile process will fail.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="44684""></a>
  <div class="note">
   <strong class="user">severin dot kacianka at aon dot at</strong>
   <a href="#44684" class="date">13-Aug-2004 12:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I tryed Marco Kaiser's way of getting both mysql_* and mysqli_*, but it failed for me. However I could get it working this way: <br />
First of all I installed the MySQL 4.1.3 binary disribution acourding to the manual. Then I simply passed these ./configure arguments: <br />
<br />
--with-mysql=/path/to/mysql4.1.3<br />
--with-mysqli=/path/to/mysql4.1.3/bin/mysql_config<br />
<br />
This enabled both, the mysql_* and mysqli_* functions. <br />
<br />
Severin Kacianka</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="43333""></a>
  <div class="note">
   <strong class="user">philip</strong>
   <a href="#43333" class="date">18-Jun-2004 12:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A couple tutorials on the subject of mysqli:<br />
* <a href="http://www.zend.com/php5/articles/php5-mysqli.php" rel="nofollow" target="_blank">http://www.zend.com/php5/articles/php5-mysqli.php</a><br />
* <a href="http://www.zend.com/php5/articles/php5-mysqli2.php" rel="nofollow" target="_blank">http://www.zend.com/php5/articles/php5-mysqli2.php</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41384""></a>
  <div class="note">
   <strong class="user">phoeniks[at]nm[dot]ru</strong>
   <a href="#41384" class="date">08-Apr-2004 12:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a little sample to do fast hierarchical queries using new prepared statements
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">// Root - lowest start element
<br />
// Top&nbsp; - most top element
<br />
// stack - array for storing info
<br />

<br />
</span><span class="keyword">function </span><span class="default">tree_rise</span><span class="keyword">(</span><span class="default">$root</span><span class="keyword">, &amp;</span><span class="default">$stack</span><span class="keyword">, </span><span class="default">$top </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">) {
<br />
&nbsp; </span><span class="default">$mysqli </span><span class="keyword">= </span><span class="default">mysqli_connect</span><span class="keyword">(</span><span class="string">'localhost'</span><span class="keyword">, </span><span class="string">'root'</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$top&nbsp; </span><span class="keyword">= (int)</span><span class="default">$top</span><span class="keyword">;
<br />
&nbsp; </span><span class="default">$stmt </span><span class="keyword">= </span><span class="default">mysqli_prepare</span><span class="keyword">(</span><span class="default">$mysqli</span><span class="keyword">, </span><span class="string">"SELECT id, pid, title FROM news.strg WHERE id = ? LIMIT 1"</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">mysqli_stmt_bind_param</span><span class="keyword">(</span><span class="default">$stmt</span><span class="keyword">, </span><span class="string">"i"</span><span class="keyword">, </span><span class="default">$root</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">mysqli_stmt_execute</span><span class="keyword">(</span><span class="default">$stmt</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">mysqli_stmt_store_result</span><span class="keyword">(</span><span class="default">$stmt</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">mysqli_bind_result</span><span class="keyword">(</span><span class="default">$stmt</span><span class="keyword">, </span><span class="default">$id</span><span class="keyword">, </span><span class="default">$root</span><span class="keyword">, </span><span class="default">$title</span><span class="keyword">);
<br />

<br />
&nbsp; while (</span><span class="default">mysqli_fetch</span><span class="keyword">(</span><span class="default">$stmt</span><span class="keyword">)) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$stack</span><span class="keyword">[</span><span class="default">$id</span><span class="keyword">] = </span><span class="default">$title</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$root </span><span class="keyword">!= </span><span class="default">$top </span><span class="keyword">&amp;&amp; !</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$root</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">mysqli_stmt_execute</span><span class="keyword">(</span><span class="default">$stmt</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">mysqli_stmt_store_result</span><span class="keyword">(</span><span class="default">$stmt</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp; }
<br />
&nbsp; return </span><span class="default">count</span><span class="keyword">(</span><span class="default">$stack</span><span class="keyword">);
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

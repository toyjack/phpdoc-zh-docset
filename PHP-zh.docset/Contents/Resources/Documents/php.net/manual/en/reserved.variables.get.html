<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>HTTP GET 变量</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="reserved.variables.server.html">? $_SERVER</a></li>
      <li style="float: right;"><a href="reserved.variables.post.html">$_POST ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="reserved.variables.html">预定义变量</a></li>
    <li>HTTP GET 变量</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="reserved.variables.get" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">$_GET</h1>
  <h1 class="refname">$HTTP_GET_VARS [已弃用]</h1>
  <p class="refpurpose"><span class="refname">$_GET</span> -- <span class="refname">$HTTP_GET_VARS [已弃用]</span> &mdash; <span class="dc-title">HTTP GET 变量</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-reserved.variables.get-description">
  <h3 class="title">说明</h3>
  <p class="para">
  通过 URL 参数传递给当前脚本的变量的数组。
  </p>

  <p class="simpara">
   <var class="varname"><var class="varname">$HTTP_GET_VARS</var></var> 包含相同的信息， 但它不是一个<a href="language.variables.superglobals.html" class="link">超全局变量</a>。
   (注意 <var class="varname"><var class="varname">$HTTP_GET_VARS</var></var> 和 <var class="varname"><var class="varname">$_GET</var></var> 是不同的变量，PHP 处理它们的方式不同)
  </p>

 </div>

 

 <div class="refsect1 changelog" id="refsect1-reserved.variables.get-changelog">
  <h3 class="title">更新日志</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>版本</th>
       <th>说明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>4.1.0</td>
       <td>
        引入 <var class="varname"><var class="varname">$_GET</var></var>，弃用 <var class="varname"><var class="varname">$HTTP_GET_VARS</var></var>。
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>

 
 <div class="refsect1 examples" id="refsect1-reserved.variables.get-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="variable.get.basic">
    <p><strong>Example #1 <var class="varname"><var class="varname">$_GET</var></var> 范例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Hello&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">htmlspecialchars</span><span style="color: #007700">(</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">"name"</span><span style="color: #007700">])&nbsp;.&nbsp;</span><span style="color: #DD0000">'!'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     假设用户访问的是 http://example.com/?name=Hannes
    </p></div>
    <div class="example-contents"><p>以上例程的输出类似于：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Hello Hannes!
</pre></div>
    </div>
   </div>
  </p>
 </div>

 
 <div class="refsect1 notes" id="refsect1-reserved.variables.get-notes">
  <h3 class="title">注释</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: <p class="para">"Superglobal"也称为自动化的全局变量。这就表示其在脚本的所有作用域中都是可用的。不需要在函数或方法中用
<strong class="command">global $variable;</strong> 来访问它。</p></p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    GET 是通过 <span class="function"><a href="function.urldecode.html" class="function">urldecode()</a></span> 传递的。
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-reserved.variables.get-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><a href="language.variables.external.html" class="link">处理外部变量</a></li>
    <li class="member"><a href="book.filter.html" class="link">过滤器扩展</a></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="116131""></a>
  <div class="note">
   <strong class="user">sonyadivarosa at gmail dot com</strong>
   <a href="#116131" class="date">12-Nov-2014 09:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
cipto junaedy dengan berbagei jurus strategi yang beliau ajarkan kepada semua anggotanya memang terbukti ampuh..hal ini dapat dibuktikan dengan adanya kalangan muda yang telah sukses berkat didikan dari sangnpakar bisnis property ini dan untuk lebih mengenalnya silahkan anda lihat di.<br />
<a href="http://seogendeng.blogspot.com/2014/04/cipto-junaedy.html" rel="nofollow" target="_blank">http://seogendeng.blogspot.com/2014/04/cipto-junaedy.html</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115890""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#115890" class="date">10-Oct-2014 10:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is a smart way to protect the $ _GET input from malicious injection and options for inserting default values:<br />
<span class="default">&lt;?php <br />
</span><span class="comment">// Smart GET function<br />
</span><span class="keyword">public function </span><span class="default">GET</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">=</span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">, </span><span class="default">$option</span><span class="keyword">=</span><span class="string">"default"</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$option</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">; </span><span class="comment">// Old version depricated part<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$content</span><span class="keyword">=(!empty(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">]) ? </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">]) : (!empty(</span><span class="default">$value</span><span class="keyword">) &amp;&amp; !</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) ? </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) : </span><span class="default">false</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"@([^0-9])@Ui"</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">, </span><span class="default">$content</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; else if(</span><span class="default">is_bool</span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return (</span><span class="default">$content</span><span class="keyword">?</span><span class="default">true</span><span class="keyword">:</span><span class="default">false</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; else if(</span><span class="default">is_float</span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"@([^0-9\,\.\+\-])@Ui"</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">, </span><span class="default">$content</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; else if(</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">filter_var </span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_URL</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$content</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else if(</span><span class="default">filter_var </span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_EMAIL</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$content</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else if(</span><span class="default">filter_var </span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_IP</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$content</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else if(</span><span class="default">filter_var </span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_FLOAT</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$content</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"@([^a-zA-Z0-9\+\-\_\*\@\$\!\;\.\?\#\:\=\%\/\ ]+)@Ui"</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">, </span><span class="default">$content</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="comment">/*<br />
&nbsp;DEFAULT: $_GET['page'];<br />
&nbsp;SMART: GET('page'); // return value or false if is null or bad input<br />
*/<br />
</span><span class="default">?&gt;<br />
</span>I hope this is helpful. Cheers ;)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111567""></a>
  <div class="note">
   <strong class="user">Z80user</strong>
   <a href="#111567" class="date">05-Mar-2013 08:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
in MySQLi<br />
<br />
I need write<br />
-. $_GET[actor]<br />
instead of<br />
-. $_GET["actor"]<br />
or<br />
-. $_GET['actor']<br />
<br />
NOTE: IIS 7.5 (On Windows Server 2008 R2 Datacenter) with PHP Version 5.4.12 and mysqlnd 5.0.10<br />
Version of MySQL 5.6.10<br />
<br />
This code show a Movies with an actor ID_Actor<br />
E.G. URL "<a href="http://127.0.0.1/test2.php?actor=14" rel="nofollow" target="_blank">http://127.0.0.1/test2.php?actor=14</a>"<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// CONNECT TO THE DATABASE<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$DB_HOST </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$DB_USER </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$DB_PASS </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$DB_NAME </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$mysqli </span><span class="keyword">= new </span><span class="default">mysqli</span><span class="keyword">(</span><span class="default">$DB_HOST</span><span class="keyword">, </span><span class="default">$DB_USER</span><span class="keyword">, </span><span class="default">$DB_PASS</span><span class="keyword">, </span><span class="default">$DB_NAME</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">mysqli_connect_errno</span><span class="keyword">()) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">printf</span><span class="keyword">(</span><span class="string">"Connect failed: %s\n"</span><span class="keyword">, </span><span class="default">mysqli_connect_error</span><span class="keyword">());<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; exit();<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
</span><span class="comment">// A QUICK QUERY ON A FAKE USER TABLE<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$query </span><span class="keyword">= </span><span class="string">"SELECT DISTINCT Title FROM movie WHERE ID_movie IN ( SELECT DISTINCT ID_Movie FROM actor_scene WHERE ID_actor=</span><span class="default">$_GET</span><span class="keyword">[</span><span class="default">actor</span><span class="keyword">]</span><span class="string">) "</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">$mysqli</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">) or die(</span><span class="default">$mysqli</span><span class="keyword">-&gt;</span><span class="default">error</span><span class="keyword">.</span><span class="default">__LINE__</span><span class="keyword">);<br />
<br />
</span><span class="comment">// GOING THROUGH THE DATA<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$result</span><span class="keyword">-&gt;</span><span class="default">num_rows </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while(</span><span class="default">$row </span><span class="keyword">= </span><span class="default">$result</span><span class="keyword">-&gt;</span><span class="default">fetch_assoc</span><span class="keyword">()) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">stripslashes</span><span class="keyword">(</span><span class="default">$row</span><span class="keyword">[</span><span class="string">'Title'</span><span class="keyword">]).</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">" "</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'NO RESULTS'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="comment">// CLOSE CONNECTION<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">mysqli_close</span><span class="keyword">(</span><span class="default">$mysqli</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105335""></a>
  <div class="note">
   <strong class="user">zgold</strong>
   <a href="#105335" class="date">10-Aug-2011 10:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I don't directly use $_GET due to security concerns, instead I create a new array called $_CLEAN which contains cleaned superglobal variables.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">clean</span><span class="keyword">(</span><span class="default">$elem</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$elem</span><span class="keyword">))
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$elem </span><span class="keyword">= </span><span class="default">htmlentities</span><span class="keyword">(</span><span class="default">$elem</span><span class="keyword">,</span><span class="default">ENT_QUOTES</span><span class="keyword">,</span><span class="string">"UTF-8"</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; else
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$elem </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$elem</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">clean</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$elem</span><span class="keyword">;
<br />
}
<br />

<br />
</span><span class="default">$_CLEAN</span><span class="keyword">[</span><span class="string">'GET'</span><span class="keyword">] = </span><span class="default">clean</span><span class="keyword">(</span><span class="default">$_GET</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
I also do this for $_POST, as followed:
<br />
<span class="default">&lt;?php $_CLEAN</span><span class="keyword">[</span><span class="string">'POST'</span><span class="keyword">] = </span><span class="default">clean</span><span class="keyword">(</span><span class="default">$_POST</span><span class="keyword">); </span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105061""></a>
  <div class="note">
   <strong class="user">Maarten Schroeven</strong>
   <a href="#105061" class="date">25-Jul-2011 10:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can use this function to remove any $_GET variables out of your URL, it takes an array off strings(the names keys of the $_GET you wish to remove) and returns the url with the ones specified removed
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp; </span><span class="keyword">function </span><span class="default">getUrlWithout</span><span class="keyword">(</span><span class="default">$getNames</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$url </span><span class="keyword">= </span><span class="string">"http" </span><span class="keyword">. ((!empty(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'HTTPS'</span><span class="keyword">])) ? </span><span class="string">"s" </span><span class="keyword">: </span><span class="string">""</span><span class="keyword">) . </span><span class="string">"://"</span><span class="keyword">.</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'SERVER_NAME'</span><span class="keyword">].</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'REQUEST_URI'</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$questionMarkExp </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"?"</span><span class="keyword">, </span><span class="default">$url</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$urlArray </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"&amp;"</span><span class="keyword">, </span><span class="default">$questionMarkExp</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$retUrl</span><span class="keyword">=</span><span class="default">$questionMarkExp</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$retGet</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$found</span><span class="keyword">=array();
<br />
&nbsp;&nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$getNames </span><span class="keyword">as </span><span class="default">$id </span><span class="keyword">=&gt; </span><span class="default">$name</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$urlArray </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(isset(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">]) &amp;&amp; </span><span class="default">$value</span><span class="keyword">==</span><span class="default">$name</span><span class="keyword">.</span><span class="string">"="</span><span class="keyword">.</span><span class="default">$_GET</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">])
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$urlArray</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$urlArray </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$urlArray</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$urlArray </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$key</span><span class="keyword">&lt;</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$urlArray</span><span class="keyword">) &amp;&amp; </span><span class="default">$retGet</span><span class="keyword">!==</span><span class="string">""</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$retGet</span><span class="keyword">.=</span><span class="string">"&amp;"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$retGet</span><span class="keyword">.=</span><span class="default">$value</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">$retUrl</span><span class="keyword">.</span><span class="string">"?"</span><span class="keyword">.</span><span class="default">$retGet</span><span class="keyword">;
<br />
&nbsp; }
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Example
<br />
current url is <a href="http://www.example.net/index.php?getVar1=Something&amp;getVar2=10&amp;getVar3=ok" rel="nofollow" target="_blank">http://www.example.net/index.php?getVar1=Something&amp;getVar2=10&amp;getVar3=ok</a>
<br />
<span class="default">&lt;?php
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="default">getUrlWithout</span><span class="keyword">(array(</span><span class="string">"getVar1"</span><span class="keyword">,</span><span class="string">"getVar3"</span><span class="keyword">));
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//result will be "<a href="http://www.example.net/index.php?getVar2=10" rel="nofollow" target="_blank">http://www.example.net/index.php?getVar2=10</a>"
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101856""></a>
  <div class="note">
   <strong class="user">Daniel M</strong>
   <a href="#101856" class="date">14-Jan-2011 01:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need to find out whether any GET variables have been specified, you can use the empty() function.
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
</span><span class="keyword">if(empty(</span><span class="default">$_GET</span><span class="keyword">))
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"No GET variables"</span><span class="keyword">;
<br />
else
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$_GET</span><span class="keyword">);
<br />

<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
empty() - <a href="http://php.net/manual/en/function.empty.php" rel="nofollow" target="_blank">http://php.net/manual/en/function.empty.php</a>
<br />
print_r() - <a href="http://php.net/manual/en/function.print-r.php" rel="nofollow" target="_blank">http://php.net/manual/en/function.print-r.php</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101469""></a>
  <div class="note">
   <strong class="user">chris at bjelleklang dot org</strong>
   <a href="#101469" class="date">18-Dec-2010 11:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please note that PHP setups with the suhosin patch installed will have a default limit of 512 characters for get parameters. Although bad practice, most browsers (including IE) supports URLs up to around 2000 characters, while Apache has a default of 8000. <br />
<br />
To add support for long parameters with suhosin, add <br />
suhosin.get.max_value_length = &lt;limit&gt; in php.ini</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98419""></a>
  <div class="note">
   <strong class="user">John Galt</strong>
   <a href="#98419" class="date">15-Jun-2010 02:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just a note, because I didn't know for sure until I tested it.<br />
<br />
If you have a query string that contains a parameter but no value (not even an equals sign), like so:<br />
<a href="http://path/to/script.php?a" rel="nofollow" target="_blank">http://path/to/script.php?a</a><br />
<br />
The following script is a good test to determine how a is valued:<br />
&lt;pre&gt;<br />
<span class="default">&lt;?php<br />
&nbsp;print_r</span><span class="keyword">(</span><span class="default">$_GET</span><span class="keyword">);<br />
&nbsp;if(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">"a"</span><span class="keyword">] === </span><span class="string">""</span><span class="keyword">) echo </span><span class="string">"a is an empty string\n"</span><span class="keyword">;<br />
&nbsp;if(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">"a"</span><span class="keyword">] === </span><span class="default">false</span><span class="keyword">) echo </span><span class="string">"a is false\n"</span><span class="keyword">;<br />
&nbsp;if(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">"a"</span><span class="keyword">] === </span><span class="default">null</span><span class="keyword">) echo </span><span class="string">"a is null\n"</span><span class="keyword">;<br />
&nbsp;if(isset(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">"a"</span><span class="keyword">])) echo </span><span class="string">"a is set\n"</span><span class="keyword">;<br />
&nbsp;if(!empty(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">"a"</span><span class="keyword">])) echo </span><span class="string">"a is not empty"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span>&lt;/pre&gt;<br />
<br />
I tested this with script.php?a, and it returned:<br />
<br />
a is an empty string<br />
a is set<br />
<br />
So note that a parameter with no value associated with, even without an equals sign, is considered to be an empty string (""), isset() returns true for it, and it is considered empty, but not false or null. Seems obvious after the first test, but I just had to make sure.<br />
<br />
Of course, if I do not include it in my browser query, the script returns<br />
Array<br />
(<br />
)<br />
a is null</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93877""></a>
  <div class="note">
   <strong class="user">Alberto Lepe dev at alepe dot com</strong>
   <a href="#93877" class="date">05-Oct-2009 06:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This Function will help you to manage your GET parameters to facilitate coding and prevent duplication. This is a basic version but it can be easily extended.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; </span><span class="comment">// Author: Alberto Lepe (www.alepe.com)<br />
&nbsp;&nbsp;&nbsp; /* Process $_GET to preserve user custom parameters<br />
&nbsp;&nbsp; &nbsp; * the arguments is a list of URL parameters that should be removed/changed from URL<br />
&nbsp;&nbsp; &nbsp; * for example:<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; * URL = "index.php?s=1&amp;fi=2&amp;m=4&amp;p=3<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; * if called: fixGet("s"); the result has to be: ?fi=2&amp;m=4&amp;p=3<br />
&nbsp;&nbsp; &nbsp; * if called: fixGet("s&amp;m"); the result has to be: ?fi=2&amp;p=3<br />
&nbsp;&nbsp; &nbsp; * if called: fixGet("s=4"); the result has to be: ?s=4&amp;fi=2&amp;m=4&amp;p=3<br />
&nbsp;&nbsp; &nbsp; * if called: fixGet("s=2&amp;m"); the result has to be: ?s=2&amp;fi=2&amp;p=3<br />
&nbsp;&nbsp; &nbsp; * if called: fixGet("s=&amp;m=3"); the result has to be: ?s=&amp;fi=2&amp;m=3&amp;p=3<br />
&nbsp;&nbsp; &nbsp; * if called: fixGet("s=2&amp;m="); the result has to be: ?s=2&amp;fi=2&amp;m=&amp;p=3<br />
&nbsp;&nbsp; &nbsp; * Special: when it ends with a =":" its to leave it open at the end<br />
&nbsp;&nbsp; &nbsp; * (just first occurrence) to facilitate concatenation:<br />
&nbsp;&nbsp; &nbsp; * if called: fixGet("s=2&amp;m:"); the result has to be: ?s=2&amp;fi=2&amp;p=3&amp;m<br />
&nbsp;&nbsp; &nbsp; * if called: fixGet("s=2&amp;m:="); the result has to be: ?s=2&amp;fi=2&amp;p=3&amp;m=<br />
&nbsp;&nbsp; &nbsp; * <br />
&nbsp;&nbsp; &nbsp; * Usage with HTML (using the URL example above and $id = 99):<br />
&nbsp;&nbsp; &nbsp; * <br />
&nbsp;&nbsp; &nbsp; * &lt;a href="index.php&lt;?php echo fixGet('m=2&amp;s&amp;fi:=').$id ?&gt;" &gt;Link&lt;/a&gt;<br />
&nbsp;&nbsp; &nbsp; * Explanation: change "m" to 2, delete "s" and "fi" gets the $id value. ("p" is kept as it is not specified)<br />
&nbsp;&nbsp; &nbsp; * will output: &lt;a href='index.php?m=2&amp;p=3&amp;fi=99'&gt;Link&lt;/a&gt;<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">fixGet</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">) { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">count</span><span class="keyword">(</span><span class="default">$_GET</span><span class="keyword">) &gt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!empty(</span><span class="default">$args</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$lastkey </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pairs </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"&amp;"</span><span class="keyword">,</span><span class="default">$args</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$pairs </span><span class="keyword">as </span><span class="default">$pair</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$pair</span><span class="keyword">,</span><span class="string">":"</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; list(</span><span class="default">$key</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">":"</span><span class="keyword">,</span><span class="default">$pair</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$lastkey </span><span class="keyword">= </span><span class="string">"&amp;</span><span class="default">$key$value</span><span class="string">"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } elseif(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$pair</span><span class="keyword">,</span><span class="string">"="</span><span class="keyword">) === </span><span class="default">false</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="default">$pair</span><span class="keyword">]);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; list(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"="</span><span class="keyword">,</span><span class="default">$pair</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_GET</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">"?"</span><span class="keyword">.((</span><span class="default">count</span><span class="keyword">(</span><span class="default">$_GET</span><span class="keyword">) &gt; </span><span class="default">0</span><span class="keyword">)?</span><span class="default">http_build_query</span><span class="keyword">(</span><span class="default">$_GET</span><span class="keyword">).</span><span class="default">$lastkey</span><span class="keyword">:</span><span class="string">""</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
To test, copy+paste the following code into testFixGet.php<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/*<br />
&nbsp;* Unit Test for fixGet()<br />
&nbsp;*/<br />
</span><span class="default">$cases </span><span class="keyword">= array (<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; array(</span><span class="string">"s" </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">"fi" </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">"m" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">"p" </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; array(</span><span class="string">"s" </span><span class="keyword">=&gt; </span><span class="string">""</span><span class="keyword">, </span><span class="string">"fi" </span><span class="keyword">=&gt; </span><span class="string">""</span><span class="keyword">, </span><span class="string">"m" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">"p" </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">),<br />
);<br />
<br />
</span><span class="default">$test</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"s" </span><span class="keyword">=&gt; </span><span class="string">"fi=2&amp;m=4&amp;p=3"</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"s&amp;m" </span><span class="keyword">=&gt; </span><span class="string">"fi=2&amp;p=3"</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"s=4" </span><span class="keyword">=&gt; </span><span class="string">"s=4&amp;fi=2&amp;m=4&amp;p=3"</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"s=2&amp;m" </span><span class="keyword">=&gt; </span><span class="string">"s=2&amp;fi=2&amp;p=3"</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"s=&amp;m=3" </span><span class="keyword">=&gt; </span><span class="string">"s=&amp;fi=2&amp;m=3&amp;p=3"</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"s=2&amp;m=" </span><span class="keyword">=&gt; </span><span class="string">"s=2&amp;fi=2&amp;m=&amp;p=3"</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"s=2&amp;m:=" </span><span class="keyword">=&gt; </span><span class="string">"s=2&amp;fi=2&amp;p=3&amp;m="</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"z=9" </span><span class="keyword">=&gt; </span><span class="string">"s=1&amp;fi=2&amp;m=4&amp;p=3&amp;z=9"</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"z:" </span><span class="keyword">=&gt; </span><span class="string">"s=1&amp;fi=2&amp;m=4&amp;p=3&amp;z"</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"s:&amp;m=3" </span><span class="keyword">=&gt; </span><span class="string">"fi=2&amp;m=3&amp;p=3&amp;s"</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"s&amp;m=3" </span><span class="keyword">=&gt; </span><span class="string">"fi=2&amp;m=3&amp;p=3"</span><span class="keyword">,<br />
);<br />
</span><span class="default">$test</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"s" </span><span class="keyword">=&gt; </span><span class="string">"fi=&amp;m=4&amp;p=3"</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"s&amp;m" </span><span class="keyword">=&gt; </span><span class="string">"fi=&amp;p=3"</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"s=4" </span><span class="keyword">=&gt; </span><span class="string">"s=4&amp;fi=&amp;m=4&amp;p=3"</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"s=2&amp;m" </span><span class="keyword">=&gt; </span><span class="string">"s=2&amp;fi=&amp;p=3"</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"s=&amp;m=3" </span><span class="keyword">=&gt; </span><span class="string">"s=&amp;fi=&amp;m=3&amp;p=3"</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"s=2&amp;m=" </span><span class="keyword">=&gt; </span><span class="string">"s=2&amp;fi=&amp;m=&amp;p=3"</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"s=2&amp;m:=" </span><span class="keyword">=&gt; </span><span class="string">"s=2&amp;fi=&amp;p=3&amp;m="</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"z=9" </span><span class="keyword">=&gt; </span><span class="string">"s=&amp;fi=&amp;m=4&amp;p=3&amp;z=9"</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"z:" </span><span class="keyword">=&gt; </span><span class="string">"s=&amp;fi=&amp;m=4&amp;p=3&amp;z"</span><span class="keyword">,<br />
);<br />
<br />
foreach(</span><span class="default">$cases </span><span class="keyword">as </span><span class="default">$x </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"&lt;hr&gt; CASE: </span><span class="default">$x</span><span class="string"> &lt;hr&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$test</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">] as </span><span class="default">$arg </span><span class="keyword">=&gt; </span><span class="default">$expected</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_GET </span><span class="keyword">= </span><span class="default">$cases</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$res </span><span class="keyword">= </span><span class="default">myForm</span><span class="keyword">::</span><span class="default">fixGet</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo ((</span><span class="default">$res </span><span class="keyword">=== </span><span class="string">"?"</span><span class="keyword">.</span><span class="default">$expected</span><span class="keyword">)?</span><span class="string">"OK"</span><span class="keyword">:</span><span class="string">"NG (</span><span class="default">$res</span><span class="string">)"</span><span class="keyword">).</span><span class="string">" [</span><span class="default">$arg</span><span class="string">]&lt;br&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92439""></a>
  <div class="note">
   <strong class="user">robotreply at gmail dot com</strong>
   <a href="#92439" class="date">24-Jul-2009 09:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Parsing of GET/POST drops duplicate variables unless those variables have "[]" (PHP bugs #10502, #15498 and #16195). Adding "[]" makes a mess of your javascript code, so here is a small workaround to it. <br />
<br />
This function basically scans your raw POST and GET input and tries to fix the same. This function must be called near the top of your script. Optimizations are welcome.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">php_fix_raw_query</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$post </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Try globals array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (!</span><span class="default">$post </span><span class="keyword">&amp;&amp; isset(</span><span class="default">$_GLOBALS</span><span class="keyword">) &amp;&amp; isset(</span><span class="default">$_GLOBALS</span><span class="keyword">[</span><span class="string">"HTTP_RAW_POST_DATA"</span><span class="keyword">]))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$post </span><span class="keyword">= </span><span class="default">$_GLOBALS</span><span class="keyword">[</span><span class="string">"HTTP_RAW_POST_DATA"</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Try globals variable<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (!</span><span class="default">$post </span><span class="keyword">&amp;&amp; isset(</span><span class="default">$HTTP_RAW_POST_DATA</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$post </span><span class="keyword">= </span><span class="default">$HTTP_RAW_POST_DATA</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Try stream<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (!</span><span class="default">$post</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'file_get_contents'</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$fp </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">"php://input"</span><span class="keyword">, </span><span class="string">"r"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$fp</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$post </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while (!</span><span class="default">feof</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$post </span><span class="keyword">= </span><span class="default">fread</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">1024</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$post </span><span class="keyword">= </span><span class="string">"" </span><span class="keyword">. </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="string">"php://input"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$raw </span><span class="keyword">= !empty(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'QUERY_STRING'</span><span class="keyword">]) ? </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">'%s&amp;%s'</span><span class="keyword">, </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'QUERY_STRING'</span><span class="keyword">], </span><span class="default">$post</span><span class="keyword">) : </span><span class="default">$post</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arr </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pairs </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'&amp;'</span><span class="keyword">, </span><span class="default">$raw</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$pairs </span><span class="keyword">as </span><span class="default">$i</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!empty(</span><span class="default">$i</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; list(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'='</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (isset(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">]) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">]) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">][] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">] = array(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">], </span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach ( </span><span class="default">$_POST </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_POST</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_REQUEST</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach ( </span><span class="default">$_GET </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_GET</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_REQUEST</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment"># optionally return result array <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$arr</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89692""></a>
  <div class="note">
   <strong class="user">slavik0329</strong>
   <a href="#89692" class="date">19-Mar-2009 04:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
the addget function below actually has more use when you dont use the recursive merge as such:
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
</span><span class="keyword">function </span><span class="default">AddGet</span><span class="keyword">(</span><span class="default">$ArrayOrString</span><span class="keyword">){
<br />
if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$ArrayOrString</span><span class="keyword">))
<br />
return </span><span class="default">http_build_query</span><span class="keyword">(</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'_GET'</span><span class="keyword">], </span><span class="default">$ArrayOrString</span><span class="keyword">));
<br />
</span><span class="default">parse_str</span><span class="keyword">(</span><span class="default">$ArrayOrString</span><span class="keyword">, </span><span class="default">$output</span><span class="keyword">);
<br />
return </span><span class="default">http_build_query</span><span class="keyword">(</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'_GET'</span><span class="keyword">], </span><span class="default">$output</span><span class="keyword">));
<br />
}
<br />

<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
In this case, if the key is added again with a different value it will be replaced with the new value.
<br />

<br />
addget("change=true"); // ?change=true
<br />
addget("change=false"); // ?change=false</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83200""></a>
  <div class="note">
   <strong class="user">timberspine _AT_ gmail _DOT_ com</strong>
   <a href="#83200" class="date">15-May-2008 01:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that named anchors are not part of the query string and are never submitted by the browser to the server.<br />
<br />
Eg.<br />
<a href="http://www.xyz-abc.kz/index.php?title=apocalypse.php#doom" rel="nofollow" target="_blank">http://www.xyz-abc.kz/index.php?title=apocalypse.php#doom</a><br />
<br />
echo $_GET['title']; <br />
<br />
// returns "apocalypse.php" and NOT "apocalypse.php#doom"<br />
<br />
you would be better off treating the named anchor as another query string variable like so:<br />
<a href="http://www.xyz-abc.kz/index.php?title=apocalypse.php&amp;na=doom" rel="nofollow" target="_blank">http://www.xyz-abc.kz/index.php?title=apocalypse.php&amp;na=doom</a><br />
<br />
...and then retrieve it using something like this:<br />
$url = $_GET['title']."#".$_GET['na'];<br />
<br />
Hope this helps someone...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

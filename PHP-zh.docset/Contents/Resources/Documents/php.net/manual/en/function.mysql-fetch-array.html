<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>从结果集中取得一行作为关联数组，或数字数组，或二者兼有</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.mysql-escape-string.html">? mysql_escape_string</a></li>
      <li style="float: right;"><a href="function.mysql-fetch-assoc.html">mysql_fetch_assoc ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.mysql.html">MySQL 函数</a></li>
    <li>从结果集中取得一行作为关联数组，或数字数组，或二者兼有</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.mysql-fetch-array" class="refentry">
   <div class="refnamediv">
    <h1 class="refname">mysql_fetch_array</h1>
    <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">mysql_fetch_array</span> &mdash; <span class="dc-title">
     从结果集中取得一行作为关联数组，或数字数组，或二者兼有
    </span></p>

   </div>
 <div class="refsect1 description" id="refsect1-function.mysql-fetch-array-description">
  <h3 class="title">说明</h3>
     <div class="methodsynopsis dc-description">
      <span class="type">array</span> <span class="methodname"><strong>mysql_fetch_array</strong></span>
       ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$result</code></span>
      [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$
        result_type
       </code></span>
     ] )</div>

    <p class="para rdfs-comment">
     返回根据从结果集取得的行生成的数组，如果没有更多行则返回 <strong><code>FALSE</code></strong>。
    </p>
    <p class="para">
     <span class="function"><strong>mysql_fetch_array()</strong></span> 是
     <span class="function"><a href="function.mysql-fetch-row.html" class="function">mysql_fetch_row()</a></span>
     的扩展版本。除了将数据以数字索引方式储存在数组中之外，还可以将数据作为关联索引储存，用字段名作为键名。
    </p>
    <p class="para">
     如果结果中的两个或以上的列具有相同字段名，最后一列将优先。要访问同名的其它列，必须用该列的数字索引或给该列起个别名。对有别名的列，不能再用原来的列名访问其内容（本例中的
     <em>&#039;field&#039;</em>）。
     <div class="example" id="example-1874">
      <p><strong>Example #1 相同字段名的查询</strong></p>
      <div class="example-contents">
<div class="sqlcode"><pre class="sqlcode">select table1.field as foo, table2.field as bar from table1, table2</pre>
</div>
      </div>

     </div>
    </p>
    <p class="para">
     有一点很重要必须指出，用
     <span class="function"><strong>mysql_fetch_array()</strong></span>
     并<em class="emphasis">不明显</em> 比用
     <span class="function"><a href="function.mysql-fetch-row.html" class="function">mysql_fetch_row()</a></span>
     慢，而且还提供了明显更多的值。
    </p>
    <p class="para">
     <span class="function"><strong>mysql_fetch_array()</strong></span>
     中可选的第二个参数
     <code class="parameter">result_type</code>
     是一个常量，可以接受以下值：MYSQL_ASSOC，MYSQL_NUM
     和 MYSQL_BOTH。本特性是 PHP 3.0.7 起新加的。本参数的默认值是 MYSQL_BOTH。
    </p>
    <p class="para">
     如果用了 MYSQL_BOTH，将得到一个同时包含关联和数字索引的数组。用
     MYSQL_ASSOC 只得到关联索引（如同
     <span class="function"><a href="function.mysql-fetch-assoc.html" class="function">mysql_fetch_assoc()</a></span> 那样），用
     MYSQL_NUM 只得到数字索引（如同
     <span class="function"><a href="function.mysql-fetch-row.html" class="function">mysql_fetch_row()</a></span> 那样）。
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">此函数返回的字段名<em class="emphasis">大小写敏感</em>。</span></p></blockquote>
    <p class="para">
     <div class="example" id="example-1875">
      <p><strong>Example #2 mysql_fetch_array 使用 MYSQL_NUM</strong></p>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;&nbsp;&nbsp;mysql_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"mysql_user"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"mysql_password"</span><span style="color: #007700">)&nbsp;or<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">"Could&nbsp;not&nbsp;connect:&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">mysql_error</span><span style="color: #007700">());<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">mysql_select_db</span><span style="color: #007700">(</span><span style="color: #DD0000">"mydb"</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysql_query</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT&nbsp;id,&nbsp;name&nbsp;FROM&nbsp;mytable"</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysql_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MYSQL_NUM</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">"ID:&nbsp;%s&nbsp;&nbsp;Name:&nbsp;%s"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">mysql_free_result</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
    </p>
    <p class="para">
     <div class="example" id="example-1876">
      <p><strong>Example #3 mysql_fetch_array 使用 MYSQL_ASSOC</strong></p>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;&nbsp;&nbsp;mysql_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"mysql_user"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"mysql_password"</span><span style="color: #007700">)&nbsp;or<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">"Could&nbsp;not&nbsp;connect:&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">mysql_error</span><span style="color: #007700">());<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">mysql_select_db</span><span style="color: #007700">(</span><span style="color: #DD0000">"mydb"</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysql_query</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT&nbsp;id,&nbsp;name&nbsp;FROM&nbsp;mytable"</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysql_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MYSQL_ASSOC</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">"ID:&nbsp;%s&nbsp;&nbsp;Name:&nbsp;%s"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">"id"</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">"name"</span><span style="color: #007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">mysql_free_result</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
    </p>
    <p class="para">
     <div class="example" id="example-1877">
      <p><strong>Example #4 mysql_fetch_array 使用 MYSQL_BOTH</strong></p>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;&nbsp;&nbsp;mysql_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"mysql_user"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"mysql_password"</span><span style="color: #007700">)&nbsp;or<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">"Could&nbsp;not&nbsp;connect:&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">mysql_error</span><span style="color: #007700">());<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">mysql_select_db</span><span style="color: #007700">(</span><span style="color: #DD0000">"mydb"</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysql_query</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT&nbsp;id,&nbsp;name&nbsp;FROM&nbsp;mytable"</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysql_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MYSQL_BOTH</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">"ID:&nbsp;%s&nbsp;&nbsp;Name:&nbsp;%s"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">"name"</span><span style="color: #007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">mysql_free_result</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
    </p>
    <p class="para">
     参见
     <span class="function"><a href="function.mysql-fetch-row.html" class="function">mysql_fetch_row()</a></span> 和
     <span class="function"><a href="function.mysql-fetch-assoc.html" class="function">mysql_fetch_assoc()</a></span>。
    </p>
   </div>


 <div class="refsect1 parameters" id="refsect1-function.mysql-fetch-array-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    <dt>
<code class="parameter">
result</code></dt>
<dd>
<p class="para"><span class="type"><a href="language.types.resource.html" class="type resource">resource</a></span>
型的结果集。此结果集来自对 <span class="function"><a href="function.mysql-query.html" class="function">mysql_query()</a></span>
的调用。</p></dd>

    
     <dt>
<code class="parameter">result_type</code></dt>

     <dd>

      <p class="para">
       The type of array that is to be fetched. It&#039;s a constant and can
       take the following values: <strong><code>MYSQL_ASSOC</code></strong>, 
       <strong><code>MYSQL_NUM</code></strong>, and
       <strong><code>MYSQL_BOTH</code></strong>.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 
 <div class="refsect1 returnvalues" id="refsect1-function.mysql-fetch-array-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   Returns an array of strings that corresponds to the fetched row, or <strong><code>FALSE</code></strong>
   if there are no more rows. The type of returned array depends on
   how <code class="parameter">result_type</code> is defined. By using 
   <strong><code>MYSQL_BOTH</code></strong> (default), you&#039;ll get an array with both 
   associative and number indices. Using <strong><code>MYSQL_ASSOC</code></strong>, you 
   only get associative indices (as <span class="function"><a href="function.mysql-fetch-assoc.html" class="function">mysql_fetch_assoc()</a></span> 
   works), using <strong><code>MYSQL_NUM</code></strong>, you only get number indices 
   (as <span class="function"><a href="function.mysql-fetch-row.html" class="function">mysql_fetch_row()</a></span> works).
  </p>
  <p class="para">
   If two or more columns of the result have the same field names,
   the last column will take precedence. To access the other column(s)
   of the same name, you must use the numeric index of the column or
   make an alias for the column. For aliased columns, you cannot
   access the contents with the original column name.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.mysql-fetch-array-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-1878">
    <p><strong>Example #5 Query with aliased duplicate field names</strong></p>
    <div class="example-contents">
<div class="sqlcode"><pre class="sqlcode">SELECT table1.field AS foo, table2.field AS bar FROM table1, table2</pre>
</div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-1879">
    <p><strong>Example #6 <span class="function"><strong>mysql_fetch_array()</strong></span> with <strong><code>MYSQL_NUM</code></strong></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />mysql_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"mysql_user"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"mysql_password"</span><span style="color: #007700">)&nbsp;or<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">"Could&nbsp;not&nbsp;connect:&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">mysql_error</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">mysql_select_db</span><span style="color: #007700">(</span><span style="color: #DD0000">"mydb"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysql_query</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT&nbsp;id,&nbsp;name&nbsp;FROM&nbsp;mytable"</span><span style="color: #007700">);<br /><br />while&nbsp;(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysql_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MYSQL_NUM</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"ID:&nbsp;%s&nbsp;&nbsp;Name:&nbsp;%s"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]);&nbsp;&nbsp;<br />}<br /><br /></span><span style="color: #0000BB">mysql_free_result</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-1880">
    <p><strong>Example #7 <span class="function"><strong>mysql_fetch_array()</strong></span> with <strong><code>MYSQL_ASSOC</code></strong></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />mysql_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"mysql_user"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"mysql_password"</span><span style="color: #007700">)&nbsp;or<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">"Could&nbsp;not&nbsp;connect:&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">mysql_error</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">mysql_select_db</span><span style="color: #007700">(</span><span style="color: #DD0000">"mydb"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysql_query</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT&nbsp;id,&nbsp;name&nbsp;FROM&nbsp;mytable"</span><span style="color: #007700">);<br /><br />while&nbsp;(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysql_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MYSQL_ASSOC</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"ID:&nbsp;%s&nbsp;&nbsp;Name:&nbsp;%s"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">"id"</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">"name"</span><span style="color: #007700">]);<br />}<br /><br /></span><span style="color: #0000BB">mysql_free_result</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-1881">
    <p><strong>Example #8 <span class="function"><strong>mysql_fetch_array()</strong></span> with <strong><code>MYSQL_BOTH</code></strong></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />mysql_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"mysql_user"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"mysql_password"</span><span style="color: #007700">)&nbsp;or<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">"Could&nbsp;not&nbsp;connect:&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">mysql_error</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">mysql_select_db</span><span style="color: #007700">(</span><span style="color: #DD0000">"mydb"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysql_query</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT&nbsp;id,&nbsp;name&nbsp;FROM&nbsp;mytable"</span><span style="color: #007700">);<br /><br />while&nbsp;(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysql_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MYSQL_BOTH</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">"ID:&nbsp;%s&nbsp;&nbsp;Name:&nbsp;%s"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">"name"</span><span style="color: #007700">]);<br />}<br /><br /></span><span style="color: #0000BB">mysql_free_result</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.mysql-fetch-array-notes">
  <h3 class="title">注释</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <strong>Performance</strong><br />
   <p class="para">
    An important thing to note is that using 
    <span class="function"><strong>mysql_fetch_array()</strong></span> is <em class="emphasis">not 
    significantly</em> slower than using
    <span class="function"><a href="function.mysql-fetch-row.html" class="function">mysql_fetch_row()</a></span>, while it provides
    a significant added value.
   </p>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">此函数返回的字段名<em class="emphasis">大小写敏感</em>。</span></p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">此函数将 NULL 字段设置为 PHP <strong><code>NULL</code></strong> 值。</span></p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.mysql-fetch-array-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.mysql-fetch-row.html" class="function" rel="rdfs-seeAlso">mysql_fetch_row()</a> - 从结果集中取得一行作为枚举数组</span></li>
    <li class="member"><span class="function"><a href="function.mysql-fetch-assoc.html" class="function" rel="rdfs-seeAlso">mysql_fetch_assoc()</a> - 从结果集中取得一行作为关联数组</span></li>
    <li class="member"><span class="function"><a href="function.mysql-data-seek.html" class="function" rel="rdfs-seeAlso">mysql_data_seek()</a> - 移动内部结果的指针</span></li>
    <li class="member"><span class="function"><a href="function.mysql-query.html" class="function" rel="rdfs-seeAlso">mysql_query()</a> - 发送一条 MySQL 查询</span></li>
   </ul>
  </p>
 </div>

  </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="108765""></a>
  <div class="note">
   <strong class="user">scott_carney at hotmail dot com</strong>
   <a href="#108765" class="date">24-May-2012 02:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just thought I'd share these helper functions that I use to simplify processing of query results a bit:
<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">// For a simple query that should return a single value, this returns just that value (or FALSE) so you can process it immediately
<br />
</span><span class="keyword">function </span><span class="default">db_result_single</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; return (</span><span class="default">$row </span><span class="keyword">= </span><span class="default">mysql_fetch_row</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">)) &amp;&amp; isset(</span><span class="default">$row</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) ? </span><span class="default">$row</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] : </span><span class="default">false</span><span class="keyword">;
<br />
}
<br />

<br />
</span><span class="comment">// Returns the rows as an array of rows
<br />
// Providing a key_column gives you access to specific rows (e.g. if (isset($result_array[$user_id])) ...)
<br />
</span><span class="keyword">function </span><span class="default">db_result_array</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">, </span><span class="default">$key_column </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$array </span><span class="keyword">= array(); </span><span class="default">$row </span><span class="keyword">= </span><span class="default">mysql_fetch_assoc</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">); isset(</span><span class="default">$row</span><span class="keyword">[</span><span class="default">$key_column</span><span class="keyword">]) ? </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$row</span><span class="keyword">[</span><span class="default">$key_column</span><span class="keyword">]] = </span><span class="default">$row </span><span class="keyword">: </span><span class="default">$array</span><span class="keyword">[] = </span><span class="default">$row</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">;
<br />
}
<br />

<br />
</span><span class="comment">// Returns an array of a single column of data that can optionally be keyed from second column (e.g. an array of user names keyed by user id)
<br />
</span><span class="keyword">function </span><span class="default">db_result_array_values</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$array </span><span class="keyword">= array(); </span><span class="default">$row </span><span class="keyword">= </span><span class="default">mysql_fetch_row</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">); isset(</span><span class="default">$row</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]) ? </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$row</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]] = </span><span class="default">$row</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] : </span><span class="default">$array</span><span class="keyword">[] = </span><span class="default">$row</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Naturally, comments [to my email, not here] are welcome.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106421""></a>
  <div class="note">
   <strong class="user">puzbie at facebookanswers dot co dot uk</strong>
   <a href="#106421" class="date">08-Nov-2011 10:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
&nbsp;</span><span class="keyword">while(</span><span class="default">$r</span><span class="keyword">[]=</span><span class="default">mysql_fetch_array</span><span class="keyword">(</span><span class="default">$sql</span><span class="keyword">));<br />
&nbsp;</span><span class="default">?&gt;<br />
</span> <br />
Yes, that will generate a dummy array element containing the false of the final mysql_fetch_array. You should either truncate the array or (more sensibly in my mind) check that the result of mysql_fetch_array is not false before adding it to the array.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105592""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#105592" class="date">30-Aug-2011 10:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If I use <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">while(</span><span class="default">$r</span><span class="keyword">[]=</span><span class="default">mysql_fetch_array</span><span class="keyword">(</span><span class="default">$sql</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
so in array $r is one more entry then rows returned from the database.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105221""></a>
  <div class="note">
   <strong class="user">maileremi at gmail dot com</strong>
   <a href="#105221" class="date">03-Aug-2011 06:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Simple way to put table in an array...<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//= Query ========================//<br />
</span><span class="default">$sql</span><span class="keyword">=</span><span class="default">mysql_query</span><span class="keyword">(</span><span class="string">"select * from table1"</span><span class="keyword">);<br />
<br />
</span><span class="comment">//= Closed while ====================//<br />
/*everytime it fetches the row, adds it to array...*/<br />
</span><span class="keyword">while(</span><span class="default">$r</span><span class="keyword">[]=</span><span class="default">mysql_fetch_array</span><span class="keyword">(</span><span class="default">$sql</span><span class="keyword">));<br />
<br />
echo </span><span class="string">"&lt;pre&gt;"</span><span class="keyword">;<br />
</span><span class="comment">//= Prints $r as array =================//<br />
</span><span class="default">print_r </span><span class="keyword">(</span><span class="default">$r</span><span class="keyword">);<br />
</span><span class="comment">//=============================//<br />
</span><span class="keyword">echo </span><span class="string">"&lt;/pre&gt;"</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105072""></a>
  <div class="note">
   <strong class="user">final at skilled dot ch</strong>
   <a href="#105072" class="date">26-Jul-2011 12:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I ran into troubles with MySQL NULL values when I generated dynamic queries and then had to figure out whether my resultset contained a specific field.<br />
<br />
First instict was to use isset() and is_null(), but these function will not behave as you probably expect.<br />
<br />
I ended up using array_key_exists, as it was the only function that could tell me whether the key actually existed or not.<br />
<br />
<span class="default">&lt;?php<br />
$row </span><span class="keyword">= </span><span class="default">mysql_fetch_assoc</span><span class="keyword">(</span><span class="default">mysql_query</span><span class="keyword">(</span><span class="string">"SELECT null as a"</span><span class="keyword">));<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$row</span><span class="keyword">); </span><span class="comment">//array(1) {&nbsp; ["a"]=&gt;&nbsp; NULL }<br />
</span><span class="default">var_dump</span><span class="keyword">(isset(</span><span class="default">$row</span><span class="keyword">[</span><span class="string">'a'</span><span class="keyword">])); </span><span class="comment">//false<br />
</span><span class="default">var_dump</span><span class="keyword">(isset(</span><span class="default">$row</span><span class="keyword">[</span><span class="string">'b'</span><span class="keyword">])); </span><span class="comment">//false<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$row</span><span class="keyword">[</span><span class="string">'a'</span><span class="keyword">])); </span><span class="comment">//true<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$row</span><span class="keyword">[</span><span class="string">'b'</span><span class="keyword">])); </span><span class="comment">//true + throws undefined index notice<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="string">'a'</span><span class="keyword">, </span><span class="default">$row</span><span class="keyword">)); </span><span class="comment">// true<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="string">'b'</span><span class="keyword">, </span><span class="default">$row</span><span class="keyword">)); </span><span class="comment">// false<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101984""></a>
  <div class="note">
   <strong class="user">Amine O</strong>
   <a href="#101984" class="date">21-Jan-2011 04:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you use implode() with the return value by mysql_fetch_array, if you use MYSQL_BOTH on parameter 2, the result is not really what you're expecting.
<br />
For example : 
<br />
my sql database contains "Amine, Sarah, Mohamed";
<br />

<br />
$array = mysql_fetch_array($resource,MYSQL_BOTH);
<br />
or $array = mysql_fetch_array($resource);
<br />
echo implode(" - ", $array);
<br />

<br />
the result is : Amine-Amine-Sarah-Sarah-Mohamed-Mohamed
<br />
and we expect just : Amine-Sarah-Mohamed
<br />

<br />
You must use MYSQL_NUM or MYSQL_ASSOC on parameter 2 to resolve the problem.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92673""></a>
  <div class="note">
   <strong class="user">buddy at databoysoftware dot com</strong>
   <a href="#92673" class="date">03-Aug-2009 07:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In the note entered by Typer85, concerning the use of mysql_data_seek(), it should be noted that there are two parameters, both of which are required.<br />
<br />
If you have already iterated through a result array (for instance, using mysql_fetch_array()), and have a need to start from the top, the proper syntax is:<br />
<br />
mysql_data_seek({result set},{record#})<br />
<br />
EG:<br />
mysql_data_seek($result,0) <br />
("0" represents the first record in the array.)<br />
<br />
This will reset your result to the top of the array so that you can then re-process with<br />
while($row = mysql_fetch_array($result)) or other array processing.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92513""></a>
  <div class="note">
   <strong class="user">Tristan</strong>
   <a href="#92513" class="date">28-Jul-2009 02:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a quicker way to clone a record.&nbsp; Only 3 lines of code instead of 4.&nbsp; But the table must have an auto-incremented id.
<br />
I took the code from Tim and altered it. Props to Tim.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">// copy content of the record you wish to clone
<br />
</span><span class="default">$entity </span><span class="keyword">= </span><span class="default">mysql_fetch_array</span><span class="keyword">(</span><span class="default">mysql_query</span><span class="keyword">(</span><span class="string">"SELECT * FROM table_name WHERE id='</span><span class="default">$id_to_be</span><span class="string"> cloned'"</span><span class="keyword">), </span><span class="default">MYSQL_ASSOC</span><span class="keyword">) or die(</span><span class="string">"Could not select original record"</span><span class="keyword">); 
<br />

<br />
</span><span class="comment">// set the auto-incremented id's value to blank. If you forget this step, nothing will work because we can't have two records with the same id
<br />
</span><span class="default">$entity</span><span class="keyword">[</span><span class="string">"id"</span><span class="keyword">] = </span><span class="string">""</span><span class="keyword">;
<br />

<br />
</span><span class="comment">// insert cloned copy of the original&nbsp; record
<br />
</span><span class="default">mysql_query</span><span class="keyword">(</span><span class="string">"INSERT INTO table_name ("</span><span class="keyword">.</span><span class="default">implode</span><span class="keyword">(</span><span class="string">", "</span><span class="keyword">,</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$entity</span><span class="keyword">)).</span><span class="string">") VALUES ('"</span><span class="keyword">.</span><span class="default">implode</span><span class="keyword">(</span><span class="string">"', '"</span><span class="keyword">,</span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$entity</span><span class="keyword">)).</span><span class="string">"')"</span><span class="keyword">);
<br />

<br />
</span><span class="comment">// if you want the auto-generated id of the new cloned record, do the following
<br />
</span><span class="default">$newid </span><span class="keyword">= </span><span class="default">mysql_insert_id</span><span class="keyword">();
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
There you go.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92328""></a>
  <div class="note">
   <strong class="user">mehdi dot haresi at gmail dot com</strong>
   <a href="#92328" class="date">20-Jul-2009 09:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For all of you having problems accessing duplicated field names in queries with their table alias i have implemented the following quick solution:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">mysql_fetch_alias_array</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if (!(</span><span class="default">$row </span><span class="keyword">= </span><span class="default">mysql_fetch_array</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">)))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$assoc </span><span class="keyword">= Array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rowCount </span><span class="keyword">= </span><span class="default">mysql_num_fields</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$idx </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$idx </span><span class="keyword">&lt; </span><span class="default">$rowCount</span><span class="keyword">; </span><span class="default">$idx</span><span class="keyword">++)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$table </span><span class="keyword">= </span><span class="default">mysql_field_table</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">, </span><span class="default">$idx</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$field </span><span class="keyword">= </span><span class="default">mysql_field_name</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">, </span><span class="default">$idx</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$assoc</span><span class="keyword">[</span><span class="string">"</span><span class="default">$table</span><span class="string">.</span><span class="default">$field</span><span class="string">"</span><span class="keyword">] = </span><span class="default">$row</span><span class="keyword">[</span><span class="default">$idx</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$assoc</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Lets asume we have 2 tables student and contact each having fID as the index field and want to access both fID fields in php.<br />
<br />
The usage of this function will be pretty similar to calling mysql_fetch_array:<br />
<br />
<span class="default">&lt;?php<br />
$result </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="string">"select * from student s inner join contact c on c.fID = s.frContactID"</span><span class="keyword">);<br />
<br />
while (</span><span class="default">$row </span><span class="keyword">= </span><span class="default">mysql_fetch_alias_array</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">))<br />
{<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"StudenID: </span><span class="keyword">{</span><span class="default">$row</span><span class="keyword">[</span><span class="string">'s.fID'</span><span class="keyword">]}</span><span class="string">, ContactID: </span><span class="keyword">{</span><span class="default">$row</span><span class="keyword">[</span><span class="string">'c.fID'</span><span class="keyword">]}</span><span class="string">"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Voila, that's it :)<br />
<br />
Please be aware that by using this function, you have to access all fields with their alias name (e.g. s.Name, s.Birhtday) even if they are not duplicated.<br />
<br />
If you have questions, just send me a mail.<br />
<br />
Best regards,<br />
Mehdi Haresi<br />
die-webdesigner.at</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87473""></a>
  <div class="note">
   <strong class="user">info at o08 dot com</strong>
   <a href="#87473" class="date">06-Dec-2008 03:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As opposite of mysql_fetch_array:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">mysql_insert_array </span><span class="keyword">(</span><span class="default">$my_table</span><span class="keyword">, </span><span class="default">$my_array</span><span class="keyword">) { 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$my_array</span><span class="keyword">); 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$values </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$my_array</span><span class="keyword">); 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$sql </span><span class="keyword">= </span><span class="string">'INSERT INTO ' </span><span class="keyword">. </span><span class="default">$my_table </span><span class="keyword">. </span><span class="string">'(' </span><span class="keyword">. </span><span class="default">implode</span><span class="keyword">(</span><span class="string">','</span><span class="keyword">, </span><span class="default">$keys</span><span class="keyword">) . </span><span class="string">') VALUES ("' </span><span class="keyword">. </span><span class="default">implode</span><span class="keyword">(</span><span class="string">'","'</span><span class="keyword">, </span><span class="default">$values</span><span class="keyword">) . </span><span class="string">'")'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; return(</span><span class="default">mysql_query</span><span class="keyword">(</span><span class="default">$sql</span><span class="keyword">)); 
<br />
}
<br />
</span><span class="comment">#<a href="http://www.weberdev.com/get_example-4493.html" rel="nofollow" target="_blank">http://www.weberdev.com/get_example-4493.html</a>
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87201""></a>
  <div class="note">
   <strong class="user">KingIsulgard</strong>
   <a href="#87201" class="date">24-Nov-2008 02:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have found a way to put all results from the select query in an array in one line.<br />
<br />
// Read records<br />
$result = mysql_query("SELECT * FROM table;") or die(mysql_error());<br />
&nbsp;&nbsp;&nbsp; <br />
// Put them in array<br />
for($i = 0; $array[$i] = mysql_fetch_assoc($result); $i++) ;<br />
&nbsp;&nbsp;&nbsp; <br />
// Delete last empty one<br />
array_pop($array);<br />
<br />
You need to delete the last one because this will always be empty.<br />
<br />
By this you can easily read the entire table to an array and preserve the keys of the table columns. Very handy.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79083""></a>
  <div class="note">
   <strong class="user">noagbodjivictor at gmail dot com</strong>
   <a href="#79083" class="date">10-Nov-2007 05:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Little improvement to the previous function.<br />
<br />
function mysql_fetch_rowsarr($result, $numass=MYSQL_BOTH) {<br />
&nbsp; $got = array();<br />
<br />
&nbsp; if(mysql_num_rows($result) == 0)<br />
&nbsp;&nbsp;&nbsp; return $got;<br />
<br />
&nbsp; mysql_data_seek($result, 0);<br />
&nbsp; <br />
&nbsp; while ($row = mysql_fetch_array($result, $numass)) {<br />
&nbsp;&nbsp;&nbsp; array_push($got, $row);<br />
&nbsp; }<br />
&nbsp; <br />
&nbsp; return $got;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71484""></a>
  <div class="note">
   <strong class="user">Typer85 at gmail dot com</strong>
   <a href="#71484" class="date">01-Dec-2006 02:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please be advised that the resource result that you pass to this function can be thought of as being passed by reference because a resource is simply a pointer to a memory location.<br />
<br />
Because of this, you can not loop through a resource result twice in the same script before resetting the pointer back to the start position.<br />
<br />
For example:<br />
<br />
----------------<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// Assume We Already Queried Our Database.<br />
<br />
// Loop Through Result Set.<br />
<br />
</span><span class="keyword">while( </span><span class="default">$queryContent </span><span class="keyword">= </span><span class="default">mysql_fetch_row</span><span class="keyword">( </span><span class="default">$queryResult </span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Display.<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="default">$queryContent</span><span class="keyword">[ </span><span class="default">0 </span><span class="keyword">];<br />
}<br />
<br />
</span><span class="comment">// We looped through the resource result already so the<br />
// the pointer is no longer pointing at any rows.<br />
<br />
// If we decide to loop through the same resource result<br />
// again, the function will always return false because it<br />
// will assume there are no more rows.<br />
<br />
// So the following code, if executed after the previous code<br />
// segment will not work.<br />
<br />
</span><span class="keyword">while( </span><span class="default">$queryContent </span><span class="keyword">= </span><span class="default">mysql_fetch_row</span><span class="keyword">( </span><span class="default">$queryResult </span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Display.<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="default">$queryContent</span><span class="keyword">[ </span><span class="default">0 </span><span class="keyword">];<br />
}<br />
<br />
</span><span class="comment">// Because $queryContent is now equal to FALSE, the loop<br />
// will not be entered.<br />
<br />
</span><span class="default">?&gt;<br />
</span>----------------<br />
<br />
The only solution to this is to reset the pointer to make it point at the first row again before the second code segment, so now the complete code will look as follows:<br />
<br />
----------------<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// Assume We Already Queried Our Database.<br />
<br />
// Loop Through Result Set.<br />
<br />
</span><span class="keyword">while( </span><span class="default">$queryContent </span><span class="keyword">= </span><span class="default">mysql_fetch_row</span><span class="keyword">( </span><span class="default">$queryResult </span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Display.<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="default">$queryContent</span><span class="keyword">[ </span><span class="default">0 </span><span class="keyword">];<br />
}<br />
<br />
</span><span class="comment">// Reset Our Pointer.<br />
<br />
</span><span class="default">mysql_data_seek</span><span class="keyword">( </span><span class="default">$queryResult </span><span class="keyword">);<br />
<br />
</span><span class="comment">// Loop Again.<br />
<br />
</span><span class="keyword">while( </span><span class="default">$queryContent </span><span class="keyword">= </span><span class="default">mysql_fetch_row</span><span class="keyword">( </span><span class="default">$queryResult </span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Display.<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="default">$queryContent</span><span class="keyword">[ </span><span class="default">0 </span><span class="keyword">];<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span>----------------<br />
<br />
Of course you would have to do extra checks to make sure that the number of rows in the result is not 0 or else mysql_data_seek itself will return false and an error will be raised.<br />
<br />
Also please note that this applies to all functions that fetch result sets, including mysql_fetch_row, mysql_fetch_assos, and mysql_fetch_array.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60962""></a>
  <div class="note">
   <strong class="user">john at skem9 dot com</strong>
   <a href="#60962" class="date">21-Jan-2006 01:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
my main purpose was to show the fetched array into a table, showing the results side by side instead of underneath each other, and heres what I've come up with. <br />
<br />
just change the $display number to however many columns you would like to have, just dont change the $cols number or you might run into some problems.<br />
<br />
<span class="default">&lt;?php<br />
$display </span><span class="keyword">= </span><span class="default">4</span><span class="keyword">;<br />
</span><span class="default">$cols </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
echo </span><span class="string">"&lt;table&gt;"</span><span class="keyword">;<br />
while(</span><span class="default">$fetched </span><span class="keyword">= </span><span class="default">mysql_fetch_array</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">)){<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$cols </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;tr&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// put what you would like to display within each cell here<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="string">"&lt;td&gt;"</span><span class="keyword">.</span><span class="default">$fetched</span><span class="keyword">[</span><span class="string">'id'</span><span class="keyword">].</span><span class="string">"&lt;br /&gt;"</span><span class="keyword">.</span><span class="default">$fetched</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">].</span><span class="string">"&lt;/td&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$cols</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$cols </span><span class="keyword">== </span><span class="default">$display</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;/tr&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$cols </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="comment">// added the following so it would display the correct html<br />
</span><span class="keyword">if(</span><span class="default">$cols </span><span class="keyword">!= </span><span class="default">$display </span><span class="keyword">&amp;&amp; </span><span class="default">$cols </span><span class="keyword">!= </span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$neededtds </span><span class="keyword">= </span><span class="default">$display </span><span class="keyword">- </span><span class="default">$cols</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$neededtds</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;td&gt;&lt;/td&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; echo </span><span class="string">"&lt;/tr&gt;&lt;/table&gt;"</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"&lt;/table&gt;"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Hopefully this will save some of you a lot of searching.<br />
<br />
any kind of improvements on this would be awesome!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58735""></a>
  <div class="note">
   <strong class="user">tim at wiltshirewebs dot com</strong>
   <a href="#58735" class="date">14-Nov-2005 02:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a quick way to duplicate or clone a record to the same table using only 4 lines of code:<br />
<br />
// first, get the highest id number, so we can calc the new id number for the dupe<br />
// second, get the original entity<br />
// third, increment the dupe record id to 1 over the max<br />
// finally insert the new record - voila - 4 lines!<br />
<br />
$id_max = mysql_result(mysql_query("SELECT MAX(id) FROM table_name"),0,0) or die("Could not execute query"); <br />
$entity = mysql_fetch_array(mysql_query("SELECT * FROM table." WHERE id='$id_original'),MYSQL_ASSOC) or die("Could not select original record"); // MYSQL_ASSOC forces a purely associative array and blocks twin key dupes, vitally, it brings the keys out so they can be used in line 4<br />
$entity["id"]=$id_max+1; <br />
mysql_query("INSERT INTO it_pages (".implode(", ",array_keys($Entity)).") VALUES ('".implode("', '",array_values($Entity))."')");<br />
<br />
Really struggled in cracking this nut - maybe there's an easier way out there?&nbsp; Thanks to other posters for providing inspiration. Good luck - Tim</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58419""></a>
  <div class="note">
   <strong class="user">eddie at nailchipper dot com</strong>
   <a href="#58419" class="date">03-Nov-2005 07:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
mob AT stag DOT ru has a nice function for getting simple arrays from MySQL but it has a serious bug. The MySQL link being set as an argument is NULL when no link is supplied meaning that you're passing NULL to the mysql funcctions as a link, which is wrong. I am not using multitple connections so I removed the link and using the global link. If you want to support multiple links check to see if its set first.<br />
<br />
/*<br />
* to support multiple links add the $link argument to function then<br />
* test it before you use the link<br />
*<br />
* if(isset($link))<br />
*&nbsp;&nbsp; if($err=mysql_errno($link))return $err;<br />
* else<br />
*&nbsp;&nbsp; if($err=mysql_errno())return $err;<br />
*/<br />
<br />
function mysql_fetch_all($query){<br />
&nbsp;$r=@mysql_query($query);<br />
&nbsp;if($err=mysql_errno())return $err;<br />
&nbsp;if(@mysql_num_rows($r))<br />
&nbsp; while($row=mysql_fetch_array($r))$result[]=$row;<br />
&nbsp;return $result;<br />
}<br />
function mysql_fetch_one($query){<br />
&nbsp;$r=@mysql_query($query);<br />
&nbsp;if($err=mysql_errno())return $err;<br />
&nbsp;if(@mysql_num_rows($r))<br />
&nbsp;return mysql_fetch_array($r);<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57359""></a>
  <div class="note">
   <strong class="user">kunky at mail dot berlios dot de</strong>
   <a href="#57359" class="date">01-Oct-2005 12:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is very useful when the following query is used:<br />
<br />
`SHOW TABLE STATUS`<br />
<br />
Different versions of MySQL give different responses to this.<br />
<br />
Therefore, it is better to use mysql_fetch_array() because the numeric references given my mysql_fetch_row() give very different results.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56513""></a>
  <div class="note">
   <strong class="user">joelwan at gmail dot com</strong>
   <a href="#56513" class="date">06-Sep-2005 12:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Try Php Object Generator: <a href="http://www.phpobjectgenerator.com" rel="nofollow" target="_blank">http://www.phpobjectgenerator.com</a><br />
<br />
It's kind of similar to Daogen, which was suggested in one of the comments above, but simpler and easier to use.<br />
<br />
Php Object Generator generates the Php Classes for your Php Objects. It also provides the database class so you can focus on more important aspects of your project. Hope this helps.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52806""></a>
  <div class="note">
   <strong class="user">romans at servidor dot unam dot mx</strong>
   <a href="#52806" class="date">13-May-2005 07:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Regarding duplicated field names in queries, I wanted some way to retrieve rows without having to use alias, so I wrote this class that returns rows as 2d-arrays<br />
<br />
&lt;?<br />
&nbsp; $field = $drow['table']['column'];<br />
?&gt;<br />
<br />
Here is the code:<br />
<br />
&lt;?<br />
&nbsp; class mysql_resultset<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; var $results, $map;<br />
<br />
&nbsp;&nbsp;&nbsp; function mysql_resultset($results)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; $this-&gt;results = $results;<br />
&nbsp;&nbsp; &nbsp;&nbsp; $this-&gt;map = array();<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; $index = 0;<br />
&nbsp;&nbsp; &nbsp;&nbsp; while ($column = mysql_fetch_field($results))<br />
&nbsp;&nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;map[$index++] = array($column-&gt;table, $column-&gt;name);<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; function fetch()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if ($row = mysql_fetch_row($this-&gt;results))<br />
&nbsp;&nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $drow = array();<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach ($row as $index =&gt; $field)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; list($table, $column) = $this-&gt;map[$index];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $drow[$table][$column] = $row[$index];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $drow;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return false;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
?&gt;<br />
<br />
The class is initialized with a mysql_query result:<br />
<br />
&lt;?<br />
&nbsp; $resultset = new mysql_resultset(mysql_query($sql));<br />
?&gt;<br />
<br />
The constructor builds an array that maps each field index to a ($table, $column) array so we can use mysql_fetch_row and access field values by index in the fetch() method. This method then uses the map to build up the 2d-array.<br />
<br />
An example:<br />
<br />
&lt;?<br />
&nbsp; $sql =<br />
&nbsp;&nbsp;&nbsp; "select orders.*, clients.*, productos.* ".<br />
&nbsp;&nbsp;&nbsp; "from orders, clients, products ".<br />
&nbsp;&nbsp;&nbsp; "where join conditions";<br />
<br />
&nbsp; $resultset = new mysql_resultset(mysql_query($sql));<br />
<br />
&nbsp; while ($drow = $resultset-&gt;fetch())<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; echo 'No.: '.$drow['orders']['number'].'&lt;br&gt;';<br />
&nbsp;&nbsp;&nbsp; echo 'Client: '.$drow['clients']['name'].'&lt;br&gt;';<br />
&nbsp;&nbsp;&nbsp; echo 'Product: '.$drow['products']['name'].'&lt;br&gt;';<br />
&nbsp; }<br />
?&gt;<br />
<br />
I hope others find this useful as it has been to me.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49322""></a>
  <div class="note">
   <strong class="user">mob AT stag DOT ru</strong>
   <a href="#49322" class="date">24-Jan-2005 08:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wrote some utility functions to improve usability and readability, and use them everywhere in my code. I suppose they can help.<br />
<br />
function mysql_fetch_all($query,$MySQL=NULL){<br />
&nbsp;$r=@mysql_query($query,$MySQL);<br />
&nbsp;if($err=mysql_errno($MySQL))return $err;<br />
&nbsp;if(@mysql_num_rows($r))<br />
&nbsp; while($row=mysql_fetch_array($r))$result[]=$row;<br />
&nbsp;return $result;<br />
}<br />
function mysql_fetch_one($query,$MySQL=NULL){<br />
&nbsp;$r=@mysql_query($query,$MySQL);<br />
&nbsp;if($err=mysql_errno($MySQL))return $err;<br />
&nbsp;if(@mysql_num_rows($r))<br />
&nbsp;return mysql_fetch_array($r);<br />
}<br />
<br />
Example use:<br />
if(is_array($rows=mysql_fetch_all("select * from sometable",$MySQL))){<br />
&nbsp;//do something<br />
}else{<br />
&nbsp;if(!is_null($rows)) die("Query failed!");<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41662""></a>
  <div class="note">
   <strong class="user">joey at clean dot q7 dot com</strong>
   <a href="#41662" class="date">19-Apr-2004 04:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The issue of NULL fields seems to not be an issue anymore (as of 4.2.2 at least).&nbsp; mysql_fetch_* now seems to fully populate the array and put in entries with values of NULL when that is what the database returned.&nbsp; This is certainly the behaviour I expected, so I was concerned when i saw the notes here, but testing shows it does work the way I expected.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41330""></a>
  <div class="note">
   <strong class="user">Ben</strong>
   <a href="#41330" class="date">06-Apr-2004 08:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
One of the most common mistakes that people make with this function, when using it multiple times in one script, is that they forget to use the mysql_data_seek() function to reset the internal data pointer.<br />
<br />
When iterating through an array of MySQL results, e.g.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">while (</span><span class="default">$line </span><span class="keyword">= </span><span class="default">mysql_fetch_array</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">, </span><span class="default">MYSQL_ASSOC</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$line </span><span class="keyword">as </span><span class="default">$col_value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$col_value </span><span class="keyword">. </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
the internal data pointer for the array is advanced, incrementally, until there are no more elements left in the array. So, basically, if you copy/pasted the above code into a script TWICE, the second copy would not create any output. The reason is because the data pointer has been advanced to the end of the $line array and returned FALSE upon doing so.<br />
<br />
If, for some reason, you wanted to interate through the array a second time, perhaps grabbing a different piece of data from the same result set, you would have to make sure you call<br />
<br />
<span class="default">&lt;?php<br />
mysql_data_seek</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
This function resets the pointer and you can re-iterate through the $line array, again!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="28302""></a>
  <div class="note">
   <strong class="user">hanskrentel at yahoo dot de</strong>
   <a href="#28302" class="date">08-Jan-2003 10:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
for the problem with fields containing null values in an associated array, feel free to use this function. i've got no more problems with it, just drop it in your script:<br />
<br />
/*<br />
*&nbsp; &nbsp; mysql_fetch_array_nullsafe<br />
*<br />
*<br />
*&nbsp; &nbsp; get a result row as an enumerated and associated array<br />
*&nbsp; &nbsp; ! nullsafe !<br />
*<br />
*&nbsp; &nbsp; parameter:&nbsp; &nbsp; $result<br />
*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $result:&nbsp; &nbsp; valid db result id<br />
*<br />
*&nbsp; &nbsp; returns:&nbsp; &nbsp; array | false (mysql:if there are any more rows)<br />
*<br />
*/<br />
function mysql_fetch_array_nullsafe($result) {<br />
&nbsp;&nbsp;&nbsp; $ret=array();<br />
<br />
&nbsp;&nbsp;&nbsp; $num = mysql_num_fields($result);<br />
&nbsp;&nbsp;&nbsp; if ($num==0) return $ret;<br />
<br />
&nbsp;&nbsp;&nbsp; $fval = mysql_fetch_row ($result);<br />
&nbsp;&nbsp; &nbsp; if ($fval === false) return false;<br />
<br />
&nbsp;&nbsp;&nbsp; $i=0;<br />
&nbsp;&nbsp; &nbsp; while($i&lt;$num)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $fname[$i] = mysql_field_name($result,$i);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $ret[$i] = $fval[$i];&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // enum<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $ret[''.$fname[$i].''] = $fval[$i];&nbsp; &nbsp; // assoc<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $i++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return $ret;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="26766""></a>
  <div class="note">
   <strong class="user">juancri at tagnet dot org</strong>
   <a href="#26766" class="date">12-Nov-2002 10:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An example with mysql_fetch_array():<br />
<br />
&nbsp;&nbsp;&nbsp; $result = mysql_query("SELECT name FROM table WHERE id=8");<br />
&nbsp;&nbsp;&nbsp; $array = mysql_fetch_array($result);<br />
<br />
$array will be:<br />
<br />
&nbsp;&nbsp;&nbsp; array ([0] =&gt; "John", ['name'] =&gt; "John")<br />
<br />
Then you can access to the results:<br />
<br />
&nbsp;&nbsp;&nbsp; echo "The name is " . $array[0];<br />
&nbsp;&nbsp;&nbsp; // or<br />
&nbsp;&nbsp;&nbsp; echo "The name is " . $array['name'];<br />
<br />
But the array is not referential. $array[0] is not a reference to $array['name'] or $array['name'] to $array[0], they are not relationed between. Because of that, the system will use excesive memory. With large columns, try to use mysql_fetch_assoc() or mysql_fetch_row() only.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="26723""></a>
  <div class="note">
   <strong class="user">dkantha at yahoo dot com</strong>
   <a href="#26723" class="date">11-Nov-2002 01:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I did find 'jb at stormvision's' code useful above, but instead of the number of rows you need the number of fields; otherwise you get an error. <br />
<br />
So, it should read like the following: <br />
<br />
$result=mysql_query("select * from mydata order by 'id'")or die('died');<br />
$num_fields = mysql_num_fields($result); <br />
$j=0;<br />
$x=1;<br />
while($row=mysql_fetch_array($result)){&nbsp; <br />
&nbsp; for($j=0;$j&lt;$num_fields;$j++){<br />
&nbsp;&nbsp; $name = mysql_field_name($result, $j);<br />
&nbsp;&nbsp; $object[$x][$name]=$row[$name];<br />
&nbsp; }$x++;<br />
}<br />
<br />
For Later in the script you may use the below array to gain access to your data<br />
<br />
$i=1;<br />
$ii=count($object);&nbsp; &nbsp; &nbsp; &nbsp; //quick access function<br />
for($i=1;$i&lt;=$ii;$i++){<br />
echo $object[$i]['your_field_name'];<br />
}<br />
<br />
I have tested this in my apps and it works great! :-)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="25880""></a>
  <div class="note">
   <strong class="user">glenn dot hoeppner at yakhair dot com</strong>
   <a href="#25880" class="date">09-Oct-2002 11:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just another workaround for columns with duplicate names...<br />
<br />
Modify your SQL to use the AS keyword.<br />
<br />
Instead of:<br />
$sql = "SELECT t1.cA, t2.cA FROM t1, t2 WHERE t1.cA = t2.cA";<br />
&nbsp;<br />
Try:<br />
$sql = "SELECT t1.cA AS foo1, t2.cA AS foo2 FROM t1, t2 WHERE t1.cA = t2.cA";<br />
<br />
Then you can reference the results by name in the array:<br />
&nbsp; $row[foo1], $row[foo2]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="25486""></a>
  <div class="note">
   <strong class="user">tslukka at cc dot hut dot fi</strong>
   <a href="#25486" class="date">25-Sep-2002 11:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you think MySQL (or other) database <br />
handling is difficult and requires lot's of <br />
code, I recommend that you try <a href="http://titaniclinux.net/daogen/" rel="nofollow" target="_blank">http://titaniclinux.net/daogen/</a><br />
<br />
DaoGen is a program source code generator <br />
that supports PHP and Java. It makes database<br />
programming quick and easy. Generated sources<br />
are released under GPL.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="22361""></a>
  <div class="note">
   <strong class="user">robjohnson at black-hole dot com</strong>
   <a href="#22361" class="date">15-Jun-2002 12:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Benchmark on a table with 38567 rows:<br />
<br />
mysql_fetch_array<br />
MYSQL_BOTH: 6.01940000057 secs<br />
MYSQL_NUM: 3.22173595428 secs <br />
MYSQL_ASSOC: 3.92950594425 secs <br />
<br />
mysql_fetch_row: 2.35096800327 secs <br />
mysql_fetch_assoc: 2.92349803448 secs <br />
<br />
As you can see, it's twice as effecient to fetch either an array or a hash, rather than getting both.&nbsp; it's even faster to use fetch_row rather than passing fetch_array MYSQL_NUM, or fetch_assoc rather than fetch_array MYSQL_ASSOC.&nbsp; Don't fetch BOTH unless you really need them, and most of the time you don't.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="21926""></a>
  <div class="note">
   <strong class="user">barbieri at NOSPAMzero dot it</strong>
   <a href="#21926" class="date">31-May-2002 03:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a suggestion to workaround the problem of NULL values:<br />
<br />
// get associative array, with NULL values set<br />
$record = mysql_fetch_array($queryID,MYSQL_ASSOC);<br />
<br />
// set number indices<br />
if(is_array($record))<br />
{<br />
&nbsp;&nbsp;&nbsp; $i = 0;<br />
&nbsp;&nbsp;&nbsp; foreach($record as $element)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $record[$i++] = $element;<br />
}<br />
<br />
This way you can access $result array as usual, having NULL fields set.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="19841""></a>
  <div class="note">
   <strong class="user">mjm at porter dot appstate dot edu</strong>
   <a href="#19841" class="date">13-Mar-2002 04:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you perform a SELECT query which returns different columns with duplicate names, like this:
<br />

<br />
--------
<br />
$sql_statement = "SELECT tbl1.colA, tbl2.colA FROM tbl1 LEFT JOIN tbl2 ON tbl1.colC = tbl2.colC";
<br />

<br />
$result = mysql_query($sql_statement, $handle);
<br />

<br />
$row = mysql_fetch_array($result);
<br />
--------
<br />

<br />
Then
<br />

<br />
$row[0] is equivalent to $row["colA"]
<br />

<br />
but
<br />

<br />
$row[1] is not equivalent to $row["colA"].
<br />

<br />
Moral of the story: You must use the numerical index on the result row arrays if column names are not unique, even if they come from different tables within a JOIN. This would render mysql_fetch_assoc() useless.
<br />

<br />
[Ed. note - or you could do the usual 'select tbl1.colA as somename, tbl2.colA as someothername. . .' which would obviate the problem. -- Torben]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="18099""></a>
  <div class="note">
   <strong class="user">some at gamepoint dot net</strong>
   <a href="#18099" class="date">10-Jan-2002 08:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I never had so much trouble with null fields but it's to my understanding that extract only works as expected when using an associative array only, which is the case with mysql_fetch_assoc() as used in the previous note.<br />
<br />
However a mysql_fetch_array will return field values with both the numerical and associative keys, the numerical ones being those extract() can't handle very well.<br />
You can prevent that by calling mysql_fetch_array($result,MYSQL_ASSOC) which will return the same result as mysql_fetch_assoc and is extract() friendly.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>返回某个历法中某年中某月的天数</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="ref.calendar.html">? 日历 函数</a></li>
      <li style="float: right;"><a href="function.cal-from-jd.html">cal_from_jd ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.calendar.html">日历 函数</a></li>
    <li>返回某个历法中某年中某月的天数</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.cal-days-in-month" class="refentry"> 
 <div class="refnamediv">
  <h1 class="refname">cal_days_in_month</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.1.0, PHP 5)</p><p class="refpurpose"><span class="refname">cal_days_in_month</span> &mdash; <span class="dc-title">返回某个历法中某年中某月的天数</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.cal-days-in-month-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><strong>cal_days_in_month</strong></span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$calendar</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$month</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$year</code></span>
   )</div>

  <p class="para rdfs-comment">
   该函数返回特定<code class="parameter">历法</code>中的某<code class="parameter">年</code>中的某<code class="parameter">月</code>的天数。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.cal-days-in-month-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">calendar</code></dt>

     <dd>

      <p class="para">
       用来计算的某个历法
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">month</code></dt>

     <dd>

      <p class="para">
       选定历法中的某月
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">year</code></dt>

     <dd>

      <p class="para">
       选定历法中的某年
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.cal-days-in-month-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
  指定历法中选定的某月的天数。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.cal-days-in-month-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-2254">
    <p><strong>Example #1 <span class="function"><strong>cal_days_in_month()</strong></span> example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$num&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">cal_days_in_month</span><span style="color: #007700">(</span><span style="color: #0000BB">CAL_GREGORIAN</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">8</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2003</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;31<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"There&nbsp;was&nbsp;</span><span style="color: #0000BB">$num</span><span style="color: #DD0000">&nbsp;days&nbsp;in&nbsp;August&nbsp;2003"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="113539""></a>
  <div class="note">
   <strong class="user">p2409 at hotmail dot com</strong>
   <a href="#113539" class="date">28-Oct-2013 02:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you have a DateTime variable you want to find the number of days in the month for, you can simply use $dt-&gt;format and the format specifiers 'm' and 'Y' to get the month digit, and year to use with cal_days_in_month eg.<br />
<br />
function DaysInMonth($dt) {<br />
&nbsp;&nbsp;&nbsp; $m =&nbsp; $dt-&gt;format('m');<br />
&nbsp;&nbsp;&nbsp; $y =&nbsp; $dt-&gt;format('Y');<br />
&nbsp;&nbsp;&nbsp; $numDays = cal_days_in_month (CAL_GREGORIAN, $m,$y);<br />
&nbsp;&nbsp;&nbsp; return $numDays;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112835""></a>
  <div class="note">
   <strong class="user">asifsajjad at gmail dot com</strong>
   <a href="#112835" class="date">29-Jul-2013 12:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
count specific days in a month like how many satureday in a monday or how many mondays in a month<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">my_cal_days_in_month</span><span class="keyword">(</span><span class="default">$year</span><span class="keyword">,</span><span class="default">$month</span><span class="keyword">,</span><span class="default">$calday</span><span class="keyword">=</span><span class="string">"1"</span><span class="keyword">){ </span><span class="comment">//0 Sunday, 1 Monday, 2 Tue , 3 Wed , 4. Thu , 5. Fri , 6. Sat<br />
&nbsp;&nbsp;&nbsp; // calculate total number of occurance in this month<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$num </span><span class="keyword">= </span><span class="default">cal_days_in_month</span><span class="keyword">(</span><span class="default">CAL_GREGORIAN</span><span class="keyword">, </span><span class="default">$month</span><span class="keyword">, </span><span class="default">$year</span><span class="keyword">); </span><span class="comment">// days in month<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dayofweek </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">( </span><span class="string">"w"</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$month</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">$year</span><span class="keyword">));&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$adddays</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$calday </span><span class="keyword">&gt; </span><span class="default">$dayofweek </span><span class="keyword">) <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$adddays</span><span class="keyword">=</span><span class="default">1 </span><span class="keyword">+ </span><span class="default">$calday </span><span class="keyword">- </span><span class="default">$dayofweek</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; else if(</span><span class="default">$calday </span><span class="keyword">&lt; </span><span class="default">$dayofweek </span><span class="keyword">) <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$adddays</span><span class="keyword">=</span><span class="default">1 </span><span class="keyword">+ </span><span class="default">7 </span><span class="keyword">+ (</span><span class="default">$calday </span><span class="keyword">- </span><span class="default">$dayofweek </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$remainingdays</span><span class="keyword">=</span><span class="default">$num</span><span class="keyword">-</span><span class="default">$adddays</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$leavesnum</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">+</span><span class="default">intval</span><span class="keyword">(</span><span class="default">$remainingdays </span><span class="keyword">/ </span><span class="default">7</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return&nbsp; &nbsp;&nbsp; </span><span class="default">$leavesnum</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$year</span><span class="keyword">=</span><span class="default">2013</span><span class="keyword">;<br />
</span><span class="default">$month</span><span class="keyword">=</span><span class="default">7</span><span class="keyword">;<br />
</span><span class="default">$day</span><span class="keyword">=</span><span class="default">6</span><span class="keyword">;<br />
echo </span><span class="default">my_cal_days_in_month</span><span class="keyword">(</span><span class="default">$year</span><span class="keyword">,</span><span class="default">$month</span><span class="keyword">,</span><span class="default">$day</span><span class="keyword">);</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106476""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#106476" class="date">12-Nov-2011 12:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can also use the date() function to get the number of days in a month. You can also pass the 2nd param strtotime() and specify a specific date:<br />
<br />
date('t');</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104427""></a>
  <div class="note">
   <strong class="user">adam.pippin at ohmedia.ca</strong>
   <a href="#104427" class="date">15-Jun-2011 12:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Forgot to compile the calendar plugin in... Wrote a workaround while I waited for it to compile. It only supports the Gregorian calendar.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">if (!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'cal_days_in_month'</span><span class="keyword">))
<br />
{
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">cal_days_in_month</span><span class="keyword">(</span><span class="default">$calendar</span><span class="keyword">, </span><span class="default">$month</span><span class="keyword">, </span><span class="default">$year</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">date</span><span class="keyword">(</span><span class="string">'t'</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$month</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">$year</span><span class="keyword">));
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />
if (!</span><span class="default">defined</span><span class="keyword">(</span><span class="string">'CAL_GREGORIAN'</span><span class="keyword">))
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">define</span><span class="keyword">(</span><span class="string">'CAL_GREGORIAN'</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102855""></a>
  <div class="note">
   <strong class="user">deva dot ananth at gmail dot com</strong>
   <a href="#102855" class="date">10-Mar-2011 02:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Function&nbsp; for calculation number of days until birthday:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">daysLeftForBirthday</span><span class="keyword">(</span><span class="default">$devabirthdate</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/* input birthday date format -&gt; Y-m-d */
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">list(</span><span class="default">$y</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">, </span><span class="default">$d</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'-'</span><span class="keyword">,</span><span class="default">$devabirthdate</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$nowdate </span><span class="keyword">= </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">date</span><span class="keyword">(</span><span class="string">"m"</span><span class="keyword">), </span><span class="default">date</span><span class="keyword">(</span><span class="string">"d"</span><span class="keyword">), </span><span class="default">date</span><span class="keyword">(</span><span class="string">"Y"</span><span class="keyword">));
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$nextbirthday </span><span class="keyword">= </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$m</span><span class="keyword">, </span><span class="default">$d</span><span class="keyword">, </span><span class="default">date</span><span class="keyword">(</span><span class="string">"Y"</span><span class="keyword">));
<br />

<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$nextbirthday</span><span class="keyword">&lt;</span><span class="default">$nowdate</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nextbirthday</span><span class="keyword">=</span><span class="default">$nextbirthday</span><span class="keyword">+(</span><span class="default">60</span><span class="keyword">*</span><span class="default">60</span><span class="keyword">*</span><span class="default">24</span><span class="keyword">*</span><span class="default">365</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$daycount</span><span class="keyword">=</span><span class="default">intval</span><span class="keyword">((</span><span class="default">$nextbirthday</span><span class="keyword">-</span><span class="default">$nowdate</span><span class="keyword">)/(</span><span class="default">60</span><span class="keyword">*</span><span class="default">60</span><span class="keyword">*</span><span class="default">24</span><span class="keyword">));
<br />

<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$daycount</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79598""></a>
  <div class="note">
   <strong class="user">brian at b5media dot com</strong>
   <a href="#79598" class="date">05-Dec-2007 01:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Remember if you just want the days in the current month, use the date function:<br />
$days = date("t");</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76520""></a>
  <div class="note">
   <strong class="user">geko45pj at yahoo dot com</strong>
   <a href="#76520" class="date">19-Jul-2007 08:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment"># PHP Calendar (version 2.3), written by Keith Devens<br />
<br />
</span><span class="keyword">function </span><span class="default">generate_calendar</span><span class="keyword">(</span><span class="default">$year</span><span class="keyword">, </span><span class="default">$month</span><span class="keyword">, </span><span class="default">$days </span><span class="keyword">= array(), </span><span class="default">$day_name_length </span><span class="keyword">= </span><span class="default">3</span><span class="keyword">, </span><span class="default">$month_href </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$first_day </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$pn </span><span class="keyword">= array()){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$first_of_month </span><span class="keyword">= </span><span class="default">gmmktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$month</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="default">$year</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">#remember that mktime will automatically correct if invalid dates are entered<br />
&nbsp;&nbsp;&nbsp; # for instance, mktime(0,0,0,12,32,1997) will be the date for Jan 1, 1998<br />
&nbsp;&nbsp;&nbsp; # this provides a built in "rounding" feature to generate_calendar()<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$day_names </span><span class="keyword">= array(); </span><span class="comment">#generate all the day names according to the current locale<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">for(</span><span class="default">$n</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">,</span><span class="default">$t</span><span class="keyword">=(</span><span class="default">3</span><span class="keyword">+</span><span class="default">$first_day</span><span class="keyword">)*</span><span class="default">86400</span><span class="keyword">; </span><span class="default">$n</span><span class="keyword">&lt;</span><span class="default">7</span><span class="keyword">; </span><span class="default">$n</span><span class="keyword">++,</span><span class="default">$t</span><span class="keyword">+=</span><span class="default">86400</span><span class="keyword">) </span><span class="comment">#January 4, 1970 was a Sunday<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$day_names</span><span class="keyword">[</span><span class="default">$n</span><span class="keyword">] = </span><span class="default">ucfirst</span><span class="keyword">(</span><span class="default">gmstrftime</span><span class="keyword">(</span><span class="string">'%A'</span><span class="keyword">,</span><span class="default">$t</span><span class="keyword">)); </span><span class="comment">#%A means full textual day name<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">list(</span><span class="default">$month</span><span class="keyword">, </span><span class="default">$year</span><span class="keyword">, </span><span class="default">$month_name</span><span class="keyword">, </span><span class="default">$weekday</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">','</span><span class="keyword">,</span><span class="default">gmstrftime</span><span class="keyword">(</span><span class="string">'%m,%Y,%B,%w'</span><span class="keyword">,</span><span class="default">$first_of_month</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$weekday </span><span class="keyword">= (</span><span class="default">$weekday </span><span class="keyword">+ </span><span class="default">7 </span><span class="keyword">- </span><span class="default">$first_day</span><span class="keyword">) % </span><span class="default">7</span><span class="keyword">; </span><span class="comment">#adjust for $first_day<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$title&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">htmlentities</span><span class="keyword">(</span><span class="default">ucfirst</span><span class="keyword">(</span><span class="default">$month_name</span><span class="keyword">)).</span><span class="string">'&amp;nbsp;'</span><span class="keyword">.</span><span class="default">$year</span><span class="keyword">;&nbsp; </span><span class="comment">#note that some locales don't capitalize month and day names<br />
<br />
&nbsp;&nbsp;&nbsp; #Begin calendar. Uses a real &lt;caption&gt;. See <a href="http://diveintomark.org/archives/2002/07/03" rel="nofollow" target="_blank">http://diveintomark.org/archives/2002/07/03</a><br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">@list(</span><span class="default">$p</span><span class="keyword">, </span><span class="default">$pl</span><span class="keyword">) = </span><span class="default">each</span><span class="keyword">(</span><span class="default">$pn</span><span class="keyword">); @list(</span><span class="default">$n</span><span class="keyword">, </span><span class="default">$nl</span><span class="keyword">) = </span><span class="default">each</span><span class="keyword">(</span><span class="default">$pn</span><span class="keyword">); </span><span class="comment">#previous and next links, if applicable<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$p</span><span class="keyword">) </span><span class="default">$p </span><span class="keyword">= </span><span class="string">'&lt;span class="calendar-prev"&gt;'</span><span class="keyword">.(</span><span class="default">$pl </span><span class="keyword">? </span><span class="string">'&lt;a href="'</span><span class="keyword">.</span><span class="default">htmlspecialchars</span><span class="keyword">(</span><span class="default">$pl</span><span class="keyword">).</span><span class="string">'"&gt;'</span><span class="keyword">.</span><span class="default">$p</span><span class="keyword">.</span><span class="string">'&lt;/a&gt;' </span><span class="keyword">: </span><span class="default">$p</span><span class="keyword">).</span><span class="string">'&lt;/span&gt;&amp;nbsp;'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$n</span><span class="keyword">) </span><span class="default">$n </span><span class="keyword">= </span><span class="string">'&amp;nbsp;&lt;span class="calendar-next"&gt;'</span><span class="keyword">.(</span><span class="default">$nl </span><span class="keyword">? </span><span class="string">'&lt;a href="'</span><span class="keyword">.</span><span class="default">htmlspecialchars</span><span class="keyword">(</span><span class="default">$nl</span><span class="keyword">).</span><span class="string">'"&gt;'</span><span class="keyword">.</span><span class="default">$n</span><span class="keyword">.</span><span class="string">'&lt;/a&gt;' </span><span class="keyword">: </span><span class="default">$n</span><span class="keyword">).</span><span class="string">'&lt;/span&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$calendar </span><span class="keyword">= </span><span class="string">'&lt;table class="calendar"&gt;'</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'&lt;caption class="calendar-month"&gt;'</span><span class="keyword">.</span><span class="default">$p</span><span class="keyword">.(</span><span class="default">$month_href </span><span class="keyword">? </span><span class="string">'&lt;a href="'</span><span class="keyword">.</span><span class="default">htmlspecialchars</span><span class="keyword">(</span><span class="default">$month_href</span><span class="keyword">).</span><span class="string">'"&gt;'</span><span class="keyword">.</span><span class="default">$title</span><span class="keyword">.</span><span class="string">'&lt;/a&gt;' </span><span class="keyword">: </span><span class="default">$title</span><span class="keyword">).</span><span class="default">$n</span><span class="keyword">.</span><span class="string">"&lt;/caption&gt;\n&lt;tr&gt;"</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$day_name_length</span><span class="keyword">){ </span><span class="comment">#if the day names should be shown ($day_name_length &gt; 0)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; #if day_name_length is &gt;3, the full name of the day will be printed<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">foreach(</span><span class="default">$day_names </span><span class="keyword">as </span><span class="default">$d</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$calendar </span><span class="keyword">.= </span><span class="string">'&lt;th abbr="'</span><span class="keyword">.</span><span class="default">htmlentities</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">).</span><span class="string">'"&gt;'</span><span class="keyword">.</span><span class="default">htmlentities</span><span class="keyword">(</span><span class="default">$day_name_length </span><span class="keyword">&lt; </span><span class="default">4 </span><span class="keyword">? </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$day_name_length</span><span class="keyword">) : </span><span class="default">$d</span><span class="keyword">).</span><span class="string">'&lt;/th&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$calendar </span><span class="keyword">.= </span><span class="string">"&lt;/tr&gt;\n&lt;tr&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$weekday </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">) </span><span class="default">$calendar </span><span class="keyword">.= </span><span class="string">'&lt;td colspan="'</span><span class="keyword">.</span><span class="default">$weekday</span><span class="keyword">.</span><span class="string">'"&gt;&amp;nbsp;&lt;/td&gt;'</span><span class="keyword">; </span><span class="comment">#initial 'empty' days<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">for(</span><span class="default">$day</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">,</span><span class="default">$days_in_month</span><span class="keyword">=</span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">'t'</span><span class="keyword">,</span><span class="default">$first_of_month</span><span class="keyword">); </span><span class="default">$day</span><span class="keyword">&lt;=</span><span class="default">$days_in_month</span><span class="keyword">; </span><span class="default">$day</span><span class="keyword">++,</span><span class="default">$weekday</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$weekday </span><span class="keyword">== </span><span class="default">7</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$weekday&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="comment">#start a new week<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$calendar </span><span class="keyword">.= </span><span class="string">"&lt;/tr&gt;\n&lt;tr&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(isset(</span><span class="default">$days</span><span class="keyword">[</span><span class="default">$day</span><span class="keyword">]) and </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$days</span><span class="keyword">[</span><span class="default">$day</span><span class="keyword">])){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; @list(</span><span class="default">$link</span><span class="keyword">, </span><span class="default">$classes</span><span class="keyword">, </span><span class="default">$content</span><span class="keyword">) = </span><span class="default">$days</span><span class="keyword">[</span><span class="default">$day</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">))&nbsp; </span><span class="default">$content&nbsp; </span><span class="keyword">= </span><span class="default">$day</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$calendar </span><span class="keyword">.= </span><span class="string">'&lt;td'</span><span class="keyword">.(</span><span class="default">$classes </span><span class="keyword">? </span><span class="string">' class="'</span><span class="keyword">.</span><span class="default">htmlspecialchars</span><span class="keyword">(</span><span class="default">$classes</span><span class="keyword">).</span><span class="string">'"&gt;' </span><span class="keyword">: </span><span class="string">'&gt;'</span><span class="keyword">).<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (</span><span class="default">$link </span><span class="keyword">? </span><span class="string">'&lt;a href="'</span><span class="keyword">.</span><span class="default">htmlspecialchars</span><span class="keyword">(</span><span class="default">$link</span><span class="keyword">).</span><span class="string">'"&gt;'</span><span class="keyword">.</span><span class="default">$content</span><span class="keyword">.</span><span class="string">'&lt;/a&gt;' </span><span class="keyword">: </span><span class="default">$content</span><span class="keyword">).</span><span class="string">'&lt;/td&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else </span><span class="default">$calendar </span><span class="keyword">.= </span><span class="string">"&lt;td&gt;</span><span class="default">$day</span><span class="string">&lt;/td&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$weekday </span><span class="keyword">!= </span><span class="default">7</span><span class="keyword">) </span><span class="default">$calendar </span><span class="keyword">.= </span><span class="string">'&lt;td colspan="'</span><span class="keyword">.(</span><span class="default">7</span><span class="keyword">-</span><span class="default">$weekday</span><span class="keyword">).</span><span class="string">'"&gt;&amp;nbsp;&lt;/td&gt;'</span><span class="keyword">; </span><span class="comment">#remaining "empty" days<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$calendar</span><span class="keyword">.</span><span class="string">"&lt;/tr&gt;\n&lt;/table&gt;\n"</span><span class="keyword">;<br />
}<br />
echo </span><span class="default">generate_calendar</span><span class="keyword">(</span><span class="default">2010</span><span class="keyword">, </span><span class="default">12</span><span class="keyword">, </span><span class="default">16</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="default">NULL</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">15</span><span class="keyword">, </span><span class="default">$first_of_month</span><span class="keyword">, </span><span class="default">$day_names</span><span class="keyword">, </span><span class="default">$day_names</span><span class="keyword">[</span><span class="default">$n</span><span class="keyword">]);<br />
</span><span class="comment">#echo generate_calendar($year, $month, $days,$day_name_length,$month_href,$first_day,$pn);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41650""></a>
  <div class="note">
   <strong class="user">paul (at) bughunt3r.com</strong>
   <a href="#41650" class="date">18-Apr-2004 05:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a nifty function to return the date for easter for ranges beyond 2037 or before 1970.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">str_easter_date </span><span class="keyword">(</span><span class="default">$year</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$days </span><span class="keyword">= </span><span class="default">easter_days </span><span class="keyword">(</span><span class="default">$year</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$days_in_march </span><span class="keyword">= </span><span class="default">cal_days_in_month </span><span class="keyword">(</span><span class="default">CAL_GREGORIAN</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">$year</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ((</span><span class="default">$days </span><span class="keyword">+ </span><span class="default">21</span><span class="keyword">) &lt; </span><span class="default">$days_in_march</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$month </span><span class="keyword">= </span><span class="string">"March"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$date </span><span class="keyword">= </span><span class="default">$days </span><span class="keyword">+ </span><span class="default">21</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$month </span><span class="keyword">= </span><span class="string">"April"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$date </span><span class="keyword">= (</span><span class="default">$days </span><span class="keyword">+ </span><span class="default">21</span><span class="keyword">) - </span><span class="default">$days_in_march</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">"</span><span class="default">$month</span><span class="string"> </span><span class="default">$date</span><span class="string">, </span><span class="default">$year</span><span class="string">"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41554""></a>
  <div class="note">
   <strong class="user">jeffbeall at comcast dot net</strong>
   <a href="#41554" class="date">14-Apr-2004 07:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This will work great in future dates but will give the wrong answer for dates before 1550 (approx) when leap year was introduced and the calendar lost a year or two.<br />
Sorry now to be more specific it has been a while sine I had to account for those later dates and had to take that into account but just a heads up for others to watch out.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="38666""></a>
  <div class="note">
   <strong class="user">dbindel at austin dot rr dot com</strong>
   <a href="#38666" class="date">02-Jan-2004 06:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a one-line function I just wrote to find the numbers of days in a month that doesn't depend on any other functions.
<br />

<br />
The reason I made this is because I just found out I forgot to compile PHP with support for calendars, and a class I'm writing for my website's open source section was broken. So rather than recompiling PHP (which I will get around to tomorrow I guess), I just wrote this function which should work just as well, and will always work without the requirement of PHP's calendar extension or any other PHP functions for that matter.
<br />

<br />
I learned the days of the month using the old knuckle &amp; inbetween knuckle method, so that should explain the mod 7 part. :)
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">/*
<br />
&nbsp;* days_in_month($month, $year)
<br />
&nbsp;* Returns the number of days in a given month and year, taking into account leap years.
<br />
&nbsp;*
<br />
&nbsp;* $month: numeric month (integers 1-12)
<br />
&nbsp;* $year: numeric year (any integer)
<br />
&nbsp;*
<br />
&nbsp;* Prec: $month is an integer between 1 and 12, inclusive, and $year is an integer.
<br />
&nbsp;* Post: none
<br />
&nbsp;*/
<br />
// corrected by ben at sparkyb dot net
<br />
</span><span class="keyword">function </span><span class="default">days_in_month</span><span class="keyword">(</span><span class="default">$month</span><span class="keyword">, </span><span class="default">$year</span><span class="keyword">)
<br />
{
<br />
</span><span class="comment">// calculate number of days in a month
<br />
</span><span class="keyword">return </span><span class="default">$month </span><span class="keyword">== </span><span class="default">2 </span><span class="keyword">? (</span><span class="default">$year </span><span class="keyword">% </span><span class="default">4 </span><span class="keyword">? </span><span class="default">28 </span><span class="keyword">: (</span><span class="default">$year </span><span class="keyword">% </span><span class="default">100 </span><span class="keyword">? </span><span class="default">29 </span><span class="keyword">: (</span><span class="default">$year </span><span class="keyword">% </span><span class="default">400 </span><span class="keyword">? </span><span class="default">28 </span><span class="keyword">: </span><span class="default">29</span><span class="keyword">))) : ((</span><span class="default">$month </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">) % </span><span class="default">7 </span><span class="keyword">% </span><span class="default">2 </span><span class="keyword">? </span><span class="default">30 </span><span class="keyword">: </span><span class="default">31</span><span class="keyword">);
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Enjoy,
<br />
David Bindel</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>fwrite 的别名</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.fputcsv.html">? fputcsv</a></li>
      <li style="float: right;"><a href="function.fread.html">fread ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.filesystem.html">Filesystem 函数</a></li>
    <li>fwrite 的别名</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.fputs" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">fputs</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">fputs</span> &mdash; <span class="dc-title"><span class="function"><a href="function.fwrite.html" class="function">fwrite()</a></span> 的别名</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.fputs-description">
  <h3 class="title">说明</h3>
  <p class="simpara">
   此函数是该函数的别名：<span class="function"><a href="function.fwrite.html" class="function">fwrite()</a></span>。
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="101346""></a>
  <div class="note">
   <strong class="user">Nile River</strong>
   <a href="#101346" class="date">11-Dec-2010 07:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This will create a visitor count for your webpage<br />
<br />
<span class="default">&lt;?php<br />
<br />
$filename </span><span class="keyword">= </span><span class="string">'sitevisitors.txt'</span><span class="keyword">;<br />
<br />
if (</span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">)) <br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">file</span><span class="keyword">(</span><span class="string">'sitevisitors.txt'</span><span class="keyword">); <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] ++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$fp </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">"sitevisitors.txt"</span><span class="keyword">, </span><span class="string">"w"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">fputs </span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="string">"</span><span class="default">$count</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]</span><span class="string">"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">fclose </span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$count</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; } <br />
<br />
else <br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$fh </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">"sitevisitors.txt"</span><span class="keyword">, </span><span class="string">"w"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$fh</span><span class="keyword">==</span><span class="default">false</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; die(</span><span class="string">"unable to create file"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">fputs </span><span class="keyword">(</span><span class="default">$fh</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">fclose </span><span class="keyword">(</span><span class="default">$fh</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">file</span><span class="keyword">(</span><span class="string">'sitevisitors.txt'</span><span class="keyword">); <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$count</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="27044""></a>
  <div class="note">
   <strong class="user">rembert at floating-point dot nl</strong>
   <a href="#27044" class="date">21-Nov-2002 01:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Adding to Adam (Nedstat):<br />
fputs without the length parm just writes all data up to but not including the first 0 byte it encounters. <br />
<br />
Therefore fputs($fp,"hello\0world") will only write hello to $fp whereas<br />
fputs($fp,"hello\0world",11) will write both words.<br />
<br />
If this doesn't make sense for you, remember strings are always terminated with that 0 byte. Binary data doesn't have such a terminator byte as a 0 byte can be a completely valid piece of data therefore you always need to know the length of the binary datapart.<br />
<br />
BTW strlen() is binary safe, so you can use that to get the length of the binary data part as well - this is different from C which counts the number of chars up to the 0 byte. So the example above could also be written as:<br />
<br />
fputs($fp,"hello\0world",strlen("hello\0world"))</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="12496""></a>
  <div class="note">
   <strong class="user">yvan dot rivard at cesart dot com</strong>
   <a href="#12496" class="date">17-Apr-2001 11:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This might seem silly for experienced users, but this bugged me for about two hours (searching and trying to debug the damn thing).
<br />

<br />
If you're on a Windows system doing tests on a Linux/Apache setup, and you're writing stuff to a text file (then load that file to see if your content is being written properly) and you realize only your first string is in there, your problem is not your Windows, not Linux and not Apache. It's probably Samba (the thing that makes it possible for your Linux and Windows boxes to talk to each other) that's caching your file... Try viewing your file via telnet or simply copy your file then read that copy.
<br />

<br />
You can see content is being written to your file anyway, because even though you don't see your new content (using notepad for example), you do see your filesize increasing as you add more text to your file.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="8946""></a>
  <div class="note">
   
   <a href="#8946" class="date">08-Oct-2000 09:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can use here-documents in PHP but not for printing to a file pointer.
<br />

<br />
There's a lot to say on them so just go to the page: <a href="http://www.php.net/manual/language.types.string.php" rel="nofollow" target="_blank">http://www.php.net/manual/language.types.string.php</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="6085""></a>
  <div class="note">
   <strong class="user">Doug at Here dot Com</strong>
   <a href="#6085" class="date">01-Jul-2000 02:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The way I understand fputs (which is purported as an alias to fwrite which can be "Binary Safe")...
<br />

<br />
<span class="default">&lt;?php
<br />
$fp </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">"something.txt"</span><span class="keyword">,</span><span class="string">"w"</span><span class="keyword">);
<br />
</span><span class="default">$string </span><span class="keyword">= </span><span class="string">"Hello World\\n"</span><span class="keyword">;&nbsp; </span><span class="comment">// escape the slash from being magically 
<br />
// being transformed into a newline 
<br />
</span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">); </span><span class="comment">// will proccess /n as newline ...
<br />
</span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">)); </span><span class="comment">// will write the entire string to file without changing the '/n' 
<br />
// into a single byte for newline on Unix-like machines or CR/LF on Win32 machines
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Hope this helps explain the definition of "could be Binary Safe". This is the reason why you must specify the length!
<br />

<br />
--Doug</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="468""></a>
  <div class="note">
   <strong class="user">bschuetz at affinity dot net</strong>
   <a href="#468" class="date">23-Dec-1998 04:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Length is required if you are writing out a lot of data.&nbsp; For instance, if you are base64 decoding an email attachment and writing it out to a file you have to specify the length if the file is over a certian size or else the binary data will be corrupt.
<br />

<br />
fputs($fp,$binary,strlen($binary));
<br />

<br />
Will yield the desired results.
<br />

<br />
When tested with a 1k the length wasn't required but with a larger file, around 27k it needs the length to work properly.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

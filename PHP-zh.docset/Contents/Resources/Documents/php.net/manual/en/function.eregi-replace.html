<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>不区分大小写的正则表达式替换</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.ereg.html">? ereg</a></li>
      <li style="float: right;"><a href="function.eregi.html">eregi ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.regex.html">POSIX Regex 函数</a></li>
    <li>不区分大小写的正则表达式替换</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.eregi-replace" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">eregi_replace</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">eregi_replace</span> &mdash; <span class="dc-title">不区分大小写的正则表达式替换</span></p>

 </div>
 <div class="refsect1 unknown-unknown-unknown-seealsr" id="refsect1-function.eregi-replace-unknown-unknown-unknown-seealsr">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><strong>eregi_replace</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$pattern</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$replacement</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$string</code></span>
   )</div>

  <p class="para rdfs-comment">
   本函数和 <span class="function"><a href="function.ereg-replace.html" class="function">ereg_replace()</a></span>
   完全相同，只除了在匹配字母字符时忽略大小写的区别。
  </p>
  <p class="para">
   <div class="example" id="example-5218">
    <p><strong>Example #1 高亮搜索结果</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$pattern&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'(&gt;[^&lt;]*)('</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">quotemeta</span><span style="color: #007700">(</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">'search'</span><span style="color: #007700">])&nbsp;.</span><span style="color: #DD0000">')'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$replacement&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'\\1&lt;span&nbsp;class="search"&gt;\\2&lt;/span&gt;'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$body&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">eregi_replace</span><span style="color: #007700">(</span><span style="color: #0000BB">$pattern</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$replacement</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$body</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   参见 <span class="function"><a href="function.ereg.html" class="function">ereg()</a></span>，<span class="function"><a href="function.eregi.html" class="function">eregi()</a></span>
   和 <span class="function"><a href="function.ereg-replace.html" class="function">ereg_replace()</a></span>。
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="107099""></a>
  <div class="note">
   <strong class="user">dave at bevhost dot com</strong>
   <a href="#107099" class="date">06-Jan-2012 09:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The easiest function to replace this with is mb_eregi_replace(),<br />
which is the mutibyte version that works on unicode characters such as chinese letters in your strings.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83665""></a>
  <div class="note">
   <strong class="user">jgriggs777 at yahoo dot com</strong>
   <a href="#83665" class="date">06-Jun-2008 04:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
My apologies.&nbsp; I'm a PHP newbie and the count function didn't work right if you have more than one "keyword".&nbsp; I searched and spent a long time to get this to work right, so wanted to share it.<br />
<br />
This is very easy to use by doing the following.<br />
<br />
$text - is the text to search<br />
$words - are the words to highlight (search text)<br />
$the_place - is so that you can tell your users what "area" was searched.<br />
<br />
<span class="default">&lt;?php <br />
<br />
</span><span class="keyword">function </span><span class="default">highlight_this</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">, </span><span class="default">$words</span><span class="keyword">, </span><span class="default">$the_place</span><span class="keyword">) { <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$words </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$words</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$the_count </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$wordsArray </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">, </span><span class="default">$words</span><span class="keyword">); <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$wordsArray </span><span class="keyword">as </span><span class="default">$word</span><span class="keyword">) { <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">)) != </span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//exclude these words from being replaced<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$exclude_list </span><span class="keyword">= array(</span><span class="string">"word1"</span><span class="keyword">, </span><span class="string">"word2"</span><span class="keyword">, </span><span class="string">"word3"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Check if it's excluded<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if ( </span><span class="default">in_array</span><span class="keyword">( </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">), </span><span class="default">$exclude_list </span><span class="keyword">) ) {<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="default">str_ireplace</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">, </span><span class="string">"&lt;span class=\"highlight\"&gt;"</span><span class="keyword">.</span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">).</span><span class="string">"&lt;/span&gt;"</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">, </span><span class="default">$count</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$the_count </span><span class="keyword">= </span><span class="default">$count </span><span class="keyword">+ </span><span class="default">$the_count</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//added to show how many keywords were found<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="string">"&lt;br&gt;&lt;div class=\"emphasis\"&gt;A search for &lt;strong&gt;" </span><span class="keyword">. </span><span class="default">$words</span><span class="keyword">. </span><span class="string">"&lt;/strong&gt; found &lt;strong&gt;" </span><span class="keyword">. </span><span class="default">$the_count </span><span class="keyword">. </span><span class="string">"&lt;/strong&gt; matches within the " </span><span class="keyword">. </span><span class="default">$the_place</span><span class="keyword">. </span><span class="string">".&lt;/div&gt;&lt;br&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$text</span><span class="keyword">;<br />
} <br />
<br />
</span><span class="comment">//example of how to use<br />
</span><span class="default">$text_to_highlight </span><span class="keyword">= </span><span class="default">highlight_this</span><span class="keyword">(</span><span class="default">$text_to_highlight</span><span class="keyword">, </span><span class="default">$search_text</span><span class="keyword">, </span><span class="string">"Place you searched"</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83643""></a>
  <div class="note">
   <strong class="user">jgriggs777 at yahoo dot com</strong>
   <a href="#83643" class="date">05-Jun-2008 09:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I modified the script from the note below this one so that you could show how many matches were found.&nbsp; I know this should probably be posted in the str_ireplace() area, so I will post it there afterwards.<br />
<br />
$text - is the text to search<br />
$words - are the words to highlight (search text)<br />
$the_place - is so that you can tell your users what "area" was searched.<br />
<br />
<span class="default">&lt;?php <br />
</span><span class="keyword">function </span><span class="default">highlight_this</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">, </span><span class="default">$words</span><span class="keyword">, </span><span class="default">$the_place</span><span class="keyword">) { <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$words </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$words</span><span class="keyword">); <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$wordsArray </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">, </span><span class="default">$words</span><span class="keyword">); <br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$wordsArray </span><span class="keyword">as </span><span class="default">$word</span><span class="keyword">) { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">)) != </span><span class="default">0</span><span class="keyword">) <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="default">str_ireplace</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">, </span><span class="string">"&lt;span class=\"highlight\"&gt;"</span><span class="keyword">.</span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">).</span><span class="string">"&lt;/span&gt;"</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">, </span><span class="default">$count</span><span class="keyword">); <br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//added to show how many keywords were found<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="string">"&lt;br&gt;&lt;div class=\"emphasis\"&gt;A search for &lt;strong&gt;" </span><span class="keyword">. </span><span class="default">$words</span><span class="keyword">. </span><span class="string">"&lt;/strong&gt; found &lt;strong&gt;" </span><span class="keyword">. </span><span class="default">$count </span><span class="keyword">. </span><span class="string">"&lt;/strong&gt; matches within the " </span><span class="keyword">. </span><span class="default">$the_place</span><span class="keyword">. </span><span class="string">".&lt;/div&gt;&lt;br&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//end script modification<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$text</span><span class="keyword">;<br />
} <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83322""></a>
  <div class="note">
   <strong class="user">a dot dotreppe at gmail dot com</strong>
   <a href="#83322" class="date">21-May-2008 12:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi everyone.
<br />
I saw a lot of highlighting functions, but no one was simple... maybe I missed a part of discussion ?
<br />

<br />
Anyway, I think this function is the easiest:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">highlight</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">, </span><span class="default">$words</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$words </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$words</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$wordsArray </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">, </span><span class="default">$words</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$wordsArray </span><span class="keyword">as </span><span class="default">$word</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">)) != </span><span class="default">0</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="default">eregi_replace</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">, </span><span class="string">'&lt;span class="highlight"&gt;\\0&lt;/span&gt;'</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$text</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81337""></a>
  <div class="note">
   <strong class="user">dan at dotgospel dot com</strong>
   <a href="#81337" class="date">23-Feb-2008 04:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
/*******************************************************<br />
Function highlights the text. You can replace the html tags with whatever you like. $x is the string, $var is the string to be highlighted. We explode the string to highlight more than one word.<br />
*/<br />
<br />
function highlight($x,$var) {<br />
&nbsp;&nbsp;&nbsp; $var = explode(" ",$var);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; for($j=0; $j&lt; count($var); $j++){&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $xtemp = "";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $i=0;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while($i&lt;strlen($x)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if((($i + strlen($var[$j])) &lt;= strlen($x)) &amp;&amp; (strcasecmp($var[$j], substr($x, $i, strlen($var[$j]))) == 0)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $xtemp .= "&lt;b&gt;" . substr($x, $i , strlen($var[$j])) . "&lt;/b&gt;";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $i += strlen($var[$j]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $xtemp .= $x{$i};<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $i++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $x = $xtemp;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return $x;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79997""></a>
  <div class="note">
   <strong class="user">mp3spl at o2 dot pl</strong>
   <a href="#79997" class="date">23-Dec-2007 01:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Nice way to highlight that what someone search.<br />
<br />
For example is some one search for "Wire Mobile 6"<br />
<br />
It will highlight every word separated even if found "Wire Xp and some mobile stuff"<br />
<br />
&copy; and &reg; are importiant, because without special signs, string in second turn will convert also &lt;span class="searchtext"&gt;<br />
which will be already in text.<br />
<br />
&lt;?<br />
<br />
$searchcolor = explode(' ',$search);<br />
$ilosc = count($searchcolor);<br />
$ilosc2 = "0";<br />
while ($ilosc2 != $ilosc ) {<br />
$name = eregi_replace ($searchcolor[$ilosc2],'&copy;'.$searchcolor[$ilosc2].'&reg;',$name);<br />
$ilosc2++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
$name = str_replace('&copy;','&lt;span class="searchtext"&gt;',$name);<br />
$name = str_replace('&reg;','&lt;/span&gt;',$name);<br />
<br />
echo $name;<br />
<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79962""></a>
  <div class="note">
   <strong class="user">augusto at fagioli dot biz</strong>
   <a href="#79962" class="date">21-Dec-2007 09:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
related to the private at sfiac dot net function,<br />
please note that you&nbsp; can add a dot in the <br />
<br />
$c=ereg_replace".<br />
&nbsp;&nbsp; "("[-a-z0-9!#$%&amp;\'*+/=?^_`{|}~]+@([.]?[a-zA-Z0-9_/-])*",".<br />
&nbsp;&nbsp; "$e,$c); <br />
<br />
having it to find email address like user.name@test.com<br />
<br />
this is my example<br />
$c=ereg_replace".<br />
&nbsp;&nbsp; "("[-a-z0-9.!#$%&amp;\'*+/=?^_`{|}~]+@([.]?[a-zA-Z0-9_/-])*",".<br />
&nbsp;&nbsp; "$e,$c);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79451""></a>
  <div class="note">
   <strong class="user">webmaster at hhgroups dot com</strong>
   <a href="#79451" class="date">28-Nov-2007 10:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Your remove links functions are incorrect if there are a php var in the URL, we have to add '?' character inside our pattern, I have three this function working correctly with php vars:<br />
<br />
function transformUrl($str){<br />
&nbsp;&nbsp;&nbsp; $str=utf8_decode(urldecode($str));<br />
&nbsp;&nbsp;&nbsp; $str=eregi_replace("(^| |&gt;)(www([.]?[a-zA-Z0-9_/-?])[^&lt;]*)", "\\1&lt;a href=\"<a href="http://" rel="nofollow" target="_blank">http://</a>\\2\"&gt;Look link&lt;/a&gt;", $str);<br />
&nbsp;&nbsp;&nbsp; $str=eregi_replace("(^| |&gt;)(<a href="http://www([.]?[a-zA-Z0-9_/-?]" rel="nofollow" target="_blank">http://www([.]?[a-zA-Z0-9_/-?]</a>)[^&lt;]*)", "\\1&lt;a href=\"\\2\"&gt;Look link&lt;/a&gt;", $str);<br />
&nbsp;&nbsp;&nbsp; $str=eregi_replace("(^| |&gt;)(<a href="http://([.]?[a-zA-Z0-9_/-?]" rel="nofollow" target="_blank">http://([.]?[a-zA-Z0-9_/-?]</a>)[^&lt;]*)", "\\1&lt;a href=\"\\2\"&gt;Look link&lt;/a&gt;", $str);<br />
&nbsp;&nbsp;&nbsp; return utf8_encode($str);<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75965""></a>
  <div class="note">
   <strong class="user">php[at]drixe[dot]net</strong>
   <a href="#75965" class="date">24-Jun-2007 09:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Melissa,<br />
This one is a better setup for your marvelous code.<br />
It handles Melissa Magic and also Magic Melissa<br />
<br />
function underline($subject, $word)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $mywords = explode(" ",$word);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for ($j=0;$j&lt;count($mywords);$j++)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $regex_chars = '\.+?(){}[]^$';<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for ($i=0; $i&lt;strlen($regex_chars); $i++)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $char = substr($regex_chars, $i, 1);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $mywords[$j] = str_replace($char, '\\'.$char, $mywords[$j]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $mywords[$j] = '(.*)('.$mywords[$j].')(.*)';<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $subject =&nbsp; eregi_replace($mywords[$j], '\1&lt;span style="background:#ACA;padding:0;margin:0;"&gt;\2&lt;/span&gt;\3', $subject);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $subject;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75673""></a>
  <div class="note">
   <strong class="user">spiritualmind at gmail dot com</strong>
   <a href="#75673" class="date">11-Jun-2007 05:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
eregi_replace seems not to deal with UTF8 chars !<br />
I needed to utf8_decode / encode my string to parse it in eregi_replace :<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; $input </span><span class="keyword">= </span><span class="string">"string_from_utf8_form" </span><span class="keyword">;<br />
&nbsp; </span><span class="default">$output </span><span class="keyword">= </span><span class="default">utf8_encode</span><span class="keyword">(</span><span class="default">eregi_replace</span><span class="keyword">(</span><span class="string">"(pattern)"</span><span class="keyword">, </span><span class="string">"replacement"</span><span class="keyword">, </span><span class="default">utf8_decode</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">)) ;<br />
<br />
&nbsp;echo </span><span class="default">$output </span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
I think UTF8 is not totally supported by PHP.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70632""></a>
  <div class="note">
   <strong class="user">Vladimir Luchaninov</strong>
   <a href="#70632" class="date">22-Oct-2006 04:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you have plain text e-mails and links but need to make them real links<br />
<br />
&lt;?<br />
function replaceLinks($text) {<br />
&nbsp;&nbsp;&nbsp; // convert support@pogoda.in into<br />
&nbsp;&nbsp;&nbsp; // &lt;a href="<a href="mailto:support@pogoda.in" rel="nofollow" target="_blank">mailto:support@pogoda.in</a>"&gt;<br />
&nbsp;&nbsp;&nbsp; // support@pogoda.in&lt;/a&gt;<br />
&nbsp;&nbsp;&nbsp; $text = ereg_replace('[-a-z0-9!#$%&amp;\'*+/=?^_`{|}~]+@([.]?[a-zA-Z0-9_/-])*',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; '&lt;a href="<a href="mailto:" rel="nofollow" target="_blank">mailto:</a>\\0"&gt;\\0&lt;/a&gt;',$text);<br />
<br />
&nbsp;&nbsp;&nbsp; // convert <a href="http://www.pogoda.in/new_york/eng/ into" rel="nofollow" target="_blank">http://www.pogoda.in/new_york/eng/ into</a><br />
&nbsp;&nbsp;&nbsp; // &lt;a href="<a href="http://pogoda.in/new_york/eng/" rel="nofollow" target="_blank">http://pogoda.in/new_york/eng/</a>"&gt;<br />
&nbsp;&nbsp;&nbsp; // pogoda.in/new_york/eng/&lt;/a&gt;<br />
&nbsp;&nbsp;&nbsp; $text = ereg_replace('[a-zA-Z]+://(([.]?[a-zA-Z0-9_/-])*)',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; '&lt;a href="\\0"&gt;\\1&lt;/a&gt;',$text);<br />
<br />
&nbsp;&nbsp;&nbsp; // convert www.pogoda.in/new_york/eng/ into<br />
&nbsp;&nbsp;&nbsp; // &lt;a href="<a href="http://www.pogoda.in/new_york/eng/" rel="nofollow" target="_blank">http://www.pogoda.in/new_york/eng/</a>"&gt;<br />
&nbsp;&nbsp;&nbsp; // www.pogoda.in/new_york/eng/&lt;/a&gt;<br />
&nbsp;&nbsp;&nbsp; $text = ereg_replace('(^| )(www([-]*[.]?[a-zA-Z0-9_/-?&amp;%])*)',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ' &lt;a href="<a href="http://" rel="nofollow" target="_blank">http://</a>\\2"&gt;\\2&lt;/a&gt;',$text);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return $text;<br />
}<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="66146""></a>
  <div class="note">
   <strong class="user">carlos at braziland dot com</strong>
   <a href="#66146" class="date">16-May-2006 02:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
@bluedragonx at gmail dot com: Now you're calling two functions instead of one. I'm trully curious if that would still be faster. <br />
<br />
My original post was just to highlight the need to escape characters that could be used to abuse a contact form. Something everyone should do, especially if doing it for a customer.<br />
<br />
But bluedragonx, thanks for your input.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="64455""></a>
  <div class="note">
   <strong class="user">melissa at melissagirl dot com</strong>
   <a href="#64455" class="date">14-Apr-2006 06:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a nice case-insensitive highlight function that ignores any regular expression characters and highlights a word and leaves it in whatever case it was before:<br />
<br />
&lt;?<br />
function highlight($word, $subject) {<br />
&nbsp;&nbsp;&nbsp; $regex_chars = '\.+?(){}[]^$';<br />
&nbsp;&nbsp;&nbsp; for ($i=0; $i&lt;strlen($regex_chars); $i++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $char = substr($regex_chars, $i, 1);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $word = str_replace($char, '\\'.$char, $word);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; $word = '(.*)('.$word.')(.*)';<br />
&nbsp;&nbsp;&nbsp; return eregi_replace($word, '\1&lt;span class="highlight"&gt;\2&lt;/span&gt;\3', $subject);<br />
}<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58380""></a>
  <div class="note">
   
   <a href="#58380" class="date">02-Nov-2005 12:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
@bluedragonx: You're right. And i got the order of the params wrong as well, must've been sleepy when i wrote that note. For what it's worth:<br />
<br />
&lt;? $_POST['email'] = str_replace("[at]", "@", strtolower($_POST['email'])); ?&gt;<br />
<br />
Not similar to Carlos' code though, since it'll convert all characters to lowercase.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57856""></a>
  <div class="note">
   <strong class="user">bluedragonx at gmail dot com</strong>
   <a href="#57856" class="date">17-Oct-2005 01:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Actually that wouldn't work because str_replace is case sensitive.&nbsp; So any instances of [AT] [aT] or [At] would be ignored.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55590""></a>
  <div class="note">
   <strong class="user">php dot net at nr78 dot net</strong>
   <a href="#55590" class="date">08-Aug-2005 02:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
@carlos at braziland dot com: Hate to be a wisecrack, but i believe the following code might be slightly faster with the same result:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$_POST</span><span class="keyword">[</span><span class="string">'email'</span><span class="keyword">] = </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"@"</span><span class="keyword">, </span><span class="string">"[at]"</span><span class="keyword">, </span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'email'</span><span class="keyword">]);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55347""></a>
  <div class="note">
   <strong class="user">carlos at braziland dot com</strong>
   <a href="#55347" class="date">31-Jul-2005 09:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
So here is my answer to those who are trying to submit headers through my simple contact form:<br />
<br />
$any_form_field = eregi_replace("@","[at]",$_POST['just_one_field']); //how can anyone send emails to other email addresses without the @ symbol :)<br />
<br />
My suggestion is to do a foreach loop in the $_POST array and remove the @ symbol from all fields (unless you want one of the fields to have the @ symbol, in which case it should be very careful and question if the symbol is necessary).<br />
<br />
Not the best solution, but it's simple and it works.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50484""></a>
  <div class="note">
   <strong class="user">joltmans at amersel dot com</strong>
   <a href="#50484" class="date">01-Mar-2005 08:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PHP's Regex engine differs from several others in its treatment of parsing spaces. <br />
<br />
In many Regex languages '\s' denotes a space.<br />
PHP does not recognize '\s', just type a space ' ' instead.<br />
<br />
This simple example illustrates the problem:<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $string </span><span class="keyword">= </span><span class="string">"A sentence with&nbsp;&nbsp; spaces"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">eregi</span><span class="keyword">(</span><span class="string">"with\s*spaces"</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Will never print<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">echo </span><span class="string">"PHP understood \s"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Will always print<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">echo </span><span class="string">"PHP doesn't understand \s"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
This example does work:<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $string </span><span class="keyword">= </span><span class="string">"A sentence with&nbsp;&nbsp; spaces"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">eregi</span><span class="keyword">(</span><span class="string">"with *spaces"</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Will print<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">echo </span><span class="string">"PHP understood ' '"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49430""></a>
  <div class="note">
   
   <a href="#49430" class="date">27-Jan-2005 05:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
never mind my last post for the eregi_replace not replacing.<br />
<br />
I just used str_replace instead and it works fine.&nbsp; I must have had something wrong with my search string.&nbsp; POSIX, Perl.. hmm.. yeah probably something there.<br />
<br />
Mettedraq / Gene</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="43398""></a>
  <div class="note">
   <strong class="user">Ausvald</strong>
   <a href="#43398" class="date">20-Jun-2004 01:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Zach Johnson missed up. ereg* funcs use posix regex, not the rfc one</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="43343""></a>
  <div class="note">
   <strong class="user">furiousgreencloud at yahoo dot com</strong>
   <a href="#43343" class="date">18-Jun-2004 05:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To simply convert wild input into a sensable sting, say for a filename I use:<br />
<br />
function cleanString($wild) {<br />
&nbsp;&nbsp;&nbsp; return ereg_replace("[^[:alnum:]+]","",$wild);<br />
}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
echo cleanString("@#$&amp;*$@#H~e'{}l{}l&lt;o\{}"); // outputs: Hello</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42925""></a>
  <div class="note">
   <strong class="user">e dot boeters at planet dot nl</strong>
   <a href="#42925" class="date">04-Jun-2004 01:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a 'faster' way to highlight search results: <br />
<br />
$content = str_replace($query, "&lt;span class=\"highlight\"&gt;" . $query . "&lt;/span&gt;", $content);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37730""></a>
  <div class="note">
   <strong class="user">julien at ratatouille dot com dot fr</strong>
   <a href="#37730" class="date">25-Nov-2003 03:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function replace &lt; and &gt; symbols between &lt;code&gt; and &lt;/code&gt; tags by html code for lower than (&amp;lt;) and greather than (&amp;gt;) elements.<br />
<br />
function retourne_format_code($texte)<br />
{<br />
&nbsp;&nbsp;&nbsp; $tablo=split("&lt;code&gt;",$texte);<br />
&nbsp;&nbsp;&nbsp; $texte="";<br />
&nbsp;&nbsp;&nbsp; $texte.=$tablo[0];<br />
&nbsp;&nbsp;&nbsp; foreach($tablo as $cle=&gt;$valeur)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(eregi("&lt;/code&gt;",$valeur))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $tablo1=split("&lt;/code&gt;",$valeur);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $tablo1[0]=eregi_replace("&lt;","&amp;lt;",$tablo1[0]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $tablo1[0]=eregi_replace("&gt;","&amp;gt;",$tablo1[0]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach($tablo1 as $cle1=&gt;$valeur1)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if($cle1==0)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $valeur1="&lt;code&gt;".$valeur1."&lt;/code&gt;";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $texte.=$valeur1;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return $texte;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37519""></a>
  <div class="note">
   <strong class="user">martin_goldmann at gmx dot net</strong>
   <a href="#37519" class="date">18-Nov-2003 09:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
After reading the last message I wrote that de-spamizer:<br />
<br />
function despamMailURI($myStrMail='')<br />
{<br />
&nbsp;&nbsp;&nbsp; ?&gt;javascript:void(location.href='<a href="mailto:" rel="nofollow" target="_blank">mailto:</a>'+<span class="default">&lt;?=eregi_replace</span><span class="keyword">( </span><span class="string">"^([_\.0-9a-z-]+)@([0-9a-z][0-9a-z-]+)\.([a-z]{2,6})$"</span><span class="keyword">, </span><span class="string">"'\\1'+'@'+'\\2'+'.'+'\\3'"</span><span class="keyword">,</span><span class="default">$myStrMail</span><span class="keyword">)</span><span class="default">?&gt;</span>)&lt;?<br />
}<br />
<br />
Usage example:<br />
&lt;a href="<span class="default">&lt;?=despamMailURI</span><span class="keyword">(</span><span class="string">"user@foo.bar"</span><span class="keyword">)</span><span class="default">?&gt;</span>"&gt;Mail me&lt;/a&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="35221""></a>
  <div class="note">
   <strong class="user">iparanoid at gmx dot de</strong>
   <a href="#35221" class="date">24-Aug-2003 06:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To obtain the an email addresse in the scheme user at host dot use following function<br />
<br />
function antispam_mail($mail) {<br />
&nbsp;&nbsp;&nbsp; return eregi_replace( "^([_\.0-9a-z-]+)@([0-9a-z][0-9a-z-]+)\.([a-z]{2,6})$", '\\1 at \\2 dot \\3',$mail );<br />
};<br />
<br />
Combined with a wee JavaScript (document.location='<a href="mailto:" rel="nofollow" target="_blank">mailto:</a>'+user+'@'+host+'.'+tld) this provides a very powerfull anti-spam mechanism while providing full <a href="mailto: link functionality." rel="nofollow" target="_blank">mailto: link functionality.</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="32607""></a>
  <div class="note">
   <strong class="user">chpins-php at romu92 dot freesurf dot fr</strong>
   <a href="#32607" class="date">03-Jun-2003 01:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
/*new function for href2text : */<br />
<br />
function AHREF2text($string) {<br />
&nbsp;return eregi_replace('(&lt;a [^&lt;]*href=["|\']?([^ "\']*)["|\']?[^&gt;].*&gt;([^&lt;]*)&lt;/a&gt;)','[\\3] (link: \\2)', $string);<br />
}<br />
<br />
// by Ch'Pins</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="32041""></a>
  <div class="note">
   <strong class="user">buddy at directpay dot cz</strong>
   <a href="#32041" class="date">14-May-2003 07:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
i had to solve problem conserning DB2 timestamp format. here is how to parse ANSI timestamp format to DB2 timestamp format:<br />
<br />
$mydate = Date("Y-m-d H:i:s");&nbsp;&nbsp; <br />
&nbsp; <br />
$var = eregi_replace <br />
("([0-9]{4}-[0-9]{2}-[0-9]{2}) ([0-9]{2}):([0-9]{2}):([0-9]{2})"<br />
,"\\1-\\2.\\3.\\4",$mydate);<br />
<br />
echo "ANSI: $mydate, DB2 format: $var";<br />
<br />
happy codding <br />
buddy</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="31794""></a>
  <div class="note">
   <strong class="user">eder at xce dot de</strong>
   <a href="#31794" class="date">04-May-2003 04:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
/*As php at silisoftware dot com's example works only if there is not more than one link in $string, I rewrote his expression to function with strings containing multiple links: */<br />
<br />
function AHREF2text($string) {<br />
&nbsp; return eregi_replace('(&lt;a [^&lt;]*href=["|\']?([^ "\']*)["|\']?[^&gt;]*&gt;([^&lt;]*)&lt;/a&gt;)','[\\3] (link: \\2)', $string);<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="30190""></a>
  <div class="note">
   <strong class="user">Rainmaker526 at hotmail.com</strong>
   <a href="#30190" class="date">10-Mar-2003 04:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have found that some characters cannot be used by eregi_replace (or ereg_replace). When you get the REG_BADRPT error, try backslashing any special chars in your pattern string<br />
<br />
ex.<br />
$str = eregi_replace("*", "", $somevar)<br />
<br />
gives the REG_BADRPT error. Change it to<br />
$str = eregi_replace("\*", "", $somevar)<br />
<br />
to make it work</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="29597""></a>
  <div class="note">
   <strong class="user">php at silisoftware dot com</strong>
   <a href="#29597" class="date">18-Feb-2003 08:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Transform HTML links into plain-text "links" with the URL visible<br />
<br />
function AHREF2text($string) {<br />
&nbsp;&nbsp;&nbsp; return eregi_replace('&lt;A .*HREF=("|\')?([^ "\']*)("|\')?.*&gt;([^&lt;]*)&lt;/A&gt;', '[\\4] (link: \\2)', $string);<br />
}<br />
<br />
$HTMLstring = 'A link to &lt;a href="<a href="http://www.php.net" rel="nofollow" target="_blank">http://www.php.net</a>"&gt;PHP.net&lt;/A&gt;';<br />
echo AHREF2text($HTMLstring);<br />
// prints:&nbsp; A link to [PHP.net] (link: <a href="http://www.php.net" rel="nofollow" target="_blank">http://www.php.net</a>)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="24744""></a>
  <div class="note">
   <strong class="user">simon_a99 at yahoo dot co dot uk</strong>
   <a href="#24744" class="date">27-Aug-2002 09:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To find a string regardless of case, you might want to use the matched string in the replacement string without changing its case.<br />
<br />
For example, you're searching for $search = "letter" and the text being searched is $text = "post lEtTeR".&nbsp; I want to change the format of the matched string.<br />
<br />
Do this:<br />
eregi_replace($search, "&lt;b&gt;\\0&lt;/b&gt;", $text);<br />
<br />
$text has now been changed to "post &lt;b&gt;lEtTeR&lt;/b&gt;".&nbsp; \\0 is the entire text matched (lEtTer in this case).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>算术运算符</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="language.operators.precedence.html">? 运算符优先级</a></li>
      <li style="float: right;"><a href="language.operators.assignment.html">赋值运算符 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="language.operators.html">运算符</a></li>
    <li>算术运算符</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="language.operators.arithmetic" class="sect1">
   <h2 class="title">算术运算符</h2>
   <p class="simpara">
    还记得学校里学到的基本数学知识吗？就和它们一样。
   </p>
   <table class="doctable table">
    <caption><strong>算术运算符</strong></caption>
    
     <thead>
      <tr>
       <th>例子</th>
       <th>名称</th>
       <th>结果</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>-$a</td>
       <td>取反</td>
       <td><var class="varname"><var class="varname">$a</var></var> 的负值。</td>
      </tr>

      <tr>
       <td>$a + $b</td>
       <td>加法</td>
       <td><var class="varname"><var class="varname">$a</var></var> 和 <var class="varname"><var class="varname">$b</var></var> 的和。</td>
      </tr>

      <tr>
       <td>$a - $b</td>
       <td>减法</td>
       <td><var class="varname"><var class="varname">$a</var></var> 和 <var class="varname"><var class="varname">$b</var></var> 的差。</td>
      </tr>

      <tr>
       <td>$a * $b</td>
       <td>乘法</td>
       <td><var class="varname"><var class="varname">$a</var></var> 和 <var class="varname"><var class="varname">$b</var></var> 的积。</td>
      </tr>

      <tr>
       <td>$a / $b</td>
       <td>除法</td>
       <td><var class="varname"><var class="varname">$a</var></var> 除以 <var class="varname"><var class="varname">$b</var></var> 的商。</td>
      </tr>

      <tr>
       <td>$a % $b</td>
       <td>取模</td>
       <td><var class="varname"><var class="varname">$a</var></var> 除以 <var class="varname"><var class="varname">$b</var></var> 的余数。</td>
      </tr>

     </tbody>
    
   </table>

   <p class="simpara">
    除法运算符总是返回浮点数。只有在下列情况例外：两个操作数都是整数（或字符串转换成的整数）并且正好能整除，这时它返回一个整数。
   </p>
   <p class="simpara">
    取模运算符的操作数在运算之前都会转换成整数（除去小数部分）。
   </p>
   <p class="para">
    取模运算符 <em>%</em> 的结果和被除数的符号（正负号）相同。即
    <em>$a % $b</em> 的结果和 <var class="varname"><var class="varname">$a</var></var> 的符号相同。例如：
    <div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">echo&nbsp;(</span><span style="color: #0000BB">5&nbsp;</span><span style="color: #007700">%&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">).</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;prints&nbsp;2<br /></span><span style="color: #007700">echo&nbsp;(</span><span style="color: #0000BB">5&nbsp;</span><span style="color: #007700">%&nbsp;-</span><span style="color: #0000BB">3</span><span style="color: #007700">).</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;prints&nbsp;2<br /></span><span style="color: #007700">echo&nbsp;(-</span><span style="color: #0000BB">5&nbsp;</span><span style="color: #007700">%&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">).</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;prints&nbsp;-2<br /></span><span style="color: #007700">echo&nbsp;(-</span><span style="color: #0000BB">5&nbsp;</span><span style="color: #007700">%&nbsp;-</span><span style="color: #0000BB">3</span><span style="color: #007700">).</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;prints&nbsp;-2<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   </p>
   <p class="simpara">
    参见手册中的<a href="ref.math.html" class="link">数学函数</a>。
   </p>

  </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="116283""></a>
  <div class="note">
   <strong class="user">Dominik Buechler</strong>
   <a href="#116283" class="date">05-Dec-2014 10:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In addition to Jonathan's comment, there is a way simpler way to determine if an integer is even or not:<br />
<br />
&lt;? $odd = $i % 2; ?&gt; <br />
or<br />
&lt;? $even = !($i % 2); ?&gt;<br />
<br />
This works because a modulo division by 2 will always return either 0 or the rest 1. Since those are valid boolean values you can just invert them by adding a prefixed ! if wanted.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115689""></a>
  <div class="note">
   <strong class="user">lmc at trendicy dot com</strong>
   <a href="#115689" class="date">09-Sep-2014 02:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are running a php version older than 5.6, you can calculate $a ** $b by using exp($b*log($a))</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113646""></a>
  <div class="note">
   <strong class="user">hassan dot beydoun at live dot com</strong>
   <a href="#113646" class="date">10-Nov-2013 04:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">//using range function()<br />
//$numbers = array;range = value<br />
<br />
</span><span class="default">$numbers</span><span class="keyword">= </span><span class="default">range </span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">100</span><span class="keyword">);<br />
</span><span class="comment">// foreach ($array as $value)<br />
//{Do something with $value}<br />
</span><span class="keyword">foreach (</span><span class="default">$numbers </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">) <br />
{echo </span><span class="string">"&lt;p&gt;This is number: </span><span class="default">$value</span><span class="string">&lt;/P&gt;"</span><span class="keyword">;}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112730""></a>
  <div class="note">
   <strong class="user">Andrew</strong>
   <a href="#112730" class="date">17-Jul-2013 11:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The % operator doesn't behave as many people with a maths background would expect, when dealing with negative numbers. For example, -1 mod 8 = 7, but in PHP, -1 % 8 = -1.<br />
<br />
The following function has the expected behaviour:<br />
<br />
function mod($a, $n) {<br />
&nbsp;&nbsp;&nbsp; return ($a % $n) + ($a &lt; 0 ? $n : 0);<br />
}<br />
<br />
mod(-1, 8) returns 7 as expected.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108105""></a>
  <div class="note">
   <strong class="user">antickon at gmail dot com</strong>
   <a href="#108105" class="date">29-Mar-2012 08:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
not listed here is the absolutely useless unary plus.<br />
<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= -</span><span class="default">3</span><span class="keyword">;<br />
</span><span class="default">$a </span><span class="keyword">= +</span><span class="default">$a</span><span class="keyword">;<br />
</span><span class="default">var_dump</span><span class="keyword">( </span><span class="default">$a </span><span class="keyword">); </span><span class="comment">// int(-3)</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103525""></a>
  <div class="note">
   <strong class="user">php at richardneill dot org</strong>
   <a href="#103525" class="date">18-Apr-2011 05:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For larger numbers (above PHP_INT_MAX), use fmod() rather than %.
<br />
The other operators (+-*/) work correctly with floats and integer overflow, but % uses integer wrap. Eg.
<br />

<br />
<span class="default">&lt;?php
<br />
var_dump</span><span class="keyword">(</span><span class="default">0xffffffff </span><span class="keyword">% </span><span class="default">2</span><span class="keyword">);
<br />
</span><span class="comment">//Prints&nbsp; int(-1)&nbsp;&nbsp; which is WRONG
<br />

<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">intval</span><span class="keyword">(</span><span class="default">fmod</span><span class="keyword">(</span><span class="default">0xffffffff</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">)));
<br />
</span><span class="comment">//Prints int(1)&nbsp;&nbsp; which is the right answer
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
(The reason this matters is that PHP's float is actually a double, and can accurately represent integers up to 52-bits, even on 32-bit systems)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83631""></a>
  <div class="note">
   <strong class="user">TheWanderer</strong>
   <a href="#83631" class="date">05-Jun-2008 12:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It is worth noticing that when working with large numbers, most noticably using the modulo operator, the results depend on your CPU architecture. Therefore, running a decent 64-bit machine will be to your advantage in case you have to perform complex mathematical operations. Here is some example code - you can compare its output on x86 and x86_64 machines:<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/* tested under PHP 5.2.6-1 with Suhosin-Patch 0.9.6.2 (cli) on both i386 and amd64, Debian lenny/sid */<br />
</span><span class="default">$a </span><span class="keyword">= </span><span class="default">2863311530</span><span class="keyword">;<br />
</span><span class="default">$b </span><span class="keyword">= </span><span class="default">256</span><span class="keyword">;<br />
</span><span class="default">$c </span><span class="keyword">= </span><span class="default">$a </span><span class="keyword">% </span><span class="default">$b</span><span class="keyword">;<br />
echo </span><span class="string">"</span><span class="default">$c</span><span class="string"> &lt;br /&gt;\n"</span><span class="keyword">;<br />
echo (</span><span class="default">2863311530 </span><span class="keyword">% </span><span class="default">256</span><span class="keyword">).</span><span class="string">" &lt;br /&gt;\n"</span><span class="keyword">; </span><span class="comment">/* directly with no variables, just to be sure */<br />
</span><span class="default">?&gt;<br />
</span><br />
The code is expected to produce '170' if working correctly (try it in spreadsheet software).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83209""></a>
  <div class="note">
   <strong class="user">calmarius at atw dot hu</strong>
   <a href="#83209" class="date">15-May-2008 03:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be careful when using % with large numbers.<br />
<br />
The code:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="default">3333333333 </span><span class="keyword">% </span><span class="default">3<br />
?&gt;<br />
</span><br />
puts out -1 instead of zero!<br />
<br />
(Due to the overflow)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70424""></a>
  <div class="note">
   <strong class="user">Jonathon Reinhart</strong>
   <a href="#70424" class="date">16-Oct-2006 11:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A very simple yet maybe not obvious use of the modulus (%) operator is to check if an integer is odd or even.<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="keyword">if ((</span><span class="default">$a </span><span class="keyword">% </span><span class="default">2</span><span class="keyword">) == </span><span class="default">1</span><span class="keyword">)<br />
&nbsp; { echo </span><span class="string">"</span><span class="default">$a</span><span class="string"> is odd." </span><span class="keyword">;}<br />
&nbsp; if ((</span><span class="default">$a </span><span class="keyword">% </span><span class="default">2</span><span class="keyword">) == </span><span class="default">0</span><span class="keyword">)<br />
&nbsp; { echo </span><span class="string">"</span><span class="default">$a</span><span class="string"> is even." </span><span class="keyword">;}<br />
</span><span class="default">?&gt;<br />
</span><br />
This is nice when you want to make alternating-color rows on a table, or divs.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="keyword">for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">10</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp;&nbsp; if((</span><span class="default">$i </span><span class="keyword">% </span><span class="default">2</span><span class="keyword">) == </span><span class="default">1</span><span class="keyword">)&nbsp; </span><span class="comment">//odd<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">{echo </span><span class="string">"&lt;div class=\"dark\"&gt;</span><span class="default">$i</span><span class="string">&lt;/div&gt;"</span><span class="keyword">;}<br />
&nbsp;&nbsp;&nbsp; else&nbsp;&nbsp; </span><span class="comment">//even<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">{echo </span><span class="string">"&lt;div class=\"light\"&gt;</span><span class="default">$i</span><span class="string">&lt;/div&gt;"</span><span class="keyword">;}<br />
&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55924""></a>
  <div class="note">
   <strong class="user">pww8 at cornell dot edu</strong>
   <a href="#55924" class="date">17-Aug-2005 11:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It appears floating-point infinity (INF) is not returned from divide by zero (in PHP 5.0.0).&nbsp; Instead a warning is given and Boolean FALSE is returned.<br />
<br />
I searched the various manuals and did not find relevant explanation, so am adding this.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46298""></a>
  <div class="note">
   <strong class="user">glenn at benge dot co dot nz</strong>
   <a href="#46298" class="date">06-Oct-2004 08:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
a real simple method to reset an integer to a the next lowest multiple of a divisor<br />
<br />
$startSeq = $startSeq - ($startSeq % $entriesPerPage);<br />
<br />
if $startSeq was already a multiple, then " $startSeq % $entriesPerPage " will return 0 and $startSeq will not change.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="45475""></a>
  <div class="note">
   <strong class="user">arjini at gmail dot com</strong>
   <a href="#45475" class="date">08-Sep-2004 06:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When dealing purely with HTML, especially tables, or other things in "grids"&nbsp; the modulous operator is really useful for splitting up the data with a seperator.<br />
<br />
This snippet reads any gif files from the directory the script is in, prints them out and puts in a break every 5th image.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $d </span><span class="keyword">= </span><span class="default">dir</span><span class="keyword">(</span><span class="string">'./'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; while(</span><span class="default">false </span><span class="keyword">!== (</span><span class="default">$e </span><span class="keyword">= </span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">read</span><span class="keyword">())){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$e</span><span class="keyword">,</span><span class="string">'.gif'</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ++</span><span class="default">$i</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'&lt;img src="'</span><span class="keyword">.</span><span class="default">$e</span><span class="keyword">.</span><span class="string">'"/&gt;'</span><span class="keyword">.</span><span class="default">chr</span><span class="keyword">(</span><span class="default">10</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!(</span><span class="default">$i</span><span class="keyword">%</span><span class="default">5</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'&lt;br/&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
For tables just put &lt;/tr&gt;&lt;tr&gt; in place of the break.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42066""></a>
  <div class="note">
   <strong class="user">info at sima-pc dot com</strong>
   <a href="#42066" class="date">01-May-2004 11:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that operator % (modulus) works just with integers (between -214748348 and 2147483647) while fmod() works with short and large numbers.<br />
<br />
Modulus with non integer numbers will give unpredictable results.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

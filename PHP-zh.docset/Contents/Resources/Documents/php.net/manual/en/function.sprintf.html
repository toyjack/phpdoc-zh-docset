<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Return a formatted string</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.soundex.html">? soundex</a></li>
      <li style="float: right;"><a href="function.sscanf.html">sscanf ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.strings.html">字符串 函数</a></li>
    <li>Return a formatted string</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.sprintf" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">sprintf</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">sprintf</span> &mdash; <span class="dc-title">Return a formatted string</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.sprintf-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><strong>sprintf</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$format</code></span>
   [, <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$args</code></span>
   [, <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$...</code></span>
  ]] )</div>

  <p class="para rdfs-comment">
   Returns a string produced according to the formatting string
   <code class="parameter">format</code>.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.sprintf-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">format</code></dt>

     <dd>

      <p class="para">
       The format string is composed of zero or more directives:
       ordinary characters (excluding <em>%</em>) that are
       copied directly to the result, and <em class="emphasis">conversion
       specifications</em>, each of which results in fetching its
       own parameter.  This applies to both <span class="function"><strong>sprintf()</strong></span>
       and <span class="function"><a href="function.printf.html" class="function">printf()</a></span>.
      </p>
      <p class="para">
       Each conversion specification consists of a percent sign
       (<em>%</em>), followed by one or more of these
       elements, in order:
       <ol type="1">
        <li class="listitem">
         <span class="simpara">
          An optional <em class="emphasis">sign specifier</em> that forces a sign
          (- or +) to be used on a number. By default, only the - sign is used
          on a number if it&#039;s negative. This specifier forces positive numbers
          to have the + sign attached as well, and was added in PHP 4.3.0.
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          An optional <em class="emphasis">padding specifier</em> that says
          what character will be used for padding the results to the
          right string size.  This may be a space character or a
          <em>0</em> (zero character).  The default is to pad
          with spaces.  An alternate padding character can be specified
          by prefixing it with a single quote (<em>&#039;</em>).
          See the examples below.
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          An optional <em class="emphasis">alignment specifier</em> that says
          if the result should be left-justified or right-justified.
          The default is right-justified; a <em>-</em>
          character here will make it left-justified.
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          An optional number, a <em class="emphasis">width specifier</em>
          that says how many characters (minimum) this conversion should
          result in.
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          An optional <em class="emphasis">precision specifier</em> in the form
          of a period (`.&#039;) followed by an optional decimal digit string
          that says how many decimal digits should be displayed for
          floating-point numbers. When using this specifier on a string,
          it acts as a cutoff point, setting a maximum character limit to
          the string. Additionally, the character to use when padding a
          number may optionally be specified between the period and the
          digit.
         </span>
        </li>
        <li class="listitem">
         <p class="para">
          A <em class="emphasis">type specifier</em> that says what type the
          argument data should be treated as.  Possible types:
          <ul class="simplelist">
           <li class="member">
            <em>%</em> - a literal percent character. No
            argument is required.
           </li>
           <li class="member">
            <em>b</em> - the argument is treated as an
            integer, and presented as a binary number.
           </li>
           <li class="member">
            <em>c</em> - the argument is treated as an
            integer, and presented as the character with that ASCII
            value.
           </li>
           <li class="member">
            <em>d</em> - the argument is treated as an
            integer, and presented as a (signed) decimal number.
           </li>
           <li class="member">
            <em>e</em> - the argument is treated as scientific
            notation (e.g. 1.2e+2).
            The precision specifier stands for the number of digits after the
            decimal point since PHP 5.2.1. In earlier versions, it was taken as
            number of significant digits (one less).
           </li>
           <li class="member">
            <em>E</em> - like <em>%e</em> but uses
            uppercase letter (e.g. 1.2E+2).
           </li>
           <li class="member">
            <em>f</em> - the argument is treated as a
            float, and presented as a floating-point number (locale aware).
           </li>
           <li class="member">
            <em>F</em> - the argument is treated as a
            float, and presented as a floating-point number (non-locale aware).
            Available since PHP 4.3.10 and PHP 5.0.3.
           </li>
           <li class="member">
            <em>g</em> - shorter of <em>%e</em> and
            <em>%f</em>.
           </li>
           <li class="member">
            <em>G</em> - shorter of <em>%E</em> and
            <em>%f</em>.
           </li>
           <li class="member">
            <em>o</em> - the argument is treated as an
            integer, and presented as an octal number.
           </li>
           <li class="member">
            <em>s</em> - the argument is treated as and
            presented as a string.
           </li>
           <li class="member">
            <em>u</em> - the argument is treated as an
            integer, and presented as an unsigned decimal number.
           </li>
           <li class="member">
            <em>x</em> - the argument is treated as an integer
            and presented as a hexadecimal number (with lowercase
            letters).
           </li>
           <li class="member">
            <em>X</em> - the argument is treated as an integer
            and presented as a hexadecimal number (with uppercase
            letters).
           </li>
          </ul>
         </p>
        </li>
       </ol>
      </p>
      <p class="para">
       Variables will be co-erced to a suitable type for the specifier:
       <table id="sprintf.coercion" class="doctable table">
        <caption><strong>Type Handling</strong></caption>
        
         <thead>
          <tr>
           <th>Type</th>
           <th>Specifiers</th>
          </tr>

         </thead>

         <tbody class="tbody">
          <tr>
           <td><em>string</em></td>
           <td><em>s</em></td>
          </tr>

          <tr>
           <td><em>integer</em></td>
           <td>
            <em>d</em>, 
            <em>u</em>, 
            <em>c</em>,
            <em>o</em>,
            <em>x</em>,
            <em>X</em>,
            <em>b</em>
           </td>
          </tr>

          <tr>
           <td><em>double</em></td>
           <td>
            <em>g</em>,
            <em>G</em>,
            <em>e</em>,
            <em>E</em>,
            <em>f</em>,
            <em>F</em>
           </td>
          </tr>

         </tbody>
        
       </table>

      </p>
      <div class="warning"><strong class="warning">Warning</strong>
       <p class="para">
        Attempting to use a combination of the string and width specifiers with character sets that require more than one byte per character may result in unexpected results
       </p>
      </div>
      <p class="para">
       The format string supports argument numbering/swapping.  Here is an
       example:
       <div class="example" id="example-4895">
        <p><strong>Example #1 Argument swapping</strong></p>
        <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$num&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$location&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'tree'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$format&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'There&nbsp;are&nbsp;%d&nbsp;monkeys&nbsp;in&nbsp;the&nbsp;%s'</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #0000BB">$format</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$num</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$location</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
        </div>

       </div>
       This will output &quot;There are 5 monkeys in the tree&quot;.  But
       imagine we are creating a format string in a separate file,
       commonly because we would like to internationalize it and we
       rewrite it as:
       <div class="example" id="example-4896">
        <p><strong>Example #2 Argument swapping</strong></p>
        <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$format&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'The&nbsp;%s&nbsp;contains&nbsp;%d&nbsp;monkeys'</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #0000BB">$format</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$num</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$location</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
        </div>

       </div>
       We now have a problem.  The order of the placeholders in the
       format string does not match the order of the arguments in the
       code.  We would like to leave the code as is and simply indicate
       in the format string which arguments the placeholders refer to.
       We would write the format string like this instead:
       <div class="example" id="example-4897">
        <p><strong>Example #3 Argument swapping</strong></p>
        <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$format&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'The&nbsp;%2$s&nbsp;contains&nbsp;%1$d&nbsp;monkeys'</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #0000BB">$format</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$num</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$location</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
        </div>

       </div>
       An added benefit here is that you can repeat the placeholders without
       adding more arguments in the code.  For example:
       <div class="example" id="example-4898">
        <p><strong>Example #4 Argument swapping</strong></p>
        <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$format&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'The&nbsp;%2$s&nbsp;contains&nbsp;%1$d&nbsp;monkeys.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;That\'s&nbsp;a&nbsp;nice&nbsp;%2$s&nbsp;full&nbsp;of&nbsp;%1$d&nbsp;monkeys.'</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #0000BB">$format</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$num</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$location</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
        </div>

       </div>
       When using argument swapping, the <em>n$</em>
       <em class="emphasis">position specifier</em> must come immediately
       after the percent sign (<em>%</em>), before any other
       specifiers, as shown in the example below.
       <div class="example" id="example-4899">
        <p><strong>Example #5 Specifying padding character</strong></p>
        <div class="example-contents">
         <div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%'.9d\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">123</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%'.09d\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">123</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
        </div>

        <div class="example-contents"><p>以上例程会输出：</p></div>
        <div class="example-contents screen">
         <div class="cdata"><pre>
......123
000000123
</pre></div>
        </div>
       </div>
       <div class="example" id="example-4900">
        <p><strong>Example #6 Position specifier with other specifiers</strong></p>
        <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$format&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'The&nbsp;%2$s&nbsp;contains&nbsp;%1$04d&nbsp;monkeys'</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #0000BB">$format</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$num</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$location</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
        </div>

        <div class="example-contents"><p>以上例程会输出：</p></div>
        <div class="example-contents screen">
<div class="cdata"><pre>
The tree contains 0005 monkeys
</pre></div>
        </div>
       </div>
      </p>
      <blockquote class="note"><p><strong class="note">Note</strong>: 
       <p class="para">
        Attempting to use a position specifier greater than
        <strong><code>PHP_INT_MAX</code></strong> will result in
        <span class="function"><strong>sprintf()</strong></span> generating warnings.
       </p>
      </p></blockquote>
      <div class="warning"><strong class="warning">Warning</strong>
       <p class="para">
        The <em>c</em> type specifier ignores padding and width
       </p>
      </div>
     </dd>

    
    
     <dt>
<code class="parameter">args</code></dt>

     <dd>

      <p class="para">
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">...</code></dt>

     <dd>

      <p class="para">
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.sprintf-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   Returns a string produced according to the formatting string
   <code class="parameter">format</code>.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.sprintf-examples">
  <h3 class="title">范例</h3>
  <div class="example" id="example-4901">
   <p><strong>Example #7 <span class="function"><a href="function.printf.html" class="function">printf()</a></span>: various examples</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$n&nbsp;</span><span style="color: #007700">=&nbsp;&nbsp;</span><span style="color: #0000BB">43951789</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$u&nbsp;</span><span style="color: #007700">=&nbsp;-</span><span style="color: #0000BB">43951789</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">65</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;ASCII&nbsp;65&nbsp;is&nbsp;'A'<br /><br />//&nbsp;notice&nbsp;the&nbsp;double&nbsp;%%,&nbsp;this&nbsp;prints&nbsp;a&nbsp;literal&nbsp;'%'&nbsp;character<br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%%b&nbsp;=&nbsp;'%b'\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$n</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;binary&nbsp;representation<br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%%c&nbsp;=&nbsp;'%c'\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;print&nbsp;the&nbsp;ascii&nbsp;character,&nbsp;same&nbsp;as&nbsp;chr()&nbsp;function<br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%%d&nbsp;=&nbsp;'%d'\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$n</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;standard&nbsp;integer&nbsp;representation<br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%%e&nbsp;=&nbsp;'%e'\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$n</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;scientific&nbsp;notation<br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%%u&nbsp;=&nbsp;'%u'\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$n</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;unsigned&nbsp;integer&nbsp;representation&nbsp;of&nbsp;a&nbsp;positive&nbsp;integer<br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%%u&nbsp;=&nbsp;'%u'\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$u</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;unsigned&nbsp;integer&nbsp;representation&nbsp;of&nbsp;a&nbsp;negative&nbsp;integer<br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%%f&nbsp;=&nbsp;'%f'\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$n</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;floating&nbsp;point&nbsp;representation<br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%%o&nbsp;=&nbsp;'%o'\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$n</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;octal&nbsp;representation<br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%%s&nbsp;=&nbsp;'%s'\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$n</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;string&nbsp;representation<br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%%x&nbsp;=&nbsp;'%x'\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$n</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;hexadecimal&nbsp;representation&nbsp;(lower-case)<br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%%X&nbsp;=&nbsp;'%X'\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$n</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;hexadecimal&nbsp;representation&nbsp;(upper-case)<br /><br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%%+d&nbsp;=&nbsp;'%+d'\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$n</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;sign&nbsp;specifier&nbsp;on&nbsp;a&nbsp;positive&nbsp;integer<br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%%+d&nbsp;=&nbsp;'%+d'\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$u</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;sign&nbsp;specifier&nbsp;on&nbsp;a&nbsp;negative&nbsp;integer<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>以上例程会输出：</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
%b = &#039;10100111101010011010101101&#039;
%c = &#039;A&#039;
%d = &#039;43951789&#039;
%e = &#039;4.39518e+7&#039;
%u = &#039;43951789&#039;
%u = &#039;4251015507&#039;
%f = &#039;43951789.000000&#039;
%o = &#039;247523255&#039;
%s = &#039;43951789&#039;
%x = &#039;29ea6ad&#039;
%X = &#039;29EA6AD&#039;
%+d = &#039;+43951789&#039;
%+d = &#039;-43951789&#039;
</pre></div>
   </div>
  </div>
  <div class="example" id="example-4902">
   <p><strong>Example #8 <span class="function"><a href="function.printf.html" class="function">printf()</a></span>: string specifiers</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$s&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'monkey'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$t&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'many&nbsp;monkeys'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"[%s]\n"</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;standard&nbsp;string&nbsp;output<br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"[%10s]\n"</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;right-justification&nbsp;with&nbsp;spaces<br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"[%-10s]\n"</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;left-justification&nbsp;with&nbsp;spaces<br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"[%010s]\n"</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;zero-padding&nbsp;works&nbsp;on&nbsp;strings&nbsp;too<br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"[%'#10s]\n"</span><span style="color: #007700">,&nbsp;&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;use&nbsp;the&nbsp;custom&nbsp;padding&nbsp;character&nbsp;'#'<br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"[%10.10s]\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;left-justification&nbsp;but&nbsp;with&nbsp;a&nbsp;cutoff&nbsp;of&nbsp;10&nbsp;characters<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>以上例程会输出：</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
[monkey]
[    monkey]
[monkey    ]
[0000monkey]
[####monkey]
[many monke]
</pre></div>
   </div>
  </div>
  <div class="example" id="example-4903">
   <p><strong>Example #9 <span class="function"><strong>sprintf()</strong></span>: zero-padded integers</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$isodate&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%04d-%02d-%02d"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$year</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$month</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$day</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
  <div class="example" id="example-4904">
   <p><strong>Example #10 <span class="function"><strong>sprintf()</strong></span>: formatting currency</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$money1&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">68.75</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$money2&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">54.35</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$money&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$money1&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #0000BB">$money2</span><span style="color: #007700">;<br /></span><span style="color: #FF8000">//&nbsp;echo&nbsp;$money&nbsp;will&nbsp;output&nbsp;"123.1";<br /></span><span style="color: #0000BB">$formatted&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%01.2f"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$money</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;echo&nbsp;$formatted&nbsp;will&nbsp;output&nbsp;"123.10"<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
  <div class="example" id="example-4905">
   <p><strong>Example #11 <span class="function"><strong>sprintf()</strong></span>: scientific notation</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$number&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">362525200</span><span style="color: #007700">;<br /><br />echo&nbsp;</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%.3e"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$number</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;outputs&nbsp;3.625e+8<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.sprintf-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.printf.html" class="function" rel="rdfs-seeAlso">printf()</a> - 输出格式化字符串</span></li>
    <li class="member"><span class="function"><a href="function.sscanf.html" class="function" rel="rdfs-seeAlso">sscanf()</a> - 根据指定格式解析输入的字符</span></li>
    <li class="member"><span class="function"><a href="function.fscanf.html" class="function" rel="rdfs-seeAlso">fscanf()</a> - 从文件中格式化输入</span></li>
    <li class="member"><span class="function"><a href="function.vsprintf.html" class="function" rel="rdfs-seeAlso">vsprintf()</a> - 返回格式化字符串</span></li>
    <li class="member"><span class="function"><a href="function.number-format.html" class="function" rel="rdfs-seeAlso">number_format()</a> - 以千位分隔符方式格式化一个数字</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="116776""></a>
  <div class="note">
   <strong class="user">kontakt at myseosolution dot de</strong>
   <a href="#116776" class="date">26-Feb-2015 07:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There are already some comments on using sprintf to force leading leading zeros but the examples only include integers. I needed leading zeros on floating point numbers and was surprised that it didn't work as expected.<br />
<br />
Example:<br />
<span class="default">&lt;?php<br />
sprintf</span><span class="keyword">(</span><span class="string">'%02d'</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
This will result in 01. However, trying the same for a float with precision doesn't work:<br />
<br />
<span class="default">&lt;?php<br />
sprintf</span><span class="keyword">(</span><span class="string">'%02.2f'</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Yields 1.00. <br />
<br />
This threw me a little off. To get the desired result, one needs to add the precision (2) and the length of the decimal seperator "." (1). So the correct pattern would be<br />
<br />
<span class="default">&lt;?php<br />
sprintf</span><span class="keyword">(</span><span class="string">'%05.2f'</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Output: 01.00<br />
<br />
Please see <a href="http://stackoverflow.com/a/28739819/413531 for a more detailed explanation." rel="nofollow" target="_blank">http://stackoverflow.com/a/28739819/413531 for a more detailed explanation.</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116508""></a>
  <div class="note">
   <strong class="user">sanjay dot chawke at gmail dot com</strong>
   <a href="#116508" class="date">15-Jan-2015 08:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
sprintf("SELECT * FROM event WHERE event_date &gt;= NOW() and event_id =%d %s GROUP BY event_id ",filter())<br />
<br />
function filter($condition=''){<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; global $keyword;<br />
&nbsp;&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; if(!empty($keyword)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $condition =" AND event_name LIKE '%$keyword%'"; <br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return $condition;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115088""></a>
  <div class="note">
   <strong class="user">john at jbwalker dot com</strong>
   <a href="#115088" class="date">24-May-2014 09:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I couldn't find what should be a WARNING in the documentation above, that if you have more specifiers than variables to match them sprintf returns NOTHING. This fact, IMHO, should also be noted under return values.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114849""></a>
  <div class="note">
   <strong class="user">hdimac at gmail dot com</strong>
   <a href="#114849" class="date">15-Apr-2014 01:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In the examples, is being shown printf, but it should say sprintf, which is the function being explained... just a simple edition mistake.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114002""></a>
  <div class="note">
   <strong class="user">ivan at php dot net</strong>
   <a href="#114002" class="date">29-Dec-2013 05:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is a minor issue in a code of mb_vsprintf function from viktor at textalk dot com.<br />
<br />
In "truncate $arg" section the following line:<br />
&nbsp; $arg = mb_substr($precision,0,$precision,$encoding);<br />
needs to be replaced with:<br />
&nbsp; $arg = mb_substr($arg,0,$precision,$encoding);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113520""></a>
  <div class="note">
   <strong class="user">ethaizone at hotmail dot com</strong>
   <a href="#113520" class="date">24-Oct-2013 12:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Example:&nbsp; use sprintf to zero fill<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// 00000005<br />
</span><span class="keyword">echo </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">'%08d'</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">);</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112569""></a>
  <div class="note">
   <strong class="user">me at php dot net</strong>
   <a href="#112569" class="date">01-Jul-2013 02:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To convert / use / implement 64-bit signed 2's complement Long type values in PHP code, use the following code<br />
<br />
// requires bcmath<br />
<br />
/* java 64-bit long: The long data type is a 64-bit signed two's complement integer. It has a minimum value of -9,223,372,036,854,775,808 and a maximum value of 9,223,372,036,854,775,807 (inclusive). Use this data type when you need a range of values wider than those provided by int.<br />
*/<br />
<br />
bcscale(0);<br />
<br />
$num = substr($data,0,8) // 8 binary bytes from file<br />
<br />
$long&nbsp; = bcadd(bcmul(unpack('N',substr($num,0,4))[1],bcpow(2,32)),unpack('N',substr($num,4,4))[1]);<br />
<br />
if(unpack('N',substr($num,4,4))[1] &amp; 0x80000000)<br />
&nbsp; $long = bcadd($long,pow(2,32));<br />
<br />
var_dump($long);<br />
<br />
// now you can use $long as 64-bit signed long value by using bcmath functions<br />
// do not use php math funcs, they cant handle 64-bit long integer values<br />
// use bcadd bcsub etc from bcmath functions freely<br />
<br />
Hope this helps people handling 64-bit long values retrieved from other languages like java, etc</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111201""></a>
  <div class="note">
   <strong class="user">Alex R. Gibbs</strong>
   <a href="#111201" class="date">25-Jan-2013 05:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
1.&nbsp; A plus sign ('+') means put a '+' before positive numbers while a minus sign ('-') means left justify.&nbsp; The documentation incorrectly states that they are interchangeable.&nbsp; They produce unique results that can be combined:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">echo </span><span class="default">sprintf </span><span class="keyword">(</span><span class="string">"|%+4d|%+4d|\n"</span><span class="keyword">,&nbsp;&nbsp; </span><span class="default">1</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">);<br />
echo </span><span class="default">sprintf </span><span class="keyword">(</span><span class="string">"|%-4d|%-4d|\n"</span><span class="keyword">,&nbsp;&nbsp; </span><span class="default">1</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">);<br />
echo </span><span class="default">sprintf </span><span class="keyword">(</span><span class="string">"|%+-4d|%+-4d|\n"</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
outputs:<br />
<br />
|&nbsp; +1|&nbsp; -1|<br />
|1&nbsp;&nbsp; |-1&nbsp; |<br />
|+1&nbsp; |-1&nbsp; |<br />
<br />
2.&nbsp; Padding with a '0' is different than padding with other characters.&nbsp; Zeros will only be added at the front of a number, after any sign.&nbsp; Other characters will be added before the sign, or after the number:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">echo </span><span class="default">sprintf </span><span class="keyword">(</span><span class="string">"|%04d|\n"</span><span class="keyword">,&nbsp;&nbsp; -</span><span class="default">2</span><span class="keyword">);<br />
echo </span><span class="default">sprintf </span><span class="keyword">(</span><span class="string">"|%':4d|\n"</span><span class="keyword">,&nbsp; -</span><span class="default">2</span><span class="keyword">);<br />
echo </span><span class="default">sprintf </span><span class="keyword">(</span><span class="string">"|%-':4d|\n"</span><span class="keyword">, -</span><span class="default">2</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Specifying both "-" and "0" creates a conflict with unexpected results:<br />
</span><span class="keyword">echo </span><span class="default">sprintf </span><span class="keyword">(</span><span class="string">"|%-04d|\n"</span><span class="keyword">,&nbsp; -</span><span class="default">2</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Padding with other digits behaves like other non-zero characters:<br />
</span><span class="keyword">echo </span><span class="default">sprintf </span><span class="keyword">(</span><span class="string">"|%-'14d|\n"</span><span class="keyword">, -</span><span class="default">2</span><span class="keyword">);<br />
echo </span><span class="default">sprintf </span><span class="keyword">(</span><span class="string">"|%-'04d|\n"</span><span class="keyword">, -</span><span class="default">2</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
outputs:<br />
<br />
|-002|<br />
|::-2|<br />
|-2::|<br />
|-2&nbsp; |<br />
|-211|<br />
|-2&nbsp; |</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110326""></a>
  <div class="note">
   <strong class="user">ignat dot scheglovskiy at gmail dot com</strong>
   <a href="#110326" class="date">11-Oct-2012 05:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is an example how alignment, padding and precision specifier can be used to print formatted list of items:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$out </span><span class="keyword">= </span><span class="string">"The Books\n"</span><span class="keyword">;<br />
</span><span class="default">$books </span><span class="keyword">= array(</span><span class="string">"Book 1"</span><span class="keyword">, </span><span class="string">"Book 2"</span><span class="keyword">, </span><span class="string">"Book 3"</span><span class="keyword">);<br />
</span><span class="default">$pages </span><span class="keyword">= array(</span><span class="string">"123 pages "</span><span class="keyword">, </span><span class="string">"234 pages"</span><span class="keyword">, </span><span class="string">"345 pages"</span><span class="keyword">);<br />
for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$books</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">.= </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">"%'.-20s%'.7.4s\n"</span><span class="keyword">, </span><span class="default">$books</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], </span><span class="default">$pages</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br />
}<br />
echo </span><span class="default">$out</span><span class="keyword">;<br />
<br />
</span><span class="comment">// Outputs:<br />
// <br />
// The Books<br />
// Book 1.................123 <br />
// Book 2.................234 <br />
// Book 3.................345 <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108947""></a>
  <div class="note">
   <strong class="user">Hayley Watson</strong>
   <a href="#108947" class="date">07-Jun-2012 08:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you use argument numbering, then format specifications with the same number get the same argument; this can save repeating the argument in the function call.<br />
<br />
<span class="default">&lt;?php<br />
<br />
$pattern </span><span class="keyword">= </span><span class="string">'%1$s %1$\'#10s %1$s!'</span><span class="keyword">;<br />
<br />
</span><span class="default">printf</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="string">"badgers"</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105468""></a>
  <div class="note">
   <strong class="user">krzysiek dot 333 at gmail dot com - zryty dot hekko dot pl</strong>
   <a href="#105468" class="date">20-Aug-2011 09:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Encoding and decoding IP adress to format: 1A2B3C4D (mysql column: char(8) )<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">encode_ip</span><span class="keyword">(</span><span class="default">$dotquad_ip</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ip_sep </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">, </span><span class="default">$dotquad_ip</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">'%02x%02x%02x%02x'</span><span class="keyword">, </span><span class="default">$ip_sep</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="default">$ip_sep</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$ip_sep</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">], </span><span class="default">$ip_sep</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]);<br />
}<br />
<br />
function </span><span class="default">decode_ip</span><span class="keyword">(</span><span class="default">$int_ip</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$hexipbang </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">, </span><span class="default">chunk_split</span><span class="keyword">(</span><span class="default">$int_ip</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="string">'.'</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">hexdec</span><span class="keyword">(</span><span class="default">$hexipbang</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]). </span><span class="string">'.' </span><span class="keyword">. </span><span class="default">hexdec</span><span class="keyword">(</span><span class="default">$hexipbang</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]) . </span><span class="string">'.' </span><span class="keyword">. </span><span class="default">hexdec</span><span class="keyword">(</span><span class="default">$hexipbang</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]) . </span><span class="string">'.' </span><span class="keyword">. </span><span class="default">hexdec</span><span class="keyword">(</span><span class="default">$hexipbang</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103755""></a>
  <div class="note">
   <strong class="user">timo dot frenay at gmail dot com</strong>
   <a href="#103755" class="date">02-May-2011 02:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is how to print a floating point number with 16 significant digits regardless of magnitude:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $result </span><span class="keyword">= </span><span class="default">sprintf</span><span class="keyword">(</span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">'%%.%dF'</span><span class="keyword">, </span><span class="default">max</span><span class="keyword">(</span><span class="default">15 </span><span class="keyword">- </span><span class="default">floor</span><span class="keyword">(</span><span class="default">log10</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)), </span><span class="default">0</span><span class="keyword">)), </span><span class="default">$value</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
This works more reliably than doing something like sprintf('%.15F', $value) as the latter may cut off significant digits for very small numbers, or prints bogus digits (meaning extra digits beyond what can reliably be represented in a floating point number) for very large numbers.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102205""></a>
  <div class="note">
   <strong class="user">carmageddon at gmail dot com</strong>
   <a href="#102205" class="date">02-Feb-2011 03:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to convert a decimal (integer) number into constant length binary number in lets say 9 bits, use this:<br />
<br />
$binary = sprintf('%08b', $number );<br />
<br />
for example: <br />
<span class="default">&lt;?php<br />
$bin </span><span class="keyword">= </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">'%08b'</span><span class="keyword">,</span><span class="default">511 </span><span class="keyword">);<br />
echo </span><span class="default">$bin</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
would output 111111111<br />
And 2 would output 00000010<br />
<br />
I know the leading zeros are useful to me, perhaps they are to someone else too.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99732""></a>
  <div class="note">
   <strong class="user">dwieeb at gmail dot com</strong>
   <a href="#99732" class="date">01-Sep-2010 08:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you use the default padding specifier (a space) and then print it to HTML, you will notice that HTML does not display the multiple spaces correctly. This is because any sequence of white-space is treated as a single space.<br />
<br />
To overcome this, I wrote a simple function that replaces all the spaces in the string returned by sprintf() with the character entity reference "&amp;nbsp;" to achieve non-breaking space in strings returned by sprintf()<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//Here is the function:<br />
</span><span class="keyword">function </span><span class="default">sprintf_nbsp</span><span class="keyword">() {<br />
&nbsp;&nbsp; </span><span class="default">$args </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
&nbsp;&nbsp; return </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">, </span><span class="string">'&amp;nbsp;'</span><span class="keyword">, </span><span class="default">vsprintf</span><span class="keyword">(</span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">), </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">)));<br />
}<br />
<br />
</span><span class="comment">//Usage (exactly like sprintf):<br />
</span><span class="default">$format </span><span class="keyword">= </span><span class="string">'The %d monkeys are attacking the [%10s]!'</span><span class="keyword">;<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">sprintf_nbsp</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">15</span><span class="keyword">, </span><span class="string">'zoo'</span><span class="keyword">);<br />
echo </span><span class="default">$str</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
The above example will output:<br />
The 15 monkeys are attacking the [&nbsp; &nbsp; &nbsp;&nbsp; zoo]!<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//The variation that prints the string instead of returning it:<br />
</span><span class="keyword">function </span><span class="default">printf_nbsp</span><span class="keyword">() {<br />
&nbsp;&nbsp; </span><span class="default">$args </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
&nbsp;&nbsp; echo </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">, </span><span class="string">'&amp;nbsp;'</span><span class="keyword">, </span><span class="default">vsprintf</span><span class="keyword">(</span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">), </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">)));<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99714""></a>
  <div class="note">
   <strong class="user">geertdd at gmail dot com</strong>
   <a href="#99714" class="date">01-Sep-2010 09:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that when using a sign specifier, the number zero is considered positive and a "+" sign will be prepended to it.<br />
<br />
<span class="default">&lt;?php<br />
printf</span><span class="keyword">(</span><span class="string">'%+d'</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">); </span><span class="comment">// +0<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94608""></a>
  <div class="note">
   <strong class="user">nate at frickenate dot com</strong>
   <a href="#94608" class="date">14-Nov-2009 08:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a clean, working version of functions to allow using named arguments instead of numeric ones. ex: instead of sprintf('%1$s', 'Joe');, we can use sprintf('%name$s', array('name' =&gt; 'Joe'));. I've provided 2 different versions: the first uses the php-like syntax (ex: %name$s), while the second uses the python syntax (ex: %(name)s).<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* version of sprintf for cases where named arguments are desired (php syntax)<br />
&nbsp;*<br />
&nbsp;* with sprintf: sprintf('second: %2$s ; first: %1$s', '1st', '2nd');<br />
&nbsp;*<br />
&nbsp;* with sprintfn: sprintfn('second: %second$s ; first: %first$s', array(<br />
&nbsp;*&nbsp; 'first' =&gt; '1st',<br />
&nbsp;*&nbsp; 'second'=&gt; '2nd'<br />
&nbsp;* ));<br />
&nbsp;*<br />
&nbsp;* @param string $format sprintf format string, with any number of named arguments<br />
&nbsp;* @param array $args array of [ 'arg_name' =&gt; 'arg value', ... ] replacements to be made<br />
&nbsp;* @return string|false result of sprintf call, or bool false on error<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">sprintfn </span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, array </span><span class="default">$args </span><span class="keyword">= array()) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// map of argument names to their corresponding sprintf numeric argument value<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arg_nums </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">array_flip</span><span class="keyword">(</span><span class="default">array_keys</span><span class="keyword">(array(</span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">) + </span><span class="default">$args</span><span class="keyword">)), </span><span class="default">1</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// find the next named argument. each search starts at the end of the previous replacement.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">for (</span><span class="default">$pos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/(?&lt;=%)([a-zA-Z_]\w*)(?=\$)/'</span><span class="keyword">, </span><span class="default">$format</span><span class="keyword">, </span><span class="default">$match</span><span class="keyword">, </span><span class="default">PREG_OFFSET_CAPTURE</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">);) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arg_pos </span><span class="keyword">= </span><span class="default">$match</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arg_len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$match</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arg_key </span><span class="keyword">= </span><span class="default">$match</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">];<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// programmer did not supply a value for the named argument found in the format string<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (! </span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$arg_key</span><span class="keyword">, </span><span class="default">$arg_nums</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">user_error</span><span class="keyword">(</span><span class="string">"sprintfn(): Missing argument '</span><span class="keyword">${</span><span class="default">arg_key</span><span class="keyword">}</span><span class="string">'"</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// replace the named argument with the corresponding numeric one<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$format </span><span class="keyword">= </span><span class="default">substr_replace</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">$replace </span><span class="keyword">= </span><span class="default">$arg_nums</span><span class="keyword">[</span><span class="default">$arg_key</span><span class="keyword">], </span><span class="default">$arg_pos</span><span class="keyword">, </span><span class="default">$arg_len</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">$arg_pos </span><span class="keyword">+ </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">); </span><span class="comment">// skip to end of replacement for next iteration<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">vsprintf</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">));<br />
}<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* version of sprintf for cases where named arguments are desired (python syntax)<br />
&nbsp;*<br />
&nbsp;* with sprintf: sprintf('second: %2$s ; first: %1$s', '1st', '2nd');<br />
&nbsp;*<br />
&nbsp;* with sprintfn: sprintfn('second: %(second)s ; first: %(first)s', array(<br />
&nbsp;*&nbsp; 'first' =&gt; '1st',<br />
&nbsp;*&nbsp; 'second'=&gt; '2nd'<br />
&nbsp;* ));<br />
&nbsp;*<br />
&nbsp;* @param string $format sprintf format string, with any number of named arguments<br />
&nbsp;* @param array $args array of [ 'arg_name' =&gt; 'arg value', ... ] replacements to be made<br />
&nbsp;* @return string|false result of sprintf call, or bool false on error<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">sprintfn </span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, array </span><span class="default">$args </span><span class="keyword">= array()) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// map of argument names to their corresponding sprintf numeric argument value<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arg_nums </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">array_flip</span><span class="keyword">(</span><span class="default">array_keys</span><span class="keyword">(array(</span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">) + </span><span class="default">$args</span><span class="keyword">)), </span><span class="default">1</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// find the next named argument. each search starts at the end of the previous replacement.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">for (</span><span class="default">$pos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/(?&lt;=%)\(([a-zA-Z_]\w*)\)/'</span><span class="keyword">, </span><span class="default">$format</span><span class="keyword">, </span><span class="default">$match</span><span class="keyword">, </span><span class="default">PREG_OFFSET_CAPTURE</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">);) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arg_pos </span><span class="keyword">= </span><span class="default">$match</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arg_len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$match</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arg_key </span><span class="keyword">= </span><span class="default">$match</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">];<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// programmer did not supply a value for the named argument found in the format string<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (! </span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$arg_key</span><span class="keyword">, </span><span class="default">$arg_nums</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">user_error</span><span class="keyword">(</span><span class="string">"sprintfn(): Missing argument '</span><span class="keyword">${</span><span class="default">arg_key</span><span class="keyword">}</span><span class="string">'"</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// replace the named argument with the corresponding numeric one<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$format </span><span class="keyword">= </span><span class="default">substr_replace</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">$replace </span><span class="keyword">= </span><span class="default">$arg_nums</span><span class="keyword">[</span><span class="default">$arg_key</span><span class="keyword">] . </span><span class="string">'$'</span><span class="keyword">, </span><span class="default">$arg_pos</span><span class="keyword">, </span><span class="default">$arg_len</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">$arg_pos </span><span class="keyword">+ </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">); </span><span class="comment">// skip to end of replacement for next iteration<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">vsprintf</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">));<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93552""></a>
  <div class="note">
   <strong class="user">Astone</strong>
   <a href="#93552" class="date">16-Sep-2009 08:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When you're using Google translator, you have to 'escape' the 'conversion specifications' by putting &lt;span class="notranslate"&gt;&lt;/span&gt; around them.<br />
<br />
Like this:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">getGoogleTranslation</span><span class="keyword">(</span><span class="default">$sString</span><span class="keyword">, </span><span class="default">$bEscapeParams </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// "escape" sprintf paramerters<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$bEscapeParams</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sPatern </span><span class="keyword">= </span><span class="string">'/(?:%%|%(?:[0-9]+\$)?[+-]?(?:[ 0]|\'.)?-?[0-9]*(?:\.[0-9]+)?[bcdeufFosxX])/'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sEscapeString </span><span class="keyword">= </span><span class="string">'&lt;span class="notranslate"&gt;$0&lt;/span&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sString </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$sPatern</span><span class="keyword">, </span><span class="default">$sEscapeString</span><span class="keyword">, </span><span class="default">$sString</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Compose data array (English to Dutch)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$aData </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'v'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'1.0'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'q'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">$sString</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'langpair'&nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'en|nl'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; );<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Initialize connection<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rService </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Connection settings<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$rService</span><span class="keyword">, </span><span class="default">CURLOPT_URL</span><span class="keyword">, </span><span class="string">'<a href="http://ajax.googleapis.com/ajax/services/language/translate" rel="nofollow" target="_blank">http://ajax.googleapis.com/ajax/services/language/translate</a>'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$rService</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$rService</span><span class="keyword">, </span><span class="default">CURLOPT_POSTFIELDS</span><span class="keyword">, </span><span class="default">$aData</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Execute request<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$sResponse </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$rService</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Close connection<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$rService</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Extract text from JSON response<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$oResponse </span><span class="keyword">= </span><span class="default">json_decode</span><span class="keyword">(</span><span class="default">$sResponse</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if (isset(</span><span class="default">$oResponse</span><span class="keyword">-&gt;</span><span class="default">responseData</span><span class="keyword">-&gt;</span><span class="default">translatedText</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sTranslation </span><span class="keyword">= </span><span class="default">$oResponse</span><span class="keyword">-&gt;</span><span class="default">responseData</span><span class="keyword">-&gt;</span><span class="default">translatedText</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If some error occured, use the original string<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sTranslation </span><span class="keyword">= </span><span class="default">$sString</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Replace "notranslate" tags<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$bEscapeParams</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sEscapePatern </span><span class="keyword">= </span><span class="string">'/&lt;span class="notranslate"&gt;([^&lt;]*)&lt;\/span&gt;/'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sTranslation </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$sEscapePatern</span><span class="keyword">, </span><span class="string">'$1'</span><span class="keyword">, </span><span class="default">$sTranslation</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Return result<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$sTranslation</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Thanks to MelTraX for defining the RegExp!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93156""></a>
  <div class="note">
   <strong class="user">Jay Gilford</strong>
   <a href="#93156" class="date">26-Aug-2009 02:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I created this function a while back to save on having to combine mysql_real_escape_string onto all the params passed into a sprintf. it works literally the same as the sprintf other than that it doesn't require you to escape your inputs. Hope its of some use to people<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">mressf</span><span class="keyword">()<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$args </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">) &lt; </span><span class="default">2</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$query </span><span class="keyword">= </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$args </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'mysql_real_escape_string'</span><span class="keyword">, </span><span class="default">$args</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_unshift</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">, </span><span class="default">$query</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$query </span><span class="keyword">= </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">'sprintf'</span><span class="keyword">, </span><span class="default">$args</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$query</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Regards<br />
Jay<br />
Jaygilford.com</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92157""></a>
  <div class="note">
   <strong class="user">jfgrissom at gmail dot com</strong>
   <a href="#92157" class="date">12-Jul-2009 06:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had a nightmare trying to find the two's complement of a 32 bit number.<br />
<br />
I got this from <a href="http://www.webmasterworld.com/forum88/13334.htm (credit where credit is due... =P&nbsp; " rel="nofollow" target="_blank">http://www.webmasterworld.com/forum88/13334.htm (credit where credit is due... =P&nbsp; </a>)<br />
<br />
Quote: ...find out the 2's complement of any number, which is -(pow(2, n) - N) where n is the number of bits and N is the number for which to find out its 2's complement.<br />
<br />
This worked magic for me... previously I was trying to use<br />
<br />
sprintf ("%b",$32BitDecimal);<br />
But it always returned 10000000000000000000000 when the $32BitDecimal value got above 2,000,000,000.<br />
<br />
This -(pow(2, n) - N)<br />
Worked remarkably well and was very accurate.<br />
<br />
Hope this helps someone fighting with two's complement in PHP.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92124""></a>
  <div class="note">
   <strong class="user">John Walker</strong>
   <a href="#92124" class="date">10-Jul-2009 02:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To add to other notes below about floating point problems, I noted that %f and %F will apparently output a maximum precision of 6 as a default so you have to specify 1.15f (eg) if you need more.<br />
<br />
In my case, the input (from MySQL) was a string with 15 digits of precision that was displayed with 6. Likely what happens is that the rounding occurs in the conversion to a float before it is displayed. Displaying it as 1.15f (or in my case, %s) shows the correct number.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89020""></a>
  <div class="note">
   <strong class="user">viktor at textalk dot com</strong>
   <a href="#89020" class="date">18-Feb-2009 05:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A more complete and working version of mb_sprintf and mb_vsprintf. It should work with any "ASCII preserving" encoding such as UTF-8 and all the ISO-8859 charsets. It handles sign, padding, alignment, width and precision. Argument swapping is not handled.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if (!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'mb_sprintf'</span><span class="keyword">)) {<br />
&nbsp; function </span><span class="default">mb_sprintf</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$argv </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">() ;<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$argv</span><span class="keyword">) ;<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">mb_vsprintf</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">$argv</span><span class="keyword">) ;<br />
&nbsp; }<br />
}<br />
if (!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'mb_vsprintf'</span><span class="keyword">)) {<br />
&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; * Works with all encodings in format and arguments.<br />
&nbsp;&nbsp; * Supported: Sign, padding, alignment, width and precision.<br />
&nbsp;&nbsp; * Not supported: Argument swapping.<br />
&nbsp;&nbsp; */<br />
&nbsp; </span><span class="keyword">function </span><span class="default">mb_vsprintf</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">$argv</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$encoding</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$encoding </span><span class="keyword">= </span><span class="default">mb_internal_encoding</span><span class="keyword">();<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="comment">// Use UTF-8 in the format so we can use the u flag in preg_split<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$format </span><span class="keyword">= </span><span class="default">mb_convert_encoding</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="string">'UTF-8'</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$newformat </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">; </span><span class="comment">// build a new format in UTF-8<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$newargv </span><span class="keyword">= array(); </span><span class="comment">// unhandled args in unchanged encoding<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">while (</span><span class="default">$format </span><span class="keyword">!== </span><span class="string">""</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Split the format in two parts: $pre and $post by the first %-directive<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // We get also the matched groups<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">list (</span><span class="default">$pre</span><span class="keyword">, </span><span class="default">$sign</span><span class="keyword">, </span><span class="default">$filler</span><span class="keyword">, </span><span class="default">$align</span><span class="keyword">, </span><span class="default">$size</span><span class="keyword">, </span><span class="default">$precision</span><span class="keyword">, </span><span class="default">$type</span><span class="keyword">, </span><span class="default">$post</span><span class="keyword">) =<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">preg_split</span><span class="keyword">(</span><span class="string">"!\%(\+?)('.|[0 ]|)(-?)([1-9][0-9]*|)(\.[1-9][0-9]*|)([%a-zA-Z])!u"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$format</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">PREG_SPLIT_DELIM_CAPTURE</span><span class="keyword">) ;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newformat </span><span class="keyword">.= </span><span class="default">mb_convert_encoding</span><span class="keyword">(</span><span class="default">$pre</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">, </span><span class="string">'UTF-8'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$type </span><span class="keyword">== </span><span class="string">''</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// didn't match. do nothing. this is the last iteration.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">$type </span><span class="keyword">== </span><span class="string">'%'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// an escaped %<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newformat </span><span class="keyword">.= </span><span class="string">'%%'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">$type </span><span class="keyword">== </span><span class="string">'s'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arg </span><span class="keyword">= </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$argv</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arg </span><span class="keyword">= </span><span class="default">mb_convert_encoding</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">, </span><span class="string">'UTF-8'</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$padding_pre </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$padding_post </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// truncate $arg<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$precision </span><span class="keyword">!== </span><span class="string">''</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$precision </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$precision</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$precision </span><span class="keyword">&gt; </span><span class="default">0 </span><span class="keyword">&amp;&amp; </span><span class="default">mb_strlen</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">,</span><span class="default">$encoding</span><span class="keyword">) &gt; </span><span class="default">$precision</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arg </span><span class="keyword">= </span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$precision</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$precision</span><span class="keyword">,</span><span class="default">$encoding</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// define padding<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$size </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arglen </span><span class="keyword">= </span><span class="default">mb_strlen</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$arglen </span><span class="keyword">&lt; </span><span class="default">$size</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$filler</span><span class="keyword">===</span><span class="string">''</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$filler </span><span class="keyword">= </span><span class="string">' '</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$align </span><span class="keyword">== </span><span class="string">'-'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$padding_post </span><span class="keyword">= </span><span class="default">str_repeat</span><span class="keyword">(</span><span class="default">$filler</span><span class="keyword">, </span><span class="default">$size </span><span class="keyword">- </span><span class="default">$arglen</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$padding_pre </span><span class="keyword">= </span><span class="default">str_repeat</span><span class="keyword">(</span><span class="default">$filler</span><span class="keyword">, </span><span class="default">$size </span><span class="keyword">- </span><span class="default">$arglen</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// escape % and pass it forward<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newformat </span><span class="keyword">.= </span><span class="default">$padding_pre </span><span class="keyword">. </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%'</span><span class="keyword">, </span><span class="string">'%%'</span><span class="keyword">, </span><span class="default">$arg</span><span class="keyword">) . </span><span class="default">$padding_post</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// another type, pass forward<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newformat </span><span class="keyword">.= </span><span class="string">"%</span><span class="default">$sign$filler$align$size$precision$type</span><span class="string">"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newargv</span><span class="keyword">[] = </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$argv</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$format </span><span class="keyword">= </span><span class="default">strval</span><span class="keyword">(</span><span class="default">$post</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="comment">// Convert new format back from UTF-8 to the original encoding<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$newformat </span><span class="keyword">= </span><span class="default">mb_convert_encoding</span><span class="keyword">(</span><span class="default">$newformat</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">, </span><span class="string">'UTF-8'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">vsprintf</span><span class="keyword">(</span><span class="default">$newformat</span><span class="keyword">, </span><span class="default">$newargv</span><span class="keyword">);<br />
&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88761""></a>
  <div class="note">
   <strong class="user">splogamurugan at gmail dot com</strong>
   <a href="#88761" class="date">06-Feb-2009 02:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
$format = 'There are %1$d monkeys in the %s and %s ';<br />
printf($format, 100, 'Chennai', 'Bangalore'); <br />
<br />
Expecting to output<br />
"There are 100 monkeys in the Chennai and bangalore"<br />
<br />
But, this will output <br />
"There are 100 monkeys in the 100 and Chennai"<br />
<br />
Because, the second and Third specifiers takes 1rst and 2nd arguments. Because it is not assigned with any arguments.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88218""></a>
  <div class="note">
   <strong class="user">remy dot damour at -please-no-spam-laposte dot net</strong>
   <a href="#88218" class="date">15-Jan-2009 08:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
With printf() and sprintf() functions, escape character is not backslash '\' but rather '%'.<br />
<br />
Ie. to print '%' character you need to escape it with itself:<br />
<span class="default">&lt;?php<br />
printf</span><span class="keyword">(</span><span class="string">'%%%s%%'</span><span class="keyword">, </span><span class="string">'koko'</span><span class="keyword">); </span><span class="comment">#output: '%koko%'<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86835""></a>
  <div class="note">
   <strong class="user">MelTraX</strong>
   <a href="#86835" class="date">05-Nov-2008 10:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php
<br />
&nbsp; </span><span class="comment">// parses a string meant for printf and returns an array of found parameters (or NULL if it contains syntax errors)
<br />
&nbsp; </span><span class="keyword">function </span><span class="default">parsePrintfParameters</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$valid </span><span class="keyword">= </span><span class="string">'/^(?:%%|%(?:[0-9]+\$)?[+-]?(?:[ 0]|\'.)?-?[0-9]*(?:\.[0-9]+)?[bcdeufFosxX])/'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$originalString </span><span class="keyword">= </span><span class="default">$string</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array();
<br />
&nbsp;&nbsp;&nbsp; while(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(!</span><span class="default">$string </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/^[^%]*/'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">))
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; break;
<br />

<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="default">$valid</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[] = </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]));
<br />
&nbsp;&nbsp; &nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">error</span><span class="keyword">(</span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">'"%s" has an error near "%s".'</span><span class="keyword">, </span><span class="default">$originalString</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">));
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">NULL</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;
<br />
&nbsp; }
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86068""></a>
  <div class="note">
   <strong class="user">php at mikeboers dot com</strong>
   <a href="#86068" class="date">01-Oct-2008 10:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
And continuing on the same theme of a key-based sprintf...<br />
<br />
I'm roughly (I can see a couple cases where it comes out wierd) copying the syntax of Python's string formatting with a dictionary. The improvement over the several past attempts is that this one still respects all of the formating options, as you can see in my example.<br />
<br />
And the error handling is really crappy (just an echo). I just threw this together so do with it what you will. =]<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">sprintf_array</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$keys&nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$keysmap </span><span class="keyword">= </span><span class="default">array_flip</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$values&nbsp; </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/%\(([a-zA-Z0-9_ -]+)\)/'</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!isset(</span><span class="default">$keysmap</span><span class="keyword">[</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]]))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"No key </span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]</span><span class="string">\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="string">'%' </span><span class="keyword">. (</span><span class="default">$keysmap</span><span class="keyword">[</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]] + </span><span class="default">1</span><span class="keyword">) . </span><span class="string">'$'</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_unshift</span><span class="keyword">(</span><span class="default">$values</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$values</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">'sprintf'</span><span class="keyword">, </span><span class="default">$values</span><span class="keyword">);<br />
}<br />
<br />
echo </span><span class="default">sprintf_array</span><span class="keyword">(</span><span class="string">'4 digit padded number: %(num)04d '</span><span class="keyword">, array(</span><span class="string">'num' </span><span class="keyword">=&gt; </span><span class="default">42</span><span class="keyword">));<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Cheers!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83912""></a>
  <div class="note">
   <strong class="user">ant at loadtrax dot com</strong>
   <a href="#83912" class="date">18-Jun-2008 11:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Rounding seems a little inconsistent, so beware:<br />
<br />
$ php -a<br />
<br />
php&gt; print round(1.0*20*1.175/100,2);<br />
0.24<br />
php &gt; print sprintf("%.2f",1.0*20*1.175/100);<br />
0.23<br />
php &gt; print sprintf("%.0f",1.0*20*1.175);<br />
24<br />
<br />
I get round this by doing the round first, then doing the sprintf.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83779""></a>
  <div class="note">
   <strong class="user">jaimthorn at yahoo dot com</strong>
   <a href="#83779" class="date">11-Jun-2008 04:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed a piece of code similar to the one Matt posted below, on the 10th of March, 2008.&nbsp; However, I wasn't completely satisfied with Matt's code (sorry, Matt!&nbsp; No offense intended!), because<br />
<br />
1) I don't like to initialize variables when it's not really needed, and<br />
2) it contains two bugs.<br />
<br />
What are the bugs?<br />
<br />
First, Matt's code tests for count($vars) &gt; 0, but if $var == "Hello world!", then count($var) == 1, but the foreach() will crash because $var has to be an array.&nbsp; So instead, my code tests for is_array($var).<br />
<br />
Second, if a key in $vars is a prefix of any of the later keys in the array (like 'object' is the beginning of 'objective') then the str_replace messes things up.&nbsp; This is no big deal if your keys are hard-coded and you can make sure the keys don't interfere, but in my code the keys are variable.&nbsp; So I decided to first sort the array on a decreasing length of the key.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">cmp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">) - </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />
}<br />
<br />
function </span><span class="default">sprintf2</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$vars</span><span class="keyword">, </span><span class="default">$char </span><span class="keyword">= </span><span class="string">'%'</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$vars</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">uksort</span><span class="keyword">(</span><span class="default">$vars</span><span class="keyword">, </span><span class="string">"cmp"</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$vars </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$char </span><span class="keyword">. </span><span class="default">$k</span><span class="keyword">, </span><span class="default">$v</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$str</span><span class="keyword">;<br />
}<br />
<br />
echo </span><span class="default">sprintf2</span><span class="keyword">( </span><span class="string">'Hello %your_name, my name is %my_name! I am %my_age, how old are you? I like %object and I want to %objective_in_life!'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">, array( </span><span class="string">'your_name'&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="string">'Matt'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">, </span><span class="string">'my_name'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="string">'Jim'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">, </span><span class="string">'my_age'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'old'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">, </span><span class="string">'object'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'women'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">, </span><span class="string">'objective_in_life' </span><span class="keyword">=&gt; </span><span class="string">'write code'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
If possible, and if you're willing, you can also embed the key fields in the text between percent-signs, rather than prefixing the keys with one.&nbsp; Sorting is no longer necessary, and the execution time is less than half of the code above:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">sprintf3</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$vars</span><span class="keyword">, </span><span class="default">$char </span><span class="keyword">= </span><span class="string">'%'</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$tmp </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$vars </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp</span><span class="keyword">[</span><span class="default">$char </span><span class="keyword">. </span><span class="default">$k </span><span class="keyword">. </span><span class="default">$char</span><span class="keyword">] = </span><span class="default">$v</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">), </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">), </span><span class="default">$str</span><span class="keyword">);<br />
}<br />
<br />
echo </span><span class="default">sprintf3</span><span class="keyword">( </span><span class="string">'Hello %your_name%, my name is %my_name%! I am %my_age%, how old are you? I like %object% and I want to %objective_in_life%!'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">, array( </span><span class="string">'your_name'&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="string">'Matt'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">, </span><span class="string">'my_name'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="string">'Jim'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">, </span><span class="string">'my_age'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'old'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">, </span><span class="string">'object'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'women'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">, </span><span class="string">'objective_in_life' </span><span class="keyword">=&gt; </span><span class="string">'write code'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );<br />
</span><span class="default">?&gt;<br />
</span><br />
If you're willing to embed the keys in the text, you may also be willing to embed the keys themselves in percent signs, thus shaving off another 30% of the execution time:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">sprintf4</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$vars</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$vars</span><span class="keyword">), </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$vars</span><span class="keyword">), </span><span class="default">$str</span><span class="keyword">);<br />
}<br />
<br />
echo </span><span class="default">sprintf4</span><span class="keyword">( </span><span class="string">'Hello %your_name%, my name is %my_name%! I am %my_age%, how old are you? I like %object% and I want to %objective_in_life%!'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">, array( </span><span class="string">'%your_name%'&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="string">'Matt'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">, </span><span class="string">'%my_name%'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="string">'Jim'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">, </span><span class="string">'%my_age%'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'old'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">, </span><span class="string">'%object%'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'women'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">, </span><span class="string">'%objective_in_life%' </span><span class="keyword">=&gt; </span><span class="string">'write code'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );<br />
</span><span class="default">?&gt;<br />
</span><br />
Of course, by now the sprintf function is no longer something you'd want to write to mum and dad about...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82176""></a>
  <div class="note">
   <strong class="user">ranema at ubuntu dot polarhome dot com</strong>
   <a href="#82176" class="date">30-Mar-2008 04:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It's very comfortible for long Sql queries:<br />
<br />
<span class="default">&lt;?php<br />
$_gQuery </span><span class="keyword">= </span><span class="string">"UPDATE `x` SET `a` = %i AND `b` = '%s' WHERE `my` = '%s';"</span><span class="keyword">; </span><span class="comment">// ........<br />
<br />
</span><span class="default">mysql_query</span><span class="keyword">( </span><span class="default">sprintf</span><span class="keyword">( </span><span class="default">$_gQuery</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'rrrr' </span><span class="keyword">) );<br />
</span><span class="default">?&gt;<br />
</span><br />
But if you have a short query, then it would be much faster to append your data by using `.`.<br />
<br />
<span class="default">&lt;?php<br />
$_gQuery </span><span class="keyword">= </span><span class="string">'SELECT COUNT(*) FROM `' </span><span class="keyword">. </span><span class="default">$_gName </span><span class="keyword">. </span><span class="string">'`;'</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81706""></a>
  <div class="note">
   <strong class="user">matt</strong>
   <a href="#81706" class="date">10-Mar-2008 06:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Was looking for a assoc way of using sprintf but couldnt find one, probably wasnt looking hard enough so came up with this. Very very simple indeed...<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">sprintf2</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">, </span><span class="default">$vars</span><span class="keyword">=array(), </span><span class="default">$char</span><span class="keyword">=</span><span class="string">'%'</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">$str</span><span class="keyword">) return </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$vars</span><span class="keyword">) &gt; </span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$vars </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$char </span><span class="keyword">. </span><span class="default">$k</span><span class="keyword">, </span><span class="default">$v</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$str</span><span class="keyword">;<br />
}<br />
<br />
echo </span><span class="default">sprintf2</span><span class="keyword">(</span><span class="string">'Hello %your_name my name is %my_name! I am %my_age, how old are you? I like %object!'</span><span class="keyword">, array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'your_name' </span><span class="keyword">=&gt; </span><span class="string">'Ben'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'my_name' </span><span class="keyword">=&gt; </span><span class="string">'Matt'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'my_age' </span><span class="keyword">=&gt; </span><span class="string">'21'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'object' </span><span class="keyword">=&gt; </span><span class="string">'food'<br />
</span><span class="keyword">));<br />
<br />
</span><span class="comment">// Hello Ben my name is Matt! I am 21, how old are you? I like food!<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Looks nice anyway :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80344""></a>
  <div class="note">
   <strong class="user">scott dot gardner at mac dot com</strong>
   <a href="#80344" class="date">10-Jan-2008 10:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In the last example of Example#6, there is an error regarding the output.<br />
<br />
printf("[%10.10s]\n", $t); // left-justification but with a cutoff of 10 characters<br />
<br />
This outputs right-justified.<br />
<br />
In order to output left-justified:<br />
<br />
printf("[%-10.10s]\n", $t);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77659""></a>
  <div class="note">
   <strong class="user">me at umarfarooq dot net</strong>
   <a href="#77659" class="date">07-Sep-2007 08:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
/**<br />
This function returns a formated&nbsp; string with the legnth you specify<br />
@string holds the string which you want to format<br />
@len holds the length you want to format <br />
**/<br />
function formatString($string, $len)<br />
{<br />
&nbsp;&nbsp;&nbsp; if (strlen($string) &lt; $len)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $addchar=($len - strlen($string)) ;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for ($i = 0; $i &lt; $addchar; $i++) <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $string=sprintf("$string%s", "0");<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if (strlen($string) &gt; $len)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $string=substr($string,0,$len);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return $string;&nbsp; &nbsp; <br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75076""></a>
  <div class="note">
   <strong class="user">Thomas Breuss</strong>
   <a href="#75076" class="date">11-May-2007 09:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note:<br />
If you want to use % in sprintf, you have to "quote" it like %%.<br />
<br />
Example:<br />
echo sprintf("Green =&gt; %d%%'", 50);<br />
<br />
Output:<br />
Green =&gt; 50%</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71054""></a>
  <div class="note">
   <strong class="user">SWestrup</strong>
   <a href="#71054" class="date">09-Nov-2006 08:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In response to Anonymous, who claimed that:<br />
<br />
&nbsp; printf("[%s]\n", str_pad('Hello', 20));<br />
<br />
and<br />
<br />
&nbsp; printf("[%-20s]\n", 'Hello');<br />
<br />
are the same thing: you've missed the point.<br />
<br />
They're only the same when the amount of padding is a known constant. When its a variable (or an expression), its often much more convenient to be able to write:<br />
<br />
&nbsp; printf("[%-*s]\n", 3*$n+2, "Hello");<br />
<br />
than what you have to go through now, which is either:<br />
<br />
&nbsp; $t = 3*$n+2;<br />
&nbsp; printf("[%-{$t}s]\n","Hello");<br />
<br />
or<br />
<br />
&nbsp; printf("[%s]\n", str_pad('Hello', 3*$n+2));</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68794""></a>
  <div class="note">
   <strong class="user">bknakkerNO at SPAMgmail dot com</strong>
   <a href="#68794" class="date">10-Aug-2006 11:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that in PHP5 (.1.4 for me) sprintf will not use the __toString function of an object.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">pr</span><span class="keyword">{<br />
private </span><span class="default">$l</span><span class="keyword">;<br />
public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$l</span><span class="keyword">)<br />
{<br />
</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">l</span><span class="keyword">=</span><span class="default">$l</span><span class="keyword">;<br />
}<br />
public function </span><span class="default">__toString</span><span class="keyword">()<br />
{<br />
return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">l</span><span class="keyword">;<br />
}<br />
}<br />
echo new </span><span class="default">pr</span><span class="keyword">(</span><span class="string">'This works!!'</span><span class="keyword">); </span><span class="comment">//This will display 'This works!!'<br />
</span><span class="keyword">echo </span><span class="default">sprintf</span><span class="keyword">(new </span><span class="default">pr</span><span class="keyword">(</span><span class="string">'This doesnt'</span><span class="keyword">)); </span><span class="comment">// will display 'Object'<br />
</span><span class="default">?&gt;<br />
</span><br />
Be careful with that!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57723""></a>
  <div class="note">
   <strong class="user">tim dot brouckaert dot NOSPAM at gmail dot com</strong>
   <a href="#57723" class="date">12-Oct-2005 02:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to center align some text using the printf or sprintf functions, you can just use the following:<br />
<br />
function center_text($word){<br />
&nbsp;&nbsp;&nbsp; $tot_width = 30;<br />
&nbsp;&nbsp;&nbsp; $symbol = "-";<br />
&nbsp;&nbsp;&nbsp; $middle = round($tot_width/2);<br />
&nbsp;&nbsp;&nbsp; $length_word = strlen($word);<br />
&nbsp;&nbsp;&nbsp; $middle_word = round($length_word / 2);<br />
&nbsp;&nbsp;&nbsp; $last_position = $middle + $middle_word;<br />
&nbsp;&nbsp;&nbsp; $number_of_spaces = $middle - $middle_word;<br />
<br />
&nbsp;&nbsp;&nbsp; $result = sprintf("%'{$symbol}{$last_position}s", $word);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for ($i = 0; $i &lt; $number_of_spaces; $i++){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $result .= "$symbol";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return $result;<br />
}<br />
<br />
$string = "This is some text";<br />
print center_text($string);<br />
<br />
off course you can modify the function to use more arguments.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55837""></a>
  <div class="note">
   <strong class="user">webmaster at cafe-clope dot net</strong>
   <a href="#55837" class="date">15-Aug-2005 06:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
trying to fix the multibyte non-compliance of sprintf, I came to that :<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">mb_sprintf</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$argv </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">() ;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$argv</span><span class="keyword">) ;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">mb_vsprintf</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">$argv</span><span class="keyword">) ;<br />
}<br />
<br />
function </span><span class="default">mb_vsprintf</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">$argv</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$newargv </span><span class="keyword">= array() ;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">"`\%('.+|[0 ]|)([1-9][0-9]*|)s`U"</span><span class="keyword">, </span><span class="default">$format</span><span class="keyword">, </span><span class="default">$results</span><span class="keyword">, </span><span class="default">PREG_SET_ORDER</span><span class="keyword">) ;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$results </span><span class="keyword">as </span><span class="default">$result</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; list(</span><span class="default">$string_format</span><span class="keyword">, </span><span class="default">$filler</span><span class="keyword">, </span><span class="default">$size</span><span class="keyword">) = </span><span class="default">$result </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$filler</span><span class="keyword">)&gt;</span><span class="default">1</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$filler </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$filler</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">) ;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while(!</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$arg </span><span class="keyword">= </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$argv</span><span class="keyword">)))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newargv</span><span class="keyword">[] = </span><span class="default">$arg </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">$string_format</span><span class="keyword">) ;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$format </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; . (</span><span class="default">$size </span><span class="keyword">? </span><span class="default">str_repeat</span><span class="keyword">(</span><span class="default">$filler</span><span class="keyword">, </span><span class="default">$size</span><span class="keyword">-</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">)) : </span><span class="string">''</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; . </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%'</span><span class="keyword">, </span><span class="string">'%%'</span><span class="keyword">, </span><span class="default">$arg</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; . </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">+</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string_format</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">vsprintf</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">$newargv</span><span class="keyword">) ;<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
handle with care :<br />
1. that function was designed mostly for utf-8. i guess it won't work with any static mb encoding.<br />
2. my configuration sets the mbstring.func_overload configuration directive to 7, so you may wish to replace substr, strlen, etc. with mb_* equivalents.<br />
3. since preg_* doesn't complies with mb strings, I used a '.+' in the regexp to symbolize an escaped filler character. That means, %'xy5s pattern will match, unfortunately. It is recomended to remove the '+', unless you are intending to use an mb char as filler.<br />
4. the filler fills at left, and only at left.<br />
5. I couldn't succeed with a preg_replace thing : the problem was to use the differents lengths of the string arguements in the same replacement, string or callback. That's why the code is much longuer than I expected.<br />
6. The pattern wil not match any %1\$s thing... just was too complicated for me.<br />
7. Although it has been tested, and works fine within the limits above, this is much more a draft than a end-user function. I would enjoy any improvment.<br />
<br />
The test code below shows possibilities, and explains the problem that occures with an mb string argument in sprintf.<br />
<br />
<span class="default">&lt;?php<br />
header</span><span class="keyword">(</span><span class="string">"content-type:text/plain; CHARSET=gb2312"</span><span class="keyword">) ;<br />
</span><span class="default">$mb_string </span><span class="keyword">= </span><span class="string">"x?x?x" </span><span class="keyword">;<br />
echo </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">"%010s"</span><span class="keyword">, </span><span class="default">$mb_string</span><span class="keyword">), </span><span class="string">" [octet-size: "</span><span class="keyword">, </span><span class="default">str_sizeof</span><span class="keyword">(</span><span class="default">$mb_string</span><span class="keyword">) , </span><span class="string">" ; count: "</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">"%010s"</span><span class="keyword">, </span><span class="default">$mb_string</span><span class="keyword">)), </span><span class="string">" characters]\n" </span><span class="keyword">;<br />
echo </span><span class="default">mb_sprintf</span><span class="keyword">(</span><span class="string">"%010s"</span><span class="keyword">, </span><span class="default">$mb_string</span><span class="keyword">), </span><span class="string">" [octet-size: "</span><span class="keyword">, </span><span class="default">str_sizeof</span><span class="keyword">(</span><span class="default">$mb_string</span><span class="keyword">) , </span><span class="string">" ; count: "</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">mb_sprintf</span><span class="keyword">(</span><span class="string">"%010s"</span><span class="keyword">, </span><span class="default">$mb_string</span><span class="keyword">)), </span><span class="string">" characters]\n" </span><span class="keyword">;<br />
echo </span><span class="string">"\n" </span><span class="keyword">;<br />
echo </span><span class="default">mb_sprintf</span><span class="keyword">(</span><span class="string">"%''10s\n%'010s\n%'?10s\n%10d\n%'x10s\n%010s\n% 10s\n%010s\n%'1s\n"</span><span class="keyword">, </span><span class="string">"zero"</span><span class="keyword">, </span><span class="string">"one"</span><span class="keyword">, </span><span class="string">"two"</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="string">"four"</span><span class="keyword">, </span><span class="string">"??ve"</span><span class="keyword">, </span><span class="string">"%s%i%x"</span><span class="keyword">, </span><span class="string">"??ve?"</span><span class="keyword">, </span><span class="string">"eight"</span><span class="keyword">) ;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53923""></a>
  <div class="note">
   <strong class="user">david at rayninfo dot co dot uk</strong>
   <a href="#53923" class="date">17-Jun-2005 08:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Using sprintf to force leading leading zeros<br />
<br />
foreach (range(1, 10) as $v) {echo "&lt;br&gt;tag_".sprintf("%02d",$v);}<br />
<br />
displays<br />
tag_01<br />
tag_02<br />
tag_03<br />
.. etc</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53372""></a>
  <div class="note">
   <strong class="user">ian dot w dot davis at gmail dot com</strong>
   <a href="#53372" class="date">30-May-2005 04:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just to elaborate on downright's point about different meanings for %f, it appears the behavior changed significantly as of 4.3.7, rather than just being different on different platforms. Previously, the width specifier gave the number of characters allowed BEFORE the decimal. Now, the width specifier gives the TOTAL number of characters. (This is in line with the semantics of printf() in other languages.) See bugs #28633 and #29286 for more details.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52451""></a>
  <div class="note">
   <strong class="user">Pacogliss</strong>
   <a href="#52451" class="date">02-May-2005 09:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just a reminder for beginners : example 6 'printf("[%10s]\n",&nbsp; &nbsp; $s);' only works (that is, shows out the spaces) if you put the html '&lt;pre&gt;&lt;/pre&gt;' tags ( head-scraping time saver ;-).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51990""></a>
  <div class="note">
   <strong class="user">christian at wenz dot org</strong>
   <a href="#51990" class="date">18-Apr-2005 09:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
@ henke dot andersson at comhem dot se: Use vprintf()/vsprintf() for that.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51933""></a>
  <div class="note">
   <strong class="user">henke dot andersson at comhem dot se</strong>
   <a href="#51933" class="date">15-Apr-2005 05:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Mind that it doesn't allow you to use a array as multiple arguments like this:<br />
<span class="default">&lt;?php<br />
printf</span><span class="keyword">(</span><span class="string">'%s %s'</span><span class="keyword">,array(</span><span class="string">'a'</span><span class="keyword">,</span><span class="string">'b'</span><span class="keyword">)) </span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49254""></a>
  <div class="note">
   <strong class="user">jrpozo at conclase dot net</strong>
   <a href="#49254" class="date">21-Jan-2005 04:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be careful if you use the %f modifier to round decimal numbers as it (starting from 4.3.10) will no longer produce a float number if you set certain locales, so you can't accumulate the result. For example:<br />
<br />
setlocale(LC_ALL, 'es_ES');<br />
echo(sprintf("%.2f", 13.332) + sprintf("%.2f", 14.446))<br />
<br />
gives 27 instead of 27.78, so use %F instead.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="48880""></a>
  <div class="note">
   <strong class="user">timo at frenay dot net</strong>
   <a href="#48880" class="date">10-Jan-2005 07:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that the documentation is unclear about the details of the sign specifier. First of all, the character for this is "+".<br />
<br />
Also note that the following does NOT print "+00.00" as you might expect:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; printf</span><span class="keyword">(</span><span class="string">'%+02.2f'</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
The sign is included in the width. This can't be solved by increasing the width:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; printf</span><span class="keyword">(</span><span class="string">'%+03.2f'</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
This will put the padding 0 before the sign.<br />
Here is a possible solution:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $value </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">printf</span><span class="keyword">(</span><span class="string">'%s%02.2f'</span><span class="keyword">, (</span><span class="default">$value </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">) ? </span><span class="string">'-' </span><span class="keyword">: </span><span class="string">'+'</span><span class="keyword">, </span><span class="default">abs</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">));<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="44646""></a>
  <div class="note">
   <strong class="user">Gkeeper80</strong>
   <a href="#44646" class="date">12-Aug-2004 12:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When using sprintf with padding, it's important to note that specifying the length of your padding does not restrict the length of your output.<br />
<br />
For example:<br />
$var = 'test';<br />
$output sprintf("%03s", $var);<br />
<br />
print $output;<br />
<br />
Produces:<br />
test<br />
<br />
NOT:<br />
est<br />
<br />
This may seem intuitive for working with numbers, but not neccesarily when working with strings.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42224""></a>
  <div class="note">
   <strong class="user">php at sharpdreams dot com</strong>
   <a href="#42224" class="date">08-May-2004 11:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that when using the argument swapping, you MUST number every argument, otherwise sprintf gets confused. This only happens if you use number arguments first, then switch to a non-numbered, and then back to a numbered one.<br />
<br />
<span class="default">&lt;?php<br />
$sql </span><span class="keyword">= </span><span class="default">sprintf</span><span class="keyword">( </span><span class="string">"select * from %1\$s left join %2\$s on( %1\$s.id = %2\$s.midpoint ) where %1\$s.name like '%%%s%%' and %2\$s.tagname is not null"</span><span class="keyword">, </span><span class="string">"table1"</span><span class="keyword">, </span><span class="string">"table2"</span><span class="keyword">, </span><span class="string">"bob" </span><span class="keyword">);<br />
</span><span class="comment">// Wont work:<br />
// Sprintf will complain about not enough arguments.<br />
</span><span class="default">$sql </span><span class="keyword">= </span><span class="default">sprintf</span><span class="keyword">( </span><span class="string">"select * from %1\$s left join %2\$s on( %1\$s.id = %2\$s.midpoint ) where %1\$s.name like '%%%3\$s%%' and %2\$s.tagname is not null"</span><span class="keyword">, </span><span class="string">"table1"</span><span class="keyword">, </span><span class="string">"table2"</span><span class="keyword">, </span><span class="string">"bob" </span><span class="keyword">);<br />
</span><span class="comment">// Will work: note the %3\$s<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41071""></a>
  <div class="note">
   <strong class="user">kekec at kukac dot hu</strong>
   <a href="#41071" class="date">29-Mar-2004 06:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A really working one:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">cutzero</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) { <br />
&nbsp;&nbsp; return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/(\.?)0+$/"</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="29582""></a>
  <div class="note">
   <strong class="user">info at nospam dot webtip dot dk</strong>
   <a href="#29582" class="date">18-Feb-2003 02:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to format a phonenumber with spaces, use chunk_split() which splits a string into smaller chunks. It's much simpler than using sprintf.<br />
<br />
$phone = "12345678";<br />
<br />
chunk_split ($phone, 2);<br />
<br />
will return 12 34 56 78</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="25243""></a>
  <div class="note">
   <strong class="user">no dot email dot address at example dot com</strong>
   <a href="#25243" class="date">16-Sep-2002 03:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Using argument swapping in sprintf() with gettext: Let's say you've written the following script:<br />
<br />
<span class="default">&lt;?php<br />
$var </span><span class="keyword">= </span><span class="default">sprintf</span><span class="keyword">(</span><span class="default">gettext</span><span class="keyword">(</span><span class="string">"The %2\$s contains %1\$d monkeys"</span><span class="keyword">), </span><span class="default">2</span><span class="keyword">, </span><span class="string">"cage"</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Now you run xgettext in order to generate a .po file. The .po file will then look like this:<br />
<br />
#: file.php:9<br />
#, ycp-format<br />
msgid "The %2\\$s contains %1\\$d monkeys"<br />
msgstr ""<br />
<br />
Notice how an extra backslash has been added by xgettext.<br />
<br />
Once you've translated the string, you must remove all backslashes from the ID string as well as the translation, so the po file will look like this:<br />
<br />
#: file.php:9<br />
#, ycp-format<br />
msgid "The %2$s contains %1$d monkeys"<br />
msgstr "Der er %1$d aber i %2$s"<br />
<br />
Now run msgfmt to generate the .mo file, restart Apache to remove the gettext cache if necessary, and you're off.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="25094""></a>
  <div class="note">
   <strong class="user">abiltcliffe at bigfoot.com</strong>
   <a href="#25094" class="date">10-Sep-2002 08:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To jrust at rustyparts.com, note that if you're using a double-quoted string and *don't* escape the dollar sign with a backslash, $s and $d will be interpreted as variable references. The backslash isn't part of the format specifier itself but you do need to include it when you write the format string (unless you use single quotes).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="22881""></a>
  <div class="note">
   <strong class="user">Andrew dot Wright at spamsux dot atnf dot csiro dot au</strong>
   <a href="#22881" class="date">03-Jul-2002 11:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An error in my last example:<br />
$b = sprintf("%30.s", $a);<br />
will only add enough spaces before $a to pad the spaces + strlen($a) to 30 places.<br />
<br />
My method of centering fixed text in a 72 character width space is:<br />
<br />
$a = "Some string here";<br />
$lwidth = 36; // 72/2<br />
$b = sprintf("%".($lwidth + round(strlen($a)/2)).".s", $a);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="18934""></a>
  <div class="note">
   <strong class="user">cv at corbach dot de</strong>
   <a href="#18934" class="date">10-Feb-2002 04:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To make radu.rendec@ines.ro's excellent function work on signed numbers you must change the first line to:<br />
<br />
$e = floor(log10(abs($x)));</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="12146""></a>
  <div class="note">
   <strong class="user">tjchamberlain.hotmail@com</strong>
   <a href="#12146" class="date">26-Mar-2001 08:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It is worth noting that "%5.2f" will result in a string 8 characters long (5 then the '.' then 2), not 5 characters as you might expect.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="12123""></a>
  <div class="note">
   <strong class="user">prolixmp3 at navigators dot lv</strong>
   <a href="#12123" class="date">23-Mar-2001 07:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are going to create a counter which uses _symbols_ before actual digits (see, f.e., SpyLog.com counters - they are filling space with "." before, so the count like 12345 looks like "........12345"), you can use the following:
<br />

<br />
$txt = "Abracadabra"; // actual string
<br />
$fit = 16; // how many digits to use
<br />
$fill = "."; // what to fill
<br />
$digits = sprintf ("%'{$fill}{$fit}s", $txt);
<br />

<br />
Paul (a.k.a. Mr.Prolix)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="9663""></a>
  <div class="note">
   <strong class="user">voudras at nospam dot swiftslayer dot org</strong>
   <a href="#9663" class="date">17-Nov-2000 03:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Little note about sprintf and its ilk.
<br />
if you attempt something like
<br />
$string = "dingy%sflem%dwombat";
<br />
$nbr = 5;
<br />
$name = "voudras";
<br />

<br />
$msg = sprintf("%d $string %s", $nbr, $name);
<br />

<br />
sprintf will complain about a lack in the number of arguments, this would be because of the %'s in the actual string. This can be a great benifit, but is also rather confusing if you dont realize this feature, and are passing questionable variables to sprintf (for, say perhaps logging). One way around this is using
<br />
ereg_replace("%","%%", $string); before 
<br />
sending it off to sprintf. This is actually how i came across this as a problem - i had realized some time ago that i would have to test my $string for
<br />
%'s, but when running the %-&gt;%% replacement on a very large serialized object, my application timed out.
<br />
&nbsp;&nbsp;&nbsp; My solution was to use
<br />
sprintf("%d %s %s", $nbr, $string, $name);
<br />
but, there was a reason i originally had done this the other way - i suppose i'll find out soon enough</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

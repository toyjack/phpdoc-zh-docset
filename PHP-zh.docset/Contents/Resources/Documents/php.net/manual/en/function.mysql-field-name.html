<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>取得结果中指定字段的字段名</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.mysql-field-len.html">? mysql_field_len</a></li>
      <li style="float: right;"><a href="function.mysql-field-seek.html">mysql_field_seek ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.mysql.html">MySQL 函数</a></li>
    <li>取得结果中指定字段的字段名</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.mysql-field-name" class="refentry">
   <div class="refnamediv">
    <h1 class="refname">mysql_field_name</h1>
    <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">mysql_field_name</span> &mdash; <span class="dc-title">
     取得结果中指定字段的字段名
    </span></p>

   </div>
 <div class="refsect1 description" id="refsect1-function.mysql-field-name-description">
  <h3 class="title">说明</h3>
    <div class="methodsynopsis dc-description">
     <span class="type">string</span> <span class="methodname"><strong>mysql_field_name</strong></span>
      ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$result</code></span>
     , <span class="methodparam"><span class="type">int</span> <code class="parameter">$field_index</code></span>
     )</div>

    <p class="para rdfs-comment">
     <span class="function"><strong>mysql_field_name()</strong></span>
     返回指定字段索引的字段名。<code class="parameter">result</code>
     必须是一个合法的结果标识符，<code class="parameter">field_index</code>
     是该字段的数字偏移量。
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <p class="para">
      <code class="parameter">field_index</code> 从 0 开始。
     </p>
     <p class="para">
      例如，第三个字段的索引值其实是 2，第四个字段的索引值是 3，以此类推。
     </p>
    </p></blockquote>
    <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">此函数返回的字段名<em class="emphasis">大小写敏感</em>。</span></p></blockquote>
    <p class="para">
     <div class="example" id="example-1904">
      <p><strong>Example #1 <span class="function"><strong>mysql_field_name()</strong></span> 例子</strong></p>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;The&nbsp;users&nbsp;table&nbsp;consists&nbsp;of&nbsp;three&nbsp;fields:<br />&nbsp;*&nbsp;&nbsp;&nbsp;user_id<br />&nbsp;*&nbsp;&nbsp;&nbsp;username<br />&nbsp;*&nbsp;&nbsp;&nbsp;password.<br />&nbsp;*/<br /></span><span style="color: #0000BB">$link&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysql_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"mysql_user"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"mysql_password"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$dbname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"mydb"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">mysql_select_db</span><span style="color: #007700">(</span><span style="color: #0000BB">$dbname</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$link</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;die(</span><span style="color: #DD0000">"Could&nbsp;not&nbsp;set&nbsp;</span><span style="color: #0000BB">$dbname</span><span style="color: #DD0000">:&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">mysql_error</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">$res&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysql_query</span><span style="color: #007700">(</span><span style="color: #DD0000">"select&nbsp;*&nbsp;from&nbsp;users"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$link</span><span style="color: #007700">);<br /><br />echo&nbsp;</span><span style="color: #0000BB">mysql_field_name</span><span style="color: #007700">(</span><span style="color: #0000BB">$res</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">mysql_field_name</span><span style="color: #007700">(</span><span style="color: #0000BB">$res</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

      <div class="example-contents"><p>
       以上例子将产生如下输出：
      </p></div>
      <div class="example-contents screen">
<div class="cdata"><pre>
user_id
password
</pre></div>
      </div>
     </div>
    </p>
    <p class="para">
     为向下兼容仍然可以使用 <span class="function"><strong>mysql_fieldname()</strong></span>，但反对这样做。
    </p>
   </div>


 <div class="refsect1 parameters" id="refsect1-function.mysql-field-name-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    <dt>
<code class="parameter">
result</code></dt>
<dd>
<p class="para"><span class="type"><a href="language.types.resource.html" class="type resource">resource</a></span>
型的结果集。此结果集来自对 <span class="function"><a href="function.mysql-query.html" class="function">mysql_query()</a></span>
的调用。</p></dd>

    <dt>
<code class="parameter">
field_offset</code></dt>
<dd>
<p class="para">数值型字段偏移量。
<code class="parameter">field_offset</code> 从 <em>0</em> 开始。如果
<code class="parameter">field_offset</code> 不存在，则会发出一个
<strong><code>E_WARNING</code></strong> 级别的错误</p></dd>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.mysql-field-name-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   The name of the specified field index on success 或者在失败时返回 <strong><code>FALSE</code></strong>.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.mysql-field-name-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-1905">
    <p><strong>Example #2 <span class="function"><strong>mysql_field_name()</strong></span> example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;The&nbsp;users&nbsp;table&nbsp;consists&nbsp;of&nbsp;three&nbsp;fields:<br />&nbsp;*&nbsp;&nbsp;&nbsp;user_id<br />&nbsp;*&nbsp;&nbsp;&nbsp;username<br />&nbsp;*&nbsp;&nbsp;&nbsp;password.<br />&nbsp;*/<br /></span><span style="color: #0000BB">$link&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysql_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'mysql_user'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'mysql_password'</span><span style="color: #007700">);<br />if&nbsp;(!</span><span style="color: #0000BB">$link</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">'Could&nbsp;not&nbsp;connect&nbsp;to&nbsp;MySQL&nbsp;server:&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">mysql_error</span><span style="color: #007700">());<br />}<br /></span><span style="color: #0000BB">$dbname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'mydb'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$db_selected&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysql_select_db</span><span style="color: #007700">(</span><span style="color: #0000BB">$dbname</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$link</span><span style="color: #007700">);<br />if&nbsp;(!</span><span style="color: #0000BB">$db_selected</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">"Could&nbsp;not&nbsp;set&nbsp;</span><span style="color: #0000BB">$dbname</span><span style="color: #DD0000">:&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">mysql_error</span><span style="color: #007700">());<br />}<br /></span><span style="color: #0000BB">$res&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysql_query</span><span style="color: #007700">(</span><span style="color: #DD0000">'select&nbsp;*&nbsp;from&nbsp;users'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$link</span><span style="color: #007700">);<br /><br />echo&nbsp;</span><span style="color: #0000BB">mysql_field_name</span><span style="color: #007700">(</span><span style="color: #0000BB">$res</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">mysql_field_name</span><span style="color: #007700">(</span><span style="color: #0000BB">$res</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
user_id
password
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.mysql-field-name-notes">
  <h3 class="title">注释</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">此函数返回的字段名<em class="emphasis">大小写敏感</em>。</span></p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    为了向下兼容，可以使用下列已废弃的别名：
    <span class="function"><strong>mysql_fieldname()</strong></span>
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.mysql-field-name-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.mysql-field-type.html" class="function" rel="rdfs-seeAlso">mysql_field_type()</a> - 取得结果集中指定字段的类型</span></li>
    <li class="member"><span class="function"><a href="function.mysql-field-len.html" class="function" rel="rdfs-seeAlso">mysql_field_len()</a> - 返回指定字段的长度</span></li>
   </ul>
  </p>
 </div>

  </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="105388""></a>
  <div class="note">
   <strong class="user">tiptonentserv at gmail dot com</strong>
   <a href="#105388" class="date">14-Aug-2011 02:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
simple sql to xml converter works with any sql query and returns the name of the table as the root element "row" as each row element and the names of the columns are your children of row. fully tested.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">sqlToXml</span><span class="keyword">(</span><span class="default">$host</span><span class="keyword">,</span><span class="default">$user</span><span class="keyword">,</span><span class="default">$pass</span><span class="keyword">,</span><span class="default">$database</span><span class="keyword">,</span><span class="default">$tablename</span><span class="keyword">,</span><span class="default">$query</span><span class="keyword">){
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$link&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">mysql_connect</span><span class="keyword">(</span><span class="default">$host</span><span class="keyword">, </span><span class="default">$user</span><span class="keyword">, </span><span class="default">$pass</span><span class="keyword">) or die(</span><span class="string">"Could not connect: " </span><span class="keyword">. </span><span class="default">mysql_error</span><span class="keyword">());
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$db&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">mysql_select_db</span><span class="keyword">(</span><span class="default">$database</span><span class="keyword">, </span><span class="default">$link</span><span class="keyword">) or die(</span><span class="default">mysql_error</span><span class="keyword">());
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">$result</span><span class="keyword">){ die(</span><span class="string">'Invalid query: '</span><span class="keyword">.</span><span class="default">mysql_error</span><span class="keyword">()); }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$numOfCols </span><span class="keyword">= </span><span class="default">mysql_num_fields</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$numOfRows </span><span class="keyword">= </span><span class="default">mysql_num_rows</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$info </span><span class="keyword">= </span><span class="default">mysql_fetch_assoc</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//send headers
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Content-type: text/xml'</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Pragma: public'</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Cache-control: private'</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Expires: -1'</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$xml </span><span class="keyword">= </span><span class="string">'&lt;?xml version="1.0" encoding="utf-8"?&gt;'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$xml</span><span class="keyword">.= </span><span class="string">"&lt;</span><span class="keyword">{</span><span class="default">$tablename</span><span class="keyword">}</span><span class="string">&gt;"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$numOfRows </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; do {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$xml</span><span class="keyword">.= </span><span class="string">"&lt;row&gt;"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$info </span><span class="keyword">as </span><span class="default">$column </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$xml</span><span class="keyword">.= </span><span class="string">"&lt;</span><span class="keyword">{</span><span class="default">$column</span><span class="keyword">}</span><span class="string">&gt;</span><span class="keyword">{</span><span class="default">$value</span><span class="keyword">}</span><span class="string">&lt;/</span><span class="keyword">{</span><span class="default">$column</span><span class="keyword">}</span><span class="string">&gt;"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$xml</span><span class="keyword">.= </span><span class="string">"&lt;/row&gt;"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while (</span><span class="default">$info </span><span class="keyword">= </span><span class="default">mysql_fetch_array</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">));
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$xml</span><span class="keyword">.= </span><span class="string">"&lt;/</span><span class="keyword">{</span><span class="default">$tablename</span><span class="keyword">}</span><span class="string">&gt;"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">mysql_free_result</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">);&nbsp; &nbsp; 
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$xml</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; 
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99055""></a>
  <div class="note">
   <strong class="user">bags</strong>
   <a href="#99055" class="date">25-Jul-2010 12:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When using aliases, it appears impossible to discover the name of the underlying column.<br />
select `ID` as `anAlias` from `aTable` returns 'anAlias' as the mysql_field_name(). I have tried all the mysql_field_xxx() functions and none return the real column name.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81672""></a>
  <div class="note">
   <strong class="user">anonymous at site dot com</strong>
   <a href="#81672" class="date">09-Mar-2008 03:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function is slightly stupid to be honest, why not just make an array of field names... You could consolidate the two of these functions that way and it makes it a lot easier to list them when your script is dynamic.<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">mysql_field_array</span><span class="keyword">( </span><span class="default">$query </span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$field </span><span class="keyword">= </span><span class="default">mysql_num_fields</span><span class="keyword">( </span><span class="default">$query </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for ( </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$field</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++ ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$names</span><span class="keyword">[] = </span><span class="default">mysql_field_name</span><span class="keyword">( </span><span class="default">$query</span><span class="keyword">, </span><span class="default">$i </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$names</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Examples of use<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$fields </span><span class="keyword">= </span><span class="default">mysql_field_array</span><span class="keyword">( </span><span class="default">$query </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Show name of column 3<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="default">$fields</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Show them all<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="default">implode</span><span class="keyword">( </span><span class="string">', '</span><span class="keyword">, </span><span class="default">$fields</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">] );<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; </span><span class="comment">// Count them - easy equivelant to 'mysql_num_fields'<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="default">count</span><span class="keyword">( </span><span class="default">$fields </span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79155""></a>
  <div class="note">
   <strong class="user">blackjackdevel at gmail dot com</strong>
   <a href="#79155" class="date">14-Nov-2007 01:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Strangely using an aproach like this:<br />
$res=mysql_query("SELECT * FROM `orders`",$conec) or die (mysql_error());<br />
<br />
$fields = mysql_num_fields($res);<br />
$out="";<br />
for ($i = 0; $i &lt; $fields; $i++) {<br />
&nbsp;&nbsp;&nbsp; $fname=mysql_field_name($res, $i);<br />
<br />
}<br />
<br />
&nbsp;Outputted the E_Warning:<br />
Warning: mysql_field_name() [function.mysql-field-name]: Field N is invalid for MySQL result index <br />
<br />
&nbsp;With a lot of different number at N. But expliciting all fields instead of *. Didn't outputted the error.<br />
<br />
&nbsp;It maybe a caracteristic of this mysql database(it is from a open source application) because i never saw this in my own databases. Anyway hope this help if someone face the same strange situation</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72252""></a>
  <div class="note">
   <strong class="user">matteo.cisilino[no_more]cisilino[spm]com</strong>
   <a href="#72252" class="date">09-Jan-2007 05:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
james, why make so difficult when it's very simple :\<br />
<br />
$numberfields = mysql_num_fields($res_gb);<br />
<br />
&nbsp;&nbsp; for ($i=0; $i&lt;$numberfields ; $i++ ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; $var = mysql_field_name($res_gb, $i);<br />
&nbsp;&nbsp; &nbsp; &nbsp; $row_title .= $var;<br />
&nbsp;&nbsp; }<br />
<br />
echo $row_title;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57933""></a>
  <div class="note">
   <strong class="user">janezr at jcn dot si</strong>
   <a href="#57933" class="date">19-Oct-2005 04:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is another variant of displaying all columns of a query result, but with a simplified while loop.<br />
<br />
&lt;?<br />
$query="select * from user";<br />
$result=mysql_query($query);<br />
$numfields = mysql_num_fields($result);<br />
<br />
echo "&lt;table&gt;\n&lt;tr&gt;";<br />
<br />
for ($i=0; $i &lt; $numfields; $i++) // Header<br />
{ echo '&lt;th&gt;'.mysql_field_name($result, $i).'&lt;/th&gt;'; }<br />
<br />
echo "&lt;/tr&gt;\n";<br />
<br />
while ($row = mysql_fetch_row($result)) // Data<br />
{ echo '&lt;tr&gt;&lt;td&gt;'.implode($row,'&lt;/td&gt;&lt;td&gt;')."&lt;/td&gt;&lt;/tr&gt;\n"; }<br />
<br />
echo "&lt;/table&gt;\n"<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55518""></a>
  <div class="note">
   <strong class="user">clinnenb at hotmail dot com</strong>
   <a href="#55518" class="date">05-Aug-2005 05:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The following will create a PHP array, $array, containing the MySQL query results with array indexes of the same name as field names returned by the MySQL query.<br />
<br />
while ($line = mysql_fetch_array($result, MYSQL_ASSOC)) {<br />
&nbsp;&nbsp;&nbsp; $i=0;<br />
&nbsp;&nbsp;&nbsp; foreach ($line as $col_value) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $field=mysql_field_name($result,$i);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $array[$field] = $col_value;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $i++;<br />
&nbsp;&nbsp;&nbsp; }<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="48350""></a>
  <div class="note">
   <strong class="user">jimharris at blueyonder dot co dot uk</strong>
   <a href="#48350" class="date">20-Dec-2004 03:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The code in the last comment has an obvious mistake in the for loop expression.&nbsp; The correct expression in the for-loop is $x&lt;$y rather than $x&lt;=$y...<br />
<br />
$result = mysql_query($sql,$conn) or die(mysql_error());<br />
$rowcount=mysql_num_rows($result);<br />
$y=mysql_num_fields($result);<br />
for ($x=0; $x&lt;$y; $x++) {<br />
&nbsp;&nbsp; echo = mysql_field_name($result, $x).'&lt;br&gt;';<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="48269""></a>
  <div class="note">
   <strong class="user">colin dot truran at shiftf7 dot com</strong>
   <a href="#48269" class="date">17-Dec-2004 01:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
T simply itterate through all the field names on a result set try using this.<br />
<br />
$result = mysql_query($sql,$conn) or die(mysql_error());<br />
$rowcount=mysql_num_rows($result);<br />
$y=mysql_num_fields($result);<br />
for ($x=0; $x&lt;=$y; $x++) {<br />
&nbsp;&nbsp;&nbsp; echo = mysql_field_name($result, $x).'&lt;br&gt;';<br />
}<br />
<br />
This is useful if you have a result set that joins several tables dynamicaly and you are never sure what all the fields will be when you come to display them.<br />
<br />
I suggest you place this within a loop through your result rows and include a field flag check&nbsp; around the echo to only show certain data types like this.<br />
<br />
$y=mysql_num_fields($result);<br />
while ($row=mysql_fetch_array($result)) {<br />
&nbsp; for ($x=0; $x&lt;=$y; $x++) {<br />
&nbsp;&nbsp;&nbsp; $fieldname=mysql_field_name($result,$x);<br />
&nbsp;&nbsp;&nbsp; $fieldtype=mysql_field_type($result, $x);<br />
&nbsp;&nbsp;&nbsp; if ($fieldtype=='string' &amp;&amp; $row[$fieldname]!='')&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; echo $row[$fieldname].' , ';<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; echo '&lt;br&gt;';<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="29682""></a>
  <div class="note">
   <strong class="user">aaronp123 att yahoo dott comm</strong>
   <a href="#29682" class="date">21-Feb-2003 03:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You could probably elaborate on this by sending a full sql query to this function...but I titled it simple_query() because it doesn't really allow for joins.&nbsp; Never the less, if you want to get a quick array full of a single row result set this is painless:<br />
<br />
function simple_query($table_name, $key_col, $key_val) {<br />
&nbsp;&nbsp;&nbsp; // open the db<br />
&nbsp;&nbsp;&nbsp; $db_link = my_sql_link();<br />
&nbsp;&nbsp;&nbsp; // query table using key col/val<br />
&nbsp;&nbsp;&nbsp; $db_rs = mysql_query("SELECT * FROM $table_name WHERE $key_col = $key_val", $db_link);<br />
&nbsp;&nbsp;&nbsp; $num_fields = mysql_num_fields($db_rs);<br />
&nbsp;&nbsp;&nbsp; if ($num_fields) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // first (and only) row<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $row = mysql_fetch_assoc($db_rs);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // load up array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for ($i = 0; $i &lt; $num_fields; $i++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $simple_q[mysql_field_name($db_rs, $i)] = $row[mysql_field_name($db_rs, $i)];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // and return<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $simple_q;<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // no rows<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return false;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; mysql_free_result($db_rs);<br />
}<br />
<br />
**Please note that my_sql_link() is just a function I have to open up a my sql connection.**</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="29668""></a>
  <div class="note">
   <strong class="user">jason dot chambes at phishie dot net</strong>
   <a href="#29668" class="date">21-Feb-2003 03:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
&lt;?<br />
/*<br />
&nbsp;&nbsp;&nbsp; By simply calling the searchtable() function<br />
&nbsp;&nbsp;&nbsp; with these variables it will serach the desired<br />
&nbsp;&nbsp;&nbsp; database and procude a table for each field that<br />
&nbsp;&nbsp;&nbsp; there is a match.<br />
*/<br />
<br />
function searchtable($host,$user,$pass,$database,$tablename,$userquery)<br />
{<br />
&nbsp;&nbsp;&nbsp; $link&nbsp;&nbsp; = mysql_connect($host, $user, $pass) or die("Could not connect: " . mysql_error());<br />
&nbsp;&nbsp;&nbsp; $db&nbsp; &nbsp;&nbsp; = mysql_select_db($database, $link) or die(mysql_error());<br />
&nbsp;&nbsp;&nbsp; $fields = mysql_list_fields($database, $tablename, $link);<br />
&nbsp;&nbsp;&nbsp; $cols&nbsp;&nbsp; = mysql_num_fields($fields);<br />
<br />
&nbsp;&nbsp;&nbsp; for ($i = 1; $i &lt; $cols; $i++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $allfields[] = mysql_field_name($fields, $i);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; foreach ($allfields as $myfield) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $result = mysql_query("SELECT * FROM $tablename WHERE $myfield like '%$userquery%' ");<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (mysql_num_rows($result) &gt; 0){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo "&lt;h3&gt;search &lt;i&gt;$database&lt;/i&gt; for &lt;i&gt;$userquery&lt;/i&gt;, found match(es) in &lt;i&gt;$myfield&lt;/i&gt;: &lt;/h3&gt;\n";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo "&lt;table border=1 align=\"center\"&gt;\n\t&lt;tr&gt;\n";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for ($i = 1; $i &lt; $cols; $i++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo "\t\t&lt;th";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($myfield == mysql_field_name($fields, $i)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo " bgcolor=\"orange\"&gt; ";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo "&gt;";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo mysql_field_name($fields, $i) . "&lt;/th&gt;\n";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo "\t&lt;/tr&gt;\n";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $myrow = mysql_fetch_array($result);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; do {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo "\t&lt;tr&gt;\n";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for ($i = 1; $i &lt; $cols; $i++){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo "\t\t&lt;td&gt; $myrow[$i] &amp;nbsp;&lt;/td&gt;\n";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo "\t&lt;/tr&gt;\n";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } while ($myrow = mysql_fetch_array($result));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo "&lt;/table&gt;\n";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
searchtable($host,$user,$pass,$database,$tablename,$userquery);<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="15621""></a>
  <div class="note">
   <strong class="user">matt at iwdt dot net</strong>
   <a href="#15621" class="date">24-Sep-2001 03:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
here's one way to print out a row of &lt;th&gt; tags from a table
<br />
NOTE: i didn't test this
<br />

<br />
$result = mysql_query("select * from table");
<br />

<br />
for ($i = 0; $i &lt; mysql_num_fields($result); $i++) {
<br />
&nbsp;&nbsp;&nbsp; print "&lt;th&gt;".mysql_field_name($result, $i)."&lt;/th&gt;\n";
<br />
}
<br />

<br />
post a comment if there's an error</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

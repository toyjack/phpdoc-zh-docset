<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>从数组中随机取出一个或多个单元</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.array-push.html">? array_push</a></li>
      <li style="float: right;"><a href="function.array-reduce.html">array_reduce ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.array.html">数组 函数</a></li>
    <li>从数组中随机取出一个或多个单元</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.array-rand" class="refentry">
   <div class="refnamediv">
    <h1 class="refname">array_rand</h1>
    <p class="verinfo">(PHP 4, PHP 5, PHP 7)</p><p class="refpurpose"><span class="refname">array_rand</span> &mdash; <span class="dc-title">
     从数组中随机取出一个或多个单元
    </span></p>

   </div>
 <div class="refsect1 description" id="refsect1-function.array-rand-description">
  <h3 class="title">说明</h3>
     <div class="methodsynopsis dc-description">
      <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <span class="methodname"><strong>array_rand</strong></span>
       ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$input</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$num_req</code><span class="initializer"> = 1</span></span>
     ] )</div>

    <p class="para rdfs-comment">
     从数组中取出一个或多个随机的单元，并返回随机条目的一个或多个键。
    </p>
   </div>

 <div class="refsect1 parameters" id="refsect1-function.array-rand-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">input</code></dt>

     <dd>

      <p class="para">
       输入的数组。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">num_req</code></dt>

     <dd>

      <p class="para">
       指明了你想取出多少个单元。如果指定的数目超过了数组里的数量将会产生一个  <strong><code>E_WARNING</code></strong> 级别的错误。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.array-rand-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   如果你只取出一个，<span class="function"><strong>array_rand()</strong></span>
     返回一个随机单元的键名，否则就返回一个包含随机键名的数组。这样你就可以随机从数组中取出键名和值。
  </p>
 </div>

 <div class="refsect1 changelog" id="refsect1-function.array-rand-changelog">
  <h3 class="title">更新日志</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>版本</th>
       <th>说明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.2.10</td>
       <td>
        The resulting array of keys is no longer shuffled.
       </td>
      </tr>

      <tr><td>4.2.0</td><td>随机数发生器自动进行播种。</td></tr>

     </tbody>
    
   </table>

  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.array-rand-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-5428">
    <p><strong>Example #1 <span class="function"><strong>array_rand()</strong></span> 例子</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$input&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"Neo"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"Morpheus"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"Trinity"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"Cypher"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"Tank"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$rand_keys&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_rand</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$input</span><span style="color: #007700">[</span><span style="color: #0000BB">$rand_keys</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]]&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">$input</span><span style="color: #007700">[</span><span style="color: #0000BB">$rand_keys</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]]&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.array-rand-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.shuffle.html" class="function" rel="rdfs-seeAlso">shuffle()</a> - 将数组打乱</span></li>
   </ul>
  </p>
 </div>

  </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="120180""></a>
  <div class="note">
   <strong class="user">sondermann dot m at gmail dot com</strong>
   <a href="#120180" class="date">18-Nov-2016 12:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It is not written on here but you should note that the keys that are returned are always sorted low to high. <br />
This was unexpected for me since my main reason to use this function was to get a random subset of an array (use case was to list products in a sidebar).<br />
<br />
As a result of this, even if the same products were picked randomly another time, they were always arranged in the same way.<br />
<br />
This is my solution, may help someone who also needs a fully randomized subset of an array:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_random_keys</span><span class="keyword">( </span><span class="default">$array</span><span class="keyword">, </span><span class="default">$num </span><span class="keyword">= </span><span class="default">1 </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( !</span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$array </span><span class="keyword">) ) return </span><span class="default">$array</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( (int)</span><span class="default">$num </span><span class="keyword">&lt; </span><span class="default">1 </span><span class="keyword">) return array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">$num </span><span class="keyword">== </span><span class="default">1 </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$keys</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">array_splice</span><span class="keyword">( </span><span class="default">$keys</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$num </span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120048""></a>
  <div class="note">
   <strong class="user">divinity76 at gmail dot com</strong>
   <a href="#120048" class="date">15-Oct-2016 10:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if you're looking for a cryptographically secure variant (as of speaking, php uses mt_rand), i made this. (limitations: it has no $num parameter. it requires php&gt;=7)<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">csarray_rand</span><span class="keyword">(array </span><span class="default">$arr</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$keys</span><span class="keyword">=</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$count</span><span class="keyword">=</span><span class="default">count</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$count</span><span class="keyword">===</span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Contrary to documentation, PHP 4 and 5 and 7, up to php 7.1.0alpha3 does not actually return any warning when the array is empty and $num=NULL (and further contradicting the documentation, its NULL by default, not 1, and they are treated differently, 1 gives error, NULL does not.) ... 7.1.0beta1 does throw an error however... follow their example?<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">version_compare</span><span class="keyword">(</span><span class="default">PHP_VERSION</span><span class="keyword">,</span><span class="string">'7.1.0beta1'</span><span class="keyword">,</span><span class="string">'&gt;='</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">'Warning: csarray_rand(): Array is empty'</span><span class="keyword">,</span><span class="default">E_USER_ERROR</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">NULL</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$csrand</span><span class="keyword">=</span><span class="default">random_int</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">count</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$keys</span><span class="keyword">[</span><span class="default">$csrand</span><span class="keyword">];<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117400""></a>
  <div class="note">
   <strong class="user">mike at eastghost dot com</strong>
   <a href="#117400" class="date">04-Jun-2015 06:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Verified 2015-06-03 -- this function produces VERY uneven "random" distribution.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117114""></a>
  <div class="note">
   <strong class="user">Wirek</strong>
   <a href="#117114" class="date">16-Apr-2015 08:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I agree with Sebmil (<a href="http://php.net/manual/en/function.array-rand.php#105265" rel="nofollow" target="_blank">http://php.net/manual/en/function.array-rand.php#105265</a>) that "array_rand()" produces weird and very uneven random distribution (as of my local PHP 5.3.8 and my public host's PHP 5.2.17).<br />
Unfortunately, I haven't got any access either to a server with the latest PHP version. My info is for those of you who like to check things for themselves and who don't believe all of the official statements in the docs.<br />
I've made a simple adjustment of his test code like this:<br />
<span class="default">&lt;?php <br />
$s</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;&nbsp; &nbsp; </span><span class="comment">// Start value<br />
</span><span class="default">$c</span><span class="keyword">=</span><span class="default">50</span><span class="keyword">;&nbsp; &nbsp; </span><span class="comment">// Count / End value<br />
</span><span class="default">$test</span><span class="keyword">=</span><span class="default">array_fill</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">, </span><span class="default">$c</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">$ts</span><span class="keyword">=</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">5000000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$idx</span><span class="keyword">=</span><span class="default">mt_rand</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">, </span><span class="default">$c</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// Try it with rand() - simpler but more evenly distributed than mt_rand()<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$test</span><span class="keyword">[</span><span class="default">$idx</span><span class="keyword">]++;<br />
}<br />
</span><span class="default">$te</span><span class="keyword">=</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
</span><span class="default">$te</span><span class="keyword">=(</span><span class="default">$te</span><span class="keyword">-</span><span class="default">$ts</span><span class="keyword">)*</span><span class="default">1000.0</span><span class="keyword">;&nbsp; &nbsp; </span><span class="comment">// Loop time in miliseconds<br />
<br />
</span><span class="default">asort</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">);<br />
echo </span><span class="string">"Test mt_rand() in "</span><span class="keyword">.</span><span class="default">$te</span><span class="keyword">.</span><span class="string">" ms: &lt;br/&gt;\n"</span><span class="keyword">;<br />
foreach(</span><span class="default">$test </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">) echo </span><span class="string">"</span><span class="default">$k</span><span class="string"> :\t</span><span class="default">$v</span><span class="string"> &lt;br/&gt;\n"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
And it appears to me that simple "$idx=rand(0, count($test)-1);" is much better than "$idx=array_rand($test, 1);".<br />
And what's more the simpler and a bit slower (0 ms up to total 712.357 ms at 5 mln cycles) "rand()" is better than "mt_rand()" in simple everyday use cases because it is more evenly distributed (difference least vs. most often numbers: ca. 0.20-1.28 % for "rand()" vs. ca. 1.43-1.68 % for "mt_rand()").<br />
Try it for yourself... although it depends on your software and hardware configuration, range of numbers to choose from (due to random patterns), number of cycles in the loop, and temporary (public) server load as well.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116710""></a>
  <div class="note">
   <strong class="user">compolom at gmail dot com</strong>
   <a href="#116710" class="date">14-Feb-2015 01:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
/*<br />
useful function to sort an array randomly<br />
*/<br />
function sort_array_rand($array) {<br />
&nbsp;&nbsp;&nbsp; $result = array();<br />
&nbsp;&nbsp;&nbsp; $y = sizeof($array);<br />
&nbsp;&nbsp;&nbsp; $x = 0;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; while ($x &lt; pow($y, 2)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $result[] = $array[array_rand($array)];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $x++;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return array_unique($result);<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116475""></a>
  <div class="note">
   <strong class="user">Tmy Adeson</strong>
   <a href="#116475" class="date">08-Jan-2015 11:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">// You can do this, programmatically, using the following code ... Test It Yourself (TIY)<br />
<br />
</span><span class="default">$colors</span><span class="keyword">=array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'gray'</span><span class="keyword">,</span><span class="string">'red'</span><span class="keyword">,</span><span class="string">'orange'</span><span class="keyword">,</span><span class="string">'green'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'#B2CC80'</span><span class="keyword">,</span><span class="string">'#CC6699'</span><span class="keyword">,</span><span class="string">'#B89470'</span><span class="keyword">,</span><span class="string">'#99CCFF'</span><span class="keyword">,<br />
);</span><span class="comment">//colors array<br />
<br />
</span><span class="default">$c1</span><span class="keyword">=</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$colors</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">;</span><span class="comment">//get position of the last element within the colors array<br />
<br />
//&nbsp; &nbsp; -- OR, if you prefer --<br />
//$c1=count($colors)-1;//get position of the last element within the colors array<br />
<br />
//pick a color at random from the colors array - 'Mersenne Twister based'<br />
</span><span class="default">$color</span><span class="keyword">=</span><span class="default">$colors</span><span class="keyword">[</span><span class="default">mt_rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">$c1</span><span class="keyword">)];<br />
<br />
echo&lt;&lt;&lt;HERE<br />
</span><span class="string">&lt;!DOCTYPE html&gt;<br />
&lt;html&gt;<br />
&nbsp;&lt;head&gt;<br />
&nbsp;&nbsp; &lt;meta http-equiv="refresh" content="2"&gt;<br />
&nbsp;&lt;/head&gt;<br />
&nbsp;&lt;body&gt;<br />
&nbsp;&nbsp; &lt;div style="width:400px; background-color:</span><span class="default">$color</span><span class="string">; border:1px; text-align:center;" &gt;<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$color</span><span class="string"><br />
&nbsp;&nbsp; &lt;/div&gt;<br />
&nbsp;&lt;/body&gt;<br />
&lt;/html&gt;<br />
</span><span class="keyword">HERE;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116469""></a>
  <div class="note">
   <strong class="user">yopai</strong>
   <a href="#116469" class="date">08-Jan-2015 10:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
@Sebmil :<br />
You say this function "has a strange randomness [, because] the 31st one is always by far the less occuring (by about 10% less than others)."<br />
<br />
That's right (at least under linux, PHP 5.3). And it's also visible when calling array_rand with 1 as second parameter.<br />
<br />
After checking the code, and testing it, I concluded that you have to call srand() at each iteration of your loop.<br />
<br />
To be simple, a rand() call is made &lt;n&gt; times when the &lt;n&gt;th key is returned;<br />
I suppose there is a flaw in the pseudorandom number generator (PRNG)&nbsp; that php uses; somehow the generation has a frequency of 31 (when a random number is sufficiently low, then the 31st after it will be more higher).<br />
<br />
Reinitializing the PRNG each time you enter the loop make the problem disappear (and is cheaper, in terms of time, than using shuffle).<br />
<br />
In other words, the following code :<br />
for ($i = 0; $i &lt; 10000; ++$i)<br />
{<br />
&nbsp;&nbsp;&nbsp; /* reinitialize the PRNG --&gt; */ srand();<br />
&nbsp;&nbsp;&nbsp; $tirage_tab = array_rand($valeurs, 10);<br />
&nbsp;&nbsp;&nbsp; foreach($tirage_tab as $key =&gt; $value)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $proba[$valeurs[$value]]++;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
doesn't have the strange behaviour you noticed. No PRNG is perfectly random, so taking the habit of calling srand() from time to time is still a good practice if you rely on a lot of random numbers.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115731""></a>
  <div class="note">
   <strong class="user">BenedictLemieux at gmail dot com</strong>
   <a href="#115731" class="date">14-Sep-2014 12:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Two things always bugged me with array_rand().<br />
<br />
First is its name. It does not sound clear enough whether it gives key or values.<br />
<br />
Second and more importantly is its erratic randomness, which is already well documented.<br />
<br />
That is why I came up with these two simple functions:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">random_key</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$keys</span><span class="keyword">=</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$keys</span><span class="keyword">[</span><span class="default">mt_rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">count</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">)];<br />
}&nbsp; &nbsp; <br />
function </span><span class="default">random_value</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$values</span><span class="keyword">=</span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$values</span><span class="keyword">[</span><span class="default">mt_rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">count</span><span class="keyword">(</span><span class="default">$values</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">)];<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
They both work well with any kind of arrays, do not alter the original one like shuffle, are giving more realistic random results, and their names are self describing.<br />
<br />
The main drawback is that, as opposed to array_rand, they only gives one element, but at least that is clear from their name. I do believe easy to make random_keys and random_values.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115710""></a>
  <div class="note">
   <strong class="user">marco at behnke dot biz</strong>
   <a href="#115710" class="date">12-Sep-2014 10:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Is there a difference in randomness if you use shuffle instead?<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_shuffle</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$num_of_results</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">array_chunk</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$num_of_results</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">)[</span><span class="default">0</span><span class="keyword">];<br />
}<br />
<br />
</span><span class="default">$input </span><span class="keyword">= array(</span><span class="string">"Neo"</span><span class="keyword">, </span><span class="string">"Morpheus"</span><span class="keyword">, </span><span class="string">"Trinity"</span><span class="keyword">, </span><span class="string">"Cypher"</span><span class="keyword">, </span><span class="string">"Tank"</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_shuffle</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">));<br />
<br />
</span><span class="comment">/*<br />
array(2) {<br />
&nbsp; [0]=&gt;<br />
&nbsp; string(3) "Neo"<br />
&nbsp; [1]=&gt;<br />
&nbsp; string(8) "Morpheus"<br />
}<br />
*/<br />
</span><span class="default">?&gt;<br />
</span><br />
And yes, I know that my example returns a portion of the array and not just the key numbers</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114972""></a>
  <div class="note">
   <strong class="user">john at brahy dot com</strong>
   <a href="#114972" class="date">08-May-2014 08:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if you want random elements from an array, this worked pretty well for me.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//using shuffle randomizes the order of elements<br />
<br />
</span><span class="keyword">function </span><span class="default">get_random_elements</span><span class="keyword">( </span><span class="default">$array</span><span class="keyword">,</span><span class="default">$limit </span><span class="keyword">= </span><span class="default">0 </span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; if ( </span><span class="default">$limit </span><span class="keyword">&gt; </span><span class="default">0 </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$limit</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112969""></a>
  <div class="note">
   <strong class="user">nospamplease at mail dot com</strong>
   <a href="#112969" class="date">13-Aug-2013 11:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Random choice with a closure.<br />
<br />
$randomChoice&nbsp; = function($array) {return $array[array_rand($array)];};<br />
<br />
$names = ['Dexter', 'Esther', 'David', 'Richard', 'Rachel', 'Belinda'];<br />
<br />
echo $randomChoice($names);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112227""></a>
  <div class="note">
   <strong class="user">Jordan Doyle</strong>
   <a href="#112227" class="date">19-May-2013 06:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note: array_rand uses the libc generator, which is slower and less-random than Mersenne Twister.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $a </span><span class="keyword">= [</span><span class="string">'<a href="http://php.net/" rel="nofollow" target="_blank">http://php.net/</a>'</span><span class="keyword">, </span><span class="string">'<a href="http://google.com/" rel="nofollow" target="_blank">http://google.com/</a>'</span><span class="keyword">, </span><span class="string">'<a href="http://bbc.co.uk/" rel="nofollow" target="_blank">http://bbc.co.uk/</a>'</span><span class="keyword">];<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$website </span><span class="keyword">= </span><span class="default">$a</span><span class="keyword">[</span><span class="default">mt_rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">count</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">)];<br />
</span><span class="default">?&gt;<br />
</span><br />
This is a better alternative.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109393""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#109393" class="date">13-Jul-2012 11:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It doesn't explicitly say it in the documentation, but PHP won't pick the same key twice in one call.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107813""></a>
  <div class="note">
   <strong class="user">qeremy</strong>
   <a href="#107813" class="date">07-Mar-2012 10:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An example for getting random value from arrays;<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_random</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$num </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$r </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$num</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r</span><span class="keyword">[] = </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$num </span><span class="keyword">== </span><span class="default">1 </span><span class="keyword">? </span><span class="default">$r</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] : </span><span class="default">$r</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$a </span><span class="keyword">= array(</span><span class="string">"apple"</span><span class="keyword">, </span><span class="string">"banana"</span><span class="keyword">, </span><span class="string">"cherry"</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_random</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">));<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_random</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
cherry<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; banana<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; apple<br />
)<br />
<br />
And example for getting random value from assoc arrays;<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_random_assoc</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$num </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$r </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$num</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r</span><span class="keyword">[</span><span class="default">$keys</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]] = </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$keys</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]];<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$r</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$a </span><span class="keyword">= array(</span><span class="string">"a" </span><span class="keyword">=&gt; </span><span class="string">"apple"</span><span class="keyword">, </span><span class="string">"b" </span><span class="keyword">=&gt; </span><span class="string">"banana"</span><span class="keyword">, </span><span class="string">"c" </span><span class="keyword">=&gt; </span><span class="string">"cherry"</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_random_assoc</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">));<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_random_assoc</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [c] =&gt; cherry<br />
)<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [a] =&gt; apple<br />
&nbsp;&nbsp;&nbsp; [b] =&gt; banana<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105265""></a>
  <div class="note">
   <strong class="user">Sebmil</strong>
   <a href="#105265" class="date">05-Aug-2011 09:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Looks like this function has a strange randomness.<br />
<br />
If you take any number of elements in an array which has 40..100 elements, the 31st one is always by far the less occuring (by about 10% less than others).<br />
<br />
I tried this piece of code at home (PHP Version 5.3.2-1ubuntu4.9) and on my server (PHP Version 5.2.17), unfortunately i haven't any server with the last version here :<br />
<br />
<span class="default">&lt;?php<br />
$valeurs </span><span class="keyword">= </span><span class="default">range</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">, </span><span class="default">40</span><span class="keyword">);<br />
</span><span class="default">$proba </span><span class="keyword">= </span><span class="default">array_fill</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">, </span><span class="default">40</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">10000</span><span class="keyword">; ++</span><span class="default">$i</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$tirage_tab </span><span class="keyword">= </span><span class="default">array_rand</span><span class="keyword">(</span><span class="default">$valeurs</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$tirage_tab </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$proba</span><span class="keyword">[</span><span class="default">$valeurs</span><span class="keyword">[</span><span class="default">$value</span><span class="keyword">]]++;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">asort</span><span class="keyword">(</span><span class="default">$proba</span><span class="keyword">);<br />
echo </span><span class="string">"Proba : &lt;br/&gt;\n"</span><span class="keyword">;<br />
foreach(</span><span class="default">$proba </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"</span><span class="default">$key</span><span class="string"> : </span><span class="default">$value</span><span class="string">&lt;br/&gt;\n"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
In every try, the number of occurrences change a bit but the 31 is always far less (around 2200) than the others (2400-2600). I tried with 50 and 100 elements, no change. I tried with more or less elements to pick (second parameter to array_rand), same result. If you pick only one element it's even worse : 31 has half the result of the others.<br />
<br />
For this particular case, i recommend shuffling the array and taking the nth first elements, in this test it's 60% faster and the statistics are ok.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93834""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#93834" class="date">02-Oct-2009 10:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If the array elements are unique, and are all integers or strings, here is a simple way to pick $n random *values* (not keys) from an array $array:
<br />

<br />
<span class="default">&lt;?php array_rand</span><span class="keyword">(</span><span class="default">array_flip</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">), </span><span class="default">$n</span><span class="keyword">); </span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87882""></a>
  <div class="note">
   <strong class="user">info at pavliga dot com</strong>
   <a href="#87882" class="date">28-Dec-2008 10:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want get unique range:<br />
<br />
<span class="default">&lt;?php<br />
$n </span><span class="keyword">= </span><span class="default">15</span><span class="keyword">;<br />
<br />
</span><span class="default">$data </span><span class="keyword">= </span><span class="default">range</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">, </span><span class="default">20</span><span class="keyword">);<br />
</span><span class="default">$rand </span><span class="keyword">= </span><span class="default">array_rand</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">,</span><span class="default">$n</span><span class="keyword">);<br />
<br />
for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$n</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br />
{<br />
echo </span><span class="default">$rand</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">].</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87657""></a>
  <div class="note">
   <strong class="user">admin at jeremyzaretski dot com</strong>
   <a href="#87657" class="date">15-Dec-2008 05:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php
<br />
</span><span class="comment">// a foreach friendly version of array_rand
<br />
</span><span class="keyword">function </span><span class="default">Select_Random_Indices</span><span class="keyword">(</span><span class="default">$source_array</span><span class="keyword">, </span><span class="default">$count </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$count </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$count </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array(</span><span class="default">array_rand</span><span class="keyword">(</span><span class="default">$source_array</span><span class="keyword">, </span><span class="default">$count</span><span class="keyword">));
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">array_rand</span><span class="keyword">(</span><span class="default">$source_array</span><span class="keyword">, </span><span class="default">$count</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; else
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array();
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;
<br />
}
<br />

<br />
</span><span class="comment">// using the above function to pick random values instead of entries
<br />
</span><span class="keyword">function </span><span class="default">Select_Random_Entries</span><span class="keyword">(</span><span class="default">$source_array</span><span class="keyword">, </span><span class="default">$count </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array();
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$index_array </span><span class="keyword">= </span><span class="default">Select_Random_Indices</span><span class="keyword">(</span><span class="default">$source_array</span><span class="keyword">, </span><span class="default">$count</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$index_array </span><span class="keyword">as </span><span class="default">$index</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">] = </span><span class="default">$source_array</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">];
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77594""></a>
  <div class="note">
   <strong class="user">herodesh [-at_] gmail [-dot-] com</strong>
   <a href="#77594" class="date">05-Sep-2007 12:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
this is to generate a random selection from an array with array_rand preety nice, can be used to generate random passwords or anything:<br />
<br />
$my_array = array("a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "0", "1", "2", "3", "4", "5");<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for ($i=0; $i&lt;=10; $i++)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $random = array_rand($my_array);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //this generates the random number from the array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $parola .= $my_array[$random];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //here we will display the exact charachter from the array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo $parola; // printing result</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71519""></a>
  <div class="note">
   <strong class="user">Frederick Lemasson aka djassper at gmail</strong>
   <a href="#71519" class="date">04-Dec-2006 09:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To select a random Value (not a Key) from a Multi-Dimentionnal array I made a recursive function : array_multi_rand()<br />
<br />
the following exemple randomly selects an url from a multidimentionnal array :<br />
<br />
&lt;?<br />
<br />
$Expos['Google']['Science']='news.google.fr/news?topic=t';<br />
$Expos['Google']['Economie']='news.google.fr/news?topic=b';<br />
$Expos['Google']['Sante']='news.google.fr/news?topic=m';<br />
$Expos['Yahoo']='fr.news.yahoo.com';<br />
$Expos['Events']['LogicielLibre']='agendadulibre.org';<br />
$Expos['MyBlog']='www.kik-it.com';<br />
<br />
function array_multi_rand($Zoo){<br />
&nbsp;&nbsp;&nbsp; $Boo=array_rand($Zoo);<br />
&nbsp;&nbsp;&nbsp; if(is_array($Zoo[$Boo])){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return array_multi_rand($Zoo[$Boo]);<br />
&nbsp;&nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $Zoo[$Boo];<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
echo(array_multi_rand($Expos));<br />
<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69382""></a>
  <div class="note">
   <strong class="user">JS</strong>
   <a href="#69382" class="date">04-Sep-2006 12:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wanted to write something that picks a random entry from a 1column-MySQL database - simply Post Of The Moment (potm). I know there surly are many better ways to do it, but I`m rather new to PHP :)&nbsp; Anyway, it`s simple and no-problem working code. <br />
Of course I assume your DB exists and you always have something in it.<br />
<br />
@$link = MySQL_Connect("localhost", "username", "password"); //connect to mysql<br />
mySQL_Select_DB("database"); //..to DB<br />
@$potms = MySQL_Query("SELECT * FROM potm"); //now we get all from our table and store it<br />
MySQL_Close($link); //there`s no need for connection, so we should close it<br />
<br />
$potm_array = ''; //sets variables to "zero" values<br />
$i = 0;<br />
while ($entry = MySQL_Fetch_Array($potms)) //now we go through our DB<br />
&nbsp;&nbsp; &nbsp; &nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; $potm_array[$i] = $entry; //our temporary array from which we will random pick a field key<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; $i++; //now we increment our field key<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
<br />
$potm_id = array_rand($potw_array); //picks a random key from array<br />
$potm = $potm_array[$potm_id]['name_of_the_field']; //now we have stored our Post Of The Moment in $potm<br />
<br />
..hope this helps</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="67951""></a>
  <div class="note">
   <strong class="user">dragonfly at dragonflyeye dot net</strong>
   <a href="#67951" class="date">07-Jul-2006 04:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Well, this is interesting.&nbsp;&nbsp; I don't see anyone else commenting on this, so just in case you were planning to use this function like I was, be prepared: array_rand does not handle multidimensional arrays.&nbsp; It just ends up returning a list of the X-axis values without the Y-axis arrays.&nbsp; Bummer.&nbsp; I'm going to have to find another way to do what I wanted.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="63238""></a>
  <div class="note">
   <strong class="user">trukin at gmail dot com</strong>
   <a href="#63238" class="date">16-Mar-2006 10:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Modify of last note:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if (!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'array_rand'</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">array_rand</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$lim</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">mt_srand</span><span class="keyword">((double) </span><span class="default">microtime</span><span class="keyword">() * </span><span class="default">1000000</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$a</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$a</span><span class="keyword">&lt;=</span><span class="default">$lim</span><span class="keyword">; </span><span class="default">$a</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$num</span><span class="keyword">[] = </span><span class="default">mt_srand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return @</span><span class="default">$num</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
mt_rand generates a better random number, and with the limit.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60281""></a>
  <div class="note">
   <strong class="user">Will-ster</strong>
   <a href="#60281" class="date">02-Jan-2006 01:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is something I have been playing with for quite awhile. I'm very new to php, but i finally got it to work. it's a function that will take and array[$arrquo] and find a particular keyword[$find] in the different elements of the array then take those elements that posess that keyword and display them at random <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">popbyword</span><span class="keyword">(</span><span class="default">$arrquo</span><span class="keyword">,</span><span class="default">$find</span><span class="keyword">)<br />
{<br />
</span><span class="default">$newarr </span><span class="keyword">= array(</span><span class="string">''</span><span class="keyword">);<br />
&nbsp;foreach(</span><span class="default">$arrquo </span><span class="keyword">as </span><span class="default">$line</span><span class="keyword">)<br />
&nbsp;{<br />
&nbsp; if( </span><span class="default">strstr</span><span class="keyword">( </span><span class="default">$line</span><span class="keyword">, </span><span class="default">$find </span><span class="keyword">) )<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$newarr</span><span class="keyword">, </span><span class="default">$line</span><span class="keyword">);<br />
&nbsp;<br />
&nbsp; }<br />
&nbsp;}&nbsp; &nbsp; <br />
</span><span class="default">srand</span><span class="keyword">((double)</span><span class="default">microtime</span><span class="keyword">()*</span><span class="default">1000000</span><span class="keyword">);<br />
</span><span class="default">$rquote </span><span class="keyword">= </span><span class="default">array_rand</span><span class="keyword">(</span><span class="default">$newarr</span><span class="keyword">);<br />
echo </span><span class="default">$newarr</span><span class="keyword">[</span><span class="default">$rquote</span><span class="keyword">];<br />
}<br />
<br />
</span><span class="default">popbyword</span><span class="keyword">(</span><span class="default">$images</span><span class="keyword">, </span><span class="string">'Albert'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
In my case I had this huge array of quotes with 90 some elements. I was able to find certain keywords in those elements then ONLY display the elements that had those keywords. NEAT! Maybe only because I'm new.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56291""></a>
  <div class="note">
   <strong class="user">bjcffnet at gmail dot com</strong>
   <a href="#56291" class="date">30-Aug-2005 01:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As wazaawazaa600 at msn dot com pointed out, a multi-dimensional array doesn't work with this function. So, I hope I can help someone with this :)<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* Returns a number of random elements from an array.<br />
&nbsp;*<br />
&nbsp;* It returns the number (specified in $limit) of elements from<br />
&nbsp;* $array. The elements are returned in a random order, exactly<br />
&nbsp;* as it was passed to the function. (So, it's safe for multi-<br />
&nbsp;* dimensional arrays, aswell as array's where you need to keep<br />
&nbsp;* the keys)<br />
&nbsp;*<br />
&nbsp;* @author Brendan Caffrey&nbsp; &lt;bjcffnet at gmail dot com&gt;<br />
&nbsp;* @param&nbsp; array&nbsp; $array&nbsp; The array to return the elements from<br />
&nbsp;* @param&nbsp; int&nbsp; &nbsp; $limit&nbsp; The number of elements to return from<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; the array<br />
&nbsp;* @return array&nbsp; The randomized array<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">array_rand_keys</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$limit </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">= @</span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Sanity checks<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$limit </span><span class="keyword">== </span><span class="default">0 </span><span class="keyword">|| !</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) || </span><span class="default">$limit </span><span class="keyword">&gt; </span><span class="default">$count</span><span class="keyword">) return array();<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$count </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">) return </span><span class="default">$array</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Loop through and get the random numbers<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">for (</span><span class="default">$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$x </span><span class="keyword">&lt; </span><span class="default">$limit</span><span class="keyword">; </span><span class="default">$x</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rand </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">$count</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Can't have double randoms, right?<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">while (isset(</span><span class="default">$rands</span><span class="keyword">[</span><span class="default">$rand</span><span class="keyword">])) </span><span class="default">$rand </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">$count</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rands</span><span class="keyword">[</span><span class="default">$rand</span><span class="keyword">] = </span><span class="default">$rand</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$curr </span><span class="keyword">= </span><span class="default">current</span><span class="keyword">(</span><span class="default">$rands</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// I think it's better to return the elements in a random<br />
&nbsp;&nbsp;&nbsp; // order, which is why I'm not just using a foreach loop to<br />
&nbsp;&nbsp;&nbsp; // loop through the random numbers<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">while (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$return</span><span class="keyword">) != </span><span class="default">$limit</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$cur </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$cur </span><span class="keyword">== </span><span class="default">$curr</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Next...<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$curr </span><span class="keyword">= </span><span class="default">next</span><span class="keyword">(</span><span class="default">$rands</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; continue </span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$cur</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$return</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53901""></a>
  <div class="note">
   <strong class="user">alexkropivko at(dog) yandex dot ru</strong>
   <a href="#53901" class="date">16-Jun-2005 03:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There was a mistake at "Paul Hodel (paul at ue dot com dot br) 17-Apr-2003 04:40":<br />
String <br />
echo $new_input = $input[$v];<br />
<br />
have to be:<br />
echo $new_input[] = $input[$v];</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50891""></a>
  <div class="note">
   <strong class="user">maxnamara at yahoo dot com</strong>
   <a href="#50891" class="date">13-Mar-2005 12:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php <br />
$input </span><span class="keyword">= array(</span><span class="string">"Neo"</span><span class="keyword">, </span><span class="string">"Morpheus"</span><span class="keyword">, </span><span class="string">"Trinity"</span><span class="keyword">, </span><span class="string">"Cypher"</span><span class="keyword">, </span><span class="string">"Tank"</span><span class="keyword">); <br />
<br />
function </span><span class="default">my_array_rand</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">=</span><span class="default">2</span><span class="keyword">){<br />
</span><span class="default">srand</span><span class="keyword">((float) </span><span class="default">microtime</span><span class="keyword">() * </span><span class="default">10000000</span><span class="keyword">); <br />
<br />
</span><span class="default">$rand_keys </span><span class="keyword">= </span><span class="default">array_rand</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">); <br />
<br />
</span><span class="comment">/*<br />
print $input[$rand_keys[0]] . "\n"; <br />
print $input[$rand_keys[1]] . "\n"; <br />
*/<br />
<br />
</span><span class="default">$res </span><span class="keyword">= array();<br />
<br />
if(</span><span class="default">$i </span><span class="keyword">&gt; </span><span class="default">1</span><span class="keyword">){<br />
<br />
for(</span><span class="default">$a</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$a</span><span class="keyword">&lt;</span><span class="default">$i</span><span class="keyword">;</span><span class="default">$a</span><span class="keyword">++){<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$res</span><span class="keyword">[] = </span><span class="default">$input</span><span class="keyword">[</span><span class="default">$rand_keys</span><span class="keyword">[</span><span class="default">$a</span><span class="keyword">]];<br />
&nbsp;&nbsp;&nbsp; <br />
}<br />
<br />
}<br />
else{<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$res</span><span class="keyword">[] = </span><span class="default">$input</span><span class="keyword">[</span><span class="default">$rand_keys</span><span class="keyword">];&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; <br />
}<br />
<br />
return </span><span class="default">$res</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$a </span><span class="keyword">= </span><span class="default">my_array_rand</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">);<br />
echo </span><span class="string">"&lt;pre&gt;"</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />
echo </span><span class="string">"&lt;/pre&gt;"</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="45176""></a>
  <div class="note">
   <strong class="user">yhoko at yhoko dot com</strong>
   <a href="#45176" class="date">28-Aug-2004 03:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
According to office at at universalmetropolis dot com I have to say that the example is wrong.<br />
<br />
<span class="default">&lt;?php <br />
</span><span class="comment">// retrieve one of the options at random from the array <br />
</span><span class="default">$teamcolours </span><span class="keyword">= </span><span class="default">$teamcolours</span><span class="keyword">[</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">count</span><span class="keyword">(</span><span class="default">$teamcolours</span><span class="keyword">))]; <br />
</span><span class="default">?&gt;</span> <br />
<br />
The count() function will return the number of items in the array, that's the last index + 1. So if there's 2 items in the array, count() will return 2 but the indices are 0 and 1. Now since rand(x,y) randomizes between x and y inclusively the index from the above example may be out of bounds. Thus you have to subtract 1 from the count:<br />
<br />
<span class="default">&lt;?php <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Get random item<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$teamcolours </span><span class="keyword">= </span><span class="default">$teamcolours</span><span class="keyword">[</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">count</span><span class="keyword">(</span><span class="default">$teamcolours</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">)]; <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37078""></a>
  <div class="note">
   <strong class="user">jpinedo</strong>
   <a href="#37078" class="date">02-Nov-2003 10:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An array of arrays example:
<br />

<br />
<span class="default">&lt;?php
<br />
$banners</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'imagen'</span><span class="keyword">]=</span><span class="string">"imagen0.gif"</span><span class="keyword">;
<br />
</span><span class="default">$banners</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'url'</span><span class="keyword">]=</span><span class="string">"www.nosenada.tal"</span><span class="keyword">;
<br />

<br />
</span><span class="default">$banners</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'imagen'</span><span class="keyword">]=</span><span class="string">"imagen1.gif"</span><span class="keyword">;
<br />
</span><span class="default">$banners</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'url'</span><span class="keyword">]=</span><span class="string">"www.nose.tal"</span><span class="keyword">;
<br />

<br />
</span><span class="default">$banners</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="string">'imagen'</span><span class="keyword">]=</span><span class="string">"imagen2.gif"</span><span class="keyword">;
<br />
</span><span class="default">$banners</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="string">'url'</span><span class="keyword">]=</span><span class="string">"pagina.html"</span><span class="keyword">;
<br />

<br />
</span><span class="default">$banners</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">][</span><span class="string">'imagen'</span><span class="keyword">]=</span><span class="string">"imagen3.jpg"</span><span class="keyword">;
<br />
</span><span class="default">$banners</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">][</span><span class="string">'url'</span><span class="keyword">]=</span><span class="string">"../pagina.php"</span><span class="keyword">;
<br />

<br />
</span><span class="default">$id_banner </span><span class="keyword">= </span><span class="default">array_rand</span><span class="keyword">(</span><span class="default">$banners</span><span class="keyword">);
<br />

<br />
echo&nbsp; </span><span class="string">"Archivo:--"</span><span class="keyword">.</span><span class="default">$banners</span><span class="keyword">[</span><span class="default">$id_banner</span><span class="keyword">][</span><span class="string">'imagen'</span><span class="keyword">]. </span><span class="string">"&lt;br /&gt;\n"</span><span class="keyword">;
<br />
echo&nbsp; </span><span class="string">"URL:-----"</span><span class="keyword">.</span><span class="default">$banners</span><span class="keyword">[</span><span class="default">$id_banner</span><span class="keyword">][</span><span class="string">'url'</span><span class="keyword">]. </span><span class="string">"&lt;br /&gt;\n"</span><span class="keyword">;
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="33363""></a>
  <div class="note">
   <strong class="user">asarnoNOSPAM@interbaun DOT com</strong>
   <a href="#33363" class="date">24-Jun-2003 08:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It is correct that using array_rand() with num_req=1 will return an integer and not an array, but why get so complicated with getting just the one value.&nbsp; The K.I.S.S. method would suggest to do it this way:<br />
<br />
&lt;?<br />
srand((double)microtime() * 10000000);<br />
$originalArray = array("red", "blue", "green", "brown", <br />
"cyan", "magenta", "purle", "cheezy");<br />
$pickOne = array_rand($originalArray, 1);<br />
$aRandomSelection = $originalArray[$pickOne ];<br />
echo "$aRandomSelection was the random selection made";<br />
?&gt;<br />
<br />
You only need to use the foreach if the num_req &gt;=2. In those cases the array_rand() function will return an array of random elements which are a subset of the original array.&nbsp; When num_req = 1, the array_rand() function returns an integer that signifies a randomly picked key of the original array.&nbsp; Hope this clarifies things ... it works for me.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="31335""></a>
  <div class="note">
   <strong class="user">Paul Hodel (paul at ue dot com dot br)</strong>
   <a href="#31335" class="date">17-Apr-2003 10:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you trying to get a randon array just use that... it's easier! And you have no repeats...<br />
<br />
&lt;?<br />
<br />
srand ((float) microtime() * 10000000);<br />
<br />
$input = array ("Neo", "Morpheus", "Trinity", "Cypher", "Tank");<br />
<br />
$keys = array_rand ($input, sizeof($input));<br />
<br />
while (list($k, $v) = each($keys))<br />
{<br />
&nbsp;&nbsp;&nbsp; echo $new_input = $input[$v];<br />
}<br />
<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="31203""></a>
  <div class="note">
   <strong class="user">scandar at home dot se</strong>
   <a href="#31203" class="date">13-Apr-2003 06:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that the int num_req parameter is the required number of element to randomly select. So if your array has 3 element and num_req=4 then array_rand() will not return anything since it is impossible to select 4 random elements out of an array that only contains 3 elements. Many people think that they will get 3 elements returned but that is of course not the case.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="27317""></a>
  <div class="note">
   <strong class="user">mickoz[at]parodius[dot]com</strong>
   <a href="#27317" class="date">02-Dec-2002 05:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those of you thinking that it does not work for num_req = 1, it is because it return a variable and not an array.&nbsp; This mainly cause some problem with people using foreach.
<br />

<br />
The correct way to handle this is explained by that example:
<br />

<br />
<span class="default">&lt;?php
<br />
$some_array </span><span class="keyword">= array(</span><span class="string">"blah"</span><span class="keyword">,</span><span class="string">"bleh"</span><span class="keyword">,</span><span class="string">"foo"</span><span class="keyword">,</span><span class="string">"lele"</span><span class="keyword">);
<br />

<br />
</span><span class="default">$nb_value </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;
<br />

<br />
</span><span class="default">srand </span><span class="keyword">((float) </span><span class="default">microtime</span><span class="keyword">() * </span><span class="default">10000000</span><span class="keyword">);
<br />
</span><span class="default">$rand_keys </span><span class="keyword">= </span><span class="default">array_rand</span><span class="keyword">(</span><span class="default">$some_array</span><span class="keyword">, </span><span class="default">$nb_value</span><span class="keyword">);
<br />

<br />
if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$rand_keys</span><span class="keyword">))
<br />
{
<br />
&nbsp; </span><span class="default">$rand_keys </span><span class="keyword">= array(</span><span class="default">$rand_keys</span><span class="keyword">);
<br />
}
<br />

<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$rand_keys</span><span class="keyword">); </span><span class="comment">// verify here the array of keys
<br />
</span><span class="keyword">echo </span><span class="string">"\n&lt;BR&gt;"</span><span class="keyword">;
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
// You can then correctly use the foreach, as it require an array to work
<br />
// If you use foreach with one element, it won't work.
<br />

<br />
<span class="default">&lt;?php
<br />
$random_array </span><span class="keyword">= array();
<br />

<br />
foreach(</span><span class="default">$rand_keys </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">)
<br />
{
<br />
&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$random_array</span><span class="keyword">, </span><span class="default">$some_array</span><span class="keyword">[</span><span class="default">$value</span><span class="keyword">]);
<br />
}
<br />

<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$random_array</span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="22360""></a>
  <div class="note">
   <strong class="user">josh at 3io dot com</strong>
   <a href="#22360" class="date">15-Jun-2002 12:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I modified fake_array_rand to always only return 1 element, and did some benchmarks against calling array_rand with the second parameter as 1.&nbsp; I ran 100 samples for each function for each number of elements and took the average result.&nbsp; While the internal array_rand is faster for a small number of elements, it scales very poorly.
<br />

<br />
1 elements: 2.0619630813599E-05 sec. for array_rand,8.4352493286133E-05 sec. for fake_array_rand
<br />
10 elements: 2.1675825119019E-05 sec. for array_rand,8.427619934082E-05 sec. for fake_array_rand
<br />
100 elements: 2.9319524765015E-05 sec. for array_rand,8.4599256515503E-05 sec. for fake_array_rand
<br />
1000 elements: 0.0001157283782959 sec. for array_rand,8.5572004318237E-05 sec. for fake_array_rand
<br />
10000 elements: 0.0016669762134552 sec. for array_rand,8.5201263427734E-05 sec. for fake_array_rand
<br />
100000 elements: 0.015599734783173 sec. for array_rand,8.5580348968506E-05 sec. for fake_array_rand
<br />
1000000 elements: 0.18011983394623 sec. for array_rand,8.6690187454224E-05 sec. for fake_array_rand
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">fake_array_rand </span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) 
<br />
{ 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">count </span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># Help keep the number generator random :) 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$randval </span><span class="keyword">and </span><span class="default">usleep </span><span class="keyword">(</span><span class="string">"0.</span><span class="default">$randval</span><span class="string">"</span><span class="keyword">); 
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># Seed the random number generator 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; # Generate a random number 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">srand </span><span class="keyword">((double) </span><span class="default">microtime</span><span class="keyword">() * </span><span class="default">10000000</span><span class="keyword">); 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$randval </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(); 
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># Use the random value to 'pick' an entry from the array 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; # Count the number of times that the entry is picked
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">++</span><span class="default">$index</span><span class="keyword">[</span><span class="default">$randval </span><span class="keyword">% </span><span class="default">$count</span><span class="keyword">];
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$randval </span><span class="keyword">% </span><span class="default">$count</span><span class="keyword">];
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="13909""></a>
  <div class="note">
   <strong class="user">uvm at sun dot he dot net</strong>
   <a href="#13909" class="date">10-Jul-2001 03:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you're just trying to draw a random subset of n elements from an array, it seems more effecient to do something like this:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">draw_rand_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">,</span><span class="default">$draws</span><span class="keyword">)
<br />
{ 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$lastIndex </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$returnArr </span><span class="keyword">= array();
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while(</span><span class="default">$draws </span><span class="keyword">&gt; </span><span class="default">1</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rndIndex </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">$lastIndex</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$returnArr</span><span class="keyword">,</span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">,</span><span class="default">$rndIndex</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">));
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$draws</span><span class="keyword">--;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$lastIndex</span><span class="keyword">--;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$returnArr</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
No messing with indexes when you're done... you just have an array with the elements you're looking for in it.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

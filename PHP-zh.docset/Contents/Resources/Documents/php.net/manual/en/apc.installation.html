<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>安装</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="apc.requirements.html">? 需求</a></li>
      <li style="float: right;"><a href="apc.configuration.html">运行时配置 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="apc.setup.html">安装／配置</a></li>
    <li>安装</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="apc.installation" class="section">
  <h2 class="title">安装</h2>
  <p class="para">
   此 <a href="http://pecl.php.net/" class="link external" title="Link : http://pecl.php.net/">&raquo;&nbsp;PECL</a> 扩展未与
PHP 捆绑。
  </p>
  <p class="para">
   安装此 PECL 扩展相关的信息可在手册中标题为
<a href="install.pecl.html" class="link">PECL
扩展的安装</a>章节中找到。更多信息如新的发行版本、下载、源文件、
维护人员信息及变更日志等，都在此处：
   <a href="http://pecl.php.net/package/apc" class="link external" title="Link : http://pecl.php.net/package/apc">&raquo;&nbsp;http://pecl.php.net/package/apc</a>.
  </p>
  <p class="para">
   <acronym title="PHP Extension and Application Repository">PECL</acronym> 扩展的
<acronym title="Dynamic Link Library">DLL</acronym> 当前不可用。参见
<a href="install.windows.building.html" class="link">在 Windows 上构建</a>章节。
  </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <span class="simpara">
    在Windows上，APC需要一个临时目录，并且Web服务器对这个目录可写，APC会检测TMP,TEMP,USERPROFILE这些Windows的环境变量，如果这些都没有，会检查系统文件夹下的WINDOWS目录。
   </span>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <span class="simpara">
    更深层次，更高级别的技术实现细节,请参阅
    <a href="http://git.php.net/?p=pecl/caching/apc.git;a=blob;f=TECHNOTES.txt" class="link external" title="Link : http://git.php.net/?p=pecl/caching/apc.git;a=blob;f=TECHNOTES.txt">&raquo;&nbsp;
     开发人员提供的 TECHNOTES 文件
    </a>.
   </span>
  </p></blockquote>
 </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="119116""></a>
  <div class="note">
   <strong class="user">JoeB at modernizedmedia dot com</strong>
   <a href="#119116" class="date">05-Apr-2016 03:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
After spending a few hours investigating this I have come to learn that as of php 5.5, there is an opcode cache built into php that you should use instead of wrestling with trying to install this one.&nbsp; Especially on WAMP.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113935""></a>
  <div class="note">
   <strong class="user">nhhecker+php_net at gmail dot com</strong>
   <a href="#113935" class="date">19-Dec-2013 12:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The below steps should work on Red Hat Enterprise Linux (RHEL) 6.x / CentOS 6.x. By way of introduction I had a bit of trouble installing php-devel but finally found an RPM on pbone.net that wold work with my version of php...<br />
&nbsp; # yum install gcc automake php httpd httpd-devel<br />
&nbsp; # yum list installed | grep php<br />
&nbsp; # rpm -Uvh <a href="ftp://ftp.sunet.se/pub/Linux/distributions/scientific/6.3/x86_64/updates/security/php-devel-5.3.3-27.el6_5.x86_64.rpm" rel="nofollow" target="_blank">ftp://ftp.sunet.se/pub/Linux/distributions/scientific/6.3/x86_64/updates/security/php-devel-5.3.3-27.el6_5.x86_64.rpm</a><br />
<br />
With that out ofthe way, I could continue the installation of APC...<br />
&nbsp; # yum install php-pear<br />
&nbsp; # pecl install apc<br />
&nbsp; # echo "extension=apc.so" &gt;&gt; /etc/php.ini<br />
&nbsp; # echo "apc.enabled=1" &gt;&gt; /etc/php.ini<br />
&nbsp; # cp /usr/share/pear/apc.php /var/www/html/apc.php (this step is optional)<br />
&nbsp; # /etc/init.d/httpd restart<br />
<br />
Finally, test opening the apc.php file in a Web browser if you opted to copy the file. If all goes well, you may want to delete the apc.php file when you're done.<br />
<br />
-nick</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110935""></a>
  <div class="note">
   <strong class="user">adonis at aynacorp dot com</strong>
   <a href="#110935" class="date">27-Dec-2012 12:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Installation Steps For on Centos 6.3 / PHP 5.3.3<br />
<br />
#use pecl to install it (you will be prompted during installation, I used the default values)<br />
pecl install apc<br />
<br />
# you should see something like this<br />
downloading APC-3.1.9.tgz ...<br />
Starting to download APC-3.1.9.tgz (155,540 bytes)<br />
54 source files, building<br />
running: phpize<br />
Configuring for:<br />
PHP Api Version:&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 20090626<br />
Zend Module Api No:&nbsp; &nbsp; &nbsp; 20090626<br />
...<br />
...<br />
...<br />
Build process completed successfully<br />
Installing '/usr/lib64/php/modules/apc.so'<br />
Installing '/usr/include/php/ext/apc/apc_serializer.h'<br />
install ok: channel://pecl.php.net/APC-3.1.9<br />
<br />
#Great now that it is built, <br />
#enable apc in php.ini<br />
nano /etc/php.ini <br />
<br />
# somewhere in you php.ini file add please not that path may be different for you installation<br />
extension="/usr/lib64/php/modules/apc.so"<br />
apc.enabled=1<br />
<br />
# copy the shipped apc.php to see what is going on wit apc on your server<br />
cp /usr/share/pear/apc.php /root_dir_of_your_web_app<br />
<br />
# now you should be able to see stats of APC running</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108493""></a>
  <div class="note">
   <strong class="user">flydian80 at yahoo dot com</strong>
   <a href="#108493" class="date">02-May-2012 02:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Install successfully on RHEL5 with user-defined path. In case someone needs it, I put the steps here.<br />
<br />
I am not the su user and don't have its right too. Basically I installed the Apache and PHP 5.3.10 on the folder under my user directory.<br />
My user directoy like /home/dxxx, php is at /home/dxxx/php, apache is at /home/dxxx/php.<br />
<br />
1: I get APC-3.1.9.tar.gz from PECL and put in at /home/dxxx/php/etc.<br />
2: /home/dxxx/php/etc: tar -xvfz APC-3.1.9.tar.gz<br />
3: We get a folder named APC-3.1.9, then cd APC-3.1.9<br />
4: /home/dxxx/php/etc/APC-3.1.9: /home/dxxx/php/bin/./phpize ( because I installed php on user-defined foler, need to go there to find the "phpize")<br />
It shows:<br />
Configuring for:<br />
PHP Api Version:&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 20090626<br />
Zend Module Api No:&nbsp; &nbsp; &nbsp; 20090626<br />
Zend Extension Api No:&nbsp;&nbsp; 220090626<br />
<br />
5: /home/dxxx/php/etc/APC-3.1.9: ./config --with-php-config=/home/dxxx/php/bin/php-config --enable-apc --enable-apc-debug ( Because I am asked to put --with-php-config=PATH, if I don't provide it)<br />
<br />
--Ignore the output message<br />
<br />
6: /home/dxxx/php/etc/APC-3.1.9: make<br />
We should be able to see a "apc.so" file under modules/. <br />
<br />
7:&nbsp; /home/dxxx/php/etc/APC-3.1.9: make install<br />
This step copies that "apc.so" file to your extension folder. We can do it manually either.<br />
<br />
8: Add extension=apc.so to you php.ini, then restart the apache server<br />
<br />
9: /home/dxxx/php/etc/APC-3.1.9: /home/dxxx/php/bin/./php -m <br />
We should be able to see the "apc" on the list</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107242""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#107242" class="date">24-Jan-2012 09:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On my Debian Squeeze 64-bit I also had to install the package "apache2-threaded-dev" with this command "apt-get install apache2-threaded-dev". Afterwards I did "pecl install apc" and everything seemed to work fine.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106609""></a>
  <div class="note">
   <strong class="user">scarywound at gmail com</strong>
   <a href="#106609" class="date">22-Nov-2011 09:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Pay attention to the fact that installing php-apc package gives you APC version 3.1.3p1, which is according to <a href="http://pecl.php.net/package/APC UNSTABLE. If you want the latest STABLE edition (3.1.9 by now" rel="nofollow" target="_blank">http://pecl.php.net/package/APC UNSTABLE. If you want the latest STABLE edition (3.1.9 by now</a>), you should use 'sudo pecl install apc' instead.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104496""></a>
  <div class="note">
   <strong class="user">brian at diamondsea dot com</strong>
   <a href="#104496" class="date">18-Jun-2011 04:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When installing on Plesk and cPanel machines, I get the following error message:<br />
<br />
[root@web1 ~]# pecl install apc<br />
downloading APC-3.1.9.tgz ...<br />
Starting to download APC-3.1.9.tgz (155,540 bytes)<br />
.................................done: 155,540 bytes<br />
54 source files, building<br />
running: phpize<br />
Configuring for:<br />
PHP Api Version:&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 20041225<br />
Zend Module Api No:&nbsp; &nbsp; &nbsp; 20060613<br />
Zend Extension Api No:&nbsp;&nbsp; 220060519<br />
/usr/bin/phpize: /tmp/pear/temp/APC/build/shtool: /bin/sh: bad interpreter: Permission denied<br />
Cannot find autoconf. Please check your autoconf installation and the<br />
$PHP_AUTOCONF environment variable. Then, rerun this script.<br />
<br />
ERROR: `phpize' failed<br />
<br />
The problem is caused by the /tmp/ filesystem being mounted noexec, which keeps any programs on /tmp/ from being allowed to be executed, which breaks the install script.&nbsp; <br />
<br />
To remount /tmp/ as executable, use:<br />
<br />
[root@web1 ~]# mount -o remount,exec,suid /tmp<br />
<br />
The it should install correctly.<br />
<br />
After the install is done, remount the /tmp/ filesystem with the noexec permissions reset.<br />
<br />
[root@web1 ~]# mount -o remount,noexec,nosuid /tmp</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92934""></a>
  <div class="note">
   <strong class="user">pr at outwit dot com</strong>
   <a href="#92934" class="date">15-Aug-2009 11:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Installed successfully on different FreeBSD servers, with mmap and IPC semaphores, but I got an error on a 64 bits box :<br />
<br />
apc_sem_create: semctl(65536,...) failed: Result too large<br />
<br />
I had to increase maximum semaphore value :<br />
<br />
# sysctl kern.ipc.semvmx=131068<br />
kern.ipc.semvmx: 32767 -&gt; 131068<br />
# echo "kern.ipc.semvmx=131068" &gt;&gt;&nbsp; /etc/sysctl.conf<br />
<br />
Works like a charm.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90071""></a>
  <div class="note">
   <strong class="user">toby at telegraphics dot com dot au</strong>
   <a href="#90071" class="date">04-Apr-2009 07:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On Gentoo,<br />
<br />
# emerge pecl-apc<br />
<br />
Check installation:<br />
<br />
&nbsp;$ php -r 'phpinfo();' |grep apc<br />
additional .ini files parsed =&gt; /etc/php/cli-php5/ext-active/apc.ini,<br />
apc<br />
apc.cache_by_default =&gt; On =&gt; On<br />
apc.coredump_unmap =&gt; Off =&gt; Off<br />
apc.enable_cli =&gt; Off =&gt; Off<br />
apc.enabled =&gt; On =&gt; On<br />
apc.file_update_protection =&gt; 2 =&gt; 2<br />
apc.filters =&gt; no value =&gt; no value<br />
apc.gc_ttl =&gt; 3600 =&gt; 3600<br />
apc.include_once_override =&gt; Off =&gt; Off<br />
apc.max_file_size =&gt; 1M =&gt; 1M<br />
apc.num_files_hint =&gt; 1024 =&gt; 1024<br />
apc.report_autofilter =&gt; Off =&gt; Off<br />
apc.rfc1867 =&gt; Off =&gt; Off<br />
apc.rfc1867_freq =&gt; 0 =&gt; 0<br />
apc.rfc1867_name =&gt; APC_UPLOAD_PROGRESS =&gt; APC_UPLOAD_PROGRESS<br />
apc.rfc1867_prefix =&gt; upload_ =&gt; upload_<br />
apc.shm_segments =&gt; 1 =&gt; 1<br />
apc.shm_size =&gt; 30 =&gt; 30<br />
apc.slam_defense =&gt; 0 =&gt; 0<br />
apc.stat =&gt; On =&gt; On<br />
apc.stat_ctime =&gt; Off =&gt; Off<br />
apc.ttl =&gt; 7200 =&gt; 7200<br />
apc.user_entries_hint =&gt; 4096 =&gt; 4096<br />
apc.user_ttl =&gt; 7200 =&gt; 7200<br />
apc.write_lock =&gt; On =&gt; On<br />
suhosin.apc_bug_workaround =&gt; Off =&gt; Off</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87587""></a>
  <div class="note">
   <strong class="user">61924 dot 00 at gmail dot com</strong>
   <a href="#87587" class="date">11-Dec-2008 07:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
sudo apt-get install php-apc<br />
sudo /etc/init.d/apache2 restart<br />
<br />
Was enough for me. I use Ubuntu Server 8.10.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84702""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#84702" class="date">26-Jul-2008 12:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On Ubuntu I had to install the apache2-threaded-dev package.&nbsp; It's the the Etch repos.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84650""></a>
  <div class="note">
   <strong class="user">consistency</strong>
   <a href="#84650" class="date">23-Jul-2008 10:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
debian etch installation<br />
<br />
apt-get install apache2<br />
apt-get install libapache2-mod-php5<br />
apt-get install php-pear<br />
apt-get install php5-dev<br />
apt-get install make<br />
apt-get install apache2-prefork-dev<br />
pecl install apc<br />
<br />
apache2-prefork-dev is necessary for not having the <br />
"Sorry, I was not able to successfully run APXS."<br />
error</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

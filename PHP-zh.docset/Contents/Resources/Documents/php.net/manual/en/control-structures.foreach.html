<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>foreach</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="control-structures.for.html">? for</a></li>
      <li style="float: right;"><a href="control-structures.break.html">break ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="language.control-structures.html">流程控制</a></li>
    <li>foreach</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="control-structures.foreach" class="sect1">
 <h2 class="title"><em>foreach</em></h2>
 <p class="verinfo">(PHP 4, PHP 5, PHP 7)</p>
 <p class="para">
  <em>foreach</em> 语法结构提供了遍历数组的简单方式。<em>foreach</em>
  仅能够应用于数组和对象，如果尝试应用于其他数据类型的变量，或者未初始化的变量将发出错误信息。有两种语法：
  <div class="informalexample">
   <div class="example-contents">
<div class="cdata"><pre>
foreach (array_expression as $value)
    statement
foreach (array_expression as $key =&gt; $value)
    statement
</pre></div>
   </div>

  </div>
 </p>
 <p class="simpara">
  第一种格式遍历给定的 <em>array_expression</em>
  数组。每次循环中，当前单元的值被赋给 <em>$value</em>
  并且数组内部的指针向前移一步（因此下一次循环中将会得到下一个单元）。
 </p>
 <p class="simpara">
  第二种格式做同样的事，只除了当前单元的键名也会在每次循环中被赋给变量
  <em>$key</em>。
 </p>
 <p class="simpara">
  还能够自定义<a href="language.oop5.iterations.html" class="link">遍历对象</a>。
 </p>
 <p class="para">
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    当 <em>foreach</em>
    开始执行时，数组内部的指针会自动指向第一个单元。这意味着不需要在
    <em>foreach</em> 循环之前调用 <span class="function"><a href="function.reset.html" class="function">reset()</a></span>。
   </p>
   <p class="para">
    由于 <em>foreach</em> 依赖内部数组指针，在循环中修改其值将可能导致意外的行为。
   </p>
  </p></blockquote>
 </p>
 <p class="para">
  可以很容易地通过在 <em>$value</em> 之前加上
  &amp; 来修改数组的元素。此方法将以<a href="language.references.html" class="link">引用</a>赋值而不是拷贝一个值。
  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$arr&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">);<br />foreach&nbsp;(</span><span style="color: #0000BB">$arr&nbsp;</span><span style="color: #007700">as&nbsp;&amp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">;<br />}<br /></span><span style="color: #FF8000">//&nbsp;$arr&nbsp;is&nbsp;now&nbsp;array(2,&nbsp;4,&nbsp;6,&nbsp;8)<br /></span><span style="color: #007700">unset(</span><span style="color: #0000BB">$value</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;最后取消掉引用<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </p>
 <p class="para">
  <em>$value</em> 的引用仅在被遍历的数组可以被引用时才可用（例如是个变量）。以下代码则无法运行：
  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">foreach&nbsp;(array(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">)&nbsp;as&nbsp;&amp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>
   
  </div>
 </p> 
 <div class="warning"><strong class="warning">Warning</strong>
  <p class="para">
   数组最后一个元素的 <em>$value</em> 引用在
   <em>foreach</em> 循环之后仍会保留。建议使用
   <span class="function"><a href="function.unset.html" class="function">unset()</a></span> 来将其销毁。
  </p>
 </div>  
 <p class="para">
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    <em>foreach</em> 不支持用"@"来抑制错误信息的能力。
   </p>
  </p></blockquote>
 </p>
 <p class="para">
  用户可能注意到了以下的代码功能完全相同：
  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$arr&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"one"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"two"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"three"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">reset</span><span style="color: #007700">(</span><span style="color: #0000BB">$arr</span><span style="color: #007700">);<br />while&nbsp;(list(,&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">each</span><span style="color: #007700">(</span><span style="color: #0000BB">$arr</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Value:&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #DD0000">&lt;br&gt;\n"</span><span style="color: #007700">;<br />}<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$arr&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Value:&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #DD0000">&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </p>
 <p class="para">
  以下代码功能也完全相同：
  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$arr&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"one"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"two"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"three"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">reset</span><span style="color: #007700">(</span><span style="color: #0000BB">$arr</span><span style="color: #007700">);<br />while&nbsp;(list(</span><span style="color: #0000BB">$key</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">each</span><span style="color: #007700">(</span><span style="color: #0000BB">$arr</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Key:&nbsp;</span><span style="color: #0000BB">$key</span><span style="color: #DD0000">;&nbsp;Value:&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #DD0000">&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br />}<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$arr&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$key&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Key:&nbsp;</span><span style="color: #0000BB">$key</span><span style="color: #DD0000">;&nbsp;Value:&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #DD0000">&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </p>
 <p class="para">
  示范用法的更多例子：
  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;foreach&nbsp;example&nbsp;1:&nbsp;value&nbsp;only&nbsp;*/<br /><br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">17</span><span style="color: #007700">);<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Current&nbsp;value&nbsp;of&nbsp;\$a:&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #DD0000">.\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">/*&nbsp;foreach&nbsp;example&nbsp;2:&nbsp;value&nbsp;(with&nbsp;its&nbsp;manual&nbsp;access&nbsp;notation&nbsp;printed&nbsp;for&nbsp;illustration)&nbsp;*/<br /><br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">17</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">/*&nbsp;for&nbsp;illustrative&nbsp;purposes&nbsp;only&nbsp;*/<br /><br /></span><span style="color: #007700">foreach&nbsp;(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"\$a[</span><span style="color: #0000BB">$i</span><span style="color: #DD0000">]&nbsp;=&gt;&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #DD0000">.\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++;<br />}<br /><br /></span><span style="color: #FF8000">/*&nbsp;foreach&nbsp;example&nbsp;3:&nbsp;key&nbsp;and&nbsp;value&nbsp;*/<br /><br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"one"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"two"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"three"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"seventeen"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">17<br /></span><span style="color: #007700">);<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$k&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"\$a[</span><span style="color: #0000BB">$k</span><span style="color: #DD0000">]&nbsp;=&gt;&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #DD0000">.\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">/*&nbsp;foreach&nbsp;example&nbsp;4:&nbsp;multi-dimensional&nbsp;arrays&nbsp;*/<br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;array();<br /></span><span style="color: #0000BB">$a</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">][</span><span style="color: #0000BB">0</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">"a"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$a</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">][</span><span style="color: #0000BB">1</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">"b"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$a</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">][</span><span style="color: #0000BB">0</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">"y"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$a</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">][</span><span style="color: #0000BB">1</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">"z"</span><span style="color: #007700">;<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$v1</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$v1&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$v2</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$v2</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #FF8000">/*&nbsp;foreach&nbsp;example&nbsp;5:&nbsp;dynamic&nbsp;arrays&nbsp;*/<br /><br /></span><span style="color: #007700">foreach&nbsp;(array(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">)&nbsp;as&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$v</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </p>
 
 
 <div class="sect2" id="control-structures.foreach.list">
  <h3 class="title">用 list() 给嵌套的数组解包</h3>
  <p class="verinfo">(PHP 5 &gt;= 5.5.0, PHP 7)</p>

  <p class="para">
   PHP 5.5 增添了遍历一个数组的数组的功能并且把嵌套的数组解包到循环变量中，只需将
   <span class="function"><a href="function.list.html" class="function">list()</a></span> 作为值提供。
  </p>

  <p class="para">
   例如：
   <div class="informalexample">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$array&nbsp;</span><span style="color: #007700">=&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">],<br />];<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$array&nbsp;</span><span style="color: #007700">as&nbsp;list(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$a&nbsp;contains&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;the&nbsp;nested&nbsp;array,<br />&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;and&nbsp;$b&nbsp;contains&nbsp;the&nbsp;second&nbsp;element.<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"A:&nbsp;</span><span style="color: #0000BB">$a</span><span style="color: #DD0000">;&nbsp;B:&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <p class="para">以上例程会输出：</p>
    <div class="example-contents screen">
<div class="cdata"><pre>
A: 1; B: 2
A: 3; B: 4
</pre></div>
    </div>
   </div>
  </p>

  <p class="para">
   <span class="function"><a href="function.list.html" class="function">list()</a></span> 中的单元可以少于嵌套数组的，此时多出来的数组单元将被忽略：
   <div class="informalexample">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$array&nbsp;</span><span style="color: #007700">=&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">],<br />];<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$array&nbsp;</span><span style="color: #007700">as&nbsp;list(</span><span style="color: #0000BB">$a</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Note&nbsp;that&nbsp;there&nbsp;is&nbsp;no&nbsp;$b&nbsp;here.<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$a</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <p class="para">以上例程会输出：</p>
    <div class="example-contents screen">
<div class="cdata"><pre>
1
3
</pre></div>
    </div>
   </div>
  </p>

  <p class="para">
   如果 <span class="function"><a href="function.list.html" class="function">list()</a></span> 中列出的单元多于嵌套数组则会发出一条消息级别的错误信息：
   <div class="informalexample">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$array&nbsp;</span><span style="color: #007700">=&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">],<br />];<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$array&nbsp;</span><span style="color: #007700">as&nbsp;list(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"A:&nbsp;</span><span style="color: #0000BB">$a</span><span style="color: #DD0000">;&nbsp;B:&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #DD0000">;&nbsp;C:&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <p class="para">以上例程会输出：</p>
    <div class="example-contents screen">
<div class="cdata"><pre>

Notice: Undefined offset: 2 in example.php on line 7
A: 1; B: 2; C: 

Notice: Undefined offset: 2 in example.php on line 7
A: 3; B: 4; C: 
</pre></div>
    </div>
   </div>
  </p>
 </div>
</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="120201""></a>
  <div class="note">
   <strong class="user">mustaroad</strong>
   <a href="#120201" class="date">22-Nov-2016 03:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
in foreach if you want to iterate through a specific column in a nested arrays for example:<br />
<br />
$arr = array(<br />
&nbsp;&nbsp; &nbsp; [1, 2, 3,&nbsp;&nbsp; 4],<br />
&nbsp;&nbsp; &nbsp; [14, 6, 7,&nbsp; 6],<br />
&nbsp;&nbsp; &nbsp; [10, 2 ,3 , 2],<br />
);<br />
<br />
when we want to iterate on the third column we can use:<br />
<br />
foreach( $arr as list( , , $a)) {<br />
&nbsp;&nbsp;&nbsp; echo "$a\n";<br />
}<br />
<br />
this will print:<br />
3<br />
7<br />
3</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119284""></a>
  <div class="note">
   <strong class="user">till at etill dot net</strong>
   <a href="#119284" class="date">04-May-2016 06:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note: Empty arrays are handled just fine by foreach, but for fail-safe code, you should always check that what is passed in fact is an array, like this:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if( </span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$a</span><span class="keyword">) ) {<br />
&nbsp; foreach( </span><span class="default">$a </span><span class="keyword">as </span><span class="default">$v</span><span class="keyword">) { ... }<br />
} else <br />
</span><span class="comment">// $a is not an array<br />
</span><span class="keyword">;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118405""></a>
  <div class="note">
   <strong class="user">sebastian dot goendoer at NOSPAM dot telekom dot de</strong>
   <a href="#118405" class="date">01-Dec-2015 11:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
String keys of associative arrays, for which is_numeric() is true and which can be type-juggled to an int will be cast to an int! If the key is on the other hand a string that can be type-juggled into a float, it will stay a string. (Observed on PHP 7.0.0RC8)<br />
<br />
<span class="default">&lt;?php<br />
$arr </span><span class="keyword">= array();<br />
</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="string">"zero"</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// will stay an int<br />
</span><span class="default">$arr</span><span class="keyword">[</span><span class="string">"1"</span><span class="keyword">] = </span><span class="string">"one"</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// will be cast to an int !<br />
</span><span class="default">$arr</span><span class="keyword">[</span><span class="string">"two"</span><span class="keyword">] = </span><span class="string">"2"</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// will stay a string<br />
</span><span class="default">$arr</span><span class="keyword">[</span><span class="string">"3.5"</span><span class="keyword">] = </span><span class="string">"threeandahalf"</span><span class="keyword">;&nbsp; &nbsp; </span><span class="comment">// will stay a string<br />
<br />
</span><span class="keyword">foreach(</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
The output will be<br />
<br />
int(0)<br />
int(1)<br />
string(3) "two"<br />
string(3) "3.5"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118028""></a>
  <div class="note">
   <strong class="user">pnc at balintx dot me</strong>
   <a href="#118028" class="date">21-Sep-2015 07:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just a simple strange behavior I have ran into:<br />
<br />
If you accidentally put a semicolon after the foreach statement, you get no errors, but the loop will only run on the last element of the array:<br />
<span class="default">&lt;?php<br />
$array </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">);<br />
foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">);<br />
{<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$key</span><span class="keyword">;<br />
}<br />
</span><span class="comment">// output: 3<br />
</span><span class="default">?&gt;<br />
</span><br />
Correctly:<br />
<span class="default">&lt;?php<br />
$array </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">);<br />
foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$key</span><span class="keyword">;<br />
}<br />
</span><span class="comment">// output: 123<br />
</span><span class="default">?&gt;<br />
</span><br />
It took me a while to find that semicolon.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116889""></a>
  <div class="note">
   <strong class="user">84td84 at gmail dot com</strong>
   <a href="#116889" class="date">16-Mar-2015 12:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
@tedivm at tedivm dot com<br />
<br />
With foreach you can specify the &amp; for $value. In this case you modify the original array. Otherwise you operate on a "copy" (not on the original array).<br />
Consider the following example, that is identical with yours, except i use the &amp; for $value:<br />
<br />
$arr = array(1,2,3,4,5,6,7,8,9);<br />
foreach($arr as $key=&gt;&amp;$value)<br />
{<br />
&nbsp;&nbsp;&nbsp; unset($arr[$key + 1]);<br />
&nbsp;&nbsp;&nbsp; echo "\n\n--------\nKey: $key\nValue: $value\n";<br />
&nbsp;&nbsp;&nbsp; var_dump($arr);<br />
&nbsp;&nbsp;&nbsp; echo&nbsp;&nbsp; "--------";<br />
}<br />
echo "\n\nARR at the end:\n";<br />
var_dump($arr);<br />
<br />
In foreach it prints the following values:<br />
1, 3, 5, 7, 9<br />
<br />
And you can see, that in the loop the corresponding elements are removed from arr.<br />
So at the end you'll have an array, that contains only 1, 3, 5, 7, 9.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116473""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#116473" class="date">08-Jan-2015 09:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
modifying array while foreach'ing it(yeah, such slime code;-)<br />
if elements were added on last iteration or into array with 1 element, then added elements wont be iterated as foreach checks for pointer before iteration cycle<br />
so it just quit and added elements wont be treated</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116434""></a>
  <div class="note">
   <strong class="user">Anteaus</strong>
   <a href="#116434" class="date">02-Jan-2015 06:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
"In order to be able to directly modify array elements within the loop precede $value with &amp;. In that case the value will be assigned by reference. "<br />
<br />
PLEASE CLARIFY! -Does this still hold true in php5.4+, where explicit passing by reference is seemingly forbidden- or is this now illegal syntax?</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116350""></a>
  <div class="note">
   <strong class="user">Fred</strong>
   <a href="#116350" class="date">17-Dec-2014 05:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to use the list for multidimension arrays, you can nest several lists:<br />
<br />
<span class="default">&lt;?php<br />
$array </span><span class="keyword">= [<br />
&nbsp;&nbsp;&nbsp; [</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, array(</span><span class="default">3</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">)],<br />
&nbsp;&nbsp;&nbsp; [</span><span class="default">3</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">, array(</span><span class="default">5</span><span class="keyword">, </span><span class="default">6</span><span class="keyword">)],<br />
];<br />
<br />
foreach (</span><span class="default">$array </span><span class="keyword">as list(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">, list(</span><span class="default">$c</span><span class="keyword">, </span><span class="default">$d</span><span class="keyword">))) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"A: </span><span class="default">$a</span><span class="string">; B: </span><span class="default">$b</span><span class="string">; C: </span><span class="default">$c</span><span class="string">; D: </span><span class="default">$d</span><span class="string">;&lt;br&gt;"</span><span class="keyword">;<br />
};<br />
</span><span class="default">?&gt;<br />
</span><br />
Will output:<br />
A: 1; B: 2; C: 3; D: 4;<br />
A: 3; B: 4; C: 5; D: 6;<br />
<br />
And:<br />
<br />
<span class="default">&lt;?php<br />
$array </span><span class="keyword">= [<br />
&nbsp;&nbsp;&nbsp; [</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, array(</span><span class="default">3</span><span class="keyword">, array(</span><span class="default">4</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">))],<br />
&nbsp;&nbsp;&nbsp; [</span><span class="default">3</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">, array(</span><span class="default">5</span><span class="keyword">, array(</span><span class="default">6</span><span class="keyword">, </span><span class="default">7</span><span class="keyword">))],<br />
];<br />
<br />
foreach (</span><span class="default">$array </span><span class="keyword">as list(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">, list(</span><span class="default">$c</span><span class="keyword">, list(</span><span class="default">$d</span><span class="keyword">, </span><span class="default">$e</span><span class="keyword">)))) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"A: </span><span class="default">$a</span><span class="string">; B: </span><span class="default">$b</span><span class="string">; C: </span><span class="default">$c</span><span class="string">; D: </span><span class="default">$d</span><span class="string">; E: </span><span class="default">$e</span><span class="string">;&lt;br&gt;"</span><span class="keyword">;<br />
};<br />
</span><span class="default">Will output</span><span class="keyword">:<br />
</span><span class="default">A</span><span class="keyword">: </span><span class="default">1</span><span class="keyword">; </span><span class="default">B</span><span class="keyword">: </span><span class="default">2</span><span class="keyword">; </span><span class="default">C</span><span class="keyword">: </span><span class="default">3</span><span class="keyword">; </span><span class="default">D</span><span class="keyword">: </span><span class="default">4</span><span class="keyword">; </span><span class="default">E</span><span class="keyword">: </span><span class="default">5</span><span class="keyword">;<br />
</span><span class="default">A</span><span class="keyword">: </span><span class="default">3</span><span class="keyword">; </span><span class="default">B</span><span class="keyword">: </span><span class="default">4</span><span class="keyword">; </span><span class="default">C</span><span class="keyword">: </span><span class="default">5</span><span class="keyword">; </span><span class="default">D</span><span class="keyword">: </span><span class="default">6</span><span class="keyword">; </span><span class="default">E</span><span class="keyword">: </span><span class="default">7</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115753""></a>
  <div class="note">
   <strong class="user">admin at gadelkareem dot com</strong>
   <a href="#115753" class="date">18-Sep-2014 08:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Not sure if this is considered a bug<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $array </span><span class="keyword">= [</span><span class="string">'numbers' </span><span class="keyword">=&gt; [</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">]];<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as &amp;</span><span class="default">$numbers</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$numbers </span><span class="keyword">= [</span><span class="default">4</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">, </span><span class="default">6</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">modify_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">modify_array</span><span class="keyword">(</span><span class="default">$array_arg</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array_arg</span><span class="keyword">[</span><span class="string">'numbers'</span><span class="keyword">] = [</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
</span><span class="default">Prints<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">array(</span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; [</span><span class="string">"numbers"</span><span class="keyword">]=&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &amp;array(</span><span class="default">3</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; [</span><span class="default">0</span><span class="keyword">]=&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">int</span><span class="keyword">(</span><span class="default">4</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; [</span><span class="default">1</span><span class="keyword">]=&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">int</span><span class="keyword">(</span><span class="default">5</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; [</span><span class="default">2</span><span class="keyword">]=&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">int</span><span class="keyword">(</span><span class="default">6</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; array(</span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; [</span><span class="string">"numbers"</span><span class="keyword">]=&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &amp;array(</span><span class="default">3</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; [</span><span class="default">0</span><span class="keyword">]=&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">int</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; [</span><span class="default">1</span><span class="keyword">]=&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">int</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; [</span><span class="default">2</span><span class="keyword">]=&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">int</span><span class="keyword">(</span><span class="default">3</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span>Notice that $array was not passed by reference to modify_array() however the nested array was modified. It sounds logical but not sure if this is documented!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115207""></a>
  <div class="note">
   <strong class="user">liam666 at donnelly-house dot net</strong>
   <a href="#115207" class="date">12-Jun-2014 10:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a decent, simple, and easy way to reference other values of an associative array when using foreach. (effective "next", "prev", etc.)<br />
The only care that needs to be taken is if the array is HUGE in size, so you don't run into memory use problems. (and potential speed issues)<br />
<br />
This example uses the 'primary' array, $aPublishSeq, which is ksort-ed to put the array in order according to the associative keys. The array is then copied using a foreach loop to make a duplicate array where the key and value order correspond to the first array, but the keys are sequential numeric starting at zero.<br />
<br />
ksort ($aPublishSeq, SORT_STRING);&nbsp; &nbsp;&nbsp; // put them all in the right order keeping array keys<br />
foreach ($aPublishSeq as $aValue)<br />
&nbsp;&nbsp; $aPublishIdx[] = $aValue;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // duplicate array using corresponding sequential numeric keys<br />
<br />
Now, in the usage foreach loop, an index variable is used to keep in sync with the associative array.<br />
<br />
$PubIdx = -1;&nbsp; &nbsp;&nbsp; // start at -1 to start at 0 below<br />
<br />
foreach ($aPublishSeq as $sKey =&gt; $sValue) {<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; ++$PubIdx;&nbsp; &nbsp;&nbsp; // index into $aPublishIdx array of corresponding element in $aPublishSeq array (for "next" element check, etc.)<br />
<br />
&nbsp;&nbsp; echo $aPublishIdx[$PubIdx&nbsp; - 1]&nbsp; &nbsp;&nbsp; // previous array value<br />
&nbsp;&nbsp; echo $aPublishIdx[$PubIdx]&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // current array value<br />
&nbsp;&nbsp; echo $aPublishIdx[$PubIdx&nbsp; + 1]&nbsp; &nbsp;&nbsp; // next array value<br />
<br />
....<br />
<br />
It's simple, but it works, and without much muss or fuss.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114880""></a>
  <div class="note">
   <strong class="user">nehuen</strong>
   <a href="#114880" class="date">20-Apr-2014 12:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
foreach by reference internally deleted and created a new reference in each iteration, so it is not possible to directly use this value as a variable parameter values??, look at the following example where the problem is observed and a possible solution:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;</span><span class="keyword">class </span><span class="default">test<br />
&nbsp;</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$a </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$r </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">show</span><span class="keyword">(&amp;</span><span class="default">$v</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">a</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">a </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">r </span><span class="keyword">= &amp;</span><span class="default">$v</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">r</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">reset</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">a </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;}<br />
&nbsp;<br />
&nbsp;</span><span class="default">$t </span><span class="keyword">= new </span><span class="default">test</span><span class="keyword">();<br />
&nbsp;<br />
&nbsp;</span><span class="default">$a </span><span class="keyword">= array(array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">),array(</span><span class="default">3</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">),array(</span><span class="default">5</span><span class="keyword">,</span><span class="default">6</span><span class="keyword">));<br />
&nbsp;foreach(</span><span class="default">$a </span><span class="keyword">as &amp;</span><span class="default">$p</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$t</span><span class="keyword">-&gt;</span><span class="default">show</span><span class="keyword">(</span><span class="default">$p</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;</span><span class="comment">/* Output obtain:<br />
&nbsp;&nbsp;&nbsp; array (size=2)<br />
&nbsp;&nbsp; &nbsp;&nbsp; 0 =&gt; int 1<br />
&nbsp;&nbsp; &nbsp;&nbsp; 1 =&gt; int 2<br />
&nbsp;&nbsp;&nbsp; array (size=2)<br />
&nbsp;&nbsp; &nbsp;&nbsp; 0 =&gt; int 1<br />
&nbsp;&nbsp; &nbsp;&nbsp; 1 =&gt; int 2<br />
&nbsp;&nbsp;&nbsp; array (size=2)<br />
&nbsp;&nbsp; &nbsp;&nbsp; 0 =&gt; int 1<br />
&nbsp;&nbsp; &nbsp;&nbsp; 1 =&gt; int 2<br />
&nbsp;*/<br />
&nbsp; <br />
&nbsp; </span><span class="default">$t</span><span class="keyword">-&gt;</span><span class="default">reset</span><span class="keyword">();<br />
&nbsp; foreach(</span><span class="default">$a </span><span class="keyword">as </span><span class="default">$p</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$b </span><span class="keyword">= &amp;</span><span class="default">$p</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$t</span><span class="keyword">-&gt;</span><span class="default">show</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">);<br />
&nbsp; }<br />
&nbsp; <br />
&nbsp;</span><span class="comment">/* Output obtain:<br />
&nbsp;&nbsp;&nbsp; array (size=2)<br />
&nbsp;&nbsp; &nbsp;&nbsp; 0 =&gt; int 1<br />
&nbsp;&nbsp; &nbsp;&nbsp; 1 =&gt; int 2<br />
&nbsp;&nbsp;&nbsp; array (size=2)<br />
&nbsp;&nbsp; &nbsp;&nbsp; 0 =&gt; int 3<br />
&nbsp;&nbsp; &nbsp;&nbsp; 1 =&gt; int 4<br />
&nbsp;&nbsp;&nbsp; array (size=2)<br />
&nbsp;&nbsp; &nbsp;&nbsp; 0 =&gt; int 5<br />
&nbsp;&nbsp; &nbsp;&nbsp; 1 =&gt; int 6<br />
&nbsp;*/</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114759""></a>
  <div class="note">
   <strong class="user">Alastair Hole</strong>
   <a href="#114759" class="date">02-Apr-2014 06:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
What happened to this note:<br />
"Unless the array is referenced, foreach operates on a copy of the specified array and not the array itself. foreach has some side effects on the array pointer. Don't rely on the array pointer during or after the foreach without resetting it."<br />
<br />
Is this no longer the case?<br />
It seems only to remain in the Serbian documentation: <a href="http://php.net/manual/sr/control-structures.foreach.php" rel="nofollow" target="_blank">http://php.net/manual/sr/control-structures.foreach.php</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114728""></a>
  <div class="note">
   <strong class="user">sainthyoga2003 at gmail dot com</strong>
   <a href="#114728" class="date">30-Mar-2014 08:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that prior to PHP 5.5 you will get a T_LIST parse error for:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">foreach(</span><span class="default">$list </span><span class="keyword">as list(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">)) {...<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112590""></a>
  <div class="note">
   <strong class="user">Delian Krustev</strong>
   <a href="#112590" class="date">02-Jul-2013 10:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I want to add some inline comments to dtowell's piece of code about the iteration by reference:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$a </span><span class="keyword">= array(</span><span class="string">'abe'</span><span class="keyword">,</span><span class="string">'ben'</span><span class="keyword">,</span><span class="string">'cam'</span><span class="keyword">);<br />
<br />
foreach (</span><span class="default">$a </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;&amp;</span><span class="default">$n</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$n </span><span class="keyword">= </span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">);<br />
<br />
</span><span class="comment"># At the end of this cycle the variable $n refers to the same memory as $a[2]<br />
# So when the second "foreach" assigns a value to $n :<br />
<br />
</span><span class="keyword">foreach (</span><span class="default">$a </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$n</span><span class="keyword">) </span><span class="comment">// notice NO reference here!<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="string">"</span><span class="default">$n</span><span class="string">\n"</span><span class="keyword">;<br />
<br />
</span><span class="comment"># it is also modifying $a[2] .<br />
# So on the three repetitions of the second "foreach" the array will look like:<br />
# 1. ('abe','ben','abe') - assigned the value of the first element to the last element<br />
# 2. ('abe','ben','ben') - assigned the value of the second element to the last element<br />
# 3. ('abe','ben','ben') - assigned the value of the third element to itself<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111825""></a>
  <div class="note">
   <strong class="user">Ashus</strong>
   <a href="#111825" class="date">02-Apr-2013 10:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you wondered how to create a list of all possible combinations of variable amount of arrays (multiple foreach), you might use this:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$a</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = array(</span><span class="string">'a1'</span><span class="keyword">,</span><span class="string">'a2'</span><span class="keyword">);<br />
</span><span class="default">$a</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = array(</span><span class="string">'b1'</span><span class="keyword">,</span><span class="string">'b2'</span><span class="keyword">,</span><span class="string">'b3'</span><span class="keyword">);<br />
</span><span class="default">$a</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] = array(</span><span class="string">'c1'</span><span class="keyword">,</span><span class="string">'c2'</span><span class="keyword">);<br />
<br />
function </span><span class="default">getAllCombinations</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] as </span><span class="default">$v</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!isset(</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">]))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$s</span><span class="keyword">.</span><span class="default">$v</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">getAllCombinations</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">.</span><span class="default">$v</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$s</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
echo </span><span class="default">getAllCombinations</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
the result:<br />
<br />
a1b1c1<br />
a1b1c2<br />
a1b2c1<br />
a1b2c2<br />
a1b3c1<br />
a1b3c2<br />
a2b1c1<br />
a2b1c2<br />
a2b2c1<br />
a2b2c2<br />
a2b3c1<br />
a2b3c2</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111688""></a>
  <div class="note">
   <strong class="user">php at darkain dot com</strong>
   <a href="#111688" class="date">17-Mar-2013 06:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
"Reference of a $value and the last array element remain even after the foreach loop. It is recommended to destroy it by unset()."<br />
<br />
I cannot stress this point of the documentation enough! Here is a simple example of exactly why this must be done:<br />
<br />
<span class="default">&lt;?php<br />
$arr1 </span><span class="keyword">= array(</span><span class="string">"a" </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">"b" </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">"c" </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">);<br />
</span><span class="default">$arr2 </span><span class="keyword">= array(</span><span class="string">"x" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">"y" </span><span class="keyword">=&gt; </span><span class="default">5</span><span class="keyword">, </span><span class="string">"z" </span><span class="keyword">=&gt; </span><span class="default">6</span><span class="keyword">);<br />
<br />
foreach (</span><span class="default">$arr1 </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; &amp;</span><span class="default">$val</span><span class="keyword">) {}<br />
foreach (</span><span class="default">$arr2 </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">) {}<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$arr1</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$arr2</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
The output is:<br />
array(3) { ["a"]=&gt; int(1) ["b"]=&gt; int(2) ["c"]=&gt; &amp;int(6) }<br />
array(3) { ["x"]=&gt; int(4) ["y"]=&gt; int(5) ["z"]=&gt; int(6) }<br />
<br />
Notice how the last index in $arr1 is now the value from the last index in $arr2!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109698""></a>
  <div class="note">
   <strong class="user">dtowell</strong>
   <a href="#109698" class="date">11-Aug-2012 09:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
References created by foreach hang around past their best-used-by date. For example, the following:<br />
<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= array(</span><span class="string">'abe'</span><span class="keyword">,</span><span class="string">'ben'</span><span class="keyword">,</span><span class="string">'cam'</span><span class="keyword">);<br />
foreach (</span><span class="default">$a </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;&amp;</span><span class="default">$n</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$n </span><span class="keyword">= </span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">);<br />
foreach (</span><span class="default">$a </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$n</span><span class="keyword">) </span><span class="comment">// notice NO reference here!<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="string">"</span><span class="default">$n</span><span class="string">\n"</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
will result in:<br />
<br />
ABE<br />
BEN<br />
BEN<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; ABE<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; BEN<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; BEN<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107533""></a>
  <div class="note">
   <strong class="user">Voitcus at wp dot pl</strong>
   <a href="#107533" class="date">16-Feb-2012 05:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can even iterate through "dynamic" arrays that do not physically exist, but are objects that implement Iterator interface. They don't need to be stored in memory when foreach starts.<br />
<br />
Consider the array that contains some values (I called it $allValues in the example below) and we want to have only some of them (eg. the ones that are dividable by 2). I create an object that would serve as dynamic array, that means it would "dynamically update" its values together with $allValues. The main advantage is that I store only one array, and it's the only array I serialize.<br />
<br />
An object of MyIter class will not contain any values itself:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">MyIter </span><span class="keyword">implements </span><span class="default">Iterator </span><span class="keyword">{ </span><span class="comment">// you can implement ArrayAccess and Countable interfaces too, this will make class MyIter behave like a "real" array<br />
&nbsp; </span><span class="keyword">private </span><span class="default">$position </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="comment">// an internal position of the current element<br />
&nbsp; // please note that $position has nothing common with $allValues!<br />
<br />
&nbsp; </span><span class="keyword">private function </span><span class="default">getTable</span><span class="keyword">(){ </span><span class="comment">// prepare a temporary "static" table of all objects in the class<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">global </span><span class="default">$allValues</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">=array(); </span><span class="comment">// temporary variable<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach(</span><span class="default">$allValues </span><span class="keyword">as </span><span class="default">$obj</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(</span><span class="default">$obj </span><span class="keyword">% </span><span class="default">2 </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) </span><span class="comment">// check if the value is even<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[]=</span><span class="default">$obj</span><span class="keyword">; </span><span class="comment">// if yes, I want it<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
&nbsp; }&nbsp; &nbsp; <br />
<br />
&nbsp; </span><span class="comment">// the all below declared methods are public and belong to the Iterator interface<br />
&nbsp; </span><span class="keyword">function </span><span class="default">rewind</span><span class="keyword">() { </span><span class="comment">// a method to start iterating<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">position </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="comment">// just move to the beginning<br />
&nbsp; </span><span class="keyword">}<br />
<br />
&nbsp; function </span><span class="default">current</span><span class="keyword">() { </span><span class="comment">// retrieves the current element<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$table</span><span class="keyword">=</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">getTable</span><span class="keyword">(); </span><span class="comment">// let us prepare a table<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$table</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">position</span><span class="keyword">]; </span><span class="comment">// and return the current element<br />
&nbsp; </span><span class="keyword">}<br />
<br />
&nbsp; function </span><span class="default">key</span><span class="keyword">() { </span><span class="comment">// retrieves the current element's key<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">position</span><span class="keyword">; </span><span class="comment">// this is used by foreach(... as $key=&gt;$value), not important here<br />
&nbsp; </span><span class="keyword">}<br />
<br />
&nbsp; function </span><span class="default">next</span><span class="keyword">() { </span><span class="comment">// move to next element<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">++</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">position</span><span class="keyword">;<br />
&nbsp; }<br />
<br />
&nbsp; function </span><span class="default">valid</span><span class="keyword">() { </span><span class="comment">// check if the current element is valid (ie. if it exists)<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">position</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">getTable</span><span class="keyword">());<br />
&nbsp; }<br />
} </span><span class="comment">// end of class<br />
<br />
// now prepare the array of 12 elements<br />
</span><span class="default">$allValues</span><span class="keyword">=array(</span><span class="default">0</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">,</span><span class="default">6</span><span class="keyword">,</span><span class="default">7</span><span class="keyword">,</span><span class="default">8</span><span class="keyword">,</span><span class="default">9</span><span class="keyword">,</span><span class="default">10</span><span class="keyword">,</span><span class="default">11</span><span class="keyword">);<br />
<br />
</span><span class="comment">//we would like to have a dynamic array of all even values<br />
</span><span class="default">$iterator</span><span class="keyword">=new </span><span class="default">MyIter</span><span class="keyword">();<br />
<br />
foreach(</span><span class="default">$iterator </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">){<br />
&nbsp; echo </span><span class="default">$value</span><span class="keyword">.</span><span class="string">"&lt;br /&gt;"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span>This will result in:<br />
0<br />
2<br />
4<br />
6<br />
8<br />
10<br />
<br />
(You may also like to see what var_dump($iterator) produces).<br />
<br />
Another great advantage is that you can modify the main table "on-the-fly" and it has its impact. Let us modify the last foreach loop:<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// ...all above shall stay as it was<br />
</span><span class="keyword">foreach(</span><span class="default">$iterator </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">){<br />
&nbsp; echo </span><span class="default">$value</span><span class="keyword">.</span><span class="string">"&lt;br /&gt;"</span><span class="keyword">;<br />
&nbsp; if(</span><span class="default">$value</span><span class="keyword">==</span><span class="default">6</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$allValues</span><span class="keyword">=array(</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"I modified source array!&lt;br /&gt;"</span><span class="keyword">;<br />
&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span>This produces now:<br />
0<br />
2<br />
4<br />
6<br />
I modified source array!<br />
<br />
However, if you feel it is rather a catastrophic disadvantage (maybe for example, it shows the values 0, 4, and 6 which were removed when we reached 6), and wish to have a "static" array that will iterate even in modified objects, just call getTable() in rewind() method and save it in temporary (private perhaps) field. In my example getTable() is called every iteration, and it calls another foreach through $allValues, which together might be time-consuming. Consider what you need.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106971""></a>
  <div class="note">
   <strong class="user">nobody at nobody dot com</strong>
   <a href="#106971" class="date">22-Dec-2011 10:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
$d3 </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">=&gt;array(</span><span class="string">'b'</span><span class="keyword">=&gt;</span><span class="string">'c'</span><span class="keyword">));<br />
foreach(</span><span class="default">$d3</span><span class="keyword">[</span><span class="string">'a'</span><span class="keyword">] as &amp;</span><span class="default">$v4</span><span class="keyword">){}<br />
foreach(</span><span class="default">$d3 </span><span class="keyword">as </span><span class="default">$v4</span><span class="keyword">){}<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$d3</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>will get something look like this:<br />
array(1) {<br />
&nbsp; ["a"]=&gt;<br />
&nbsp; array(1) {<br />
&nbsp;&nbsp;&nbsp; ["b"]=&gt;<br />
&nbsp;&nbsp;&nbsp; &amp;array(1) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; ["b"]=&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; *RECURSION*<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
}<br />
then you try to walk some data with this array.<br />
the script run out of memory and connect reset by peer<br />
<br />
the document says:<br />
Warning<br />
Reference of a $value and the last array element remain even after the foreach loop. It is recommended to destroy it by unset().<br />
<br />
so what I learn is that NEVER ignore """Warning""" in document....</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104060""></a>
  <div class="note">
   <strong class="user">billardmchl at aol dot com</strong>
   <a href="#104060" class="date">20-May-2011 10:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function find well the words, add well adds a () around short words, but the 
<br />
array at the end of th function is the same as at the beginning.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">isole_mots</span><span class="keyword">(</span><span class="default">$chaine</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$chaine </span><span class="keyword">= </span><span class="string">"le petit chat est fou"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$mots </span><span class="keyword">= </span><span class="default">preg_split</span><span class="keyword">(</span><span class="string">'/[!,-.;?:()[ ]/'</span><span class="keyword">, </span><span class="default">$chaine</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">, </span><span class="default">PREG_SPLIT_NO_EMPTY</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$mots </span><span class="keyword">as </span><span class="default">$mot</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$mot</span><span class="keyword">) &lt;= </span><span class="default">3</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$mot </span><span class="keyword">= </span><span class="string">"("</span><span class="keyword">.</span><span class="default">$mot</span><span class="keyword">.</span><span class="string">")"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; print </span><span class="string">" inside foreach </span><span class="default">$mot</span><span class="string"> &lt;br&gt;"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
print </span><span class="string">"after foreach array mots"</span><span class="keyword">;&nbsp; &nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$mots</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; die();
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$mots</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
inside foreach (le)
<br />
inside foreach petit
<br />
inside foreach chat
<br />
inside foreach (est)
<br />
inside foreach (fou)
<br />
after foreach array motsArray ( [0] =&gt; le [1] =&gt; petit [2] =&gt; chat [3] =&gt; est [4] =&gt; fou )</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99909""></a>
  <div class="note">
   <strong class="user">Oleg englishman at bigmir dot net</strong>
   <a href="#99909" class="date">14-Sep-2010 04:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those who'd like to traverse an array including just added elements (within this very foreach), here's a workaround:
<br />

<br />
<span class="default">&lt;?php
<br />
$values </span><span class="keyword">= array(</span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="string">'a'</span><span class="keyword">, </span><span class="default">2 </span><span class="keyword">=&gt; </span><span class="string">'b'</span><span class="keyword">, </span><span class="default">3 </span><span class="keyword">=&gt; </span><span class="string">'c'</span><span class="keyword">);
<br />
while (list(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) = </span><span class="default">each</span><span class="keyword">(</span><span class="default">$values</span><span class="keyword">)) {
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"</span><span class="default">$key</span><span class="string"> =&gt; </span><span class="default">$value</span><span class="string"> \r\n"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$key </span><span class="keyword">== </span><span class="default">3</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$values</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">] = </span><span class="string">'d'</span><span class="keyword">; 
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$key </span><span class="keyword">== </span><span class="default">4</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$values</span><span class="keyword">[</span><span class="default">5</span><span class="keyword">] = </span><span class="string">'e'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
the code above will output:
<br />

<br />
1 =&gt; a
<br />
2 =&gt; b
<br />
3 =&gt; c
<br />
4 =&gt; d
<br />
5 =&gt; e</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88578""></a>
  <div class="note">
   <strong class="user">tedivm at tedivm dot com</strong>
   <a href="#88578" class="date">29-Jan-2009 11:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
foreach and the while/list/each methods are not completely identical, and there are occasions where one way is beneficial over the other.
<br />

<br />
<span class="default">&lt;?php
<br />
$arr </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">,</span><span class="default">6</span><span class="keyword">,</span><span class="default">7</span><span class="keyword">,</span><span class="default">8</span><span class="keyword">,</span><span class="default">9</span><span class="keyword">);
<br />

<br />
foreach(</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; unset(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$key </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">]);
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$value </span><span class="keyword">. </span><span class="default">PHP_EOL</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>Output:
<br />
1 2 3 4 5 6 7 8 9 
<br />

<br />
<span class="default">&lt;?php
<br />
$arr </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">,</span><span class="default">6</span><span class="keyword">,</span><span class="default">7</span><span class="keyword">,</span><span class="default">8</span><span class="keyword">,</span><span class="default">9</span><span class="keyword">);
<br />

<br />
while (list(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) = </span><span class="default">each</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">))
<br />
{
<br />
&nbsp;&nbsp;&nbsp; unset(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$key </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">]);
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$value </span><span class="keyword">. </span><span class="default">PHP_EOL</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>Output:
<br />
1 3 5 7 9
<br />

<br />

<br />
[EDIT BY danbrown AT php DOT net: Contains a typofix by (scissor AT phplabs DOT pl) on 30-JAN-2009.]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82511""></a>
  <div class="note">
   <strong class="user">adam dot sindelar at gmail dot com</strong>
   <a href="#82511" class="date">14-Apr-2008 03:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can also use the alternative syntax for the foreach cycle:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$element</span><span class="keyword">):
<br />
&nbsp; </span><span class="comment">#do something
<br />
</span><span class="keyword">endforeach;
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Just thought it worth mentioning.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71854""></a>
  <div class="note">
   <strong class="user">simplex</strong>
   <a href="#71854" class="date">19-Dec-2006 09:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
"As of PHP 5, you can easily modify array's elements by preceding $value with &amp;. This will assign reference instead of copying the value."<br />
<br />
There are cases where array_walk or array_map are inadequate (conditional required) or you're just too lazy to write a function and pass values to it for use with array_map...<br />
<br />
My solution to foreach for php 4 and 5 to modify values of an array directly:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$testarr </span><span class="keyword">= array(</span><span class="string">"a" </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">"b" </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">"c" </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">"d" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">);<br />
<br />
</span><span class="default">$testarr_keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$testarr</span><span class="keyword">);<br />
</span><span class="default">$testarr_values </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$testarr</span><span class="keyword">);<br />
<br />
for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$testarr</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$testarr</span><span class="keyword">[</span><span class="default">$testarr_keys</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]] = </span><span class="default">$testarr_values</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] * </span><span class="default">2</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$testarr</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="31455""></a>
  <div class="note">
   <strong class="user">php at electricsurfer dot com</strong>
   <a href="#31455" class="date">22-Apr-2003 10:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
[Ed Note:&nbsp; You can also use array_keys() so that you don't have to have the $value_copy variable --alindeman at php.net]
<br />

<br />
I use the following to modify the original values of the array:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value_copy</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$value </span><span class="keyword">=&amp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; </span><span class="comment">// ...
<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="string">'New Value'</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

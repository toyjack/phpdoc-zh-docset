<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>定义命名空间</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="language.namespaces.rationale.html">? 命名空间概述</a></li>
      <li style="float: right;"><a href="language.namespaces.nested.html">定义子命名空间 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="language.namespaces.html">命名空间</a></li>
    <li>定义命名空间</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="language.namespaces.definition" class="sect1">
  <h2 class="title">定义命名空间</h2>
  <p class="para">
   虽然任意合法的PHP代码都可以包含在命名空间中，但只有三种类型的代码受命名空间的影响，它们是：类，函数和常量。
  </p>
  <p class="para">
   命名空间通过关键字<em>namespace</em>
   来声明。如果一个文件中包含命名空间，它必须在其它所有代码之前声明命名空间。
   <div class="example" id="example-249">
    <p><strong>Example #1 声明单个命名空间</strong></p>
    <div class="example-contents">
     <div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">namespace&nbsp;</span><span style="color: #0000BB">MyProject</span><span style="color: #007700">;<br /><br />const&nbsp;</span><span style="color: #0000BB">CONNECT_OK&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />class&nbsp;</span><span style="color: #0000BB">Connection&nbsp;</span><span style="color: #007700">{&nbsp;</span><span style="color: #FF8000">/*&nbsp;...&nbsp;*/&nbsp;</span><span style="color: #007700">}<br />function&nbsp;</span><span style="color: #0000BB">connect</span><span style="color: #007700">()&nbsp;{&nbsp;</span><span style="color: #FF8000">/*&nbsp;...&nbsp;*/&nbsp;&nbsp;</span><span style="color: #007700">}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
   在声明命名空间之前唯一合法的代码是用于定义源文件编码方式的 <em>declare</em>
   语句。另外，所有非 PHP
   代码包括空白符都不能出现在命名空间的声明之前：
   <div class="example" id="example-250">
    <p><strong>Example #2 声明单个命名空间</strong></p>
    <div class="example-contents">
     <div class="phpcode"><code><span style="color: #000000">
&lt;html&gt;<br /><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">namespace&nbsp;</span><span style="color: #0000BB">MyProject</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;致命错误&nbsp;-　命名空间必须是程序脚本的第一条语句<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   另外，与PHP其它的语言特征不同，同一个命名空间可以定义在多个文件中，即允许将同一个命名空间的内容分割存放在不同的文件中。
  </p>
 </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="115760""></a>
  <div class="note">
   <strong class="user">Najeem M Illyas</strong>
   <a href="#115760" class="date">18-Sep-2014 10:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
While executing the script I am getting error:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">namespace </span><span class="default">SebastianBergmann</span><span class="keyword">\</span><span class="default">Money</span><span class="keyword">;<br />
</span><span class="comment">/**<br />
&nbsp;* Money<br />
&nbsp;*<br />
/<br />
<br />
class MoneyTest extends \PHPUnit_Framework_TestCase<br />
{<br />
&nbsp;&nbsp;&nbsp; /**<br />
&nbsp;&nbsp; <br />
}<br />
<br />
?&gt;<br />
<br />
C:\&gt;phpunit --coverage-html ./report C:\xampp\htdocs\unit<br />
<br />
Fatal error: Namespace declaration statement has to be the very first statement<br />
in the script in C:\xampp\htdocs\unit\MoneyTest.php on line 2<br />
<br />
Call Stack:<br />
&nbsp;&nbsp;&nbsp; 0.0000&nbsp; &nbsp;&nbsp; 124064&nbsp;&nbsp; 1. {main}() C:\xampp\php\phpunit:0<br />
&nbsp;&nbsp;&nbsp; 0.0000&nbsp; &nbsp;&nbsp; 359648&nbsp;&nbsp; 2. PHPUnit_TextUI_Command::main() C:\xampp\php\phpunit:4<br />
6<br />
&nbsp;&nbsp;&nbsp; 0.0000&nbsp; &nbsp;&nbsp; 363064&nbsp;&nbsp; 3. PHPUnit_TextUI_Command-&gt;run() C:\xampp\php\pear\PHPUn<br />
it\TextUI\Command.php:129<br />
&nbsp;&nbsp;&nbsp; 0.0100&nbsp; &nbsp;&nbsp; 542472&nbsp;&nbsp; 4. PHPUnit_Runner_BaseTestRunner-&gt;getTest() C:\xampp\php<br />
\pear\PHPUnit\TextUI\Command.php:150<br />
&nbsp;&nbsp;&nbsp; 0.0100&nbsp; &nbsp;&nbsp; 681336&nbsp;&nbsp; 5. PHPUnit_Framework_TestSuite-&gt;addTestFiles() C:\xampp\<br />
php\pear\PHPUnit\Runner\BaseTestRunner.php:96<br />
&nbsp;&nbsp;&nbsp; 0.0100&nbsp; &nbsp;&nbsp; 681768&nbsp;&nbsp; 6. PHPUnit_Framework_TestSuite-&gt;addTestFile() C:\xampp\p<br />
hp\pear\PHPUnit\Framework\TestSuite.php:416<br />
&nbsp;&nbsp;&nbsp; 0.0200&nbsp; &nbsp;&nbsp; 739488&nbsp;&nbsp; 7. PHPUnit_Util_Fileloader::checkAndLoad() C:\xampp\php\<br />
pear\PHPUnit\Framework\TestSuite.php:355<br />
&nbsp;&nbsp;&nbsp; 0.0200&nbsp; &nbsp;&nbsp; 739600&nbsp;&nbsp; 8. PHPUnit_Util_Fileloader::load() C:\xampp\php\pear\PHP<br />
Unit\Util\Fileloader.php:76<br />
<br />
Here in the error:<br />
Fatal error: Namespace declaration statement has to be the very first statement<br />
in the script in C:\xampp\htdocs\unit\MoneyTest.php on line 2<br />
<br />
There is no error found in the code, but phpunit is throwing the error.</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115504""></a>
  <div class="note">
   <strong class="user">kuzawinski dot marcin at NOSPAM dot gmail dot com</strong>
   <a href="#115504" class="date">06-Aug-2014 06:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If your code looks like this:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">namespace </span><span class="default">NS</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
...and you still get "Namespace declaration statement has to be the very first statement in the script" Fatal error, then you probably use UTF-8 encoding (which is good) with Byte Order Mark, aka BOM (which is bad). Try to convert your files to "UTF-8 without BOM", and it should be ok.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114476""></a>
  <div class="note">
   <strong class="user">Roadowl</strong>
   <a href="#114476" class="date">25-Feb-2014 08:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
quote:<br />
Defining namespaces<br />
<br />
(...)<br />
Namespaces are declared using the namespace keyword. A file containing a namespace must declare the namespace at the top of the file before any other code - with one exception: the declare keyword. <br />
<br />
end quote.<br />
<br />
So we have a title that talks 'defining' and a piece of text that talks 'declare' three times, one of which could be referring to some other 'declare' than the former two.<br />
<br />
Please, documentation authors -- get your act together, finally.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112937""></a>
  <div class="note">
   <strong class="user">FatBat</strong>
   <a href="#112937" class="date">09-Aug-2013 06:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Expanding on @danbettles note, it is better to always be explicit about which constant to use.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">namespace </span><span class="default">NS</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">define</span><span class="keyword">(</span><span class="default">__NAMESPACE__ </span><span class="keyword">.</span><span class="string">'\foo'</span><span class="keyword">,</span><span class="string">'111'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">define</span><span class="keyword">(</span><span class="string">'foo'</span><span class="keyword">,</span><span class="string">'222'</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">foo</span><span class="keyword">;&nbsp; </span><span class="comment">// 111.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo \</span><span class="default">foo</span><span class="keyword">;&nbsp; </span><span class="comment">// 222.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo \</span><span class="default">NS</span><span class="keyword">\</span><span class="default">foo&nbsp; </span><span class="comment">// 111.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="default">NS</span><span class="keyword">\</span><span class="default">foo&nbsp; </span><span class="comment">// fatal error. assumes \NS\NS\foo.<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112319""></a>
  <div class="note">
   <strong class="user">wyattbiker</strong>
   <a href="#112319" class="date">01-Jun-2013 09:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">//Even though you cant add anything before the 1st namespace, you can add something before subsequent namespaces.<br />
</span><span class="keyword">namespace </span><span class="default">MyProject</span><span class="keyword">; <br />
<br />
function </span><span class="default">myfunc</span><span class="keyword">(){<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">1</span><span class="keyword">;<br />
}<br />
echo </span><span class="default">myfunc</span><span class="keyword">();<br />
</span><span class="default">?&gt;<br />
</span>&lt;p&gt;Here I can add stuff before the 2nd namespace&lt;/p&gt;<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">namespace </span><span class="default">MyProject2</span><span class="keyword">; <br />
<br />
function </span><span class="default">myfunc</span><span class="keyword">(){<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">2</span><span class="keyword">;<br />
}<br />
echo </span><span class="default">myfunc</span><span class="keyword">();<br />
</span><span class="default">?&gt;<br />
</span>&lt;p&gt;Switch back to first namespace&lt;/p&gt;<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">namespace </span><span class="default">MyProject</span><span class="keyword">;<br />
echo </span><span class="default">myfunc</span><span class="keyword">();<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93882""></a>
  <div class="note">
   <strong class="user">huskyr at gmail dot com</strong>
   <a href="#93882" class="date">05-Oct-2009 01:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
"A file containing a namespace must declare the namespace at the top of the file before any other code"
<br />

<br />
It might be obvious, but this means that you *can* include comments and white spaces before the namespace keyword.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">// Lots 
<br />
// of
<br />
// interesting
<br />
// comments and white space
<br />

<br />
</span><span class="keyword">namespace </span><span class="default">Foo</span><span class="keyword">;
<br />
class </span><span class="default">Bar </span><span class="keyword">{
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92212""></a>
  <div class="note">
   <strong class="user">jeremeamia at gmail dot com</strong>
   <a href="#92212" class="date">14-Jul-2009 05:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You should not try to create namespaces that use PHP keywords. These will cause parse errors. 
<br />

<br />
Examples:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">namespace </span><span class="default">Project</span><span class="keyword">/</span><span class="default">Classes</span><span class="keyword">/Function; </span><span class="comment">// Causes parse errors
<br />
</span><span class="keyword">namespace </span><span class="default">Project</span><span class="keyword">/Abstract/</span><span class="default">Factory</span><span class="keyword">; </span><span class="comment">// Causes parse errors
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90283""></a>
  <div class="note">
   <strong class="user">danbettles at yahoo dot co dot uk</strong>
   <a href="#90283" class="date">14-Apr-2009 09:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Regarding constants defined with define() inside namespaces...<br />
<br />
define() will define constants exactly as specified.&nbsp; So, if you want to define a constant in a namespace, you will need to specify the namespace in your call to define(), even if you're calling define() from within a namespace.&nbsp; The following examples will make it clear.<br />
<br />
The following code will define the constant "MESSAGE" in the global namespace (i.e. "\MESSAGE").<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">namespace </span><span class="default">test</span><span class="keyword">;<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">'MESSAGE'</span><span class="keyword">, </span><span class="string">'Hello world!'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
The following code will define two constants in the "test" namespace.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">namespace </span><span class="default">test</span><span class="keyword">;<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">'test\HELLO'</span><span class="keyword">, </span><span class="string">'Hello world!'</span><span class="keyword">);<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="default">__NAMESPACE__ </span><span class="keyword">. </span><span class="string">'\GOODBYE'</span><span class="keyword">, </span><span class="string">'Goodbye cruel world!'</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85589""></a>
  <div class="note">
   <strong class="user">David Drakard</strong>
   <a href="#85589" class="date">07-Sep-2008 02:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I agree with SR, the new namespaces feature has solved a number of problems for me which would have required horrible coding to solve otherwise.<br />
<br />
An example use:<br />
Say you are making a small script, and write a class to connect to a database, calling it 'connection'. If you find your script useful and gradually expand it into a large application, you may want to rename the class. Without namespaces, you have to change the name and every reference to it (say in inheriting objects), possibly creating a load of bugs. With namespaces you can drop the related classes into a namespace with one line of code, and less chance of errors.<br />
<br />
This is by no means one of the biggest problems namespaces solve; I would suggest reading about their advantages before citicising them. They provide an elegant solutions to several problems involved in creating complex systems.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83194""></a>
  <div class="note">
   <strong class="user">Baptiste</strong>
   <a href="#83194" class="date">14-May-2008 09:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is nothing wrong with PHP namespaces, except that those 2 instructions give a false impression of package management.<br />
... while they just correspond to the "with()" instruction of Javascript.<br />
<br />
By contrast, a package is a namespace for its members, but it offers more (like deployment facilities), and a compiler knows exactly what classes are in a package, and where to find them.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82222""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#82222" class="date">01-Apr-2008 08:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
@ RS: Also, you can specify how your __autoload() function looks for the files. That way another users namespace classes cannot overwrite yours unless they replace your file specifically.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

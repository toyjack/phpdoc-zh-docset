<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>流程控制的替代语法</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="control-structures.elseif.html">? elseif/else if</a></li>
      <li style="float: right;"><a href="control-structures.while.html">while ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="language.control-structures.html">流程控制</a></li>
    <li>流程控制的替代语法</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="control-structures.alternative-syntax" class="sect1">
 <h2 class="title">流程控制的替代语法</h2>
 <p class="verinfo">(PHP 4, PHP 5, PHP 7)</p>
 <p class="para">
  PHP 提供了一些流程控制的替代语法，包括
  <em>if</em>，<em>while</em>，<em>for</em>，<em>foreach</em>
  和 <em>switch</em>。替代语法的基本形式是把左花括号（{）换成冒号（:），把右花括号（}）分别换成
  <em>endif;</em>，<em>endwhile;</em>，<em>endfor;</em>，<em>endforeach;</em>
  以及 <em>endswitch;</em>。
  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">):&nbsp;</span><span style="color: #0000BB">?&gt;<br /></span>A&nbsp;is&nbsp;equal&nbsp;to&nbsp;5<br /><span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #007700">endif;&nbsp;</span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </p>
 <p class="simpara">
  在上面的例子中，HTML 内容"A is equal to 5"用替代语法嵌套在
  <em>if</em> 语句中。该 HTML 的内容仅在
  <var class="varname"><var class="varname">$a</var></var> 等于 5 时显示。
 </p>
 <p class="para">
  替代语法同样可以用在 <em>else</em> 和
  <em>elseif</em> 中。下面是一个包括
  <em>elseif</em> 和 <em>else</em>
  的 <em>if</em> 结构用替代语法格式写的例子：
  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">):<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"a&nbsp;equals&nbsp;5"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"..."</span><span style="color: #007700">;<br />elseif&nbsp;(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">6</span><span style="color: #007700">):<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"a&nbsp;equals&nbsp;6"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"!!!"</span><span style="color: #007700">;<br />else:<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"a&nbsp;is&nbsp;neither&nbsp;5&nbsp;nor&nbsp;6"</span><span style="color: #007700">;<br />endif;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </p>
 <blockquote class="note"><p><strong class="note">Note</strong>: 
  <p class="para">
   不支持在同一个控制块内混合使用两种语法。
  </p>
 </p></blockquote>
 <p class="para">
  更多例子参见 <a href="control-structures.while.html" class="link">while</a>，<a href="control-structures.for.html" class="link">for</a> 和
  <a href="control-structures.if.html" class="link">if</a>。
 </p>
</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="114783""></a>
  <div class="note">
   <strong class="user">v14t at gmx dot com</strong>
   <a href="#114783" class="date">06-Apr-2014 11:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
isset( $value ) AND print( $value );<br />
<br />
the reason why it doesn't work with echo, it's because echo does not return anything, while print _always_ returns 1, which is considered true in the expression</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114555""></a>
  <div class="note">
   <strong class="user">josh at qaribou dot com</strong>
   <a href="#114555" class="date">06-Mar-2014 07:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The reason temec987's approach of using boolean operators as an alternative to control structures won't work for an 'echo' is because the result of evaluating the expression will always be a boolean.<br />
<br />
Other languages (e.g. ruby) are much better suited to this approach, as the expression evaluated will be the resultant value, e.g.:<br />
5 &amp;&amp; 4<br />
<br />
In ruby, this would be 4, but in PHP, this would be true (type-juggled equivalent is 1), which isn't useful for anything but further binary logic.<br />
<br />
You can still use logical operators as conditionals, but only for executing logic, not for getting a value back, e.g.:<br />
<span class="default">&lt;?php<br />
defined</span><span class="keyword">(</span><span class="string">'USER_CAN_EXECUTE'</span><span class="keyword">) or die(</span><span class="string">'Access denied.'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
is a nice one to use for access control, or say you want to put in a quick check that your object has all the data loaded it needs to call a webservice (functions are just examples):<br />
<span class="default">&lt;?php<br />
$this</span><span class="keyword">-&gt;</span><span class="default">readyForService</span><span class="keyword">() and </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">postData</span><span class="keyword">(</span><span class="string">'<a href="http://endpoint.com" rel="nofollow" target="_blank">http://endpoint.com</a>'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
What you can't use them for is something like this:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">echo (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$mystring</span><span class="keyword">) &gt; </span><span class="default">5</span><span class="keyword">) and </span><span class="default">$mystring</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
instead, you'd use ternaries for that:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">echo (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$mystring</span><span class="keyword">) &gt; </span><span class="default">5</span><span class="keyword">) ? </span><span class="default">$mystring </span><span class="keyword">: </span><span class="default">null</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113902""></a>
  <div class="note">
   <strong class="user">timeroot dot alex at gmail dot com</strong>
   <a href="#113902" class="date">16-Dec-2013 09:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The reason for the "workaround" jeremiah mentioned, in the case of the switch statement, can be understood as follows; in any place where you can have an echo statement (an if block, a switch's case, whatever), that's where you can have the raw HTML. In PHP this basically gets handled just like that -- like an echo statement. <br />
<br />
In between a switch and a case, though, you can't echo anything. By placing the switch and the case in two separate blocks of PHP, with a raw HTML newline echo'ed in between them, PHP basically had to try to find where that statement would be. And it can't be there, hence the difficulty.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106012""></a>
  <div class="note">
   <strong class="user">temec987 at gmail dot com</strong>
   <a href="#106012" class="date">03-Oct-2011 04:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A simple alternative to an if statement, which is almost like a ternary operator, is the use of AND. Consider the following:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp; $value </span><span class="keyword">= </span><span class="string">'Jesus'</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; </span><span class="comment">// This is a simple if statement<br />
&nbsp;&nbsp; &nbsp; </span><span class="keyword">if( isset( </span><span class="default">$value </span><span class="keyword">) )<br />
&nbsp;&nbsp; &nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; print </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; print </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; </span><span class="comment">// This is an alternative<br />
&nbsp;&nbsp; &nbsp; </span><span class="keyword">isset( </span><span class="default">$value </span><span class="keyword">) AND print( </span><span class="default">$value </span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
This does not work with echo() for some reason. I find this extremely useful!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91167""></a>
  <div class="note">
   <strong class="user">ej at iconcept dot fo</strong>
   <a href="#91167" class="date">28-May-2009 02:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if statement in 1 line<br />
<span class="default">&lt;?php<br />
$hour </span><span class="keyword">= </span><span class="default">11</span><span class="keyword">;<br />
<br />
print </span><span class="default">$foo </span><span class="keyword">= (</span><span class="default">$hour </span><span class="keyword">&lt; </span><span class="default">12</span><span class="keyword">) ? </span><span class="string">"Good morning!" </span><span class="keyword">: </span><span class="string">"Good afternoon!"</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;<br />
</span>return Good morning!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89860""></a>
  <div class="note">
   <strong class="user">flyingmana</strong>
   <a href="#89860" class="date">26-Mar-2009 10:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It seems to me, that many people think that<br />
<br />
<span class="default">&lt;?php </span><span class="keyword">if (</span><span class="default">$a </span><span class="keyword">== </span><span class="default">5</span><span class="keyword">): </span><span class="default">?&gt;<br />
</span>A ist gleich 5<br />
<span class="default">&lt;?php </span><span class="keyword">endif; </span><span class="default">?&gt;<br />
</span><br />
is only with alternate syntax possible, but <br />
<br />
<span class="default">&lt;?php </span><span class="keyword">if (</span><span class="default">$a </span><span class="keyword">== </span><span class="default">5</span><span class="keyword">){ </span><span class="default">?&gt;<br />
</span>A ist gleich 5<br />
<span class="default">&lt;?php </span><span class="keyword">}; </span><span class="default">?&gt;<br />
</span><br />
is also possible.<br />
<br />
alternate syntax makes the code only clearer and easyer to read</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80668""></a>
  <div class="note">
   <strong class="user">jeremia at gmx dot at</strong>
   <a href="#80668" class="date">28-Jan-2008 03:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you wan't to use the alternative syntax for switch statements this won't work:<br />
<br />
&lt;div&gt;<br />
<span class="default">&lt;?php </span><span class="keyword">switch(</span><span class="default">$variable</span><span class="keyword">): </span><span class="default">?&gt;<br />
&lt;?php </span><span class="keyword">case </span><span class="default">1</span><span class="keyword">: </span><span class="default">?&gt;<br />
</span>&lt;div&gt;<br />
Newspage<br />
&lt;/div&gt;<br />
<span class="default">&lt;?php </span><span class="keyword">break;</span><span class="default">?&gt;<br />
&lt;?php </span><span class="keyword">case </span><span class="default">2</span><span class="keyword">: </span><span class="default">?&gt;<br />
</span>&lt;/div&gt;<br />
Forum<br />
&lt;div&gt;<br />
<span class="default">&lt;?php </span><span class="keyword">break;</span><span class="default">?&gt;<br />
&lt;?php </span><span class="keyword">endswitch;</span><span class="default">?&gt;<br />
</span>&lt;/div&gt;<br />
<br />
Instead you have to workaround like this:<br />
<br />
&lt;div&gt;<br />
<span class="default">&lt;?php </span><span class="keyword">switch(</span><span class="default">$variable</span><span class="keyword">): <br />
case </span><span class="default">1</span><span class="keyword">: </span><span class="default">?&gt;<br />
</span>&lt;div&gt;<br />
Newspage<br />
&lt;/div&gt;<br />
<span class="default">&lt;?php </span><span class="keyword">break;</span><span class="default">?&gt;<br />
&lt;?php </span><span class="keyword">case </span><span class="default">2</span><span class="keyword">: </span><span class="default">?&gt;<br />
</span>&lt;/div&gt;<br />
Forum<br />
&lt;div&gt;<br />
<span class="default">&lt;?php </span><span class="keyword">break;</span><span class="default">?&gt;<br />
&lt;?php </span><span class="keyword">endswitch;</span><span class="default">?&gt;<br />
</span>&lt;/div&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54206""></a>
  <div class="note">
   <strong class="user">skippy at zuavra dot net</strong>
   <a href="#54206" class="date">27-Jun-2005 01:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If it needs saying, this alternative syntax is excellent for improving legibility (for both PHP and HTML!) in situations where you have a mix of them.<br />
<br />
Interface templates are very often in need of this, especially since the PHP code in them is usually written by one person (who is more of a programmer) and the HTML gets modified by another person (who is more of a web designer). Clear separation in such cases is extremely useful.<br />
<br />
See the default templates that come with WordPress 1.5+ (www.wordpress.org) for practical and smart examples of this alternative syntax.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

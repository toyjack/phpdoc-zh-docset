<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Open image file</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.pdf-load-iccprofile.html">? PDF_load_iccprofile</a></li>
      <li style="float: right;"><a href="function.pdf-makespotcolor.html">PDF_makespotcolor ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.pdf.html">PDF º¯Êý</a></li>
    <li>Open image file</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.pdf-load-image" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">PDF_load_image</h1>
  <p class="verinfo">(PECL pdflib &gt;= 2.0.0)</p><p class="refpurpose"><span class="refname">PDF_load_image</span> &mdash; <span class="dc-title">Open image file</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.pdf-load-image-description">
  <h3 class="title">ËµÃ÷</h3>
   <div class="methodsynopsis dc-description">
    <span class="type">int</span> <span class="methodname"><strong>PDF_load_image</strong></span>
     ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$pdfdoc</code></span>
    , <span class="methodparam"><span class="type">string</span> <code class="parameter">$imagetype</code></span>
    , <span class="methodparam"><span class="type">string</span> <code class="parameter">$filename</code></span>
    , <span class="methodparam"><span class="type">string</span> <code class="parameter">$optlist</code></span>
    )</div>

  <p class="para rdfs-comment">
   Opens a disk-based or virtual image file subject to various options.
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="73831""></a>
  <div class="note">
   <strong class="user">klassen dot tony at gmail dot com</strong>
   <a href="#73831" class="date">12-Mar-2007 03:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've had a difficult time trying to load images to the pdf with pdflib, and tried many examples. I came across this one and it actually works for me in IE and Firefox. I hope this can be of some help to someone.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $searchpath </span><span class="keyword">= </span><span class="string">"path/to/image/dir"</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$p </span><span class="keyword">= new </span><span class="default">PDFlib</span><span class="keyword">(); <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">set_parameter</span><span class="keyword">(</span><span class="string">"errorpolicy"</span><span class="keyword">, </span><span class="string">"return"</span><span class="keyword">); </span><span class="comment">// check return values of load_font() etc.<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">set_parameter</span><span class="keyword">(</span><span class="string">"hypertextencoding"</span><span class="keyword">, </span><span class="string">"winansi"</span><span class="keyword">); </span><span class="comment">// used to prevent problems with japanese systems<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">set_parameter</span><span class="keyword">(</span><span class="string">"SearchPath"</span><span class="keyword">, </span><span class="default">$searchpath</span><span class="keyword">); </span><span class="comment">// **set search path parameter in pdf<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">begin_document</span><span class="keyword">(</span><span class="string">""</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">) == </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; die(</span><span class="string">"Error: " </span><span class="keyword">. </span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">get_errmsg</span><span class="keyword">());<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; </span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">set_info</span><span class="keyword">(</span><span class="string">"Creator"</span><span class="keyword">, </span><span class="string">" the creator"</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">set_info</span><span class="keyword">(</span><span class="string">"Author"</span><span class="keyword">, </span><span class="string">" you "</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">set_info</span><span class="keyword">(</span><span class="string">"Title"</span><span class="keyword">, </span><span class="string">" imageInsert "</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">begin_page_ext</span><span class="keyword">(</span><span class="default">612</span><span class="keyword">, </span><span class="default">792</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">);&nbsp; </span><span class="comment">// declare page with standard letter size<br />
&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$certLogo </span><span class="keyword">= </span><span class="string">"stamp.jpg"</span><span class="keyword">;&nbsp; </span><span class="comment">// your image name<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$image </span><span class="keyword">= </span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">load_image</span><span class="keyword">(</span><span class="string">"auto"</span><span class="keyword">, </span><span class="default">$certLogo</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">); <br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">$image</span><span class="keyword">) {&nbsp; &nbsp; die(</span><span class="string">"Error: " </span><span class="keyword">. </span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">get_errmsg</span><span class="keyword">());&nbsp; &nbsp; }&nbsp; <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">fit_image</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">390</span><span class="keyword">,</span><span class="default">575</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">); </span><span class="comment">//place image within page coordinates<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">close_image</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// close resource<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">end_page_ext</span><span class="keyword">(</span><span class="string">""</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; </span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">end_document</span><span class="keyword">(</span><span class="string">""</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; </span><span class="default">$data </span><span class="keyword">= </span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">get_buffer</span><span class="keyword">();<br />
&nbsp;&nbsp; </span><span class="default">$len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-type: application/pdf"</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-Length: </span><span class="default">$len</span><span class="string">"</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-Disposition: inline; filename=hello.pdf"</span><span class="keyword">);<br />
&nbsp;&nbsp; print </span><span class="default">$data</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; </span><span class="default">$p </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="65989""></a>
  <div class="note">
   <strong class="user">Mike Zmuda</strong>
   <a href="#65989" class="date">11-May-2006 03:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This program takes a picture from a dynamic image selector (ie: banner ad selector software, or whatever,) and inserts it into your pdf.<br />
<br />
You can use something like this to insert coupons on PDFs (such as register receipts, bills, receipts, etc...) just like they do at the supermarket checkout!<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//Set up a document (PHP5 standard.)<br />
</span><span class="default">$p </span><span class="keyword">= new </span><span class="default">PDFlib</span><span class="keyword">();<br />
if (</span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">begin_document</span><span class="keyword">(</span><span class="string">""</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">) == </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; die(</span><span class="string">"Error: " </span><span class="keyword">. </span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">get_errmsg</span><span class="keyword">());<br />
}<br />
</span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">set_info</span><span class="keyword">(</span><span class="string">"Creator"</span><span class="keyword">, </span><span class="string">"Homer"</span><span class="keyword">);<br />
</span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">set_info</span><span class="keyword">(</span><span class="string">"Author"</span><span class="keyword">, </span><span class="string">"Lisa"</span><span class="keyword">);<br />
</span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">set_info</span><span class="keyword">(</span><span class="string">"Title"</span><span class="keyword">, </span><span class="string">"Simpsons Image"</span><span class="keyword">);<br />
</span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">begin_page_ext</span><span class="keyword">(</span><span class="default">612</span><span class="keyword">, </span><span class="default">792</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">); </span><span class="comment">// This is letter.<br />
<br />
//Open the url for the image server we wish to use.<br />
//&nbsp; &nbsp;&nbsp; (When I say "Image Server," I mean any program or <br />
//&nbsp; &nbsp;&nbsp; script which will render image data as output. That<br />
//&nbsp; &nbsp;&nbsp; means that it has to output the raw data, unmodified,<br />
//&nbsp; &nbsp;&nbsp; such that it could be accessed like this in a standard<br />
//&nbsp; &nbsp;&nbsp; html instruction call:<br />
//<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &lt;img src="<a href="http://site.com/getimg.php?pic=18" rel="nofollow" target="_blank">http://site.com/getimg.php?pic=18</a>"&gt;<br />
//<br />
//&nbsp; &nbsp;&nbsp; If it adds border or other text, the data will be<br />
//&nbsp; &nbsp;&nbsp; corrupted, and thus cause the pdf to misrender.<br />
</span><span class="keyword">if (</span><span class="default">$stream </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">'<a href="http://site.com/getimg.php?pic=18" rel="nofollow" target="_blank">http://site.com/getimg.php?pic=18</a>'</span><span class="keyword">, </span><span class="string">'r'</span><span class="keyword">)) {<br />
&nbsp;&nbsp; </span><span class="default">$MyImage</span><span class="keyword">= </span><span class="default">stream_get_contents</span><span class="keyword">(</span><span class="default">$stream</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$stream</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="comment">//First, create a PDF Virtual File (PVF) out of our data...<br />
</span><span class="default">$pvf_filename </span><span class="keyword">= </span><span class="string">"/pvf/image/image1.jpg"</span><span class="keyword">;<br />
</span><span class="comment">//and store the $MyImage data (picture data from above)<br />
//&nbsp; &nbsp; in it!<br />
</span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">create_pvf</span><span class="keyword">(</span><span class="default">$pvf_filename</span><span class="keyword">,</span><span class="default">$MyImage</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">);<br />
</span><span class="comment">//Load the image from the PVF into, er, uh, ram..., and, uh...<br />
</span><span class="default">$image </span><span class="keyword">= </span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">load_image</span><span class="keyword">(</span><span class="string">"jpeg"</span><span class="keyword">, </span><span class="default">$pvf_filename</span><span class="keyword">,</span><span class="string">""</span><span class="keyword">);<br />
</span><span class="comment">//Put it on the screen! :)<br />
</span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">fit_image</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">100</span><span class="keyword">,</span><span class="default">500</span><span class="keyword">,</span><span class="string">"boxsize {100 100} position 50 fitmethod meet"</span><span class="keyword">);<br />
</span><span class="comment">//Be cool and clean up after yourself...<br />
</span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">delete_pvf</span><span class="keyword">(</span><span class="default">$pvf_filename</span><span class="keyword">);<br />
<br />
</span><span class="comment">//And... Render!<br />
</span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">end_page_ext</span><span class="keyword">(</span><span class="string">""</span><span class="keyword">);<br />
</span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">end_document</span><span class="keyword">(</span><span class="string">""</span><span class="keyword">);<br />
</span><span class="default">$buf </span><span class="keyword">= </span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">get_buffer</span><span class="keyword">();<br />
</span><span class="default">$len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$buf</span><span class="keyword">);<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-type: application/pdf"</span><span class="keyword">);<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-Length: </span><span class="default">$len</span><span class="string">"</span><span class="keyword">);<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-Disposition: inline; filename=urlImageTest.pdf"</span><span class="keyword">);<br />
print </span><span class="default">$buf</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="62826""></a>
  <div class="note">
   <strong class="user">Nicolas Padfield nicolasatpadfielddotdk</strong>
   <a href="#62826" class="date">10-Mar-2006 01:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Example use of&nbsp; PDF_load_image():<br />
<br />
<span class="default">&lt;?php<br />
$pdf </span><span class="keyword">= </span><span class="default">PDF_new</span><span class="keyword">();<br />
</span><span class="default">PDF_open_file</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">);<br />
</span><span class="default">PDF_begin_page</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">,</span><span class="default">595</span><span class="keyword">,</span><span class="default">842</span><span class="keyword">);<br />
</span><span class="default">$image </span><span class="keyword">= </span><span class="default">PDF_load_image</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">,</span><span class="string">"png"</span><span class="keyword">,</span><span class="string">"myimage.png"</span><span class="keyword">,</span><span class="string">""</span><span class="keyword">);<br />
</span><span class="default">PDF_place_image</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">,</span><span class="default">$image</span><span class="keyword">,</span><span class="default">64</span><span class="keyword">,</span><span class="default">26</span><span class="keyword">,</span><span class="default">.24</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
If you want something that is more free for commercial use, open source and does not require compiling, you could look at for example <a href="http://www.fpdf.org in stead of PDFlib" rel="nofollow" target="_blank">http://www.fpdf.org in stead of PDFlib</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

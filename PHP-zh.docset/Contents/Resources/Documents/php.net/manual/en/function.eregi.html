<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>不区分大小写的正则表达式匹配</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.eregi-replace.html">? eregi_replace</a></li>
      <li style="float: right;"><a href="function.split.html">split ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.regex.html">POSIX Regex 函数</a></li>
    <li>不区分大小写的正则表达式匹配</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.eregi" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">eregi</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">eregi</span> &mdash; <span class="dc-title">不区分大小写的正则表达式匹配</span></p>

 </div>
 <div class="refsect1 unknown-unknown-unknown-unknown-seealss" id="refsect1-function.eregi-unknown-unknown-unknown-unknown-seealss">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><strong>eregi</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$pattern</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$string</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter reference">&$regs</code></span>
  ] )</div>

  <p class="para rdfs-comment">
   本函数和 <span class="function"><a href="function.ereg.html" class="function">ereg()</a></span>
   完全相同，只除了在匹配字母字符时忽略大小写的区别。
  </p>
  <p class="para">
   <div class="example" id="example-4843">
    <p><strong>Example #1 <span class="function"><strong>eregi()</strong></span> 例子</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$string&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'XYZ'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">eregi</span><span style="color: #007700">(</span><span style="color: #DD0000">'z'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$string</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"'</span><span style="color: #0000BB">$string</span><span style="color: #DD0000">'&nbsp;contains&nbsp;a&nbsp;'z'&nbsp;or&nbsp;'Z'!"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   参见 <span class="function"><a href="function.ereg.html" class="function">ereg()</a></span>，<span class="function"><a href="function.ereg-replace.html" class="function">ereg_replace()</a></span>，<span class="function"><a href="function.eregi-replace.html" class="function">eregi_replace()</a></span>，<span class="function"><a href="function.stripos.html" class="function">stripos()</a></span>
   和 <span class="function"><a href="function.stristr.html" class="function">stristr()</a></span>。
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="97334""></a>
  <div class="note">
   <strong class="user">info at o08 dot com</strong>
   <a href="#97334" class="date">15-Apr-2010 06:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
because eregi is not recommended after php 5, you can replaced it with stristr if just for simple search.<br />
<br />
For editors with regular express function:<br />
eregi\(([^,]*),([^)]*)\)<br />
stristr(\2,\1)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88850""></a>
  <div class="note">
   <strong class="user">julia_kean25 at yahoo dot com</strong>
   <a href="#88850" class="date">10-Feb-2009 11:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I use this in my app_config.php file to sanitize each request:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// app_config.php<br />
<br />
&nbsp;&nbsp;&nbsp; /**<br />
&nbsp;&nbsp;&nbsp; *&nbsp; &nbsp; SANITIZE REQUEST<br />
&nbsp;&nbsp;&nbsp; */<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">sanitize_request</span><span class="keyword">(</span><span class="default">$methods</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// methods: trim ; addslashes ; stripslashes ; etc...<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // array : $_GET ; $_POST ; etc...<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$methods </span><span class="keyword">as </span><span class="default">$function</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(</span><span class="default">$function</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; if ( ! </span><span class="default">get_magic_quotes_gpc</span><span class="keyword">() )<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$methods </span><span class="keyword">= array(</span><span class="string">'trim'</span><span class="keyword">, </span><span class="string">'addslashes'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_GET </span><span class="keyword">= </span><span class="default">sanitize_request</span><span class="keyword">(</span><span class="default">$methods</span><span class="keyword">, </span><span class="default">$_GET</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_POST </span><span class="keyword">= </span><span class="default">sanitize_request</span><span class="keyword">(</span><span class="default">$methods</span><span class="keyword">, </span><span class="default">$_POST</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_COOKIE </span><span class="keyword">= </span><span class="default">sanitize_request</span><span class="keyword">(</span><span class="default">$methods</span><span class="keyword">, </span><span class="default">$_COOKIE</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_REQUEST </span><span class="keyword">= </span><span class="default">sanitize_request</span><span class="keyword">(</span><span class="default">$methods</span><span class="keyword">, </span><span class="default">$_REQUEST</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
it currently only trims and adds slashes to the request but it would be nice to have the possibility to add the striptags function too.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85709""></a>
  <div class="note">
   <strong class="user">jrgpmaster at gmail dot com</strong>
   <a href="#85709" class="date">13-Sep-2008 10:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a simple way of checking if the visitor if your page is a search engine or a normal person. It does this by checking if the user agent returned by $_SERVER['HTTP_USER_AGENT'] contains one of the keywords search engine's user agents usually contain.<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//check if user is a bot of some sort<br />
</span><span class="keyword">function </span><span class="default">is_bot</span><span class="keyword">()<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$bots </span><span class="keyword">= array(</span><span class="string">'google'</span><span class="keyword">,</span><span class="string">'yahoo'</span><span class="keyword">,</span><span class="string">'msn'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//takes the list above and returns (google)|(yahoo)|(msn)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$regex </span><span class="keyword">= </span><span class="string">'('</span><span class="keyword">.</span><span class="default">implode</span><span class="keyword">(</span><span class="default">$bots</span><span class="keyword">, </span><span class="string">')|('</span><span class="keyword">).</span><span class="string">')'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/*uses the generated regex above to see if those keywords are contained in the user agent variable*/&nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">eregi</span><span class="keyword">(</span><span class="default">$regex</span><span class="keyword">, </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'HTTP_USER_AGENT'</span><span class="keyword">]);<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83806""></a>
  <div class="note">
   <strong class="user">sumit270 at gmail dot com</strong>
   <a href="#83806" class="date">12-Jun-2008 06:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Prevent XXS attack<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Prevent any possible XSS attacks via $_GET.<br />
</span><span class="keyword">foreach (</span><span class="default">$_GET </span><span class="keyword">as </span><span class="default">$check_url</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if ((</span><span class="default">eregi</span><span class="keyword">(</span><span class="string">"&lt;[^&gt;]*script*\"?[^&gt;]*&gt;"</span><span class="keyword">, </span><span class="default">$check_url</span><span class="keyword">)) || (</span><span class="default">eregi</span><span class="keyword">(</span><span class="string">"&lt;[^&gt;]*object*\"?[^&gt;]*&gt;"</span><span class="keyword">, </span><span class="default">$check_url</span><span class="keyword">)) ||<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (</span><span class="default">eregi</span><span class="keyword">(</span><span class="string">"&lt;[^&gt;]*iframe*\"?[^&gt;]*&gt;"</span><span class="keyword">, </span><span class="default">$check_url</span><span class="keyword">)) || (</span><span class="default">eregi</span><span class="keyword">(</span><span class="string">"&lt;[^&gt;]*applet*\"?[^&gt;]*&gt;"</span><span class="keyword">, </span><span class="default">$check_url</span><span class="keyword">)) ||<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (</span><span class="default">eregi</span><span class="keyword">(</span><span class="string">"&lt;[^&gt;]*meta*\"?[^&gt;]*&gt;"</span><span class="keyword">, </span><span class="default">$check_url</span><span class="keyword">)) || (</span><span class="default">eregi</span><span class="keyword">(</span><span class="string">"&lt;[^&gt;]*style*\"?[^&gt;]*&gt;"</span><span class="keyword">, </span><span class="default">$check_url</span><span class="keyword">)) ||<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (</span><span class="default">eregi</span><span class="keyword">(</span><span class="string">"&lt;[^&gt;]*form*\"?[^&gt;]*&gt;"</span><span class="keyword">, </span><span class="default">$check_url</span><span class="keyword">)) || (</span><span class="default">eregi</span><span class="keyword">(</span><span class="string">"\([^&gt;]*\"?[^)]*\)"</span><span class="keyword">, </span><span class="default">$check_url</span><span class="keyword">)) ||<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (</span><span class="default">eregi</span><span class="keyword">(</span><span class="string">"\""</span><span class="keyword">, </span><span class="default">$check_url</span><span class="keyword">))) {<br />
&nbsp;&nbsp;&nbsp; die ();<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
unset(</span><span class="default">$check_url</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83535""></a>
  <div class="note">
   <strong class="user">Jeff Morris</strong>
   <a href="#83535" class="date">30-May-2008 08:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Email Address RegEx -- The Final Frontier?<br />
<br />
Inspired by bobocop's stalwart effort. Cheers for that matey!<br />
<br />
Contrary to most folks' expectation, a quoted @ character is permitted in the<br />
local part of an email address. So strictly speaking bobocop's test result for<br />
'@exam@exam.com' is ...inconclusive?<br />
<br />
The RFC prohibits control characters in the address. So it's no coincidence<br />
that most header-related exploits try to inject control characters into the<br />
fields sent to the server. If we're validating client-side, we need to ensure<br />
user input is restricted to the printable code set. And in the spirit of not<br />
trusting anything inbound, we need to filter again server-side. It's handy<br />
to have the same regex working at both ends.<br />
<br />
My variant of bobocop's regex is listed below. Note the mask for the local<br />
part matches any printable character *excluding the dot*. The dot is reserved<br />
as a label separator. Bobocop's regex enforces that role while ensuring the<br />
local part does not start or end with a dot.<br />
<br />
Outside of the 7-bit ASCII and dot rules, the RFC says 'anything goes' in the<br />
local part. Them's the breaks folks.<br />
<br />
All we need to realise is that our endeavours are limited, and the nearest<br />
we'll get to validating an email address is finding an MX record in DNS.<br />
Whatever, don't go probing mail servers with test emails, you might get more<br />
than you bargained for. That's sp@mmer territory, that is.<br />
If you want to positively vet a mail server, consider running a check against<br />
sbl-xbl.spamhaus.org. Search for the checkdnsrr function page on this site and<br />
read the comments for good info.<br />
<br />
Anyhoo, here's the modded regex builder:<br />
<br />
//the variables<br />
$local&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = '[\x20-\x2D\x2F-\x7E]';<br />
$alnum&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 'a-z0-9';<br />
$domain&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = "([$alnum]([-$alnum]*[$alnum]+)?)";<br />
<br />
//the array<br />
$arr&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = array();<br />
$arr['start']&nbsp; &nbsp; = '^';<br />
$arr['local']&nbsp; &nbsp; = "$local+(\.$local+)*";<br />
$arr['at']&nbsp; &nbsp; &nbsp; &nbsp; = '@';<br />
$arr['domain']&nbsp; &nbsp; = "($domain{1,63}\.)+";<br />
$arr['tld']&nbsp; &nbsp; &nbsp; &nbsp; = "[$alnum]{2,6}";<br />
$arr['end']&nbsp; &nbsp; &nbsp; &nbsp; = '$';<br />
<br />
//the regex<br />
$regex&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = implode('',$arr);<br />
<br />
/**<br />
<br />
$regex evaluates to:<br />
<br />
^[\x20-\x2D\x2F-\x7E]+(\.[\x20-\x2D\x2F-\x7E]+)*@<br />
(([a-z0-9]([-a-z0-9]*[a-z0-9]+)?){1,63}\.)+[a-z0-9]{2,6}$<br />
<br />
(regex split into 2 lines due to line length limits)<br />
<br />
Add virgules front and back for the javascript equivalent.<br />
<br />
I'm running this in an AJAX app right now and it does what it says on the tin.<br />
<br />
If you're uncomfortable with the character length limits on domain and tld<br />
names, change them to taste.<br />
<br />
**/</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82945""></a>
  <div class="note">
   <strong class="user">ted devito</strong>
   <a href="#82945" class="date">03-May-2008 01:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
RE: validate a url<br />
--------------------<br />
based on "ian at hyperborea dot co dot uk" below...<br />
original date: 10-Nov-2004 03:15<br />
<br />
I added a test for http(s?) and ftp as well as a trailing slash on urls that don't specify a page. <br />
<br />
now it allows...<br />
<a href="http://test.com/" rel="nofollow" target="_blank">http://test.com/</a><br />
https://www.test.com<br />
<br />
$domain = "(http(s?):\/\/|ftp:\/\/)*([[:alpha:]][-[:alnum:]]*[[:alnum:]])<br />
&nbsp;&nbsp;&nbsp; (\.[[:alpha:]][-[:alnum:]]*[[:alpha:]])+";<br />
$dir = "(/[[:alpha:]][-[:alnum:]]*[[:alnum:]])*";<br />
$trailingslash&nbsp; = "(\/?)";<br />
$page = "(/[[:alpha:]][-[:alnum:]]*\.[[:alpha:]]{3,5})?";<br />
$getstring = "(\?([[:alnum:]][-_%[:alnum:]]*=[-_%[:alnum:]]+)<br />
&nbsp;&nbsp;&nbsp; (&amp;([[:alnum:]][-_%[:alnum:]]*=[-_%[:alnum:]]+))*)?";<br />
$pattern = "^".$domain.$dir.$trailingslash.$page.$getstring."$";</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80197""></a>
  <div class="note">
   <strong class="user">mbfreight atthe gmail place</strong>
   <a href="#80197" class="date">03-Jan-2008 11:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
keran at kiwi-interactive dot com wrote (5ish years ago) 07-Mar-2003 08:21<br />
<br />
$feedback = "Error: $email isn't a valid mail address!";<br />
return $feedback;<br />
-- and -- <br />
$feedback = "Error: $domain isn't a valid domain!";<br />
return $feedback;<br />
<br />
I've been crushed with patching up XSS and anytime you get user input, it's best to just not show it back to them if possible. The auditor loves throwing these at me: &gt;"&gt;&lt;script&gt;alert(123)&lt;/script&gt;&lt;"&nbsp; in the url, in forms, everywhere. Some looking around and you can find and build an amazing testing string. <br />
<br />
I have found that using htmlentities($user_input) isn't enough, either. There are a few tricks that can help like<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // from <a href="http://us3.php.net/manual/en/function.strip-tags.php" rel="nofollow" target="_blank">http://us3.php.net/manual/en/function.strip-tags.php</a><br />
&nbsp;&nbsp;&nbsp; while($input != strip_tags($input)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $input = strip_tags($input);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
In my case, I'm starting off by testing for &lt;[tag]&gt; as well as keyword() and then do some preg_replace ing.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79671""></a>
  <div class="note">
   <strong class="user">shwetank dot sharma86 at gmail dot com</strong>
   <a href="#79671" class="date">07-Dec-2007 02:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
we define some notficatio for making the Expression for eregi(exp, string)<br />
<br />
so first of all syntax<br />
&nbsp;&nbsp; [ ]&nbsp; this brakit&nbsp; used to define chracters<br />
&nbsp;&nbsp; eg&nbsp; [a-z], [0-9]<br />
&nbsp; { } this brakit used ti define range<br />
&nbsp; eg&nbsp; {1,3} <br />
if you wanna to make a expresion which take which take maximum <br />
three digit no<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "^[0-9]{1,3}$"<br />
<br />
and if make exp for only three digit no than<br />
&nbsp;<br />
&nbsp;&nbsp; &nbsp; &nbsp; "^[0-9]{3}$"<br />
<br />
ok if any problem mail me</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73803""></a>
  <div class="note">
   <strong class="user">c00lways at gmail dot com</strong>
   <a href="#73803" class="date">11-Mar-2007 03:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
hodsfords:<br />
<br />
i love your expression,<br />
and i've came out with a solutions which does not need to set the number of times {1,3} for the domain.<br />
it can accept unlimited number of times, but @ least 1 time .com / .xxx<br />
<br />
$exp = "^[a-z0-9]+[a-z0-9\?\.\+-_]*" . <br />
@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]+$";</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71000""></a>
  <div class="note">
   <strong class="user">m at tthew dot org dot uk</strong>
   <a href="#71000" class="date">07-Nov-2006 11:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This example checks for a valid IP address or CIDR notation address range. (Thanks Walo for just the start I needed.)<br />
<br />
The reg exp is too long to post in the code. It is:<br />
^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}(/[0-9]{1,2}){0,1}$<br />
(substitute for EXPR)<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">checkValidIp</span><span class="keyword">(</span><span class="default">$cidr</span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Checks for a valid IP address or optionally a cidr notation range<br />
&nbsp;&nbsp;&nbsp; // e.g. 1.2.3.4 or 1.2.3.0/24<br />
<br />
&nbsp;&nbsp; </span><span class="keyword">if(!</span><span class="default">eregi</span><span class="keyword">(</span><span class="string">"EXPR"</span><span class="keyword">, </span><span class="default">$cidr</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$return </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$return </span><span class="keyword">= </span><span class="default">TRUE</span><span class="keyword">;<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if ( </span><span class="default">$return </span><span class="keyword">== </span><span class="default">TRUE </span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$parts </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"/"</span><span class="keyword">, </span><span class="default">$cidr</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ip </span><span class="keyword">= </span><span class="default">$parts</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$netmask </span><span class="keyword">= </span><span class="default">$parts</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$octets </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"."</span><span class="keyword">, </span><span class="default">$ip</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach ( </span><span class="default">$octets </span><span class="keyword">AS </span><span class="default">$octet </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$octet </span><span class="keyword">&gt; </span><span class="default">255 </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( ( </span><span class="default">$netmask </span><span class="keyword">!= </span><span class="string">"" </span><span class="keyword">) &amp;&amp; ( </span><span class="default">$netmask </span><span class="keyword">&gt; </span><span class="default">32 </span><span class="keyword">) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$return</span><span class="keyword">;<br />
<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69582""></a>
  <div class="note">
   <strong class="user">benjohnson{-at-}maine{-dot-}rr{-dot-}com</strong>
   <a href="#69582" class="date">11-Sep-2006 11:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It's probably worth noting that eregi() (and most likely, the related variations) appears to have a 255-character limit with respect to the length of the input it will attempt to parse.<br />
<br />
If you try to do something like<br />
<br />
if (!eregi("^[a-zA-Z0-9]{0,256}$", $text)) { ...<br />
<br />
eregi() will return FALSE, irrespective of whether or not the input matches the pattern.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68593""></a>
  <div class="note">
   <strong class="user">markus dot sipila at no dot spam dot iki dot fi dot invalid</strong>
   <a href="#68593" class="date">02-Aug-2006 11:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
One more comment about email validation and usability of validators.<br />
<br />
The fact that RFC 2822 allows broader set of characters in email addresses than typically used makes things quite challenging usability wise. <br />
<br />
A very common usability problem with email validators is that they do not accept all valid addresses (such as foo{bar}.baz!@example.com. Almost as&nbsp; common problem is that the validator only checks that the syntax is valid and passes addresses like foo#@example.com without any warning. Even though foo#@example.com is syntactically valid it might just as well be a typo of foo@example.com.<br />
<br />
I resolved this usability challenge by doing the validation in two phases. In the first phase the address is validated so that it can't include exotic characters like { or |. Most addresses pass this validation. <br />
<br />
If they don't, they are validated with the other validator that allows all RFC-compliant addresses. In this case the validator shows a message that the address is syntactically valid but it recommends to double check it for typos.<br />
<br />
An example without regexps:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if (</span><span class="default">eregi</span><span class="keyword">(</span><span class="default">$normal</span><span class="keyword">, </span><span class="default">$email</span><span class="keyword">)) {<br />
&nbsp; echo(</span><span class="string">"The address </span><span class="default">$email</span><span class="string"> is valid and looks normal."</span><span class="keyword">);<br />
}<br />
<br />
else if (</span><span class="default">eregi</span><span class="keyword">(</span><span class="default">$validButRare</span><span class="keyword">, </span><span class="default">$email</span><span class="keyword">)) {<br />
&nbsp; echo(</span><span class="string">"The address </span><span class="default">$email</span><span class="string"> looks a bit strange but it is syntactically valid. You might want to check it for typos."</span><span class="keyword">);<br />
}<br />
<br />
else {<br />
&nbsp; echo(</span><span class="string">"The address </span><span class="default">$email</span><span class="string"> is not valid."</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
The full article with the regexps and demo can be found at <a href="http://www.iki.fi/markus.sipila/pub/emailvalidator.php" rel="nofollow" target="_blank">http://www.iki.fi/markus.sipila/pub/emailvalidator.php</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="65400""></a>
  <div class="note">
   <strong class="user">tim at rocketry dot org</strong>
   <a href="#65400" class="date">30-Apr-2006 06:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The easiest way I've found to validate a properly formed email address is this:<br />
<br />
if(!eregi("^[[:alnum:]][a-z0-9_.-]*@[a-z0-9.-]+\.[a-z]{2,4}$", $_POST['EmailAddress'])) {<br />
&nbsp;&nbsp; &nbsp; echo "&lt;p&gt;Not a valid email address&lt;/p&gt;\n";<br />
}<br />
<br />
It basically just wants to see some alphanumeric characters + an @ sign + a . + 2 to 4 alpha characters. So far it has done what I need for quite a while now.. Hope that helps someone. :)<br />
<br />
Tim</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="61442""></a>
  <div class="note">
   <strong class="user">info at stenschke dot com</strong>
   <a href="#61442" class="date">03-Feb-2006 01:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
i needed a function to find hyperlinks containing a url as text of the hyperlink, exceeding a given maximum length. <br />
here my function to finds too long hyperlinks and insert &lt;br /&gt;s where needed into the linktext:<br />
<br />
&nbsp;&nbsp;&nbsp; function breakTooLongLinks($text,$maxLen) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //find hyperlinks that contain too many chars &amp; insert &lt;br&gt;s where neccessary&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $pattern= '[&gt;]www[.].*/*(.doc|.pdf|.htm|.html|.shtml|.php|.asp)(&lt;/a&gt;|&lt;/A&gt;)';<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $match= eregi($pattern, $text, $regs);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ($match) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach ($regs as $link) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (strlen($link)&gt;$maxLen) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $linkParts= explode('/',$link);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $linkRepl= array(); $replI=0; $curLinkPart='';<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach($linkParts as $linkPart) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $curLinkPart.= $linkPart.'/';<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (strlen($curLinkPart)&gt;$maxLen) { <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $linkRepl[]= $curLinkPart;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $curLinkPart=''; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $linkRepl= implode('&lt;br /&gt;',$linkRepl);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $text= str_replace($link, $linkRepl, $text);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $text;<br />
&nbsp;&nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60453""></a>
  <div class="note">
   <strong class="user">opedroso at swoptimizer dot com</strong>
   <a href="#60453" class="date">07-Jan-2006 02:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I you are trying to match accented characters (e.g. you want to match "Caf? Ol?"), you can use the following regex:<br />
<br />
"[a-z?-? ]+"<br />
<br />
This takes advantage of the fact that in the iso-8859-1 "Latin 1", the "?" is the first accented char and the "?", the last one.<br />
<br />
By the way, the regex above will match this string as a single match:<br />
<br />
"aeiou ????? ????? ????? ?? ? ????? ?"<br />
<br />
Beware that your local code page may include a few more char codes in the range "[?-?]", so it may match more than you expect.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57824""></a>
  <div class="note">
   <strong class="user">Jason Smart knarlin at yahoo dot com dot au</strong>
   <a href="#57824" class="date">15-Oct-2005 07:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There seems to be a lot of confusion about escaping special characters within a bracket expression enclosed in []<br />
<br />
The reference is the regex man page at <a href="http://www.tin.org/bin/man.cgi?section=7&amp;topic=regex , Linked from the " rel="nofollow" target="_blank">http://www.tin.org/bin/man.cgi?section=7&amp;topic=regex , Linked from the </a>"Regular Expression Functions (POSIX Extended)" page in the PHP manual at <a href="http://php.planetmirror.com/manual/en/ref.regex.php" rel="nofollow" target="_blank">http://php.planetmirror.com/manual/en/ref.regex.php</a><br />
<br />
The simple rule is there should be no backslash `\' in a bracket expression unless you are matching it literally.<br />
ALL special characters (the few exceptions are listed below), lose their special significance in a bracket expression.<br />
This includes .[$()|*+?{\ all of which have special meaning outside of a bracket expression, inside they will match LITERALLY!<br />
<br />
The backslash character can never escape anything in a bracket expression including itself! It is always interpreted literally.<br />
<br />
Here are the exceptions<br />
<br />
^ at the start of the bracket expression will match on all but the set of characters within the bracket expression<br />
<br />
- (hyphen) Indicates range, so [a-z] will match a single character in the range a-z (case insensitive for eregi).&nbsp; <br />
&nbsp; To match a literal `-' it must be at the start or end of the bracket expression or the end of a range, or enclosed in [. .] to be the start of a range.<br />
&nbsp; Examples:<br />
&nbsp; [0-9-]<br />
&nbsp; [-0-9]<br />
&nbsp; Both the above will match a single character from the set comprising the digits and hyphen `-'<br />
&nbsp; <br />
&nbsp; [!--] is the same as [!"#$%&amp;'()*+,-]&nbsp; <br />
&nbsp; i.e. it matches a single character from the range of characters from `!' to hyphen `-'<br />
&nbsp; <br />
&nbsp; [[.-.]-9] is the same as [-./0123456789] or [./0123456789-]<br />
&nbsp; and will match a single digit from the range of characters from hyphen `-' to digit 9&nbsp; <br />
<br />
] The closing bracket indicates the end of a bracket expression but not if it immediately follows the opening bracket `[' or `[^' in that case the closing bracket is matched literally.<br />
&nbsp; Examples:<br />
&nbsp; [][0-9] is the same as []0-9[]<br />
&nbsp; and matches a single character from the set of digits and a literal closing bracket `]' and opening bracket `]'<br />
&nbsp; <br />
&nbsp; [^][0-9] is the same as [^]0-9[]<br />
&nbsp; and matches a single character from the group of all characters except the set of digits and literal `]' or `['<br />
<br />
Look at the regex man page for more on the above and the following special cases<br />
<br />
[.characters.]<br />
&nbsp; A collating element<br />
[=characters=]<br />
&nbsp; An equivalence class<br />
[:alnum:]<br />
&nbsp; A character class<br />
&nbsp; <br />
That's it for special cases! ALL other characters match literally within a bracket expression and can never be escaped with `\'<br />
<br />
Here is a list of some of the postings here that have mistakenly tried to use special characters within a bracket expression.<br />
28-Jan-2002 12:56, 09-Feb-2002 06:28, 24-Sep-2002 01:21, 08-Mar-2003 02:21, 11-Apr-2003 03:22 (uses `|' as if it was `or' it is not, it is a literal `|'), 27-Jun-2003 04:03, 06-Sep-2003 07:17, 20-Apr-2004 04:55, 24-Nov-2004 09:12, 25-Nov-2004 02:11, 06-Jan-2005 08:54, 24-Feb-2005 06:05<br />
<br />
It seems people are copying each others mistakes so this needs to be cleared up. Most of the mistakes attempt to escape special characters within a bracket expression with backslash. That never works! A simple fix is to simply remove any backslashes within the bracket expression that are not meant to be matched literally.<br />
<br />
The attempt to use | as 'or' within a bracketed expression should be put in parentheses instead.<br />
<br />
I used a simple script attached to a form to test these results. Here's the script.<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="keyword">if(isset(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'pattern'</span><span class="keyword">]) &amp;&amp; isset(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'teststring'</span><span class="keyword">])) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pattern </span><span class="keyword">= </span><span class="default">stripslashes</span><span class="keyword">(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'pattern'</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$teststring </span><span class="keyword">= </span><span class="default">stripslashes</span><span class="keyword">(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'teststring'</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$match </span><span class="keyword">= </span><span class="default">ereg</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$teststring</span><span class="keyword">, </span><span class="default">$regs</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">$match</span><span class="keyword">) </span><span class="default">$match </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; echo(</span><span class="string">'&lt;p&gt;The regular expression is: '</span><span class="keyword">.</span><span class="default">$pattern</span><span class="keyword">.</span><span class="string">'&lt;/p&gt;'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo(</span><span class="string">'&lt;p&gt;The string for testing is: '</span><span class="keyword">.</span><span class="default">$teststring</span><span class="keyword">.</span><span class="string">'&lt;/p&gt;'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo(</span><span class="string">'&lt;p&gt;The number of matching characters is: '</span><span class="keyword">.</span><span class="default">$match</span><span class="keyword">.</span><span class="string">'&lt;/p&gt;'</span><span class="keyword">);<br />
&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span>Just use a form with input fields named "pattern" and "teststring"<br />
<br />
Hope this helps and clears up some misconceptions<br />
Jason Smart<br />
Monash University Student</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55215""></a>
  <div class="note">
   <strong class="user">manuel at cvam dot com dot ar</strong>
   <a href="#55215" class="date">28-Jul-2005 12:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please note that event though email pattern submitted by bobocop at bobocop dot cz below is RFC compliant, actual domain names are not! <br />
<br />
They do start with numbers (as in 1800flowers.com, etc), so the second line, domain, should be:<br />
<span class="default">&lt;?php<br />
$domain </span><span class="keyword">= </span><span class="string">'([a-z0-9]([-a-z0-9]*[a-z0-9]+)?)'</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span>(everything else just like bobocop's comment from 02-May-2005 11:09)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52692""></a>
  <div class="note">
   <strong class="user">somebody at somewhere dot com</strong>
   <a href="#52692" class="date">10-May-2005 06:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Say you want to validate a random sized string (at least one character though), and make sure it DOESN't contains anything BUT these characters: [:space:]a-zA-Z0-9_.-<br />
<br />
function valid_name($name)<br />
{<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; // return FALSE if it contains characters which <br />
&nbsp;&nbsp; // which ARNT on the specified list<br />
&nbsp;&nbsp; if(ereg('[^[:space:]a-zA-Z0-9_.-]{1,}', $name))<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; return false;<br />
&nbsp;&nbsp; } <br />
&nbsp;&nbsp; else <br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; return true;<br />
&nbsp;&nbsp; }<br />
<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52458""></a>
  <div class="note">
   <strong class="user">bobocop at bobocop dot cz</strong>
   <a href="#52458" class="date">02-May-2005 05:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">// Completely update for match RFC 2822 and RFC 1035<br />
// <a href="http://www.faqs.org/rfcs/rfc2822.html" rel="nofollow" target="_blank">http://www.faqs.org/rfcs/rfc2822.html</a><br />
// <a href="http://www.faqs.org/rfcs/rfc1035.html" rel="nofollow" target="_blank">http://www.faqs.org/rfcs/rfc1035.html</a><br />
<br />
// Example results:<br />
<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'foo@example.com'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// matched<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'foo.bar@example.co.uk'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// matched<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'foo_bar@example.com'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// matched<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'_foo_bar@example.com'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// matched<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'foo@example.example'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// matched<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'%#a+f.*&amp;654_-._@ee.xx'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// matched<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'foo@abc-123.xx'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// matched<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'a@a.a.a.a.aa'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// matched<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'a@a9.aa'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// matched<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'a!b#c$d%e^f&amp;g*h\'i+j-k{l|m}n_/@op.qr'</span><span class="keyword">; </span><span class="comment">//matched<br />
<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">''</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//separator<br />
<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'foo@-example.com'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// not matched<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'foo@example-.com'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// not matched<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'%#af.*&amp;@a%#b.xx'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// not matched<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'a@a.99.00.a.aa'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// not matched<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'_-._@-.--'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// not matched<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'any..thing@bla.bla'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// not matched<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'@.'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// not matched<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'@.com'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// not matched<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'@exam@exam.com'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// not matched<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">' @ .com'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// not matched<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'.bar@example.com'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// not matched<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'foo.@example.com'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// not matched<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'foo@example.x'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// not matched<br />
<br />
</span><span class="default">$atom </span><span class="keyword">= </span><span class="string">'[-a-z0-9!#$%&amp;\'*+/=?^_`{|}~]'</span><span class="keyword">;&nbsp; &nbsp; </span><span class="comment">// allowed characters for part before "at" character<br />
</span><span class="default">$domain </span><span class="keyword">= </span><span class="string">'([a-z]([-a-z0-9]*[a-z0-9]+)?)'</span><span class="keyword">; </span><span class="comment">// allowed characters for part after "at" character<br />
<br />
</span><span class="default">$regex </span><span class="keyword">= </span><span class="string">'^' </span><span class="keyword">. </span><span class="default">$atom </span><span class="keyword">. </span><span class="string">'+' </span><span class="keyword">.&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// One or more atom characters.<br />
</span><span class="string">'(\.' </span><span class="keyword">. </span><span class="default">$atom </span><span class="keyword">. </span><span class="string">'+)*'</span><span class="keyword">.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Followed by zero or more dot separated sets of one or more atom characters.<br />
</span><span class="string">'@'</span><span class="keyword">.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Followed by an "at" character.<br />
</span><span class="string">'(' </span><span class="keyword">. </span><span class="default">$domain </span><span class="keyword">. </span><span class="string">'{1,63}\.)+'</span><span class="keyword">.&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Followed by one or max 63 domain characters (dot separated).<br />
</span><span class="default">$domain </span><span class="keyword">. </span><span class="string">'{2,63}'</span><span class="keyword">.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Must be followed by one set consisting a period of two<br />
</span><span class="string">'$'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// or max 63 domain characters.<br />
<br />
</span><span class="keyword">foreach (</span><span class="default">$email </span><span class="keyword">as </span><span class="default">$example</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$example</span><span class="keyword">) == </span><span class="default">0</span><span class="keyword">):<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'&amp;nbsp;&lt;br&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; else:<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">eregi</span><span class="keyword">(</span><span class="default">$regex</span><span class="keyword">, </span><span class="default">$example</span><span class="keyword">)):<br />
&nbsp;&nbsp; &nbsp; &nbsp; echo </span><span class="default">$example </span><span class="keyword">. </span><span class="string">' matched&lt;br&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; else:<br />
&nbsp;&nbsp; &nbsp; &nbsp; echo </span><span class="string">'&lt;strong&gt;'</span><span class="keyword">. </span><span class="default">$example </span><span class="keyword">. </span><span class="string">' not matched&lt;/strong&gt;&lt;br&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; endif;<br />
&nbsp;&nbsp;&nbsp; endif;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50496""></a>
  <div class="note">
   <strong class="user">Sergio Santana: ssantana at tlaloc dot imta dot mx</strong>
   <a href="#50496" class="date">02-Mar-2005 01:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Sometimes we require checking the syntax of <br />
floating point numbers. Here is a php-code that <br />
performs this task.<br />
<br />
// To call this program:<br />
//&nbsp;&nbsp; php floats.php<br />
//--------------------------<br />
// Example of the use of regular expressions for checking <br />
// the syntax of floating point numbers.<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// This opens standard in ready for interactive input..<br />
</span><span class="default">$STDIN </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">"php://stdin"</span><span class="keyword">,</span><span class="string">"r"</span><span class="keyword">);<br />
<br />
for(;;) { </span><span class="comment">// FOREVER-LOOP<br />
&nbsp; </span><span class="keyword">echo </span><span class="string">"Float&gt;"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">fgets</span><span class="keyword">(</span><span class="default">$STDIN</span><span class="keyword">,</span><span class="default">256</span><span class="keyword">));<br />
&nbsp; if (</span><span class="default">$s</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$le </span><span class="keyword">= <br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">eregi</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="string">"-?(([0-9]+e-?[0-9]+)|((([0-9]+\.[0-9]*)|(\.[0-9]+))" </span><span class="keyword">.<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="string">"(e-?[0-9]+)?))"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$s</span><span class="keyword">, </span><span class="default">$regs</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$le</span><span class="keyword">==</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp;&nbsp; echo </span><span class="string">"Yes it's float\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; else if (</span><span class="default">$le </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp;&nbsp; echo </span><span class="string">"</span><span class="default">$le</span><span class="string"> chars of the string correspond to a float\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp;&nbsp; echo </span><span class="string">"No, it isn't float\n"</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; else<br />
&nbsp;&nbsp;&nbsp; break;<br />
}<br />
<br />
</span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$STDIN</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50284""></a>
  <div class="note">
   <strong class="user">krum at estnet dot bg</strong>
   <a href="#50284" class="date">23-Feb-2005 09:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was searching for a fast way to check all fields of a form, so I can<br />
include the $_POST information directly to the sql query. So I wrote<br />
another script in my class in order to check the submitted data. So here it<br />
is:<br />
&lt;?<br />
function check_post () {<br />
&nbsp;foreach ($_POST as $key =&gt; $val) {<br />
&nbsp; $$key = $val;<br />
&nbsp;}<br />
&nbsp;$data = Array();<br />
&nbsp;$data["^[a-z0-9!@#$%^&amp;*]"] = Array ("first_name", "last_name",<br />
&nbsp;"nick", "pass", "description", "user", "message", "event", "name", "title",<br />
&nbsp;"text");<br />
&nbsp;$data['^[-!#$%&amp;\'*+\\./0-9=?A-Z^_`a-z{|}~]+'<br />
.'@'.'[-!#$%&amp;\'*+\\/0-9=?A-Z^_`a-z{|}~]+\.'<br />
.'[-!#$%&amp;\'*+\\./0-9=?A-Z^_`a-z{|}~]+$'] = Array("mail");<br />
&nbsp;$data["^[0-9]{1,4}"] = Array("day", "month", "owner", "type", "forum_id", "topic_id");<br />
&nbsp;foreach ($data as $key =&gt; $val) {<br />
&nbsp; foreach ($val as $k =&gt; $c) {<br />
&nbsp;&nbsp; if ( isset($$c) ) {<br />
&nbsp;&nbsp;&nbsp; if ( !eregi($key, $$c) ) {<br />
&nbsp;&nbsp; &nbsp; echo "You have used an not allowed character in " .$$c. " field\n";<br />
&nbsp;&nbsp; &nbsp; exit;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp;}<br />
}<br />
?&gt;<br />
I hope it will help someone ^_^</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49649""></a>
  <div class="note">
   <strong class="user">sven.heinicke.org</strong>
   <a href="#49649" class="date">03-Feb-2005 08:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The&nbsp; gethostbyname($regs[2]) == $regs[2] is a bad idea.&nbsp; Some domain names have a MX record but not an IP number.&nbsp; The first example I found is jhu.edu domain:<br />
<br />
sven@chef:~$ host jhu.edu<br />
jhu.edu A record currently not present<br />
sven@chef:~$ host -t mx jhu.edu<br />
jhu.edu&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; MX&nbsp; &nbsp; &nbsp; 10 smtp.johnshopkins.edu</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="47659""></a>
  <div class="note">
   <strong class="user">cristian81 AT katamail DOT com</strong>
   <a href="#47659" class="date">24-Nov-2004 12:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The same "checkipaddress" function posted by "lueck at gerwan dot de", with the add of an optional jolly char suport. Returns TRUE or FALSE<br />
<br />
Results:<br />
<br />
check_ip_address('125.32.15.0') is TRUE<br />
check_ip_address('125.32.15.*') is FALSE<br />
check_ip_address('125.32.15.*', '*') is TRUE<br />
check_ip_address('*.*.*.*', '*') is TRUE<br />
check_ip_address('125.-.15.2', '-') is TRUE<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">check_ip_address</span><span class="keyword">(</span><span class="default">$checkip</span><span class="keyword">, </span><span class="default">$jolly_char</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$jolly_char</span><span class="keyword">==</span><span class="string">'.'</span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// dot ins't allowed as jolly char<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$jolly_char </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$jolly_char</span><span class="keyword">!=</span><span class="string">''</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$checkip </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$jolly_char</span><span class="keyword">, </span><span class="string">'*'</span><span class="keyword">, </span><span class="default">$checkip</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// replace the jolly char with an asterisc<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$my_reg_expr </span><span class="keyword">= </span><span class="string">"^[0-9\*]{1,3}\.[0-9\*]{1,3}\.[0-9\*]{1,3}\.[0-9\*]{1,3}$"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$jolly_char </span><span class="keyword">= </span><span class="string">'*'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$my_reg_expr </span><span class="keyword">= </span><span class="string">"^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">eregi</span><span class="keyword">(</span><span class="default">$my_reg_expr</span><span class="keyword">, </span><span class="default">$checkip</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">3</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$checkip</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$checkip</span><span class="keyword">, </span><span class="string">"."</span><span class="keyword">)) &gt;= </span><span class="string">"0" </span><span class="keyword">&amp;&amp; </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$checkip</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$checkip</span><span class="keyword">, </span><span class="string">"."</span><span class="keyword">)) &lt;= </span><span class="string">"255"</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$jolly_char</span><span class="keyword">!=</span><span class="string">''</span><span class="keyword">) {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// if exists, check for the jolly char<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$checkip</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$checkip</span><span class="keyword">, </span><span class="string">"."</span><span class="keyword">))!=</span><span class="default">$jolly_char</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$checkip </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$checkip</span><span class="keyword">, </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$checkip</span><span class="keyword">, </span><span class="string">"."</span><span class="keyword">) + </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!(</span><span class="default">$checkip </span><span class="keyword">&gt;= </span><span class="string">"0" </span><span class="keyword">&amp;&amp; </span><span class="default">$checkip </span><span class="keyword">&lt;= </span><span class="string">"255"</span><span class="keyword">)) {&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// class D<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$jolly_char</span><span class="keyword">!=</span><span class="string">''</span><span class="keyword">) {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// if exists, check for the jolly char<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$checkip</span><span class="keyword">!=</span><span class="default">$jolly_char</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="47291""></a>
  <div class="note">
   <strong class="user">ian at hyperborea dot co dot uk</strong>
   <a href="#47291" class="date">10-Nov-2004 12:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was looking for something to validate a URL, and as usual turned to 'php.net' as it provides an invaluable source of information. I couldn't find exactly what I wanted so came up with something of my own which I hope will be of use to others. <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">validateURL</span><span class="keyword">(</span><span class="default">$URL</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$domain </span><span class="keyword">= </span><span class="string">"([[:alpha:]][-[:alnum:]]*[[:alnum:]])<br />
(\.[[:alpha:]][-[:alnum:]]*[[:alpha:]])+"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dir </span><span class="keyword">= </span><span class="string">"(/[[:alpha:]][-[:alnum:]]*[[:alnum:]])*"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$page </span><span class="keyword">= </span><span class="string">"(/[[:alpha:]][-[:alnum:]]*\.[[:alpha:]]{3,5})?"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$getstring </span><span class="keyword">= </span><span class="string">"(\?([[:alnum:]][-_%[:alnum:]]*=[-_%[:alnum:]]+)<br />
(&amp;([[:alnum:]][-_%[:alnum:]]*=[-_%[:alnum:]]+))*)?"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pattern </span><span class="keyword">= </span><span class="string">"^"</span><span class="keyword">.</span><span class="default">$domain</span><span class="keyword">.</span><span class="default">$dir</span><span class="keyword">.</span><span class="default">$page</span><span class="keyword">.</span><span class="default">$getstring</span><span class="keyword">.</span><span class="string">"$"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">eregi</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$URL</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span>Be sure to enter each pattern on a single line.<br />
<br />
The function accepts a URL and validates the domain, directory path, page and any GET parameters. You can see I have split the patterns for validating each section for easier reading and maintaining.<br />
<br />
Domain Name:<br />
This can be made of of many parts each seperated by a '.' (dot). each part must start with an alpha char. followed by any alphanumeric chars., or '-'. With the exception of the first part each part must end in an alpha char.. <br />
<br />
e.g. www.google.co.uk and www9.g-88gle.co.uk are valid, but 9ww.google.3o.uk and www.google4.co.uk3 are not.<br />
<br />
Directory Path:<br />
Each directory must start with a '/' followed by an alpha char., then any alpha numeric char., or '-', and ending in an alphanumeric char.<br />
<br />
e.g. /path1/to-page is valid, but /path1-/2-page is not.<br />
<br />
Page:<br />
This is like the directory path but it must end with a '.' (dot) followed by 3-5 alpha chars.<br />
<br />
e.g. /phpinfo.php and /page.shtml are valid, but /phpinfo.php4 and /pageshtml are not.<br />
<br />
Get String:<br />
This follows the page and begins with a '?'. This is then followed by key/value pairs each seperated by an '&amp;'. <br />
<br />
e.g. ?key1=value1&amp;key2=value2<br />
<br />
Each key, or value must start and end with an alpahnumeric char. I have allowed for a '%' to be specified for URL encoded chars., and also '_' (underscore) is allowed.<br />
<br />
Well thats it hope it is of some use. It is NOT perfect, for instance in the 'getstring' I would like to ensure that encoded characters (i.e. %20) consist of a % symbol followed by two characters with values '0-9A-F' but couldn't get anything I tried to work.<br />
I would welcome any suggestions or improvements, there are bound to be some.<br />
&nbsp;<br />
Note: The patterns are based on an earlier post by 'fusillo at NOSPAM dot netgang dot it' for matching domain names. Thanks to him.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="47046""></a>
  <div class="note">
   <strong class="user">gabriel at gabrielharrison co uk</strong>
   <a href="#47046" class="date">01-Nov-2004 01:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is a bug in the regex that means it doesn't work with a domain suffex that has two parts eg: .co.uk <br />
I'm not good enough with regexs to sort this - sorry.<br />
<br />
There can also be a problem if the domain doesn't have a domain entry without the www. subdomain. To solve this modify the code with:<br />
<br />
elseif( gethostbyname($regs[2]) == $regs[2] || <br />
gethostbyname('www' . $regs[2]) == 'www' . $regs[2])</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="43722""></a>
  <div class="note">
   <strong class="user">chadkeffer at mail dot com</strong>
   <a href="#43722" class="date">01-Jul-2004 01:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There's seems to be some confusion on just what is allowed in an email address and thus how to build your regular expression.&nbsp; RFC 2822 replaced RFC 822 over 3 years ago, so make sure you're referencing the correct RFC.&nbsp; Also, don't assume all servers comply with the RFC.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="43491""></a>
  <div class="note">
   <strong class="user">gullevek at gullevek dot org</strong>
   <a href="#43491" class="date">23-Jun-2004 10:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
for the comment from 'joseph dot ragsdale at xconduit dot com'<br />
<br />
The regex has one bug thought. It elminates &lt;user&gt;@jp.t.ne.jp addresses which are completly valid as it needs at least 2 chars in the domain part.<br />
<br />
This regex fixes it:<br />
<br />
^[_a-z0-9-]+(\.[_a-z0-9-]+)*<br />
@[a-z0-9-]+(\.[a-z0-9-]{1,})*\.([a-z]{2,}){1}$<br />
<br />
[but the regex in one line]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41693""></a>
  <div class="note">
   <strong class="user">kidproto at hotmail dot com</strong>
   <a href="#41693" class="date">20-Apr-2004 08:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
"^[a-zA-Z0-9_\-]+(:?\.svg|\.wmf|\.zip|\.tar\.gz|\.tgz)$"<br />
<br />
That is the proper file check for a well formatted beginning and ending filename for those select files. The one in this list is incorrect for at least php 4.3.0 which is what I'm using.<br />
<br />
The (:?) makes sure that the parentheses aren't used for storing the matched regex.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="38702""></a>
  <div class="note">
   <strong class="user">fusillo at NOSPAM dot netgang dot it</strong>
   <a href="#38702" class="date">03-Jan-2004 11:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a simple function that uses eregi() function to validate a domain name (according to the RFC 1034).<br />
<br />
function check_host($host) {<br />
if (<br />
&nbsp;&nbsp; eregi("^[[:alpha:]]+([-[:digit:][:alpha:]]*<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [[:digit:][:alpha:]])*(\.[[:alpha:]]+<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ([-[:digit:][:alpha:]]*[[:digit:][:alpha:]])*)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; *$",$host)<br />
&nbsp; ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; return 1;<br />
&nbsp;&nbsp;&nbsp; } else return 0;<br />
};<br />
<br />
NOTE: This expression must be written on a single line to work<br />
I had to brake it on separate lines to post on the site.<br />
<br />
Returns 1 if $host is an RFC compliant domain name else returns 0.<br />
<br />
This function is part of the code of blackboxed linux distribution coming on your screen late genuary.<br />
<br />
-fusillo-</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="38181""></a>
  <div class="note">
   <strong class="user">alexm(_A_T_)factory7.com</strong>
   <a href="#38181" class="date">11-Dec-2003 09:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A little interesting and hopefully on topic point I found while browsing the internet at: <a href="http://www.clemburg.com/x1713.html#AEN1717" rel="nofollow" target="_blank">http://www.clemburg.com/x1713.html#AEN1717</a><br />
<br />
According to RFC 822 (see <a href="http://www.rfc-editor.org/" rel="nofollow" target="_blank">http://www.rfc-editor.org/</a>), email addresses<br />
are case-sensitive in the part before the "@" sign, except for the<br />
special address "POSTMASTER", which is not case-sensitive. The part<br />
after the "@" sign is a host name, and is not case-sensitive.<br />
<br />
Note that many organizations will implement an aliasing facility that<br />
recognizes alternative forms for an email address (e.g., providing<br />
"John.Doe@my.organization.com", "john.doe@my.organization.com",<br />
"doe@my.organization.com", "Doe@my.organization.com" etc.). However,<br />
this is not required by the standard as specified in RFC 822.<br />
<br />
so you may want to keep that in mind....<br />
i.e. breakup the username/alias (ereg) and domain (eregi) parts of the email</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37209""></a>
  <div class="note">
   <strong class="user">joseph dot ragsdale at xconduit dot com</strong>
   <a href="#37209" class="date">06-Nov-2003 11:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I'm posting this as a - hopefully - helpful example to those who are learning regular expressions. Apologies to the documentation team and moderators for posting yet another email address validation example, but it's hard to argue against it as most everyone will see regular expressions as being a solution to this problem.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Example results:<br />
<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'foo@example.com'</span><span class="keyword">;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// matched<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'foo.bar@example.co.uk'</span><span class="keyword">; </span><span class="comment">// matched<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'foo_bar@example.com'</span><span class="keyword">;&nbsp;&nbsp; </span><span class="comment">// matched<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'_foo_bar@example.com'</span><span class="keyword">;&nbsp; </span><span class="comment">// matched<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'foo@example.example'</span><span class="keyword">;&nbsp;&nbsp; </span><span class="comment">// matched<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'_-._@-.--'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// matched<br />
<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'@.'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// not matched<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'@.com'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// not matched<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">' @ .com'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// not matched<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'.bar@example.com'</span><span class="keyword">; </span><span class="comment">// not matched<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'foo.@example.com'</span><span class="keyword">; </span><span class="comment">// not matched<br />
</span><span class="default">$email</span><span class="keyword">[] = </span><span class="string">'foo@example.x.y'</span><span class="keyword">;&nbsp; </span><span class="comment">// not matched<br />
<br />
</span><span class="default">$regex </span><span class="keyword">=<br />
&nbsp; </span><span class="string">'^'</span><span class="keyword">.<br />
&nbsp; </span><span class="string">'[_a-z0-9-]+'</span><span class="keyword">.&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">/* One or more underscore, alphanumeric, <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; or hyphen charactures. */<br />
&nbsp; </span><span class="string">'(\.[_a-z0-9-]+)*'</span><span class="keyword">.&nbsp;&nbsp; </span><span class="comment">/* Followed by zero or more sets consisting <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; of a period and one or more underscore, <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; alphanumeric, or hyphen charactures. */<br />
&nbsp; </span><span class="string">'@'</span><span class="keyword">.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">/* Followed by an "at" characture. */<br />
&nbsp; </span><span class="string">'[a-z0-9-]+'</span><span class="keyword">.&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/* Followed by one or more alphanumeric <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; or hyphen charactures. */<br />
&nbsp; </span><span class="string">'(\.[a-z0-9-]{2,})+'</span><span class="keyword">. </span><span class="comment">/* Followed by one or more sets consisting <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; of a period and two or more alphanumeric <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; or hyphen charactures. */<br />
&nbsp; </span><span class="string">'$'</span><span class="keyword">;<br />
<br />
foreach (</span><span class="default">$email </span><span class="keyword">as </span><span class="default">$example</span><span class="keyword">) {<br />
&nbsp; if (</span><span class="default">eregi</span><span class="keyword">(</span><span class="default">$regex</span><span class="keyword">, </span><span class="default">$example</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$example </span><span class="keyword">. </span><span class="string">' matched&lt;br&gt;'</span><span class="keyword">;<br />
&nbsp; } else {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$example </span><span class="keyword">. </span><span class="string">' not matched&lt;br&gt;'</span><span class="keyword">;<br />
&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="35848""></a>
  <div class="note">
   <strong class="user">banerian at u dot washington dot edu</strong>
   <a href="#35848" class="date">17-Sep-2003 03:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It should be noted that in the function validateEmail, the final verification relies on the mail server responding to the test $email with a reply code of 250.&nbsp;&nbsp; Nowadays, many/most/all servers will reply 250/Ok for any&nbsp; user@thier.domain regardless of whether or not the userid actually exists.&nbsp; mail servers tend to accept the mail (if it passes other checks), and if the user really does not exist, it just "bounces" the mail back to sender.&nbsp; thus the validateEmail function can give false positives...an unfortunate victim of having to deal with spam.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="35571""></a>
  <div class="note">
   <strong class="user">Hodfords</strong>
   <a href="#35571" class="date">06-Sep-2003 11:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Most of the Ereg functions for emails that I have seen do not<br />
work for emails like :-<br />
<br />
joe@something.co..uk<br />
<br />
And emails such as <br />
joe@something.co.uk+1234<br />
<br />
This eregi which we put together, I think works, it should be just one line, but php.net did not let us submit, because it said that even after using wordwrap() the line was too long :-<br />
<br />
$ereg_string = <br />
"^[\'+\\./0-9A-Z^_\`a-z{|}~\-]+@<br />
[a-zA-Z0-9_\-]+(\.[a-zA-Z0-9_\-]+){1,3}$";<br />
<br />
Adjust the number "3" right at the end to whatever number<br />
you want. <br />
<br />
A long domain name such as "@finance.uk.yahoo.co.uk" which<br />
has 5 parts will require the number to be higher.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="33456""></a>
  <div class="note">
   <strong class="user">tomi at vacilando dot net</strong>
   <a href="#33456" class="date">26-Jun-2003 08:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Keran's solution is a good one but I found it does not work for a small number of domains -- because of a bug in gethostbyname() that causes some valid domains not to resolve properly. The workaround is to test such domains with "www." added to the beginning. This script does all that and works perfectly for me. Enjoy!<br />
<br />
// Function to validate emails.<br />
function validate_email($email_raw)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; // replace any ' ' and \n in the email<br />
&nbsp;&nbsp;&nbsp; $email_nr = eregi_replace("\n", "", $email_raw);<br />
&nbsp;&nbsp;&nbsp; $email = eregi_replace(" +", "", $email_nr);<br />
&nbsp;&nbsp;&nbsp; $email = strtolower( $email );<br />
&nbsp;&nbsp;&nbsp; // do the eregi to look for bad characters<br />
&nbsp;&nbsp;&nbsp; if( !eregi("^[a-z0-9]+([_\\.-][a-z0-9]+)*". "@([a-z0-9]+([\.-][a-z0-9]+))*$",$email) ){<br />
&nbsp;&nbsp; &nbsp;&nbsp; // okay not a good email<br />
&nbsp;&nbsp; &nbsp;&nbsp; $feedback = 'Error: "' . $email . '" is not a valid e-mail address!';<br />
&nbsp;&nbsp; &nbsp;&nbsp; return $feedback;<br />
&nbsp;&nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp;&nbsp; // okay now check the domain<br />
&nbsp;&nbsp; &nbsp;&nbsp; // split the email at the @ and check what's left<br />
&nbsp;&nbsp; &nbsp;&nbsp; $item = explode("@", $email);<br />
&nbsp;&nbsp; &nbsp;&nbsp; $domain = $item["1"];<br />
&nbsp;&nbsp; &nbsp;&nbsp; if ( ( gethostbyname($domain) == $domain ) )<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( gethostbyname("www." . $domain) == "www." . $domain )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $feedback = 'Error: "' . $domain . '" is most probably not a valid domain!';<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $feedback;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // ?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $feedback = "valid";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $feedback;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $feedback = "valid";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $feedback;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="31127""></a>
  <div class="note">
   <strong class="user">steve at brainwashstudios dot com</strong>
   <a href="#31127" class="date">10-Apr-2003 07:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
why not match some filenames?<br />
<br />
if (!ereg("^[a-ZA-Z0-9]+[/.gif|/.jpg|/.png]$",$match){<br />
&nbsp;echo "Invalid Filename";<br />
}else{<br />
&nbsp;if (file_exists($match)){<br />
&nbsp; echo "blah";<br />
&nbsp;}<br />
}<br />
<br />
I suppose that would work off the top of my head but I have yet to test it, so you may want to check it first.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="30147""></a>
  <div class="note">
   <strong class="user">keran at kiwi-interactive dot com</strong>
   <a href="#30147" class="date">08-Mar-2003 05:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I couldn't get any of the email validation items above to actually work (maybe I'm thick) :)<br />
<br />
So I adapted a couple and came up with this, and it seems to work<br />
<br />
// function to validate email<br />
function validate_email($email_raw) {<br />
<br />
&nbsp;&nbsp;&nbsp; // replace any ' ' and \n in the email <br />
&nbsp;&nbsp;&nbsp; $email_nr = eregi_replace("\n", "", $email_raw);<br />
&nbsp;&nbsp;&nbsp; $email = eregi_replace(" +", "", $email_nr);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; // do the ergei to look for bad characters<br />
&nbsp; if( !eregi("^[a-z0-9]+([_\\.-][a-z0-9]+)*".<br />
"@([a-z0-9]+([\.-][a-z0-9]+))*$",$email) ){<br />
&nbsp;&nbsp;&nbsp; // okay not a good email<br />
&nbsp;&nbsp;&nbsp; $feedback = "Error: $email isn't a valid mail address!";<br />
&nbsp;&nbsp;&nbsp; return $feedback;<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // okay now check the domain<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // split the email at the @ and check what's left<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $item = explode("@", $email);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $domain = $item["1"];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( gethostbyname($domain) == $domain) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $feedback = "Error: $domain isn't a valid domain!";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return $feedback;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $feedback = "valid";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return $feedback;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="29643""></a>
  <div class="note">
   <strong class="user">slavo at polovnictvo-mn dot sk</strong>
   <a href="#29643" class="date">20-Feb-2003 02:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is what I found (by Jon S. Stevens jon@clearink.com with<br />
Copyright 1998 Jon S. Stevens, Clear Ink)<br />
<br />
function validateEmail ($email){<br />
&nbsp;&nbsp; global $SERVER_NAME;<br />
&nbsp;&nbsp; $return = array(false,&nbsp; "" );<br />
&nbsp;&nbsp; list ($user, $domain) = split( "@", $email, 2);<br />
&nbsp;&nbsp; $arr = explode( ".", $domain);<br />
&nbsp;&nbsp; $count = count ($arr);<br />
&nbsp;&nbsp; $tld = $arr[$count - 2] .&nbsp; "." . $arr[$count - 1];<br />
&nbsp;&nbsp; if(checkdnsrr($tld,&nbsp; "MX")) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(getmxrr($tld, $mxhosts, $weight)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; for($i = 0; $i &lt; count($mxhosts); $i++){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $fp = fsockopen($mxhosts[$i], 25);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($fp){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $s = 0;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $c = 0;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $out =&nbsp; "";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set_socket_blocking($fp, false);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; do {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $out = fgets($fp, 2500);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(ereg( "^220", $out)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $s = 0;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $out =&nbsp; "";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $c++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else if(($c &gt; 0) &amp;&amp; ($out ==&nbsp; "")){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $s++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if($s == 9999) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } while($out ==&nbsp; "");<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set_socket_blocking($fp, true);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fputs($fp,&nbsp; "HELO $SERVER_NAME\n");<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $output = fgets ($fp, 2000);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fputs($fp,&nbsp; "MAIL FROM: &lt;info@" . $tld .&nbsp; "&gt;\n" );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $output = fgets($fp, 2000);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fputs($fp,&nbsp; "RCPT TO: &lt;$email&gt;\n");<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $output = fgets($fp, 2000);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(ereg(&nbsp; "^250", $output )) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $return[0] = true;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $return[0] = false;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $return[1] = $output;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fputs ($fp,&nbsp; "QUIT\n");<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fclose($fp);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if($return[0] == true){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; return $return;<br />
}<br />
<br />
----<br />
hope it helps you...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="28647""></a>
  <div class="note">
   <strong class="user">webmaster at textedit dot co dot uk</strong>
   <a href="#28647" class="date">19-Jan-2003 08:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I notice a lot of queries involving regular expressions and is_float() regarding currency validation.<br />
<br />
If you have a version of php that uses the std C ctype.h functions then it will ALWAYS work with the following code.<br />
<br />
function check_price($price)<br />
{<br />
$data=split('[.]',$price);<br />
<br />
&nbsp;&nbsp;&nbsp; if ( count($data) != 2 )<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return "false";<br />
<br />
&nbsp;&nbsp;&nbsp; if ( ctype_digit($data[0]) &amp;&amp; ctype_digit($data[1]) &amp;&amp; $data[0][0] != '0')<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return "true";<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return "false";<br />
}<br />
<br />
Peter Lorimer<br />
<br />
http:www.textedit.co.uk<br />
webmaster@textedit.co.uk</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="28615""></a>
  <div class="note">
   <strong class="user">X-Istence.com</strong>
   <a href="#28615" class="date">18-Jan-2003 03:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To check email, i use the following code:<br />
<br />
if (!eregi ("^([a-z0-9_]|\\-|\\.)+@(([a-z0-9_]|\\-)+\\.)+[a-z]{2,4}$", $email) {<br />
echo "Invalid Email Adress";<br />
}<br />
else {<br />
echo "Valid Email Adress";<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="28159""></a>
  <div class="note">
   <strong class="user">respectthepinguin at yahoo dot com</strong>
   <a href="#28159" class="date">04-Jan-2003 08:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
validating an email can be pretty tough... however this....<br />
^([[:alnum]]|_|\.|-)+@([[:alnum]]|\.|-)+(\.)([a-z]{2,4})$<br />
makes this task much easier. (:)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="25618""></a>
  <div class="note">
   <strong class="user">BKDotCom at hotmail dot com</strong>
   <a href="#25618" class="date">30-Sep-2002 08:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
in regards to using gethostbyname() to validate email addresses:<br />
Large flaw:<br />
Doesn't work if the host has a NS &amp; MX record, but no A record.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="23763""></a>
  <div class="note">
   <strong class="user">henrik jensen&lt;hj at this_netwerk dot dk&gt;</strong>
   <a href="#23763" class="date">27-Jul-2002 07:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Looking for at regex to check if a file is an image file, this seems to work?<br />
<br />
Note: it does not check for illegeal filesystem names - it only looks at the filename extension.<br />
<br />
if (eregi ("(.)+\\.(jp(e){0,1}g$|gif$|png$)",$filename)){<br />
&nbsp;&nbsp;&nbsp; // This is an imagefile<br />
}<br />
<br />
[ remove this_ from emailaddress ]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="22168""></a>
  <div class="note">
   <strong class="user">trosho at vip dot bg</strong>
   <a href="#22168" class="date">09-Jun-2002 01:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please note that eregi() is case sensitive if you use cyrillic chars</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="19627""></a>
  <div class="note">
   <strong class="user">re at lloc dot de</strong>
   <a href="#19627" class="date">06-Mar-2002 04:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An additional note to one of these<br />
expressions above: I use<br />
<br />
"^[a-z0-9]+([_.-][a-z0-9]+)*@([a-z0-9]<br />
+([.-][a-z0-9]+)*)+\\.[a-z]{2,4}$"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="19429""></a>
  <div class="note">
   <strong class="user">tuxx at tuxx-home dot at</strong>
   <a href="#19429" class="date">27-Feb-2002 12:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A small note to one of these expressions above:<br />
Inside a character class ([...]) one does not need to escape the fullstop, therefore<br />
<br />
[-\\._] <br />
<br />
would become<br />
<br />
[-._]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="19391""></a>
  <div class="note">
   <strong class="user">steve at fish2find dot co dot uk</strong>
   <a href="#19391" class="date">26-Feb-2002 04:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
hope this helps with some validation problems, simple text validation:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //$firstname = "somename"; // valid<br />
&nbsp;&nbsp;&nbsp; or&nbsp; //$firstname = "somenam3"; // not valid<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //lets validate a field entry &amp; trim off any white spaces<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $firstname = trim($firstname);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //set lenght of the field to a max 12 characters<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $len = "0,12";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $field = $firstname;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //call function<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (is_valid($field, $len)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //if field entry valid then set<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $valid_firstname = $field;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //set record to yes<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $valid_record = "TRUE";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo "$field is a valid name";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //set record to null<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $valid_record = "FALSE";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo " $field is not a valid name";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //process to see if valid record<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($valid_record == "FALSE"){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo " &amp; is not a valid record";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else{ //assume record is valid<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo " &amp; is a valid record";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //validate field entry function<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; function is_valid($field, $len) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(eregi("^[[:alpha:]]{{$len}}$", $field)) return&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TRUE;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else return FALSE;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="18895""></a>
  <div class="note">
   <strong class="user">ruben dot no dot spam at artek dot no dot spam dot es</strong>
   <a href="#18895" class="date">08-Feb-2002 09:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Well, this can be improved a little. According to the previous, these email addresses would be correct:<br />
&nbsp; user@domain.e<br />
&nbsp; user@domain.123<br />
&nbsp; user@domain-ltd<br />
<br />
I suggest this regexp:<br />
<br />
if( !eregi( "^" .<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; "[a-z0-9]+([_\\.-][a-z0-9]+)*" .&nbsp; &nbsp; //user<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; "@" .<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; "([a-z0-9]+([\.-][a-z0-9]+)*)+" .&nbsp;&nbsp; //domain<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; "\\.[a-z]{2,}" .&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //sld, tld <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; "$", $email, $regs)<br />
&nbsp;&nbsp; )<br />
...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="18542""></a>
  <div class="note">
   <strong class="user">mmc at nospam dot dk</strong>
   <a href="#18542" class="date">27-Jan-2002 03:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I'm not sure about "\." being the same as "." above.<br />
<br />
Anyway, the mentioned regex would not recognize .museum-names, and generally isn't future safe. <br />
Also, it doesn't verify that usernames and hostnames cannot start with "-._".<br />
<br />
I would recommend a more general (=future safe) expression and then instead check the hostname. An example:<br />
<br />
if( !eregi("^[a-z0-9]+([_\\.-][a-z0-9]+)*"<br />
&nbsp;&nbsp;&nbsp; ."@([a-z0-9]+([\.-][a-z0-9]+))*$",<br />
&nbsp;&nbsp;&nbsp; $mail, $regs) )<br />
{<br />
&nbsp;&nbsp;&nbsp; echo "Error: '$mail' isn't a valid mail address!\n";<br />
}<br />
elseif( gethostbyname($regs[2]) == $regs[2] )<br />
{<br />
&nbsp;&nbsp;&nbsp; echo "Error: Can't find the host '$regs[2]'!&lt;br&gt;\n";<br />
}<br />
<br />
Note: I had to split the regex for it to fit this note.<br />
Also note: The reason I'm using gethostbyname() and not getmxrr() or such is that getmxrr() doesn't work on Win2000/XP.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

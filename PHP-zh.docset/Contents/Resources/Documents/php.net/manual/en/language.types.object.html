<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Object 对象</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="language.types.array.html">? Array 数组</a></li>
      <li style="float: right;"><a href="language.types.resource.html">Resource 资源类型 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="language.types.html">类型</a></li>
    <li>Object 对象</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="language.types.object" class="sect1">
 <h2 class="title">Object 对象</h2>

 <div class="sect2" id="language.types.object.init">
  <h3 class="title">对象初始化</h3>

  <p class="para">
   要创建一个新的对象 <span class="type"><a href="language.types.object.html" class="type object">object</a></span>，使用 <em>new</em> 语句实例化一个类：
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">foo<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">do_foo</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Doing&nbsp;foo."</span><span style="color: #007700">;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">$bar&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">foo</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bar</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">do_foo</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>

  <p class="simpara">
   详细讨论参见手册中<a href="language.oop5.html" class="link">类与对象</a>章节。
  </p>

 </div>
 
 <div class="sect2" id="language.types.object.casting">
  <h3 class="title">转换为对象</h3>
  
  <p class="para">
   如果将一个对象转换成对象，它将不会有任何变化。如果其它任何类型的值被转换成对象，将会创建一个内置类
   <em>stdClass</em> 的实例。如果该值为
   <strong><code>NULL</code></strong>，则新的实例为空。数组转换成对象将使键名成为属性名并具有相对应的值。对于任何其它的值，名为
   <em>scalar</em> 的成员变量将包含该值。
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$obj&nbsp;</span><span style="color: #007700">=&nbsp;(object)&nbsp;</span><span style="color: #DD0000">'ciao'</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">$obj</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">scalar</span><span style="color: #007700">;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;outputs&nbsp;'ciao'<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>

 </div>
</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="119252""></a>
  <div class="note">
   <strong class="user">solly dot ucko at google dot com</strong>
   <a href="#119252" class="date">28-Apr-2016 02:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To create an object with values, in javascript you would use `{key: value}`. In PHP you use `[key=&gt;value]`.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118979""></a>
  <div class="note">
   <strong class="user">developer dot amankr at gmail dot com  (Aman  Kuma)</strong>
   <a href="#118979" class="date">11-Mar-2016 07:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
&lt;!--Example shows how to convert array to stdClass Object and how to access its value for display --&gt;<br />
<span class="default">&lt;?php <br />
$num </span><span class="keyword">= array(</span><span class="string">"Garha"</span><span class="keyword">,</span><span class="string">"sitamarhi"</span><span class="keyword">,</span><span class="string">"canada"</span><span class="keyword">,</span><span class="string">"patna"</span><span class="keyword">); </span><span class="comment">//create an array<br />
</span><span class="default">$obj </span><span class="keyword">= (object)</span><span class="default">$num</span><span class="keyword">; </span><span class="comment">//change array to stdClass object <br />
<br />
</span><span class="keyword">echo </span><span class="string">"&lt;pre&gt;"</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">); </span><span class="comment">//stdClass Object created by casting of array <br />
<br />
</span><span class="default">$newobj </span><span class="keyword">= new </span><span class="default">stdClass</span><span class="keyword">();</span><span class="comment">//create a new <br />
</span><span class="default">$newobj</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">= </span><span class="string">"India"</span><span class="keyword">;<br />
</span><span class="default">$newobj</span><span class="keyword">-&gt;</span><span class="default">work </span><span class="keyword">= </span><span class="string">"Development"</span><span class="keyword">;<br />
</span><span class="default">$newobj</span><span class="keyword">-&gt;</span><span class="default">address</span><span class="keyword">=</span><span class="string">"patna"</span><span class="keyword">;<br />
<br />
</span><span class="default">$new </span><span class="keyword">= (array)</span><span class="default">$newobj</span><span class="keyword">;</span><span class="comment">//convert stdClass to array<br />
</span><span class="keyword">echo </span><span class="string">"&lt;pre&gt;"</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$new</span><span class="keyword">); </span><span class="comment">//print new object<br />
<br />
##How deals with Associative Array<br />
<br />
</span><span class="default">$test </span><span class="keyword">= [</span><span class="default">Details</span><span class="keyword">=&gt;[</span><span class="string">'name'</span><span class="keyword">,</span><span class="string">'roll number'</span><span class="keyword">,</span><span class="string">'college'</span><span class="keyword">,</span><span class="string">'mobile'</span><span class="keyword">],</span><span class="default">values</span><span class="keyword">=&gt;[</span><span class="string">'Naman Kumar'</span><span class="keyword">,</span><span class="string">'100790310868'</span><span class="keyword">,</span><span class="string">'Pune college'</span><span class="keyword">,</span><span class="string">'9988707202'</span><span class="keyword">]];<br />
</span><span class="default">$val </span><span class="keyword">= </span><span class="default">json_decode</span><span class="keyword">(</span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">),</span><span class="default">false</span><span class="keyword">);</span><span class="comment">//convert array into stdClass object<br />
<br />
</span><span class="keyword">echo </span><span class="string">"&lt;pre&gt;"</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">);<br />
<br />
echo ((</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">) == </span><span class="default">true </span><span class="keyword">?&nbsp; </span><span class="default">1 </span><span class="keyword">: </span><span class="default">0 </span><span class="keyword">) == </span><span class="default">1 </span><span class="keyword">? </span><span class="string">"array" </span><span class="keyword">: </span><span class="string">"not an array" </span><span class="keyword">).</span><span class="string">"&lt;/br&gt;"</span><span class="keyword">; </span><span class="comment">// check whether it is array or not<br />
</span><span class="keyword">echo ((</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">) == </span><span class="default">true </span><span class="keyword">?&nbsp; </span><span class="default">1 </span><span class="keyword">: </span><span class="default">0 </span><span class="keyword">) == </span><span class="default">1 </span><span class="keyword">? </span><span class="string">"object" </span><span class="keyword">: </span><span class="string">"not an object" </span><span class="keyword">);</span><span class="comment">//check whether it is object or not <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118679""></a>
  <div class="note">
   <strong class="user">Anthony</strong>
   <a href="#118679" class="date">19-Jan-2016 07:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In PHP 7 there are a few ways to create an empty object:<br />
<br />
<span class="default">&lt;?php<br />
$obj1 </span><span class="keyword">= new \</span><span class="default">stdClass</span><span class="keyword">; </span><span class="comment">// Instantiate stdClass object<br />
</span><span class="default">$obj2 </span><span class="keyword">= new class{}; </span><span class="comment">// Instantiate anonymous class<br />
</span><span class="default">$obj3 </span><span class="keyword">= (object)[]; </span><span class="comment">// Cast empty array to object<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$obj1</span><span class="keyword">); </span><span class="comment">// object(stdClass)#1 (0) {}<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$obj2</span><span class="keyword">); </span><span class="comment">// object(class@anonymous)#2 (0) {}<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$obj3</span><span class="keyword">); </span><span class="comment">// object(stdClass)#3 (0) {}<br />
</span><span class="default">?&gt;<br />
</span><br />
$obj1 and $obj3 are the same type, but $obj1 !== $obj3. Also, all three will json_encode() to a simple JS object {}:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">echo </span><span class="default">json_encode</span><span class="keyword">([<br />
&nbsp;&nbsp;&nbsp; new \</span><span class="default">stdClass</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; new class{},<br />
&nbsp;&nbsp;&nbsp; (object)[],<br />
]);<br />
</span><span class="default">?&gt;<br />
</span><br />
Outputs: [{},{},{}]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117149""></a>
  <div class="note">
   <strong class="user">twitter/matt2000</strong>
   <a href="#117149" class="date">22-Apr-2015 06:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As of PHP 5.4, we can create stdClass objects with some properties and values using the more beautiful form:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; $object </span><span class="keyword">= (object) [<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'propertyOne' </span><span class="keyword">=&gt; </span><span class="string">'foo'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'propertyTwo' </span><span class="keyword">=&gt; </span><span class="default">42</span><span class="keyword">,<br />
&nbsp; ];<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114442""></a>
  <div class="note">
   <strong class="user">Ashley Dambra</strong>
   <a href="#114442" class="date">21-Feb-2014 03:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here a new updated version of 'stdObject' class. It's very useful when extends to controller on MVC design pattern, user can create it's own class.<br />
<br />
Hope it help you.<br />
<br />
&nbsp;<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">stdObject </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(array </span><span class="default">$arguments </span><span class="keyword">= array()) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!empty(</span><span class="default">$arguments</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$arguments </span><span class="keyword">as </span><span class="default">$property </span><span class="keyword">=&gt; </span><span class="default">$argument</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;{</span><span class="default">$property</span><span class="keyword">} = </span><span class="default">$argument</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__call</span><span class="keyword">(</span><span class="default">$method</span><span class="keyword">, </span><span class="default">$arguments</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arguments </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(array(</span><span class="string">"stdObject" </span><span class="keyword">=&gt; </span><span class="default">$this</span><span class="keyword">), </span><span class="default">$arguments</span><span class="keyword">); </span><span class="comment">// Note: method argument 0 will always referred to the main class ($this).<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (isset(</span><span class="default">$this</span><span class="keyword">-&gt;{</span><span class="default">$method</span><span class="keyword">}) &amp;&amp; </span><span class="default">is_callable</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;{</span><span class="default">$method</span><span class="keyword">})) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;{</span><span class="default">$method</span><span class="keyword">}, </span><span class="default">$arguments</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">"Fatal error: Call to undefined method stdObject::</span><span class="keyword">{</span><span class="default">$method</span><span class="keyword">}</span><span class="string">()"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="comment">// Usage.<br />
<br />
</span><span class="default">$obj </span><span class="keyword">= new </span><span class="default">stdObject</span><span class="keyword">();<br />
</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">= </span><span class="string">"Nick"</span><span class="keyword">;<br />
</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">surname </span><span class="keyword">= </span><span class="string">"Doe"</span><span class="keyword">;<br />
</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">age </span><span class="keyword">= </span><span class="default">20</span><span class="keyword">;<br />
</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">adresse </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
<br />
</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">getInfo </span><span class="keyword">= function(</span><span class="default">$stdObject</span><span class="keyword">) { </span><span class="comment">// $stdObject referred to this object (stdObject).<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="default">$stdObject</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">. </span><span class="string">" " </span><span class="keyword">. </span><span class="default">$stdObject</span><span class="keyword">-&gt;</span><span class="default">surname </span><span class="keyword">. </span><span class="string">" have " </span><span class="keyword">. </span><span class="default">$stdObject</span><span class="keyword">-&gt;</span><span class="default">age </span><span class="keyword">. </span><span class="string">" yrs old. And live in " </span><span class="keyword">. </span><span class="default">$stdObject</span><span class="keyword">-&gt;</span><span class="default">adresse</span><span class="keyword">;<br />
};<br />
<br />
</span><span class="default">$func </span><span class="keyword">= </span><span class="string">"setAge"</span><span class="keyword">;<br />
</span><span class="default">$obj</span><span class="keyword">-&gt;{</span><span class="default">$func</span><span class="keyword">} = function(</span><span class="default">$stdObject</span><span class="keyword">, </span><span class="default">$age</span><span class="keyword">) { </span><span class="comment">// $age is the first parameter passed when calling this method.<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$stdObject</span><span class="keyword">-&gt;</span><span class="default">age </span><span class="keyword">= </span><span class="default">$age</span><span class="keyword">;<br />
};<br />
<br />
</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">setAge</span><span class="keyword">(</span><span class="default">24</span><span class="keyword">); </span><span class="comment">// Parameter value 24 is passing to the $age argument in method 'setAge()'.<br />
<br />
// Create dynamic method. Here i'm generating getter and setter dynimically<br />
// Beware: Method name are case sensitive.<br />
</span><span class="keyword">foreach (</span><span class="default">$obj </span><span class="keyword">as </span><span class="default">$func_name </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">$value </span><span class="keyword">instanceOf </span><span class="default">Closure</span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$obj</span><span class="keyword">-&gt;{</span><span class="string">"set" </span><span class="keyword">. </span><span class="default">ucfirst</span><span class="keyword">(</span><span class="default">$func_name</span><span class="keyword">)} = function(</span><span class="default">$stdObject</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) use (</span><span class="default">$func_name</span><span class="keyword">) {&nbsp; </span><span class="comment">// Note: you can also use keyword 'use' to bind parent variables.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$stdObject</span><span class="keyword">-&gt;{</span><span class="default">$func_name</span><span class="keyword">} = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; };<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$obj</span><span class="keyword">-&gt;{</span><span class="string">"get" </span><span class="keyword">. </span><span class="default">ucfirst</span><span class="keyword">(</span><span class="default">$func_name</span><span class="keyword">)} = function(</span><span class="default">$stdObject</span><span class="keyword">) use (</span><span class="default">$func_name</span><span class="keyword">) {&nbsp; </span><span class="comment">// Note: you can also use keyword 'use' to bind parent variables.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$stdObject</span><span class="keyword">-&gt;{</span><span class="default">$func_name</span><span class="keyword">};<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; };<br />
<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">setName</span><span class="keyword">(</span><span class="string">"John"</span><span class="keyword">);<br />
</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">setAdresse</span><span class="keyword">(</span><span class="string">"Boston"</span><span class="keyword">);<br />
<br />
</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">getInfo</span><span class="keyword">();<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114428""></a>
  <div class="note">
   <strong class="user">Ashley Dambra</strong>
   <a href="#114428" class="date">20-Feb-2014 03:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Class like stdClass but with the possibility to add and execute function.<br />
<br />
class stdObject {<br />
&nbsp;&nbsp;&nbsp; public function __construct(array $arguments = array()) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!empty($arguments)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach ($arguments as $property =&gt; $argument) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($argument instanceOf Closure) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;{$property} = $argument;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;{$property} = $argument;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public function __call($method, $arguments) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (isset($this-&gt;{$method}) &amp;&amp; is_callable($this-&gt;{$method})) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return call_user_func_array($this-&gt;{$method}, $arguments);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; throw new Exception("Fatal error: Call to undefined method stdObject::{$method}()");<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114017""></a>
  <div class="note">
   <strong class="user">wyattstorch42 at outlook dot com</strong>
   <a href="#114017" class="date">01-Jan-2014 02:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you call var_export() on an instance of stdClass, it attempts to export it using ::__set_state(), which, for some reason, is not implemented in stdClass.<br />
<br />
However, casting an associative array to an object usually produces the same effect (at least, it does in my case). So I wrote an improved_var_export() function to convert instances of stdClass to (object) array () calls. If you choose to export objects of any other class, I'd advise you to implement ::__set_state().<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* An implementation of var_export() that is compatible with instances<br />
&nbsp;* of stdClass.<br />
&nbsp;* @param mixed $variable The variable you want to export<br />
&nbsp;* @param bool $return If used and set to true, improved_var_export()<br />
&nbsp;*&nbsp; &nbsp;&nbsp; will return the variable representation instead of outputting it.<br />
&nbsp;* @return mixed|null Returns the variable representation when the<br />
&nbsp;*&nbsp; &nbsp;&nbsp; return parameter is used and evaluates to TRUE. Otherwise, this<br />
&nbsp;*&nbsp; &nbsp;&nbsp; function will return NULL.<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">improved_var_export </span><span class="keyword">(</span><span class="default">$variable</span><span class="keyword">, </span><span class="default">$return </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$variable </span><span class="keyword">instanceof </span><span class="default">stdClass</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="string">'(object) '</span><span class="keyword">.</span><span class="default">improved_var_export</span><span class="keyword">(</span><span class="default">get_object_vars</span><span class="keyword">(</span><span class="default">$variable</span><span class="keyword">), </span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; } else if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$variable</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= array ();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$variable </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">[] = </span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">).</span><span class="string">' =&gt; '</span><span class="keyword">.</span><span class="default">improved_var_export</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="string">'array ('</span><span class="keyword">.</span><span class="default">implode</span><span class="keyword">(</span><span class="string">', '</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">).</span><span class="string">')'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$variable</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">$return</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; print </span><span class="default">$result</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="comment">// Example usage:<br />
</span><span class="default">$obj </span><span class="keyword">= new </span><span class="default">stdClass</span><span class="keyword">;<br />
</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">test </span><span class="keyword">= </span><span class="string">'abc'</span><span class="keyword">;<br />
</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">other </span><span class="keyword">= </span><span class="default">6.2</span><span class="keyword">;<br />
</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">arr </span><span class="keyword">= array (</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">);<br />
<br />
</span><span class="default">improved_var_export</span><span class="keyword">((object) array (<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'prop1' </span><span class="keyword">=&gt; </span><span class="default">true</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'prop2' </span><span class="keyword">=&gt; </span><span class="default">$obj</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'assocArray' </span><span class="keyword">=&gt; array (<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'apple' </span><span class="keyword">=&gt; </span><span class="string">'good'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'orange' </span><span class="keyword">=&gt; </span><span class="string">'great'<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">)<br />
));<br />
<br />
</span><span class="comment">/* Output:<br />
(object) array ('prop1' =&gt; true, 'prop2' =&gt; (object) array ('test' =&gt; 'abc', 'other' =&gt; 6.2, 'arr' =&gt; array (0 =&gt; 1, 1 =&gt; 2, 2 =&gt; 3)), 'assocArray' =&gt; array ('apple' =&gt; 'good', 'orange' =&gt; 'great'))<br />
*/<br />
</span><span class="default">?&gt;<br />
</span><br />
Note: This function spits out a single line of code, which is useful to save in a cache file to include/eval. It isn't formatted for readability. If you want to print a readable version for debugging purposes, then I would suggest print_r() or var_dump().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107755""></a>
  <div class="note">
   <strong class="user">qeremy [atta] gmail [dotta] com</strong>
   <a href="#107755" class="date">02-Mar-2012 09:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Do you remember some JavaScript implementations?<br />
<br />
// var timestamp = (new Date).getTime();<br />
<br />
Now it's possible with PHP 5.4.*;<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Foo<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$a </span><span class="keyword">= </span><span class="string">"I'm a!"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$b </span><span class="keyword">= </span><span class="string">"I'm b!"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$c</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">getB</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">b</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">setC</span><span class="keyword">(</span><span class="default">$c</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">c </span><span class="keyword">= </span><span class="default">$c</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">getC</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">c</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
print (new </span><span class="default">Foo</span><span class="keyword">)-&gt;</span><span class="default">a</span><span class="keyword">;&nbsp; &nbsp; &nbsp; </span><span class="comment">// I'm a!<br />
</span><span class="keyword">print (new </span><span class="default">Foo</span><span class="keyword">)-&gt;</span><span class="default">getB</span><span class="keyword">(); </span><span class="comment">// I'm b!<br />
</span><span class="default">?&gt;<br />
</span><br />
or<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// $_GET["c"] = "I'm c!";<br />
</span><span class="keyword">print (new </span><span class="default">Foo</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; -&gt;</span><span class="default">setC</span><span class="keyword">(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">"c"</span><span class="keyword">])<br />
&nbsp;&nbsp; &nbsp; &nbsp; -&gt;</span><span class="default">getC</span><span class="keyword">(); </span><span class="comment">// I'm c!<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107071""></a>
  <div class="note">
   <strong class="user">helpful at stranger dot com</strong>
   <a href="#107071" class="date">04-Jan-2012 10:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
By far the easiest and correct way to instantiate an empty generic php object that you can then modify for whatever purpose you choose:
<br />

<br />
<span class="default">&lt;?php $genericObject </span><span class="keyword">= new </span><span class="default">stdClass</span><span class="keyword">(); </span><span class="default">?&gt;
<br />
</span>
<br />
I had the most difficult time finding this, hopefully it will help someone else!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101288""></a>
  <div class="note">
   <strong class="user">Cosmitar: mhherrera31 at hotmail</strong>
   <a href="#101288" class="date">08-Dec-2010 07:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
i would like to share a curious behavior on casted objects. Casting an object from a class with private/protected attributes results a stdClass with a private/protected attribute for get.<br />
Example:<br />
<span class="default">&lt;?PHP<br />
</span><span class="keyword">class </span><span class="default">Foo</span><span class="keyword">{<br />
&nbsp;private </span><span class="default">$priv </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;public </span><span class="default">$pub </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;<br />
&nbsp;public function </span><span class="default">getSimple</span><span class="keyword">(){<br />
&nbsp; return (object)(array) </span><span class="default">$this</span><span class="keyword">; </span><span class="comment">//the array cast is to force a stdClass result<br />
&nbsp;</span><span class="keyword">}<br />
}<br />
</span><span class="default">$bar </span><span class="keyword">= new </span><span class="default">Foo</span><span class="keyword">();<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$bar</span><span class="keyword">-&gt;</span><span class="default">getSimple</span><span class="keyword">();</span><span class="comment">// output: object(stdClass)#3 (2) { ["priv:private"]=&gt; int(1) ["pub"]=&gt; int(2) }<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$bar</span><span class="keyword">-&gt;</span><span class="default">getSimple</span><span class="keyword">()-&gt;</span><span class="default">priv</span><span class="keyword">);</span><span class="comment">// output: NULL, not a Fatal Error<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$bar</span><span class="keyword">-&gt;</span><span class="default">getSimple</span><span class="keyword">()-&gt;</span><span class="default">pub</span><span class="keyword">);</span><span class="comment">// output: int(2)<br />
<br />
</span><span class="default">$barSimple </span><span class="keyword">= </span><span class="default">$bar</span><span class="keyword">-&gt;</span><span class="default">getSimple</span><span class="keyword">();<br />
</span><span class="default">$barSimple</span><span class="keyword">-&gt;</span><span class="default">priv </span><span class="keyword">= </span><span class="default">10</span><span class="keyword">;<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$barSimple</span><span class="keyword">-&gt;</span><span class="default">priv</span><span class="keyword">);</span><span class="comment">// output: int(10)<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95489""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#95489" class="date">05-Jan-2010 11:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Initialization, Instantiation and Instances are terms that can be confusing at first. Let's try to sort it out starting with this simple class definition.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">User<br />
</span><span class="keyword">{<br />
&nbsp; public </span><span class="default">$first_name</span><span class="keyword">;<br />
&nbsp; public </span><span class="default">$last_name</span><span class="keyword">;<br />
<br />
&nbsp; public function </span><span class="default">__toString</span><span class="keyword">()<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="string">"User [first='</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">first_name</span><span class="string">', last='</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">last_name</span><span class="string">']"</span><span class="keyword">;<br />
&nbsp; }<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Now create several INSTANCES of User by INSTANTIATING the User class above.<br />
<br />
<span class="default">&lt;?php<br />
$user_1 </span><span class="keyword">= new </span><span class="default">User</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// $user_1 is an INSTANCE of User<br />
</span><span class="default">$user_2 </span><span class="keyword">= new </span><span class="default">User</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// $user_2 is an INSTANCE of User<br />
</span><span class="keyword">echo </span><span class="default">$user_1 </span><span class="keyword">. </span><span class="string">'&lt;br&gt;'</span><span class="keyword">;&nbsp; &nbsp;&nbsp; </span><span class="comment">// User [first='', last='']<br />
</span><span class="keyword">echo </span><span class="default">$user_2 </span><span class="keyword">. </span><span class="string">'&lt;br&gt;'</span><span class="keyword">;&nbsp; &nbsp;&nbsp; </span><span class="comment">// User [first='', last='']<br />
</span><span class="default">?&gt;<br />
</span><br />
Here we have (2) two INSTANCES of User, but each instance was only INSTANTIATED once - when we used the 'new' operator.<br />
<br />
And now looking at the printed output, you can see there are no values for their first or last names. This means that the objects themselves have NOT been INITIALIZED. To remedy this situation, rewrite the class definition by adding a __construct() method.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">User<br />
</span><span class="keyword">{<br />
&nbsp; public </span><span class="default">$first_name</span><span class="keyword">;<br />
&nbsp; public </span><span class="default">$last_name</span><span class="keyword">;<br />
<br />
&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$first</span><span class="keyword">, </span><span class="default">$last</span><span class="keyword">)&nbsp; &nbsp; </span><span class="comment">// Require first and last names when INSTANTIATING<br />
&nbsp; </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">first_name </span><span class="keyword">= </span><span class="default">$first</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// INITIALIZE $first_name;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">last_name </span><span class="keyword">= </span><span class="default">$last</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// INITIALIZE $last_name;<br />
&nbsp; </span><span class="keyword">}<br />
<br />
&nbsp; public function </span><span class="default">__toString</span><span class="keyword">()<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="string">"User [first='</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">first_name</span><span class="string">', last='</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">last_name</span><span class="string">']"</span><span class="keyword">;<br />
&nbsp; }<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Now try it again.<br />
<br />
<span class="default">&lt;?php<br />
$user_1 </span><span class="keyword">= new </span><span class="default">User</span><span class="keyword">(</span><span class="string">'John'</span><span class="keyword">, </span><span class="string">'Doe'</span><span class="keyword">);&nbsp; &nbsp; &nbsp; </span><span class="comment">// $user_i is an INSTANCE of User&nbsp; <br />
</span><span class="default">$user_2 </span><span class="keyword">= new </span><span class="default">User</span><span class="keyword">(</span><span class="string">'Jane'</span><span class="keyword">, </span><span class="string">'Doe'</span><span class="keyword">);&nbsp; &nbsp; &nbsp; </span><span class="comment">// $user_2 is an INSTANCE of User<br />
</span><span class="keyword">echo </span><span class="default">$user_1 </span><span class="keyword">. </span><span class="string">'&lt;br&gt;'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// prints: User [first='John', last='Doe']<br />
</span><span class="keyword">echo </span><span class="default">$user_2 </span><span class="keyword">. </span><span class="string">'&lt;br&gt;'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// prints: User [first='Jane', last='Doe']<br />
</span><span class="default">?&gt;<br />
</span><br />
The __construct() method is called automatically by PHP when it sees the 'new' operator. Our __construct() method above requires the first and last names to be passed in as arguments and uses them to INITIALIZE objects when INSTANTIATING new INSTANCES.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95211""></a>
  <div class="note">
   <strong class="user">mailto dot aurelian at gmail dot com</strong>
   <a href="#95211" class="date">18-Dec-2009 06:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can create [recursive] objects with something like:<br />
<span class="default">&lt;?php<br />
&nbsp; $literalObjectDeclared </span><span class="keyword">= (object) array(<br />
&nbsp;&nbsp; &nbsp; </span><span class="string">'foo' </span><span class="keyword">=&gt; (object) array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'bar' </span><span class="keyword">=&gt; </span><span class="string">'baz'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'pax' </span><span class="keyword">=&gt; </span><span class="string">'vax'<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="string">'moo' </span><span class="keyword">=&gt; </span><span class="string">'ui'<br />
&nbsp;&nbsp; </span><span class="keyword">);<br />
print </span><span class="default">$literalObjectDeclared</span><span class="keyword">-&gt;</span><span class="default">foo</span><span class="keyword">-&gt;</span><span class="default">bar</span><span class="keyword">; </span><span class="comment">// outputs "baz"!<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92379""></a>
  <div class="note">
   <strong class="user">spidgorny at gmail dot com</strong>
   <a href="#92379" class="date">22-Jul-2009 10:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If having<br />
<br />
class BugDetails extends Bug<br />
<br />
you want to cast an object of a Bug to BugDetails like this<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $clone </span><span class="keyword">= (</span><span class="default">BugDetails</span><span class="keyword">) clone </span><span class="default">$this</span><span class="keyword">;<br />
</span><span class="comment">// OR<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$clone </span><span class="keyword">= (</span><span class="default">BugDetails</span><span class="keyword">) </span><span class="default">$bug</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span>which doesn't work in PHP, you have two options:<br />
1. Copying all (including private) properties manually (you could also use get_object_vars(), but this is shorter):<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $clone </span><span class="keyword">= new </span><span class="default">BugDetails</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$this </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$clone</span><span class="keyword">-&gt;</span><span class="default">$key </span><span class="keyword">= </span><span class="default">$val</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span>2. Serialize an object Bug, manipulate the resulting string so that it has BugDetails inside and unserialize it.<br />
See here: <a href="http://blog.adaniels.nl/articles/a-dark-corner-of-php-class-casting/" rel="nofollow" target="_blank">http://blog.adaniels.nl/articles/a-dark-corner-of-php-class-casting/</a><br />
<br />
Spent two hours looking for more elegant solution, that's my findings.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90447""></a>
  <div class="note">
   <strong class="user">cFreed at orange dot fr</strong>
   <a href="#90447" class="date">23-Apr-2009 03:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
CAUTION:<br />
"Arrays convert to an object with properties named by keys, and corresponding values".<br />
<br />
This is ALWAYS true, which means that even numeric keys are accepted when converting.<br />
But the resulting properties cannot be accessed, since they don't match the variables naming rules.<br />
<br />
So this:<br />
<span class="default">&lt;?php<br />
$x </span><span class="keyword">= (object) array(</span><span class="string">'a'</span><span class="keyword">=&gt;</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">=&gt;</span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">);<br />
echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">.</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">).</span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span>works and displays:<br />
stdClass Object<br />
(<br />
&nbsp;&nbsp;&nbsp; [a] =&gt; A<br />
&nbsp;&nbsp;&nbsp; [b] =&gt; B<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; C<br />
)<br />
<br />
But this:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">echo </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">.</span><span class="default">$x</span><span class="keyword">-&gt;</span><span class="default">a</span><span class="keyword">;<br />
echo </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">.</span><span class="default">$x</span><span class="keyword">-&gt;</span><span class="default">b</span><span class="keyword">;<br />
echo </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">.</span><span class="default">$x</span><span class="keyword">-&gt;{</span><span class="default">0</span><span class="keyword">}; </span><span class="comment"># (don't use $x-&gt;0, which is obviously a syntax error)<br />
</span><span class="default">?&gt;<br />
</span>fails and displays:<br />
A<br />
B<br />
Notice: Undefined property: stdClass::$0 in...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85440""></a>
  <div class="note">
   <strong class="user">Isaac Z. Schlueter i at foohack dot com</strong>
   <a href="#85440" class="date">31-Aug-2008 02:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In response to Harmor and Mithras,&nbsp; you can use the json functions to convert multi-dimensional arrays to objects very reliably.<br />
<br />
Also, note that just using (object)$x doesn't allow you to access properties inline.&nbsp; For example, this is invalid:<br />
<br />
<span class="default">&lt;?php<br />
$x </span><span class="keyword">= array(</span><span class="string">"foo"</span><span class="keyword">=&gt;</span><span class="string">"bar"</span><span class="keyword">);<br />
echo ((object)</span><span class="default">$x</span><span class="keyword">)-&gt;</span><span class="default">foo</span><span class="keyword">; </span><span class="comment">// PHP Parse error, unexpected T_OBJECT_OPERATOR<br />
</span><span class="default">?&gt;<br />
</span><br />
However, this function will let you do that, and will also handle multi-dimensional arrays without any hassle.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">to_object </span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return (</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">) || </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">)) ? </span><span class="default">json_decode</span><span class="keyword">(</span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">)) : (object) </span><span class="default">$x</span><span class="keyword">;<br />
}<br />
<br />
echo </span><span class="default">to_object</span><span class="keyword">( array(</span><span class="string">"foo"</span><span class="keyword">=&gt;</span><span class="string">"bar"</span><span class="keyword">) )-&gt;</span><span class="default">foo</span><span class="keyword">; </span><span class="comment">// "bar"<br />
</span><span class="default">?&gt;<br />
</span><br />
Note that *numeric* arrays will not be converted to objects using this method.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85237""></a>
  <div class="note">
   <strong class="user">Mithras</strong>
   <a href="#85237" class="date">21-Aug-2008 03:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In response to harmor: if an array contains another array as a value, you can recursively convert all arrays with:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">arrayToObject</span><span class="keyword">( </span><span class="default">$array </span><span class="keyword">){<br />
&nbsp; foreach( </span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value </span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; if( </span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$value </span><span class="keyword">) ) </span><span class="default">$array</span><span class="keyword">[ </span><span class="default">$key </span><span class="keyword">] = </span><span class="default">arrayToObject</span><span class="keyword">( </span><span class="default">$value </span><span class="keyword">);<br />
&nbsp; }<br />
&nbsp; return (object) </span><span class="default">$array</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75278""></a>
  <div class="note">
   <strong class="user">gabe at fijiwebdesign dot com</strong>
   <a href="#75278" class="date">22-May-2007 06:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In response to sirbinam.<br />
You cannot call a function or method before it exists. In your example, the global instance of stdout is just being passed around to differnet references (pointers). It however exists in the "dump" function scope via the global keyword. <br />
<br />
The code below works fine and illustrates that "stdout" has been defined before its instantiation. <br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">profiler</span><span class="keyword">{<br />
&nbsp; function </span><span class="default">profiler</span><span class="keyword">(){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">starttime </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">();<br />
&nbsp; }<br />
<br />
&nbsp; function </span><span class="default">dump</span><span class="keyword">(){<br />
&nbsp;&nbsp;&nbsp; global </span><span class="default">$stdout</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">endtime </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$duration </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">endtime </span><span class="keyword">- </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">starttime</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$stdout</span><span class="keyword">-&gt;</span><span class="default">write</span><span class="keyword">(</span><span class="default">$duration</span><span class="keyword">);<br />
&nbsp; }<br />
}<br />
<br />
class </span><span class="default">stdout</span><span class="keyword">{<br />
&nbsp; function </span><span class="default">write</span><span class="keyword">(</span><span class="default">$msg</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$msg</span><span class="keyword">;<br />
&nbsp; }<br />
}<br />
<br />
</span><span class="default">$stdout </span><span class="keyword">=&amp; new </span><span class="default">stdout</span><span class="keyword">();<br />
</span><span class="default">$profiler </span><span class="keyword">=&amp; new </span><span class="default">profiler</span><span class="keyword">();<br />
</span><span class="default">$profiler</span><span class="keyword">-&gt;</span><span class="default">dump</span><span class="keyword">();<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
All classes and functions declarations within a scope exist even before the php execution reaches them. It does not matter if you have your classes defined on the first or last line, as long as they are in the same scope as where they are called and are not in a conditional statement that has not been evaluated yet.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68998""></a>
  <div class="note">
   <strong class="user">ludvig dot ericson at gmail dot com</strong>
   <a href="#68998" class="date">19-Aug-2006 12:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In reply to the usort thing, you can access a property of an object dynamically by:<br />
<span class="default">&lt;?php<br />
$obj </span><span class="keyword">= (object)array(</span><span class="string">"Test" </span><span class="keyword">=&gt; </span><span class="string">"bar"</span><span class="keyword">)<br />
</span><span class="default">$var </span><span class="keyword">= </span><span class="string">"Test"</span><span class="keyword">;<br />
echo </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">$var</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span>This will output "bar", and do notice I call on -&gt;$var and not just -&gt;var.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="59128""></a>
  <div class="note">
   <strong class="user">Trevor Blackbird &gt; yurab.com</strong>
   <a href="#59128" class="date">27-Nov-2005 06:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can create a new object using the built-in stdClass or by using type-casting:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// This is the proper way<br />
</span><span class="default">$object1 </span><span class="keyword">= new </span><span class="default">stdClass</span><span class="keyword">();<br />
<br />
</span><span class="comment">// This works too<br />
</span><span class="default">$object2 </span><span class="keyword">= (object) </span><span class="default">NULL</span><span class="keyword">;<br />
<br />
</span><span class="comment">// This will create an object from an array<br />
</span><span class="default">$monkey_array </span><span class="keyword">= array(</span><span class="string">'title'</span><span class="keyword">=&gt;</span><span class="string">'Spider Monkey'</span><span class="keyword">, </span><span class="string">'src'</span><span class="keyword">=&gt;</span><span class="string">'monkey.jpg'</span><span class="keyword">);<br />
</span><span class="default">$monkey_object </span><span class="keyword">= (object) </span><span class="default">$monkey_array</span><span class="keyword">;<br />
print </span><span class="default">$monkey_object</span><span class="keyword">-&gt;</span><span class="default">title </span><span class="keyword">. </span><span class="string">' ' </span><span class="keyword">. </span><span class="default">$monkey_object</span><span class="keyword">-&gt;</span><span class="default">src</span><span class="keyword">;<br />
<br />
</span><span class="comment">// You can type-cast in the middle of an expression<br />
</span><span class="keyword">function </span><span class="default">customHTML</span><span class="keyword">(</span><span class="default">$some_object</span><span class="keyword">) {<br />
</span><span class="comment">// this function expects an object as the argument and returns some output<br />
</span><span class="keyword">}<br />
print </span><span class="string">'&lt;p&gt;Writing some output ' </span><span class="keyword">. </span><span class="default">customHTML</span><span class="keyword">( (object) array(</span><span class="string">'rows'</span><span class="keyword">=&gt;</span><span class="default">3</span><span class="keyword">, </span><span class="string">'cols'</span><span class="keyword">=&gt;</span><span class="default">4</span><span class="keyword">) );<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50770""></a>
  <div class="note">
   <strong class="user">iblun at gmx dot net</strong>
   <a href="#50770" class="date">09-Mar-2005 02:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To sort an array, that contains an object, after one fieldname inside the object, im using this function:<br />
<br />
function objectSort($objectarray, $field)<br />
{<br />
&nbsp;&nbsp;&nbsp; for ($a=0;$a &lt; (count($objectarray)); $a++)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for ($b=0;$b &lt; (count($objectarray)); $b++)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($objectarray[$a]-&gt;$field &lt; $objectarray[$b]-&gt;$field)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $temp = $objectarray[$a];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $objectarray[$a] = $objectarray[$b];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $objectarray[$b] = $temp;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return $objectarray;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50041""></a>
  <div class="note">
   <strong class="user">mortoray at ecircle-ag dot com</strong>
   <a href="#50041" class="date">16-Feb-2005 11:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you use new to create items in an array, you may not get the results you want since the parameters to array will be copies of the original and not references.<br />
<br />
By Example:<br />
class Store {<br />
&nbsp;&nbsp;&nbsp; var $item = 3;<br />
}<br />
<br />
&nbsp;&nbsp;&nbsp; $a = array( new Store() );<br />
&nbsp;&nbsp;&nbsp; $b = $a;<br />
&nbsp;&nbsp;&nbsp; $a[0]-&gt;item = 2;<br />
&nbsp;&nbsp;&nbsp; print( "|" . $b[0]-&gt;item . "| &lt;br&gt;" );&nbsp;&nbsp; //shows 3<br />
<br />
&nbsp;&nbsp;&nbsp; $a = array();<br />
&nbsp;&nbsp;&nbsp; $a[] =&amp; new Store();<br />
&nbsp;&nbsp;&nbsp; $b = $a;<br />
&nbsp;&nbsp;&nbsp; $a[0]-&gt;item = 2;<br />
&nbsp;&nbsp;&nbsp; print( "|" . $b[0]-&gt;item . "| &lt;br&gt;" );&nbsp;&nbsp; //shows 2<br />
<br />
This is extremely important if you intend on passing arrays of classes to functions and expect them to always use the same object instance!<br />
<br />
Note: The following syntax is desired (or maybe even the default notation should translate as this):<br />
&nbsp;&nbsp; $a = array( &amp;new Store() );</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="35258""></a>
  <div class="note">
   <strong class="user">info at keltoi-web dot com</strong>
   <a href="#35258" class="date">25-Aug-2003 11:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PHP supports recursive type definitions as far as I've tried. The class below (a _very_ simple tree) is an example:<br />
<br />
class Tree {<br />
<br />
var $_value = null;<br />
var $_children = array();<br />
<br />
function Tree ($value) {<br />
&nbsp; $this-&gt;_value = $value;<br />
}<br />
<br />
function addChild ($value) {<br />
&nbsp; $aux_node = new Tree ($value);<br />
&nbsp; $this-&gt;_children [] = $aux_node;<br />
&nbsp; return $aux_node; <br />
}<br />
}<br />
<br />
As you can see, in addChild we reference Tree again...<br />
<br />
However, you must be careful about references. See the chapter "References explained" for more details.<br />
<br />
Hope this helps.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

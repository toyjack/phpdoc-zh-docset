<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>基本语法</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="langref.html">? 语言参考</a></li>
      <li style="float: right;"><a href="language.basic-syntax.phptags.html">PHP 标记 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="langref.html">语言参考</a></li>
    <li>基本语法</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="language.basic-syntax" class="chapter">
 <h1>基本语法</h1>
<h2>Table of Contents</h2><ul class="chunklist chunklist_chapter"><li><a href="language.basic-syntax.phptags.html">PHP 标记</a></li><li><a href="language.basic-syntax.phpmode.html">从 HTML 中分离</a></li><li><a href="language.basic-syntax.instruction-separation.html">指令分隔符</a></li><li><a href="language.basic-syntax.comments.html">注释</a></li></ul>

 

 

 

 
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="59663""></a>
  <div class="note">
   <strong class="user">Michael Newton (http://mike.eire.ca/)</strong>
   <a href="#59663" class="date">13-Dec-2005 12:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The XML declaration does not need to be handled specially.<br />
<br />
You should output it via an echo statement, in case your code is ever used on a server that is (poorly) configured to use short open tags.<br />
<br />
But there's no need to treat the ?&gt; at the end of the string specially.&nbsp; That's because it's in a string.&nbsp; The only thing PHP ever looks for in a string is \ or $ (the latter only in double-quoted strings.)<br />
<br />
I have never had need for the following, as some have suggested below:<br />
<br />
<span class="default">&lt;?php<br />
$xml</span><span class="keyword">=</span><span class="default">rawurldecode</span><span class="keyword">(</span><span class="string">'%3C%3Fxml%20version%3D%221.0%22%3F%3E'</span><span class="keyword">);<br />
echo(</span><span class="default">$xml</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
<span class="default">&lt;?php </span><span class="keyword">echo </span><span class="string">'&lt;?xml version="1.0" ?'</span><span class="keyword">.</span><span class="string">'&gt;' </span><span class="default">?&gt;<br />
</span><br />
<span class="default">&lt;?php </span><span class="keyword">echo </span><span class="string">"&lt;?xml version=\"1.0\"\x3F&gt;" </span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57086""></a>
  <div class="note">
   <strong class="user">php [AT] jsomers [DOT] be</strong>
   <a href="#57086" class="date">23-Sep-2005 09:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PEAR states:
<br />

<br />
Always use <span class="default">&lt;?php ?&gt;</span> to delimit PHP code, not the &lt;? ?&gt; shorthand. This is required for PEAR compliance and is also the most portable way to include PHP code on differing operating systems and setups.
<br />

<br />
It is these small things that enhance readability in group projects, or libraries.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51513""></a>
  <div class="note">
   <strong class="user">p o r g e s at the gmail dot com server</strong>
   <a href="#51513" class="date">02-Apr-2005 05:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
mike at skew dot org, I believe the differentiation is that "x"-"m"-"l" as a PI target is explicitly excluded from the definition of processing instructions.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46746""></a>
  <div class="note">
   <strong class="user">mike at skew dot org</strong>
   <a href="#46746" class="date">22-Oct-2004 01:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
mart3862 mentions "XML processing instructions" and quotes their syntax from the spec, but is mistaken in using<br />
<br />
&lt;?xml version="1.0" ...?&gt;<br />
<br />
as an example. This little bit of markup that appears at the beginning of an XML file is in fact not a processing instruction at all; it is an "XML declaration" -- or, if it appears in an entity other than the main document, a "text declaration". All three constructs are formatted slightly differently, although they all do begin and end with the same.<br />
<br />
The difference between a processing instruction, an XML declaration, or a text declaration is more than just a matter of subtle differences in syntax, though. A processing instruction embodies exactly two opaque, author-defined pieces of information (a 'target' and an 'instruction') that are considered to be part of the document's logical structure and that are thus made available to an application by the XML parser. An XML or text declaration, on the other hand, contains one to three specific pieces of information (version, encoding, standalone status), each with a well-defined meaning. This info provides cues to the parser to help it know how to read the file; it is not considered part of the document's logical structure and is not made available to the application.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46708""></a>
  <div class="note">
   <strong class="user">stooges_cubed at racerx dot net</strong>
   <a href="#46708" class="date">20-Oct-2004 10:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In the note above about escaping XML/PHP style &lt;?xml tags, the following code was used:
<br />

<br />
<span class="default">&lt;?php&nbsp; </span><span class="comment">// Html safe containers
<br />

<br />
&nbsp;&nbsp; </span><span class="keyword">echo &lt;&lt;&lt;EOD
<br />
</span><span class="string">&lt;?xml version="1.0"?&gt;
<br />
...all sorts of XML goes here...
<br />
Nothing will affect the output of this code until:
<br />
</span><span class="keyword">EOD;
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
EOD is just an example stop/start name.
<br />

<br />
This works too:
<br />

<br />
<span class="default">&lt;?php&nbsp; </span><span class="comment">// Html safe containers
<br />

<br />
&nbsp; </span><span class="default">$myOutput </span><span class="keyword">= &lt;&lt;&lt;MYHTMLSAFEOUTPUT
<br />
</span><span class="string">&lt;?xml version="1.0"?&gt;
<br />
&lt;html&gt;
<br />
&nbsp; &lt;title&gt;PHP Example&lt;/title&gt;
<br />
&nbsp; &lt;body&gt;
<br />
&nbsp;&nbsp; &lt;p&gt;...all sorts goes here...&lt;/p&gt;
<br />
&nbsp; &lt;/body&gt;
<br />
&lt;/html&gt;
<br />
</span><span class="keyword">MYHTMLSAFEOUTPUT;
<br />

<br />
echo </span><span class="default">$myOutput</span><span class="keyword">;
<br />

<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Only disadvantage of using this is that all the code highlighting programs I've seen never get it right, making your code look eronous in the majority of viewers.
<br />

<br />
Another alternative is to keep the XML / HTML in a separate include file and read in when needed. I don't know how efficient/inefficient this is for (idiots like yourselves) small amounts of text.
<br />

<br />
xmlheader.txt:
<br />
&lt;?xml version="1.0"?&gt;
<br />

<br />
mypage.php:
<br />
<span class="default">&lt;?php
<br />
&nbsp; </span><span class="keyword">include(</span><span class="string">"xmlheader.txt"</span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42055""></a>
  <div class="note">
   <strong class="user">crtrue at coastal dot edu</strong>
   <a href="#42055" class="date">01-May-2004 08:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Although you can use the above methods to pass a document off as a valid for the W3C parser, a simpler-and-perfectly-legal method of doing so is to simple declare the document type in a meta tag. Something along these lines (mind the values in 'content' - I haven't personally used the Content-Type method in awhile):<br />
<br />
&lt;meta http-equiv="Content-Type" content="application/xml+xhtml; CHARSET=gb2312" /&gt;<br />
<br />
Of course if you're using just XML, and don't use such functions, then the above methods will work just as fine.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41654""></a>
  <div class="note">
   <strong class="user">mart3862 at yahoo dot com dot au</strong>
   <a href="#41654" class="date">18-Apr-2004 06:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Now the ultimate truth on how you should output xml processing instructions:<br />
<br />
There have been several posts suggesting ways to include the text &lt;?xml version="1.0" encoding="utf-8"?&gt; in your output when short_tags is turned on, but only the following should be used:<br />
<br />
<span class="default">&lt;?php </span><span class="keyword">echo </span><span class="string">'&lt;?xml version="1.0" ?'</span><span class="keyword">.</span><span class="string">'&gt;' </span><span class="default">?&gt;<br />
</span>or<br />
<span class="default">&lt;?php </span><span class="keyword">echo </span><span class="string">"&lt;?xml version=\"1.0\"\x3F&gt;" </span><span class="default">?&gt;<br />
</span><br />
Using one of these methods, and not making use of short tags, means your source code will also be a valid XML document, which allows you to do many things with it such as validation, XSLT translations, etc, as well as allowing your text editor to parse your code for syntax colouring.&nbsp; Every PHP tag will simply be interpreted as an XML processing instruction (commonly referred to as PI).<br />
<br />
The reason why all the other suggested methods are not advisable is because they contain the characters ?&gt; inside the PHP tag, which the XML parser will interpret as the end of the processing instruction.<br />
<br />
A processing instruction is defined in XML as:<br />
<br />
PI ::= '&lt;?' PITarget (S (Char* - (Char* '?&gt;' Char*)))? '?&gt;' <br />
<br />
In other words, it explicitly forbids the characters ?&gt; to occur together within a processing instruction, unless they are delimiting the end of the tag.&nbsp; It also requires a PITarget (an identifier starting with a letter) immediately after the initial start delimiter, which means that all short tag formats are also invalid XML.<br />
<br />
Following these guidelines will result in code that is portable to servers with any configuration and allow you perform many useful tasks on your XML or XHTML source documents.&nbsp; Even if you do not intend to validate or translate your source documents, and you can ignore some incorrect syntax colouring in your text editor, it is still best to get into good habits early.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="40097""></a>
  <div class="note">
   <strong class="user">Anon</strong>
   <a href="#40097" class="date">22-Feb-2004 03:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Yet another way of adding the XML processing instruction is to use:<br />
<br />
<span class="default">&lt;?php </span><span class="keyword">echo </span><span class="string">'&lt;?xml version="1.0" ?'</span><span class="keyword">.</span><span class="string">'&gt;' </span><span class="default">?&gt;<br />
</span><br />
Because the ? and &gt; are separated, the parser will not terminate before it is supposed to.<br />
<br />
As a side note, the W3C's parser seems to recognise this method (assuming it even checks for the PI).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="38084""></a>
  <div class="note">
   <strong class="user">johnbeech at (not saying) mkv25 dot net</strong>
   <a href="#38084" class="date">08-Dec-2003 01:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In the note above about escaping XML/PHP style &lt;?xml tags, the following code was used:
<br />

<br />
<span class="default">&lt;?php&nbsp; </span><span class="comment">// Html safe containers
<br />

<br />
&nbsp;&nbsp; </span><span class="keyword">echo &lt;&lt;&lt;EOD
<br />
</span><span class="string">&lt;?xml version="1.0"?&gt;
<br />
...all sorts of XML goes here...
<br />
Nothing will affect the output of this code until:
<br />
</span><span class="keyword">EOD;
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
EOD is just an example stop/start name.
<br />

<br />
This works too:
<br />

<br />
<span class="default">&lt;?php&nbsp; </span><span class="comment">// Html safe containers
<br />

<br />
&nbsp; </span><span class="default">$myOutput </span><span class="keyword">= &lt;&lt;&lt;MYHTMLSAFEOUTPUT
<br />
</span><span class="string">&lt;?xml version="1.0"?&gt;
<br />
&lt;html&gt;
<br />
&nbsp; &lt;title&gt;PHP Example&lt;/title&gt;
<br />
&nbsp; &lt;body&gt;
<br />
&nbsp;&nbsp;&nbsp; &lt;p&gt;...all sorts goes here...&lt;/p&gt;
<br />
&nbsp; &lt;/body&gt;
<br />
&lt;/html&gt;
<br />
</span><span class="keyword">MYHTMLSAFEOUTPUT;
<br />

<br />
echo </span><span class="default">$myOutput</span><span class="keyword">;
<br />

<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Only disadvantage of using this is that all the code highlighting programs I've seen never get it right, making your code look eronous in the majority of viewers.
<br />

<br />
Another alternative is to keep the XML / HTML in a separate include file and read in when needed. I don't know how efficient/inefficient this is for small amounts of text.
<br />

<br />
xmlheader.txt:
<br />
&lt;?xml version="1.0"?&gt;
<br />

<br />
mypage.php:
<br />
<span class="default">&lt;?php
<br />
&nbsp; </span><span class="keyword">include(</span><span class="string">"xmlheader.txt"</span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="19982""></a>
  <div class="note">
   <strong class="user">dave at [nospam] dot netready dot biz</strong>
   <a href="#19982" class="date">18-Mar-2002 01:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A little "feature" of PHP I've discovered is that the <span class="default">&lt;?PHP token requires a space after it whereas after the </span><span class="keyword">&lt;? and &lt;% </span><span class="default">tokens a space is optional</span><span class="keyword">.<br />
<br />
</span><span class="default">The error message you get </span><span class="keyword">if </span><span class="default">you miss the space is not too helpful so be warned</span><span class="keyword">!<br />
<br />
(</span><span class="default">These examples only give a warning with error_reporting</span><span class="keyword">(</span><span class="default">E_ALL</span><span class="keyword">) )<br />
<br />
&lt;?</span><span class="default">PHP</span><span class="comment">/*&lt;Some HTML&gt;*/</span><span class="default">?&gt;</span> fails...<br />
&lt;?/*&lt;Some HTML&gt;*/?&gt; works...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="17505""></a>
  <div class="note">
   <strong class="user">mrtidy at mail dot com</strong>
   <a href="#17505" class="date">12-Dec-2001 09:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
[Ed Note:
<br />
This is because of short_tags, &lt;?xml turns php parsing on, because of the &lt;?.
<br />
--irc-html@php.net]
<br />

<br />
I am moving my site to XHTML and I ran into trouble with the &lt;?xml ?&gt; interfering with the <span class="default">&lt;?php ?&gt;</span> method of escaping for HTML.&nbsp; A quick check of the mailing list confirmed that the current preferred method to cleanly output the &lt;?xml ?&gt; line is to echo it:&lt;br&gt;
<br />
<span class="default">&lt;?php </span><span class="keyword">echo(</span><span class="string">"&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n"</span><span class="keyword">); </span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

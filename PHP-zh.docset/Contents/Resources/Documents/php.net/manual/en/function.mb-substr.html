<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>获取字符串的部分</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.mb-substr-count.html">? mb_substr_count</a></li>
      <li style="float: right;"><a href="book.pspell.html">Pspell ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.mbstring.html">多字节字符串 函数</a></li>
    <li>获取字符串的部分</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.mb-substr" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">mb_substr</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.6, PHP 5)</p><p class="refpurpose"><span class="refname">mb_substr</span> &mdash; <span class="dc-title">获取字符串的部分</span></p>

 </div>
   
 <div class="refsect1 description" id="refsect1-function.mb-substr-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><strong>mb_substr</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$str</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$start</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$length</code><span class="initializer"> = NULL</span></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$encoding</code><span class="initializer"> = mb_internal_encoding()</span></span>
  ]] )</div>

  <p class="para rdfs-comment">
   根据字符数执行一个多字节安全的 <span class="function"><a href="function.substr.html" class="function">substr()</a></span> 操作。
   位置是从 <code class="parameter">str</code> 的开始位置进行计数。
   第一个字符的位置是 0。第二个字符的位置是 1，以此类推。 
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.mb-substr-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">str</code></dt>

     <dd>

      <p class="para">
       从该 <span class="type"><a href="language.types.string.html" class="type string">string</a></span> 中提取子字符串。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">start</code></dt>

     <dd>

      <p class="para">
       <code class="parameter">str</code> 中要使用的第一个字符的位置。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">length</code></dt>

     <dd>

      <p class="para">
       <code class="parameter">str</code> 中要使用的最大字符数。
       If
       omitted or <em>NULL</em> is passed, extract all characters to
       the end of the string.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">encoding</code></dt>

     <dd>

      <p class="para"><code class="parameter">encoding</code>
参数为字符编码。如果省略，则使用内部字符编码。</p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.mb-substr-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   <span class="function"><strong>mb_substr()</strong></span> 函数根据 <code class="parameter">start</code> 和 <code class="parameter">length</code> 参数返回 <code class="parameter">str</code> 中指定的部分。
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.mb-substr-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.mb-strcut.html" class="function" rel="rdfs-seeAlso">mb_strcut()</a> - 获取字符的一部分</span></li>
    <li class="member"><span class="function"><a href="function.mb-internal-encoding.html" class="function" rel="rdfs-seeAlso">mb_internal_encoding()</a> - 设置/获取内部字符编码</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="116272""></a>
  <div class="note">
   <strong class="user">247hastings at gmail dot com</strong>
   <a href="#116272" class="date">04-Dec-2014 10:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Starting in PHP 5.4.8 passing a null as a default value to mb_substr() and mb_strcut() will work as expected.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113329""></a>
  <div class="note">
   <strong class="user">sanjuro at 1up-games dot com</strong>
   <a href="#113329" class="date">28-Sep-2013 03:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A serious pitfall when using mb_substr() set to HTML-ENTITIES encoding is that the function performs a number of conversions before returning the value, the worst one being that html special characters are not just counted but decoded.<br />
<br />
<span class="default">&lt;?php<br />
<br />
mb_internal_encoding</span><span class="keyword">(</span><span class="string">"ISO-8859-1"</span><span class="keyword">); echo </span><span class="default">mb_internal_encoding</span><span class="keyword">(),</span><span class="string">"\n&lt;br&gt;&lt;br&gt;\n"</span><span class="keyword">;<br />
<br />
</span><span class="default">$a</span><span class="keyword">=</span><span class="string">'j&amp;uuml;st &amp;#228; &amp;quot; simple &amp;quot; &amp;#26085;&amp;#26412; &amp;lt;b&amp;gt;test&amp;lt;/b&amp;gt;'</span><span class="keyword">;<br />
<br />
echo </span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">),</span><span class="string">"\n&lt;br&gt;&lt;br&gt;\n"</span><span class="keyword">;<br />
</span><span class="comment">// page source: j&amp;uuml;st &amp;#228; &amp;quot; simple &amp;quot; &amp;#26085;&amp;#26412; &amp;lt;b&amp;gt;test&amp;lt;/b&amp;gt;<br />
<br />
</span><span class="keyword">echo </span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">),</span><span class="string">'HTML-ENTITIES'</span><span class="keyword">);<br />
</span><span class="comment">// page source: j&amp;uuml;st &amp;auml; " simple " &amp;#26085;&amp;#26412; &lt;b&gt;test&lt;/b&gt;<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112070""></a>
  <div class="note">
   <strong class="user">desmatic at gmail dot com</strong>
   <a href="#112070" class="date">30-Apr-2013 12:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
quick and dirty loop through multibyte string<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">get_character_classes</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$encoding </span><span class="keyword">= </span><span class="string">"UTF-8"</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$current_encoding </span><span class="keyword">= </span><span class="default">mb_internal_encoding</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">mb_internal_encoding</span><span class="keyword">(</span><span class="default">$encoding</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$has </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$stringlength </span><span class="keyword">= </span><span class="default">mb_strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$stringlength</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ((</span><span class="default">$c </span><span class="keyword">&gt;= </span><span class="string">"0"</span><span class="keyword">) &amp;&amp; (</span><span class="default">$c </span><span class="keyword">&lt;= </span><span class="string">"9"</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$has</span><span class="keyword">[</span><span class="string">'numeric'</span><span class="keyword">] = </span><span class="string">"numeric"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else if ((</span><span class="default">$c </span><span class="keyword">&gt;= </span><span class="string">"a"</span><span class="keyword">) &amp;&amp; (</span><span class="default">$c </span><span class="keyword">&lt;= </span><span class="string">"z"</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$has</span><span class="keyword">[</span><span class="string">'alpha'</span><span class="keyword">] = </span><span class="string">"alpha"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$has</span><span class="keyword">[</span><span class="string">'alphalower'</span><span class="keyword">] = </span><span class="string">'alphalower'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else if ((</span><span class="default">$c </span><span class="keyword">&gt;= </span><span class="string">"A"</span><span class="keyword">) &amp;&amp; (</span><span class="default">$c </span><span class="keyword">&lt;= </span><span class="string">"Z"</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$has</span><span class="keyword">[</span><span class="string">'alpha'</span><span class="keyword">] = </span><span class="string">"alpha"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$has</span><span class="keyword">[</span><span class="string">'alphaupper'</span><span class="keyword">] = </span><span class="string">"alphaupper"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else if ((</span><span class="default">$c </span><span class="keyword">== </span><span class="string">"$"</span><span class="keyword">) || (</span><span class="default">$c </span><span class="keyword">== </span><span class="string">"￡"</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$has</span><span class="keyword">[</span><span class="string">'currency'</span><span class="keyword">] = </span><span class="string">"currency"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else if ((</span><span class="default">$c </span><span class="keyword">== </span><span class="string">"."</span><span class="keyword">) &amp;&amp; (</span><span class="default">$has</span><span class="keyword">[</span><span class="string">'decimal'</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$has</span><span class="keyword">[</span><span class="string">'decimals'</span><span class="keyword">] = </span><span class="string">"decimals"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else if (</span><span class="default">$c </span><span class="keyword">== </span><span class="string">"."</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$has</span><span class="keyword">[</span><span class="string">'decimal'</span><span class="keyword">] = </span><span class="string">"decimal"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else if (</span><span class="default">$c </span><span class="keyword">== </span><span class="string">","</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$has</span><span class="keyword">[</span><span class="string">'comma'</span><span class="keyword">] = </span><span class="string">"comma"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else if (</span><span class="default">$c </span><span class="keyword">== </span><span class="string">"-"</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$has</span><span class="keyword">[</span><span class="string">'dash'</span><span class="keyword">] = </span><span class="string">"dash"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else if (</span><span class="default">$c </span><span class="keyword">== </span><span class="string">" "</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$has</span><span class="keyword">[</span><span class="string">'space'</span><span class="keyword">] = </span><span class="string">"space"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else if (</span><span class="default">$c </span><span class="keyword">== </span><span class="string">"/"</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$has</span><span class="keyword">[</span><span class="string">'slash'</span><span class="keyword">] = </span><span class="string">"slash"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else if (</span><span class="default">$c </span><span class="keyword">== </span><span class="string">":"</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$has</span><span class="keyword">[</span><span class="string">'colon'</span><span class="keyword">] = </span><span class="string">"colon"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else if ((</span><span class="default">$c </span><span class="keyword">&gt;= </span><span class="string">" "</span><span class="keyword">) &amp;&amp; (</span><span class="default">$c </span><span class="keyword">&lt;= </span><span class="string">"~"</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$has</span><span class="keyword">[</span><span class="string">'ascii'</span><span class="keyword">] = </span><span class="string">"ascii"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$has</span><span class="keyword">[</span><span class="string">'binary'</span><span class="keyword">] = </span><span class="string">"binary"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">mb_internal_encoding</span><span class="keyword">(</span><span class="default">$current_encoding</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$has</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$string </span><span class="keyword">= </span><span class="string">"1234asdfA￡^_{}|}~????"</span><span class="keyword">;<br />
echo </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">get_character_classes</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">), </span><span class="default">true</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [numeric] =&gt; numeric<br />
&nbsp;&nbsp;&nbsp; [alpha] =&gt; alpha<br />
&nbsp;&nbsp;&nbsp; [alphalower] =&gt; alphalower<br />
&nbsp;&nbsp;&nbsp; [alphaupper] =&gt; alphaupper<br />
&nbsp;&nbsp;&nbsp; [currency] =&gt; currency<br />
&nbsp;&nbsp;&nbsp; [ascii] =&gt; ascii<br />
&nbsp;&nbsp;&nbsp; [binary] =&gt; binary<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107698""></a>
  <div class="note">
   <strong class="user">qeremy [atta] gmail [dotta] com</strong>
   <a href="#107698" class="date">28-Feb-2012 12:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A proper (logical) alternative for unicode strings;<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">substr_unicode</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">, </span><span class="default">$l </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">join</span><span class="keyword">(</span><span class="string">""</span><span class="keyword">, </span><span class="default">array_slice</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">preg_split</span><span class="keyword">(</span><span class="string">"//u"</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">, </span><span class="default">PREG_SPLIT_NO_EMPTY</span><span class="keyword">), </span><span class="default">$s</span><span class="keyword">, </span><span class="default">$l</span><span class="keyword">));<br />
}<br />
<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="string">"Büyük"</span><span class="keyword">;<br />
</span><span class="default">$s </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="comment">// start from "0" (nth) char<br />
</span><span class="default">$l </span><span class="keyword">= </span><span class="default">3</span><span class="keyword">; </span><span class="comment">// get "3" chars<br />
</span><span class="keyword">echo </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">, </span><span class="default">$l</span><span class="keyword">) .</span><span class="string">"\n"</span><span class="keyword">;&nbsp; &nbsp; </span><span class="comment">// Bü<br />
</span><span class="keyword">echo </span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">, </span><span class="default">$l</span><span class="keyword">) .</span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">// Bü<br />
</span><span class="keyword">echo </span><span class="default">substr_unicode</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">, </span><span class="default">$l</span><span class="keyword">);&nbsp; </span><span class="comment">// Büy<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106737""></a>
  <div class="note">
   <strong class="user">p dot assenov at aip-solutions dot com</strong>
   <a href="#106737" class="date">02-Dec-2011 06:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I'm trying to capitalize only the first character of the string and tried some of the examples above but they didn't work. It seems mb_substr() cannot calculate the length of the string in multi-byte encoding (UTF-8) and it should be set explicitly. Here is the corrected version:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">mb_ucfirst</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$enc </span><span class="keyword">= </span><span class="string">'utf-8'</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">mb_strtoupper</span><span class="keyword">(</span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">$enc</span><span class="keyword">), </span><span class="default">$enc</span><span class="keyword">).</span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">mb_strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$enc</span><span class="keyword">), </span><span class="default">$enc</span><span class="keyword">);
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
cheers!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98958""></a>
  <div class="note">
   <strong class="user">levani9191 at gmail dot com</strong>
   <a href="#98958" class="date">18-Jul-2010 12:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A simple code that check if the latest symbol in the string is a question mark and adds one if it doesn't...<br />
<br />
<span class="default">&lt;?php $string </span><span class="keyword">= (</span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="string">'UTF-8'</span><span class="keyword">) != </span><span class="string">'?'</span><span class="keyword">) ? </span><span class="default">$string</span><span class="keyword">.</span><span class="string">'?' </span><span class="keyword">: </span><span class="default">$string</span><span class="keyword">; </span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96426""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#96426" class="date">26-Feb-2010 02:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If start&nbsp; is negative, the returned string will start at the start'th character from the end of string</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86473""></a>
  <div class="note">
   <strong class="user">projektas at gmail dot com</strong>
   <a href="#86473" class="date">21-Oct-2008 03:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
First letter in upper case &lt;hr /&gt;<br />
<br />
<span class="default">&lt;?php<br />
header </span><span class="keyword">(</span><span class="string">'Content-type: text/html; CHARSET=gb2312'</span><span class="keyword">);<br />
<br />
if (isset(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'check'</span><span class="keyword">]) &amp;&amp; !empty(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'check'</span><span class="keyword">])) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">htmlspecialchars</span><span class="keyword">(</span><span class="default">ucfirst_utf8</span><span class="keyword">(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'check'</span><span class="keyword">]));<br />
} else {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">htmlspecialchars</span><span class="keyword">(</span><span class="default">ucfirst_utf8</span><span class="keyword">(</span><span class="string">'??sin?'</span><span class="keyword">));<br />
}<br />
<br />
function </span><span class="default">ucfirst_utf8</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">mb_check_encoding</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="string">'UTF-8'</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$first </span><span class="keyword">= </span><span class="default">mb_substr</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">mb_strtoupper</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="string">"utf-8"</span><span class="keyword">),</span><span class="default">0</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="string">'utf-8'<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$first</span><span class="keyword">.</span><span class="default">mb_substr</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">mb_strtolower</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="string">"utf-8"</span><span class="keyword">),</span><span class="default">1</span><span class="keyword">,</span><span class="default">mb_strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">),</span><span class="string">'utf-8'<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$str</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
&lt;form method="post" action="" &gt;<br />
&nbsp;&nbsp;&nbsp; &lt;input type="input" name="check" /&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;input type="submit" /&gt;<br />
&lt;/form&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77515""></a>
  <div class="note">
   <strong class="user">Silvan</strong>
   <a href="#77515" class="date">02-Sep-2007 12:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Passing null as length will not make mb_substr use it's default, instead it will interpret it as 0.<br />
<span class="default">&lt;?php<br />
mb_substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">null</span><span class="keyword">,</span><span class="default">$encoding</span><span class="keyword">); </span><span class="comment">//Returns '' (empty string) just like substr()<br />
</span><span class="default">?&gt;<br />
</span>Instead use:<br />
<span class="default">&lt;?php<br />
mb_substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">mb_strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">),</span><span class="default">$encoding</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55405""></a>
  <div class="note">
   <strong class="user">xiaogil at yahoo dot fr</strong>
   <a href="#55405" class="date">02-Aug-2005 05:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Thanks Darien from /freenode #php for the following example (a little bit changed).<br />
<br />
It just prints the 6th character of $string.<br />
You can replace the digits by the same in japanese, chinese or whatever language to make a test, it works perfect.<br />
<br />
<span class="default">&lt;?php<br />
mb_internal_encoding</span><span class="keyword">(</span><span class="string">"UTF-8"</span><span class="keyword">);<br />
</span><span class="default">$string </span><span class="keyword">= </span><span class="string">"0123456789"</span><span class="keyword">;<br />
</span><span class="default">$mystring </span><span class="keyword">= </span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br />
echo </span><span class="default">$mystring</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
(I couldn't replace 0123456789 by chinese numbers for example here, because it's automatically converted into latin digits on this website, look : <br />
&amp;#38646;&amp;#19968;&amp;#20108;&amp;#19977;&amp;#22235;<br />
&amp;#20116;&amp;#20845;&amp;#19971;&amp;#20843;&amp;#20061;)<br />
<br />
gilv</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50275""></a>
  <div class="note">
   <strong class="user">drraf at tlen dot pl</strong>
   <a href="#50275" class="date">23-Feb-2005 03:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note: If borders are out of string - mb_string() returns empty _string_, when function substr() returns _boolean_ false in this case.<br />
Keep this in mind when using "===" comparisions.<br />
<br />
Example code:<br />
<span class="default">&lt;?php<br />
<br />
var_dump</span><span class="keyword">( </span><span class="default">substr</span><span class="keyword">( </span><span class="string">'abc'</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">, </span><span class="default">2 </span><span class="keyword">) ); </span><span class="comment">// returns "false"<br />
</span><span class="default">var_dump</span><span class="keyword">( </span><span class="default">mb_substr</span><span class="keyword">( </span><span class="string">'abc'</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">, </span><span class="default">2 </span><span class="keyword">) ); </span><span class="comment">// returns ""<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
It's especially confusing when using mbstring with function overloading turned on.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

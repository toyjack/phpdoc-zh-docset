<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Add attribute values to current attributes</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.ldap-list.html">? ldap_list</a></li>
      <li style="float: right;"><a href="function.ldap-mod-del.html">ldap_mod_del ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.ldap.html">LDAP 函数</a></li>
    <li>Add attribute values to current attributes</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.ldap-mod-add" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">ldap_mod_add</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7)</p><p class="refpurpose"><span class="refname">ldap_mod_add</span> &mdash; <span class="dc-title">Add attribute values to current attributes</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.ldap-mod-add-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><strong>ldap_mod_add</strong></span>
    ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$link_identifier</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$dn</code></span>
   , <span class="methodparam"><span class="type">array</span> <code class="parameter">$entry</code></span>
   )</div>

  <p class="para rdfs-comment">
   Adds one or more attributes to the specified <code class="parameter">dn</code>.
   It performs the modification at the attribute level as opposed to the
   object level. Object-level additions are done by the
   <span class="function"><a href="function.ldap-add.html" class="function">ldap_add()</a></span> function.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.ldap-mod-add-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">link_identifier</code></dt>

     <dd>

      <p class="para">
       An LDAP link identifier, returned by <span class="function"><a href="function.ldap-connect.html" class="function">ldap_connect()</a></span>.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">dn</code></dt>

     <dd>

      <p class="para">
       The distinguished name of an LDAP entity.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">entry</code></dt>

     <dd>

      <p class="para">
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.ldap-mod-add-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   成功时返回 <strong><code>TRUE</code></strong>， 或者在失败时返回 <strong><code>FALSE</code></strong>。
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.ldap-mod-add-notes">
  <h3 class="title">注释</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">此函数可安全用于二进制对象。</span></p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.ldap-mod-add-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.ldap-mod-del.html" class="function" rel="rdfs-seeAlso">ldap_mod_del()</a> - Delete attribute values from current attributes</span></li>
    <li class="member"><span class="function"><a href="function.ldap-mod-replace.html" class="function" rel="rdfs-seeAlso">ldap_mod_replace()</a> - Replace attribute values with new ones</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="113619""></a>
  <div class="note">
   <strong class="user">bart-holland at wedefo dot nl</strong>
   <a href="#113619" class="date">07-Nov-2013 12:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Adding a user to a group in Apple's OpenDirectory goes as follows: <br />
<br />
<span class="default">&lt;?php<br />
<br />
$dn </span><span class="keyword">= </span><span class="string">"cn=groupname,cn=groups,dc=example,dc=com"</span><span class="keyword">;<br />
</span><span class="default">$entry</span><span class="keyword">[</span><span class="string">'memberuid'</span><span class="keyword">] = </span><span class="string">"username"</span><span class="keyword">;<br />
<br />
</span><span class="default">ldap_mod_add</span><span class="keyword">(</span><span class="default">$connect</span><span class="keyword">, </span><span class="default">$dn</span><span class="keyword">, </span><span class="default">$entry</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54821""></a>
  <div class="note">
   <strong class="user">theiderich AT laweekly dot com</strong>
   <a href="#54821" class="date">16-Jul-2005 12:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When adding/editing attributes for a user, the 'memberof' attribute is a special case.&nbsp; The memberOf attribute is not an accessible attribute of the user schema. To add someone to a group, you have to add the user in the group, and not the group in the user. You can do this by accessing the group attribute 'member':<br />
<br />
<span class="default">&lt;?php<br />
<br />
$group_name </span><span class="keyword">= </span><span class="string">"CN=MyGroup,OU=Groups,DC=example,DC=com"</span><span class="keyword">;<br />
</span><span class="default">$group_info</span><span class="keyword">[</span><span class="string">'member'</span><span class="keyword">] = </span><span class="default">$dn</span><span class="keyword">; </span><span class="comment">// User's DN is added to group's 'member' array<br />
</span><span class="default">ldap_mod_add</span><span class="keyword">(</span><span class="default">$connect</span><span class="keyword">,</span><span class="default">$group_name</span><span class="keyword">,</span><span class="default">$group_info</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="29852""></a>
  <div class="note">
   <strong class="user">Claudio Lente &lt;nelchael at ig dot com dot br&gt;</strong>
   <a href="#29852" class="date">26-Feb-2003 11:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Using PHP 4.2.3 with IIS 5 and Win2k Server. My confs are:<br />
<br />
$ldap_srvr = 'servername' ;<br />
$ldap_port = 389;<br />
$ldap_con = ldap_connect($ldap_srvr, $ldap_port);<br />
$ldap_rdn&nbsp; = "username";<br />
$ldap_pwd = "__password__"; <br />
<br />
$ldap_vbind = ldap_bind($ldap_con, $ldap_rdn, $ldap_pwd);<br />
<br />
$base_dn= 'CN=username,CN=Users,DC=domain,DC=org,DC=us<br />
' ;<br />
$ldap_filter= 'objectClass=*';<br />
<br />
$info['mail']='username@domain.org.us';<br />
<br />
ldap_mod_add($ldap_con, $base_dn, $info);<br />
ldap_add($ldap_con, $base_dn, $info);<br />
<br />
this generate an error: <br />
- Warning: LDAP: modify operation could not be completed. in <br />
<br />
ldap_modify($ldap_con, $base_dn, $info);<br />
<br />
this function corretly.<br />
<br />
It?s all.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="15189""></a>
  <div class="note">
   <strong class="user">JoshuaStarr at aelana dot com</strong>
   <a href="#15189" class="date">31-Aug-2001 07:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To add a new attribute with a single value:
<br />

<br />
$entry[mail] = "newmail@aelana.com";
<br />
$results = ldap_mod_add($ldapConnID, $dn, $entry);
<br />

<br />
To add a new attribute with multiple values:
<br />

<br />
$entry[mail][] = "newmail@aelana.com";
<br />
$entry[mail][] = "altnewmail@aelana.com";
<br />
$results = ldap_mod_add($ldapConnID, $dn, $entry);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

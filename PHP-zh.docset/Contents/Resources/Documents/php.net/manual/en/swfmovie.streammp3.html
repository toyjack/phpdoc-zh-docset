<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Streams a MP3 file</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="swfmovie.stopsound.html">? SWFMovie::stopSound</a></li>
      <li style="float: right;"><a href="swfmovie.writeexports.html">SWFMovie::writeExports ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.swfmovie.html">SWFMovie</a></li>
    <li>Streams a MP3 file</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="swfmovie.streammp3" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">SWFMovie::streamMP3</h1>
  <p class="verinfo">(PHP 5 &lt;= 5.3.0, PECL ming SVN)</p><p class="refpurpose"><span class="refname">SWFMovie::streamMP3</span> &mdash; <span class="dc-title">Streams a MP3 file</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-swfmovie.streammp3-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><strong>SWFMovie::streamMP3</strong></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$mp3file</code></span>
   [, <span class="methodparam"><span class="type">float</span> <code class="parameter">$skip</code><span class="initializer"> = 0</span></span>
  ] )</div>

  <div class="warning"><strong class="warning">Warning</strong><p class="simpara">此函数是<em class="emphasis">实验性</em>的。此函数的表象，包括名称及其相关文档都可能在未来的
PHP 发布版本中未通知就被修改。使用本函数风险自担 。</p></div>
  <p class="para">
   Streams the given MP3 file <code class="parameter">mp3file</code>.
  </p>
  <p class="para">
   This method is not very robust in dealing with oddities (can skip over an
   initial ID3 tag, but that&#039;s about it). 
  </p>
  <p class="para">
   Note that the movie isn&#039;t smart enough to put enough frames in to contain 
   the entire mp3 stream- you&#039;ll have to add (length of song * frames per second)
   frames to get the entire stream in. 
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-swfmovie.streammp3-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">mp3file</code></dt>

     <dd>

      <p class="para">
       Can be a file pointer returned by <span class="function"><a href="function.fopen.html" class="function">fopen()</a></span> or the 
       MP3 data, as a binary string.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">skip</code></dt>

     <dd>

      <p class="para">
       Number of seconds to skip.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 
 <div class="refsect1 returnvalues" id="refsect1-swfmovie.streammp3-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   Return number of frames.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-swfmovie.streammp3-changelog">
  <h3 class="title">更新日志</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>版本</th>
       <th>说明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.2.0</td>
       <td><code class="parameter">skip</code> added</td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-swfmovie.streammp3-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-3963">
    <p><strong>Example #1 Streaming example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SWFMovie</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setRate</span><span style="color: #007700">(</span><span style="color: #0000BB">12.0</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">streamMp3</span><span style="color: #007700">(</span><span style="color: #0000BB">file_get_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">"distortobass.mp3"</span><span style="color: #007700">));<br /></span><span style="color: #FF8000">//&nbsp;use&nbsp;your&nbsp;own&nbsp;MP3<br /><br />//&nbsp;The&nbsp;file&nbsp;is&nbsp;11.85&nbsp;seconds&nbsp;at&nbsp;12.0&nbsp;fps&nbsp;=&nbsp;142&nbsp;frames<br /></span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setFrames</span><span style="color: #007700">(</span><span style="color: #0000BB">142</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'Content-type:&nbsp;application/x-shockwave-flash'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">output</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="90970""></a>
  <div class="note">
   <strong class="user">aaronmason85 at gmail dot com</strong>
   <a href="#90970" class="date">19-May-2009 06:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hey all,
<br />

<br />
For those using Ming 0.3 (like me), there is a way to calculate the length of the MP3 you are using.&nbsp; It might be a bit iffy for VBR files, but it seems to work well for the files I've tested thus far.&nbsp; The process of calculating the frame length (and size) is detailed at <a href="http://www.mpgedit.org/mpgedit/mpeg_format/mpeghdr.htm" rel="nofollow" target="_blank">http://www.mpgedit.org/mpgedit/mpeg_format/mpeghdr.htm</a>
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
</span><span class="keyword">function </span><span class="default">get_mp3_len </span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">) {
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rate1</span><span class="keyword">=array(</span><span class="default">0</span><span class="keyword">, </span><span class="default">32</span><span class="keyword">, </span><span class="default">64</span><span class="keyword">, </span><span class="default">96</span><span class="keyword">, </span><span class="default">128</span><span class="keyword">, </span><span class="default">160</span><span class="keyword">, </span><span class="default">192</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">, </span><span class="default">256</span><span class="keyword">, </span><span class="default">288</span><span class="keyword">, </span><span class="default">320</span><span class="keyword">, </span><span class="default">352</span><span class="keyword">, </span><span class="default">384</span><span class="keyword">, </span><span class="default">416</span><span class="keyword">, </span><span class="default">448</span><span class="keyword">, </span><span class="string">"bad"</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rate2</span><span class="keyword">=array(</span><span class="default">0</span><span class="keyword">, </span><span class="default">32</span><span class="keyword">, </span><span class="default">48</span><span class="keyword">, </span><span class="default">56</span><span class="keyword">, </span><span class="default">64</span><span class="keyword">, </span><span class="default">80</span><span class="keyword">, </span><span class="default">96</span><span class="keyword">, </span><span class="default">112</span><span class="keyword">, </span><span class="default">128</span><span class="keyword">, </span><span class="default">160</span><span class="keyword">, </span><span class="default">192</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">, </span><span class="default">256</span><span class="keyword">, </span><span class="default">320</span><span class="keyword">, </span><span class="default">384</span><span class="keyword">, </span><span class="string">"bad"</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rate3</span><span class="keyword">=array(</span><span class="default">0</span><span class="keyword">, </span><span class="default">32</span><span class="keyword">, </span><span class="default">40</span><span class="keyword">, </span><span class="default">48</span><span class="keyword">, </span><span class="default">56</span><span class="keyword">, </span><span class="default">64</span><span class="keyword">, </span><span class="default">80</span><span class="keyword">, </span><span class="default">96</span><span class="keyword">, </span><span class="default">112</span><span class="keyword">, </span><span class="default">128</span><span class="keyword">, </span><span class="default">160</span><span class="keyword">, </span><span class="default">192</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">, </span><span class="default">256</span><span class="keyword">, </span><span class="default">320</span><span class="keyword">, </span><span class="string">"bad"</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rate4</span><span class="keyword">=array(</span><span class="default">0</span><span class="keyword">, </span><span class="default">32</span><span class="keyword">, </span><span class="default">48</span><span class="keyword">, </span><span class="default">56</span><span class="keyword">, </span><span class="default">64</span><span class="keyword">, </span><span class="default">80</span><span class="keyword">, </span><span class="default">96</span><span class="keyword">, </span><span class="default">112</span><span class="keyword">, </span><span class="default">128</span><span class="keyword">, </span><span class="default">144</span><span class="keyword">, </span><span class="default">160</span><span class="keyword">, </span><span class="default">176</span><span class="keyword">, </span><span class="default">192</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">, </span><span class="default">256</span><span class="keyword">, </span><span class="string">"bad"</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rate5</span><span class="keyword">=array(</span><span class="default">0</span><span class="keyword">, </span><span class="default">8</span><span class="keyword">, </span><span class="default">16</span><span class="keyword">, </span><span class="default">24</span><span class="keyword">, </span><span class="default">32</span><span class="keyword">, </span><span class="default">40</span><span class="keyword">, </span><span class="default">48</span><span class="keyword">, </span><span class="default">56</span><span class="keyword">, </span><span class="default">64</span><span class="keyword">, </span><span class="default">80</span><span class="keyword">, </span><span class="default">96</span><span class="keyword">, </span><span class="default">112</span><span class="keyword">, </span><span class="default">128</span><span class="keyword">, </span><span class="default">144</span><span class="keyword">, </span><span class="default">160</span><span class="keyword">, </span><span class="string">"bad"</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$bitrate</span><span class="keyword">=array(
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'1'&nbsp; </span><span class="keyword">=&gt; </span><span class="default">$rate5</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'2'&nbsp; </span><span class="keyword">=&gt; </span><span class="default">$rate5</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'3'&nbsp; </span><span class="keyword">=&gt; </span><span class="default">$rate4</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'9'&nbsp; </span><span class="keyword">=&gt; </span><span class="default">$rate5</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'10' </span><span class="keyword">=&gt; </span><span class="default">$rate5</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'11' </span><span class="keyword">=&gt; </span><span class="default">$rate4</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'13' </span><span class="keyword">=&gt; </span><span class="default">$rate3</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'14' </span><span class="keyword">=&gt; </span><span class="default">$rate2</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'15' </span><span class="keyword">=&gt; </span><span class="default">$rate1
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sample</span><span class="keyword">=array(
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'0'&nbsp; </span><span class="keyword">=&gt; </span><span class="default">11025</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'1'&nbsp; </span><span class="keyword">=&gt; </span><span class="default">12000</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'2'&nbsp; </span><span class="keyword">=&gt; </span><span class="default">8000</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'8'&nbsp; </span><span class="keyword">=&gt; </span><span class="default">22050</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'9'&nbsp; </span><span class="keyword">=&gt; </span><span class="default">24000</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'10' </span><span class="keyword">=&gt; </span><span class="default">16000</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'12' </span><span class="keyword">=&gt; </span><span class="default">44100</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'13' </span><span class="keyword">=&gt; </span><span class="default">48000</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'14' </span><span class="keyword">=&gt; </span><span class="default">32000
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$fd</span><span class="keyword">=</span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="string">'rb'</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$header</span><span class="keyword">=</span><span class="default">fgets</span><span class="keyword">(</span><span class="default">$fd</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fd</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$bits</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$header</span><span class="keyword">) &gt; </span><span class="default">0</span><span class="keyword">) {
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//var_dump($header);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$bits</span><span class="keyword">.=</span><span class="default">str_pad</span><span class="keyword">(</span><span class="default">base_convert</span><span class="keyword">(</span><span class="default">ord</span><span class="keyword">(</span><span class="default">$header</span><span class="keyword">{</span><span class="default">0</span><span class="keyword">}), </span><span class="default">10</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">), </span><span class="default">8</span><span class="keyword">, </span><span class="string">'0'</span><span class="keyword">, </span><span class="default">STR_PAD_LEFT</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$header</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$header</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$bits</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$bits</span><span class="keyword">, </span><span class="default">11</span><span class="keyword">); </span><span class="comment">// lets strip the frame sync bits first.
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$version</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$bits</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">); </span><span class="comment">// this gives us the version
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$layer</span><span class="keyword">=</span><span class="default">base_convert</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$bits</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">), </span><span class="default">2</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">); </span><span class="comment">// this gives us the layer
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$verlay</span><span class="keyword">=</span><span class="default">base_convert</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$bits</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">), </span><span class="default">2</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">); </span><span class="comment">// this gives us both
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rateidx</span><span class="keyword">=</span><span class="default">base_convert</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$bits</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">), </span><span class="default">2</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">); </span><span class="comment">// this gives us the bitrate index
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sampidx</span><span class="keyword">=</span><span class="default">base_convert</span><span class="keyword">(</span><span class="default">$version</span><span class="keyword">.</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$bits</span><span class="keyword">, </span><span class="default">9</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">), </span><span class="default">2</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">); </span><span class="comment">// this gives the sample index
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$padding</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$bits</span><span class="keyword">, </span><span class="default">11</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">); </span><span class="comment">// are we padding frames?
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rate</span><span class="keyword">=</span><span class="default">$bitrate</span><span class="keyword">[</span><span class="default">$verlay</span><span class="keyword">][</span><span class="default">$rateidx</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$samp</span><span class="keyword">=</span><span class="default">$sample</span><span class="keyword">[</span><span class="default">$sampidx</span><span class="keyword">];
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$framelen</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$framesize</span><span class="keyword">=</span><span class="default">384</span><span class="keyword">; </span><span class="comment">// Size of the frame in samples
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$layer </span><span class="keyword">== </span><span class="default">3</span><span class="keyword">) { </span><span class="comment">// layer 1?
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$framelen</span><span class="keyword">=(</span><span class="default">12 </span><span class="keyword">* (</span><span class="default">$rate </span><span class="keyword">* </span><span class="default">1000</span><span class="keyword">) / </span><span class="default">$samp </span><span class="keyword">+ </span><span class="default">$padding</span><span class="keyword">) * </span><span class="default">4</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else { </span><span class="comment">// Layer 2 and 3
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$framelen</span><span class="keyword">=</span><span class="default">144 </span><span class="keyword">* (</span><span class="default">$rate </span><span class="keyword">* </span><span class="default">1000</span><span class="keyword">) / </span><span class="default">$samp </span><span class="keyword">+ </span><span class="default">$padding</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$framesize</span><span class="keyword">=</span><span class="default">1152</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$headerlen</span><span class="keyword">=</span><span class="default">4 </span><span class="keyword">+ (</span><span class="default">$bits</span><span class="keyword">{</span><span class="default">4</span><span class="keyword">} == </span><span class="default">0 </span><span class="keyword">? </span><span class="string">'2' </span><span class="keyword">: </span><span class="string">'0'</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return (</span><span class="default">filesize</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">) - </span><span class="default">$headerlen</span><span class="keyword">) / </span><span class="default">$framelen </span><span class="keyword">/ (</span><span class="default">$samp </span><span class="keyword">/ </span><span class="default">$framesize</span><span class="keyword">);
<br />
}
<br />

<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89182""></a>
  <div class="note">
   <strong class="user">Richard Trigaux</strong>
   <a href="#89182" class="date">25-Feb-2009 06:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Seems that this function only handles some MP3 files with specified sample rates and not others. 44100 and 21050 work. With the lame MP3 converter, this is obtained with setting the "bit rate" at 112 (average compression/quality), mono or stereo. Other values may work, probably multiples, I did not tried all.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81648""></a>
  <div class="note">
   <strong class="user">diana</strong>
   <a href="#81648" class="date">08-Mar-2008 12:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need to play an mp3 fully you need to do something like:
<br />

<br />
<span class="default">&lt;?php
<br />
$len </span><span class="keyword">= </span><span class="default">$m</span><span class="keyword">-&gt;</span><span class="default">streamMp3</span><span class="keyword">(</span><span class="default">fopen</span><span class="keyword">(</span><span class="string">"sound.mp3"</span><span class="keyword">, </span><span class="string">"r"</span><span class="keyword">));
<br />
</span><span class="default">$m</span><span class="keyword">-&gt;</span><span class="default">setFrames</span><span class="keyword">(</span><span class="default">$len</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
This works only in Ming 0.4. I'm not 100% sure but it doesn't sound to work on Ming 0.3</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69145""></a>
  <div class="note">
   <strong class="user">boreckiwebs at gmail dot com</strong>
   <a href="#69145" class="date">24-Aug-2006 06:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if you want to control the sound use these functions like this:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$m </span><span class="keyword">-&gt; </span><span class="default">add</span><span class="keyword">(new </span><span class="default">SWFAction</span><span class="keyword">(</span><span class="string">'<br />
&nbsp;stop(); // pauses the song<br />
&nbsp;goToAndStop(1); // stops the song, and goes back to the beginning<br />
&nbsp;play(); // plays the song from current position<br />
'</span><span class="keyword">));<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
i hope this is helpful</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="25374""></a>
  <div class="note">
   <strong class="user">boo at php dot net</strong>
   <a href="#25374" class="date">21-Sep-2002 12:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Don't forget to use fopen function in example above !
<br />

<br />
Use 
<br />

<br />
<span class="default">&lt;?php
<br />
$m</span><span class="keyword">-&gt;</span><span class="default">streamMp3</span><span class="keyword">(</span><span class="default">fopen</span><span class="keyword">(</span><span class="string">"distortobass.mp3"</span><span class="keyword">, </span><span class="string">"rb"</span><span class="keyword">));
<br />
</span><span class="default">instead of
<br />
$m</span><span class="keyword">-&gt;</span><span class="default">streamMp3</span><span class="keyword">(</span><span class="string">"distortobass.mp3"</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
I hope this is useful for you :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="12973""></a>
  <div class="note">
   <strong class="user">mued at muetdhiver dot org</strong>
   <a href="#12973" class="date">18-May-2001 06:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
a nice feature to handle Id3tag is to get support from Unix mp3info command into a returning exec parsing</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

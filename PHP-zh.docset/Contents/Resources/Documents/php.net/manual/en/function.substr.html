<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>返回字符串的子串</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.substr-replace.html">? substr_replace</a></li>
      <li style="float: right;"><a href="function.trim.html">trim ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.strings.html">字符串 函数</a></li>
    <li>返回字符串的子串</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.substr" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">substr</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">substr</span> &mdash; <span class="dc-title">返回字符串的子串</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.substr-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><strong>substr</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$string</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$start</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$length</code></span>
  ] )</div>

  <p class="para rdfs-comment">
   返回字符串 <code class="parameter">string</code> 由 <code class="parameter">start</code> 和 <code class="parameter">length</code> 参数指定的子字符串。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.substr-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">string</code></dt>

     <dd>

      <p class="para">
       输入字符串。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">start</code></dt>

     <dd>

      <p class="para">
       如果 <code class="parameter">start</code> 是非负数，返回的字符串将从 <code class="parameter">string</code> 的 <code class="parameter">start</code> 位置开始，从 0 开始计算。例如，在字符串 "<em>abcdef</em>" 中，在位置 <em>0</em> 的字符是 "<em>a</em>"，位置 <em>2</em> 的字符串是 "<em>c</em>" 等等。
      </p>
      <p class="para">
       如果 <code class="parameter">start</code> 是负数，返回的字符串将从 <code class="parameter">string</code> 结尾处向前数第 <code class="parameter">start</code> 个字符开始。
      </p>
      <p class="para">
       如果 <code class="parameter">string</code> 的长度小于或等于 <code class="parameter">start</code>，将返回 <strong><code>FALSE</code></strong>。
      </p>
      <p class="para">
       <div class="example" id="example-4951">
        <p><strong>Example #1 使用负数 <code class="parameter">start</code></strong></p>
        <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$rest&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">"abcdef"</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">1</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;返回&nbsp;"f"<br /></span><span style="color: #0000BB">$rest&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">"abcdef"</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">2</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;返回&nbsp;"ef"<br /></span><span style="color: #0000BB">$rest&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">"abcdef"</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;返回&nbsp;"d"<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
        </div>

       </div>
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">length</code></dt>

     <dd>

      <p class="para">
       如果提供了正数的 <code class="parameter">length</code>，返回的字符串将从 <code class="parameter">start</code> 处开始最多包括 <code class="parameter">length</code> 个字符（取决于 <code class="parameter">string</code> 的长度）。
      </p>
      <p class="para">
       如果提供了负数的 <code class="parameter">length</code>，那么 <code class="parameter">string</code> 末尾处的许多字符将会被漏掉（若 <code class="parameter">start</code> 是负数则从字符串尾部算起）。如果 <code class="parameter">start</code> 不在这段文本中，那么将返回一个空字符串。
      </p>
      <p class="para">
       如果提供了值为 <em>0</em>，<strong><code>FALSE</code></strong> 或 <strong><code>NULL</code></strong> 的 <code class="parameter">length</code>，那么将返回一个空字符串。
      </p>
      <p class="para">
       如果没有提供 <code class="parameter">length</code>，返回的子字符串将从 <code class="parameter">start</code> 位置开始直到字符串结尾。
      </p>
      <div class="example" id="example-4952">
       <p><strong>Example #2 使用负数 <code class="parameter">length</code></strong></p>
       <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$rest&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">"abcdef"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">1</span><span style="color: #007700">);&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;返回&nbsp;"abcde"<br /></span><span style="color: #0000BB">$rest&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">"abcdef"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">1</span><span style="color: #007700">);&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;返回&nbsp;"cde"<br /></span><span style="color: #0000BB">$rest&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">"abcdef"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">4</span><span style="color: #007700">);&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;返回&nbsp;""<br /></span><span style="color: #0000BB">$rest&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">"abcdef"</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">1</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;返回&nbsp;"de"<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
       </div>

      </div>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.substr-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   返回提取的子字符串， 或者在失败时返回 <strong><code>FALSE</code></strong>。
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.substr-changelog">
  <h3 class="title">更新日志</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>版本</th>
       <th>说明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.2.2 - 5.2.6</td>
       <td>
        If the <code class="parameter">start</code> parameter indicates the position of
        a negative truncation or beyond, false is returned. Other versions get
        the string from start.
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.substr-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-4953">
    <p><strong>Example #3 <span class="function"><strong>substr()</strong></span> 基本用法</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">'abcdef'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;bcdef<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">'abcdef'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">);&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;bcd<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">'abcdef'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">);&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;abcd<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">'abcdef'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">8</span><span style="color: #007700">);&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;abcdef<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">'abcdef'</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;f<br /><br />//&nbsp;访问字符串中的单个字符<br />//&nbsp;也可以使用中括号<br /></span><span style="color: #0000BB">$string&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'abcdef'</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">$string</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;a<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$string</span><span style="color: #007700">[</span><span style="color: #0000BB">3</span><span style="color: #007700">];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;d<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$string</span><span style="color: #007700">[</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$string</span><span style="color: #007700">)-</span><span style="color: #0000BB">1</span><span style="color: #007700">];&nbsp;</span><span style="color: #FF8000">//&nbsp;f<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>   
   <div class="example" id="example-4954">
    <p><strong>Example #4 <span class="function"><strong>substr()</strong></span> casting behaviour</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">apple&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">__toString</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #DD0000">"green"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br />echo&nbsp;</span><span style="color: #DD0000">"1)&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">var_export</span><span style="color: #007700">(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">"pear"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">).</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"2)&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">var_export</span><span style="color: #007700">(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">54321</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">).</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"3)&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">var_export</span><span style="color: #007700">(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">apple</span><span style="color: #007700">(),&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">).</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"4)&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">var_export</span><span style="color: #007700">(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">).</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"5)&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">var_export</span><span style="color: #007700">(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">false</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">).</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"6)&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">var_export</span><span style="color: #007700">(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">).</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"7)&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">var_export</span><span style="color: #007700">(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">1.2e3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">).</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
1) &#039;pe&#039;
2) &#039;54&#039;
3) &#039;gr&#039;
4) &#039;1&#039;
5) false
6) false
7) &#039;1200&#039;
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 errors" id="refsect1-function.substr-errors">
  <h3 class="title">错误／异常</h3>
  <p class="para">
   错误时返回 <strong><code>FALSE</code></strong>。
   <div class="example" id="example-4955">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">'a'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));&nbsp;</span><span style="color: #FF8000">//&nbsp;bool(false)<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>   
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.substr-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.strrchr.html" class="function" rel="rdfs-seeAlso">strrchr()</a> - 查找指定字符在字符串中的最后一次出现</span></li>
    <li class="member"><span class="function"><a href="function.substr-replace.html" class="function" rel="rdfs-seeAlso">substr_replace()</a> - 替换字符串的子串</span></li>
    <li class="member"><span class="function"><a href="function.preg-match.html" class="function" rel="rdfs-seeAlso">preg_match()</a> - 执行一个正则表达式匹配</span></li>
    <li class="member"><span class="function"><a href="function.trim.html" class="function" rel="rdfs-seeAlso">trim()</a> - 去除字符串首尾处的空白字符（或者其他字符）</span></li>
    <li class="member"><span class="function"><a href="function.mb-substr.html" class="function" rel="rdfs-seeAlso">mb_substr()</a> - 获取字符串的部分</span></li>
    <li class="member"><span class="function"><a href="function.wordwrap.html" class="function" rel="rdfs-seeAlso">wordwrap()</a> - 打断字符串为指定数量的字串</span></li>
    <li class="member"><a href="language.types.string.html#language.types.string.substr" class="link">字符串访问和修改</a></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="116006""></a>
  <div class="note">
   <strong class="user">jjanak at webperfection dot net</strong>
   <a href="#116006" class="date">28-Oct-2014 09:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
interesting and maybe not so obvious behavior:<br />
<br />
print substr('\\test', 2); // est<br />
print substr('\\test',1); // test<br />
<br />
if you take a closer look you will realize that the backslash was escaped, still i think it's interesting to mention :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115672""></a>
  <div class="note">
   <strong class="user">goren dot ali at NOSPAM dot yandex dot com</strong>
   <a href="#115672" class="date">06-Sep-2014 12:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
II use my random password generator class<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/*<br />
&nbsp; * Ali GOREN<br />
&nbsp; *<br />
&nbsp; *<br />
*/<br />
<br />
</span><span class="keyword">class </span><span class="default">SifreOlusturucu </span><span class="keyword">{<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//var $boyut; test<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$boyut </span><span class="keyword">= </span><span class="default">8</span><span class="keyword">) { </span><span class="comment">// 8 default, 14 or more good and recommended length<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">boyut </span><span class="keyword">= </span><span class="default">$boyut</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">sifreOlustur</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//$this-&gt;boyut;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$karakterler </span><span class="keyword">= </span><span class="string">'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&amp;*()_-=+;:,.?'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sifre </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">( </span><span class="default">str_shuffle</span><span class="keyword">( </span><span class="default">$karakterler </span><span class="keyword">), </span><span class="default">0</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">boyut</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$sifre</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$olustur </span><span class="keyword">= new </span><span class="default">SifreOlusturucu</span><span class="keyword">(</span><span class="default">16</span><span class="keyword">);<br />
</span><span class="default">$olustur</span><span class="keyword">-&gt;</span><span class="default">sifreOlustur</span><span class="keyword">(); </span><span class="comment">// output: wIsLiXzH1uP@hqSm</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115627""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#115627" class="date">28-Aug-2014 07:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
substr() exhibits rather unexpected behavior with respect to when it returns "" and when it returns FALSE.&nbsp; Specifically, the following appears to hold (tested on PHP 5.4.19):<br />
<br />
*&nbsp; if $string is "", it always returns FALSE<br />
<br />
*&nbsp; if ($start &gt;= 0) and ($start &gt;= strlen($string)) it returns FALSE<br />
<br />
*&nbsp; if ($start &gt;= 0) and ($length&lt;($start - strlen($string))) it returns FALSE<br />
<br />
*&nbsp; if ($start &lt; 0) then it returns FALSE if *and only if* $length&lt;-strlen($string).<br />
<br />
No other cases return FALSE.<br />
Note that in the last case, the position indicated by $start doesn't actually matter!<br />
<br />
Also worth noting is that if you supply a $start that is &lt; -strlen($string), it will be treated exactly as if you had set $start = strlen($string).<br />
<br />
Here are some test cases to illustrate this behavior:<br />
<br />
substr("",0,0) === FALSE<br />
substr("",0,4) === FALSE<br />
substr("",-2,4) === FALSE<br />
<br />
substr("abc",3,0) === FALSE<br />
substr("abc",3,10) === FALSE<br />
substr("abc",3,-1) === FALSE<br />
substr("abc",0,-4) === FALSE<br />
substr("abc",2,-2) === FALSE<br />
substr("abc",-1,-4) === FALSE<br />
substr("abc",-4,-4) === FALSE<br />
substr("abc",-5,-4) === FALSE<br />
substr("abc",-10,-5) === FALSE<br />
<br />
substr("abc",-10,-2) === "a"<br />
substr("abc",-1,-3) === ""<br />
substr("abc",-1,-2) === ""<br />
substr("abc",-2,-3) === ""<br />
substr("abc",0,0) === ""<br />
substr("abc",-3,0) === ""<br />
substr("abc",-10,0) === ""<br />
substr("abc",-3,4) === "abc"<br />
substr("abc",-10,20) === "abc"<br />
substr("abc",-2,-2) === ""<br />
substr("abc",-2,1) === "b"<br />
substr("abc",0,-3) === ""<br />
substr("abc",2,-1) === ""</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115142""></a>
  <div class="note">
   <strong class="user">Nadeem</strong>
   <a href="#115142" class="date">03-Jun-2014 05:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Truncate a float number. Similar to the Excel trunc function.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">truncate_number</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">,</span><span class="default">$decimals</span><span class="keyword">=</span><span class="default">2</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$number</span><span class="keyword">=array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$number</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">"."</span><span class="keyword">,</span><span class="default">$val</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">)&gt;</span><span class="default">1</span><span class="keyword">){<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">$number</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] . </span><span class="string">"." </span><span class="keyword">. </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">],</span><span class="default">0</span><span class="keyword">,</span><span class="default">$decimals</span><span class="keyword">);&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">$val</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$number</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;&nbsp; &nbsp; <br />
}<br />
<br />
echo </span><span class="default">truncate_number</span><span class="keyword">(</span><span class="default">99.123456</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">); </span><span class="comment">//result = 99.12<br />
</span><span class="keyword">echo </span><span class="default">truncate_number</span><span class="keyword">(</span><span class="default">99.123456</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">); </span><span class="comment">//result = 99.12345<br />
</span><span class="keyword">echo </span><span class="default">truncate_number</span><span class="keyword">(</span><span class="default">99.123456</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">); </span><span class="comment">//result = 99.1<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114784""></a>
  <div class="note">
   <strong class="user">php at richardneill dot org</strong>
   <a href="#114784" class="date">07-Apr-2014 12:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Frequently we want to check whether one string ends with (or starts with) another.&nbsp; These may be useful:<br />
<br />
function str_ends($string,$end){<br />
&nbsp;&nbsp;&nbsp; return (substr($string,-strlen($end),strlen($end)) === $end);<br />
}&nbsp; &nbsp; <br />
function str_begins($string,$start){<br />
&nbsp;&nbsp;&nbsp; return (substr($string,0,strlen($start)) === $start);<br />
}&nbsp; &nbsp; <br />
<br />
Example:<br />
if (str_ends ($filename, ".jpg")){<br />
&nbsp;&nbsp; echo "The extension is .jpg";<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114650""></a>
  <div class="note">
   <strong class="user">koczkahun at gmail dot com</strong>
   <a href="#114650" class="date">18-Mar-2014 02:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those who cannot use mb_substr for any reasons, here is a solution for Unicode strings:<br />
<br />
function substr_unicode($str, $s, $l = null)<br />
{<br />
&nbsp;&nbsp;&nbsp; $r = '/^.{'.(int)$s.'}(.';<br />
&nbsp;&nbsp;&nbsp; $r .= ($l === null) ? '*)$' : '{'.(int)$l.'})';<br />
&nbsp;&nbsp;&nbsp; $r .= '/su';<br />
&nbsp;&nbsp;&nbsp; preg_match($r, $str, $o); return $o[1];<br />
}<br />
<br />
It is EXTREMELY fast compared to the array_slice + join method suggested before, and moderately slower than mb_substr.<br />
<br />
Note: you cannot use negative values.<br />
Note 2: use mb_substr whenever you can. Only use this workaround if you can not use the library.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114219""></a>
  <div class="note">
   <strong class="user">fatihmertdogancan at hotmail dot com</strong>
   <a href="#114219" class="date">26-Jan-2014 05:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
[English]<br />
I created python similar accesing list or string with php substr &amp; strrev functions.<br />
<br />
Use: str($string,$pattern)<br />
<br />
About the python pattern,<br />
<a href="http://docs.python.org/release/1.5.1p1/tut/strings.html" rel="nofollow" target="_blank">http://docs.python.org/release/1.5.1p1/tut/strings.html</a><br />
<a href="http://effbot.org/zone/python-list.htm" rel="nofollow" target="_blank">http://effbot.org/zone/python-list.htm</a><br />
<br />
About of pattern structures<br />
[start:stop:step]<br />
<br />
Example,<br />
<span class="default">&lt;?php<br />
$s </span><span class="keyword">= </span><span class="string">"fatihmertdogancan"</span><span class="keyword">;<br />
echo </span><span class="default">str</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="string">"1:9:-2"</span><span class="keyword">);<br />
echo </span><span class="string">"&lt;br/&gt;"</span><span class="keyword">;<br />
echo </span><span class="default">str</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="string">"1:-3:-2"</span><span class="keyword">);<br />
echo </span><span class="string">"&lt;br/&gt;"</span><span class="keyword">;<br />
echo </span><span class="default">str</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="string">"1:-11:-5"</span><span class="keyword">);<br />
echo </span><span class="string">"&lt;br/&gt;"</span><span class="keyword">;<br />
echo </span><span class="default">str</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="string">"1:9:4"</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Output,<br />
thetoacn<br />
eht<br />
aom<br />
htan<br />
<br />
This is function phpfiddle link: <a href="http://phpfiddle.org/main/code/e82-y5d" rel="nofollow" target="_blank">http://phpfiddle.org/main/code/e82-y5d</a><br />
<br />
or source;<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">str</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$pattern</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//[start:stop:step]<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //pattern -&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ([-]?[0-9]*|\s):([-]?[0-9]*|\s):([-]?[0-9]*|\s)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/([-]?[0-9]*|\s?):([-]?[0-9]*|\s?):?([-]?[0-9]*|\s?)/"</span><span class="keyword">, </span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$yakala</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">$yakala</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$stop </span><span class="keyword">= </span><span class="default">$yakala</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$step </span><span class="keyword">= </span><span class="default">$yakala</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(empty(</span><span class="default">$start</span><span class="keyword">) &amp;&amp; empty(</span><span class="default">$stop</span><span class="keyword">) &amp;&amp; </span><span class="default">$step </span><span class="keyword">== </span><span class="string">"-1"</span><span class="keyword">){</span><span class="comment">//istisna durum<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }else if(empty(</span><span class="default">$start</span><span class="keyword">) &amp;&amp; empty(</span><span class="default">$stop</span><span class="keyword">) &amp;&amp; isset(</span><span class="default">$step</span><span class="keyword">)){</span><span class="comment">//istisna durum<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rev </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$yeni </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$step</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] == </span><span class="string">"-" </span><span class="keyword">&amp;&amp; </span><span class="default">$stop </span><span class="keyword">!= </span><span class="string">"-1"</span><span class="keyword">){</span><span class="default">$rev </span><span class="keyword">= </span><span class="string">"VAR"</span><span class="keyword">;}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$atla </span><span class="keyword">= </span><span class="default">abs</span><span class="keyword">(</span><span class="default">$step</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">*</span><span class="default">$atla</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(isset(</span><span class="default">$str</span><span class="keyword">[</span><span class="default">$offset</span><span class="keyword">])){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$yeni </span><span class="keyword">= </span><span class="default">$yeni</span><span class="keyword">.</span><span class="default">$str</span><span class="keyword">[</span><span class="default">$offset</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$rev </span><span class="keyword">!= </span><span class="string">"VAR"</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$yeni</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//"hepsi bo?, step dolu o da +";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$yeni</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//"hepsi bo?, step dolu o da -";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(empty(</span><span class="default">$start</span><span class="keyword">) &amp;&amp; empty(</span><span class="default">$stop</span><span class="keyword">) &amp;&amp; empty(</span><span class="default">$step</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$str</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//"hepsi bo?";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}else if(empty(</span><span class="default">$start</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(isset(</span><span class="default">$stop</span><span class="keyword">) &amp;&amp; empty(</span><span class="default">$step</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rev </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$stop</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] == </span><span class="string">"-"</span><span class="keyword">){</span><span class="default">$rev </span><span class="keyword">= </span><span class="string">"VAR"</span><span class="keyword">;}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$rev </span><span class="keyword">!= </span><span class="string">"VAR"</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$stop</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//"start ve step bo?, stop dolu"<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$stop</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//"start ve step bo?, stop -1";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else if(isset(</span><span class="default">$stop</span><span class="keyword">) &amp;&amp; isset(</span><span class="default">$step</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rev </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$stop</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] == </span><span class="string">"-"</span><span class="keyword">){</span><span class="default">$rev </span><span class="keyword">= </span><span class="string">"VAR"</span><span class="keyword">;}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$yeni </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$step </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$rev </span><span class="keyword">!= </span><span class="string">"VAR"</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$str</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//"start bo?, stop ve step dolu, step 1";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">abs</span><span class="keyword">(</span><span class="default">$stop</span><span class="keyword">))); </span><span class="comment">//abs -&gt; mutlak de?er (-5 = 5)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //"start bo?, stop -, step dolu, step 1";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$atla </span><span class="keyword">= </span><span class="default">abs</span><span class="keyword">(</span><span class="default">$step</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">*</span><span class="default">$atla</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(isset(</span><span class="default">$str</span><span class="keyword">[</span><span class="default">$offset</span><span class="keyword">])){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$yeni </span><span class="keyword">= </span><span class="default">$yeni</span><span class="keyword">.</span><span class="default">$str</span><span class="keyword">[</span><span class="default">$offset</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$rev </span><span class="keyword">!= </span><span class="string">"VAR"</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$yeni</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$stop</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//"start bo?, step ve stop dolu";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$yeni</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">abs</span><span class="keyword">(</span><span class="default">$stop</span><span class="keyword">)));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//"start bo?, step ve stop -";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//start bo? de?ilse<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}else if(!empty(</span><span class="default">$start</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(isset(</span><span class="default">$stop</span><span class="keyword">) &amp;&amp; empty(</span><span class="default">$step</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rev </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$stop</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] == </span><span class="string">"-"</span><span class="keyword">){</span><span class="default">$rev </span><span class="keyword">= </span><span class="string">"VAR"</span><span class="keyword">;}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$rev </span><span class="keyword">!= </span><span class="string">"VAR"</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$stop</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//return "step bo?, start ve stop dolu";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">abs</span><span class="keyword">(</span><span class="default">$stop</span><span class="keyword">)));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//"step bo?, start ve stop dolu, stop -";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else if(isset(</span><span class="default">$stop</span><span class="keyword">) &amp;&amp; isset(</span><span class="default">$step</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//hepsi dolu<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rev </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$stop</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] == </span><span class="string">"-"</span><span class="keyword">){</span><span class="default">$rev </span><span class="keyword">= </span><span class="string">"VAR"</span><span class="keyword">;}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$yeni </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$step </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$rev </span><span class="keyword">!= </span><span class="string">"VAR"</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$stop</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//"hepsi dolu, step 1";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">abs</span><span class="keyword">(</span><span class="default">$stop</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//"hepsi dolu, step 1, stop -";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$stop</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] == </span><span class="string">"-"</span><span class="keyword">){</span><span class="default">$rev </span><span class="keyword">= </span><span class="string">"VAR"</span><span class="keyword">;}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$atla </span><span class="keyword">= </span><span class="default">abs</span><span class="keyword">(</span><span class="default">$step</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">*</span><span class="default">$atla</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(isset(</span><span class="default">$str</span><span class="keyword">[</span><span class="default">$offset</span><span class="keyword">])){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$yeni </span><span class="keyword">= </span><span class="default">$yeni</span><span class="keyword">.</span><span class="default">$str</span><span class="keyword">[</span><span class="default">$offset</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$rev </span><span class="keyword">!= </span><span class="string">"VAR"</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$yeni</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$stop</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//"hepsi dolu";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$yeni</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">abs</span><span class="keyword">(</span><span class="default">$stop</span><span class="keyword">)));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//"hepsi dolu, stop -";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
Good works..</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113718""></a>
  <div class="note">
   <strong class="user">greg at apparel dot com</strong>
   <a href="#113718" class="date">21-Nov-2013 02:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Coming to PHP from classic ASP I am used to the Left() and Right() functions built into ASP so I did a quick PHPversion. hope these help someone else making the switch<br />
<br />
function left($str, $length) {<br />
&nbsp;&nbsp;&nbsp; return substr($str, 0, $length);<br />
}<br />
<br />
function right($str, $length) {<br />
&nbsp;&nbsp;&nbsp; return substr($str, -$length);<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113223""></a>
  <div class="note">
   <strong class="user">nanhe dot kumar at gmail dot com</strong>
   <a href="#113223" class="date">14-Sep-2013 06:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
$string</span><span class="keyword">=</span><span class="string">"NanheKumar"</span><span class="keyword">;<br />
echo </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">); </span><span class="comment">//Nanhe<br />
</span><span class="keyword">echo </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">); </span><span class="comment">//Kumar<br />
</span><span class="keyword">echo </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,-</span><span class="default">4</span><span class="keyword">); </span><span class="comment">//umar<br />
</span><span class="keyword">echo </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,-</span><span class="default">4</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">); </span><span class="comment">//um<br />
</span><span class="keyword">echo </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">6</span><span class="keyword">); </span><span class="comment">//umnheKum<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112745""></a>
  <div class="note">
   <strong class="user">fengdingbo at gmail dot com</strong>
   <a href="#112745" class="date">19-Jul-2013 01:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php&nbsp; &nbsp;&nbsp; <br />
$a </span><span class="keyword">= </span><span class="string">'abc'</span><span class="keyword">;&nbsp; &nbsp; <br />
</span><span class="default">$php </span><span class="keyword">= </span><span class="string">'ok123'</span><span class="keyword">;&nbsp; &nbsp; <br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">TRUE</span><span class="keyword">);&nbsp; &nbsp; <br />
for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">1000000</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++)&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$a </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$php</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);&nbsp; &nbsp; <br />
echo </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">)-</span><span class="default">$str</span><span class="keyword">,</span><span class="string">"\n"</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">TRUE</span><span class="keyword">);&nbsp; &nbsp; <br />
for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">1000000</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++)&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$a </span><span class="keyword">= </span><span class="default">$php</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];&nbsp; &nbsp; <br />
echo </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">)-</span><span class="default">$str</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span>output:<br />
0.26694822311401<br />
0.10447096824646</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112707""></a>
  <div class="note">
   <strong class="user">biohazard dot ge at gmail dot com</strong>
   <a href="#112707" class="date">15-Jul-2013 11:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
may be by following functions will be easier to extract the needed sub parts from a string:<br />
<br />
<span class="default">&lt;?php<br />
after </span><span class="keyword">(</span><span class="string">'@'</span><span class="keyword">, </span><span class="string">'biohazard@online.ge'</span><span class="keyword">);<br />
</span><span class="comment">//returns 'online.ge'<br />
//from the first occurrence of '@'<br />
<br />
</span><span class="default">before </span><span class="keyword">(</span><span class="string">'@'</span><span class="keyword">, </span><span class="string">'biohazard@online.ge'</span><span class="keyword">);<br />
</span><span class="comment">//returns 'biohazard'<br />
//from the first occurrence of '@'<br />
<br />
</span><span class="default">between </span><span class="keyword">(</span><span class="string">'@'</span><span class="keyword">, </span><span class="string">'.'</span><span class="keyword">, </span><span class="string">'biohazard@online.ge'</span><span class="keyword">);<br />
</span><span class="comment">//returns 'online'<br />
//from the first occurrence of '@'<br />
<br />
</span><span class="default">after_last </span><span class="keyword">(</span><span class="string">'['</span><span class="keyword">, </span><span class="string">'sin[90]*cos[180]'</span><span class="keyword">);<br />
</span><span class="comment">//returns '180]'<br />
//from the last occurrence of '['<br />
<br />
</span><span class="default">before_last </span><span class="keyword">(</span><span class="string">'['</span><span class="keyword">, </span><span class="string">'sin[90]*cos[180]'</span><span class="keyword">);<br />
</span><span class="comment">//returns 'sin[90]*cos['<br />
//from the last occurrence of '['<br />
<br />
</span><span class="default">between_last </span><span class="keyword">(</span><span class="string">'['</span><span class="keyword">, </span><span class="string">']'</span><span class="keyword">, </span><span class="string">'sin[90]*cos[180]'</span><span class="keyword">);<br />
</span><span class="comment">//returns '180'<br />
//from the last occurrence of '['<br />
</span><span class="default">?&gt;<br />
</span><br />
here comes the source:<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">after </span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">$inthat</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_bool</span><span class="keyword">(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$inthat</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">)))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$inthat</span><span class="keyword">, </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$inthat</span><span class="keyword">,</span><span class="default">$this</span><span class="keyword">)+</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; };<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">after_last </span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">$inthat</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_bool</span><span class="keyword">(</span><span class="default">strrevpos</span><span class="keyword">(</span><span class="default">$inthat</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">)))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$inthat</span><span class="keyword">, </span><span class="default">strrevpos</span><span class="keyword">(</span><span class="default">$inthat</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">)+</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; };<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">before </span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">$inthat</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$inthat</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$inthat</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; };<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">before_last </span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">$inthat</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$inthat</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">strrevpos</span><span class="keyword">(</span><span class="default">$inthat</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; };<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">between </span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">$that</span><span class="keyword">, </span><span class="default">$inthat</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">before </span><span class="keyword">(</span><span class="default">$that</span><span class="keyword">, </span><span class="default">after</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">$inthat</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; };<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">between_last </span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">$that</span><span class="keyword">, </span><span class="default">$inthat</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; return </span><span class="default">after_last</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">before_last</span><span class="keyword">(</span><span class="default">$that</span><span class="keyword">, </span><span class="default">$inthat</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; };<br />
<br />
</span><span class="comment">// use strrevpos function in case your php version does not include it<br />
</span><span class="keyword">function </span><span class="default">strrevpos</span><span class="keyword">(</span><span class="default">$instr</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rev_pos </span><span class="keyword">= </span><span class="default">strpos </span><span class="keyword">(</span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$instr</span><span class="keyword">), </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$rev_pos</span><span class="keyword">===</span><span class="default">false</span><span class="keyword">) return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; else return </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$instr</span><span class="keyword">) - </span><span class="default">$rev_pos </span><span class="keyword">- </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">);<br />
};<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111133""></a>
  <div class="note">
   <strong class="user">pugazhenthi k</strong>
   <a href="#111133" class="date">18-Jan-2013 06:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?Php <br />
<br />
</span><span class="comment">### SUB STRING&nbsp; BY WORD USING substr() and strpos()&nbsp; #####<br />
<br />
### THIS SCRIPT WILL RETURN PART OF STRING&nbsp; WITHOUT WORD BREAK ###<br />
<br />
</span><span class="default">$description </span><span class="keyword">= </span><span class="default">'your description here your description here your description here your description here your description here your description here your description hereyour description here your description here'&nbsp; </span><span class="comment">// your description here .<br />
<br />
</span><span class="default">$no_letter </span><span class="keyword">= </span><span class="default">30 </span><span class="keyword">;<br />
<br />
if(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$desctiption</span><span class="keyword">) &gt; </span><span class="default">30 </span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp; &nbsp; echo </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$description</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$description</span><span class="keyword">,</span><span class="default">' '</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">));&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//strpos to find ' ' after 30 characters.<br />
</span><span class="keyword">}<br />
else {<br />
&nbsp;&nbsp; &nbsp; echo </span><span class="default">$description</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109046""></a>
  <div class="note">
   <strong class="user">pheagey at gmail dot com</strong>
   <a href="#109046" class="date">15-Jun-2012 11:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Using a 0 as the last parameter for substr().
<br />

<br />
As per examples
<br />
<span class="default">&lt;?php $var </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">); </span><span class="default">?&gt;
<br />
</span>
<br />
works no problem. However 
<br />
<span class="default">&lt;?php $var </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">); </span><span class="default">?&gt;
<br />
</span>
<br />
will get you nothing. Just a quick heads up</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107287""></a>
  <div class="note">
   <strong class="user">maxim at inbox dot ru</strong>
   <a href="#107287" class="date">28-Jan-2012 01:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a recursion function to get parts of passed string which are in a char. Func looks pretty, and works fast, tell me please if you find more opt way.<br />
<span class="default">&lt;?php<br />
$s </span><span class="keyword">= </span><span class="string">"info= &amp;make&amp;,endvcc &amp;new&amp; &amp;another&amp;info"</span><span class="keyword">;<br />
echo </span><span class="default">str_cut</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="string">"&amp;"</span><span class="keyword">,</span><span class="string">","</span><span class="keyword">);<br />
</span><span class="comment">//output:<br />
//make,new,another<br />
<br />
</span><span class="keyword">function </span><span class="default">str_cut</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$d</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$f</span><span class="keyword">=</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">)+</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$l</span><span class="keyword">=</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$f</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$out</span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$f</span><span class="keyword">,</span><span class="default">$l</span><span class="keyword">-</span><span class="default">$f</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if <br />
&nbsp;&nbsp;&nbsp; (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$l</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">)!==</span><span class="default">false</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {</span><span class="default">$s</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$l</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);</span><span class="default">$out</span><span class="keyword">.=</span><span class="default">$d</span><span class="keyword">.</span><span class="default">str_cut</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$d</span><span class="keyword">);}<br />
return </span><span class="default">$out</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
it is possible to output in array, you have to returns a var as an array.<br />
Also you can add an extra needle, which would be compare with the end of strings :<br />
replace to <br />
$l=strpos($s,$b,$f)-$f;<br />
and dont forget to pass into recursion call $b value, but i did like that <br />
$b=func_get_arg(func_num_args()-1);<br />
care! the last argument should be $a, because $b getting last arg. like that:<br />
function str_cut($s,$d="",$a)<br />
but i think this method of getting $b not the best way for perfomance.<br />
Sorry for my English.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104805""></a>
  <div class="note">
   <strong class="user">leon weidauer</strong>
   <a href="#104805" class="date">08-Jul-2011 10:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When using a value of a wrong type as second parameter , substr() does not return FALSE but NULL although the docs say, it should return FALSE on error.<br />
<br />
Prior to PHP 5.3, substr() tries to cast the second parameter to int and doesn't throw any errors. Since PHP 5.3 a warning is thrown.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103843""></a>
  <div class="note">
   <strong class="user">Quicker</strong>
   <a href="#103843" class="date">06-May-2011 01:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need to parse utf-8 strings char by char, try this one:
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp;&nbsp; &nbsp; $utf8marker</span><span class="keyword">=</span><span class="default">chr</span><span class="keyword">(</span><span class="default">128</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$count</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; while(isset(</span><span class="default">$string</span><span class="keyword">{</span><span class="default">$count</span><span class="keyword">})){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; if(</span><span class="default">$string</span><span class="keyword">{</span><span class="default">$count</span><span class="keyword">}&gt;=</span><span class="default">$utf8marker</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$parsechar</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$count</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$count</span><span class="keyword">+=</span><span class="default">2</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$parsechar</span><span class="keyword">=</span><span class="default">$string</span><span class="keyword">{</span><span class="default">$count</span><span class="keyword">};
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$count</span><span class="keyword">++;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="comment">/* do what you like with parsechar ... , eg.:*/&nbsp; </span><span class="keyword">echo </span><span class="default">$parsechar</span><span class="keyword">.</span><span class="string">"&lt;BR&gt;\r\n"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; }
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
- it works without mb_substr
<br />
- it is fast, because it grabs characters based on indexes&nbsp; when possible and avoids any count and split functions</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103143""></a>
  <div class="note">
   <strong class="user">slow at acedsl dot com</strong>
   <a href="#103143" class="date">28-Mar-2011 10:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Anyone coming from the Python world will be accustomed to making substrings by using a "slice index" on a string.&nbsp; The following function emulates basic Python string slice behavior. (A more elaborate version could be made to support array input as well as string, and the optional third "step" argument.)<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">py_slice</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$slice</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arg </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">':'</span><span class="keyword">, </span><span class="default">$slice</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$start </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$start </span><span class="keyword">+= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">) === </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]) === </span><span class="string">''</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$end </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">+= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$end </span><span class="keyword">- </span><span class="default">$start</span><span class="keyword">);<br />
}<br />
<br />
print </span><span class="default">py_slice</span><span class="keyword">(</span><span class="string">'abcdefg'</span><span class="keyword">, </span><span class="string">'2'</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />
print </span><span class="default">py_slice</span><span class="keyword">(</span><span class="string">'abcdefg'</span><span class="keyword">, </span><span class="string">'2:4'</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />
print </span><span class="default">py_slice</span><span class="keyword">(</span><span class="string">'abcdefg'</span><span class="keyword">, </span><span class="string">'2:'</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />
print </span><span class="default">py_slice</span><span class="keyword">(</span><span class="string">'abcdefg'</span><span class="keyword">, </span><span class="string">':4'</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />
print </span><span class="default">py_slice</span><span class="keyword">(</span><span class="string">'abcdefg'</span><span class="keyword">, </span><span class="string">':-3'</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />
print </span><span class="default">py_slice</span><span class="keyword">(</span><span class="string">'abcdefg'</span><span class="keyword">, </span><span class="string">'-3:'</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
The $slice parameter can be a single character index, or a range separated by a colon. The start of the range is inclusive and the end is exclusive, which may be&nbsp; counterintuitive. (Eg, py_slice('abcdefg', '2:4') yields 'cd' not 'cde'). A negative range value means to count from the end of the string instead of the beginning. Both the start and end of the range may be omitted; the start defaults to 0 and the end defaults to the total length of the input.<br />
<br />
The output from the examples:<br />
c<br />
cd<br />
cdefg<br />
abcd<br />
abcd<br />
efg</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101863""></a>
  <div class="note">
   <strong class="user">nikolai dot wuestemann at t-online dot de</strong>
   <a href="#101863" class="date">14-Jan-2011 05:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to have a string BETWEEN two strings, just use this function:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">get_between</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$end</span><span class="keyword">)
<br />
{
<br />
&nbsp; </span><span class="default">$substr </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$start</span><span class="keyword">)+</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">), (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">) - </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$end</span><span class="keyword">))*(-</span><span class="default">1</span><span class="keyword">));
<br />
&nbsp; return </span><span class="default">$substr</span><span class="keyword">;
<br />
}
<br />

<br />
</span><span class="comment">//Example:
<br />

<br />
</span><span class="default">$string </span><span class="keyword">= </span><span class="string">"123456789"</span><span class="keyword">;
<br />
</span><span class="default">$a </span><span class="keyword">= </span><span class="string">"12"</span><span class="keyword">;
<br />
</span><span class="default">$b </span><span class="keyword">= </span><span class="string">"9"</span><span class="keyword">;
<br />

<br />
echo </span><span class="default">get_between</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">);
<br />

<br />
</span><span class="comment">//Output:
<br />
//345678
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100678""></a>
  <div class="note">
   <strong class="user">Cristianlf</strong>
   <a href="#100678" class="date">29-Oct-2010 11:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed a function like lpad from oracle, or right from SQL
<br />
&nbsp;then I use this code :
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">right</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$chars</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$vright </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">)-</span><span class="default">$chars</span><span class="keyword">,</span><span class="default">$chars</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$vright</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; 
<br />
}
<br />

<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">right</span><span class="keyword">(</span><span class="string">'0r0j4152'</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Result: 
<br />
&nbsp;4152
<br />
------------------------------------------------
<br />
This function is really simple, I just wanted to share, maybe helps someone out there.&nbsp; 
<br />

<br />
regards,</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100467""></a>
  <div class="note">
   <strong class="user">magickey</strong>
   <a href="#100467" class="date">18-Oct-2010 11:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Simple UTF-8 Multibyte solution (without mb_substr)<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; $string</span><span class="keyword">=</span><span class="string">"texto en espa?ol"</span><span class="keyword">;<br />
&nbsp; echo </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">14</span><span class="keyword">); </span><span class="comment">//Outputs: texto en espa?<br />
</span><span class="default">?&gt;<br />
</span><br />
<span class="default">&lt;?php<br />
&nbsp; $string</span><span class="keyword">=</span><span class="string">"texto en espa?ol"</span><span class="keyword">;<br />
&nbsp; echo </span><span class="default">utf8_encode</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">utf8_decode</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">),</span><span class="default">0</span><span class="keyword">,</span><span class="default">14</span><span class="keyword">)); </span><span class="comment">//Outputs: texto en espa?<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100346""></a>
  <div class="note">
   <strong class="user">joseph dot davidson dot 707 at gmail dot com</strong>
   <a href="#100346" class="date">09-Oct-2010 09:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Using substr() to examine characters of a string without altering the string.
<br />

<br />
<span class="default">&lt;?php
<br />
$string </span><span class="keyword">= </span><span class="string">'This is my string'</span><span class="keyword">;
<br />
</span><span class="default">$length </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);
<br />
</span><span class="default">$myChar </span><span class="keyword">= </span><span class="string">'m'</span><span class="keyword">;
<br />

<br />
for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$length</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$showString_i </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$myChar </span><span class="keyword">== </span><span class="default">$showString_i</span><span class="keyword">) return </span><span class="default">$i</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
can also examine subs.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98975""></a>
  <div class="note">
   <strong class="user">jeff dot swain at pcmmllc dot com</strong>
   <a href="#98975" class="date">20-Jul-2010 02:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I noticed a slight issue when parsing out long strings using the substr function. <br />
<br />
Here is my string: $merge = "UPDATE AssistanceRequest SET RequestorID = '4301' WHERE RequestorID IN ( '4535','6222','4865','5137','4893')"<br />
<br />
To parse out the WHERE portion I used: <br />
$whereClause = substr($merge, strpos($merge,'WHERE', (strlen($merge) - strpos($merge,'WHERE')))); <br />
Normally the function returned: $whereClause = "WHERE RequestorID IN ( '4535','6222','4865','5137','4893')"<br />
<br />
This $whereClause gives me the WHERE clause to modify the MSSQL database records being manipulated. So that when I used $whereClause as the WHERE clause to create subsequent SQL, I used the following syntax: $setDeleteFlag = "UPDATE AssistanceRequestor SET bIsDirty = 'DELETE' " . $whereClause;<br />
<br />
This should have returned: $setDeleteFlag = "UPDATE AssistanceRequestor SET bIsDirty = 'DELETE' WHERE RequestorID IN ( '4535','6222','4865','5137','4893')"<br />
<br />
As long as the length of the original $merge string was less than 104 characters, the $setDeleteFlag sql came out correctly. However, when the length of the original $merge string exceeded 104 characters, I got this returned:<br />
<br />
$setDeleteFlag = "UPDATE AssistanceRequestor SET bIsDirty = 'DELETE' UPDATE AssistanceRequestor SET bIsDirty = 'DELETE' WHERE RequestorID IN ( '4535','6222','4865','5137','4893')"<br />
<br />
The result was that the bIsDirty field for every record in the database was set to 'DELETE'. I fixed it by breaking apart the substr to create the original $whereClause so that it looked like this:<br />
<br />
$wherePosition = strpos($merge,'WHERE');<br />
$whereClause = substr($merge, $wherePosition, strlen($merge) - $wherePosition);<br />
$setDeleteFlag = "UPDATE AssistanceRequestor SET bIsDirty = 'DELETE' " . $whereClause;<br />
<br />
I do have to note that I run PHP 5.x on my development server, while I think the production host is still on 4.x. I did not seem to have an issue in development, but I don't think I tested strings longer than 104 characters. Maybe this issue has been corrected in version 5.x.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95987""></a>
  <div class="note">
   <strong class="user">Jarrod Nettles (jarrod at squarecrow dot com)</strong>
   <a href="#95987" class="date">01-Feb-2010 09:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've seen numerous requests over the years from people trying to put together templating systems using XML parsers or regular expressions - you can create a simple template system with the following class. It could easily be expanded to take advantage of parameters, conditionals, etc.
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
</span><span class="keyword">class </span><span class="default">Template
<br />
</span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">OPEN_BRACKET </span><span class="keyword">= </span><span class="string">"{"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">CLOSE_BRACKET </span><span class="keyword">= </span><span class="string">"}"</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">inject</span><span class="keyword">(array </span><span class="default">$source</span><span class="keyword">, </span><span class="default">$template</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ob_size </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">self</span><span class="keyword">::</span><span class="default">OPEN_BRACKET</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$cb_size </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">self</span><span class="keyword">::</span><span class="default">CLOSE_BRACKET</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$template</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while(</span><span class="default">$pos </span><span class="keyword">&lt;= </span><span class="default">$end</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$pos_1 </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$template</span><span class="keyword">, </span><span class="default">self</span><span class="keyword">::</span><span class="default">OPEN_BRACKET</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">))
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$pos_1</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos_2 </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$template</span><span class="keyword">, </span><span class="default">self</span><span class="keyword">::</span><span class="default">CLOSE_BRACKET</span><span class="keyword">, </span><span class="default">$pos_1</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$pos_2</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return_length </span><span class="keyword">= (</span><span class="default">$pos_2</span><span class="keyword">-</span><span class="default">$cb_size</span><span class="keyword">) - </span><span class="default">$pos_1</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$var </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$template</span><span class="keyword">, </span><span class="default">$pos_1</span><span class="keyword">+</span><span class="default">$ob_size</span><span class="keyword">, </span><span class="default">$return_length</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$template </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">self</span><span class="keyword">::</span><span class="default">OPEN_BRACKET</span><span class="keyword">.</span><span class="default">$var</span><span class="keyword">.</span><span class="default">self</span><span class="keyword">::</span><span class="default">CLOSE_BRACKET</span><span class="keyword">, </span><span class="default">$source</span><span class="keyword">[</span><span class="default">$var</span><span class="keyword">], </span><span class="default">$template</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">$pos_2 </span><span class="keyword">+ </span><span class="default">$cb_size</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; throw new </span><span class="default">exception</span><span class="keyword">(</span><span class="string">"Incorrectly formed template - missing closing bracket. Please check your syntax."</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//exit the loop
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">break;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$template</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
}
<br />

<br />
</span><span class="comment">//array of values to inject into the template
<br />
</span><span class="default">$array </span><span class="keyword">= array(</span><span class="string">"NAME" </span><span class="keyword">=&gt; </span><span class="string">"John Doe"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"DOB"&nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">"12/21/1986"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"ACL" </span><span class="keyword">=&gt; </span><span class="string">"Super Administrator"</span><span class="keyword">);
<br />

<br />
</span><span class="comment">//template using '{' and '}' to signify variables 
<br />
</span><span class="default">$template </span><span class="keyword">= </span><span class="string">"This is your template, {NAME}. You were born on {DOB} and you are a {ACL} on this system."</span><span class="keyword">;
<br />

<br />
echo </span><span class="default">Template</span><span class="keyword">::</span><span class="default">inject</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$template</span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95918""></a>
  <div class="note">
   <strong class="user">vnonov at gmail dot com / Viktor Nonov</strong>
   <a href="#95918" class="date">28-Jan-2010 07:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">//removes string from the end of other<br />
<br />
</span><span class="keyword">function </span><span class="default">removeFromEnd</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$stringToRemove</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$stringToRemoveLen </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$stringToRemove</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$stringLen </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">$stringLen </span><span class="keyword">- </span><span class="default">$stringToRemoveLen</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$out</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$string </span><span class="keyword">= </span><span class="string">'picture.jpg.jpg'</span><span class="keyword">;<br />
</span><span class="default">$string </span><span class="keyword">= </span><span class="default">removeFromEnd</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="string">'.jpg'</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94705""></a>
  <div class="note">
   <strong class="user">biner(gf)</strong>
   <a href="#94705" class="date">19-Nov-2009 06:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">//substring without words breaking<br />
<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="string">"aa bb ccc ddd ee fff gg hhh iii"</span><span class="keyword">;<br />
<br />
echo </span><span class="default">substr</span><span class="keyword">((</span><span class="default">$str</span><span class="keyword">=</span><span class="default">wordwrap</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,$,</span><span class="string">'$$'</span><span class="keyword">)),</span><span class="default">0</span><span class="keyword">,</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="string">'$$'</span><span class="keyword">));<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93884""></a>
  <div class="note">
   <strong class="user">kaj dot strom at kapsi dot fi</strong>
   <a href="#93884" class="date">05-Oct-2009 01:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
One thing to keep in mind when using string indexes and UTF-8 is that string indexes are NOT multi-byte safe.<br />
<br />
<span class="default">&lt;?php<br />
$string </span><span class="keyword">= </span><span class="string">'???1'</span><span class="keyword">;<br />
echo </span><span class="default">$string</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">];<br />
</span><span class="default">?&gt;<br />
</span><br />
Outputs:<br />
¤<br />
<br />
When it logically should output "1". This is not a bug, as PHP 'normal' string functions are not intended to be multi-byte safe. This can be solved by using this function<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* <br />
&nbsp;* @param string $string String to "search" from<br />
&nbsp;* @param int $index Index of the letter we want.<br />
&nbsp;* @return string The letter found on $index.<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">charAt</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$index</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$index </span><span class="keyword">&lt; </span><span class="default">mb_strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$index</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return -</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92473""></a>
  <div class="note">
   <strong class="user">gkhelloworld at gmail dot com</strong>
   <a href="#92473" class="date">26-Jul-2009 12:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Shortens the filename and its expansion has seen.
<br />

<br />
<span class="default">&lt;?php
<br />
$file </span><span class="keyword">= </span><span class="string">"Hellothisfilehasmorethan30charactersandthisfayl.exe"</span><span class="keyword">;
<br />

<br />
function </span><span class="default">funclongwords</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">)
<br />
{
<br />
if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">) &gt; </span><span class="default">30</span><span class="keyword">)
<br />
{
<br />
</span><span class="default">$vartypesf </span><span class="keyword">= </span><span class="default">strrchr</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">,</span><span class="string">"."</span><span class="keyword">);
<br />
</span><span class="default">$vartypesf_len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$vartypesf</span><span class="keyword">);
<br />
</span><span class="default">$word_l_w </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">15</span><span class="keyword">);
<br />
</span><span class="default">$word_r_w </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">,-</span><span class="default">15</span><span class="keyword">);
<br />
</span><span class="default">$word_r_a </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$word_r_w</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,-</span><span class="default">$vartypesf_len</span><span class="keyword">);
<br />

<br />
return </span><span class="default">$word_l_w</span><span class="keyword">.</span><span class="string">"..."</span><span class="keyword">.</span><span class="default">$word_r_a</span><span class="keyword">.</span><span class="default">$vartypesf</span><span class="keyword">;
<br />
}
<br />
else
<br />
return </span><span class="default">$file</span><span class="keyword">;
<br />
}
<br />
</span><span class="comment">// RETURN: Hellothisfileha...andthisfayl.exe
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91351""></a>
  <div class="note">
   <strong class="user">kaysar in ymail in com</strong>
   <a href="#91351" class="date">08-Jun-2009 08:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Drop extensions of a file (even from a file location string)<br />
<br />
<span class="default">&lt;?php<br />
<br />
$filename </span><span class="keyword">= </span><span class="string">"c:/some dir/abc defg. hi.jklmn"</span><span class="keyword">;<br />
<br />
echo </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, (</span><span class="default">strlen </span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">)) - (</span><span class="default">strlen </span><span class="keyword">(</span><span class="default">strrchr</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">,</span><span class="string">'.'</span><span class="keyword">))));<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
output: c:/some dir/abc defg. hi<br />
<br />
Hope it may help somebody like me.. (^_^)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90724""></a>
  <div class="note">
   <strong class="user">benny at bennyborn dot de</strong>
   <a href="#90724" class="date">06-May-2009 10:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need a word-sensitive and also html-tags aware version of substr, this one should do the job. It works fine for me
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">/**
<br />
* word-sensitive substring function with html tags awareness
<br />
* @param text The text to cut
<br />
* @param len The maximum length of the cut string
<br />
* @returns string
<br />
**/
<br />
</span><span class="keyword">function </span><span class="default">substrws</span><span class="keyword">( </span><span class="default">$text</span><span class="keyword">, </span><span class="default">$len</span><span class="keyword">=</span><span class="default">180 </span><span class="keyword">) {
<br />

<br />
&nbsp;&nbsp;&nbsp; if( (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">) &gt; </span><span class="default">$len</span><span class="keyword">) ) {
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$whitespaceposition </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">,</span><span class="string">" "</span><span class="keyword">,</span><span class="default">$len</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">$whitespaceposition </span><span class="keyword">&gt; </span><span class="default">0 </span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, (</span><span class="default">$whitespaceposition</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">));
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// close unclosed html tags
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if( </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">"|&lt;([a-zA-Z]+)&gt;|"</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$aBuffer</span><span class="keyword">) ) {
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( !empty(</span><span class="default">$aBuffer</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]) ) {
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">"|&lt;/([a-zA-Z]+)&gt;|"</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$aBuffer2</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">count</span><span class="keyword">(</span><span class="default">$aBuffer</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]) != </span><span class="default">count</span><span class="keyword">(</span><span class="default">$aBuffer2</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]) ) {
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach( </span><span class="default">$aBuffer</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] as </span><span class="default">$index </span><span class="keyword">=&gt; </span><span class="default">$tag </span><span class="keyword">) {
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( empty(</span><span class="default">$aBuffer2</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$index</span><span class="keyword">]) || </span><span class="default">$aBuffer2</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$index</span><span class="keyword">] != </span><span class="default">$tag</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">.= </span><span class="string">'&lt;/'</span><span class="keyword">.</span><span class="default">$tag</span><span class="keyword">.</span><span class="string">'&gt;'</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$text</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90581""></a>
  <div class="note">
   <strong class="user">Andreas Bur (andreas dot buro at gmail dot com)</strong>
   <a href="#90581" class="date">29-Apr-2009 03:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For getting a substring of UTF-8 characters, I highly recommend mb_substr<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $utf8string </span><span class="keyword">= </span><span class="string">"cake???"</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$utf8string</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// output cake#<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">echo </span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$utf8string</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">,</span><span class="string">'UTF-8'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//output cake?<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90369""></a>
  <div class="note">
   <strong class="user">webmaster at oehoeboeroe dot nl</strong>
   <a href="#90369" class="date">18-Apr-2009 11:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You might expect substr('123456', 6) to return an empty string. Instead it returns boolean FALSE.
<br />

<br />
This behavior should be mentioned in the Return Values section of the manual. Instead it is only mentioned in the Parameters section.
<br />

<br />
If you need an empty string instead of a boolean FALSE you should typecast the result to a string.
<br />

<br />
<span class="default">&lt;?php
<br />
$a </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="string">'123456'</span><span class="keyword">, </span><span class="default">6</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// equivalent to $a = FALSE
<br />
</span><span class="default">$a </span><span class="keyword">= (string) </span><span class="default">substr</span><span class="keyword">(</span><span class="string">'123456'</span><span class="keyword">, </span><span class="default">6</span><span class="keyword">);&nbsp;&nbsp; </span><span class="comment">// equivalent to $a = '';
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90148""></a>
  <div class="note">
   <strong class="user">sajjad at sajjad dot biz</strong>
   <a href="#90148" class="date">08-Apr-2009 09:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Substring utf-8 strings!<br />
very simple!<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">substru</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$from</span><span class="keyword">,</span><span class="default">$len</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'#^(?:[\x00-\x7F]|[\xC0-\xFF][\x80-\xBF]+){0,'</span><span class="keyword">. </span><span class="default">$from </span><span class="keyword">.</span><span class="string">'}'</span><span class="keyword">.</span><span class="string">'((?:[\x00-\x7F]|[\xC0-\xFF][\x80-\xBF]+){0,'</span><span class="keyword">. </span><span class="default">$len </span><span class="keyword">.</span><span class="string">'}).*#s'</span><span class="keyword">,</span><span class="string">'$1'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89762""></a>
  <div class="note">
   <strong class="user">link</strong>
   <a href="#89762" class="date">22-Mar-2009 02:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
And as always there is bound to be a bug:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">strlen_entities</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'/((?:&amp;(?:#[0-9]{2,}|[a-z]{2,});)|(?:[^&amp;])|'</span><span class="keyword">.&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'(?:&amp;(?!\w;)))s'</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$textarray</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">count</span><span class="keyword">(</span><span class="default">$textarray</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br />
} <br />
function </span><span class="default">substr_entities</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$limit</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'/((?:&amp;(?:#[0-9]{2,}|[a-z]{2,});)|(?:[^&amp;])|'</span><span class="keyword">.&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'(?:&amp;(?!\w;)))s'</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$textarray</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$textarray </span><span class="keyword">= </span><span class="default">$textarray</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$numchars </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$textarray</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$start</span><span class="keyword">&gt;=</span><span class="default">$numchars</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$start</span><span class="keyword">&lt;</span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$start </span><span class="keyword">= (</span><span class="default">$numchars</span><span class="keyword">)+</span><span class="default">$start</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$start</span><span class="keyword">&gt;=</span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$limit</span><span class="keyword">==</span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$end</span><span class="keyword">=</span><span class="default">$numchars</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">$limit</span><span class="keyword">&gt;</span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">$start</span><span class="keyword">+(</span><span class="default">$limit</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">= (</span><span class="default">$numchars</span><span class="keyword">)+</span><span class="default">$limit</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">$start</span><span class="keyword">;(</span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">$end </span><span class="keyword">&amp;&amp; isset(</span><span class="default">$textarray</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]));</span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">.= </span><span class="default">$textarray</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$return</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89747""></a>
  <div class="note">
   <strong class="user">link</strong>
   <a href="#89747" class="date">21-Mar-2009 04:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I created some functions for entity-safe splitting+lengthcounting:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">strlen_entities</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'/((?:&amp;(?:#[0-9]{2,}|[a-z]{2,});)|(?:[^&amp;])|'</span><span class="keyword">.&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'(?:&amp;(?!\w;)))s'</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$textarray</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">count</span><span class="keyword">(</span><span class="default">$textarray</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br />
}&nbsp; <br />
function </span><span class="default">substr_entities</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$limit</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'/((?:&amp;(?:#[0-9]{2,}|[a-z]{2,});)|(?:[^&amp;])|'</span><span class="keyword">.&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'(?:&amp;(?!\w;)))s'</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$textarray</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$textarray </span><span class="keyword">= </span><span class="default">$textarray</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$numchars </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$textarray</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$start</span><span class="keyword">&gt;=</span><span class="default">$numchars</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$start</span><span class="keyword">&lt;</span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$start </span><span class="keyword">= (</span><span class="default">$numchars</span><span class="keyword">)+</span><span class="default">$start</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$start</span><span class="keyword">&gt;=</span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$limit</span><span class="keyword">==</span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$end</span><span class="keyword">=</span><span class="default">$numchars</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">$limit</span><span class="keyword">&gt;</span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">$start</span><span class="keyword">+(</span><span class="default">$limit</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">= (</span><span class="default">$numchars</span><span class="keyword">)+</span><span class="default">$limit</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">$start</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">$end</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">.= </span><span class="default">$textarray</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$return</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86587""></a>
  <div class="note">
   <strong class="user">mar dot czapla at gmail dot com</strong>
   <a href="#86587" class="date">24-Oct-2008 11:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here we have gr8 function which simply convert ip address to a number using substr with negative offset.
<br />
You can need it if you want to compare some IP addresses converted to a numbers. 
<br />
For example when using ip2country, or eliminating same range of ip addresses from your website :D
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
</span><span class="keyword">function </span><span class="default">ip2no</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)
<br />
{&nbsp; &nbsp; 
<br />
&nbsp;&nbsp;&nbsp; list(</span><span class="default">$A</span><span class="keyword">,</span><span class="default">$B</span><span class="keyword">,</span><span class="default">$C</span><span class="keyword">,</span><span class="default">$D</span><span class="keyword">)&nbsp; &nbsp; =&nbsp; &nbsp; </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"."</span><span class="keyword">,</span><span class="default">$val</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; return 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">substr</span><span class="keyword">(</span><span class="string">"000"</span><span class="keyword">.</span><span class="default">$A</span><span class="keyword">,-</span><span class="default">3</span><span class="keyword">).
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">substr</span><span class="keyword">(</span><span class="string">"000"</span><span class="keyword">.</span><span class="default">$B</span><span class="keyword">,-</span><span class="default">3</span><span class="keyword">).
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">substr</span><span class="keyword">(</span><span class="string">"000"</span><span class="keyword">.</span><span class="default">$C</span><span class="keyword">,-</span><span class="default">3</span><span class="keyword">).
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">substr</span><span class="keyword">(</span><span class="string">"000"</span><span class="keyword">.</span><span class="default">$D</span><span class="keyword">,-</span><span class="default">3</span><span class="keyword">);
<br />
}
<br />

<br />
</span><span class="default">$min&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; </span><span class="default">ip2no</span><span class="keyword">(</span><span class="string">"10.11.1.0"</span><span class="keyword">);
<br />
</span><span class="default">$max&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; </span><span class="default">ip2no</span><span class="keyword">(</span><span class="string">"111.11.1.0"</span><span class="keyword">);
<br />
</span><span class="default">$visitor&nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; </span><span class="default">ip2no</span><span class="keyword">(</span><span class="string">"105.1.20.200"</span><span class="keyword">);
<br />

<br />
if(</span><span class="default">$min</span><span class="keyword">&lt;</span><span class="default">$visitor </span><span class="keyword">&amp;&amp; </span><span class="default">$visitor</span><span class="keyword">&lt;</span><span class="default">$max</span><span class="keyword">)&nbsp; &nbsp; 
<br />
&nbsp;&nbsp;&nbsp; {&nbsp; &nbsp; echo </span><span class="string">'Welcome !'</span><span class="keyword">;&nbsp; &nbsp; }
<br />
else&nbsp; &nbsp; 
<br />
&nbsp;&nbsp;&nbsp; {&nbsp; &nbsp; echo </span><span class="string">'Get out of here !'</span><span class="keyword">;&nbsp; &nbsp; }
<br />

<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86018""></a>
  <div class="note">
   <strong class="user">mr.davin</strong>
   <a href="#86018" class="date">29-Sep-2008 07:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Simple use of substr to determine possession:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">possessive </span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; return&nbsp; </span><span class="default">$word</span><span class="keyword">.(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">) == </span><span class="string">'s' </span><span class="keyword">? </span><span class="string">"'" </span><span class="keyword">: </span><span class="string">"'s"</span><span class="keyword">);
<br />
}
<br />

<br />
</span><span class="comment">// Davis =&gt; Davis'
<br />
// Paul =&gt; Paul's
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85827""></a>
  <div class="note">
   <strong class="user">NULL_byte</strong>
   <a href="#85827" class="date">19-Sep-2008 12:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">insert_substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">, </span><span class="default">$substr</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$part1 </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, -</span><span class="default">$pos</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$part2 </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, -</span><span class="default">$pos</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$part1</span><span class="keyword">.</span><span class="default">$substr</span><span class="keyword">.</span><span class="default">$part2</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84907""></a>
  <div class="note">
   <strong class="user">post [at] jannik - zappe [dot] de</strong>
   <a href="#84907" class="date">05-Aug-2008 04:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just a little function to cut a string by the wanted amount. Works in both directions.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">cutString</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$amount </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">, </span><span class="default">$dir </span><span class="keyword">= </span><span class="string">"right"</span><span class="keyword">)<br />
{<br />
&nbsp; if((</span><span class="default">$n </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)) &gt; </span><span class="default">0</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$dir </span><span class="keyword">== </span><span class="string">"right"</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">$n</span><span class="keyword">-</span><span class="default">$amount</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; } elseif( </span><span class="default">$dir </span><span class="keyword">== </span><span class="string">"left"</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">$amount</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">$n</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$end</span><span class="keyword">);<br />
&nbsp; } else return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Enjoy ;)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84775""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#84775" class="date">29-Jul-2008 08:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wrote this simple function to limit the middle characters of a string to a specified length.
<br />

<br />
<span class="default">&lt;?php
<br />
$input </span><span class="keyword">= </span><span class="string">"hello world"
<br />
</span><span class="keyword">echo(</span><span class="default">limitchrmid</span><span class="keyword">(</span><span class="default">$imput</span><span class="keyword">,</span><span class="default">10</span><span class="keyword">)) </span><span class="comment">// hel ... rld
<br />

<br />
//limit chars middle
<br />
</span><span class="keyword">function </span><span class="default">limitchrmid</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">,</span><span class="default">$lenght</span><span class="keyword">){
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) &gt;= </span><span class="default">$lenght </span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$lenght_max </span><span class="keyword">= (</span><span class="default">$lenght</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">)-</span><span class="default">3</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)- </span><span class="default">$lenght_max</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$limited </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$lenght_max</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$limited</span><span class="keyword">.= </span><span class="string">" ... "</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$limited</span><span class="keyword">.= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$lenght_max</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; else{
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$limited </span><span class="keyword">= </span><span class="default">$value</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$limited</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81866""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#81866" class="date">17-Mar-2008 12:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Split a string to an array of strings specified by an array of lengths:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">split_by_lengths</span><span class="keyword">(</span><span class="default">$inString</span><span class="keyword">, </span><span class="default">$arrayLengths</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$output </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$arrayLengths </span><span class="keyword">as </span><span class="default">$oneLength</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$output</span><span class="keyword">[] = </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$inString</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$oneLength</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$inString </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$inString</span><span class="keyword">, </span><span class="default">$oneLength</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return (</span><span class="default">$output</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span>split_by_lengths('teststringtestteststring', array(4,6,4,4,6)) returns:<br />
array('test','string','test','test','string')<br />
<br />
Don't use it on user input without some error handling!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81491""></a>
  <div class="note">
   <strong class="user">kriskra at gmail dot com</strong>
   <a href="#81491" class="date">01-Mar-2008 02:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The javascript charAt equivalent in php of felipe has a little bug. It's necessary to compare the type (implicit) aswell or the function returns a wrong result:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">charAt</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$pos</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$pos</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">) ? </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$pos</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">) : -</span><span class="default">1</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81335""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#81335" class="date">23-Feb-2008 02:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've used the between, after, before, etc functions that biohazard put together for years and they work great.&nbsp; I've also added to it a new function that I use a lot and thought others might like it as well.&nbsp; It uses his before/after functions so they are required to use it.
<br />

<br />
<span class="default">&lt;?php
<br />
$example_html </span><span class="keyword">= </span><span class="string">"&lt;p&gt;test1 Test2&lt;/p&gt;&lt;title&gt;hi there&lt;/title&gt;&lt;p&gt;Testing&lt;/p&gt;"</span><span class="keyword">;
<br />
</span><span class="default">$paragraph_text </span><span class="keyword">= </span><span class="default">multi_between</span><span class="keyword">(</span><span class="string">'&lt;p&gt;'</span><span class="keyword">, </span><span class="string">'&lt;/p&gt;'</span><span class="keyword">, </span><span class="default">$example_html</span><span class="keyword">);
<br />

<br />
</span><span class="comment">//Prints an arry of:
<br />
//Array ( [1] =&gt; test1 Test2 [2] =&gt; Testing )
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$paragraph_text</span><span class="keyword">);
<br />

<br />
function </span><span class="default">multi_between</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">$that</span><span class="keyword">, </span><span class="default">$inthat</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp; </span><span class="default">$counter </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; while (</span><span class="default">$inthat</span><span class="keyword">)
<br />
&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$counter</span><span class="keyword">++;
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$elements</span><span class="keyword">[</span><span class="default">$counter</span><span class="keyword">] = </span><span class="default">before</span><span class="keyword">(</span><span class="default">$that</span><span class="keyword">, </span><span class="default">$inthat</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$elements</span><span class="keyword">[</span><span class="default">$counter</span><span class="keyword">] = </span><span class="default">after</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">$elements</span><span class="keyword">[</span><span class="default">$counter</span><span class="keyword">]);
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$inthat </span><span class="keyword">= </span><span class="default">after</span><span class="keyword">(</span><span class="default">$that</span><span class="keyword">, </span><span class="default">$inthat</span><span class="keyword">);
<br />
&nbsp;&nbsp; }
<br />
&nbsp;&nbsp; return </span><span class="default">$elements</span><span class="keyword">;
<br />
}
<br />
</span><span class="comment">//Get the help functions from biohazard's post below.
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80247""></a>
  <div class="note">
   <strong class="user">highstrike at gmail dot com</strong>
   <a href="#80247" class="date">06-Jan-2008 05:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Because i didnt see a function that would cut a phrase from a text (article or whatever) no matter where, front/middle/end and add ... + keeping the words intact, i wrote this:<br />
<br />
Usage:<br />
- The parameter $value if array will need the whole text and the portion you want to start from, a string. EG: cuttext(array($text, $string), 20). If the string is "have" and is near the beginning of the text, the function will cut like "I have a car ...", if the string is in the middle somewhere it will cut like "... if you want to have your own car ..." and if its somewhere near the end it will cut like "... and you will have one."<br />
- The $length parameter is self explanatory.<br />
<br />
Note: if you have just a string "127hh43h2h52312453jfks2" and you want to cut it, just use the function like so: cuttext($string, 10) and it will cut it like "127hh43h2h..."<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">////////////////////////////////////////////////////////<br />
// Function:&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; cuttext<br />
// Description: Cuts a string and adds ...<br />
<br />
</span><span class="keyword">function </span><span class="default">cuttext</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$length</span><span class="keyword">)<br />
{&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) list(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$match_to</span><span class="keyword">) = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; else { </span><span class="default">$string </span><span class="keyword">= </span><span class="default">$value</span><span class="keyword">; </span><span class="default">$match_to </span><span class="keyword">= </span><span class="default">$value</span><span class="keyword">{</span><span class="default">0</span><span class="keyword">}; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$match_start </span><span class="keyword">= </span><span class="default">stristr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$match_to</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$match_compute </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">) - </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$match_start</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">) &gt; </span><span class="default">$length</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$match_compute </span><span class="keyword">&lt; (</span><span class="default">$length </span><span class="keyword">- </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$match_to</span><span class="keyword">)))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pre_string </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$length</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos_end </span><span class="keyword">= </span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$pre_string</span><span class="keyword">, </span><span class="string">" "</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$pos_end </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) </span><span class="default">$string </span><span class="keyword">= </span><span class="default">$pre_string</span><span class="keyword">.</span><span class="string">"..."</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else </span><span class="default">$string </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$pre_string</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$pos_end</span><span class="keyword">).</span><span class="string">"..."</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else if (</span><span class="default">$match_compute </span><span class="keyword">&gt; (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">) - (</span><span class="default">$length </span><span class="keyword">- </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$match_to</span><span class="keyword">))))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pre_string </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">) - (</span><span class="default">$length </span><span class="keyword">- </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$match_to</span><span class="keyword">))));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos_start </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$pre_string</span><span class="keyword">, </span><span class="string">" "</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="string">"..."</span><span class="keyword">.</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$pre_string</span><span class="keyword">, </span><span class="default">$pos_start</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$pos_start </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) </span><span class="default">$string </span><span class="keyword">= </span><span class="string">"..."</span><span class="keyword">.</span><span class="default">$pre_string</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else </span><span class="default">$string </span><span class="keyword">= </span><span class="string">"..."</span><span class="keyword">.</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$pre_string</span><span class="keyword">, </span><span class="default">$pos_start</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pre_string </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, (</span><span class="default">$match_compute </span><span class="keyword">- </span><span class="default">round</span><span class="keyword">((</span><span class="default">$length </span><span class="keyword">/ </span><span class="default">3</span><span class="keyword">))), </span><span class="default">$length</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos_start </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$pre_string</span><span class="keyword">, </span><span class="string">" "</span><span class="keyword">); </span><span class="default">$pos_end </span><span class="keyword">= </span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$pre_string</span><span class="keyword">, </span><span class="string">" "</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="string">"..."</span><span class="keyword">.</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$pre_string</span><span class="keyword">, </span><span class="default">$pos_start</span><span class="keyword">, </span><span class="default">$pos_end</span><span class="keyword">).</span><span class="string">"..."</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$pos_start </span><span class="keyword">=== </span><span class="default">false </span><span class="keyword">&amp;&amp; </span><span class="default">$pos_end </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) </span><span class="default">$string </span><span class="keyword">= </span><span class="string">"..."</span><span class="keyword">.</span><span class="default">$pre_string</span><span class="keyword">.</span><span class="string">"..."</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else </span><span class="default">$string </span><span class="keyword">= </span><span class="string">"..."</span><span class="keyword">.</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$pre_string</span><span class="keyword">, </span><span class="default">$pos_start</span><span class="keyword">, </span><span class="default">$pos_end</span><span class="keyword">).</span><span class="string">"..."</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$match_start </span><span class="keyword">= </span><span class="default">stristr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$match_to</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$match_compute </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">) - </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$match_start</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$string</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78019""></a>
  <div class="note">
   <strong class="user">morgangalpin att gmail dotty com</strong>
   <a href="#78019" class="date">24-Sep-2007 07:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Adding the $limit parameter introduced a bug that was not present in the original. If $limit is small or negative, a string with a length exceeding the limit can be returned. The $limit parameter should be checked. It takes slightly more processing, but it is dwarfed in comparison to the use of strlen().<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="keyword">function </span><span class="default">short_name</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$limit</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Make sure a small or negative limit doesn't cause a negative length for substr().<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$limit </span><span class="keyword">&lt; </span><span class="default">3</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$limit </span><span class="keyword">= </span><span class="default">3</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Now truncate the string if it is over the limit.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) &gt; </span><span class="default">$limit</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$limit </span><span class="keyword">- </span><span class="default">3</span><span class="keyword">) . </span><span class="string">'...'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">$str</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77483""></a>
  <div class="note">
   <strong class="user">Petez</strong>
   <a href="#77483" class="date">31-Aug-2007 12:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wanted to work out the fastest way to get the first few characters from a string, so I ran the following experiment to compare substr, direct string access and strstr:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/* substr access */<br />
</span><span class="default">beginTimer</span><span class="keyword">();<br />
for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">1500000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$opening </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">11</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$opening </span><span class="keyword">== </span><span class="string">'Lorem ipsum'</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">$endtime1 </span><span class="keyword">= </span><span class="default">endTimer</span><span class="keyword">();<br />
<br />
</span><span class="comment">/* direct access */<br />
</span><span class="default">beginTimer</span><span class="keyword">();<br />
for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">1500000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$string</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] == </span><span class="string">'L' </span><span class="keyword">&amp;&amp; </span><span class="default">$string</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] == </span><span class="string">'o' </span><span class="keyword">&amp;&amp; </span><span class="default">$string</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] == </span><span class="string">'r' </span><span class="keyword">&amp;&amp; </span><span class="default">$string</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">] == </span><span class="string">'e' </span><span class="keyword">&amp;&amp; </span><span class="default">$string</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">] == </span><span class="string">'m' </span><span class="keyword">&amp;&amp; </span><span class="default">$string</span><span class="keyword">[</span><span class="default">5</span><span class="keyword">] == </span><span class="string">' ' </span><span class="keyword">&amp;&amp; </span><span class="default">$string</span><span class="keyword">[</span><span class="default">6</span><span class="keyword">] == </span><span class="string">'i' </span><span class="keyword">&amp;&amp; </span><span class="default">$string</span><span class="keyword">[</span><span class="default">7</span><span class="keyword">] == </span><span class="string">'p' </span><span class="keyword">&amp;&amp; </span><span class="default">$string</span><span class="keyword">[</span><span class="default">8</span><span class="keyword">] == </span><span class="string">'s' </span><span class="keyword">&amp;&amp; </span><span class="default">$string</span><span class="keyword">[</span><span class="default">9</span><span class="keyword">] == </span><span class="string">'u' </span><span class="keyword">&amp;&amp; </span><span class="default">$string</span><span class="keyword">[</span><span class="default">10</span><span class="keyword">] == </span><span class="string">'m'</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">$endtime2 </span><span class="keyword">= </span><span class="default">endTimer</span><span class="keyword">();<br />
<br />
</span><span class="comment">/* strstr access */<br />
</span><span class="default">beginTimer</span><span class="keyword">();<br />
for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">1500000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$opening </span><span class="keyword">= </span><span class="default">strstr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="string">'Lorem ipsum'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$opening </span><span class="keyword">== </span><span class="default">true</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">$endtime3 </span><span class="keyword">= </span><span class="default">endTimer</span><span class="keyword">();<br />
<br />
echo </span><span class="default">$endtime1</span><span class="keyword">.</span><span class="string">"\r\n"</span><span class="keyword">.</span><span class="default">$endtime2</span><span class="keyword">.</span><span class="string">"\r\n"</span><span class="keyword">.</span><span class="default">$endtime3</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
The string was 6 paragraphs of Lorem Ipsum, and I was trying match the first two words. The experiment was run 3 times and averaged. The results were:<br />
<br />
(substr) 3.24<br />
(direct access) 11.49<br />
(strstr) 4.96<br />
<br />
(With standard deviations 0.01, 0.02 and 0.04)<br />
<br />
THEREFORE substr is the fastest of the three methods for getting the first few letters of a string.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76016""></a>
  <div class="note">
   <strong class="user">Robert Chapin</strong>
   <a href="#76016" class="date">26-Jun-2007 11:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
All the references to "curly braces" on this page appear to be obsolete.<br />
<br />
According to <a href="http://us.php.net/manual/en/language.types.string.php" rel="nofollow" target="_blank">http://us.php.net/manual/en/language.types.string.php</a><br />
<br />
"Using square array-brackets is preferred because the {braces} style is deprecated as of PHP 6."<br />
<br />
Robert Chapin<br />
Chapin Information Services</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73233""></a>
  <div class="note">
   <strong class="user">ijavier aka(not imatech) igjav</strong>
   <a href="#73233" class="date">14-Feb-2007 11:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php
<br />
</span><span class="comment">/*
<br />
&nbsp;&nbsp;&nbsp; An advanced substr but without breaking words in the middle.
<br />
&nbsp;&nbsp;&nbsp; Comes in 3 flavours, one gets up to length chars as a maximum, the other with length chars as a minimum up to the next word, and the other considers removing final dots, commas and etcteteras for the sake of beauty (hahaha).
<br />
&nbsp;&nbsp; This functions were posted by me some years ago, in the middle of the ages I had to use them in some corporations incorporated, with the luck to find them in some php not up to date mirrors. These mirrors are rarely being more not up to date till the end of the world... Well, may be am I the only person that finds usef not t bre word in th middl?
<br />

<br />
Than! (ks)
<br />

<br />
This is the calling syntax:
<br />

<br />
&nbsp;&nbsp;&nbsp; snippet(phrase,[max length],[phrase tail])
<br />
&nbsp;&nbsp;&nbsp; snippetgreedy(phrase,[max length before next space],[phrase tail])
<br />

<br />
*/
<br />

<br />
</span><span class="keyword">function </span><span class="default">snippet</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$length</span><span class="keyword">=</span><span class="default">64</span><span class="keyword">,</span><span class="default">$tail</span><span class="keyword">=</span><span class="string">"..."</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$txtl </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$txtl </span><span class="keyword">&gt; </span><span class="default">$length</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;</span><span class="default">$text</span><span class="keyword">[</span><span class="default">$length</span><span class="keyword">-</span><span class="default">$i</span><span class="keyword">]!=</span><span class="string">" "</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$i </span><span class="keyword">== </span><span class="default">$length</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$length</span><span class="keyword">) . </span><span class="default">$tail</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$length</span><span class="keyword">-</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">) . </span><span class="default">$tail</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; } 
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$text</span><span class="keyword">;
<br />
}
<br />

<br />
</span><span class="comment">// It behaves greedy, gets length characters ore goes for more
<br />

<br />
</span><span class="keyword">function </span><span class="default">snippetgreedy</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$length</span><span class="keyword">=</span><span class="default">64</span><span class="keyword">,</span><span class="default">$tail</span><span class="keyword">=</span><span class="string">"..."</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">) &gt; </span><span class="default">$length</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$text</span><span class="keyword">[</span><span class="default">$length</span><span class="keyword">+</span><span class="default">$i</span><span class="keyword">]!=</span><span class="string">" "</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">$text</span><span class="keyword">[</span><span class="default">$length</span><span class="keyword">+</span><span class="default">$i</span><span class="keyword">]) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$text</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$length</span><span class="keyword">+</span><span class="default">$i</span><span class="keyword">) . </span><span class="default">$tail</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; } 
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$text</span><span class="keyword">;
<br />
}
<br />

<br />
</span><span class="comment">// The same as the snippet but removing latest low punctuation chars, 
<br />
// if they exist (dots and commas). It performs a later suffixal trim of spaces
<br />

<br />
</span><span class="keyword">function </span><span class="default">snippetwop</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$length</span><span class="keyword">=</span><span class="default">64</span><span class="keyword">,</span><span class="default">$tail</span><span class="keyword">=</span><span class="string">"..."</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$txtl </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$txtl </span><span class="keyword">&gt; </span><span class="default">$length</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;</span><span class="default">$text</span><span class="keyword">[</span><span class="default">$length</span><span class="keyword">-</span><span class="default">$i</span><span class="keyword">]!=</span><span class="string">" "</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$i </span><span class="keyword">== </span><span class="default">$length</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$length</span><span class="keyword">) . </span><span class="default">$tail</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for(;</span><span class="default">$text</span><span class="keyword">[</span><span class="default">$length</span><span class="keyword">-</span><span class="default">$i</span><span class="keyword">]==</span><span class="string">"," </span><span class="keyword">|| </span><span class="default">$text</span><span class="keyword">[</span><span class="default">$length</span><span class="keyword">-</span><span class="default">$i</span><span class="keyword">]==</span><span class="string">"." </span><span class="keyword">|| </span><span class="default">$text</span><span class="keyword">[</span><span class="default">$length</span><span class="keyword">-</span><span class="default">$i</span><span class="keyword">]==</span><span class="string">" "</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++) {;}
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$length</span><span class="keyword">-</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">) . </span><span class="default">$tail</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; } 
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$text</span><span class="keyword">;
<br />
}
<br />

<br />
</span><span class="comment">/*
<br />
echo(snippet("this is not too long to run on the column on the left, perhaps, or perhaps yes, no idea") . "&lt;br&gt;");
<br />
echo(snippetwop("this is not too long to run on the column on the left, perhaps, or perhaps yes, no idea") . "&lt;br&gt;");
<br />
echo(snippetgreedy("this is not too long to run on the column on the left, perhaps, or perhaps yes, no idea"));
<br />
*/
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73213""></a>
  <div class="note">
   <strong class="user">persisteus at web dot de</strong>
   <a href="#73213" class="date">13-Feb-2007 04:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is also a nice (but a bit slow) alternative for colorizing an true color image:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">// $colorize = hexadecimal code in String format, f.e. "10ffa2"
<br />
// $im = the image that have to be computed
<br />

<br />
</span><span class="default">$red </span><span class="keyword">= </span><span class="default">hexdec</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$colorize</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">));
<br />
</span><span class="default">$green </span><span class="keyword">= </span><span class="default">hexdec</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$colorize</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">));
<br />
</span><span class="default">$blue </span><span class="keyword">= </span><span class="default">hexdec</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$colorize</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">));
<br />

<br />
</span><span class="default">$lum_c </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">((</span><span class="default">$red</span><span class="keyword">*</span><span class="default">299 </span><span class="keyword">+ </span><span class="default">$green</span><span class="keyword">*</span><span class="default">587 </span><span class="keyword">+ </span><span class="default">$blue</span><span class="keyword">*</span><span class="default">144</span><span class="keyword">) / </span><span class="default">1000</span><span class="keyword">);
<br />

<br />
for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$lum_c</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)
<br />
{
<br />
&nbsp; </span><span class="default">$r </span><span class="keyword">= </span><span class="default">$red </span><span class="keyword">* </span><span class="default">$i </span><span class="keyword">/ </span><span class="default">$lum_c</span><span class="keyword">;
<br />
&nbsp; </span><span class="default">$g </span><span class="keyword">= </span><span class="default">$green </span><span class="keyword">* </span><span class="default">$i </span><span class="keyword">/ </span><span class="default">$lum_c</span><span class="keyword">;
<br />
&nbsp; </span><span class="default">$b </span><span class="keyword">= </span><span class="default">$blue </span><span class="keyword">* </span><span class="default">$i </span><span class="keyword">/ </span><span class="default">$lum_c</span><span class="keyword">;
<br />
&nbsp; </span><span class="default">$pal</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$r</span><span class="keyword">&lt;&lt;</span><span class="default">16 </span><span class="keyword">| </span><span class="default">$g</span><span class="keyword">&lt;&lt;</span><span class="default">8 </span><span class="keyword">| </span><span class="default">$b</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">$pal</span><span class="keyword">[</span><span class="default">$lum_c</span><span class="keyword">] = </span><span class="default">$red</span><span class="keyword">&lt;&lt;</span><span class="default">16 </span><span class="keyword">| </span><span class="default">$green</span><span class="keyword">&lt;&lt;</span><span class="default">8 </span><span class="keyword">| </span><span class="default">$blue</span><span class="keyword">;
<br />
for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">$lum_c</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">255</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)
<br />
{
<br />
&nbsp; </span><span class="default">$r </span><span class="keyword">= </span><span class="default">$red </span><span class="keyword">+ (</span><span class="default">255</span><span class="keyword">-</span><span class="default">$red</span><span class="keyword">) * (</span><span class="default">$i</span><span class="keyword">-</span><span class="default">$lum_c</span><span class="keyword">) / (</span><span class="default">255</span><span class="keyword">-</span><span class="default">$lum_c</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$g </span><span class="keyword">= </span><span class="default">$green </span><span class="keyword">+ (</span><span class="default">255</span><span class="keyword">-</span><span class="default">$green</span><span class="keyword">) * (</span><span class="default">$i</span><span class="keyword">-</span><span class="default">$lum_c</span><span class="keyword">) / (</span><span class="default">255</span><span class="keyword">-</span><span class="default">$lum_c</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$b </span><span class="keyword">= </span><span class="default">$blue </span><span class="keyword">+ (</span><span class="default">255</span><span class="keyword">-</span><span class="default">$blue</span><span class="keyword">) * (</span><span class="default">$i</span><span class="keyword">-</span><span class="default">$lum_c</span><span class="keyword">) / (</span><span class="default">255</span><span class="keyword">-</span><span class="default">$lum_c</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$pal</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$r</span><span class="keyword">&lt;&lt;</span><span class="default">16 </span><span class="keyword">| </span><span class="default">$g</span><span class="keyword">&lt;&lt;</span><span class="default">8 </span><span class="keyword">| </span><span class="default">$b</span><span class="keyword">;
<br />
}
<br />

<br />
</span><span class="default">$sy </span><span class="keyword">= </span><span class="default">imagesy</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">);
<br />
</span><span class="default">$sx </span><span class="keyword">= </span><span class="default">imagesx</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">);
<br />
for(</span><span class="default">$y</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$y</span><span class="keyword">&lt;</span><span class="default">$sy</span><span class="keyword">;</span><span class="default">$y</span><span class="keyword">++)
<br />
{
<br />
&nbsp; for(</span><span class="default">$x</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$x</span><span class="keyword">&lt;</span><span class="default">$sx</span><span class="keyword">;</span><span class="default">$x</span><span class="keyword">++)
<br />
&nbsp; {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rgba </span><span class="keyword">= </span><span class="default">imagecolorat</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$a </span><span class="keyword">= (</span><span class="default">$rgba </span><span class="keyword">&amp; </span><span class="default">0x7F000000</span><span class="keyword">) &gt;&gt; </span><span class="default">24</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$r </span><span class="keyword">= (</span><span class="default">$rgba </span><span class="keyword">&amp; </span><span class="default">0xFF0000</span><span class="keyword">) &gt;&gt; </span><span class="default">16</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$g </span><span class="keyword">= (</span><span class="default">$rgba </span><span class="keyword">&amp; </span><span class="default">0x00FF00</span><span class="keyword">) &gt;&gt; </span><span class="default">8</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$b </span><span class="keyword">= (</span><span class="default">$rgba </span><span class="keyword">&amp; </span><span class="default">0x0000FF</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$lum </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">((</span><span class="default">$r</span><span class="keyword">*</span><span class="default">299</span><span class="keyword">+</span><span class="default">$g</span><span class="keyword">*</span><span class="default">587</span><span class="keyword">+</span><span class="default">$b</span><span class="keyword">*</span><span class="default">144</span><span class="keyword">)/</span><span class="default">1000</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imagesetpixel</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">&lt;&lt;</span><span class="default">24 </span><span class="keyword">| </span><span class="default">$pal</span><span class="keyword">[</span><span class="default">$lum</span><span class="keyword">]);
<br />
&nbsp; }
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70513""></a>
  <div class="note">
   <strong class="user">egingell at sisna dot com</strong>
   <a href="#70513" class="date">19-Oct-2006 12:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* string substrpos(string $str, mixed $start [[, mixed $end], boolean $ignore_case])<br />
&nbsp;*<br />
&nbsp;* If $start is a string, substrpos will return the string from the position of the first occuring $start to $end<br />
&nbsp;*<br />
&nbsp;* If $end is a string, substrpos will return the string from $start to the position of the first occuring $end<br />
&nbsp;*<br />
&nbsp;* If the first character in (string) $start or (string) $end is '-', the last occuring string will be used.<br />
&nbsp;*<br />
&nbsp;* If $ignore_case is true, substrpos will not care about the case.<br />
&nbsp;* If $ignore_case is false (or anything that is not (boolean) true, the function will be case sensitive.<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; Both of the above: only applies if either $start or $end are strings.<br />
&nbsp;*<br />
&nbsp;* echo substrpos('This is a string with 0123456789 numbers in it.', 5, '5');<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; // Prints 'is a string with 01234';<br />
&nbsp;*<br />
&nbsp;* echo substrpos('This is a string with 0123456789 numbers in it.', '5', 5);<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; // Prints '56789'<br />
&nbsp;*<br />
&nbsp;* echo substrpos('This is a string with 0123456789 numbers in it and two strings.', -60, '-string')<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; // Prints 's is a string with 0123456789 numbers in it and two '<br />
&nbsp;*<br />
&nbsp;* echo substrpos('This is a string with 0123456789 numbers in it and two strings.', -60, '-STRING', true)<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; // Prints 's is a string with 0123456789 numbers in it and two '<br />
&nbsp;*<br />
&nbsp;* echo substrpos('This is a string with 0123456789 numbers in it and two strings.', -60, '-STRING', false)<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; // Prints 's is a string with 0123456789 numbers in it and two strings.'<br />
&nbsp;*<br />
&nbsp;* Warnings:<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; Since $start and $end both take either a string or an integer:<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; If the character or string you are searching $str for is a number, pass it as a quoted string.<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; If $end is (integer) 0, an empty string will be returned.<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; Since this function takes negative strings ('-search_string'):<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; If the string your using in $start or $end is a '-' or begins with a '-' escape it with a '\'.<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; This only applies to the *first* character of $start or $end.<br />
&nbsp;*/<br />
<br />
// Define stripos() if not defined (PHP &lt; 5).<br />
</span><span class="keyword">if (!</span><span class="default">is_callable</span><span class="keyword">(</span><span class="string">"stripos"</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">stripos</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">), </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">), </span><span class="default">$offset</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
function </span><span class="default">substrpos</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$end </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">, </span><span class="default">$ignore_case </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Use variable functions<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$ignore_case </span><span class="keyword">=== </span><span class="default">true</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$strpos </span><span class="keyword">= </span><span class="string">'stripos'</span><span class="keyword">; </span><span class="comment">// stripos() is included above in case it's not defined (PHP &lt; 5).<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">} else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$strpos </span><span class="keyword">= </span><span class="string">'strpos'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// If end is false, set it to the length of $str<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$end </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// If $start is a string do what's needed to make it an integer position for substr().<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$start</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If $start begins with '-' start processing until there's no more matches and use the last one found.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$start</span><span class="keyword">{</span><span class="default">0</span><span class="keyword">} == </span><span class="string">'-'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Strip off the '-'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$start</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$found </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while((</span><span class="default">$curr_pos </span><span class="keyword">= </span><span class="default">$strpos</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$found </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">$curr_pos </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$found </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">-= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If $start begins with '\-', strip off the '\'.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$start</span><span class="keyword">{</span><span class="default">0</span><span class="keyword">} . </span><span class="default">$start</span><span class="keyword">{</span><span class="default">1</span><span class="keyword">} == </span><span class="string">'\-'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$start</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">$strpos</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">$pos </span><span class="keyword">!== </span><span class="default">false </span><span class="keyword">? </span><span class="default">$pos </span><span class="keyword">: </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Chop the string from $start to strlen($str).<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// If $end is a string, do exactly what was done to $start, above.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$end</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$end</span><span class="keyword">{</span><span class="default">0</span><span class="keyword">} == </span><span class="string">'-'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$end</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$found </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while((</span><span class="default">$curr_pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$end</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$found </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">$curr_pos </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$found </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">-= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$end</span><span class="keyword">{</span><span class="default">0</span><span class="keyword">} . </span><span class="default">$end</span><span class="keyword">{</span><span class="default">1</span><span class="keyword">} == </span><span class="string">'\-'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$end</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">$strpos</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$end</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">$pos </span><span class="keyword">!== </span><span class="default">false </span><span class="keyword">? </span><span class="default">$pos </span><span class="keyword">: </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Since $str has already been chopped at $start, we can pass 0 as the new $start for substr()<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$end</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70417""></a>
  <div class="note">
   <strong class="user">feedback at realitymedias dot com</strong>
   <a href="#70417" class="date">16-Oct-2006 02:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function can replace substr() in some situations you don't want to cut right in the middle of a word. strtrim will cut between words when it is possible choosing the closest possible final string len to return. the maxoverflow parameter lets you choose how many characters can overflow past the maxlen parameter.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">strtrim</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$maxlen</span><span class="keyword">=</span><span class="default">100</span><span class="keyword">, </span><span class="default">$elli</span><span class="keyword">=</span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$maxoverflow</span><span class="keyword">=</span><span class="default">15</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; global </span><span class="default">$CONF</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) &gt; </span><span class="default">$maxlen</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$CONF</span><span class="keyword">[</span><span class="string">"BODY_TRIM_METHOD_STRLEN"</span><span class="keyword">]) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$maxlen</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$output </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$body </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$body_count </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$body</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; do {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$output </span><span class="keyword">.= </span><span class="default">$body</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">].</span><span class="string">" "</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$thisLen </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$output</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$cycle </span><span class="keyword">= (</span><span class="default">$thisLen </span><span class="keyword">&lt; </span><span class="default">$maxlen </span><span class="keyword">&amp;&amp; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$body_count</span><span class="keyword">-</span><span class="default">1 </span><span class="keyword">&amp;&amp; (</span><span class="default">$thisLen</span><span class="keyword">+</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$body</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">])) &lt; </span><span class="default">$maxlen</span><span class="keyword">+</span><span class="default">$maxoverflow</span><span class="keyword">?</span><span class="default">true</span><span class="keyword">:</span><span class="default">false</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } while (</span><span class="default">$cycle</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$output</span><span class="keyword">.</span><span class="default">$elli</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else return </span><span class="default">$str</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60548""></a>
  <div class="note">
   <strong class="user">Bradley from California</strong>
   <a href="#60548" class="date">10-Jan-2006 10:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Add on to (a function originally written by) "Matias from Argentina": str_format_number function.
<br />

<br />
Just added handling of $String shorter then $Format by adding a side to start the fill and a string length to the while loop.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">str_format_number</span><span class="keyword">(</span><span class="default">$String</span><span class="keyword">, </span><span class="default">$Format</span><span class="keyword">, </span><span class="default">$Start </span><span class="keyword">= </span><span class="string">'left'</span><span class="keyword">){
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//If we want to fill from right to left incase string is shorter then format
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$Start </span><span class="keyword">== </span><span class="string">'right'</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$String </span><span class="keyword">= </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$String</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$Format </span><span class="keyword">= </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$Format</span><span class="keyword">); 
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$Format </span><span class="keyword">== </span><span class="string">''</span><span class="keyword">) return </span><span class="default">$String</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$String </span><span class="keyword">== </span><span class="string">''</span><span class="keyword">) return </span><span class="default">$String</span><span class="keyword">;&nbsp; &nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$Result </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$FormatPos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$StringPos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; while ((</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$Format</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">) &gt;= </span><span class="default">$FormatPos </span><span class="keyword">&amp;&amp; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$String</span><span class="keyword">) &gt; </span><span class="default">$StringPos</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//If its a number =&gt; stores it
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$Format</span><span class="keyword">, </span><span class="default">$FormatPos</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">))) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$Result </span><span class="keyword">.= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$String</span><span class="keyword">, </span><span class="default">$StringPos</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$StringPos</span><span class="keyword">++;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//If it is not a number =&gt; stores the caracter
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">} else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$Result </span><span class="keyword">.= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$Format</span><span class="keyword">, </span><span class="default">$FormatPos</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Next caracter at the mask.
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$FormatPos</span><span class="keyword">++;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$Start </span><span class="keyword">== </span><span class="string">'right'</span><span class="keyword">) </span><span class="default">$Result </span><span class="keyword">= </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$Result</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$Result</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60373""></a>
  <div class="note">
   <strong class="user">eallik at hotmail dot com</strong>
   <a href="#60373" class="date">05-Jan-2006 04:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be careful when comparing the return value of substr to FALSE. FALSE may be returned even if the output is a valid string.<br />
<br />
substr("0", 0); // equals "0", comparision with FALSE evaluates to true, because "0" == 0 == FALSE</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="59719""></a>
  <div class="note">
   <strong class="user">mr at bbp dot biz</strong>
   <a href="#59719" class="date">14-Dec-2005 11:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a little addon to the html_substr function posted by fox. <br />
<br />
Now it counts only chars outside of tags, and doesn't cut words.<br />
<br />
Note: this will only work in xhtml strict/transitional due to the checking of "/&gt;" tags and the requirement of quotations in every value of a tag. It's also only been tested with the presence of br, img, and a tags, but it should work with the presence of any tag.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">html_substr</span><span class="keyword">(</span><span class="default">$posttext</span><span class="keyword">, </span><span class="default">$minimum_length </span><span class="keyword">= </span><span class="default">200</span><span class="keyword">, </span><span class="default">$length_offset </span><span class="keyword">= </span><span class="default">20</span><span class="keyword">, </span><span class="default">$cut_words </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">, </span><span class="default">$dots </span><span class="keyword">= </span><span class="default">TRUE</span><span class="keyword">) {<br />
&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// $minimum_length:<br />
&nbsp;&nbsp;&nbsp; // The approximate length you want the concatenated text to be&nbsp;&nbsp; <br />
&nbsp;<br />
<br />
&nbsp;&nbsp;&nbsp; // $length_offset:<br />
&nbsp;&nbsp;&nbsp; // The variation in how long the text can be in this example text <br />
&nbsp;&nbsp;&nbsp; // length will be between 200 and 200-20=180 characters and the <br />
&nbsp;&nbsp;&nbsp; // character where the last tag ends<br />
<br />
&nbsp;&nbsp;&nbsp; // Reset tag counter &amp; quote checker<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$tag_counter </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$quotes_on </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Check if the text is too long<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$posttext</span><span class="keyword">) &gt; </span><span class="default">$minimum_length</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Reset the tag_counter and pass through (part of) the entire text<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$posttext</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Load the current character and the next one<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // if the string has not arrived at the last character<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$current_char </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$posttext</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$posttext</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$next_char </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$posttext</span><span class="keyword">,</span><span class="default">$i </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$next_char </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// First check if quotes are on<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (!</span><span class="default">$quotes_on</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Check if it's a tag<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // On a "&lt;" add 3 if it's an opening tag (like &lt;a href...)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // or add only 1 if it's an ending tag (like &lt;/a&gt;)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$current_char </span><span class="keyword">== </span><span class="string">'&lt;'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$next_char </span><span class="keyword">== </span><span class="string">'/'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tag_counter </span><span class="keyword">+= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tag_counter </span><span class="keyword">+= </span><span class="default">3</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Slash signifies an ending (like &lt;/a&gt; or ... /&gt;)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // substract 2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$current_char </span><span class="keyword">== </span><span class="string">'/' </span><span class="keyword">&amp;&amp; </span><span class="default">$tag_counter </span><span class="keyword">&lt;&gt; </span><span class="default">0</span><span class="keyword">) </span><span class="default">$tag_counter </span><span class="keyword">-= </span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// On a "&gt;" substract 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$current_char </span><span class="keyword">== </span><span class="string">'&gt;'</span><span class="keyword">) </span><span class="default">$tag_counter </span><span class="keyword">-= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If quotes are encountered, start ignoring the tags<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // (for directory slashes)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$current_char </span><span class="keyword">== </span><span class="string">'"'</span><span class="keyword">) </span><span class="default">$quotes_on </span><span class="keyword">= </span><span class="default">TRUE</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// IF quotes are encountered again, turn it back off<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$current_char </span><span class="keyword">== </span><span class="string">'"'</span><span class="keyword">) </span><span class="default">$quotes_on </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Count only the chars outside html tags<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$tag_counter </span><span class="keyword">== </span><span class="default">2 </span><span class="keyword">|| </span><span class="default">$tag_counter </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$c</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Check if the counter has reached the minimum length yet,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // then wait for the tag_counter to become 0, and chop the string there<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$c </span><span class="keyword">&gt; </span><span class="default">$minimum_length </span><span class="keyword">- </span><span class="default">$length_offset </span><span class="keyword">&amp;&amp; </span><span class="default">$tag_counter </span><span class="keyword">== </span><span class="default">0 </span><span class="keyword">&amp;&amp; (</span><span class="default">$next_char </span><span class="keyword">== </span><span class="string">' ' </span><span class="keyword">|| </span><span class="default">$cut_words </span><span class="keyword">== </span><span class="default">TRUE</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$posttext </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$posttext</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$i </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$dots</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$posttext </span><span class="keyword">.= </span><span class="string">'...'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$posttext</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$posttext</span><span class="keyword">;<br />
} <br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55107""></a>
  <div class="note">
   <strong class="user">frank at jkelloggs dot dk</strong>
   <a href="#55107" class="date">25-Jul-2005 11:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Regarding the utf8_substr function from lmak: The pattern '/./u' doesn't match newline characters. This means that the substring from 0 to the total length of the string will miss the number of characters in the end matching the number of newlines in the string. To fix this one can add the s modifier (PCRE_DOTALL) in the pattern:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">utf8_substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">"/./su"</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">, </span><span class="default">$ar</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; if(</span><span class="default">func_num_args</span><span class="keyword">() &gt;= </span><span class="default">3</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">func_get_arg</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; return </span><span class="default">join</span><span class="keyword">(</span><span class="string">""</span><span class="keyword">,</span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$ar</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">],</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$end</span><span class="keyword">));<br />
&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; return </span><span class="default">join</span><span class="keyword">(</span><span class="string">""</span><span class="keyword">,</span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$ar</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">],</span><span class="default">$start</span><span class="keyword">));<br />
&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54281""></a>
  <div class="note">
   <strong class="user">php_net at thomas dot trella dot de</strong>
   <a href="#54281" class="date">29-Jun-2005 05:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed to cut a string after x chars at a&nbsp; html converted utf-8 text (for example Japanese text like &amp;#23344;&amp;#35632;&amp;#24368;&amp;#33072;&amp;#27440;&amp;#32591;). <br />
The problem was, the different length of the signs, so I wrote the following function to handle that.<br />
Perhaps it helps.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">html_cutstr </span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$len</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/\&amp;#[0-9]*;.*/i'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rVal </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$len</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$chars </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$chars </span><span class="keyword">&gt;= </span><span class="default">$len</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; break;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str_tmp </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">-</span><span class="default">$start</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/\&amp;#[0-9]*;.*/i'</span><span class="keyword">, </span><span class="default">$str_tmp</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$chars</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rVal </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) &gt; </span><span class="default">$start</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rVal </span><span class="keyword">.= </span><span class="string">" ..."</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$rVal</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53639""></a>
  <div class="note">
   <strong class="user">ivanhoe011 at gmail dot com</strong>
   <a href="#53639" class="date">08-Jun-2005 05:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need just a single character from the string you don't need to use substr(), just use curly braces notation:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// both lines will output the 3rd character<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$my_string</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$my_string</span><span class="keyword">{</span><span class="default">2</span><span class="keyword">};&nbsp; <br />
</span><span class="default">?&gt;<br />
</span><br />
curly braces syntax is faster and more readable IMHO..</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53605""></a>
  <div class="note">
   <strong class="user">rob NOSPAM at clancentric dot net</strong>
   <a href="#53605" class="date">07-Jun-2005 12:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have developed a function with a similar outcome to jay's
<br />

<br />
Checks if the last character is or isnt a space. (does it the normal way if it is)
<br />
It explodes the string into an array of seperate works, the effect is... it chops off anything after and including the last space.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">limit_string</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$charlimit</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$charlimit</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">) != </span><span class="string">' '</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="string">'0'</span><span class="keyword">,</span><span class="default">$charlimit</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">,</span><span class="default">$string</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new_string </span><span class="keyword">= </span><span class="default">implode</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">,</span><span class="default">$array</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$new_string</span><span class="keyword">.</span><span class="string">'...'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; else
<br />
&nbsp;&nbsp;&nbsp; {&nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="string">'0'</span><span class="keyword">,</span><span class="default">$charlimit</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">).</span><span class="string">'...'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53199""></a>
  <div class="note">
   <strong class="user">bleakwind at msn dot com</strong>
   <a href="#53199" class="date">25-May-2005 07:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This returns the portion of str specified by the start and length parameters..<br />
It can performs multi-byte safe on number of characters. like mb_strcut() ...<br />
<br />
Note:<br />
1.Use it like this bite_str(string str, int start, int length [,byte of on string]);<br />
2.First character's position is 0. Second character position is 1, and so on...<br />
3.$byte is one character length of your encoding, For example: utf-8 is "3", gb2312 and big5 is "2"...you can use the function strlen() get it... <br />
Enjoy it :) ...<br />
<br />
--- Bleakwind<br />
QQ:940641<br />
<a href="http://www.weaverdream.com" rel="nofollow" target="_blank">http://www.weaverdream.com</a><br />
<br />
PS:I'm sorry my english is too poor... :( <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// String intercept By Bleakwind<br />
// utf-8:$byte=3 | gb2312:$byte=2 | big5:$byte=2<br />
</span><span class="keyword">function </span><span class="default">bite_str</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$len</span><span class="keyword">, </span><span class="default">$byte</span><span class="keyword">=</span><span class="default">3</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$count&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str_len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$str_len</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ((</span><span class="default">$count</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">-</span><span class="default">$start</span><span class="keyword">)&gt;</span><span class="default">$len</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str&nbsp; </span><span class="keyword">.= </span><span class="string">"..."</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } elseif ((</span><span class="default">ord</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">)) &lt;= </span><span class="default">128</span><span class="keyword">) &amp;&amp; (</span><span class="default">$count </span><span class="keyword">&lt; </span><span class="default">$start</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } elseif ((</span><span class="default">ord</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">)) &gt; </span><span class="default">128</span><span class="keyword">) &amp;&amp; (</span><span class="default">$count </span><span class="keyword">&lt; </span><span class="default">$start</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">$count</span><span class="keyword">+</span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">+</span><span class="default">$byte</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } elseif ((</span><span class="default">ord</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">)) &lt;= </span><span class="default">128</span><span class="keyword">) &amp;&amp; (</span><span class="default">$count </span><span class="keyword">&gt;= </span><span class="default">$start</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str&nbsp; </span><span class="keyword">.= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } elseif ((</span><span class="default">ord</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">)) &gt; </span><span class="default">128</span><span class="keyword">) &amp;&amp; (</span><span class="default">$count </span><span class="keyword">&gt;= </span><span class="default">$start</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str&nbsp; </span><span class="keyword">.= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">$byte</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">$count</span><span class="keyword">+</span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">+</span><span class="default">$byte</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$str</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// Test<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="string">"123456?????123456?????123456???????"</span><span class="keyword">;<br />
for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">30</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"&lt;br&gt;"</span><span class="keyword">.</span><span class="default">bite_str</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">20</span><span class="keyword">);&nbsp; &nbsp; <br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52893""></a>
  <div class="note">
   <strong class="user">fanfatal at fanfatal dot pl</strong>
   <a href="#52893" class="date">17-May-2005 08:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hmm ... this is a script I wrote, whitch is very similar to substr, but it isn't takes html and bbcode for counting and it takes portion of string and show avoided (html &amp; bbcode) tags too ;] 
<br />
Specially usefull for show part of serach result included html and bbcode tags
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
</span><span class="comment">/**
<br />
&nbsp;* string csubstr ( string string, int start [, int length] )
<br />
&nbsp;*
<br />
&nbsp;* @author FanFataL
<br />
&nbsp;* @param string string
<br />
&nbsp;* @param int start
<br />
&nbsp;* @param [int length]
<br />
&nbsp;* @return string
<br />
&nbsp;*/
<br />
</span><span class="keyword">function </span><span class="default">csubstr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$length</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pattern </span><span class="keyword">= </span><span class="string">'/(\[\w+[^\]]*?\]|\[\/\w+\]|&lt;\w+[^&gt;]*?&gt;|&lt;\/\w+&gt;)/i'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$clean </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">), </span><span class="default">$string</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">$length</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$clean</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$clean</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$length</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$clean</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$length </span><span class="keyword">+ </span><span class="default">substr_count</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">)));
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pattern </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">),</span><span class="string">'(.*?)'</span><span class="keyword">,</span><span class="default">preg_quote</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">));
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/'</span><span class="keyword">.</span><span class="default">$pattern</span><span class="keyword">.</span><span class="string">'/is'</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">, </span><span class="default">$matched</span><span class="keyword">))
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$matched</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$string</span><span class="keyword">;
<br />
}
<br />

<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Using this is similar to simple substr.
<br />

<br />
Greatings ;]
<br />
...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51144""></a>
  <div class="note">
   <strong class="user">woutermb at gmail dot com</strong>
   <a href="#51144" class="date">21-Mar-2005 08:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Well this is a script I wrote, what it does is chop up long words with malicious meaning into several parts. This way, a chat in a table will not get stretched anymore.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">text</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$limit</span><span class="keyword">=</span><span class="default">20</span><span class="keyword">,</span><span class="default">$chop</span><span class="keyword">=</span><span class="default">10</span><span class="keyword">){<br />
<br />
</span><span class="default">$text </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">,</span><span class="default">$string</span><span class="keyword">);<br />
while(list(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) = </span><span class="default">each</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">)){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$length </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$length </span><span class="keyword">&gt;=</span><span class="default">20</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">$length</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">+=</span><span class="default">10</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new </span><span class="keyword">.= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new </span><span class="keyword">.= </span><span class="string">" "</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$post </span><span class="keyword">.= </span><span class="default">$new</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; elseif(</span><span class="default">$length </span><span class="keyword">&lt;=</span><span class="default">15</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$post </span><span class="keyword">.= </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$post </span><span class="keyword">.= </span><span class="string">" "</span><span class="keyword">;<br />
}<br />
return(</span><span class="default">$post</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="comment">// for example, this would return:<br />
</span><span class="default">$output </span><span class="keyword">= </span><span class="default">text</span><span class="keyword">(</span><span class="string">"Well this text doesn't get cut up, yet thisssssssssssssssssssssssss one does."</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">);<br />
<br />
echo(</span><span class="default">$output</span><span class="keyword">); </span><span class="comment">// "Well this text doesn't get cup up, yet thiss sssss sssss sssss sssss sss one does."<br />
</span><span class="default">?&gt;<br />
</span><br />
I hope it was useful.. :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50915""></a>
  <div class="note">
   <strong class="user">steve at unicycle dot co dot nz</strong>
   <a href="#50915" class="date">14-Mar-2005 06:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To quickly trim an optional trailing slash off the end of a path name:<br />
<br />
if (substr( $path, -1 ) == '/') $path = substr( $path, 0, -1 );</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50162""></a>
  <div class="note">
   <strong class="user">andrewmclagan at gmail dot com</strong>
   <a href="#50162" class="date">20-Feb-2005 10:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi there here is a little function i wrote to limit the number of lines in a string, i could not find anything else like it out there&nbsp; &nbsp; 
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">lineLimiter </span><span class="keyword">(</span><span class="default">$string </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">, </span><span class="default">$max_lines </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">ereg_replace</span><span class="keyword">(</span><span class="string">"\n"</span><span class="keyword">, </span><span class="string">"##"</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$totalLines </span><span class="keyword">= (</span><span class="default">substr_count</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="string">'##'</span><span class="keyword">) + </span><span class="default">1</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$stringLength </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; while (</span><span class="default">$totalLines </span><span class="keyword">&gt; </span><span class="default">$max_lines</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strpos </span><span class="keyword">( </span><span class="default">$string</span><span class="keyword">, </span><span class="string">"##"</span><span class="keyword">) + </span><span class="default">2</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//$pos = $pos - $stringLength;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">); 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$totalLines</span><span class="keyword">--;&nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">ereg_replace</span><span class="keyword">(</span><span class="string">"##"</span><span class="keyword">, </span><span class="string">"\n"</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$string</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="33737""></a>
  <div class="note">
   
   <a href="#33737" class="date">06-Jul-2003 02:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to substring the middle of a string with another and keep the words intact:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">/**
<br />
&nbsp;* Reduce a string by the middle, keeps whole words together
<br />
&nbsp;* 
<br />
&nbsp;* @param string $string 
<br />
&nbsp;* @param int $max (default 50)
<br />
&nbsp;* @param string $replacement (default [...])
<br />
&nbsp;* @return string 
<br />
&nbsp;* @author david at ethinkn dot com 
<br />
&nbsp;* @author loic at xhtml dot ne 
<br />
&nbsp;* @author arne dot hartherz at gmx dot net 
<br />
&nbsp;*/
<br />

<br />
</span><span class="keyword">function </span><span class="default">strMiddleReduceWordSensitive </span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$max </span><span class="keyword">= </span><span class="default">50</span><span class="keyword">, </span><span class="default">$rep </span><span class="keyword">= </span><span class="string">'[...]'</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$strlen </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$strlen </span><span class="keyword">&lt;= </span><span class="default">$max</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$string</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$lengthtokeep </span><span class="keyword">= </span><span class="default">$max </span><span class="keyword">- </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$rep</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp;&nbsp; if ((</span><span class="default">$lengthtokeep </span><span class="keyword">% </span><span class="default">2</span><span class="keyword">) == </span><span class="default">0</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">$lengthtokeep </span><span class="keyword">/ </span><span class="default">2</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">$start</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$lengthtokeep </span><span class="keyword">/ </span><span class="default">2</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">$start </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; } 
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">$start</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$tmp_string </span><span class="keyword">= </span><span class="default">$string</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$strlen</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$tmp_string</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] == </span><span class="string">' '</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_string </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$tmp_string</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">) . </span><span class="default">$rep</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= </span><span class="default">$tmp_string</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;
<br />
&nbsp;&nbsp;&nbsp; } 
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">$end</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$tmp_string </span><span class="keyword">= </span><span class="default">strrev </span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$strlen</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$tmp_string</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] == </span><span class="string">' '</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_string </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$tmp_string</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">.= </span><span class="default">strrev </span><span class="keyword">(</span><span class="default">$tmp_string</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;
<br />
&nbsp;&nbsp;&nbsp; } 
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$return</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">) . </span><span class="default">$rep </span><span class="keyword">. </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, - </span><span class="default">$end</span><span class="keyword">);
<br />
} 
<br />

<br />
echo </span><span class="default">strMiddleReduceWordSensitive </span><span class="keyword">(</span><span class="string">'ABCDEEF GHIJK LLKJHKHKJHKL HGHFK sdfasdfsdafsdf sadf asdf sadf sad s'</span><span class="keyword">, </span><span class="default">30</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;
<br />
</span><span class="comment">// Returns: ABCDEEF GHIJK[...]asdf sadf sad s (33 chrs)
<br />
</span><span class="keyword">echo </span><span class="default">strMiddleReduceWordSensitive </span><span class="keyword">(</span><span class="string">'ABCDEEF GHIJK LLKJHKHKJHKL HGHFK sdfasdfsdafsdf sadf asdf sadf sad s'</span><span class="keyword">, </span><span class="default">30</span><span class="keyword">, </span><span class="string">'...'</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;
<br />
</span><span class="comment">// Returns: ABCDEEF GHIJK...asdf sadf sad s (32 chrs)
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

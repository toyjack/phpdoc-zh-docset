<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Returns date formatted according to given format</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="datetime.diff.html">? DateTime::diff</a></li>
      <li style="float: right;"><a href="datetime.getoffset.html">DateTime::getOffset ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.datetimeinterface.html">DateTimeInterface</a></li>
    <li>Returns date formatted according to given format</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="datetime.format" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">DateTime::format</h1>
  <h1 class="refname">DateTimeImmutable::format</h1>
  <h1 class="refname">DateTimeInterface::format</h1>
  <h1 class="refname">date_format</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.2.0, PHP 7)</p><p class="refpurpose"><span class="refname">DateTime::format</span> -- <span class="refname">DateTimeImmutable::format</span> -- <span class="refname">DateTimeInterface::format</span> -- <span class="refname">date_format</span> &mdash; <span class="dc-title">Returns date formatted according to given format</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-datetime.format-description">
  <h3 class="title">说明</h3>
  <p class="para">面向对象风格</p>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">string</span> <span class="methodname"><strong>DateTime::format</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$format</code></span>
   )</div>

  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">string</span> <span class="methodname"><strong>DateTimeImmutable::format</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$format</code></span>
   )</div>

  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">string</span> <span class="methodname"><strong>DateTimeInterface::format</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$format</code></span>
   )</div>

  <p class="para rdfs-comment">过程化风格</p>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><a href="function.date-format.html" class="methodname">date_format</a></span>
    ( <span class="methodparam"><span class="type"><a href="class.datetimeinterface.html" class="type DateTimeInterface">DateTimeInterface</a></span> <code class="parameter">$object</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$format</code></span>
   )</div>

  <p class="para rdfs-comment">
   Returns date formatted according to given format.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-datetime.format-parameters">
  <h3 class="title">参数</h3>
  <dl>

   <dt>
<code class="parameter">object</code></dt>

<dd>
<p class="para">仅为过程化风格：由 <span class="function"><a href="function.date-create.html" class="function">date_create()</a></span> 返回的 <a href="class.datetime.html" class="classname">DateTime</a> 类型的对象。</p></dd>

   
    <dt>
<code class="parameter">format</code></dt>

    <dd>

     <p class="para">
      Format accepted by <span class="function"><a href="function.date.html" class="function">date()</a></span>.
     </p>
    </dd>

   
  </dl>

 </div>


 <div class="refsect1 returnvalues" id="refsect1-datetime.format-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   Returns the formatted date string on success 或者在失败时返回 <strong><code>FALSE</code></strong>.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-datetime.format-examples">
  <h3 class="title">范例</h3>
  <div class="example" id="example-2409">
   <p><strong>Example #1 <span class="function"><strong>DateTime::format()</strong></span> example</strong></p>
   <div class="example-contents"><p>面向对象风格</p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$date&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">(</span><span style="color: #DD0000">'2000-01-01'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$date</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d&nbsp;H:i:s'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>过程化风格</p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$date&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">date_create</span><span style="color: #007700">(</span><span style="color: #DD0000">'2000-01-01'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">date_format</span><span style="color: #007700">(</span><span style="color: #0000BB">$date</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Y-m-d&nbsp;H:i:s'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>以上例程会输出：</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
2000-01-01 00:00:00
</pre></div>
   </div>
  </div>
 </div>


 <div class="refsect1 notes" id="refsect1-datetime.format-notes">
  <h3 class="title">注释</h3>
  <p class="para">
   This method does not use locales. All output is in English.
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-datetime.format-seealso">
  <h3 class="title">参见</h3>
  <ul class="simplelist">
   <li class="member"><span class="function"><a href="function.date.html" class="function" rel="rdfs-seeAlso">date()</a> - 格式化一个本地时间／日期</span></li>
  </ul>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="115734""></a>
  <div class="note">
   <strong class="user">prussell  at  cloudworksconsulting dot com</strong>
   <a href="#115734" class="date">15-Sep-2014 09:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The udate function is a great start, but the formatting of the milliseconds is a little off. If it is within the first 100000 microseconds then the string will be less than 6 characters, so 0.012435 will appear as 0.12345. The revision below fixes this.<br />
<br />
function udate($strFormat = 'u', $uTimeStamp = null)<br />
{<br />
<br />
&nbsp;&nbsp;&nbsp; // If the time wasn't provided then fill it in<br />
&nbsp;&nbsp;&nbsp; if (is_null($uTimeStamp))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $uTimeStamp = microtime(true);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; // Round the time down to the second<br />
&nbsp;&nbsp;&nbsp; $dtTimeStamp = floor($uTimeStamp);<br />
<br />
&nbsp;&nbsp;&nbsp; // Determine the millisecond value<br />
&nbsp;&nbsp;&nbsp; $intMilliseconds = round(($uTimeStamp - $dtTimeStamp) * 1000000);<br />
&nbsp;&nbsp;&nbsp; // Format the milliseconds as a 6 character string<br />
&nbsp;&nbsp;&nbsp; $strMilliseconds = str_pad($intMilliseconds, 6, '0', STR_PAD_LEFT);<br />
<br />
&nbsp;&nbsp;&nbsp; // Replace the milliseconds in the date format string<br />
&nbsp;&nbsp;&nbsp; // Then use the date function to process the rest of the string<br />
&nbsp;&nbsp;&nbsp; return date(preg_replace('`(?&lt;!\\\\)u`', $strMilliseconds, $strFormat), $dtTimeStamp);<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114761""></a>
  <div class="note">
   <strong class="user">soul dot enforcer at gmail dot com</strong>
   <a href="#114761" class="date">02-Apr-2014 09:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For full reference of the supported format character and results,<br />
see the documentation of date() :<br />
<a href="http://www.php.net/manual/en/function.date.php" rel="nofollow" target="_blank">http://www.php.net/manual/en/function.date.php</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114366""></a>
  <div class="note">
   <strong class="user">chris at codewiz dot biz</strong>
   <a href="#114366" class="date">13-Feb-2014 11:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I believe this is a bug but its note-worthy if it is intended (I am using PHP 5.5.3).<br />
<br />
$ php --version<br />
<br />
PHP Warning:&nbsp; Module 'xdebug' already loaded in Unknown on line 0<br />
PHP 5.5.3-1ubuntu2.1 (cli) (built: Dec 12 2013 04:24:35) <br />
Copyright (c) 1997-2013 The PHP Group<br />
Zend Engine v2.5.0, Copyright (c) 1998-2013 Zend Technologies<br />
&nbsp;&nbsp;&nbsp; with Xdebug v2.2.3, Copyright (c) 2002-2013, by Derick Rethans<br />
&nbsp;&nbsp;&nbsp; with Zend OPcache v7.0.3-dev, Copyright (c) 1999-2013, by Zend Technologies<br />
<br />
What is happening:<br />
<br />
DateTime()-&gt;format() will modify the timezone. So do not expect the public date property to be returned (format mask applied) based on the current public timezone property. format will decide that when calling -&gt;format() it will use the server timezone which eliminates all usefulness of -&gt;setTimezone().<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $nowUtc </span><span class="keyword">= new \</span><span class="default">DateTime</span><span class="keyword">( </span><span class="string">'now'</span><span class="keyword">,&nbsp; new \</span><span class="default">DateTimeZone</span><span class="keyword">( </span><span class="string">'UTC' </span><span class="keyword">) );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'$nowUtc'</span><span class="keyword">.</span><span class="default">PHP_EOL</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$nowUtc</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nowUtc </span><span class="keyword">= new \</span><span class="default">DateTime</span><span class="keyword">( </span><span class="string">'now'</span><span class="keyword">,&nbsp; new \</span><span class="default">DateTimeZone</span><span class="keyword">( </span><span class="string">'UTC' </span><span class="keyword">) );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'$nowUtc-&gt;format(\'Y-m-d h:i:s\')'</span><span class="keyword">.</span><span class="default">PHP_EOL</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$nowUtc</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d h:i:s'</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nowUtc</span><span class="keyword">-&gt;</span><span class="default">setTimezone</span><span class="keyword">( new \</span><span class="default">DateTimeZone</span><span class="keyword">( </span><span class="string">'Australia/Sydney' </span><span class="keyword">) );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'$nowUtc-&gt;setTimezone( new \DateTimeZone( \'Australia/Sydney\' ) )'</span><span class="keyword">.</span><span class="default">PHP_EOL</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$nowUtc</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'$nowUtc-&gt;format(\'Y-m-d h:i:s\')'</span><span class="keyword">.</span><span class="default">PHP_EOL</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$nowUtc</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d h:i:s'</span><span class="keyword">));exit;<br />
</span><span class="default">?&gt;<br />
</span><br />
outputs;<br />
<br />
$nowUtc<br />
<br />
object(DateTime)[2607]<br />
&nbsp; public 'date' =&gt; string '2014-02-13 02:42:48' (length=19)<br />
&nbsp; public 'timezone_type' =&gt; int 3<br />
&nbsp; public 'timezone' =&gt; string 'UTC' (length=3)<br />
<br />
$nowUtc-&gt;format('Y-m-d h:i:s')<br />
<br />
string '2014-02-13 02:42:48' (length=19)<br />
<br />
$nowUtc-&gt;setTimezone( new \DateTimeZone( 'Australia/Sydney' ) )<br />
<br />
object(DateTime)[2608]<br />
&nbsp; public 'date' =&gt; string '2014-02-13 13:42:48' (length=19)<br />
&nbsp; public 'timezone_type' =&gt; int 3<br />
&nbsp; public 'timezone' =&gt; string 'Australia/Sydney' (length=16)<br />
<br />
$nowUtc-&gt;format('Y-m-d h:i:s')<br />
<br />
string '2014-02-13 01:42:48' (length=19) // expected 2014-02-13 13:42:48 based on Australia/Sydney - what is 2014-02-13 01:42:48 from anyway!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113607""></a>
  <div class="note">
   <strong class="user">daysnine at gmail dot com</strong>
   <a href="#113607" class="date">04-Nov-2013 08:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Seems like datetime::format does not really support microseconds as the documentation under date suggest it will.<br />
<br />
Here is some code to generate a datetime with microseconds and timezone:<br />
<br />
private function udate($format = 'u', $utimestamp = null) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (is_null($utimestamp))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $utimestamp = microtime(true);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $timestamp = floor($utimestamp);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $milliseconds = round(($utimestamp - $timestamp) * 1000000);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return date(preg_replace('`(?&lt;!\\\\)u`', $milliseconds, $format), $timestamp);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
echo udate('Y-m-d H:i:s.u T');<br />
// Will output something like: 2014-01-01 12:20:24.42342 CET</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112780""></a>
  <div class="note">
   <strong class="user">Nads</strong>
   <a href="#112780" class="date">22-Jul-2013 10:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Date and Time with split seconds<br />
<br />
$micro_date = microtime();<br />
$date_array = explode(" ",$micro_date);<br />
$date = date("Y-m-d H:i:s",$date_array[1]);<br />
echo "Date: $date:" . $date_array[0]."&lt;br&gt;";</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107757""></a>
  <div class="note">
   <strong class="user">craig dot constable at gmail dot com</strong>
   <a href="#107757" class="date">02-Mar-2012 01:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Using a datetime field from a mysql database e.g. "2012-03-24 17:45:12"<br />
<br />
<span class="default">&lt;?php<br />
<br />
$result </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="string">"SELECT `datetime` FROM `table`"</span><span class="keyword">);<br />
</span><span class="default">$row </span><span class="keyword">= </span><span class="default">mysql_fetch_row</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">);<br />
</span><span class="default">$date </span><span class="keyword">= </span><span class="default">date_create</span><span class="keyword">(</span><span class="default">$row</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br />
<br />
echo </span><span class="default">date_format</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">, </span><span class="string">'Y-m-d H:i:s'</span><span class="keyword">);<br />
</span><span class="comment">#output: 2012-03-24 17:45:12<br />
<br />
</span><span class="keyword">echo </span><span class="default">date_format</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">, </span><span class="string">'d/m/Y H:i:s'</span><span class="keyword">);<br />
</span><span class="comment">#output: 24/03/2012 17:45:12<br />
<br />
</span><span class="keyword">echo </span><span class="default">date_format</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">, </span><span class="string">'d/m/y'</span><span class="keyword">);<br />
</span><span class="comment">#output: 24/03/12<br />
<br />
</span><span class="keyword">echo </span><span class="default">date_format</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">, </span><span class="string">'g:i A'</span><span class="keyword">);<br />
</span><span class="comment">#output: 5:45 PM<br />
<br />
</span><span class="keyword">echo </span><span class="default">date_format</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">, </span><span class="string">'G:ia'</span><span class="keyword">);<br />
</span><span class="comment">#output: 05:45pm<br />
<br />
</span><span class="keyword">echo </span><span class="default">date_format</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">, </span><span class="string">'g:ia \o\n l jS F Y'</span><span class="keyword">);<br />
</span><span class="comment">#output: 5:45pm on Saturday 24th March 2012<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104703""></a>
  <div class="note">
   <strong class="user">ca at agercon dot dk</strong>
   <a href="#104703" class="date">01-Jul-2011 05:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The date_format can be use to get the last day of February:<br />
<br />
<span class="default">&lt;?php <br />
<br />
</span><span class="keyword">function </span><span class="default">last_day_of_feb </span><span class="keyword">(</span><span class="default">$year</span><span class="keyword">) {<br />
</span><span class="comment"># The 0th day of a month is the same as the last day of the month before<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ultimo_feb_str </span><span class="keyword">= </span><span class="default">$year </span><span class="keyword">. </span><span class="string">"-03-00"</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ultimo_feb_date </span><span class="keyword">= </span><span class="default">date_create</span><span class="keyword">(</span><span class="default">$ultimo_feb_str</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= </span><span class="default">date_format</span><span class="keyword">(</span><span class="default">$ultimo_feb_date</span><span class="keyword">, </span><span class="string">"Y-m-d"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$return</span><span class="keyword">;<br />
}<br />
<br />
echo </span><span class="default">last_day_of_feb</span><span class="keyword">(</span><span class="default">2011</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment"># 2011-02-28<br />
</span><span class="keyword">echo </span><span class="default">last_day_of_feb</span><span class="keyword">(</span><span class="default">2012</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment"># 2011-02-29<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101721""></a>
  <div class="note">
   <strong class="user">James Meyer</strong>
   <a href="#101721" class="date">06-Jan-2011 08:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A note about version differences - the results of this function differ significantly from php 5.2.x to 5.3.x .&nbsp; <br />
<br />
The 5.2 implementations will often parse to non-sensical values, such as:<br />
<br />
1964/11-12: 1964/-99999/-99999<br />
12/11-1964: -99999/12/11<br />
12-31-1964: -99999/-99999/-99999<br />
11121875: 1112/01/187<br />
01321901: 0132/01/190<br />
<br />
(this one makes sense, but was a poor guess)<br />
31/12/1964: 1964/01/12<br />
<br />
In 5.3+, these all come back as false, as I would expect.&nbsp; 5.2 was just a little optimistic about it's ability to parse dates, I guess.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

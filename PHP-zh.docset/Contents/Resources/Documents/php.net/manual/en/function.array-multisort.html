<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>对多个数组或多维数组进行排序</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.array-merge.html">? array_merge</a></li>
      <li style="float: right;"><a href="function.array-pad.html">array_pad ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.array.html">数组 函数</a></li>
    <li>对多个数组或多维数组进行排序</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.array-multisort" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">array_multisort</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7)</p><p class="refpurpose"><span class="refname">array_multisort</span> &mdash; <span class="dc-title">对多个数组或多维数组进行排序</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.array-multisort-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><strong>array_multisort</strong></span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter reference">&$arr</code></span>
   [, <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$arg</code><span class="initializer"> = SORT_ASC</span></span>
   [, <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$arg</code><span class="initializer"> = SORT_REGULAR</span></span>
   [, <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$...</code></span>
  ]]] )</div>

  <p class="para rdfs-comment">
   <span class="function"><strong>array_multisort()</strong></span>
   可以用来一次对多个数组进行排序，或者根据某一维或多维对多维数组进行排序。
  </p>
  <p class="para">
   关联（<span class="type"><a href="language.types.string.html" class="type string">string</a></span>）键名保持不变，但数字键名会被重新索引。
  </p>
    
<p class="para">
 排序顺序标志：
 <ul class="itemizedlist">
  <li class="listitem">
   <span class="simpara"><strong><code>SORT_ASC</code></strong> - 按照上升顺序排序</span>
  </li>
  <li class="listitem">
   <span class="simpara"><strong><code>SORT_DESC</code></strong> - 按照下降顺序排序</span>
  </li>
 </ul>
</p>
<p class="para">
 排序类型标志：
 <ul class="itemizedlist">
  <li class="listitem">
   <span class="simpara"><strong><code>SORT_REGULAR</code></strong> - 将项目按照通常方法比较</span>
  </li>
  <li class="listitem">
   <span class="simpara"><strong><code>SORT_NUMERIC</code></strong> - 将项目按照数值比较</span>
  </li>
  <li class="listitem">
   <span class="simpara"><strong><code>SORT_STRING</code></strong> - 将项目按照字符串比较</span>
  </li>
 </ul>
</p>
<p class="para">
 每个数组之后不能指定两个同类的排序标志。每个数组后指定的排序标志仅对该数组有效 - 在此之前为默认值
 <strong><code>SORT_ASC</code></strong> 和 <strong><code>SORT_REGULAR</code></strong>。
</p>
  
  <p class="para">
   输入数组被当成一个表的列并以行来排序&mdash;&mdash;这类似于 SQL 的 ORDER BY
   子句的功能。第一个数组是要排序的主要数组。数组中的行（值）比较为相同的话就按照下一个输入数组中相应值的大小来排序，依此类推。
  </p>
  <p class="para">
   本函数的参数结构有些不同寻常，但是非常灵活。第一个参数必须是一个数组。接下来的每个参数可以是数组或者是下面列出的排序标志。
  </p>
  
 </div>

 
 <div class="refsect1 parameters" id="refsect1-function.array-multisort-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">arr</code></dt>

     <dd>

      <p class="para">
       要排序的一个 <span class="type"><a href="language.types.array.html" class="type array">array</a></span>。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">arg</code></dt>

     <dd>

      <p class="para">
       接下来的每个参数可以是另一个 <span class="type"><a href="language.types.array.html" class="type array">array</a></span> 或者是为之前 <span class="type"><a href="language.types.array.html" class="type array">array</a></span> 排序标志选项参数：
       <strong><code>SORT_ASC</code></strong>, 
       <strong><code>SORT_DESC</code></strong>, 
       <strong><code>SORT_REGULAR</code></strong>,
       <strong><code>SORT_NUMERIC</code></strong>,
       <strong><code>SORT_STRING</code></strong>.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">...</code></dt>

     <dd>

      <p class="para">
       Additional <code class="parameter">arg</code>&#039;s. 
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

  
  
 <div class="refsect1 returnvalues" id="refsect1-function.array-multisort-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   成功时返回 <strong><code>TRUE</code></strong>， 或者在失败时返回 <strong><code>FALSE</code></strong>。
  </p>
 </div>

  
 
 <div class="refsect1 examples" id="refsect1-function.array-multisort-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-5376">
    <p><strong>Example #1 Sorting multiple arrays</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$ar1&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">10</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">100</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">100</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$ar2&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">array_multisort</span><span style="color: #007700">(</span><span style="color: #0000BB">$ar1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ar2</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$ar1</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$ar2</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     In this example, after sorting, the first array will contain 0,
     10, 100, 100. The second array will contain 4, 1, 2, 3. The
     entries in the second array corresponding to the identical
     entries in the first array (100 and 100) were sorted as well.
    </p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
array(4) {
  [0]=&gt; int(0)
  [1]=&gt; int(10)
  [2]=&gt; int(100)
  [3]=&gt; int(100)
}
array(4) {
  [0]=&gt; int(4)
  [1]=&gt; int(1)
  [2]=&gt; int(2)
  [3]=&gt; int(3)
}
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   <div class="example" id="example-5377">
    <p><strong>Example #2 排序多维数组</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$ar&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">"10"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">11</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">100</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">100</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"a"</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"2"</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br /></span><span style="color: #0000BB">array_multisort</span><span style="color: #007700">(</span><span style="color: #0000BB">$ar</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">SORT_ASC</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">SORT_STRING</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$ar</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">SORT_NUMERIC</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">SORT_DESC</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$ar</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     本例中在排序后，第一个数组将变成
     &quot;10&quot;，100，100，11，&quot;a&quot;（被当作字符串以升序排列）。第二个数组将包含
     1, 3, &quot;2&quot;, 2, 1（被当作数字以降序排列）。
    </p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
array(2) {
  [0]=&gt; array(5) {
    [0]=&gt; string(2) &quot;10&quot;
    [1]=&gt; int(100)
    [2]=&gt; int(100)
    [3]=&gt; int(11)
    [4]=&gt; string(1) &quot;a&quot;
  }
  [1]=&gt; array(5) {
    [0]=&gt; int(1)
    [1]=&gt; int(3)
    [2]=&gt; string(1) &quot;2&quot;
    [3]=&gt; int(2)
    [4]=&gt; int(1)
  }
}
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   <div class="example" id="example-5378">
    <p><strong>Example #3 对数据库结果进行排序</strong></p>
    <div class="example-contents"><p>
     本例中 <var class="varname"><var class="varname">data</var></var>
     数组中的每个单元表示一个表中的一行。这是典型的数据库记录的数据集合。
    </p></div>
    <div class="example-contents"><p>
     例子中的数据如下：
    </p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
volume | edition
-------+--------
    67 |       2
    86 |       1
    85 |       6
    98 |       2
    86 |       6
    67 |       7
</pre></div>
    </div>
    <div class="example-contents"><p>
     数据全都存放在名为 <var class="varname"><var class="varname">data</var></var>
     的数组中。这通常是通过循环从数据库取得的结果，例如
     <span class="function"><a href="function.mysql-fetch-assoc.html" class="function">mysql_fetch_assoc()</a></span>。
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$data</span><span style="color: #007700">[]&nbsp;=&nbsp;array(</span><span style="color: #DD0000">'volume'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">67</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'edition'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$data</span><span style="color: #007700">[]&nbsp;=&nbsp;array(</span><span style="color: #DD0000">'volume'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">86</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'edition'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$data</span><span style="color: #007700">[]&nbsp;=&nbsp;array(</span><span style="color: #DD0000">'volume'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">85</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'edition'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">6</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$data</span><span style="color: #007700">[]&nbsp;=&nbsp;array(</span><span style="color: #DD0000">'volume'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">98</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'edition'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$data</span><span style="color: #007700">[]&nbsp;=&nbsp;array(</span><span style="color: #DD0000">'volume'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">86</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'edition'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">6</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$data</span><span style="color: #007700">[]&nbsp;=&nbsp;array(</span><span style="color: #DD0000">'volume'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">67</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'edition'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">7</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     本例中将把 <var class="varname"><var class="varname">volume</var></var> 降序排列，把
     <var class="varname"><var class="varname">edition</var></var> 升序排列。
    </p></div>
    <div class="example-contents"><p>
     现在有了包含有行的数组，但是 <span class="function"><strong>array_multisort()</strong></span>
     需要一个包含列的数组，因此用以下代码来取得列，然后排序。
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;取得列的列表<br /></span><span style="color: #007700">foreach&nbsp;(</span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$key&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$volume</span><span style="color: #007700">[</span><span style="color: #0000BB">$key</span><span style="color: #007700">]&nbsp;&nbsp;=&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'volume'</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$edition</span><span style="color: #007700">[</span><span style="color: #0000BB">$key</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'edition'</span><span style="color: #007700">];<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;将数据根据&nbsp;volume&nbsp;降序排列，根据&nbsp;edition&nbsp;升序排列<br />//&nbsp;把&nbsp;$data&nbsp;作为最后一个参数，以通用键排序<br /></span><span style="color: #0000BB">array_multisort</span><span style="color: #007700">(</span><span style="color: #0000BB">$volume</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">SORT_DESC</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$edition</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">SORT_ASC</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     数据集合现在排好序了，结果如下：
    </p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
volume | edition
-------+--------
    98 |       2
    86 |       1
    86 |       6
    85 |       6
    67 |       2
    67 |       7
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   <div class="example" id="example-5379">
    <p><strong>Example #4 不区分大小写字母排序</strong></p>
    <div class="example-contents"><p>
     <strong><code>SORT_STRING</code></strong> 和
     <strong><code>SORT_REGULAR</code></strong>
     都是区分大小写字母的，大写字母会排在小写字母之前。
    </p></div>
    <div class="example-contents"><p>
     要进行不区分大小写的排序，就要按照原数组的小写字母拷贝来排序。
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$array&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'Alpha'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'atomic'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Beta'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'bank'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$array_lowercase&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_map</span><span style="color: #007700">(</span><span style="color: #DD0000">'strtolower'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$array</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">array_multisort</span><span style="color: #007700">(</span><span style="color: #0000BB">$array_lowercase</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">SORT_ASC</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">SORT_STRING</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$array</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$array</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [0] =&gt; Alpha
    [1] =&gt; atomic
    [2] =&gt; bank
    [3] =&gt; Beta
)
</pre></div>
    </div>
   </div>
  </p>
  
      
  <p class="para">
   【译者注】本函数相当有用，为有助于理解，请再看下面这个例子：
  </p>
  <p class="para">
   <div class="example" id="example-5380">
    <p><strong>Example #5 名次排列</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$grade&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"score"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #0000BB">70</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">95</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">70.0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">60</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"70"</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"name"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"Zhang&nbsp;San"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"Li&nbsp;Si"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"Wang&nbsp;Wu"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"Zhao&nbsp;Liu"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"Liu&nbsp;Qi"</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">array_multisort</span><span style="color: #007700">(</span><span style="color: #0000BB">$grade</span><span style="color: #007700">[</span><span style="color: #DD0000">"score"</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">SORT_NUMERIC</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">SORT_DESC</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;将分数作为数值，由高到低排序<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$grade</span><span style="color: #007700">[</span><span style="color: #DD0000">"name"</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">SORT_STRING</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">SORT_ASC</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;将名字作为字符串，由小到大排序<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$grade</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
array(2) {
  [&quot;score&quot;]=&gt;
  array(5) {
    [0]=&gt;
    int(95)
    [1]=&gt;
    string(2) &quot;70&quot;
    [2]=&gt;
    float(70)
    [3]=&gt;
    int(70)
    [4]=&gt;
    int(60)
  }
  [&quot;name&quot;]=&gt;
  array(5) {
    [0]=&gt;
    string(5) &quot;Li Si&quot;
    [1]=&gt;
    string(6) &quot;Liu Qi&quot;
    [2]=&gt;
    string(7) &quot;Wang Wu&quot;
    [3]=&gt;
    string(9) &quot;Zhang San&quot;
    [4]=&gt;
    string(8) &quot;Zhao Liu&quot;
  }
}
</pre></div>
    </div>
    <div class="example-contents"><p>
     本例中对包含成绩的数组 <var class="varname"><var class="varname">$grade</var></var>
     按照分数（score）由高到低进行排序，分数相同的人则按照名字（name）由小到大排序。排序后李四
     95 分为第一名，赵六 60 分为第五名没有异议。张三、王五和刘七都是
     70 分，他们的名次则由其姓名的字母顺序排列，Liu 在前，Wang 在后而
     Zhang 在最后。为了区别，三个 70
     分分别用了整数，浮点数和字符串来表示，可以在程序输出中清楚地看到它们排序的结果。
    </p></div>
   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.array-multisort-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.usort.html" class="function" rel="rdfs-seeAlso">usort()</a> - 使用用户自定义的比较函数对数组中的值进行排序</span></li>
    <li class="member"><a href="array.sorting.html" class="link">数组排序函数对比</a></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="119343""></a>
  <div class="note">
   <strong class="user">faugeron dot loic at gmail dot com</strong>
   <a href="#119343" class="date">17-May-2016 04:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Improving Example #3 (Sorting database results): using <span class="default">&lt;?php array_column ?&gt;</span> (PHP &gt;= 5.5) and <span class="default">&lt;?php call_user_func_array ?&gt;</span> it becomes possible to build your sortings (sorting by one or many fields):<br />
<br />
<span class="default">&lt;?php<br />
<br />
$data </span><span class="keyword">= [<br />
&nbsp;&nbsp;&nbsp; [<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="string">'168ac7f8-c918-4e99-90ee-5d7590fe61ce'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'Arthur Dent'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; ],<br />
&nbsp;&nbsp;&nbsp; [<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="string">'e3ad45ee-7cae-4cca-bd7b-2eb6b57b6457'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'Ford Prefect'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; ],<br />
&nbsp;&nbsp;&nbsp; [<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="string">'a426aef2-19e2-412a-8339-5458cf6ae416'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'Trillian Astra'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; ],<br />
];<br />
</span><span class="default">$sortings </span><span class="keyword">= [<br />
&nbsp;&nbsp;&nbsp; [<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'field' </span><span class="keyword">=&gt; </span><span class="string">'id'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'direction' </span><span class="keyword">=&gt; </span><span class="default">SORT_DESC</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; ],<br />
];<br />
<br />
</span><span class="default">$args </span><span class="keyword">= [];<br />
</span><span class="default">$key </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
foreach (</span><span class="default">$sortings </span><span class="keyword">as </span><span class="default">$sorting</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$args</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">array_column</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$sorting</span><span class="keyword">[</span><span class="string">'field'</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$args</span><span class="keyword">[</span><span class="default">$key </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">] = </span><span class="default">$sorting</span><span class="keyword">[</span><span class="string">'direction'</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$key </span><span class="keyword">+= </span><span class="default">2</span><span class="keyword">;<br />
}<br />
</span><span class="default">$args</span><span class="keyword">[] = </span><span class="default">$data</span><span class="keyword">;<br />
</span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">'array_multisort'</span><span class="keyword">, </span><span class="default">$args</span><span class="keyword">);<br />
<br />
</span><span class="comment">// $data is now sorted by ID in descending order.<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119291""></a>
  <div class="note">
   <strong class="user">matt at bosc dot io</strong>
   <a href="#119291" class="date">06-May-2016 06:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
One-liner function to sort multidimensionnal array by key, thank's to array_column<br />
<br />
<span class="default">&lt;?php<br />
<br />
array_multisort </span><span class="keyword">(</span><span class="default">array_column</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="string">'key'</span><span class="keyword">), </span><span class="default">SORT_DESC</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118198""></a>
  <div class="note">
   <strong class="user">intsystem88 at gmail dot com</strong>
   <a href="#118198" class="date">25-Oct-2015 10:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
See (rus): https://intsystem.org/coding/sortirovka-mnogomernyh-massivov-po-klyuchu-na-php/<br />
<br />
Simple example:<br />
<br />
<span class="default">&lt;?php<br />
$data</span><span class="keyword">=array(<br />
&nbsp;&nbsp;&nbsp; array(</span><span class="string">'text'</span><span class="keyword">=&gt;</span><span class="string">'str1'</span><span class="keyword">, </span><span class="string">'year'</span><span class="keyword">=&gt;</span><span class="string">'2010'</span><span class="keyword">, </span><span class="string">'author'</span><span class="keyword">=&gt;</span><span class="default">10</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; array(</span><span class="string">'text'</span><span class="keyword">=&gt;</span><span class="string">'str2'</span><span class="keyword">, </span><span class="string">'year'</span><span class="keyword">=&gt;</span><span class="string">'2011'</span><span class="keyword">, </span><span class="string">'author'</span><span class="keyword">=&gt;</span><span class="default">10</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; array(</span><span class="string">'text'</span><span class="keyword">=&gt;</span><span class="string">'str3'</span><span class="keyword">, </span><span class="string">'year'</span><span class="keyword">=&gt;</span><span class="string">'2009'</span><span class="keyword">, </span><span class="string">'author'</span><span class="keyword">=&gt;</span><span class="default">20</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; array(</span><span class="string">'text'</span><span class="keyword">=&gt;</span><span class="string">'str4'</span><span class="keyword">, </span><span class="string">'year'</span><span class="keyword">=&gt;</span><span class="string">'2010'</span><span class="keyword">, </span><span class="string">'author'</span><span class="keyword">=&gt;</span><span class="default">30</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; array(</span><span class="string">'text'</span><span class="keyword">=&gt;</span><span class="string">'str5'</span><span class="keyword">, </span><span class="string">'year'</span><span class="keyword">=&gt;</span><span class="string">'2010'</span><span class="keyword">, </span><span class="string">'author'</span><span class="keyword">=&gt;</span><span class="default">20</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; array(</span><span class="string">'text'</span><span class="keyword">=&gt;</span><span class="string">'str6'</span><span class="keyword">, </span><span class="string">'year'</span><span class="keyword">=&gt;</span><span class="string">'2011'</span><span class="keyword">, </span><span class="string">'author'</span><span class="keyword">=&gt;</span><span class="default">10</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; array(</span><span class="string">'text'</span><span class="keyword">=&gt;</span><span class="string">'str7'</span><span class="keyword">, </span><span class="string">'year'</span><span class="keyword">=&gt;</span><span class="string">'2011'</span><span class="keyword">, </span><span class="string">'author'</span><span class="keyword">=&gt;</span><span class="default">20</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; array(</span><span class="string">'text'</span><span class="keyword">=&gt;</span><span class="string">'str8'</span><span class="keyword">, </span><span class="string">'year'</span><span class="keyword">=&gt;</span><span class="string">'2009'</span><span class="keyword">, </span><span class="string">'author'</span><span class="keyword">=&gt;</span><span class="default">20</span><span class="keyword">),<br />
);<br />
<br />
</span><span class="default">$data_year</span><span class="keyword">=array();<br />
<br />
foreach(</span><span class="default">$data </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$arr</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$data_year</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]=</span><span class="default">$arr</span><span class="keyword">[</span><span class="string">'year'</span><span class="keyword">];<br />
}<br />
&nbsp;<br />
for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">100000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$data_tmp</span><span class="keyword">=</span><span class="default">$data</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_multisort</span><span class="keyword">(</span><span class="default">$data_year</span><span class="keyword">, </span><span class="default">SORT_NUMERIC</span><span class="keyword">, </span><span class="default">$data_tmp</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118194""></a>
  <div class="note">
   <strong class="user">nospam at nospam dot com</strong>
   <a href="#118194" class="date">24-Oct-2015 07:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Super easy and simple way to sort a keyed multiarray while maintaining all associative keys, including numeric!<br />
<br />
Preserves the original multiarray order if the sorting values are equal.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// sorts multiarray by a subarray value while preserving all keys, also preserves original order when the sorting values match<br />
</span><span class="keyword">function </span><span class="default">maSort</span><span class="keyword">(</span><span class="default">$ma </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">, </span><span class="default">$sortkey </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">, </span><span class="default">$sortorder </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">) { </span><span class="comment">// sortorder: 1=asc, 2=desc<br />
&nbsp; </span><span class="keyword">if (</span><span class="default">$ma </span><span class="keyword">&amp;&amp; </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$ma</span><span class="keyword">) &amp;&amp; </span><span class="default">$sortkey</span><span class="keyword">) { </span><span class="comment">// confirm inputs<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$ma </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$a</span><span class="keyword">) </span><span class="default">$temp</span><span class="keyword">[</span><span class="string">"</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$sortkey</span><span class="keyword">]</span><span class="string">"</span><span class="keyword">][</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">$a</span><span class="keyword">; </span><span class="comment">// temp ma with sort value, quotes convert key to string in case numeric float<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$sortorder </span><span class="keyword">== </span><span class="default">2</span><span class="keyword">) { </span><span class="comment">// descending<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">krsort</span><span class="keyword">(</span><span class="default">$temp</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; } else { </span><span class="comment">// ascending<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">ksort</span><span class="keyword">(</span><span class="default">$temp</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$newma </span><span class="keyword">= array(); </span><span class="comment">// blank output multiarray to add to<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$temp </span><span class="keyword">as </span><span class="default">$sma</span><span class="keyword">) </span><span class="default">$newma </span><span class="keyword">+= </span><span class="default">$sma</span><span class="keyword">; </span><span class="comment">// add sorted arrays to output array<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">unset(</span><span class="default">$ma</span><span class="keyword">, </span><span class="default">$sma</span><span class="keyword">, </span><span class="default">$temp</span><span class="keyword">); </span><span class="comment">// release memory<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$newma</span><span class="keyword">;<br />
&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117725""></a>
  <div class="note">
   <strong class="user">matt at wennersten dot org</strong>
   <a href="#117725" class="date">29-Jul-2015 06:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Many users have contributed nifty wrapper functions for generalizing array_multisort. However, some of us may just want a simple example that illustrates how to sort an arbitrary multi-dimensional array, such as a database result set, on a named field. <br />
<br />
Consider an array of voice recordings (Clip objects) that are stored on a file system, and referenced via a database table:<br />
<br />
&nbsp;&nbsp;&nbsp; $fetchClipQuery = "SELECT * from voiceclips";<br />
&nbsp;&nbsp;&nbsp; if ( !$result = $this-&gt;db-&gt;query($fetchClipQuery) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $errormessage = $this-&gt;db-&gt;errno;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $errormessage .= $this-&gt;db-&gt;error;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while($row = $result-&gt;fetch_assoc()){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $clip = new Clip(); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $clip-&gt;populate($row['clipURL']);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $clips[] = array("speaker"=&gt;$row['speaker'],"duration"=&gt;$row['duration'],"clip"=&gt;$clip);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
//we now have an array called clips[] that looks like this:<br />
<br />
array("speaker"=&gt;"Obama","duration"=&gt;"22:00","clip"=&gt;...&lt;some arbitrary object&gt;...);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //suppose we want to sort the array by speaker<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $sortkeyname = "speaker";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //do the sort<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $sortkeyarray = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach ($clips as $key =&gt; $row){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $sortkeyarray[$key] = $row[$sortkeyname];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array_multisort($sortkeyarray, SORT_DESC, $clips);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //suppose we want to sort the array by duration<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $sortkeyname = "duration";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //do the sort<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $sortkeyarray = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach ($clips as $key =&gt; $row){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $sortkeyarray[$key] = $row[$sortkeyname];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array_multisort($sortkeyarray, SORT_DESC, $clips);<br />
<br />
...etc.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114464""></a>
  <div class="note">
   <strong class="user">jcharpentier at darkmira dot fr</strong>
   <a href="#114464" class="date">24-Feb-2014 02:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is a lack of precision for the second example :<br />
<br />
Example #2 Sorting multi-dimensional array<br />
<br />
The explanation is :<br />
"In this example, [...] The second will contain 1, 3, "2", 2, 1 (sorted as numbers, in descending order). "<br />
This could be misunderstood cause a sort as numbers in descending order will be 1, 1, "2", 2, 3.&nbsp; <br />
<br />
My proposal is as follows (in a best english should be great ^^) :<br />
"In this example, [...] The second will contain 1, 3, "2", 2, 1 (sorted as well as first one, except for values 3 and "2" sorted as numbers, in descending order).&nbsp; Because they are corresponding to the identical entries in the first array (100 and 100) which couldn't be sorted at first time."</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114076""></a>
  <div class="note">
   <strong class="user">Robert C</strong>
   <a href="#114076" class="date">09-Jan-2014 09:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi,<br />
<br />
I would like to see the next code snippet to be added to <a href="http://nl3.php.net/array_multisort" rel="nofollow" target="_blank">http://nl3.php.net/array_multisort</a><br />
<br />
Purpose: Sort a 2-dimensional array on some key(s)<br />
<br />
Advantage of function: <br />
- uses PHP's array_multisort function for sorting;<br />
- it prepares the arrays (needed by array_multisort) for you;<br />
- allows the sort criteria be passed as a separate array (It is possible to use sort order and flags.); <br />
- easy to set/overwrite the way strings are sorted (case insensitive instead of case sensitive, which is PHP's default way of sorting);<br />
- performs excellent <br />
<br />
function MultiSort($data, $sortCriteria, $caseInSensitive = true)<br />
{<br />
&nbsp; if( !is_array($data) || !is_array($sortCriteria))<br />
&nbsp;&nbsp;&nbsp; return false;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp; $args = array(); <br />
&nbsp; $i = 0;<br />
&nbsp; foreach($sortCriteria as $sortColumn =&gt; $sortAttributes)&nbsp; <br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; $colList = array(); <br />
&nbsp;&nbsp;&nbsp; foreach ($data as $key =&gt; $row)<br />
&nbsp;&nbsp;&nbsp; { <br />
&nbsp;&nbsp; &nbsp;&nbsp; $convertToLower = $caseInSensitive &amp;&amp; (in_array(SORT_STRING, $sortAttributes) || in_array(SORT_REGULAR, $sortAttributes)); <br />
&nbsp;&nbsp; &nbsp;&nbsp; $rowData = $convertToLower ? strtolower($row[$sortColumn]) : $row[$sortColumn]; <br />
&nbsp;&nbsp; &nbsp;&nbsp; $colLists[$sortColumn][$key] = $rowData;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; $args[] = &amp;$colLists[$sortColumn];<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; foreach($sortAttributes as $sortAttribute)<br />
&nbsp;&nbsp;&nbsp; {&nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; $tmp[$i] = $sortAttribute;<br />
&nbsp;&nbsp; &nbsp;&nbsp; $args[] = &amp;$tmp[$i];<br />
&nbsp;&nbsp; &nbsp;&nbsp; $i++;&nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; }<br />
&nbsp; }<br />
&nbsp; $args[] = &amp;$data;<br />
&nbsp; call_user_func_array('array_multisort', $args);<br />
&nbsp; return end($args);<br />
} <br />
<br />
Usage:<br />
<br />
//Fill an array with random test data<br />
define('MAX_ITEMS', 15);<br />
define('MAX_VAL', 20);<br />
for($i=0; $i &lt; MAX_ITEMS; $i++)<br />
&nbsp; $data[] = array('field1' =&gt; rand(1, MAX_VAL), 'field2' =&gt; rand(1, MAX_VAL), 'field3' =&gt; rand(1, MAX_VAL) );<br />
&nbsp; <br />
//Set the sort criteria (add as many fields as you want)<br />
$sortCriteria = <br />
&nbsp; array('field1' =&gt; array(SORT_DESC, SORT_NUMERIC), <br />
&nbsp;&nbsp; &nbsp; &nbsp; 'field3' =&gt; array(SORT_DESC, SORT_NUMERIC)<br />
&nbsp; );<br />
<br />
//Call it like this:&nbsp; <br />
$sortedData = MultiSort($data, $sortCriteria, true);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113484""></a>
  <div class="note">
   <strong class="user">Patrick Adrichem</strong>
   <a href="#113484" class="date">17-Oct-2013 05:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you do not have PHP 5.4 installed yet and you cannot use SORT_NATURAL. This function sorts arrays natural multi-dimensional based on key value<br />
<br />
this function can be used for arrays as<br />
<br />
array ( name =&gt; array( key =&gt; value ) )<br />
and<br />
<br />
array( name =&gt; value ).<br />
<br />
arrays as array( name =&gt; array( key =&gt; value), name =&gt; value) are not supported.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">static function </span><span class="default">natcasesortRecursive</span><span class="keyword">(&amp;</span><span class="default">$aArray</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$bHasArrays </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$aArray </span><span class="keyword">as </span><span class="default">$sKey </span><span class="keyword">=&gt; &amp;</span><span class="default">$mValue</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">true </span><span class="keyword">=== </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$mValue</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">natcasesortRecursive</span><span class="keyword">(</span><span class="default">$mValue</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$bHasArrays </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">true </span><span class="keyword">=== </span><span class="default">$bHasArrays</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">uksort</span><span class="keyword">(</span><span class="default">$aArray</span><span class="keyword">, </span><span class="string">'strnatcasecmp'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">natcasesort</span><span class="keyword">(</span><span class="default">$aArray</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113445""></a>
  <div class="note">
   <strong class="user">Magento-User</strong>
   <a href="#113445" class="date">12-Oct-2013 12:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When sorting an array of (complex) objects, this function can give you a "Fatal error:&nbsp; Nesting level too deep" since it directly compares elements in later arrays if the elements in earlier ones compare equal. This can be worked around with the Flag-Parameter:<br />
<span class="default">&lt;?php <br />
$sortKeys </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(</span><span class="default">$extractKey</span><span class="keyword">, </span><span class="default">$lotsOfComplexObjects</span><span class="keyword">);<br />
</span><span class="default">array_multisort</span><span class="keyword">(</span><span class="default">$sortKeys</span><span class="keyword">, </span><span class="default">$lotsOfComplexObjects</span><span class="keyword">, </span><span class="default">SORT_ASC</span><span class="keyword">, </span><span class="default">SORT_NUMERIC</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>I'm replacing an 'uasort()'-call which is significantly slower since it leads to a lot of calls to the comparison-function but most of the objects involved are recursive.<br />
<br />
If this 'trick' gives a wrong order,&nbsp; you need a better key.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112021""></a>
  <div class="note">
   <strong class="user">srijishks at gmail dot com</strong>
   <a href="#112021" class="date">23-Apr-2013 03:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The size should be same for all sub arrays</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109943""></a>
  <div class="note">
   <strong class="user">plugboard at web dot de</strong>
   <a href="#109943" class="date">04-Sep-2012 11:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
multisort an Array of Objects: <br />
<br />
example object [$object with array of objects]: (class: test) <br />
---------------------------------- <br />
<br />
test Object (<br />
&nbsp; [Artikel] =&gt; Array (<br />
&nbsp;&nbsp; &nbsp;&nbsp; [0] =&gt; test Object (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [id] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [title] =&gt; CCCC<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; )<br />
&nbsp;&nbsp; &nbsp;&nbsp; [1] =&gt; test Object (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [id] =&gt; 2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [title] =&gt; AAAA<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; )<br />
&nbsp;&nbsp; &nbsp;&nbsp; [2] =&gt; test Object (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [id] =&gt; 3<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [title] =&gt; DDDD<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; )<br />
&nbsp;&nbsp; &nbsp;&nbsp; [3] =&gt; test Object (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [id] =&gt; 4<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [title] =&gt; BBBB<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; )<br />
&nbsp;&nbsp; )<br />
)<br />
<br />
---------------------------------- <br />
<br />
Simple PHP function: sort_arr_of_obj()<br />
<br />
<span class="default">&lt;?php <br />
</span><span class="comment">// -------------------------------------- <br />
<br />
/* <br />
* -------- function arguments -------- <br />
*&nbsp;&nbsp; $array ........ array of objects<br />
*&nbsp;&nbsp; $sortby ....... the object-key to sort by<br />
*&nbsp;&nbsp; $direction ... 'asc' = ascending<br />
* --------<br />
*/<br />
<br />
</span><span class="keyword">function </span><span class="default">sort_arr_of_obj</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$sortby</span><span class="keyword">, </span><span class="default">$direction</span><span class="keyword">=</span><span class="string">'asc'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$sortedArr </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$tmp_Array </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_Array</span><span class="keyword">[] = </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">-&gt;</span><span class="default">$sortby</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$direction</span><span class="keyword">==</span><span class="string">'asc'</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">asort</span><span class="keyword">(</span><span class="default">$tmp_Array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">arsort</span><span class="keyword">(</span><span class="default">$tmp_Array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$tmp_Array </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$tmp</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sortedArr</span><span class="keyword">[] = </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$sortedArr</span><span class="keyword">;<br />
&nbsp;<br />
}<br />
&nbsp; <br />
&nbsp;<br />
</span><span class="comment">// -------------------------------------- <br />
</span><span class="default">?&gt;<br />
</span><br />
example call: <br />
---------------------------------- <br />
<br />
<span class="default">&lt;?php <br />
<br />
$sorted</span><span class="keyword">-&gt;</span><span class="default">Artikel </span><span class="keyword">= </span><span class="default">sort_arr_of_obj</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">Artikel</span><span class="keyword">,</span><span class="string">'title'</span><span class="keyword">,</span><span class="string">'asc'</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
example result: $sorted (class: test) <br />
---------------------------------- <br />
<br />
test Object (<br />
&nbsp; [Artikel] =&gt; Array (<br />
&nbsp;&nbsp; &nbsp;&nbsp; [0] =&gt; test Object (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [id] =&gt; 2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [title] =&gt; AAAA<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; )<br />
&nbsp;&nbsp; &nbsp;&nbsp; [1] =&gt; test Object (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [id] =&gt; 4<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [title] =&gt; BBBB<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; )<br />
&nbsp;&nbsp; &nbsp;&nbsp; [2] =&gt; test Object (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [id] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [title] =&gt; CCCC<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; )<br />
&nbsp;&nbsp; &nbsp;&nbsp; [3] =&gt; test Object (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [id] =&gt; 3<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [title] =&gt; DDDD<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; )<br />
<br />
&nbsp;&nbsp; )<br />
)<br />
<br />
-------------------------<br />
<br />
:)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107477""></a>
  <div class="note">
   <strong class="user">rnacken at gmail dot com</strong>
   <a href="#107477" class="date">12-Feb-2012 08:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When I was working on a search engine, that had to order the results in PHP by multiple arguments, I got stuck on the issue of multisort erasing your (numeral) indexes for a while. Sometimes, it is important to keep these indexes intact. In my case, the indexes were IDs and the values were a percentage of how relevant the object was, considering an earlier query.<br />
e.g: $searchResult = (23 =&gt; 0.3, <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 102 =&gt; 0.5,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 11 =&gt; 0.5,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 340 =&gt; 0.5,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 10 =&gt; 0.9);<br />
<br />
I wanted to use array_multisort to first sort DESC on the IDs, and then on the values DESC. i.e. I wanted to show the highest values first, but in case of two (or more) objects with the same value, the higher ID would be shown first.<br />
e.g: $searchResult = (10 =&gt; 0.9,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 340 =&gt; 0.5,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 102 =&gt; 0.5,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 11 =&gt; 0.5,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 23 =&gt; 0.3);<br />
<br />
The easiest way to do this, I think, is:<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// create a 2-deep array with the values and keys of $searchResult<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$searchResult</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$searchResult</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; );<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// use multisort, first on the values, then on the keys. This will erase the indexes in the $searchResult array<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_multisort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="default">SORT_DESC</span><span class="keyword">,&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">SORT_DESC</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// get the ordered keys back in the $searchResult array<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$searchResult </span><span class="keyword">= </span><span class="default">array_combine</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$array</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; unset(</span><span class="default">$array</span><span class="keyword">); </span><span class="comment">//clear some memory<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105798""></a>
  <div class="note">
   <strong class="user">nick ([AT]) nickyost ([DOT]) com</strong>
   <a href="#105798" class="date">16-Sep-2011 12:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
USort function can be used to sort multidimensional arrays with almost no work whatsoever by using the individual values within the custom sort function.<br />
<br />
This function passes the entire child element even if it is not a string. If it is an array, as would be the case in multidimensional arrays, it will pass the whole child array as one parameter.<br />
<br />
Therefore, do something elegant like this:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp; </span><span class="comment">// Sort the multidimensional array<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$results</span><span class="keyword">, </span><span class="string">"custom_sort"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; </span><span class="comment">// Define the custom sort function<br />
&nbsp;&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">custom_sort</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$b</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$a</span><span class="keyword">[</span><span class="string">'some_sub_var'</span><span class="keyword">]&gt;</span><span class="default">$b</span><span class="keyword">[</span><span class="string">'some_sub_var'</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
This does in 4 lines what other functions took 40 to 50 lines to do. This does not require you to create temporary arrays or anything. This is, for me, a highly preferred solution over this function.<br />
<br />
Hope it helps!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105115""></a>
  <div class="note">
   <strong class="user">info at ichier dot de</strong>
   <a href="#105115" class="date">28-Jul-2011 05:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if you want to sort an array by columns, this is the function to do it.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">array_csort</span><span class="keyword">() {&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//coded by Ichier2003
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$args </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$marray </span><span class="keyword">= </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">); 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$msortline </span><span class="keyword">= </span><span class="string">'return(array_multisort('</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$args </span><span class="keyword">as </span><span class="default">$arg</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$marray </span><span class="keyword">as </span><span class="default">$row</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sortarr</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][] = </span><span class="default">$row</span><span class="keyword">[</span><span class="default">$arg</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sortarr</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$arg</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$msortline </span><span class="keyword">.= </span><span class="string">'$sortarr['</span><span class="keyword">.</span><span class="default">$i</span><span class="keyword">.</span><span class="string">'],'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$msortline </span><span class="keyword">.= </span><span class="string">'$marray));'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; eval(</span><span class="default">$msortline</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$marray</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104659""></a>
  <div class="note">
   <strong class="user">thierryzo at hotmail dot fr</strong>
   <a href="#104659" class="date">29-Jun-2011 11:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
//A very simple way to sort arrays with this kind of structure.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $myArray </span><span class="keyword">=array( <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">"NUMCIE" </span><span class="keyword">=&gt; </span><span class="string">"001"</span><span class="keyword">,</span><span class="string">"REF" </span><span class="keyword">=&gt; </span><span class="string">"RXL"</span><span class="keyword">,</span><span class="string">"COLOR" </span><span class="keyword">=&gt; </span><span class="string">"RED"</span><span class="keyword">,</span><span class="string">"L1" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">"NUMCIE" </span><span class="keyword">=&gt; </span><span class="string">"001"</span><span class="keyword">,</span><span class="string">"REF" </span><span class="keyword">=&gt; </span><span class="string">"RXL"</span><span class="keyword">,</span><span class="string">"COLOR" </span><span class="keyword">=&gt; </span><span class="string">"BLUE"</span><span class="keyword">,</span><span class="string">"L1" </span><span class="keyword">=&gt; </span><span class="default">6</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">"NUMCIE" </span><span class="keyword">=&gt; </span><span class="string">"001"</span><span class="keyword">,</span><span class="string">"REF" </span><span class="keyword">=&gt; </span><span class="string">"RHQ"</span><span class="keyword">,</span><span class="string">"COLOR" </span><span class="keyword">=&gt; </span><span class="string">"RED"</span><span class="keyword">,</span><span class="string">"L1" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">"NUMCIE" </span><span class="keyword">=&gt; </span><span class="string">"002"</span><span class="keyword">,</span><span class="string">"REF" </span><span class="keyword">=&gt; </span><span class="string">"RXL"</span><span class="keyword">,</span><span class="string">"COLOR" </span><span class="keyword">=&gt; </span><span class="string">"YELLOW"</span><span class="keyword">,</span><span class="string">"L1" </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$myArray </span><span class="keyword">as </span><span class="default">$c</span><span class="keyword">=&gt;</span><span class="default">$key</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sort_numcie</span><span class="keyword">[] = </span><span class="default">$key</span><span class="keyword">[</span><span class="string">'NUMCIE'</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sort_ref</span><span class="keyword">[] = </span><span class="default">$key</span><span class="keyword">[</span><span class="string">'REF'</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sort_color</span><span class="keyword">[] = </span><span class="default">$key</span><span class="keyword">[</span><span class="string">'COLOR'</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_multisort</span><span class="keyword">(</span><span class="default">$sort_numcie</span><span class="keyword">, </span><span class="default">SORT_ASC</span><span class="keyword">, </span><span class="default">$sort_ref</span><span class="keyword">, </span><span class="default">SORT_STRING</span><span class="keyword">, </span><span class="default">$myArray</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$myArray</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
</span><span class="default">?&gt;</span>&nbsp; &nbsp;&nbsp; <br />
<br />
//Result array<br />
&nbsp;&nbsp;&nbsp; <br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [NUMCIE] =&gt; 001<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [REF] =&gt; RHQ<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [COLOR] =&gt; RED<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [L1] =&gt; 4<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [NUMCIE] =&gt; 001<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [REF] =&gt; RXL<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [COLOR] =&gt; BLUE<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [L1] =&gt; 6<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [NUMCIE] =&gt; 001<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [REF] =&gt; RXL<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [COLOR] =&gt; RED<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [L1] =&gt; 4<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [NUMCIE] =&gt; 002<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [REF] =&gt; RXL<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [COLOR] =&gt; YELLOW<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [L1] =&gt; 8<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103047""></a>
  <div class="note">
   <strong class="user">Jaak Tamre</strong>
   <a href="#103047" class="date">22-Mar-2011 03:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had a problem with sorting SimpleXMLElement list. I found a nice short solution.
<br />

<br />
I have an array of ticket objects: $ticketList = $xml-&gt;Tickets;
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">// Sort by ValidOnDate
<br />
</span><span class="default">$tickets </span><span class="keyword">= array();
<br />
</span><span class="default">$valid </span><span class="keyword">= array();
<br />
foreach (</span><span class="default">$ticketList </span><span class="keyword">as </span><span class="default">$row</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$tickets</span><span class="keyword">[] = </span><span class="default">$row</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$valid</span><span class="keyword">[] = </span><span class="default">DateHandler</span><span class="keyword">::</span><span class="default">parseDate</span><span class="keyword">(</span><span class="default">$row</span><span class="keyword">-&gt;</span><span class="default">ValidOnDate</span><span class="keyword">);
<br />
}
<br />
</span><span class="default">array_multisort</span><span class="keyword">(</span><span class="default">$valid</span><span class="keyword">, </span><span class="default">SORT_DESC</span><span class="keyword">, </span><span class="default">$tickets</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Just make an array of object items you want to sort by and a new array for the same objects which will be reordered like the first array.
<br />

<br />
Ps: my own parseDate(date) returns unix timestamp for different date formats.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100534""></a>
  <div class="note">
   <strong class="user">jimpoz at jimpoz dot com</strong>
   <a href="#100534" class="date">21-Oct-2010 11:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I came up with an easy way to sort database-style results. This does what example 3 does, except it takes care of creating those intermediate arrays for you before passing control on to array_multisort(). <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_orderby</span><span class="keyword">()<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$args </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$data </span><span class="keyword">= </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$args </span><span class="keyword">as </span><span class="default">$n </span><span class="keyword">=&gt; </span><span class="default">$field</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$field</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$data </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$row</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$row</span><span class="keyword">[</span><span class="default">$field</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$args</span><span class="keyword">[</span><span class="default">$n</span><span class="keyword">] = </span><span class="default">$tmp</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$args</span><span class="keyword">[] = &amp;</span><span class="default">$data</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">'array_multisort'</span><span class="keyword">, </span><span class="default">$args</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
The sorted array is now in the return value of the function instead of being passed by reference.<br />
<br />
<span class="default">&lt;?php<br />
$data</span><span class="keyword">[] = array(</span><span class="string">'volume' </span><span class="keyword">=&gt; </span><span class="default">67</span><span class="keyword">, </span><span class="string">'edition' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">);<br />
</span><span class="default">$data</span><span class="keyword">[] = array(</span><span class="string">'volume' </span><span class="keyword">=&gt; </span><span class="default">86</span><span class="keyword">, </span><span class="string">'edition' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">$data</span><span class="keyword">[] = array(</span><span class="string">'volume' </span><span class="keyword">=&gt; </span><span class="default">85</span><span class="keyword">, </span><span class="string">'edition' </span><span class="keyword">=&gt; </span><span class="default">6</span><span class="keyword">);<br />
</span><span class="default">$data</span><span class="keyword">[] = array(</span><span class="string">'volume' </span><span class="keyword">=&gt; </span><span class="default">98</span><span class="keyword">, </span><span class="string">'edition' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">);<br />
</span><span class="default">$data</span><span class="keyword">[] = array(</span><span class="string">'volume' </span><span class="keyword">=&gt; </span><span class="default">86</span><span class="keyword">, </span><span class="string">'edition' </span><span class="keyword">=&gt; </span><span class="default">6</span><span class="keyword">);<br />
</span><span class="default">$data</span><span class="keyword">[] = array(</span><span class="string">'volume' </span><span class="keyword">=&gt; </span><span class="default">67</span><span class="keyword">, </span><span class="string">'edition' </span><span class="keyword">=&gt; </span><span class="default">7</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Pass the array, followed by the column names and sort flags<br />
</span><span class="default">$sorted </span><span class="keyword">= </span><span class="default">array_orderby</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="string">'volume'</span><span class="keyword">, </span><span class="default">SORT_DESC</span><span class="keyword">, </span><span class="string">'edition'</span><span class="keyword">, </span><span class="default">SORT_ASC</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97766""></a>
  <div class="note">
   <strong class="user">zequez at gmail dot com</strong>
   <a href="#97766" class="date">07-May-2010 12:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Easiest way I find out to sort an entire multidimensional array by one element of it:
<br />

<br />
<span class="default">&lt;?php
<br />
$multiArray </span><span class="keyword">= Array(
<br />
&nbsp;&nbsp;&nbsp; Array(</span><span class="string">"id" </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">"name" </span><span class="keyword">=&gt; </span><span class="string">"Defg"</span><span class="keyword">),
<br />
&nbsp;&nbsp;&nbsp; Array(</span><span class="string">"id" </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">"name" </span><span class="keyword">=&gt; </span><span class="string">"Abcd"</span><span class="keyword">),
<br />
&nbsp;&nbsp;&nbsp; Array(</span><span class="string">"id" </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">"name" </span><span class="keyword">=&gt; </span><span class="string">"Bcde"</span><span class="keyword">),
<br />
&nbsp;&nbsp;&nbsp; Array(</span><span class="string">"id" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">"name" </span><span class="keyword">=&gt; </span><span class="string">"Cdef"</span><span class="keyword">));
<br />
</span><span class="default">$tmp </span><span class="keyword">= Array();
<br />
foreach(</span><span class="default">$multiArray </span><span class="keyword">as &amp;</span><span class="default">$ma</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$tmp</span><span class="keyword">[] = &amp;</span><span class="default">$ma</span><span class="keyword">[</span><span class="string">"name"</span><span class="keyword">];
<br />
</span><span class="default">array_multisort</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">, </span><span class="default">$multiArray</span><span class="keyword">);
<br />
foreach(</span><span class="default">$multiArray </span><span class="keyword">as &amp;</span><span class="default">$ma</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$ma</span><span class="keyword">[</span><span class="string">"name"</span><span class="keyword">].</span><span class="string">"&lt;br/&gt;"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
</span><span class="comment">/* Outputs
<br />
&nbsp;&nbsp;&nbsp; Abcd
<br />
&nbsp;&nbsp;&nbsp; Bcde
<br />
&nbsp;&nbsp;&nbsp; Cdef
<br />
&nbsp;&nbsp;&nbsp; Defg
<br />
*/
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
^-^</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95754""></a>
  <div class="note">
   <strong class="user">alexander dot v at zend dot com</strong>
   <a href="#95754" class="date">20-Jan-2010 12:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
array_multisort works normally in php 5.3, but it forces arguments to be references.<br />
<br />
It doesn't make differences for common array_multisort() usage, but makes "problems" for sorting variable number of arrays where call_user_func_array() function is involved. <br />
<br />
So all sorting arrays have to be collected into new one as a references to array variables:<br />
<br />
<span class="default">&lt;?php<br />
$sortArgs </span><span class="keyword">= array();<br />
<br />
for (...) {<br />
&nbsp;&nbsp;&nbsp; ...<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$sortArgs</span><span class="keyword">[] = &amp;</span><span class="default">$valuesArray</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; ...<br />
}<br />
<br />
</span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">'array_multisort'</span><span class="keyword">, </span><span class="default">$sortArgs</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
This (requiring arguments to be a reference) is not actually a problem since source array will not be sorted otherwise.<br />
<br />
Important note!<br />
Don't forget to destroy $valuesArray variable if you use it over each array_multisort() argument processing iteration.<br />
If you don't do it, all array_multisort() arguments will contain the same array:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">for (...) {<br />
&nbsp;&nbsp;&nbsp; ...<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$sortArgs</span><span class="keyword">[] = &amp;</span><span class="default">$valuesArray</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; unset(</span><span class="default">$valuesArray</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; ...<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
And the last important thing :)<br />
Collect sorting arrays somewhere. PHP 5.3 will transfer reference into value (when $valuesArray is destroyed) and you will get "Parameter 1 to array_multisort() expected to be a reference, value given" warning again otherwise.<br />
<br />
Final code should look like this:<br />
<br />
<span class="default">&lt;?php<br />
$sortArgs </span><span class="keyword">= array();<br />
</span><span class="default">$sortFieldValues </span><span class="keyword">= array();<br />
<br />
for (...) {<br />
&nbsp;&nbsp;&nbsp; ...<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$sortFieldValues</span><span class="keyword">[] = &amp;</span><span class="default">$valuesArray</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$sortArgs</span><span class="keyword">[] = &amp;</span><span class="default">$valuesArray</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; unset(</span><span class="default">$valuesArray</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; ...<br />
}<br />
<br />
</span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">'array_multisort'</span><span class="keyword">, </span><span class="default">$sortArgs</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95258""></a>
  <div class="note">
   <strong class="user">d_inkubus at yahoo dot com</strong>
   <a href="#95258" class="date">22-Dec-2009 12:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Update to array_msort()--in PHP 5.3 it won't work.<br />
<br />
The solution is to replace the array_merge($params, $order) with the following code snippet:<br />
<br />
<span class="default">&lt;?php<br />
$order</span><span class="keyword">=(array)</span><span class="default">$order</span><span class="keyword">;<br />
foreach(</span><span class="default">$order </span><span class="keyword">as </span><span class="default">$order_element</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$params</span><span class="keyword">[]=&amp;</span><span class="default">$order_element</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Full code to array_msort():<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_msort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$cols</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$colarr </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$cols </span><span class="keyword">as </span><span class="default">$col </span><span class="keyword">=&gt; </span><span class="default">$order</span><span class="keyword">) <br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$colarr</span><span class="keyword">[</span><span class="default">$col</span><span class="keyword">] = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$row</span><span class="keyword">) <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; { <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$colarr</span><span class="keyword">[</span><span class="default">$col</span><span class="keyword">][</span><span class="string">'_'</span><span class="keyword">.</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$row</span><span class="keyword">[</span><span class="default">$col</span><span class="keyword">]); <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$params </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$cols </span><span class="keyword">as </span><span class="default">$col </span><span class="keyword">=&gt; </span><span class="default">$order</span><span class="keyword">) <br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$params</span><span class="keyword">[] =&amp;</span><span class="default">$colarr</span><span class="keyword">[</span><span class="default">$col</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$order</span><span class="keyword">=(array)</span><span class="default">$order</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$order </span><span class="keyword">as </span><span class="default">$order_element</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//pass by reference, as required by php 5.3<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$params</span><span class="keyword">[]=&amp;</span><span class="default">$order_element</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">'array_multisort'</span><span class="keyword">, </span><span class="default">$params</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ret </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$keys </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$first </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$colarr </span><span class="keyword">as </span><span class="default">$col </span><span class="keyword">=&gt; </span><span class="default">$arr</span><span class="keyword">) <br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">) <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$first</span><span class="keyword">) <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; { <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$keys</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$k</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$k </span><span class="keyword">= </span><span class="default">$keys</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!isset(</span><span class="default">$ret</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ret</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ret</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">][</span><span class="default">$col</span><span class="keyword">] = </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">][</span><span class="default">$col</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$first </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$ret</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
For further reference, see these bug reports:<br />
<a href="http://bugs.php.net/bug.php?id=49069" rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=49069</a><br />
<a href="http://bugs.php.net/bug.php?id=49241" rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=49241</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92139""></a>
  <div class="note">
   <strong class="user">s dot i dot g at gmx dot com</strong>
   <a href="#92139" class="date">10-Jul-2009 03:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
simple dns mx record sorting<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//getting domain name<br />
</span><span class="keyword">list(</span><span class="default">$user</span><span class="keyword">, </span><span class="default">$domain</span><span class="keyword">) = </span><span class="default">split</span><span class="keyword">(</span><span class="string">'[@]'</span><span class="keyword">, </span><span class="default">$email</span><span class="keyword">);<br />
</span><span class="default">getmxrr</span><span class="keyword">(</span><span class="default">$domain</span><span class="keyword">, </span><span class="default">$mx_server</span><span class="keyword">, </span><span class="default">$mx_weight</span><span class="keyword">);<br />
<br />
</span><span class="comment">//sorting<br />
</span><span class="keyword">for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$mx_server</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$mx</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = array<br />
&nbsp;&nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="string">"server" </span><span class="keyword">=&gt; </span><span class="default">$mx_server</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">],<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="string">"weight" </span><span class="keyword">=&gt; </span><span class="default">$mx_weight</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">],<br />
&nbsp;&nbsp;&nbsp; );<br />
}<br />
</span><span class="default">array_multisort</span><span class="keyword">(</span><span class="default">$mx_weight</span><span class="keyword">, </span><span class="default">SORT_ASC</span><span class="keyword">, </span><span class="default">$mx_server</span><span class="keyword">, </span><span class="default">SORT_ASC</span><span class="keyword">, </span><span class="default">$mx</span><span class="keyword">);<br />
<br />
</span><span class="comment">//display result<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$mx</span><span class="keyword">);<br />
<br />
</span><span class="comment">//usage<br />
</span><span class="default">$server </span><span class="keyword">= </span><span class="default">$mx</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">"server"</span><span class="keyword">];<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91645""></a>
  <div class="note">
   <strong class="user">cagret at gmail dot com</strong>
   <a href="#91645" class="date">21-Jun-2009 12:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Update to array_msort(): instead of eval() using call_user_func_array(). If we get column sorting via $_GET it would be a serious security hole.<br />
<br />
Now it also accepts multiple options for each column:<br />
<br />
<span class="default">&lt;?php<br />
$arr2 </span><span class="keyword">= </span><span class="default">array_msort</span><span class="keyword">(</span><span class="default">$arr1</span><span class="keyword">, array(</span><span class="string">'name'</span><span class="keyword">=&gt;array(</span><span class="default">SORT_DESC</span><span class="keyword">,</span><span class="default">SORT_REGULAR</span><span class="keyword">), </span><span class="string">'cat'</span><span class="keyword">=&gt;</span><span class="default">SORT_ASC</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
Btw. this function is automatically case-insensitive, as you can see use of strtolower().<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_msort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$cols</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$colarr </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$cols </span><span class="keyword">as </span><span class="default">$col </span><span class="keyword">=&gt; </span><span class="default">$order</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$colarr</span><span class="keyword">[</span><span class="default">$col</span><span class="keyword">] = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$row</span><span class="keyword">) { </span><span class="default">$colarr</span><span class="keyword">[</span><span class="default">$col</span><span class="keyword">][</span><span class="string">'_'</span><span class="keyword">.</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$row</span><span class="keyword">[</span><span class="default">$col</span><span class="keyword">]); }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$params </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$cols </span><span class="keyword">as </span><span class="default">$col </span><span class="keyword">=&gt; </span><span class="default">$order</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$params</span><span class="keyword">[] =&amp; </span><span class="default">$colarr</span><span class="keyword">[</span><span class="default">$col</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$params </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$params</span><span class="keyword">, (array)</span><span class="default">$order</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">'array_multisort'</span><span class="keyword">, </span><span class="default">$params</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ret </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$keys </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$first </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$colarr </span><span class="keyword">as </span><span class="default">$col </span><span class="keyword">=&gt; </span><span class="default">$arr</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$first</span><span class="keyword">) { </span><span class="default">$keys</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$k</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">); }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$k </span><span class="keyword">= </span><span class="default">$keys</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!isset(</span><span class="default">$ret</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">])) </span><span class="default">$ret</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ret</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">][</span><span class="default">$col</span><span class="keyword">] = </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">][</span><span class="default">$col</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$first </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$ret</span><span class="keyword">;<br />
<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91638""></a>
  <div class="note">
   <strong class="user">cagret at gmail dot com</strong>
   <a href="#91638" class="date">20-Jun-2009 09:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A more inuitive way of sorting multidimensional arrays using array_msort() in just one line, you don't have to divide the original array into per-column-arrays:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$arr1 </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; array(</span><span class="string">'id'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">,</span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="string">'aA'</span><span class="keyword">,</span><span class="string">'cat'</span><span class="keyword">=&gt;</span><span class="string">'cc'</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; array(</span><span class="string">'id'</span><span class="keyword">=&gt;</span><span class="default">2</span><span class="keyword">,</span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="string">'aa'</span><span class="keyword">,</span><span class="string">'cat'</span><span class="keyword">=&gt;</span><span class="string">'dd'</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; array(</span><span class="string">'id'</span><span class="keyword">=&gt;</span><span class="default">3</span><span class="keyword">,</span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="string">'bb'</span><span class="keyword">,</span><span class="string">'cat'</span><span class="keyword">=&gt;</span><span class="string">'cc'</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; array(</span><span class="string">'id'</span><span class="keyword">=&gt;</span><span class="default">4</span><span class="keyword">,</span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="string">'bb'</span><span class="keyword">,</span><span class="string">'cat'</span><span class="keyword">=&gt;</span><span class="string">'dd'</span><span class="keyword">)<br />
);<br />
<br />
</span><span class="default">$arr2 </span><span class="keyword">= </span><span class="default">array_msort</span><span class="keyword">(</span><span class="default">$arr1</span><span class="keyword">, array(</span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="default">SORT_DESC</span><span class="keyword">, </span><span class="string">'cat'</span><span class="keyword">=&gt;</span><span class="default">SORT_ASC</span><span class="keyword">));<br />
<br />
</span><span class="default">debug</span><span class="keyword">(</span><span class="default">$arr1</span><span class="keyword">, </span><span class="default">$arr2</span><span class="keyword">);<br />
<br />
</span><span class="default">arr1</span><span class="keyword">:<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">0</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">id</span><span class="keyword">: </span><span class="default">1 </span><span class="keyword">(int)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">name</span><span class="keyword">: </span><span class="default">aA </span><span class="keyword">(</span><span class="default">string</span><span class="keyword">:</span><span class="default">2</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">cat</span><span class="keyword">: </span><span class="default">cc </span><span class="keyword">(</span><span class="default">string</span><span class="keyword">:</span><span class="default">2</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">1</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">id</span><span class="keyword">: </span><span class="default">2 </span><span class="keyword">(int)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">name</span><span class="keyword">: </span><span class="default">aa </span><span class="keyword">(</span><span class="default">string</span><span class="keyword">:</span><span class="default">2</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">cat</span><span class="keyword">: </span><span class="default">dd </span><span class="keyword">(</span><span class="default">string</span><span class="keyword">:</span><span class="default">2</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">2</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">id</span><span class="keyword">: </span><span class="default">3 </span><span class="keyword">(int)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">name</span><span class="keyword">: </span><span class="default">bb </span><span class="keyword">(</span><span class="default">string</span><span class="keyword">:</span><span class="default">2</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">cat</span><span class="keyword">: </span><span class="default">cc </span><span class="keyword">(</span><span class="default">string</span><span class="keyword">:</span><span class="default">2</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">3</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">id</span><span class="keyword">: </span><span class="default">4 </span><span class="keyword">(int)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">name</span><span class="keyword">: </span><span class="default">bb </span><span class="keyword">(</span><span class="default">string</span><span class="keyword">:</span><span class="default">2</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">cat</span><span class="keyword">: </span><span class="default">dd </span><span class="keyword">(</span><span class="default">string</span><span class="keyword">:</span><span class="default">2</span><span class="keyword">)<br />
</span><span class="default">arr2</span><span class="keyword">:<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">2</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">id</span><span class="keyword">: </span><span class="default">3 </span><span class="keyword">(int)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">name</span><span class="keyword">: </span><span class="default">bb </span><span class="keyword">(</span><span class="default">string</span><span class="keyword">:</span><span class="default">2</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">cat</span><span class="keyword">: </span><span class="default">cc </span><span class="keyword">(</span><span class="default">string</span><span class="keyword">:</span><span class="default">2</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">3</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">id</span><span class="keyword">: </span><span class="default">4 </span><span class="keyword">(int)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">name</span><span class="keyword">: </span><span class="default">bb </span><span class="keyword">(</span><span class="default">string</span><span class="keyword">:</span><span class="default">2</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">cat</span><span class="keyword">: </span><span class="default">dd </span><span class="keyword">(</span><span class="default">string</span><span class="keyword">:</span><span class="default">2</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">0</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">id</span><span class="keyword">: </span><span class="default">1 </span><span class="keyword">(int)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">name</span><span class="keyword">: </span><span class="default">aA </span><span class="keyword">(</span><span class="default">string</span><span class="keyword">:</span><span class="default">2</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">cat</span><span class="keyword">: </span><span class="default">cc </span><span class="keyword">(</span><span class="default">string</span><span class="keyword">:</span><span class="default">2</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">1</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">id</span><span class="keyword">: </span><span class="default">2 </span><span class="keyword">(int)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">name</span><span class="keyword">: </span><span class="default">aa </span><span class="keyword">(</span><span class="default">string</span><span class="keyword">:</span><span class="default">2</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">cat</span><span class="keyword">: </span><span class="default">dd </span><span class="keyword">(</span><span class="default">string</span><span class="keyword">:</span><span class="default">2</span><span class="keyword">)<br />
<br />
function </span><span class="default">array_msort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$cols</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$colarr </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$cols </span><span class="keyword">as </span><span class="default">$col </span><span class="keyword">=&gt; </span><span class="default">$order</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$colarr</span><span class="keyword">[</span><span class="default">$col</span><span class="keyword">] = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$row</span><span class="keyword">) { </span><span class="default">$colarr</span><span class="keyword">[</span><span class="default">$col</span><span class="keyword">][</span><span class="string">'_'</span><span class="keyword">.</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$row</span><span class="keyword">[</span><span class="default">$col</span><span class="keyword">]); }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$eval </span><span class="keyword">= </span><span class="string">'array_multisort('</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$cols </span><span class="keyword">as </span><span class="default">$col </span><span class="keyword">=&gt; </span><span class="default">$order</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$eval </span><span class="keyword">.= </span><span class="string">'$colarr[\''</span><span class="keyword">.</span><span class="default">$col</span><span class="keyword">.</span><span class="string">'\'],'</span><span class="keyword">.</span><span class="default">$order</span><span class="keyword">.</span><span class="string">','</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$eval </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$eval</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">).</span><span class="string">');'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; eval(</span><span class="default">$eval</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ret </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$colarr </span><span class="keyword">as </span><span class="default">$col </span><span class="keyword">=&gt; </span><span class="default">$arr</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$k </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$k</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!isset(</span><span class="default">$ret</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">])) </span><span class="default">$ret</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ret</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">][</span><span class="default">$col</span><span class="keyword">] = </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">][</span><span class="default">$col</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$ret</span><span class="keyword">;<br />
<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90917""></a>
  <div class="note">
   <strong class="user">m dot michalczyk at gmail dot com</strong>
   <a href="#90917" class="date">16-May-2009 12:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is useful example based on za at byza dot it solution to sort multidimensional objects by any dimension.<br />
za at byza dot it<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/* Example structure */<br />
</span><span class="keyword">class </span><span class="default">person</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$firstName</span><span class="keyword">, </span><span class="default">$lastName</span><span class="keyword">, </span><span class="default">$title</span><span class="keyword">, </span><span class="default">$position</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">firstName </span><span class="keyword">= </span><span class="default">$firstName</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">lastName </span><span class="keyword">= </span><span class="default">$lastName</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">title </span><span class="keyword">= new </span><span class="default">title</span><span class="keyword">(</span><span class="default">$title</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">position </span><span class="keyword">= new </span><span class="default">position</span><span class="keyword">(</span><span class="default">$position</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
class </span><span class="default">title</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">= </span><span class="default">$name</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
}<br />
class </span><span class="default">position</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">= </span><span class="default">$name</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
}<br />
<br />
</span><span class="default">$array</span><span class="keyword">[] = new </span><span class="default">person</span><span class="keyword">(</span><span class="string">'Piotr'</span><span class="keyword">, </span><span class="string">'Sobiepanek'</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">);<br />
</span><span class="default">$array</span><span class="keyword">[] = new </span><span class="default">person</span><span class="keyword">(</span><span class="string">'Piotr'</span><span class="keyword">, </span><span class="string">'Kowalski'</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">);<br />
</span><span class="default">$array</span><span class="keyword">[] = new </span><span class="default">person</span><span class="keyword">(</span><span class="string">'Piotr'</span><span class="keyword">, </span><span class="string">'Michalski'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">);<br />
</span><span class="default">$array</span><span class="keyword">[] = new </span><span class="default">person</span><span class="keyword">(</span><span class="string">'Jozef'</span><span class="keyword">, </span><span class="string">'Smietana'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">);<br />
</span><span class="default">$array</span><span class="keyword">[] = new </span><span class="default">person</span><span class="keyword">(</span><span class="string">'Jozef'</span><span class="keyword">, </span><span class="string">'Cmietana'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">);<br />
</span><span class="default">$array</span><span class="keyword">[] = new </span><span class="default">person</span><span class="keyword">(</span><span class="string">'Marcin'</span><span class="keyword">, </span><span class="string">'Kondraciuk'</span><span class="keyword">, </span><span class="string">'c'</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">);<br />
</span><span class="default">$array</span><span class="keyword">[] = new </span><span class="default">person</span><span class="keyword">(</span><span class="string">'Maksym'</span><span class="keyword">, </span><span class="string">'Kondraciuk'</span><span class="keyword">, </span><span class="string">'c'</span><span class="keyword">, </span><span class="string">'d'</span><span class="keyword">);<br />
</span><span class="default">$array</span><span class="keyword">[] = new </span><span class="default">person</span><span class="keyword">(</span><span class="string">'Ambrozy'</span><span class="keyword">, </span><span class="string">'Kondraciuk'</span><span class="keyword">, </span><span class="string">'c'</span><span class="keyword">, </span><span class="string">'d'</span><span class="keyword">);<br />
</span><span class="default">$array</span><span class="keyword">[] = new </span><span class="default">person</span><span class="keyword">(</span><span class="string">'Alojzy'</span><span class="keyword">, </span><span class="string">'Kondraciuk'</span><span class="keyword">, </span><span class="string">'c'</span><span class="keyword">, </span><span class="string">'d'</span><span class="keyword">);<br />
<br />
</span><span class="default">array_sort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="string">'title-&gt;name'</span><span class="keyword">, </span><span class="string">'position-&gt;name'</span><span class="keyword">, </span><span class="string">'lastName'</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
<br />
</span><span class="comment">/* Source */<br />
<br />
</span><span class="keyword">function </span><span class="default">hod</span><span class="keyword">(&amp;</span><span class="default">$base</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$keys </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"-&gt;"</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$keys</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'$'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$keys</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$expression </span><span class="keyword">= </span><span class="string">'$ret = '</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$expression</span><span class="keyword">.= </span><span class="string">'$'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$keys </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (++</span><span class="default">$licz </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$expression</span><span class="keyword">.= </span><span class="string">'base-&gt;'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$expression</span><span class="keyword">.= </span><span class="default">$key</span><span class="keyword">.</span><span class="string">'-&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$expression </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$expression</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, -</span><span class="default">2</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$expression</span><span class="keyword">.= </span><span class="string">';'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; eval(</span><span class="default">$expression</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$ret</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">array_sort_func</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$b</span><span class="keyword">=</span><span class="default">NULL</span><span class="keyword">) {<br />
&nbsp;&nbsp; static </span><span class="default">$keys</span><span class="keyword">;<br />
&nbsp;&nbsp; if(</span><span class="default">$b</span><span class="keyword">===</span><span class="default">NULL</span><span class="keyword">) return </span><span class="default">$keys</span><span class="keyword">=</span><span class="default">$a</span><span class="keyword">;<br />
&nbsp;&nbsp; foreach(</span><span class="default">$keys </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(</span><span class="default">$k</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]==</span><span class="string">'!'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$k</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$k</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">hod</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="string">'$a-&gt;'</span><span class="keyword">.</span><span class="default">$k</span><span class="keyword">)!==</span><span class="default">hod</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">, </span><span class="string">'$b-&gt;'</span><span class="keyword">.</span><span class="default">$k</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strcmp</span><span class="keyword">(</span><span class="default">hod</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">, </span><span class="string">'$b-&gt;'</span><span class="keyword">.</span><span class="default">$k</span><span class="keyword">),</span><span class="default">hod</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="string">'$a-&gt;'</span><span class="keyword">.</span><span class="default">$k</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; else if(</span><span class="default">hod</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="string">'$a-&gt;'</span><span class="keyword">.</span><span class="default">$k</span><span class="keyword">)!==</span><span class="default">hod</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">, </span><span class="string">'$b-&gt;'</span><span class="keyword">.</span><span class="default">$k</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">strcmp</span><span class="keyword">(</span><span class="default">hod</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="string">'$a-&gt;'</span><span class="keyword">.</span><span class="default">$k</span><span class="keyword">),</span><span class="default">hod</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">, </span><span class="string">'$b-&gt;'</span><span class="keyword">.</span><span class="default">$k</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; return </span><span class="default">0</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">array_sort</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp; if(!</span><span class="default">$array</span><span class="keyword">) return </span><span class="default">$keys</span><span class="keyword">;<br />
&nbsp;&nbsp; </span><span class="default">$keys</span><span class="keyword">=</span><span class="default">func_get_args</span><span class="keyword">();<br />
&nbsp;&nbsp; </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">array_sort_func</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">,</span><span class="string">"array_sort_func"</span><span class="keyword">);&nbsp; &nbsp; &nbsp;&nbsp; <br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90541""></a>
  <div class="note">
   <strong class="user">za at byza dot it</strong>
   <a href="#90541" class="date">27-Apr-2009 07:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wrote a function to sort a multidimensional array by multiple columns in ascending and descending order.
<br />

<br />
Sample array:
<br />

<br />
<span class="default">&lt;?php
<br />
$my_array</span><span class="keyword">=array(
<br />
&nbsp;&nbsp; array(</span><span class="string">'id'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">, </span><span class="string">'surname'</span><span class="keyword">=&gt;</span><span class="string">'rossi'</span><span class="keyword">, </span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="string">'mario'</span><span class="keyword">, </span><span class="string">'group'</span><span class="keyword">=&gt;</span><span class="string">'admin'</span><span class="keyword">),
<br />
&nbsp;&nbsp; array(</span><span class="string">'id'</span><span class="keyword">=&gt;</span><span class="default">2</span><span class="keyword">, </span><span class="string">'surname'</span><span class="keyword">=&gt;</span><span class="string">'rossi'</span><span class="keyword">, </span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="string">'giovanni'</span><span class="keyword">, </span><span class="string">'group'</span><span class="keyword">=&gt;</span><span class="string">'user'</span><span class="keyword">),
<br />
&nbsp;&nbsp; array(</span><span class="string">'id'</span><span class="keyword">=&gt;</span><span class="default">3</span><span class="keyword">, </span><span class="string">'surname'</span><span class="keyword">=&gt;</span><span class="string">'verdi'</span><span class="keyword">, </span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="string">'luigi'</span><span class="keyword">, </span><span class="string">'group'</span><span class="keyword">=&gt;</span><span class="string">'user'</span><span class="keyword">),
<br />
&nbsp;&nbsp; array(</span><span class="string">'id'</span><span class="keyword">=&gt;</span><span class="default">4</span><span class="keyword">, </span><span class="string">'surname'</span><span class="keyword">=&gt;</span><span class="string">'verdi'</span><span class="keyword">, </span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="string">'franco'</span><span class="keyword">, </span><span class="string">'group'</span><span class="keyword">=&gt;</span><span class="string">'guest'</span><span class="keyword">),
<br />
&nbsp;&nbsp; array(</span><span class="string">'id'</span><span class="keyword">=&gt;</span><span class="default">5</span><span class="keyword">, </span><span class="string">'surname'</span><span class="keyword">=&gt;</span><span class="string">'bianchi'</span><span class="keyword">, </span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="string">'mario'</span><span class="keyword">, </span><span class="string">'group'</span><span class="keyword">=&gt;</span><span class="string">'guest'</span><span class="keyword">)
<br />
);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Example: <span class="default">&lt;?php array_sort</span><span class="keyword">(</span><span class="default">$my_array</span><span class="keyword">,</span><span class="string">'!group'</span><span class="keyword">,</span><span class="string">'surname'</span><span class="keyword">); </span><span class="default">?&gt;
<br />
</span>
<br />
Output: sort the array DESCENDING by group and then ASCENDING by surname. Notice the use of ! to reverse the sort order. Rows order will be: 2,3,5,4,1
<br />

<br />
The function code:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">array_sort_func</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$b</span><span class="keyword">=</span><span class="default">NULL</span><span class="keyword">) {
<br />
&nbsp;&nbsp; static </span><span class="default">$keys</span><span class="keyword">; 
<br />
&nbsp;&nbsp; if(</span><span class="default">$b</span><span class="keyword">===</span><span class="default">NULL</span><span class="keyword">) return </span><span class="default">$keys</span><span class="keyword">=</span><span class="default">$a</span><span class="keyword">;
<br />
&nbsp;&nbsp; foreach(</span><span class="default">$keys </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(@</span><span class="default">$k</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]==</span><span class="string">'!'</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$k</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$k</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; if(@</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]!==@</span><span class="default">$b</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strcmp</span><span class="keyword">(@</span><span class="default">$b</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">],@</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }
<br />
&nbsp;&nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp;&nbsp; else if(@</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]!==@</span><span class="default">$b</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">strcmp</span><span class="keyword">(@</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">],@</span><span class="default">$b</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]);
<br />
&nbsp;&nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; }
<br />
&nbsp;&nbsp; return </span><span class="default">0</span><span class="keyword">;
<br />
}
<br />

<br />
function </span><span class="default">array_sort</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">) {
<br />
&nbsp;&nbsp; if(!</span><span class="default">$array</span><span class="keyword">) return </span><span class="default">$keys</span><span class="keyword">;
<br />
&nbsp;&nbsp; </span><span class="default">$keys</span><span class="keyword">=</span><span class="default">func_get_args</span><span class="keyword">();
<br />
&nbsp;&nbsp; </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">);
<br />
&nbsp;&nbsp; </span><span class="default">array_sort_func</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">);
<br />
&nbsp;&nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">,</span><span class="string">"array_sort_func"</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; 
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89918""></a>
  <div class="note">
   <strong class="user">mech.cx</strong>
   <a href="#89918" class="date">28-Mar-2009 09:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was (as near everyone here :-) looking to sort 2-dimensional arrays by certain fields in the associative sub-arrays.<br />
What I didn't like about the documentation examples is that you need to loop through the input array to create sub arrays first, then use those in the function call.<br />
<br />
"php a-t-the-r-a-t-e chir.ag" (<a href="http://www.php.net/manual/en/function.array-multisort.php#60401" rel="nofollow" target="_blank">http://www.php.net/manual/en/function.array-multisort.php#60401</a>) wrote a quite cunning wrapper function, I rewrote it slightly, changing variable names and adding comments (for my sanity :-) mostly.<br />
One snag I found: the input array is passed to array_multisort as last argument, but the changed array is not the one that is returned. Passing it by reference fixed that. This seems to be caused by the whole thing sitting inside the call_user_func_array, as shown below.<br />
<br />
<span class="default">&lt;?php<br />
<br />
$points </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br />
</span><span class="default">$names&nbsp; </span><span class="keyword">= array(</span><span class="string">'peter'</span><span class="keyword">, </span><span class="string">'mike'</span><span class="keyword">, </span><span class="string">'john Zoo'</span><span class="keyword">, </span><span class="string">'john Ab'</span><span class="keyword">);<br />
<br />
</span><span class="default">$source </span><span class="keyword">= array (<br />
&nbsp; array ( </span><span class="string">'points' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'Peter'</span><span class="keyword">),<br />
&nbsp; array ( </span><span class="string">'points' </span><span class="keyword">=&gt; </span><span class="default">5</span><span class="keyword">, </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'Mike'</span><span class="keyword">),<br />
&nbsp; array ( </span><span class="string">'points' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'John Zoo'</span><span class="keyword">),<br />
&nbsp; array ( </span><span class="string">'points' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'John Ab'</span><span class="keyword">)<br />
);<br />
<br />
</span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">'array_multisort'</span><span class="keyword">, array(</span><span class="default">$points</span><span class="keyword">, </span><span class="default">SORT_DESC</span><span class="keyword">, </span><span class="default">SORT_NUMERIC</span><span class="keyword">, </span><span class="default">$names</span><span class="keyword">, </span><span class="default">SORT_ASC</span><span class="keyword">, </span><span class="default">SORT_STRING</span><span class="keyword">, </span><span class="default">$source</span><span class="keyword">)); </span><span class="comment">// doesn't work<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$source</span><span class="keyword">);<br />
</span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">'array_multisort'</span><span class="keyword">, array(</span><span class="default">$points</span><span class="keyword">, </span><span class="default">SORT_DESC</span><span class="keyword">, </span><span class="default">SORT_NUMERIC</span><span class="keyword">, </span><span class="default">$names</span><span class="keyword">, </span><span class="default">SORT_ASC</span><span class="keyword">, </span><span class="default">SORT_STRING</span><span class="keyword">, &amp;</span><span class="default">$source</span><span class="keyword">)); </span><span class="comment">// works!<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$source</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Call like arrayColumnSort('points', SORT_DESC, SORT_NUMERIC, 'name', SORT_ASC, SORT_STRING, $source);<br />
<br />
// Slightly adapted from <a href="http://www.php.net/manual/en/function.array-multisort.php#60401" rel="nofollow" target="_blank">http://www.php.net/manual/en/function.array-multisort.php#60401</a><br />
<br />
// arrayColumnSort(string $field, [options, ], string $field2, [options, ], .... , $array) /<br />
<br />
//____________________<br />
// arrayColumnSort() /<br />
</span><span class="keyword">function </span><span class="default">arrayColumnSort</span><span class="keyword">() {<br />
&nbsp; </span><span class="default">$args&nbsp; </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">);<br />
&nbsp; if (! </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp; </span><span class="comment">// Here we'll sift out the values from the columns we want to sort on, and put them in numbered 'subar' ("sub-array") arrays.<br />
&nbsp; //&nbsp;&nbsp; (So when sorting by two fields with two modifiers (sort options) each, this will create $subar0 and $subar3)<br />
&nbsp; </span><span class="keyword">foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$row</span><span class="keyword">) </span><span class="comment">// loop through source array<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach(</span><span class="default">$args </span><span class="keyword">as </span><span class="default">$akey </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">) </span><span class="comment">// loop through args (fields and modifiers)<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">))&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// if the arg's a field, add its value from the source array to a sub-array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">${</span><span class="string">"subar</span><span class="default">$akey</span><span class="string">"</span><span class="keyword">}[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$row</span><span class="keyword">[</span><span class="default">$val</span><span class="keyword">];<br />
&nbsp; </span><span class="comment">// $multisort_args contains the arguments that would (/will) go into array_multisort(): sub-arrays, modifiers and the source array<br />
&nbsp; </span><span class="default">$multisort_args </span><span class="keyword">= array(); <br />
&nbsp; foreach(</span><span class="default">$args </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$multisort_args</span><span class="keyword">[] = (</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">) ? ${</span><span class="string">"subar</span><span class="default">$key</span><span class="string">"</span><span class="keyword">} : </span><span class="default">$val</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$multisort_args</span><span class="keyword">[] = &amp;</span><span class="default">$array</span><span class="keyword">;&nbsp;&nbsp; </span><span class="comment">// finally add the source array, by reference<br />
&nbsp; </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">"array_multisort"</span><span class="keyword">, </span><span class="default">$multisort_args</span><span class="keyword">);<br />
&nbsp; return </span><span class="default">$array</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88193""></a>
  <div class="note">
   <strong class="user">frank at overdrunk dot net</strong>
   <a href="#88193" class="date">14-Jan-2009 11:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had a function to make a sort on a 2D array and I wanted to sort an array using a column that usualy contains numeric values but also strings.<br />
<br />
Lets say we have this array :<br />
<br />
Array (<br />
&nbsp; [0] =&gt; Array ( "name" = "12000" ),<br />
&nbsp; [1] =&gt; Array ( "name" = "113" ),<br />
&nbsp; [2] =&gt; Array ( "name" = "test 01" ),<br />
&nbsp; [3] =&gt; Array ( "name" = "15000 tests" ),<br />
&nbsp; [4] =&gt; Array ( "name" = "45" ),<br />
&nbsp; [5] =&gt; Array ( "name" = "350" ),<br />
&nbsp; [6] =&gt; Array ( "name" = "725" ),<br />
&nbsp; [7] =&gt; Array ( "name" = "hello" )<br />
}<br />
<br />
SORT_STRING whould have returned me this :<br />
<br />
Array ( // Numeric values are not correctly sorted<br />
&nbsp; [0] =&gt; Array ( "name" = "113" ),<br />
&nbsp; [1] =&gt; Array ( "name" = "12000" ),<br />
&nbsp; [2] =&gt; Array ( "name" = "15000 tests" ),<br />
&nbsp; [3] =&gt; Array ( "name" = "350" ), <br />
&nbsp; [4] =&gt; Array ( "name" = "45" ),<br />
&nbsp; [5] =&gt; Array ( "name" = "725" ),<br />
&nbsp; [6] =&gt; Array ( "name" = "hello" ),<br />
&nbsp; [7] =&gt; Array ( "name" = "test 01" )<br />
}<br />
<br />
SORT_NUMERIC would have returned me this :<br />
<br />
Array ( // String values are not sorted, just in the same order<br />
&nbsp; [0] =&gt; Array ( "name" = "test 01" ),<br />
&nbsp; [1] =&gt; Array ( "name" = "hello" ),<br />
&nbsp; [2] =&gt; Array ( "name" = "45" ),<br />
&nbsp; [3] =&gt; Array ( "name" = "113" ),<br />
&nbsp; [4] =&gt; Array ( "name" = "350" ),<br />
&nbsp; [5] =&gt; Array ( "name" = "725" ),<br />
&nbsp; [6] =&gt; Array ( "name" = "12000" ),<br />
&nbsp; [7] =&gt; Array ( "name" = "15000 tests" ),<br />
}<br />
<br />
So I've made this hybrid code which combines the best of both worlds by merging content sorted either way according to the first caracter of the string:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* Sorts an array according to a specified column<br />
&nbsp;* Params : array&nbsp; $table<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; string $colname<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bool&nbsp;&nbsp; $numeric<br />
&nbsp;**/<br />
</span><span class="keyword">function </span><span class="default">sort_col</span><span class="keyword">(</span><span class="default">$table</span><span class="keyword">, </span><span class="default">$colname</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$tn </span><span class="keyword">= </span><span class="default">$ts </span><span class="keyword">= </span><span class="default">$temp_num </span><span class="keyword">= </span><span class="default">$temp_str </span><span class="keyword">= array();<br />
&nbsp; foreach (</span><span class="default">$table </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$row</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$row</span><span class="keyword">[</span><span class="default">$colname</span><span class="keyword">], </span><span class="default">0</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">))) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$tn</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$row</span><span class="keyword">[</span><span class="default">$colname</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$temp_num</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$row</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$ts</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$row</span><span class="keyword">[</span><span class="default">$colname</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$temp_str</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$row</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; unset(</span><span class="default">$table</span><span class="keyword">);<br />
<br />
&nbsp; </span><span class="default">array_multisort</span><span class="keyword">(</span><span class="default">$tn</span><span class="keyword">, </span><span class="default">SORT_ASC</span><span class="keyword">, </span><span class="default">SORT_NUMERIC</span><span class="keyword">, </span><span class="default">$temp_num</span><span class="keyword">); <br />
&nbsp; </span><span class="default">array_multisort</span><span class="keyword">(</span><span class="default">$ts</span><span class="keyword">, </span><span class="default">SORT_ASC</span><span class="keyword">, </span><span class="default">SORT_STRING</span><span class="keyword">, </span><span class="default">$temp_str</span><span class="keyword">);<br />
&nbsp; return </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$temp_num</span><span class="keyword">, </span><span class="default">$temp_str</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
It would return something like this :<br />
<br />
Array (<br />
&nbsp; [2] =&gt; Array ( "name" = "45" ),<br />
&nbsp; [3] =&gt; Array ( "name" = "113" ),<br />
&nbsp; [4] =&gt; Array ( "name" = "350" ),<br />
&nbsp; [5] =&gt; Array ( "name" = "725" ),<br />
&nbsp; [6] =&gt; Array ( "name" = "12000" ),<br />
&nbsp; [7] =&gt; Array ( "name" = "15000 tests" ),<br />
&nbsp; [1] =&gt; Array ( "name" = "hello" ),<br />
&nbsp; [0] =&gt; Array ( "name" = "test 01" ),<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87268""></a>
  <div class="note">
   <strong class="user">Zbigniew Heintze http://bigweb.pl</strong>
   <a href="#87268" class="date">27-Nov-2008 08:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php
<br />
</span><span class="comment">/**
<br />
&nbsp;* Sort DB result
<br />
&nbsp;*
<br />
&nbsp;* @param array $data Result of sql query as associative array
<br />
&nbsp;* 
<br />
&nbsp;* Rest of parameters are optional 
<br />
&nbsp;* [, string $name&nbsp; [, mixed $name or $order&nbsp; [, mixed $name or $mode]]]
<br />
&nbsp;* $name string - column name i database table
<br />
&nbsp;* $order integer - sorting direction ascending (SORT_ASC) or descending (SORT_DESC)
<br />
&nbsp;* $mode integer - sorting mode (SORT_REGULAR, SORT_STRING, SORT_NUMERIC)
<br />
&nbsp;* 
<br />
&nbsp;* &lt;code&gt;
<br />
&nbsp;* &lt;?php
<br />
&nbsp;* // You can sort data by several columns e.g.
<br />
&nbsp;* $data = array();
<br />
&nbsp;* for ($i = 1; $i &lt;= 10; $i++) {
<br />
&nbsp;*&nbsp; &nbsp;&nbsp; $data[] = array( 'id' =&gt; $i, 
<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'first_name' =&gt; sprintf('first_name_%s', rand(1, 9)), 
<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'last_name' =&gt; sprintf('last_name_%s', rand(1, 9)), 
<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'date' =&gt; date('Y-m-d', rand(0, time()))
<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );
<br />
&nbsp;* }
<br />
&nbsp;* $data = sortDbResult($data, 'date', SORT_DESC, SORT_NUMERIC, 'id');
<br />
&nbsp;* printf('&lt;pre&gt;%s&lt;/pre&gt;', print_r($data, true)); 
<br />
&nbsp;* $data = sortDbResult($data, 'last_name', SORT_ASC, SORT_STRING, 'first_name', SORT_ASC, SORT_STRING);&nbsp; &nbsp;&nbsp; 
<br />
&nbsp;* printf('&lt;pre&gt;%s&lt;/pre&gt;', print_r($data, true)); 
<br />
&nbsp;* ?&gt;
<br />
&nbsp;* &lt;/code&gt;
<br />
&nbsp;* 
<br />
&nbsp;* @return array $data - Sorted data
<br />
&nbsp;*/
<br />
</span><span class="keyword">function </span><span class="default">sortDbResult</span><span class="keyword">(array </span><span class="default">$data </span><span class="comment">/*$name, $order, $mode*/</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$_argList </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$_data </span><span class="keyword">= </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$_argList</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; if (empty(</span><span class="default">$_data</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$_data</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$_max </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$_argList</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$_params </span><span class="keyword">= array();
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$_cols </span><span class="keyword">= array();
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$_rules </span><span class="keyword">= array();
<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$_i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$_i </span><span class="keyword">&lt; </span><span class="default">$_max</span><span class="keyword">; </span><span class="default">$_i </span><span class="keyword">+= </span><span class="default">3</span><span class="keyword">) 
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_name </span><span class="keyword">= (string) </span><span class="default">$_argList</span><span class="keyword">[</span><span class="default">$_i</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$_name</span><span class="keyword">, </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">current</span><span class="keyword">(</span><span class="default">$_data</span><span class="keyword">)))) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; continue;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!isset(</span><span class="default">$_argList</span><span class="keyword">[(</span><span class="default">$_i </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">)]) || </span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$_argList</span><span class="keyword">[(</span><span class="default">$_i </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">)])) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_order </span><span class="keyword">= </span><span class="default">SORT_ASC</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_mode </span><span class="keyword">= </span><span class="default">SORT_REGULAR</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_i </span><span class="keyword">-= </span><span class="default">2</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else if (</span><span class="default">3 </span><span class="keyword">&gt; </span><span class="default">$_argList</span><span class="keyword">[(</span><span class="default">$_i </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">)]) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_order </span><span class="keyword">= </span><span class="default">SORT_ASC</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_mode </span><span class="keyword">= </span><span class="default">$_argList</span><span class="keyword">[(</span><span class="default">$_i </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">)];
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_i</span><span class="keyword">--;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_order </span><span class="keyword">= </span><span class="default">$_argList</span><span class="keyword">[(</span><span class="default">$_i </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">)] == </span><span class="default">SORT_ASC </span><span class="keyword">? </span><span class="default">SORT_ASC </span><span class="keyword">: </span><span class="default">SORT_DESC</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!isset(</span><span class="default">$_argList</span><span class="keyword">[(</span><span class="default">$_i </span><span class="keyword">+ </span><span class="default">2</span><span class="keyword">)]) || </span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$_argList</span><span class="keyword">[(</span><span class="default">$_i </span><span class="keyword">+ </span><span class="default">2</span><span class="keyword">)])) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_mode </span><span class="keyword">= </span><span class="default">SORT_REGULAR</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_i</span><span class="keyword">--;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_mode </span><span class="keyword">= </span><span class="default">$_argList</span><span class="keyword">[(</span><span class="default">$_i </span><span class="keyword">+ </span><span class="default">2</span><span class="keyword">)];
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_mode </span><span class="keyword">= </span><span class="default">$_mode </span><span class="keyword">!= </span><span class="default">SORT_NUMERIC 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">? </span><span class="default">$_argList</span><span class="keyword">[(</span><span class="default">$_i </span><span class="keyword">+ </span><span class="default">2</span><span class="keyword">)] != </span><span class="default">SORT_STRING </span><span class="keyword">? </span><span class="default">SORT_REGULAR </span><span class="keyword">: </span><span class="default">SORT_STRING
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">: </span><span class="default">SORT_NUMERIC</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_rules</span><span class="keyword">[] = array(</span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="default">$_name</span><span class="keyword">, </span><span class="string">'order' </span><span class="keyword">=&gt; </span><span class="default">$_order</span><span class="keyword">, </span><span class="string">'mode' </span><span class="keyword">=&gt; </span><span class="default">$_mode</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$_data </span><span class="keyword">as </span><span class="default">$_k </span><span class="keyword">=&gt; </span><span class="default">$_row</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$_rules </span><span class="keyword">as </span><span class="default">$_rule</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!isset(</span><span class="default">$_cols</span><span class="keyword">[</span><span class="default">$_rule</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">]])) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_cols</span><span class="keyword">[</span><span class="default">$_rule</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">]] = array();
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_params</span><span class="keyword">[] = &amp;</span><span class="default">$_cols</span><span class="keyword">[</span><span class="default">$_rule</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">]];
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_params</span><span class="keyword">[] = </span><span class="default">$_rule</span><span class="keyword">[</span><span class="string">'order'</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_params</span><span class="keyword">[] = </span><span class="default">$_rule</span><span class="keyword">[</span><span class="string">'mode'</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_cols</span><span class="keyword">[</span><span class="default">$_rule</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">]][</span><span class="default">$_k</span><span class="keyword">] = </span><span class="default">$_row</span><span class="keyword">[</span><span class="default">$_rule</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">]];
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$_params</span><span class="keyword">[] = &amp;</span><span class="default">$_data</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">'array_multisort'</span><span class="keyword">, </span><span class="default">$_params</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$_data</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86909""></a>
  <div class="note">
   <strong class="user">oOo at OoO dot com</strong>
   <a href="#86909" class="date">10-Nov-2008 09:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Since the manual doesn't specify so, I want to point out that the SORT_NUMERIC flag does also work correctly if the values are floating point numbers. <br />
Just don't forget to also add the respective SORT_ASC or SORT_DESC flag :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86558""></a>
  <div class="note">
   <strong class="user">matt at idizinc dot com</strong>
   <a href="#86558" class="date">23-Oct-2008 08:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I looked on some forms for an answer to this simple problem and couldn't find one so I came up with a solution that may help in some situations.<br />
<br />
How do you sort an array by a field in that array and resolve numeric ties randomly?<br />
<br />
Code:<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">foreach(</span><span class="default">$list </span><span class="keyword">as </span><span class="default">$temp_list</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp; </span><span class="default">$sort_aux</span><span class="keyword">[] = (</span><span class="default">$temp_list</span><span class="keyword">[</span><span class="string">'column_to_sort_by'</span><span class="keyword">]+(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">, </span><span class="default">9</span><span class="keyword">)/</span><span class="default">10</span><span class="keyword">));<br />
}<br />
</span><span class="default">array_multisort</span><span class="keyword">(</span><span class="default">$sort_aux</span><span class="keyword">, </span><span class="default">SORT_NUMERIC</span><span class="keyword">, </span><span class="default">$list</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Example:<br />
<br />
$list[]=array('name'=&gt;'Tom', 'score'=&gt;3);<br />
$list[]=array('name'=&gt;'Sam', 'score'=&gt;3);<br />
$list[]=array('name'=&gt;'Joey', 'score'=&gt;1);<br />
<br />
Explanation:<br />
I took an existing example found above that shows how to sort an array by one of it's columns/fields.<br />
I just added: "+(rand(1,9)/10)" To randomly add .1 through .9 to their score to resolve the tie. (Obviously this specific example only works if you're sorting by an integer... so you may need to modify it to suit your needs.)<br />
<br />
Hope this helps someone.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86443""></a>
  <div class="note">
   <strong class="user">isp dot php at spspft dot de</strong>
   <a href="#86443" class="date">19-Oct-2008 02:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I would like to report a kind of confusion that arose with the message<br />
<br />
Warning: Call-time pass-by-reference has been deprecated; If you would like to pass it by reference, modify the declaration of array_multisort(). If you would like to enable call-time pass-by-reference, you can set allow_call_time_pass_reference to true in your INI file...<br />
<br />
from a line like this:<br />
<br />
array_multisort (&amp;$keyarr, &amp;$arr );// sort against this keys<br />
<br />
This message is not easily switched off by changing the error reporting level because it's produced at parsinig time -- not execution time.<br />
<br />
I think this message is misleading because the arguments are passed by reference ANYWAY in array_multisort.<br />
<br />
Anybody encountering this message should know that nothing has to be done, except deleting the ampersands (&amp;).<br />
I was tricked by this message because of couse I wanted to have the *sorted* array back. And couldn't find the ini file nor the declaration of array_multisort.<br />
I think in this description of array_multisort the call by reference should be listed in the definition.<br />
<br />
Hope this helps someone</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85166""></a>
  <div class="note">
   <strong class="user">seiffs_at_centrum-dot-cz</strong>
   <a href="#85166" class="date">18-Aug-2008 05:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There have to be two corrections to the php_multisort($data,$keys)<br />
<br />
&nbsp;&nbsp;&nbsp; // Sort Expression<br />
&nbsp;&nbsp;&nbsp; $i=0;<br />
&nbsp;&nbsp;&nbsp; $sort='';&nbsp; //here<br />
&nbsp;&nbsp;&nbsp; foreach ($keys as $k){<br />
&nbsp;&nbsp; &nbsp;&nbsp; if($i&gt;0){$sort.=',';}<br />
&nbsp;&nbsp; &nbsp;&nbsp; $sort.='$cols[\''.$k['key'].'\']'; //and here<br />
&nbsp;&nbsp; &nbsp;&nbsp; if($k['sort']){$sort.=',SORT_'.strtoupper($k['sort']);}<br />
&nbsp;&nbsp; &nbsp;&nbsp; if($k['type']){$sort.=',SORT_'.strtoupper($k['type']);}<br />
&nbsp;&nbsp; &nbsp;&nbsp; $i++;<br />
&nbsp;&nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83117""></a>
  <div class="note">
   <strong class="user">php {dot} net [arrt] sebble.com</strong>
   <a href="#83117" class="date">11-May-2008 11:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was requiring a PHP function a sort my array data as part of an SQL interpreter for PHP arrays. This is the code I came up with. and works wonderfully.
<br />

<br />
I hope this helps somebody. If anyone uses this, let me know what you think, if there are any problems with it...
<br />

<br />
&lt;?
<br />

<br />
##&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ##
<br />
##&nbsp; PHPMultiSort&nbsp; ##
<br />
##&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ##
<br />
// Takes:
<br />
//&nbsp; &nbsp; &nbsp; &nbsp; $data,&nbsp; multidim array
<br />
//&nbsp; &nbsp; &nbsp; &nbsp; $keys,&nbsp; array(array(key=&gt;col1, sort=&gt;desc), array(key=&gt;col2, type=&gt;numeric))
<br />

<br />
function php_multisort($data,$keys){
<br />
&nbsp; 
<br />
&nbsp; 
<br />
&nbsp; 
<br />
&nbsp; // List As Columns
<br />
&nbsp; foreach ($data as $key =&gt; $row) {
<br />
&nbsp;&nbsp;&nbsp; foreach ($keys as $k){
<br />
&nbsp;&nbsp; &nbsp;&nbsp; $cols[$k['key']][$key] = $row[$k['key']];
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp; }
<br />
&nbsp; // List original keys
<br />
&nbsp; $idkeys=array_keys($data);
<br />
&nbsp; // Sort Expression
<br />
&nbsp; $i=0;
<br />
&nbsp; foreach ($keys as $k){
<br />
&nbsp;&nbsp;&nbsp; if($i&gt;0){$sort.=',';}
<br />
&nbsp;&nbsp;&nbsp; $sort.='$cols['.$k['key'].']';
<br />
&nbsp;&nbsp;&nbsp; if($k['sort']){$sort.=',SORT_'.strtoupper($k['sort']);}
<br />
&nbsp;&nbsp;&nbsp; if($k['type']){$sort.=',SORT_'.strtoupper($k['type']);}
<br />
&nbsp;&nbsp;&nbsp; $i++;
<br />
&nbsp; }
<br />
&nbsp; $sort.=',$idkeys';
<br />
&nbsp; // Sort Funct
<br />
&nbsp; $sort='array_multisort('.$sort.');';
<br />
&nbsp; eval($sort);
<br />
&nbsp; // Rebuild Full Array
<br />
&nbsp; foreach($idkeys as $idkey){
<br />
&nbsp;&nbsp;&nbsp; $result[$idkey]=$data[$idkey];
<br />
&nbsp; }
<br />
&nbsp; return $result;
<br />
}
<br />

<br />
###############
<br />

<br />
// Example Data
<br />

<br />
$_DATA['table1'][] = array("name" =&gt; "Sebastian", "age" =&gt; 18, "male" =&gt; true);
<br />
$_DATA['table1'][] = array("name" =&gt; "Lawrence",&nbsp; "age" =&gt; 16, "male" =&gt; true);
<br />
$_DATA['table1'][] = array("name" =&gt; "Olivia",&nbsp; &nbsp; "age" =&gt; 10, "male" =&gt; false);
<br />
$_DATA['table1'][] = array("name" =&gt; "Dad",&nbsp; &nbsp; &nbsp;&nbsp; "age" =&gt; 50, "male" =&gt; true);
<br />
$_DATA['table1'][] = array("name" =&gt; "Mum",&nbsp; &nbsp; &nbsp;&nbsp; "age" =&gt; 40, "male" =&gt; false);
<br />
$_DATA['table1'][] = array("name" =&gt; "Sebastian", "age" =&gt; 56, "male" =&gt; true);
<br />
$_DATA['table1'][] = array("name" =&gt; "Lawrence",&nbsp; "age" =&gt; 19, "male" =&gt; true);
<br />
$_DATA['table1'][] = array("name" =&gt; "Olivia",&nbsp; &nbsp; "age" =&gt; 24, "male" =&gt; false);
<br />
$_DATA['table1'][] = array("name" =&gt; "Dad",&nbsp; &nbsp; &nbsp;&nbsp; "age" =&gt; 10, "male" =&gt; true);
<br />
$_DATA['table1'][] = array("name" =&gt; "Mum",&nbsp; &nbsp; &nbsp;&nbsp; "age" =&gt; 70, "male" =&gt; false);
<br />

<br />
###############
<br />

<br />
$res=php_multisort($_DATA['table1'], array(array('key'=&gt;'name'),array('key'=&gt;'age','sort'=&gt;'desc')))
<br />
var_dump($res);
<br />

<br />
/*
<br />
array(10) {
<br />
&nbsp; [8]=&gt;
<br />
&nbsp; array(3) {
<br />
&nbsp;&nbsp;&nbsp; ["name"]=&gt;
<br />
&nbsp;&nbsp;&nbsp; string(3) "Dad"
<br />
&nbsp;&nbsp;&nbsp; ["age"]=&gt;
<br />
&nbsp;&nbsp;&nbsp; int(10)
<br />
&nbsp;&nbsp;&nbsp; ["male"]=&gt;
<br />
&nbsp;&nbsp;&nbsp; bool(true)
<br />
&nbsp; }
<br />
&nbsp; [3]=&gt;
<br />
&nbsp; array(3) {
<br />
&nbsp;&nbsp;&nbsp; ["name"]=&gt;
<br />
&nbsp;&nbsp;&nbsp; string(3) "Dad"
<br />
&nbsp;&nbsp;&nbsp; ["age"]=&gt;
<br />
&nbsp;&nbsp;&nbsp; int(50)
<br />
&nbsp;&nbsp;&nbsp; ["male"]=&gt;
<br />
&nbsp;&nbsp;&nbsp; bool(true)
<br />
&nbsp; }
<br />
&nbsp; [1]=&gt;
<br />
&nbsp; array(3) {
<br />
&nbsp;&nbsp;&nbsp; ["name"]=&gt;
<br />
&nbsp;&nbsp;&nbsp; string(8) "Lawrence"
<br />
&nbsp;&nbsp;&nbsp; ["age"]=&gt;
<br />
&nbsp;&nbsp;&nbsp; int(16)
<br />
&nbsp;&nbsp;&nbsp; ["male"]=&gt;
<br />
&nbsp;&nbsp;&nbsp; bool(true)
<br />
&nbsp; }
<br />
&nbsp; [6]=&gt;
<br />
&nbsp; array(3) {
<br />
&nbsp;&nbsp;&nbsp; ["name"]=&gt;
<br />
&nbsp;&nbsp;&nbsp; string(8...
<br />
*/
<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82428""></a>
  <div class="note">
   <strong class="user">joopm at hotmail dot com</strong>
   <a href="#82428" class="date">10-Apr-2008 01:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
@ scott at bartoncomputer dot com<br />
<br />
You could also reference the array (if you wanted the original array in the object sorted): <br />
<br />
array_multisort($position, SORT_DESC, &amp;$clsVar-&gt;data);<br />
<br />
Regards, Chr.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79491""></a>
  <div class="note">
   <strong class="user">glenn at freebsd dot nl</strong>
   <a href="#79491" class="date">29-Nov-2007 07:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To sort a nested array by column (key/index):<br />
<br />
Example: two entries in the nested array:<br />
<br />
firstarray[0]['adres'] = "adres1"<br />
firstarray[0]['email'] = "email2"<br />
<br />
firstarray[1]['adres'] = "adres2"<br />
firstarray[1]['email'] = "email1"<br />
<br />
-----------------------------------------<br />
<br />
Without code: output would put adres1/email2 on top<br />
<br />
-----------------------------------------<br />
<br />
foreach($firstarray as $sortarray)<br />
{<br />
$column[] = $sortarray['email'];<br />
array_multisort($column, SORT_ASC, $firstarray);<br />
}<br />
<br />
-----------------------------------------<br />
<br />
With code: output would put adres2/email1 on top</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74912""></a>
  <div class="note">
   <strong class="user">scott at bartoncomputer dot com</strong>
   <a href="#74912" class="date">03-May-2007 07:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I didn't see this noted anywhere, so I figured I'd put in a little comment regarding arrays located inside classes. For instance:<br />
<br />
class abc<br />
{<br />
&nbsp;&nbsp; var $data;<br />
}<br />
<br />
The following code does not act as expected:<br />
<br />
$clsVar =&amp; new abc();<br />
<br />
foreach ($clsVar-&gt;data as $key =&gt; $row) <br />
{<br />
&nbsp;&nbsp; $position[$key]&nbsp; = $key;&nbsp; &nbsp; &nbsp; &nbsp; <br />
}<br />
<br />
array_multisort($position, SORT_DESC, $clsVar-&gt;data);<br />
<br />
While I realize this could much easily be acheived using ksort(), this is merely a much more simple example of this behaviour. The exerpt above comes from a much more complicated sort using multi-scripted arrays.<br />
<br />
Anyway the only way I could find to get around the behaviour of multisort not sorting the referenced class-array was to make a copy of it as below:<br />
<br />
$clsVar =&amp; new abc();<br />
$newData = $clsVar-&gt;data;<br />
<br />
foreach ($newData as $key =&gt; $row) <br />
{<br />
&nbsp;&nbsp; $position[$key]&nbsp; = $key;&nbsp; &nbsp; &nbsp; &nbsp; <br />
}<br />
<br />
array_multisort($position, SORT_DESC, $newData);<br />
<br />
Now newData will contain the sorted array as expected.&nbsp; <br />
<br />
Hopefully this helps someone else!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74402""></a>
  <div class="note">
   
   <a href="#74402" class="date">10-Apr-2007 12:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; $strDeger </span><span class="keyword">= </span><span class="string">'aaaa|bbbb|cccc'</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arrBol </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'|'</span><span class="keyword">,</span><span class="default">$strDeger</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_multisort</span><span class="keyword">(</span><span class="default">$arrBol</span><span class="keyword">, </span><span class="default">SORT_DESC</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$arrBol</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$arrBol</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">].</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73525""></a>
  <div class="note">
   <strong class="user">vermon7</strong>
   <a href="#73525" class="date">27-Feb-2007 10:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When using array_multisort() on copies of arrays, it is changing all the copies, even if you modify the copy before using array_multisort().<br />
<br />
I've avoided this bug by serializing a copy of array before calling array_multisort, and unserializg it after array_multisort() Look at the code:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$records_copy </span><span class="keyword">= </span><span class="default">serialize</span><span class="keyword">(</span><span class="default">$records</span><span class="keyword">) ;<br />
</span><span class="default">array_multisort </span><span class="keyword">( </span><span class="default">$records</span><span class="keyword">[</span><span class="default">$sort_field</span><span class="keyword">] , </span><span class="default">$records</span><span class="keyword">[</span><span class="default">$sort2_field</span><span class="keyword">] ) ;<br />
</span><span class="default">$records_copy </span><span class="keyword">= </span><span class="default">unserialize</span><span class="keyword">(</span><span class="default">$records_copy</span><span class="keyword">) ; <br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73498""></a>
  <div class="note">
   <strong class="user">Jon L. -- intel352 [AT] gmail [DOT] com</strong>
   <a href="#73498" class="date">26-Feb-2007 05:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is my solution for a dynamic multisort, using POST values. This doesn't account for a need to sort by multiple columns at once, but could be modified for that purpose.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/** <br />
&nbsp;&nbsp;&nbsp; * @desc You really should validate the posted sort direction against a list of valid possibilities.<br />
&nbsp;&nbsp;&nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Options are SORT_ASC, SORT_DESC, etc, as shown in the documentation for array_multisort<br />
&nbsp;&nbsp;&nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$sort</span><span class="keyword">[</span><span class="string">'direction'</span><span class="keyword">] = </span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'sort_direction'</span><span class="keyword">] ? </span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'sort_direction'</span><span class="keyword">] : </span><span class="string">'SORT_ASC'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$sort</span><span class="keyword">[</span><span class="string">'field'</span><span class="keyword">]&nbsp; &nbsp; &nbsp;&nbsp; = </span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'sort_field'</span><span class="keyword">] ? </span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'sort_field'</span><span class="keyword">] : </span><span class="string">'value'</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array_to_sort </span><span class="keyword">= array();&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array_to_sort</span><span class="keyword">[</span><span class="string">'TestCase1'</span><span class="keyword">] = array(</span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="string">'Test1'</span><span class="keyword">,</span><span class="string">'value'</span><span class="keyword">=&gt;</span><span class="string">'218'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array_to_sort</span><span class="keyword">[</span><span class="string">'TestCase2'</span><span class="keyword">] = array(</span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="string">'Test2'</span><span class="keyword">,</span><span class="string">'value'</span><span class="keyword">=&gt;</span><span class="string">'10'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array_to_sort</span><span class="keyword">[</span><span class="string">'TestCase3'</span><span class="keyword">] = array(</span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="string">'Test3'</span><span class="keyword">,</span><span class="string">'value'</span><span class="keyword">=&gt;</span><span class="string">'64'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp;&nbsp; * @desc Build columns using the values, for sorting in php<br />
&nbsp;&nbsp;&nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$sort_arr </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$array_to_sort </span><span class="keyword">AS </span><span class="default">$uniqid </span><span class="keyword">=&gt; </span><span class="default">$row</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$row </span><span class="keyword">AS </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sort_arr</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="default">$uniqid</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; print </span><span class="string">'&lt;b&gt;Before sorting&lt;/b&gt;: &lt;br&gt; &lt;pre&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$array_to_sort</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; print </span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$sort</span><span class="keyword">[</span><span class="string">'direction'</span><span class="keyword">]){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_multisort</span><span class="keyword">(</span><span class="default">$sort_arr</span><span class="keyword">[</span><span class="default">$sort</span><span class="keyword">[</span><span class="string">'field'</span><span class="keyword">]], </span><span class="default">constant</span><span class="keyword">(</span><span class="default">$sort</span><span class="keyword">[</span><span class="string">'direction'</span><span class="keyword">]), </span><span class="default">$array_to_sort</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; print </span><span class="string">'&lt;b&gt;After sorting&lt;/b&gt;: &lt;br&gt; &lt;pre&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$array_to_sort</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; print </span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
</span><span class="default">?&gt;<br />
</span><br />
This example prints out:<br />
<br />
Before sorting:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [TestCase1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; Test1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [value] =&gt; 218<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [TestCase2] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; Test2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [value] =&gt; 10<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [TestCase3] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; Test3<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [value] =&gt; 64<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)<br />
<br />
After sorting:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [TestCase2] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; Test2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [value] =&gt; 10<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [TestCase3] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; Test3<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [value] =&gt; 64<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [TestCase1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; Test1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [value] =&gt; 218<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71492""></a>
  <div class="note">
   
   <a href="#71492" class="date">01-Dec-2006 03:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
casting the parameter arrays for array_multisort seem to make the sorting ineffective?<br />
<br />
for example:-<br />
&lt;?<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach((array)$report_files as $report_files_i)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $file_stat = stat($report_files_i);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $report_files_x[] = array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 'filename'&nbsp; &nbsp; &nbsp; =&gt; $report_files_i<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ,'basename'&nbsp; &nbsp;&nbsp; =&gt; basename($report_files_i)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ,'ctime'&nbsp; &nbsp; &nbsp; &nbsp; =&gt; date("D, M j, Y",$file_stat['ctime'])<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ,'size'&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; =&gt; $file_stat['size']<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; );<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $basename_i[] = strtolower(basename($report_files_i)); // case insensitive<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array_multisort($basename_i, SORT_ASC, $report_files_x);<br />
?&gt;<br />
The above works but if you change the last time to :-<br />
&lt;?<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array_multisort((array)$basename_i, SORT_ASC, (array)$report_files_x);<br />
?&gt;<br />
...adding the (array) cast doesn't sort the main array ...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69656""></a>
  <div class="note">
   <strong class="user">brettz9 throu gh yah</strong>
   <a href="#69656" class="date">14-Sep-2006 09:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Often, one may have a group of arrays which have parallel data that need to be kept associated with each other (e.g., the various attribute values of a group of elements might be stored in their own arrays). Using array_multisort as is, by specifying additional fields, it is possible, as in the documentation example cited below, that this association will be lost. <br />
<br />
To take this example set of data from the documentation:<br />
<span class="default">&lt;?php<br />
$ar1 </span><span class="keyword">= array(</span><span class="string">"10"</span><span class="keyword">, </span><span class="default">100</span><span class="keyword">, </span><span class="default">100</span><span class="keyword">, </span><span class="string">"a"</span><span class="keyword">);<br />
</span><span class="default">$ar2 </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="string">"2"</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
The example goes on to sort it this way:<br />
<span class="default">&lt;?php<br />
array_multisort</span><span class="keyword">(</span><span class="default">$ar1</span><span class="keyword">, </span><span class="default">$ar2</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
In this case, although the "10" remains associated with the first '1' after being sorted, the "2" and '3' are reversed from their original order.<br />
<br />
In order to sort by one field only (yet still have the other array(s) being correspondingly sorted), one can use array_keys (which makes an array out of the keys) to ensure that no further sub-sorting is performed. This works because array_keys is making an array for which no duplicates can exist (since keys will be unique), and thus, the subsequent fields will have no relevance as far as subsorting.<br />
<br />
So, using the above data, we can perform this sort instead:<br />
<span class="default">&lt;?php<br />
$ar3 </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$ar1</span><span class="keyword">);<br />
</span><span class="default">array_multisort</span><span class="keyword">(</span><span class="default">$ar1</span><span class="keyword">, </span><span class="default">$ar3</span><span class="keyword">, </span><span class="default">$ar2</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
which, when $ar1 and $ar2 are dumped gives:<br />
<br />
array(4) {<br />
&nbsp; [0]=&gt; string(2) "10"<br />
&nbsp; [1]=&gt; string(1) "a"<br />
&nbsp; [2]=&gt; int(100)<br />
&nbsp; [3]=&gt; int(100)<br />
}<br />
array(4) {<br />
&nbsp; [0]=&gt;&nbsp; int(1)<br />
&nbsp; [1]=&gt;&nbsp; int(1)<br />
&nbsp; [2]=&gt;&nbsp; int(3)<br />
&nbsp; [3]=&gt;&nbsp; string(1) "2"<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69386""></a>
  <div class="note">
   <strong class="user">ricardo</strong>
   <a href="#69386" class="date">04-Sep-2006 02:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi,<br />
<br />
Modded the function from KES,<br />
goals:<br />
- Object oriented<br />
- string comparision using naturalordening<br />
<br />
code:<br />
&lt;?<br />
class HtmlTable{<br />
&nbsp;&nbsp;&nbsp; var $sortorder;<br />
&nbsp;&nbsp;&nbsp; var $rows;<br />
<br />
//row adding stuf and constructor removed<br />
<br />
&nbsp;&nbsp;&nbsp; function sort($sortorder){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(is_array($sortorder)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;sortorder=$sortorder;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; usort($this-&gt;rows,array(&amp;$this,'sort_compare'));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; function sort_compare($a,$b){//sort function<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $result=0;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach($this-&gt;sortorder as $key=&gt;$value){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $result=strnatcmp($a[$key],$b[$key]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if($result==0)continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if($value=='desc')$result=$result*-1;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $result;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69241""></a>
  <div class="note">
   <strong class="user">LPChip</strong>
   <a href="#69241" class="date">28-Aug-2006 03:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was looking for a way to dynamically multisort my array.<br />
<br />
By dynamically I mean that its not static what column will be sorted and if its ASC or DESC, and the ability to have more than one sorts.<br />
<br />
This is the way a database would allow you to do.<br />
<br />
The best way to dynamically do this, is by using eval.<br />
<br />
The code below is partly what I used. (eg, I left out where the arrays were made and stuff, but the important part is here.)<br />
<br />
&lt;?<br />
<br />
$orderby_arr = array("col1 ASC";"col2 DESC");<br />
<br />
// prepare multisort using eval<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $eval_sort&nbsp; = "array_multisort(";<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ($orderby !="") {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $orderby_arr_c = count($orderby_arr);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for ($orderby_walk=0; $orderby_walk &lt; $orderby_arr_c; $orderby_walk++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $pos = strpos($orderby_arr[$orderby_walk], " ");<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $orderby_col = substr($orderby_arr[$orderby_walk], 0, $pos);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $orderby_type = substr($orderby_arr[$orderby_walk], $pos+1);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $eval_sort .= "\$this-&gt;OrderBy[$orderby_col]" . ", SORT_$orderby_type,";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $eval_sort .= " \$this-&gt;Current_Query);";<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // if there's an array, sort it.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ($this-&gt;Current_Query_m != -1) eval($eval_sort);<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68689""></a>
  <div class="note">
   <strong class="user">RQuadling at GMail dot com</strong>
   <a href="#68689" class="date">07-Aug-2006 02:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Extending KES's example (<a href="http://www.php.net/manual/en/function.array-multisort.php#68452" rel="nofollow" target="_blank">http://www.php.net/manual/en/function.array-multisort.php#68452</a>) to look like array_multisort().
<br />

<br />
NOTE: Fully commented code is available at <a href="http://rquadling.php1h.com (sorry for the ads" rel="nofollow" target="_blank">http://rquadling.php1h.com (sorry for the ads</a>).
<br />

<br />
The syntax is the same as array_multisort().
<br />

<br />
You also have 3 additional parameters you can use:
<br />

<br />
AMC_SORT_STRING_CASELESS to sort the strings case insensitively.
<br />
AMC_LOSE_ASSOCIATION (the default behaviour) to lose the associations for the array.
<br />
AMC_KEEP_ASSOCIATION to keep the associations for the array.
<br />

<br />
Other than that, these function work together JUST like array_multisort but sorts using column(s) without the need to first extract the columns into individual arrays.
<br />

<br />
<span class="default">&lt;?php
<br />
define </span><span class="keyword">(</span><span class="string">'AMC_SORT_STRING_CASELESS'</span><span class="keyword">, </span><span class="default">SORT_STRING </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">);
<br />
</span><span class="default">define </span><span class="keyword">(</span><span class="string">'AMC_LOSE_ASSOCIATION'</span><span class="keyword">, </span><span class="default">1001</span><span class="keyword">);
<br />
</span><span class="default">define </span><span class="keyword">(</span><span class="string">'AMC_KEEP_ASSOCIATION'</span><span class="keyword">, </span><span class="default">1002</span><span class="keyword">);
<br />
</span><span class="default">define </span><span class="keyword">(</span><span class="string">'AMC_SORT_ORDER'</span><span class="keyword">, </span><span class="default">1003</span><span class="keyword">);
<br />
</span><span class="default">define </span><span class="keyword">(</span><span class="string">'AMC_SORT_TYPE'</span><span class="keyword">, </span><span class="default">1004</span><span class="keyword">);
<br />

<br />
function </span><span class="default">array_multisort_column</span><span class="keyword">(array &amp;</span><span class="default">$a_data</span><span class="keyword">, </span><span class="default">$m_mixed1</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$a_Args </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i_Args </span><span class="keyword">= </span><span class="default">func_num_args</span><span class="keyword">();
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'a_AMC_ordering'</span><span class="keyword">] = array();
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$a_Columns </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">reset</span><span class="keyword">(</span><span class="default">$a_data</span><span class="keyword">));
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$b_KeepAssociation </span><span class="keyword">= </span><span class="default">False</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i_Arg </span><span class="keyword">= </span><span class="default">1 </span><span class="keyword">; </span><span class="default">$i_Arg </span><span class="keyword">&lt; </span><span class="default">$i_Args </span><span class="keyword">; )
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$a_Args</span><span class="keyword">[</span><span class="default">$i_Arg</span><span class="keyword">], </span><span class="default">$a_Columns</span><span class="keyword">))
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$s_Column </span><span class="keyword">= </span><span class="default">$a_Args</span><span class="keyword">[</span><span class="default">$i_Arg</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'a_AMC_ordering'</span><span class="keyword">][</span><span class="default">$a_Args</span><span class="keyword">[</span><span class="default">$i_Arg</span><span class="keyword">]] = array
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">AMC_SORT_ORDER </span><span class="keyword">=&gt; </span><span class="default">SORT_ASC</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">AMC_SORT_TYPE </span><span class="keyword">=&gt; </span><span class="default">SORT_REGULAR</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; );
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; isset(</span><span class="default">$a_Args</span><span class="keyword">[</span><span class="default">$i_Arg </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">]) &amp;&amp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">in_array
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">(
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a_Args</span><span class="keyword">[</span><span class="default">$i_Arg </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">], 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">AMC_KEEP_ASSOCIATION</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">AMC_LOSE_ASSOCIATION</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">AMC_SORT_STRING_CASELESS</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">SORT_ASC</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">SORT_DESC
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; SORT_NUMERIC</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">SORT_REGULAR</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">SORT_STRING</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ), 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">True
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$a_Args</span><span class="keyword">[</span><span class="default">$i_Arg </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">], array(</span><span class="default">SORT_ASC</span><span class="keyword">, </span><span class="default">SORT_DESC</span><span class="keyword">), </span><span class="default">True</span><span class="keyword">))
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'a_AMC_ordering'</span><span class="keyword">][</span><span class="default">$s_Column</span><span class="keyword">][</span><span class="default">AMC_SORT_ORDER</span><span class="keyword">] = </span><span class="default">$a_Args</span><span class="keyword">[</span><span class="default">$i_Arg </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$a_Args</span><span class="keyword">[</span><span class="default">$i_Arg </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">], array(</span><span class="default">SORT_REGULAR</span><span class="keyword">, </span><span class="default">SORT_NUMERIC</span><span class="keyword">, </span><span class="default">SORT_STRING</span><span class="keyword">, </span><span class="default">AMC_SORT_STRING_CASELESS</span><span class="keyword">), </span><span class="default">True</span><span class="keyword">))
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'a_AMC_ordering'</span><span class="keyword">][</span><span class="default">$s_Column</span><span class="keyword">][</span><span class="default">AMC_SORT_TYPE</span><span class="keyword">] = </span><span class="default">$a_Args</span><span class="keyword">[</span><span class="default">$i_Arg </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">AMC_KEEP_ASSOCIATION </span><span class="keyword">== </span><span class="default">$a_Args</span><span class="keyword">[</span><span class="default">$i_Arg </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">])
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$b_KeepAssociation </span><span class="keyword">= </span><span class="default">True</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ++</span><span class="default">$i_Arg</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }&nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ++</span><span class="default">$i_Arg</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$s_Sorter </span><span class="keyword">= (</span><span class="default">$b_KeepAssociation </span><span class="keyword">? </span><span class="string">'uasort' </span><span class="keyword">: </span><span class="string">'usort'</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$b_Result </span><span class="keyword">= </span><span class="default">$s_Sorter</span><span class="keyword">(</span><span class="default">$a_data</span><span class="keyword">, </span><span class="string">'array_multisort_column_cmp'</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; unset(</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'a_AMC_ordering'</span><span class="keyword">]);
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$b_Result</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
function </span><span class="default">array_multisort_column_cmp</span><span class="keyword">(array &amp;</span><span class="default">$a_left</span><span class="keyword">, array &amp;</span><span class="default">$a_right</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i_Result </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'a_AMC_ordering'</span><span class="keyword">] as </span><span class="default">$s_Column </span><span class="keyword">=&gt; </span><span class="default">$a_ColumnData</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; switch (</span><span class="default">$a_ColumnData</span><span class="keyword">[</span><span class="default">AMC_SORT_TYPE</span><span class="keyword">])
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="default">SORT_NUMERIC </span><span class="keyword">:
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i_ColumnCompareResult </span><span class="keyword">= 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ((</span><span class="default">intval</span><span class="keyword">(</span><span class="default">$a_left</span><span class="keyword">[</span><span class="default">$s_Column</span><span class="keyword">]) == </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$a_right</span><span class="keyword">[</span><span class="default">$s_Column</span><span class="keyword">])) 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ? 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">: 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ((</span><span class="default">intval</span><span class="keyword">(</span><span class="default">$a_left</span><span class="keyword">[</span><span class="default">$s_Column</span><span class="keyword">]) &lt; </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$a_right</span><span class="keyword">[</span><span class="default">$s_Column</span><span class="keyword">])) 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ? 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; -</span><span class="default">1 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">: 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; );
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="default">SORT_STRING </span><span class="keyword">:
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i_ColumnCompareResult </span><span class="keyword">= </span><span class="default">strcmp</span><span class="keyword">((string)</span><span class="default">$a_left</span><span class="keyword">[</span><span class="default">$s_Column</span><span class="keyword">], (string)</span><span class="default">$a_right</span><span class="keyword">[</span><span class="default">$s_Column</span><span class="keyword">]);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="default">AMC_SORT_STRING_CASELESS </span><span class="keyword">:
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i_ColumnCompareResult </span><span class="keyword">= </span><span class="default">strcasecmp</span><span class="keyword">((string)</span><span class="default">$a_left</span><span class="keyword">[</span><span class="default">$s_Column</span><span class="keyword">], (string)</span><span class="default">$a_right</span><span class="keyword">[</span><span class="default">$s_Column</span><span class="keyword">]);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="default">SORT_REGULAR </span><span class="keyword">:
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; default :
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i_ColumnCompareResult </span><span class="keyword">= 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ((</span><span class="default">$a_left</span><span class="keyword">[</span><span class="default">$s_Column</span><span class="keyword">] == </span><span class="default">$a_right</span><span class="keyword">[</span><span class="default">$s_Column</span><span class="keyword">]) 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ? 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">: 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ((</span><span class="default">$a_left</span><span class="keyword">[</span><span class="default">$s_Column</span><span class="keyword">] &lt; </span><span class="default">$a_right</span><span class="keyword">[</span><span class="default">$s_Column</span><span class="keyword">]) 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ? 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; -</span><span class="default">1 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">: 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; );
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">0 </span><span class="keyword">== </span><span class="default">$i_ColumnCompareResult</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; continue;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i_Result </span><span class="keyword">= </span><span class="default">$i_ColumnCompareResult </span><span class="keyword">* ((</span><span class="default">$a_ColumnData</span><span class="keyword">[</span><span class="default">AMC_SORT_ORDER</span><span class="keyword">] == </span><span class="default">SORT_DESC</span><span class="keyword">) ? -</span><span class="default">1 </span><span class="keyword">: </span><span class="default">1</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; break;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$i_Result</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68452""></a>
  <div class="note">
   <strong class="user">KES http://kes.net.ua</strong>
   <a href="#68452" class="date">27-Jul-2006 02:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
&lt;?<br />
//sort by second column then first one<br />
$orderBy=array('0'=&gt;'desc', 'first'=&gt;'asc');<br />
<br />
function KES_cmp($a, $b) {<br />
&nbsp; global $orderBy;<br />
&nbsp; $result= 0;<br />
&nbsp; foreach( $orderBy as $key =&gt; $value ) {<br />
&nbsp;&nbsp;&nbsp; if( $a[$key] == $b[$key] ) continue;<br />
&nbsp;&nbsp;&nbsp; $result= ($a[$key] &lt; $b[$key])? -1 : 1;<br />
&nbsp;&nbsp;&nbsp; if( $value=='desc' ) $result= -$result;<br />
&nbsp;&nbsp;&nbsp; break;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; return $result;<br />
&nbsp; }<br />
<br />
$result= array();<br />
$result[]= array( 'first'=&gt;6, 2);<br />
$result[]= array( 'first'=&gt;3, 2);<br />
$result[]= array( 'first'=&gt;1, 3);<br />
$result[]= array( 'first'=&gt;1, 2);<br />
$result[]= array( 'first'=&gt;6, 1);<br />
<br />
print "&lt;b&gt;Source&lt;/b&gt;";<br />
print_r($result);<br />
<br />
usort($result, 'KES_cmp');<br />
print "&lt;b&gt;Result&lt;/b&gt;";<br />
print_r($result);<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68450""></a>
  <div class="note">
   <strong class="user">KES</strong>
   <a href="#68450" class="date">27-Jul-2006 01:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It is very handy to have function, which sort like this:<br />
<br />
$arrayToSort[]= array(0 =&gt; ".",&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; "type" =&gt; "dir");<br />
$arrayToSort[]= array(0 =&gt; "qf",&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "type" =&gt; "file");<br />
$arrayToSort[]= array(0 =&gt; "..",&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "type" =&gt; "dir");<br />
$arrayToSort[]= array(0 =&gt; "text.txt",&nbsp; &nbsp; &nbsp; "type" =&gt; "file");<br />
$arrayToSort[]= array(0 =&gt; "hello",&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "type" =&gt; "dir");<br />
<br />
//first sort by the column 'type', then sort by the column '0'<br />
$howToSort= array('type'=&gt; 'asc', 0=&gt; 'desc');<br />
<br />
multisort($arrayToSort, $howToSort);<br />
<br />
The result:<br />
0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; |&nbsp; &nbsp; &nbsp;&nbsp; type<br />
----------------------------<br />
.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; | dir<br />
..&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; | dir<br />
hello&nbsp; &nbsp; &nbsp;&nbsp; | dir<br />
text.txt&nbsp; &nbsp; | file<br />
qf&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | file</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="63516""></a>
  <div class="note">
   <strong class="user">scott - evolove - net - work it out</strong>
   <a href="#63516" class="date">23-Mar-2006 04:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A very simple way to sort an array of associative arrays by some value is to use usort.<br />
<br />
I needed to sort an array of 20 data structures by their 'distance' value:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [blahblah] =&gt; blahblah<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [distance] =&gt; 6<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; you get the idea....<br />
<br />
Here's the code:<br />
<br />
--------------------<br />
usort($results, "distributor_compare");<br />
<br />
/**<br />
&nbsp;* usort callback<br />
&nbsp;*/<br />
function distributor_compare($a, $b) {<br />
&nbsp;&nbsp;&nbsp; $adist = intval($a['distance']);<br />
&nbsp;&nbsp;&nbsp; $bdist = intval($b['distance']);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if ($adist == $bdist) {<br />
&nbsp;&nbsp; &nbsp; return 0;<br />
&nbsp;&nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; return ($adist &lt; $bdist) ? -1 : 1;&nbsp; &nbsp; <br />
}<br />
--------------------</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="61976""></a>
  <div class="note">
   <strong class="user">peter dot graham at tcat dot ac dot uk</strong>
   <a href="#61976" class="date">16-Feb-2006 04:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Many thanks to ?AlberT at SuperAlberT dot it? for his useful and elegant function. I have made some small alterations so it doesn?t use pass-by-reference as this throws up warnings in newer versions of php4.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">array_key_multi_sort</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$l </span><span class="keyword">, </span><span class="default">$f</span><span class="keyword">=</span><span class="string">'strnatcasecmp'</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$a, $b'</span><span class="keyword">, </span><span class="string">"return </span><span class="default">$f</span><span class="string">(\$a['</span><span class="default">$l</span><span class="string">'], \$b['</span><span class="default">$l</span><span class="string">']);"</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; return(</span><span class="default">$arr</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="61334""></a>
  <div class="note">
   <strong class="user">mail at theopensource dot com</strong>
   <a href="#61334" class="date">31-Jan-2006 08:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wanted to share with you a function that I created to make the array_multisort process much easier for myself... There was some interesting things that I encountered and I will post that in the comments.<br />
<br />
I created this function so that all I have to do is tell it what column I want to sort through in a one level deep multidimensional array.&nbsp; You can Try this code in your browser to view the results<br />
<br />
ex/<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">//Here is an array example<br />
</span><span class="default">$test</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="string">"David"</span><span class="keyword">;<br />
</span><span class="default">$test</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'age'</span><span class="keyword">] = </span><span class="default">28</span><span class="keyword">;<br />
</span><span class="default">$test</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="string">"Dennis"</span><span class="keyword">;<br />
</span><span class="default">$test</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'age'</span><span class="keyword">] = </span><span class="default">23</span><span class="keyword">;<br />
</span><span class="default">$test</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="string">"Joseph"</span><span class="keyword">;<br />
</span><span class="default">$test</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="string">'age'</span><span class="keyword">] = </span><span class="default">42</span><span class="keyword">;<br />
<br />
</span><span class="comment">//Here is the Function<br />
<br />
</span><span class="keyword">function </span><span class="default">sortmddata</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$by</span><span class="keyword">, </span><span class="default">$order</span><span class="keyword">, </span><span class="default">$type</span><span class="keyword">){<br />
<br />
</span><span class="comment">//$array: the array you want to sort<br />
//$by: the associative array name that is one level deep<br />
////example: name<br />
//$order: ASC or DESC<br />
//$type: num or str<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
</span><span class="default">$sortby </span><span class="keyword">= </span><span class="string">"sort</span><span class="default">$by</span><span class="string">"</span><span class="keyword">; </span><span class="comment">//This sets up what you are sorting by<br />
<br />
</span><span class="default">$firstval </span><span class="keyword">= </span><span class="default">current</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); </span><span class="comment">//Pulls over the first array<br />
<br />
</span><span class="default">$vals </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$firstval</span><span class="keyword">); </span><span class="comment">//Grabs the associate Arrays<br />
<br />
</span><span class="keyword">foreach (</span><span class="default">$vals </span><span class="keyword">as </span><span class="default">$init</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$keyname </span><span class="keyword">= </span><span class="string">"sort</span><span class="default">$init</span><span class="string">"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; $</span><span class="default">$keyname </span><span class="keyword">= array();<br />
}<br />
</span><span class="comment">//This was strange because I had problems adding<br />
//Multiple arrays into a variable variable<br />
//I got it to work by initializing the variable variables as arrays<br />
//Before I went any further<br />
<br />
</span><span class="keyword">foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$row</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; <br />
foreach (</span><span class="default">$vals </span><span class="keyword">as </span><span class="default">$names</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$keyname </span><span class="keyword">= </span><span class="string">"sort</span><span class="default">$names</span><span class="string">"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$test </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$test</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$row</span><span class="keyword">[</span><span class="default">$names</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; $</span><span class="default">$keyname </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">($</span><span class="default">$keyname</span><span class="keyword">,</span><span class="default">$test</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
}<br />
<br />
}<br />
<br />
</span><span class="comment">//This will create dynamic mini arrays so that I can perform<br />
//the array multisort with no problem<br />
//Notice the temp array... I had to do that because I <br />
//cannot assign additional array elements to a <br />
//varaiable variable&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
<br />
</span><span class="keyword">if (</span><span class="default">$order </span><span class="keyword">== </span><span class="string">"DESC"</span><span class="keyword">){&nbsp; &nbsp; <br />
if (</span><span class="default">$type </span><span class="keyword">== </span><span class="string">"num"</span><span class="keyword">){<br />
</span><span class="default">array_multisort</span><span class="keyword">($</span><span class="default">$sortby</span><span class="keyword">,</span><span class="default">SORT_DESC</span><span class="keyword">, </span><span class="default">SORT_NUMERIC</span><span class="keyword">,</span><span class="default">$array</span><span class="keyword">);<br />
} else {<br />
</span><span class="default">array_multisort</span><span class="keyword">($</span><span class="default">$sortby</span><span class="keyword">,</span><span class="default">SORT_DESC</span><span class="keyword">, </span><span class="default">SORT_STRING</span><span class="keyword">,</span><span class="default">$array</span><span class="keyword">);<br />
}<br />
} else {<br />
if (</span><span class="default">$type </span><span class="keyword">== </span><span class="string">"num"</span><span class="keyword">){<br />
</span><span class="default">array_multisort</span><span class="keyword">($</span><span class="default">$sortby</span><span class="keyword">,</span><span class="default">SORT_ASC</span><span class="keyword">, </span><span class="default">SORT_NUMERIC</span><span class="keyword">,</span><span class="default">$array</span><span class="keyword">);<br />
} else {<br />
</span><span class="default">array_multisort</span><span class="keyword">($</span><span class="default">$sortby</span><span class="keyword">,</span><span class="default">SORT_ASC</span><span class="keyword">, </span><span class="default">SORT_STRING</span><span class="keyword">,</span><span class="default">$array</span><span class="keyword">);<br />
}<br />
}<br />
<br />
</span><span class="comment">//This just goed through and asks the additional arguments<br />
//What they are doing and are doing variations of<br />
//the multisort<br />
<br />
</span><span class="keyword">return </span><span class="default">$array</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">//Now to test it<br />
<br />
</span><span class="default">$test </span><span class="keyword">= </span><span class="default">sortmddata</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">,</span><span class="string">'age'</span><span class="keyword">,</span><span class="string">'ASC'</span><span class="keyword">,</span><span class="string">'num'</span><span class="keyword">);<br />
<br />
</span><span class="default">print_r </span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">);<br />
<br />
</span><span class="comment">//This will return<br />
//Array ( <br />
//[0] =&gt; Array ([name] =&gt; Dennis [age] =&gt; 23 )<br />
//[1] =&gt; Array ( [name] =&gt; David [age] =&gt; 28 )<br />
//[2] =&gt; Array ( [name] =&gt; Joseph [age] =&gt; 42 )<br />
//)<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
There you go... please let me know what you think if you like.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60401""></a>
  <div class="note">
   <strong class="user">php a-t-the-r-a-t-e chir.ag</strong>
   <a href="#60401" class="date">05-Jan-2006 11:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Re: phu at kungphu, 19-Dec-2005 11:36 <br />
<br />
asort($test) will not let me specify which columns to sort ASC/DESC, NUMERIC/STRING etc.<br />
<br />
I have data similar to what you specified. Now I want to sort $test by points DESC and name ASC. Here's my function that does it, based on suggestions on this page. It uses array_multisort (and hence acts just like it: preserving string-keys etc.)<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp; </span><span class="keyword">function </span><span class="default">arrayColumnSort</span><span class="keyword">()<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$n </span><span class="keyword">= </span><span class="default">func_num_args</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ar </span><span class="keyword">= </span><span class="default">func_get_arg</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$ar</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$n</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$col</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">func_get_arg</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$ar </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$col </span><span class="keyword">as </span><span class="default">$kkey </span><span class="keyword">=&gt; </span><span class="default">$vval</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$vval</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ${</span><span class="string">"subar</span><span class="default">$kkey</span><span class="string">"</span><span class="keyword">}[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">[</span><span class="default">$vval</span><span class="keyword">];<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arv </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$col </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$arv</span><span class="keyword">[] = (</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">) ? ${</span><span class="string">"subar</span><span class="default">$key</span><span class="string">"</span><span class="keyword">} : </span><span class="default">$val</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arv</span><span class="keyword">[] = </span><span class="default">$ar</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">"array_multisort"</span><span class="keyword">, </span><span class="default">$arv</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$ar</span><span class="keyword">;<br />
&nbsp; }<br />
<br />
&nbsp; </span><span class="default">$test</span><span class="keyword">[</span><span class="string">"pete"</span><span class="keyword">][</span><span class="string">'points'</span><span class="keyword">]=</span><span class="default">1</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$test</span><span class="keyword">[</span><span class="string">"pete"</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">]=</span><span class="string">'Peter'</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">$test</span><span class="keyword">[</span><span class="string">"mike"</span><span class="keyword">][</span><span class="string">'points'</span><span class="keyword">]=</span><span class="default">5</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$test</span><span class="keyword">[</span><span class="string">"mike"</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">]=</span><span class="string">'Mike'</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">$test</span><span class="keyword">[</span><span class="string">"zoo"</span><span class="keyword">][</span><span class="string">'points'</span><span class="keyword">]=</span><span class="default">2</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$test</span><span class="keyword">[</span><span class="string">"zoo"</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">]=</span><span class="string">'John Zoo'</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">$test</span><span class="keyword">[</span><span class="string">"ab"</span><span class="keyword">][</span><span class="string">'points'</span><span class="keyword">]=</span><span class="default">2</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$test</span><span class="keyword">[</span><span class="string">"ab"</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">]=</span><span class="string">'John Ab'</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">$test1 </span><span class="keyword">= </span><span class="default">$test</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">asort</span><span class="keyword">(</span><span class="default">$test1</span><span class="keyword">);<br />
<br />
&nbsp; </span><span class="default">$test2 </span><span class="keyword">= </span><span class="default">arrayColumnSort</span><span class="keyword">(</span><span class="string">"points"</span><span class="keyword">, </span><span class="default">SORT_DESC</span><span class="keyword">, </span><span class="default">SORT_NUMERIC</span><span class="keyword">, </span><span class="string">"name"</span><span class="keyword">, </span><span class="default">SORT_ASC</span><span class="keyword">, </span><span class="default">SORT_STRING</span><span class="keyword">, </span><span class="default">$test</span><span class="keyword">);<br />
<br />
&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$test1</span><span class="keyword">); </span><span class="comment">// asort<br />
&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$test2</span><span class="keyword">); </span><span class="comment">// arrayColumnSort<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Output from asort:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [pete] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [points] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; Peter<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [ab] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [points] =&gt; 2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; John Ab<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [zoo] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [points] =&gt; 2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; John Zoo<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [mike] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [points] =&gt; 5<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; Mike<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)<br />
<br />
Output from arrayColumnSort:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [mike] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [points] =&gt; 5<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; Mike<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [ab] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [points] =&gt; 2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; John Ab<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [zoo] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [points] =&gt; 2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; John Zoo<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [pete] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [points] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; Peter<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="59900""></a>
  <div class="note">
   <strong class="user">phu at kungphu</strong>
   <a href="#59900" class="date">19-Dec-2005 08:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Notepad's example using asort/arsort will -not- work unless 'points' is defined -before- 'name'.<br />
<br />
Running the posted code sorts by 'name', which was not the point of the previous posts.&nbsp; Defining 'points' as 'apoints' also did not work; however, defining 'points' first yields correct sorting:<br />
<br />
$test[0]['points']=1;<br />
$test[0]['name']='Peter';<br />
<br />
$test[1]['points']=5;<br />
$test[1]['name']='Mike';<br />
<br />
$test[2]['points']=2;<br />
$test[2]['name']='John';<br />
<br />
asort($test);<br />
<br />
It appears asort uses the first defined element to sort a multidimensional array.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="59576""></a>
  <div class="note">
   <strong class="user">notepad at codewalkers dot com</strong>
   <a href="#59576" class="date">10-Dec-2005 01:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
for you guys trying to sort scores on an associative multi-dimensional array, why are you creating your own functions?<br />
<br />
<span class="default">&lt;?php<br />
<br />
$test</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">]=</span><span class="string">'Peter'</span><span class="keyword">;<br />
</span><span class="default">$test</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'points'</span><span class="keyword">]=</span><span class="default">1</span><span class="keyword">;<br />
<br />
</span><span class="default">$test</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">]=</span><span class="string">'Mike'</span><span class="keyword">;<br />
</span><span class="default">$test</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'points'</span><span class="keyword">]=</span><span class="default">5</span><span class="keyword">;<br />
<br />
</span><span class="default">$test</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">]=</span><span class="string">'John'</span><span class="keyword">;<br />
</span><span class="default">$test</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="string">'points'</span><span class="keyword">]=</span><span class="default">2</span><span class="keyword">;<br />
<br />
</span><span class="default">asort</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">);<br />
</span><span class="comment">// or even arsort();<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
the above seems to work for me...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57319""></a>
  <div class="note">
   <strong class="user">Shmee</strong>
   <a href="#57319" class="date">30-Sep-2005 03:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
RWC?s code works very well until you get a ?point? value greater then ten.&nbsp; This is because the strcmp() function will return that 2 &gt; 10 and 2 &gt; 11 ? 2 &gt; 19 and so on. To compare number values over ten try a sort like this:<br />
<br />
$test = multi_sort($test, $key = 'points');<br />
<br />
function multi_sort($array, $akey)<br />
{ <br />
&nbsp; function compare($a, $b)<br />
&nbsp; {<br />
&nbsp;&nbsp; &nbsp; global $key;<br />
&nbsp;&nbsp; &nbsp; if ($a[$key]&gt;$b[$key]){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; $varcmp = "1";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; return $varcmp;<br />
&nbsp;&nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; elseif ($a[$key]&lt;$b[$key]){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; $varcmp = "-1";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; return $varcmp;<br />
&nbsp;&nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; elseif ($a[$key]==$b[$key]){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; $varcmp = "0";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; return $varcmp;<br />
&nbsp;&nbsp; &nbsp; }<br />
&nbsp; }<br />
&nbsp; usort($array, "compare");<br />
&nbsp; return $array;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57161""></a>
  <div class="note">
   <strong class="user">RWC</strong>
   <a href="#57161" class="date">25-Sep-2005 10:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is the simpler version of the function by AlberT.<br />
<br />
A lot of times you have got an array like this:<br />
<br />
$test[0]['name']='Peter';<br />
$test[0]['points']=1;<br />
<br />
$test[1]['name']='Mike';<br />
$test[1]['points']=5;<br />
<br />
$test[2]['name']='John';<br />
$test[2]['points']=2;<br />
<br />
You just want to sort on the index in the second dimension, ie. on points in the above example.<br />
&nbsp;<br />
You can use the function below and call it like this:<br />
<br />
$test = multi_sort($test, $key = 'points');<br />
<br />
function multi_sort($array, $akey)<br />
{&nbsp; <br />
&nbsp; function compare($a, $b)<br />
&nbsp; {<br />
&nbsp;&nbsp; &nbsp; global $key;<br />
&nbsp;&nbsp; &nbsp; return strcmp($a[$key], $b[$key]);<br />
&nbsp; } <br />
&nbsp; usort($array, "compare");<br />
&nbsp; return $array;<br />
}<br />
<br />
Note: to be able to use $key in the compare function, it can not simply be passed as a parameter. It has to be declared global and set somewhere outside of compare().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54867""></a>
  <div class="note">
   <strong class="user">AlberT at SuperAlberT dot it</strong>
   <a href="#54867" class="date">18-Jul-2005 03:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
a nice piece of code to do an "array_key_multi_sort()" is the following:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* orders a multidimentional array on the base of a label-key<br />
&nbsp;*<br />
&nbsp;* @param $arr, the array to be ordered<br />
&nbsp;* @param $l the "label" identifing the field<br />
&nbsp;* @param $f the ordering function to be used, <br />
&nbsp;*&nbsp; &nbsp; strnatcasecmp() by default<br />
&nbsp;* @return&nbsp; TRUE on success, FALSE on failure.<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">array_key_multi_sort</span><span class="keyword">(&amp;</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$l </span><span class="keyword">, </span><span class="default">$f</span><span class="keyword">=</span><span class="string">'strnatcasecmp'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$a, $b'</span><span class="keyword">, </span><span class="string">"return </span><span class="default">$f</span><span class="string">(\$a['</span><span class="default">$l</span><span class="string">'], \$b['</span><span class="default">$l</span><span class="string">']);"</span><span class="keyword">));<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53779""></a>
  <div class="note">
   <strong class="user">kencomer at kencomer dot com</strong>
   <a href="#53779" class="date">13-Jun-2005 08:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If your data is in an associative array that you would need to separate into columns such as those retrieved with your favorite flavor of _fetch_array() in order to be able to use multisort(), you should consider using uasort() or usort() as an alternative. Here is an example of how this could be beneficial:<br />
<br />
(key is employee number which remains intact; rows are sorted by surname, firstname)<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">namecmp</span><span class="keyword">( </span><span class="default">$row1</span><span class="keyword">,</span><span class="default">$row2 </span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$first </span><span class="keyword">= </span><span class="default">strcmp</span><span class="keyword">(</span><span class="default">$row1</span><span class="keyword">[</span><span class="string">'surname'</span><span class="keyword">], </span><span class="default">$row2</span><span class="keyword">[</span><span class="string">'surname'</span><span class="keyword">]) ;<br />
&nbsp;&nbsp;&nbsp; if ( </span><span class="default">$first </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$first </span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strcmp</span><span class="keyword">(</span><span class="default">$row1</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">], </span><span class="default">$row2</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">]) ;<br />
}<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$test </span><span class="keyword">= array( </span><span class="string">'11122202' </span><span class="keyword">=&gt; array(</span><span class="string">'empno'</span><span class="keyword">=&gt;</span><span class="default">11122202</span><span class="keyword">,</span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="string">'geezer'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">,</span><span class="string">'surname'</span><span class="keyword">=&gt;</span><span class="string">'schmidt'</span><span class="keyword">,</span><span class="string">'age'</span><span class="keyword">=&gt;</span><span class="default">96</span><span class="keyword">,</span><span class="string">'sex'</span><span class="keyword">=&gt;</span><span class="string">'male'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ,</span><span class="string">'11122204' </span><span class="keyword">=&gt; array(</span><span class="string">'empno'</span><span class="keyword">=&gt;</span><span class="default">11122204</span><span class="keyword">,</span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="string">'coed'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">,</span><span class="string">'surname'</span><span class="keyword">=&gt;</span><span class="string">'beaujolais'</span><span class="keyword">,</span><span class="string">'age'</span><span class="keyword">=&gt;</span><span class="default">18</span><span class="keyword">,</span><span class="string">'sex'</span><span class="keyword">=&gt;</span><span class="string">'female'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ,</span><span class="string">'11122206' </span><span class="keyword">=&gt; array(</span><span class="string">'empno'</span><span class="keyword">=&gt;</span><span class="default">11122206</span><span class="keyword">,</span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="string">'immortal'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">,</span><span class="string">'surname'</span><span class="keyword">=&gt;</span><span class="string">'ramos'</span><span class="keyword">,</span><span class="string">'age'</span><span class="keyword">=&gt;</span><span class="default">21</span><span class="keyword">,</span><span class="string">'sex'</span><span class="keyword">=&gt;</span><span class="string">'male'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ,</span><span class="string">'11122208' </span><span class="keyword">=&gt; array(</span><span class="string">'empno'</span><span class="keyword">=&gt;</span><span class="default">11122208</span><span class="keyword">,</span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="string">'babyface'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">,</span><span class="string">'surname'</span><span class="keyword">=&gt;</span><span class="string">'brown'</span><span class="keyword">,</span><span class="string">'age'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">,</span><span class="string">'sex'</span><span class="keyword">=&gt;</span><span class="string">'male'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ,</span><span class="string">'11122210' </span><span class="keyword">=&gt; array(</span><span class="string">'empno'</span><span class="keyword">=&gt;</span><span class="default">11122210</span><span class="keyword">,</span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="string">'exjock'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">,</span><span class="string">'surname'</span><span class="keyword">=&gt;</span><span class="string">'gatti'</span><span class="keyword">,</span><span class="string">'age'</span><span class="keyword">=&gt;</span><span class="default">48</span><span class="keyword">,</span><span class="string">'sex'</span><span class="keyword">=&gt;</span><span class="string">'male'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ,</span><span class="string">'11122212' </span><span class="keyword">=&gt; array(</span><span class="string">'empno'</span><span class="keyword">=&gt;</span><span class="default">11122212</span><span class="keyword">,</span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="string">'jailbait'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">,</span><span class="string">'surname'</span><span class="keyword">=&gt;</span><span class="string">'muhammed'</span><span class="keyword">,</span><span class="string">'age'</span><span class="keyword">=&gt;</span><span class="default">15</span><span class="keyword">,</span><span class="string">'sex'</span><span class="keyword">=&gt;</span><span class="string">'female'</span><span class="keyword">) )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ;<br />
echo </span><span class="string">"&lt;pre&gt;" </span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">( </span><span class="default">$test </span><span class="keyword">) ;<br />
</span><span class="default">uasort</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">,</span><span class="string">'namecmp'</span><span class="keyword">) ;<br />
echo </span><span class="string">"----sorting----&lt;br \&gt;"</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">( </span><span class="default">$test </span><span class="keyword">) ;<br />
echo </span><span class="string">"&lt;/pre&gt;" </span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [11122202] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [empno] =&gt; 11122202<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; geezer<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [surname] =&gt; schmidt<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [age] =&gt; 96<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [sex] =&gt; male<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [11122204] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [empno] =&gt; 11122204<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; coed<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [surname] =&gt; beaujolais<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [age] =&gt; 18<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [sex] =&gt; female<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [11122206] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [empno] =&gt; 11122206<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; immortal<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [surname] =&gt; ramos<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [age] =&gt; 21<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [sex] =&gt; male<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [11122208] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [empno] =&gt; 11122208<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; babyface<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [surname] =&gt; brown<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [age] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [sex] =&gt; male<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [11122210] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [empno] =&gt; 11122210<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; exjock<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [surname] =&gt; gatti<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [age] =&gt; 48<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [sex] =&gt; male<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [11122212] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [empno] =&gt; 11122212<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; jailbait<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [surname] =&gt; muhammed<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [age] =&gt; 15<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [sex] =&gt; female<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)<br />
----sorting----<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [11122204] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [empno] =&gt; 11122204<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; coed<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [surname] =&gt; beaujolais<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [age] =&gt; 18<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [sex] =&gt; female<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [11122208] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [empno] =&gt; 11122208<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; babyface<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [surname] =&gt; brown<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [age] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [sex] =&gt; male<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [11122210] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [empno] =&gt; 11122210<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; exjock<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [surname] =&gt; gatti<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [age] =&gt; 48<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [sex] =&gt; male<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [11122212] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [empno] =&gt; 11122212<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; jailbait<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [surname] =&gt; muhammed<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [age] =&gt; 15<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [sex] =&gt; female<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [11122206] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [empno] =&gt; 11122206<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; immortal<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [surname] =&gt; ramos<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [age] =&gt; 21<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [sex] =&gt; male<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [11122202] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [empno] =&gt; 11122202<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; geezer<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [surname] =&gt; schmidt<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [age] =&gt; 96<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [sex] =&gt; male<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51873""></a>
  <div class="note">
   <strong class="user">stevec at NO-/ dot /-SPAM dot qiguang dot net</strong>
   <a href="#51873" class="date">13-Apr-2005 05:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be careful when using array_multisort() on copies of arrays, as you might end up changing the original array.&nbsp; Given the following code:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $test1 </span><span class="keyword">= array(</span><span class="default">4</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$test2 </span><span class="keyword">= </span><span class="default">$test1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$test3 </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">, </span><span class="string">'c'</span><span class="keyword">, </span><span class="string">'d'</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_multisort</span><span class="keyword">(</span><span class="default">$test2</span><span class="keyword">, </span><span class="default">SORT_ASC</span><span class="keyword">, </span><span class="default">$test3</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'test1:'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$test1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'test2:'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$test2</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'test3:'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$test3</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
You would expect:<br />
<br />
test1:Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; 4<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 3<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; 1<br />
)<br />
test2:Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; 3<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; 4<br />
)<br />
test3:Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; d<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; c<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; b<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; a<br />
)<br />
<br />
However, if you run the code, you actually get:<br />
<br />
test1:Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; 3<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; 4<br />
)<br />
test2:Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; 3<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; 4<br />
)<br />
test3:Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; d<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; c<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; b<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; a<br />
)<br />
<br />
Note that the original ($test1) ends up being sorted even though it was never called by array_multisort().&nbsp; To work around this, insert a statement to modify the copy ($test2) before calling array_multisort() on it.&nbsp; The following code will produce the expected "correct" results:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $test1 </span><span class="keyword">= array(</span><span class="default">4</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$test2 </span><span class="keyword">= </span><span class="default">$test1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$test3 </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">, </span><span class="string">'c'</span><span class="keyword">, </span><span class="string">'d'</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$test2</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="default">$test2</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// fix<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_multisort</span><span class="keyword">(</span><span class="default">$test2</span><span class="keyword">, </span><span class="default">SORT_ASC</span><span class="keyword">, </span><span class="default">$test3</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'test1:'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$test1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'test2:'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$test2</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'test3:'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$test3</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
This seems to be a resurrection of the closed bug #8130.&nbsp; Also, someone reported this behavior in bug #32031, but it was incorrectly labeled "bogus" in reference to bug #25359, which is a different issue.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51695""></a>
  <div class="note">
   <strong class="user">joao at intrasystems dot com dot br</strong>
   <a href="#51695" class="date">07-Apr-2005 09:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Exemple of sorting multi-dimensional arrays by one of it's fields:<br />
<br />
$result[0]['nome']='Joao';<br />
$result[0]['order']=5;<br />
$result[1]['nome']='Pedro';<br />
$result[1]['order']=1;<br />
$result[2]['nome']='Marcelo';<br />
$result[2]['order']=3;<br />
<br />
foreach($result as $res)<br />
&nbsp;&nbsp; &nbsp; $sortAux[] = $res['order'];<br />
<br />
array_multisort($sortAux, SORT_ASC, $result);<br />
<br />
print_r($result);<br />
<br />
produces:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [nome] =&gt; Pedro<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [order] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [nome] =&gt; Marcelo<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [order] =&gt; 3<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [nome] =&gt; Joao<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [order] =&gt; 5<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="47292""></a>
  <div class="note">
   <strong class="user">Toni</strong>
   <a href="#47292" class="date">10-Nov-2004 12:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An example to sort an array by 3 criteria:<br />
<br />
$recordset is an array of results from a query to a database, that I sort using $matrix as auxiliary array. First numeric, Second and Third alphabetically.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">for(</span><span class="default">$idx</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$idx</span><span class="keyword">&lt;</span><span class="default">$toShow</span><span class="keyword">;</span><span class="default">$idx</span><span class="keyword">++){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$matrix</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$id</span><span class="keyword">]=</span><span class="default">$recordset</span><span class="keyword">[</span><span class="default">$id</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$matrix</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$id</span><span class="keyword">]=</span><span class="default">$recordset</span><span class="keyword">[</span><span class="default">$id</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$matrix</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="default">$id</span><span class="keyword">]=</span><span class="default">$recordset</span><span class="keyword">[</span><span class="default">$id</span><span class="keyword">][</span><span class="default">10</span><span class="keyword">];&nbsp; &nbsp; <br />
}<br />
<br />
</span><span class="default">array_multisort</span><span class="keyword">(</span><span class="default">$matrix</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="default">SORT_DESC</span><span class="keyword">, </span><span class="default">SORT_NUMERIC</span><span class="keyword">,</span><span class="default">$matrix</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">SORT_STRING</span><span class="keyword">, </span><span class="default">SORT_ASC</span><span class="keyword">,</span><span class="default">$matrix</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">], </span><span class="default">SORT_STRING</span><span class="keyword">, </span><span class="default">SORT_ASC</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46278""></a>
  <div class="note">
   <strong class="user">meddle at dzygn.com</strong>
   <a href="#46278" class="date">05-Oct-2004 04:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to sort a multidomensional array by key name you cannot use array_multisort. ie: for an array named $archivos that prints like this:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [index] =&gt; 0<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; test<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [index] =&gt; 0<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; watertaxi.jpg<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [index] =&gt; 0<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; 2_0003.JPG<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [index] =&gt; 0<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; 24A_0025.JPG<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [index] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; _CIMG3501.JPG<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)<br />
<br />
If I wanted to order by "name" I'd use:<br />
<br />
function comparar($a, $b) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return strnatcasecmp($a["name"], $b["name"]);<br />
}<br />
usort($archivos, "comparar"); <br />
<br />
This function performs a case insensitive string comparison using a "natural order" algorithm (strnatcasecmp), resulting in:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [index] =&gt; 0<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; 2_0003.JPG<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [index] =&gt; 0<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; 24A_0025.JPG<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [index] =&gt; 0<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; test<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [index] =&gt; 0<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; watertaxi.jpg<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [index] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; _CIMG3501.JPG<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="15006""></a>
  <div class="note">
   <strong class="user">kat dot n0spam at audiogalaxy dot com</strong>
   <a href="#15006" class="date">24-Aug-2001 07:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you're having problems with array_multisort changing variables in global space when it is called inside a function and you're not passing in the function parameters by reference you can alleviate the problem by calling array_multisort with its parameters by reference.
<br />

<br />
array_multisort(&amp;$a, SORT_DESC, &amp;$b);
<br />

<br />
More details here in my bug report:
<br />
<a href="http://www.php.net/bugs.php?id=12936" rel="nofollow" target="_blank">http://www.php.net/bugs.php?id=12936</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

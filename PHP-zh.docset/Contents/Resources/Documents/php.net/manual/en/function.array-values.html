<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>返回数组中所有的值</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.array-unshift.html">? array_unshift</a></li>
      <li style="float: right;"><a href="function.array-walk-recursive.html">array_walk_recursive ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.array.html">数组 函数</a></li>
    <li>返回数组中所有的值</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.array-values" class="refentry">
   <div class="refnamediv">
    <h1 class="refname">array_values</h1>
    <p class="verinfo">(PHP 4, PHP 5, PHP 7)</p><p class="refpurpose"><span class="refname">array_values</span> &mdash; <span class="dc-title">返回数组中所有的值</span></p>

   </div>
 <div class="refsect1 description" id="refsect1-function.array-values-description">
  <h3 class="title">说明</h3>
     <div class="methodsynopsis dc-description">
      <span class="type">array</span> <span class="methodname"><strong>array_values</strong></span>
       ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$input</code></span>
      )</div>

    <p class="para rdfs-comment">
     <span class="function"><strong>array_values()</strong></span> 返回
     <code class="parameter">input</code> 数组中所有的值并给其建立数字索引。
    </p>
   </div>

 <div class="refsect1 parameters" id="refsect1-function.array-values-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">input</code></dt>

     <dd>

      <p class="para">
       数组。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.array-values-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   返回含所有值的索引数组。
  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.array-values-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-5406">
    <p><strong>Example #1 <span class="function"><strong>array_values()</strong></span> 例子</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$array&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"size"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"XL"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"color"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"gold"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">array_values</span><span style="color: #007700">(</span><span style="color: #0000BB">$array</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [0] =&gt; XL
    [1] =&gt; gold
)
</pre></div>
    </div>
   </div>
  </p>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.array-values-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.array-keys.html" class="function" rel="rdfs-seeAlso">array_keys()</a> - 返回数组中部分的或所有的键名</span></li>
   </ul>
  </p>
 </div>

  </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="114941""></a>
  <div class="note">
   <strong class="user">biziclop at vipmail dot hu</strong>
   <a href="#114941" class="date">01-May-2014 08:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Remember, array_values() will ignore your beautiful numeric indexes, it will renumber them according tho the 'foreach' ordering:<br />
<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= array(<br />
&nbsp;</span><span class="default">3 </span><span class="keyword">=&gt; </span><span class="default">11</span><span class="keyword">,<br />
&nbsp;</span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="default">22</span><span class="keyword">,<br />
&nbsp;</span><span class="default">2 </span><span class="keyword">=&gt; </span><span class="default">33</span><span class="keyword">,<br />
);<br />
</span><span class="default">$a</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="default">44</span><span class="keyword">;<br />
<br />
</span><span class="default">print_r</span><span class="keyword">( </span><span class="default">array_values</span><span class="keyword">( </span><span class="default">$a </span><span class="keyword">));<br />
==&gt;<br />
Array(<br />
&nbsp; [</span><span class="default">0</span><span class="keyword">] =&gt; </span><span class="default">11<br />
&nbsp; </span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] =&gt; </span><span class="default">22<br />
&nbsp; </span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] =&gt; </span><span class="default">33<br />
&nbsp; </span><span class="keyword">[</span><span class="default">3</span><span class="keyword">] =&gt; </span><span class="default">44<br />
</span><span class="keyword">)<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113042""></a>
  <div class="note">
   <strong class="user">heber dot gentilin at gmail dot com</strong>
   <a href="#113042" class="date">22-Aug-2013 03:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
/**<br />
* Return the new array from the offset index<br />
*/<br />
function array_values_from($array, $offset_index = 0) {<br />
&nbsp;&nbsp;&nbsp; if (!is_array($array))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return null;<br />
&nbsp;&nbsp;&nbsp; $index = (int)$offset_index;<br />
&nbsp;&nbsp;&nbsp; foreach($array as $i =&gt; $value)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $array_return[$index++] = $value;<br />
&nbsp;&nbsp;&nbsp; return $array_return;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112007""></a>
  <div class="note">
   <strong class="user">Certainist</strong>
   <a href="#112007" class="date">22-Apr-2013 12:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Non-recursive simplest array_flatten.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">array_flatten</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arr </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; while (list(</span><span class="default">$k</span><span class="keyword">,</span><span class="default">$v</span><span class="keyword">)=</span><span class="default">each</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">,</span><span class="default">$k</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="default">$v</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">next</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$arr</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111231""></a>
  <div class="note">
   <strong class="user">info at djdb dot be</strong>
   <a href="#111231" class="date">29-Jan-2013 09:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
$array </span><span class="keyword">= array(</span><span class="string">"size" </span><span class="keyword">=&gt; </span><span class="string">"XL"</span><span class="keyword">, </span><span class="string">"color" </span><span class="keyword">=&gt; </span><span class="string">"gold"</span><span class="keyword">,</span><span class="string">"x" </span><span class="keyword">=&gt; </span><span class="string">" "</span><span class="keyword">,</span><span class="string">"y" </span><span class="keyword">=&gt; </span><span class="string">"gold"</span><span class="keyword">,</span><span class="string">"z" </span><span class="keyword">=&gt; </span><span class="string">""</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">));<br />
</span><span class="default">?&gt;</span> <br />
wil result:<br />
Array ( [0] =&gt; XL [1] =&gt; gold [2] =&gt; [3] =&gt; gold [4] =&gt; )</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107846""></a>
  <div class="note">
   <strong class="user">kapilgopinath at gmail dot com</strong>
   <a href="#107846" class="date">09-Mar-2012 03:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
extract all values from a multi dimesnsional array or a nexted json object<br />
function array_keys_multi($array,&amp;$vals)<br />
{<br />
&nbsp;&nbsp;&nbsp; foreach ($array as $key =&gt; $value) {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (is_array($value)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array_keys_multi($value,$vals);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $vals[] = $value; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;<br />
&nbsp;&nbsp;&nbsp; return $vals;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104184""></a>
  <div class="note">
   <strong class="user">a dot ross at amdev dot eu</strong>
   <a href="#104184" class="date">30-May-2011 09:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php
<br />
</span><span class="comment">/**
<br />
&nbsp;* Flattens an array, or returns FALSE on fail.
<br />
&nbsp;*/
<br />
</span><span class="keyword">function </span><span class="default">array_flatten</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) {
<br />
&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) {
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">FALSE</span><span class="keyword">;
<br />
&nbsp; }
<br />
&nbsp; </span><span class="default">$result </span><span class="keyword">= array();
<br />
&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">, </span><span class="default">array_flatten</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">));
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; else {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp; }
<br />
&nbsp; return </span><span class="default">$result</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103905""></a>
  <div class="note">
   <strong class="user">abimaelrc</strong>
   <a href="#103905" class="date">10-May-2011 02:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is another way to get value from a multidimensional array, but for versions of php &gt;= 5.3.x<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* Get all values from specific key in a multidimensional array<br />
&nbsp;*<br />
&nbsp;* @param $key string<br />
&nbsp;* @param $arr array<br />
&nbsp;* @return null|string|array<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">array_value_recursive</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, array </span><span class="default">$arr</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$val </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_walk_recursive</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, function(</span><span class="default">$v</span><span class="keyword">, </span><span class="default">$k</span><span class="keyword">) use(</span><span class="default">$key</span><span class="keyword">, &amp;</span><span class="default">$val</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$k </span><span class="keyword">== </span><span class="default">$key</span><span class="keyword">) </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">, </span><span class="default">$v</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; });<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">count</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">) &gt; </span><span class="default">1 </span><span class="keyword">? </span><span class="default">$val </span><span class="keyword">: </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">$arr </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'foo' </span><span class="keyword">=&gt; </span><span class="string">'foo'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'bar' </span><span class="keyword">=&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'baz' </span><span class="keyword">=&gt; </span><span class="string">'baz'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'candy' </span><span class="keyword">=&gt; </span><span class="string">'candy'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'vegetable' </span><span class="keyword">=&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'carrot' </span><span class="keyword">=&gt; </span><span class="string">'carrot'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp;&nbsp; ),<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'vegetable' </span><span class="keyword">=&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'carrot' </span><span class="keyword">=&gt; </span><span class="string">'carrot2'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; ),<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'fruits' </span><span class="keyword">=&gt; </span><span class="string">'fruits'</span><span class="keyword">,<br />
);<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_value_recursive</span><span class="keyword">(</span><span class="string">'carrot'</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">)); </span><span class="comment">// array(2) { [0]=&gt; string(6) "carrot" [1]=&gt; string(7) "carrot2" }<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_value_recursive</span><span class="keyword">(</span><span class="string">'apple'</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">)); </span><span class="comment">// null<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_value_recursive</span><span class="keyword">(</span><span class="string">'baz'</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">)); </span><span class="comment">// string(3) "baz"<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_value_recursive</span><span class="keyword">(</span><span class="string">'candy'</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">)); </span><span class="comment">// string(5) "candy"<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_value_recursive</span><span class="keyword">(</span><span class="string">'pear'</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">)); </span><span class="comment">// null<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101950""></a>
  <div class="note">
   <strong class="user">aowie1 at gmail dot com</strong>
   <a href="#101950" class="date">19-Jan-2011 09:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed a function that recursively went into each level of the array to order (only the indexed) arrays... and NOT flatten the whole thing.<br />
<br />
Solution:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_values_recursive</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arr </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">) === </span><span class="default">$val</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">array_values_recursive</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$arr</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97715""></a>
  <div class="note">
   <strong class="user">geo dot artemenko at gmail dot com</strong>
   <a href="#97715" class="date">04-May-2010 09:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
same array_flatten function, compressed and preserving keys.<br />
<br />
function array_flatten($a,$f=array()){<br />
&nbsp; if(!$a||!is_array($a))return '';<br />
&nbsp; foreach($a as $k=&gt;$v){<br />
&nbsp;&nbsp;&nbsp; if(is_array($v))$f=array_flatten($v,$f);<br />
&nbsp;&nbsp;&nbsp; else $f[$k]=$v;<br />
&nbsp; }<br />
&nbsp; return $f;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94383""></a>
  <div class="note">
   <strong class="user">Carsten Milkau</strong>
   <a href="#94383" class="date">01-Nov-2009 01:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that in a multidimensional array, each element may be identified by a _sequence_ of keys, i.e. the keys that lead towards that element. Thus "preserving keys" may have different interpretations. Ivan's function for example creates a two-dimensional array preserving the last two keys. Other functions below create a one-dimensional array preserving the last key. For completeness, I will add a function that merges the key sequence by a given separator and a function that preserves the last n keys, where n is arbitrary.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/*<br />
&nbsp;* Flattening a multi-dimensional array into a <br />
&nbsp;* single-dimensional one. The resulting keys are a<br />
&nbsp;* string-separated list of the original keys:<br />
&nbsp;*<br />
&nbsp;* a[x][y][z] becomes a[implode(sep, array(x,y,z))]<br />
&nbsp;*/<br />
<br />
</span><span class="keyword">function </span><span class="default">array_flatten_sep</span><span class="keyword">(</span><span class="default">$sep</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$result </span><span class="keyword">= array();<br />
&nbsp; </span><span class="default">$stack </span><span class="keyword">= array();<br />
&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$stack</span><span class="keyword">, array(</span><span class="string">""</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">));<br />
<br />
&nbsp; while (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$stack</span><span class="keyword">) &gt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; list(</span><span class="default">$prefix</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">) = </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$stack</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$new_key </span><span class="keyword">= </span><span class="default">$prefix </span><span class="keyword">. </span><span class="default">strval</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$stack</span><span class="keyword">, array(</span><span class="default">$new_key </span><span class="keyword">. </span><span class="default">$sep</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$new_key</span><span class="keyword">] = </span><span class="default">$value<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp; }<br />
<br />
&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">/*<br />
&nbsp;* Flattening a multi-dimensional array into an <br />
&nbsp;* n-dimensional one. The last n keys of each element are <br />
&nbsp;* preserved. If this results in ambiguities, results are <br />
&nbsp;* undefined.<br />
&nbsp;*<br />
&nbsp;* a[x_1][x_2]...[x_m]&nbsp; becomes&nbsp; a[x_{m-n+1}]...[x_m]<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">array_flatten_n</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$n</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$result </span><span class="keyword">= array();<br />
&nbsp; </span><span class="default">$stack </span><span class="keyword">= array();<br />
&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$stack</span><span class="keyword">, array(array(), </span><span class="default">$array</span><span class="keyword">));<br />
<br />
&nbsp; while (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$stack</span><span class="keyword">) &gt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; list(</span><span class="default">$prefix</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">) = </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$stack</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new_prefix </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$prefix</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$new_prefix</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$new_prefix</span><span class="keyword">) &gt;= </span><span class="default">n</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$new_prefix</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$stack</span><span class="keyword">, array(</span><span class="default">$new_prefix</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">$result</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$prefix </span><span class="keyword">as </span><span class="default">$pkey</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$pkey</span><span class="keyword">]))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$pkey</span><span class="keyword">] = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$pkey</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
<br />
&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93611""></a>
  <div class="note">
   <strong class="user">karl dot rixon at gmail dot com</strong>
   <a href="#93611" class="date">18-Sep-2009 11:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A modification of wellandpower at hotmail.com's function to perform array_values recursively. This version will only re-index numeric keys, leaving associative array indexes alone.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">array_values_recursive</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$temp </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$temp</span><span class="keyword">[] = </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) ? </span><span class="default">array_values_recursive</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) : </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$temp</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) ? </span><span class="default">array_values_recursive</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) : </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$temp</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85924""></a>
  <div class="note">
   <strong class="user">chrysb at gmail dot com</strong>
   <a href="#85924" class="date">24-Sep-2008 09:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are looking for a way to count the total number of times a specific value appears in array, use this function:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">array_value_count </span><span class="keyword">(</span><span class="default">$match</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$value </span><span class="keyword">== </span><span class="default">$match</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count</span><span class="keyword">++;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$count</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
This should really be a native function of PHP.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83797""></a>
  <div class="note">
   <strong class="user">madhamster</strong>
   <a href="#83797" class="date">12-Jun-2008 01:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Good function, if you want to acces associative array element by position:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$array </span><span class="keyword">= array(</span><span class="string">'fruit'</span><span class="keyword">=&gt;</span><span class="string">'apple'</span><span class="keyword">, </span><span class="string">'juice'</span><span class="keyword">=&gt;</span><span class="string">'orange'</span><span class="keyword">, </span><span class="string">'color'</span><span class="keyword">=&gt;</span><span class="string">'lime'</span><span class="keyword">);<br />
<br />
</span><span class="default">$array </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
<br />
echo </span><span class="default">$array</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">];<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82761""></a>
  <div class="note">
   <strong class="user">rene dot zak at post dot cz</strong>
   <a href="#82761" class="date">24-Apr-2008 10:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
$array </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'fruit1' </span><span class="keyword">=&gt; </span><span class="string">'apple'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'fruit2' </span><span class="keyword">=&gt; </span><span class="string">'orange'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'fruit3' </span><span class="keyword">=&gt; </span><span class="string">' '</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'fruit4' </span><span class="keyword">=&gt; </span><span class="string">' '</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'fruit5' </span><span class="keyword">=&gt; </span><span class="string">'apple'</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;&nbsp; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$key</span><span class="keyword">=</span><span class="default">key</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$val</span><span class="keyword">=</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$val</span><span class="keyword">&lt;&gt; </span><span class="string">' '</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; echo </span><span class="default">$key </span><span class="keyword">.</span><span class="string">" = "</span><span class="keyword">.&nbsp; </span><span class="default">$val </span><span class="keyword">.</span><span class="string">" &lt;br&gt; "</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">next</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
</span><span class="comment">/*<br />
fruit1 = apple<br />
fruit2 = orange<br />
fruit5 = apple<br />
*/<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77671""></a>
  <div class="note">
   <strong class="user">bluej100 at gmail dot com</strong>
   <a href="#77671" class="date">07-Sep-2007 07:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Most of the array_flatten functions don't allow preservation of keys. Mine allows preserve, don't preserve, and preserve only strings (default).<br />
<br />
&lt;?<br />
// recursively reduces deep arrays to single-dimensional arrays<br />
// $preserve_keys: (0=&gt;never, 1=&gt;strings, 2=&gt;always)<br />
function array_flatten($array, $preserve_keys = 1, &amp;$newArray = Array()) {<br />
&nbsp; foreach ($array as $key =&gt; $child) {<br />
&nbsp;&nbsp;&nbsp; if (is_array($child)) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; $newArray =&amp; array_flatten($child, $preserve_keys, $newArray);<br />
&nbsp;&nbsp;&nbsp; } elseif ($preserve_keys + is_string($key) &gt; 1) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; $newArray[$key] = $child;<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp;&nbsp; $newArray[] = $child;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; return $newArray;<br />
}<br />
<br />
// Tests<br />
<br />
$array = Array(<br />
&nbsp; 'A' =&gt; Array(<br />
&nbsp;&nbsp;&nbsp; 1 =&gt; 'foo',<br />
&nbsp;&nbsp;&nbsp; 2 =&gt; Array(<br />
&nbsp;&nbsp; &nbsp;&nbsp; 'a' =&gt; 'bar'<br />
&nbsp;&nbsp;&nbsp; )<br />
&nbsp; ),<br />
&nbsp; 'B' =&gt; 'baz'<br />
);<br />
<br />
echo 'var_dump($array);'."\n";<br />
var_dump($array);<br />
echo 'var_dump(array_flatten($array, 0));'."\n";<br />
var_dump(array_flatten($array, 0));<br />
echo 'var_dump(array_flatten($array, 1));'."\n";<br />
var_dump(array_flatten($array, 1));<br />
echo 'var_dump(array_flatten($array, 2));'."\n";<br />
var_dump(array_flatten($array, 2));<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77542""></a>
  <div class="note">
   <strong class="user">deceze at gmail dot YesThatsGoogleMail dot com</strong>
   <a href="#77542" class="date">03-Sep-2007 09:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please note that 'wellandpower at hotmail.com's recursive merge doesn't work. Here's the fixed version:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">array_values_recursive</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp; </span><span class="default">$flat </span><span class="keyword">= array();<br />
<br />
&nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) </span><span class="default">$flat </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$flat</span><span class="keyword">, </span><span class="default">array_values_recursive</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else </span><span class="default">$flat</span><span class="keyword">[] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; return </span><span class="default">$flat</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74053""></a>
  <div class="note">
   <strong class="user">warmo_at_o2_dot_pl</strong>
   <a href="#74053" class="date">22-Mar-2007 07:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
@Yassin Ezbakhe &lt;yassin88 at gmail dot com&gt;<br />
When we have to flatten multidimensional array of strings or numbers this method could be much faster.<br />
Inconvenience of this method is, that its speed depends on size of strings/numbers, which array contains - bigger strings, lower efficiency.<br />
Conclusion: Use this method for small amount of data in arrays (less than 500B per element in my case) which have many dimensions, in other case, use Yassin Ezbakhe method.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">md_implode</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$glue </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_array </span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$output </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$v</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$output </span><span class="keyword">.= </span><span class="default">md_implode</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">, </span><span class="default">$glue</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$output</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">.</span><span class="default">$glue</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
function </span><span class="default">md_array_flatten</span><span class="keyword">(</span><span class="default">$md_array</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$flat_array </span><span class="keyword">= </span><span class="default">explode </span><span class="keyword">(</span><span class="string">'#|#'</span><span class="keyword">,</span><span class="default">md_implode</span><span class="keyword">(</span><span class="default">$md_array</span><span class="keyword">,</span><span class="string">'#|#'</span><span class="keyword">)); </span><span class="comment">// "#|#" is a sample delimiter<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$flat_array</span><span class="keyword">); </span><span class="comment">// to remove last empty element<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$flat_array</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">//Usage:<br />
</span><span class="default">$flat_array </span><span class="keyword">= </span><span class="default">md_array_flatten</span><span class="keyword">(</span><span class="default">$some_md_array</span><span class="keyword">)<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72557""></a>
  <div class="note">
   <strong class="user">ahigerd at stratitec dot com</strong>
   <a href="#72557" class="date">24-Jan-2007 03:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A comment on array_merge mentioned that array_splice is faster than array_merge for inserting values. This may be the case, but if your goal is instead to reindex a numeric array, array_values() is the function of choice. Performing the following functions in a 100,000-iteration loop gave me the following times: ($b is a 3-element array)<br />
<br />
array_splice($b, count($b)) =&gt; 0.410652<br />
$b = array_splice($b, 0) =&gt; 0.272513<br />
array_splice($b, 3) =&gt; 0.26529<br />
$b = array_merge($b) =&gt; 0.233582<br />
$b = array_values($b) =&gt; 0.151298</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69269""></a>
  <div class="note">
   <strong class="user">wellandpower at hotmail.com</strong>
   <a href="#69269" class="date">29-Aug-2006 02:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The function here flatterns an entire array and was not the behaviour I expected from a function of this name.<br />
<br />
I expected the function to flattern every sub array so that all the values were aligned and it would return an array with the same dimensions as the imput array, but as per array_values() adjusting the keys rater than removing them.<br />
<br />
In order to do this, you will want this function:<br />
<br />
function array_values_recursive($array) {<br />
&nbsp;&nbsp; $temp = array();<br />
<br />
&nbsp;&nbsp; foreach ($array as $value) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(is_array($value)) { $temp[] = array_values_recursive($value); }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else { $temp[] = $value; }<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; return $temp;<br />
}<br />
<br />
Hopefully this will assist.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="64409""></a>
  <div class="note">
   <strong class="user">wizglins at gmx dot ch</strong>
   <a href="#64409" class="date">13-Apr-2006 09:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In case you want to replace all keys in multiarrays by integers starting at 0, the following function might help.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">numerieren</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)<br />
{<br />
</span><span class="default">$array_v </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
</span><span class="default">$count_v </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array_v</span><span class="keyword">);<br />
<br />
for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$count_v</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array_v</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]))<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array_v</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">numerieren</span><span class="keyword">(</span><span class="default">$array_v</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br />
return </span><span class="default">$array_v</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56381""></a>
  <div class="note">
   <strong class="user">Yassin Ezbakhe &lt;yassin88 at gmail dot com&gt;</strong>
   <a href="#56381" class="date">01-Sep-2005 01:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">/**********************************************<br />
&nbsp;*<br />
&nbsp;*&nbsp;&nbsp; PURPOSE: Flatten a deep multidimensional array into a list of its<br />
&nbsp;*&nbsp;&nbsp; scalar values<br />
&nbsp;*<br />
&nbsp;*&nbsp;&nbsp; array array_values_recursive (array array)<br />
&nbsp;*<br />
&nbsp;*&nbsp;&nbsp; WARNING: Array keys will be lost<br />
&nbsp;*<br />
&nbsp;*********************************************/<br />
<br />
</span><span class="keyword">function </span><span class="default">array_values_recursive</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arrayValues </span><span class="keyword">= array();<br />
<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_scalar</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) OR </span><span class="default">is_resource</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arrayValues</span><span class="keyword">[] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arrayValues </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$arrayValues</span><span class="keyword">, </span><span class="default">array_values_recursive</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$arrayValues</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
This function is an improved and faster version of the one posted by &lt;27-Apr-2004 09:47&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41967""></a>
  <div class="note">
   
   <a href="#41967" class="date">28-Apr-2004 03:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php <br />
</span><span class="comment">/**<br />
&nbsp;&nbsp; flatten an arbitrarily deep multidimensional array <br />
&nbsp;&nbsp; into a list of its scalar values<br />
&nbsp;&nbsp; (may be inefficient for large structures)<br />
&nbsp;&nbsp; (will infinite recurse on self-referential structures)<br />
&nbsp;&nbsp; (could be extended to handle objects)<br />
*/<br />
</span><span class="keyword">function </span><span class="default">array_values_recursive</span><span class="keyword">(</span><span class="default">$ary</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp; </span><span class="default">$lst </span><span class="keyword">= array();<br />
&nbsp;&nbsp; foreach( </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$ary</span><span class="keyword">) as </span><span class="default">$k </span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$v </span><span class="keyword">= </span><span class="default">$ary</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">is_scalar</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$lst</span><span class="keyword">[] = </span><span class="default">$v</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; } elseif (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$lst </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">( </span><span class="default">$lst</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_values_recursive</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; );<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; return </span><span class="default">$lst</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
code till dawn!&nbsp; -mark meves!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="36837""></a>
  <div class="note">
   <strong class="user">nopy at users dot sourceforge dot net</strong>
   <a href="#36837" class="date">24-Oct-2003 12:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just a warning that re-indexing an array by array_values() may cause you to reach the memory limit unexpectly.
<br />

<br />
For example, if your PHP momory_limits is 8MB,
<br />
&nbsp;and says there's a BIG array $bigArray which allocate 5MB of memory.
<br />

<br />
Doing this will cause PHP exceeds the momory limits:
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp; $bigArray </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">( </span><span class="default">$bigArray </span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
It's because array_values() does not re-index $bigArray directly,
<br />
it just re-index it into another array, and assign to itself later.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="25749""></a>
  <div class="note">
   <strong class="user">mailseppel at gmx dot de</strong>
   <a href="#25749" class="date">04-Oct-2002 01:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Remember, that the following way of fetching data from a mySql-Table will do exactly the thing as carl described before: An array, which data may be accessed both by numerical and DB-ID-based Indexes:<br />
<br />
<span class="default">&lt;?php<br />
$row </span><span class="keyword">= </span><span class="default">mysql_fetch_array</span><span class="keyword">(</span><span class="default">$db_result</span><span class="keyword">, </span><span class="default">$db_link</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Hope I haven't misunderstood anything here.. :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="18623""></a>
  <div class="note">
   <strong class="user">carl at thep.lu.se</strong>
   <a href="#18623" class="date">30-Jan-2002 12:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Indeed you can, and that's what's so great about it. I have, for instance, a function that returns the results of a database query as an array. I want to keep the order that the entries were returned in, but at the same time I want to be able to access them _either_ by the position _or_ by some other index (such as some sort of ID in the database, gotten from elsewhere). In this case, I can make the function return an array from id to [array of values], and by a simple call to array_values() this is transformed into an array indexed from 0 to count()-1. Useful.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

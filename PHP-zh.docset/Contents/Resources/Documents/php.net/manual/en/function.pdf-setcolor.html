<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Set fill and stroke color</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.pdf-set-word-spacing.html">? PDF_set_word_spacing</a></li>
      <li style="float: right;"><a href="function.pdf-setdash.html">PDF_setdash ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.pdf.html">PDF 函数</a></li>
    <li>Set fill and stroke color</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.pdf-setcolor" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">PDF_setcolor</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.5, PECL pdflib &gt;= 1.0.0)</p><p class="refpurpose"><span class="refname">PDF_setcolor</span> &mdash; <span class="dc-title">Set fill and stroke color</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.pdf-setcolor-description">
  <h3 class="title">说明</h3>
   <div class="methodsynopsis dc-description">
    <span class="type">bool</span> <span class="methodname"><strong>PDF_setcolor</strong></span>
     ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$p</code></span>
    , <span class="methodparam"><span class="type">string</span> <code class="parameter">$fstype</code></span>
    , <span class="methodparam"><span class="type">string</span> <code class="parameter">$colorspace</code></span>
    , <span class="methodparam"><span class="type">float</span> <code class="parameter">$c1</code></span>
    , <span class="methodparam"><span class="type">float</span> <code class="parameter">$c2</code></span>
    , <span class="methodparam"><span class="type">float</span> <code class="parameter">$c3</code></span>
    , <span class="methodparam"><span class="type">float</span> <code class="parameter">$c4</code></span>
    )</div>

  <p class="para rdfs-comment">
   Sets the current color space and color. 成功时返回 <strong><code>TRUE</code></strong>， 或者在失败时返回 <strong><code>FALSE</code></strong>。
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="101873""></a>
  <div class="note">
   <strong class="user">cancausecancer at yahoo dot com</strong>
   <a href="#101873" class="date">15-Jan-2011 01:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a quick snippet to convert CMYK to RGB. It has better precision than a lot of other solutions that also don't factor in colour profiles.<br />
<br />
<span class="default">&lt;?php<br />
<br />
$cmyk </span><span class="keyword">= </span><span class="string">'10,20,100,31'</span><span class="keyword">;<br />
list(</span><span class="default">$c</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">, </span><span class="default">$k</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">','</span><span class="keyword">, </span><span class="default">$cmyk</span><span class="keyword">);<br />
<br />
</span><span class="comment"># Gets the rgb as floats (cast via (int) if you want int )<br />
</span><span class="default">$r </span><span class="keyword">= (</span><span class="default">1 </span><span class="keyword">- </span><span class="default">min</span><span class="keyword">((</span><span class="default">$c </span><span class="keyword">/ </span><span class="default">100</span><span class="keyword">) * (</span><span class="default">1 </span><span class="keyword">- </span><span class="default">$k </span><span class="keyword">/= </span><span class="default">100</span><span class="keyword">) + </span><span class="default">1 </span><span class="keyword">* </span><span class="default">$k</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">)) * </span><span class="default">255</span><span class="keyword">;<br />
</span><span class="default">$g </span><span class="keyword">= (</span><span class="default">1 </span><span class="keyword">- </span><span class="default">min</span><span class="keyword">((</span><span class="default">$m </span><span class="keyword">/ </span><span class="default">100</span><span class="keyword">) * (</span><span class="default">1 </span><span class="keyword">- </span><span class="default">$k</span><span class="keyword">) + </span><span class="default">1 </span><span class="keyword">* </span><span class="default">$k</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">)) * </span><span class="default">255</span><span class="keyword">;<br />
</span><span class="default">$b </span><span class="keyword">= (</span><span class="default">1 </span><span class="keyword">- </span><span class="default">min</span><span class="keyword">((</span><span class="default">$y </span><span class="keyword">/ </span><span class="default">100</span><span class="keyword">) * (</span><span class="default">1 </span><span class="keyword">- </span><span class="default">$k</span><span class="keyword">) + </span><span class="default">1 </span><span class="keyword">* </span><span class="default">$k</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">)) * </span><span class="default">255</span><span class="keyword">;<br />
<br />
echo </span><span class="string">"</span><span class="default">$r</span><span class="string"> </span><span class="default">$g</span><span class="string"> </span><span class="default">$b</span><span class="string">\r\n"</span><span class="keyword">;<br />
<br />
</span><span class="comment"># Converts the rgb to hex with leading 0's<br />
</span><span class="default">$r </span><span class="keyword">= </span><span class="default">str_pad</span><span class="keyword">(</span><span class="default">dechex</span><span class="keyword">(</span><span class="default">$r</span><span class="keyword">), </span><span class="default">2</span><span class="keyword">, </span><span class="string">'0'</span><span class="keyword">, </span><span class="default">STR_PAD_LEFT</span><span class="keyword">);<br />
</span><span class="default">$g </span><span class="keyword">= </span><span class="default">str_pad</span><span class="keyword">(</span><span class="default">dechex</span><span class="keyword">(</span><span class="default">$g</span><span class="keyword">), </span><span class="default">2</span><span class="keyword">, </span><span class="string">'0'</span><span class="keyword">, </span><span class="default">STR_PAD_LEFT</span><span class="keyword">);<br />
</span><span class="default">$b </span><span class="keyword">= </span><span class="default">str_pad</span><span class="keyword">(</span><span class="default">dechex</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">), </span><span class="default">2</span><span class="keyword">, </span><span class="string">'0'</span><span class="keyword">, </span><span class="default">STR_PAD_LEFT</span><span class="keyword">);<br />
<br />
echo </span><span class="string">"hex: </span><span class="default">$r$g$b</span><span class="string">\r\n"</span><span class="keyword">;<br />
<br />
</span><span class="comment">/* an example to see the colour via html<br />
echo '&lt;div style="width: 80px; height: 80px; background-color: #', "$r$g$b", '"&gt;&lt;/div&gt;';<br />
*/<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42219""></a>
  <div class="note">
   <strong class="user">_meto ALT+q web.de</strong>
   <a href="#42219" class="date">08-May-2004 06:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Damn, this took me some real long time! Maybe it's helpfull for those who even have no idea of color-Schemes like me ;)<br />
<br />
If u want to generate PDF's for Print Offices u need to set all the colors in CMYK.<br />
<br />
Here is a Function that will convert RGB to CMYK<br />
<br />
&lt;?<br />
function hex2rgb($hex) {<br />
&nbsp; $color = str_replace('#','',$hex);<br />
&nbsp; $rgb = array('r' =&gt; hexdec(substr($color,0,2)),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'g' =&gt; hexdec(substr($color,2,2)),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'b' =&gt; hexdec(substr($color,4,2)));<br />
&nbsp; return $rgb;<br />
}<br />
<br />
function rgb2cmyk($var1,$g=0,$b=0) {<br />
&nbsp;&nbsp; if(is_array($var1)) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; $r = $var1['r'];<br />
&nbsp;&nbsp; &nbsp;&nbsp; $g = $var1['g'];<br />
&nbsp;&nbsp; &nbsp;&nbsp; $b = $var1['b'];<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; else $r=$var1;<br />
&nbsp;&nbsp; $cyan&nbsp; &nbsp; = 255 - $r;<br />
&nbsp;&nbsp; $magenta = 255 - $g;<br />
&nbsp;&nbsp; $yellow&nbsp; = 255 - $b;<br />
&nbsp;&nbsp; $black&nbsp;&nbsp; = min($cyan, $magenta, $yellow);<br />
&nbsp;&nbsp; $cyan&nbsp; &nbsp; = @(($cyan&nbsp; &nbsp; - $black) / (255 - $black)) * 255;<br />
&nbsp;&nbsp; $magenta = @(($magenta - $black) / (255 - $black)) * 255;<br />
&nbsp;&nbsp; $yellow&nbsp; = @(($yellow&nbsp; - $black) / (255 - $black)) * 255;<br />
&nbsp;&nbsp; return array('c' =&gt; $cyan / 255,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 'm' =&gt; $magenta / 255,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 'y' =&gt; $yellow / 255,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 'k' =&gt; $black / 255);<br />
}<br />
<br />
$color=rgb2cmyk(hex2rgb('#FF0000')); <br />
pdf_setcolor($pdf, "both", "cmyk", $color['c'], $color['m'], $color['y'], $color['k']);<br />
?&gt;<br />
<br />
U can call it with parameters (r,g,b) or just an array(r,g,b) that contains these values.<br />
<br />
Hope it works correct. All testing was fine.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="38955""></a>
  <div class="note">
   <strong class="user">enyo vel cora</strong>
   <a href="#38955" class="date">13-Jan-2004 01:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This seems a little less complicated:<br />
<br />
this is the color you want to use : 'FF11AA'<br />
<br />
<span class="default">&lt;?php<br />
pdf_setcolor </span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">, </span><span class="string">'both'</span><span class="keyword">, </span><span class="default">0xFF </span><span class="keyword">/ </span><span class="default">255</span><span class="keyword">, </span><span class="default">0x11 </span><span class="keyword">/ </span><span class="default">255</span><span class="keyword">, </span><span class="default">0xAA </span><span class="keyword">/ </span><span class="default">255</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="31670""></a>
  <div class="note">
   <strong class="user">php at perfectweb dotcom</strong>
   <a href="#31670" class="date">30-Apr-2003 01:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a better implementation for setting HTML hexadecimal colors:<br />
<br />
function pdf_setcolor_hex($hexcolor, $type = '')<br />
{<br />
&nbsp;&nbsp;&nbsp; global $pdf;&nbsp; &nbsp;&nbsp; ## match this to your pdf resource handle<br />
&nbsp;&nbsp; &nbsp; &nbsp; $color['r'] = hexdec(substr($hexcolor, 0, 2))/255; <br />
&nbsp;&nbsp; &nbsp; &nbsp; $color['g'] = hexdec(substr($hexcolor, 2, 2))/255; <br />
&nbsp;&nbsp; &nbsp; &nbsp; $color['b'] = hexdec(substr($hexcolor, 4, 2))/255;<br />
&nbsp;&nbsp; &nbsp; &nbsp; if ($type != 'fill' &amp;&amp; $type != 'stroke')&nbsp; $type = 'both';<br />
&nbsp;&nbsp; &nbsp; &nbsp; pdf_setcolor($pdf, $type, 'rgb', $color['r'], $color['g'], $color['b']);<br />
}<br />
<br />
Sample usage:<br />
pdf_setcolor_hex('FFFFFF', 'fill');<br />
<br />
-Derek</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="31644""></a>
  <div class="note">
   <strong class="user">php at perfectweb dotcom</strong>
   <a href="#31644" class="date">29-Apr-2003 09:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a function for converting HTML hexadecimal colors to RGB decimals suitable for this function:<br />
<br />
$color_hex = "FF0000";&nbsp; &nbsp; &nbsp;&nbsp; ## whatever hex color you want<br />
$color = convert_hexcolor_rgbdec($color_hex);<br />
pdf_setcolor($pdf, 'fill', 'rgb', $color['r'], $color['g'], $color['b']);<br />
<br />
function convert_hexcolor_rgbdec($color_hex)<br />
{<br />
&nbsp;&nbsp; $color['r'] = hexdec(substr($color_hex, 0, 2))/255; <br />
&nbsp;&nbsp; $color['g'] = hexdec(substr($color_hex, 2, 2))/255; <br />
&nbsp;&nbsp; $color['b'] = hexdec(substr($color_hex, 4, 2))/255;<br />
&nbsp;&nbsp; return $color;<br />
}<br />
<br />
-Derek</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="31624""></a>
  <div class="note">
   <strong class="user">maurice dot anglebert at free dot fr</strong>
   <a href="#31624" class="date">28-Apr-2003 05:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Bonjour,<br />
<br />
Cette fonction est utilisable pour d?finir une couleur de police.<br />
<br />
Hello,<br />
<br />
I search for the way of setting colors for the font in pdf and I find this.<br />
Hope it could help.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
*&nbsp; &nbsp; set font color<br />
*&nbsp; &nbsp; maurice.anglebert@free.fr<br />
*/<br />
<br />
// path for the pdf file and string to show<br />
</span><span class="default">$pdfFilePath </span><span class="keyword">= </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="default">DOCUMENT_ROOT</span><span class="keyword">].</span><span class="string">"/the_dir_of_the_file/test.pdf"</span><span class="keyword">;<br />
</span><span class="default">$string </span><span class="keyword">= </span><span class="string">"The new color of my font"</span><span class="keyword">;<br />
<br />
</span><span class="default">$pdf </span><span class="keyword">= </span><span class="default">pdf_new</span><span class="keyword">();<br />
</span><span class="default">pdf_open_file</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">, </span><span class="default">$pdfFilePath</span><span class="keyword">);<br />
</span><span class="default">pdf_set_info</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">, </span><span class="string">"Title"</span><span class="keyword">, </span><span class="string">"Test pdf"</span><span class="keyword">);<br />
</span><span class="comment">// A4 page<br />
</span><span class="default">pdf_begin_page</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">, </span><span class="default">595</span><span class="keyword">, </span><span class="default">842</span><span class="keyword">);<br />
<br />
</span><span class="comment">// set up of the font<br />
</span><span class="default">$font </span><span class="keyword">= </span><span class="default">pdf_findfont</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">, </span><span class="string">"Courier"</span><span class="keyword">, </span><span class="string">"host"</span><span class="keyword">, </span><span class="default">FALSE</span><span class="keyword">); <br />
&nbsp;&nbsp;&nbsp; if (isset(</span><span class="default">$font</span><span class="keyword">)) { <br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">pdf_setfont</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">, </span><span class="default">$font</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">) or die (</span><span class="string">"unknown font"</span><span class="keyword">); <br />
&nbsp;&nbsp;&nbsp; } <br />
<br />
</span><span class="default">pdf_setColor</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">, </span><span class="string">"fill"</span><span class="keyword">, </span><span class="string">"rgb"</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">); <br />
</span><span class="comment">// this for blue color <br />
// pdf_setColor($pdf, "fill", "rgb",1, 0, 0) for red<br />
<br />
</span><span class="default">pdf_set_value</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">, </span><span class="string">"textrendering"</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
</span><span class="comment">// show at the top of the page center<br />
</span><span class="default">pdf_show_boxed</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">832</span><span class="keyword">, </span><span class="default">595</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">, </span><span class="string">"center"</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">);<br />
<br />
</span><span class="comment">// resets graphic state<br />
</span><span class="default">pdf_initGraphics</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">);<br />
</span><span class="comment">// end of page and pdf_object <br />
</span><span class="default">pdf_end_page</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">); <br />
</span><span class="default">pdf_close</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">);<br />
</span><span class="default">pdf_delete</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">);<br />
<br />
</span><span class="comment">// use header to get the file<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-type: application/pdf"</span><span class="keyword">);<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-length: "</span><span class="keyword">.</span><span class="default">filesize</span><span class="keyword">(</span><span class="default">$pdfFilePath</span><span class="keyword">));<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-disposition: inline; filename=test.pdf"</span><span class="keyword">);<br />
</span><span class="default">readfile</span><span class="keyword">(</span><span class="default">$pdfFilePath</span><span class="keyword">);&nbsp; &nbsp; <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="31292""></a>
  <div class="note">
   <strong class="user">psychosos at gmx dot at</strong>
   <a href="#31292" class="date">16-Apr-2003 07:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to change the font color you need to set type to&nbsp; "fill", not "stroke" ("both" also works, of course).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="17745""></a>
  <div class="note">
   <strong class="user">steven dot gould at NO_SPAM dot stevengould dot org</strong>
   <a href="#17745" class="date">21-Dec-2001 08:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you encounter errors of the form function 'PDF_setcolor' must not be called in 'path' scope this generally means that you've called the PDFLib functions in the wrong order. For example, the following would be *incorrect* because PDF_rect marks the beginning of the "path scope", and set_color must not be called in path scope:
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
</span><span class="comment">// THIS CODE WILL PRODUCE AN ERROR
<br />
</span><span class="default">PDF_rect</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$width</span><span class="keyword">,</span><span class="default">$height</span><span class="keyword">);
<br />
</span><span class="default">PDF_setcolor</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">,</span><span class="default">$red</span><span class="keyword">,</span><span class="default">$green</span><span class="keyword">,</span><span class="default">$blue</span><span class="keyword">);
<br />
</span><span class="default">PDF_fill</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">);
<br />
&lt;</span><span class="default">p</span><span class="keyword">&gt;</span><span class="default">The correct order of </span><span class="keyword">function </span><span class="default">calls is </span><span class="keyword">as </span><span class="default">follows</span><span class="keyword">:
<br />
&lt;</span><span class="default">p</span><span class="keyword">&gt;</span><span class="comment">// Correct order of function calls
<br />
</span><span class="default">PDF_setcolor</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">,</span><span class="default">$red</span><span class="keyword">,</span><span class="default">$green</span><span class="keyword">,</span><span class="default">$blue</span><span class="keyword">);
<br />
</span><span class="default">PDF_rect</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$width</span><span class="keyword">,</span><span class="default">$height</span><span class="keyword">);
<br />
</span><span class="default">PDF_fill</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">);
<br />

<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

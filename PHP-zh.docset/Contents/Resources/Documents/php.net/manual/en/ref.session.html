<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Session 函数</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="session.security.html">? 会话和安全</a></li>
      <li style="float: right;"><a href="function.session-abort.html">session_abort ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="book.session.html">Sessions</a></li>
    <li>Session 函数</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="ref.session" class="reference">
 <h1 class="title">Session 函数</h1>

 










































































































































































































<h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="function.session-abort.html">session_abort</a> &mdash; Discard session array changes and finish session</li><li><a href="function.session-cache-expire.html">session_cache_expire</a> &mdash; 返回当前缓存的到期时间</li><li><a href="function.session-cache-limiter.html">session_cache_limiter</a> &mdash; 读取/设置缓存限制器</li><li><a href="function.session-commit.html">session_commit</a> &mdash; session_write_close 的别名</li><li><a href="function.session-decode.html">session_decode</a> &mdash; 解码会话数据</li><li><a href="function.session-destroy.html">session_destroy</a> &mdash; 销毁一个会话中的全部数据</li><li><a href="function.session-encode.html">session_encode</a> &mdash; 将当前会话数据编码为一个字符串</li><li><a href="function.session-get-cookie-params.html">session_get_cookie_params</a> &mdash; 获取会话 cookie 参数</li><li><a href="function.session-id.html">session_id</a> &mdash; 获取/设置当前会话 ID</li><li><a href="function.session-is-registered.html">session_is_registered</a> &mdash; 检查变量是否在会话中已经注册</li><li><a href="function.session-module-name.html">session_module_name</a> &mdash; 获取/设置会话模块名称</li><li><a href="function.session-name.html">session_name</a> &mdash; 读取/设置会话名称</li><li><a href="function.session-regenerate-id.html">session_regenerate_id</a> &mdash; 使用新生成的会话 ID 更新现有会话 ID</li><li><a href="function.session-register-shutdown.html">session_register_shutdown</a> &mdash; 关闭会话</li><li><a href="function.session-register.html">session_register</a> &mdash; Register one or more global variables with the current session</li><li><a href="function.session-reset.html">session_reset</a> &mdash; Re-initialize session array with original values</li><li><a href="function.session-save-path.html">session_save_path</a> &mdash; 读取/设置当前会话的保存路径</li><li><a href="function.session-set-cookie-params.html">session_set_cookie_params</a> &mdash; 设置会话 cookie 参数</li><li><a href="function.session-set-save-handler.html">session_set_save_handler</a> &mdash; 设置用户自定义会话存储函数</li><li><a href="function.session-start.html">session_start</a> &mdash; 启动新会话或者重用现有会话</li><li><a href="function.session-status.html">session_status</a> &mdash; 返回当前会话状态</li><li><a href="function.session-unregister.html">session_unregister</a> &mdash; Unregister a global variable from the current session</li><li><a href="function.session-unset.html">session_unset</a> &mdash; 释放所有的会话变量</li><li><a href="function.session-write-close.html">session_write_close</a> &mdash; Write session data and end session</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="105088""></a>
  <div class="note">
   <strong class="user">Sam Yong - hellclanner at live dot com</strong>
   <a href="#105088" class="date">27-Jul-2011 11:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The following has been tested true in PHP 5.3.5.<br />
<br />
Setting the session variables after the execution of the script i.e. in __destruct function, will not work. <br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">Example</span><span class="keyword">{<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">__destruct</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">'test'</span><span class="keyword">] = </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">session_write_close</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
The above example will write nothing into the temporary session file, as I observed through a custom Session Save Handler.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103218""></a>
  <div class="note">
   <strong class="user">jitchavan at gmail dot com</strong>
   <a href="#103218" class="date">01-Apr-2011 03:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
IE issue :-<br />
<br />
when form target set to iframe source and after posting form content you are setting session variables,<br />
In this scenario if parent page having image src blank then session values set in iframe action page will be LOST surprisingly in IE ONLY.Solution is quite simple don't keep Image src blank.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100311""></a>
  <div class="note">
   <strong class="user">ted at tedmurph dot com</strong>
   <a href="#100311" class="date">07-Oct-2010 02:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was having problems with $_SESSION information not being written or being lost in a seemingly random way.&nbsp; There was a Location: call being made deep in a Zend OAuth module, I am using an IIS server with PHP as a CGI, etc.
<br />

<br />
The answer was simply that you need to have the domain be consistent for sessions to work consistently.&nbsp; In my case, I was switching back and forth between www.EXAMPLE.com:888 and EXAMPLE.com:888.&nbsp; The unusual port, the hidden Location: call, the handoff with OAuth, etc all served to confuse me, but the intermitent error was caused by this simple goof of keeping the domain consistent.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99664""></a>
  <div class="note">
   <strong class="user">hinom06 [at] hotmail.co.jp</strong>
   <a href="#99664" class="date">30-Aug-2010 07:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
simple session test version 1.1<br />
<br />
<span class="default">&lt;?php <br />
</span><span class="comment">/* [EDIT by danbrown AT php DOT net: <br />
&nbsp;&nbsp; The author of this note named this <br />
&nbsp;&nbsp; file tmp.php in his/her tests. If <br />
&nbsp;&nbsp; you save it as a different name, <br />
&nbsp;&nbsp; simply update the links at the <br />
&nbsp;&nbsp; bottom to reflect the change.] */ <br />
<br />
</span><span class="default">error_reporting</span><span class="keyword">( </span><span class="default">E_ALL </span><span class="keyword">); <br />
</span><span class="default">ini_set</span><span class="keyword">( </span><span class="string">'display_errors'</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">date_default_timezone_set</span><span class="keyword">(</span><span class="string">'Asia/Tokyo'</span><span class="keyword">);<br />
<br />
</span><span class="comment">//ini_set( 'session.save_path', '/tmp' ); // for debug purposes<br />
&nbsp;&nbsp; <br />
</span><span class="default">session_start</span><span class="keyword">(); <br />
<br />
</span><span class="comment">// check if session_id() exists.<br />
/*<br />
for example, if exists and session wont read, must send session.name as parameter in URL.<br />
<br />
Some servers configurations may have problem to recognize PHPSESSID, even if transid value is 0 or 1.&nbsp; <br />
So, this test is usefull to identify any causes.<br />
<br />
*/<br />
</span><span class="keyword">if( </span><span class="default">session_id</span><span class="keyword">() == </span><span class="string">'' </span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'session_id() empty'</span><span class="keyword">;<br />
}else{<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">session_id</span><span class="keyword">();<br />
}<br />
echo </span><span class="string">'&lt;hr&gt;'</span><span class="keyword">;<br />
<br />
</span><span class="default">$sessPath&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">ini_get</span><span class="keyword">(</span><span class="string">'session.save_path'</span><span class="keyword">); <br />
</span><span class="default">$sessCookie </span><span class="keyword">= </span><span class="default">ini_get</span><span class="keyword">(</span><span class="string">'session.cookie_path'</span><span class="keyword">); <br />
</span><span class="default">$sessName&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">ini_get</span><span class="keyword">(</span><span class="string">'session.name'</span><span class="keyword">); <br />
</span><span class="default">$sessVar&nbsp; &nbsp; </span><span class="keyword">= </span><span class="string">'foo'</span><span class="keyword">; <br />
<br />
echo </span><span class="string">'&lt;br&gt;sessPath: ' </span><span class="keyword">. </span><span class="default">$sessPath</span><span class="keyword">; <br />
echo </span><span class="string">'&lt;br&gt;sessCookie: ' </span><span class="keyword">. </span><span class="default">$sessCookie</span><span class="keyword">; <br />
<br />
echo </span><span class="string">'&lt;hr&gt;'</span><span class="keyword">; <br />
<br />
if( !isset( </span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'p'</span><span class="keyword">] ) ){ <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// instantiate new session var <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="default">$sessVar</span><span class="keyword">] = </span><span class="string">'hello world'</span><span class="keyword">; <br />
}else{ <br />
&nbsp;&nbsp;&nbsp; if( </span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'p'</span><span class="keyword">] == </span><span class="default">1 </span><span class="keyword">){ <br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// printing session value and global cookie PHPSESSID <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">echo </span><span class="default">$sessVar </span><span class="keyword">. </span><span class="string">': '</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( isset( </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="default">$sessVar</span><span class="keyword">] ) ){ <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="default">$sessVar</span><span class="keyword">]; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }else{ <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'[not exists]'</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } <br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'&lt;br&gt;' </span><span class="keyword">. </span><span class="default">$sessName </span><span class="keyword">. </span><span class="string">': '</span><span class="keyword">; <br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( isset( </span><span class="default">$_COOKIE</span><span class="keyword">[</span><span class="default">$sessName</span><span class="keyword">] ) ){ <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$_COOKIE</span><span class="keyword">[</span><span class="default">$sessName</span><span class="keyword">]; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }else{ <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( isset( </span><span class="default">$_REQUEST</span><span class="keyword">[</span><span class="default">$sessName</span><span class="keyword">] ) ){ <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$_REQUEST</span><span class="keyword">[</span><span class="default">$sessName</span><span class="keyword">]; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else{ <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( isset( </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'HTTP_COOKIE'</span><span class="keyword">] ) ){ <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'HTTP_COOKIE'</span><span class="keyword">]; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else{ <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'problem, check your PHP settings'</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } <br />
<br />
&nbsp;&nbsp;&nbsp; }else{ <br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// destroy session by unset() function <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">unset( </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="default">$sessVar</span><span class="keyword">] ); <br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// check if was destroyed <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if( !isset( </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="default">$sessVar</span><span class="keyword">] ) ){ <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'&lt;br&gt;'</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$sessName </span><span class="keyword">. </span><span class="string">' was "unseted"'</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }else{ <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'&lt;br&gt;'</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$sessName </span><span class="keyword">. </span><span class="string">' was not "unseted"'</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } <br />
<br />
&nbsp;&nbsp;&nbsp; } <br />
} <br />
</span><span class="default">?&gt;</span> <br />
&lt;hr&gt; <br />
&lt;a href=tmp.php?p=1&amp;<span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">$sessName </span><span class="keyword">. </span><span class="string">'=' </span><span class="keyword">. </span><span class="default">session_id</span><span class="keyword">();</span><span class="default">?&gt;</span>&gt;test 1 (printing session value)&lt;/a&gt; <br />
&lt;br&gt; <br />
&lt;a href=tmp.php?p=2&amp;<span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">$sessName </span><span class="keyword">. </span><span class="string">'=' </span><span class="keyword">. </span><span class="default">session_id</span><span class="keyword">();</span><span class="default">?&gt;</span>&gt;test 2 (kill session)&lt;/a&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99219""></a>
  <div class="note">
   <strong class="user">Trevor Brown</strong>
   <a href="#99219" class="date">04-Aug-2010 05:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A confirmation of behaviour, just in case this saves anyone else some time...<br />
<br />
There is (potentially) a special case when session.gc_probability = 0 and session.gc_divisor = 0.&nbsp; Depending on how they wanted to work their maths underneath, the coders *might* have opted to interpret 0/0 as 1 (which is sometimes assumed in certain maths proofs), but thankfully it seems they haven't.&nbsp; With both values set to 0, the session code will follow the spirit of the directives and invoke the garbage collector with zero probability.&nbsp; At least this is true with php 5.2.5 (which, to be certain, I inspected the source of).<br />
<br />
To be safe, however, setting both to zero is *probably* not a good idea because usually 0/0 is undefined, so it could presumably mean anything (some arguments exist that claim 0/0 is equal to every fraction).&nbsp; Wouldn't you rather know for sure what your probability was set to?&nbsp; In other words, don't set gc_divisor = 0</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96309""></a>
  <div class="note">
   <strong class="user">Jeremy Speer</strong>
   <a href="#96309" class="date">19-Feb-2010 09:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When working on a project, I found a need to switch live sessions between two different pieces of software. The documentation to do this is scattered all around different sites, especially in comments sections rather than examples. One difficulty I encountered was the session save handler for one of the applications was set, whereas the other was not. Now, I didn't code in the function session_set_save_handler(), instead I utilize that once I'm done with the function (manually), however this function could easily be extended to include that functionality. Basically, it is only overriding the system's default session save handler. To overcome this after you have used getSessionData(), just call session_write_close(), session_set_save_handler() with the appropriate values, then re-run session_name(), session_id() and session_start() with their appropriate values. If you don't know the session id, it's the string located in $_COOKIE[session_name], or $_REQUEST[session_name] if you are using trans_sid. [note: use caution with trusting data from $_REQUEST, if at all possible, use $_GET or $_POST instead depending on the page].<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">getSessionData </span><span class="keyword">(</span><span class="default">$session_name </span><span class="keyword">= </span><span class="string">'PHPSESSID'</span><span class="keyword">, </span><span class="default">$session_save_handler </span><span class="keyword">= </span><span class="string">'files'</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$session_data </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment"># did we get told what the old session id was? we can't continue it without that info<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$session_name</span><span class="keyword">, </span><span class="default">$_COOKIE</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># save current session id<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$session_id </span><span class="keyword">= </span><span class="default">$_COOKIE</span><span class="keyword">[</span><span class="default">$session_name</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$old_session_id </span><span class="keyword">= </span><span class="default">session_id</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># write and close current session<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">session_write_close</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># grab old save handler, and switch to files<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$old_session_save_handler </span><span class="keyword">= </span><span class="default">ini_get</span><span class="keyword">(</span><span class="string">'session.save_handler'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">'session.save_handler'</span><span class="keyword">, </span><span class="default">$session_save_handler</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># now we can switch the session over, capturing the old session name<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$old_session_name </span><span class="keyword">= </span><span class="default">session_name</span><span class="keyword">(</span><span class="default">$session_name</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">session_id</span><span class="keyword">(</span><span class="default">$session_id</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">session_start</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># get the desired session data<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$session_data </span><span class="keyword">= </span><span class="default">$_SESSION</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># close this session, switch back to the original handler, then restart the old session<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">session_write_close</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">'session.save_handler'</span><span class="keyword">, </span><span class="default">$old_session_save_handler</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">session_name</span><span class="keyword">(</span><span class="default">$old_session_name</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">session_id</span><span class="keyword">(</span><span class="default">$old_session_id</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">session_start</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment"># now return the data we just retrieved<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$session_data</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93225""></a>
  <div class="note">
   <strong class="user">brfelipe08 at hotmail dot com</strong>
   <a href="#93225" class="date">29-Aug-2009 03:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need to use sessions, and some accents required for some Latin-based languages, you should encode your files in ISO-8859-1.<br />
You will run into some problems if you try to use UTF-8 - with or without BOM -, and ANSI will not support accents.<br />
ISO-8859-1 will both support sessions and the accents.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90756""></a>
  <div class="note">
   <strong class="user">edA-qa at disemia dot com</strong>
   <a href="#90756" class="date">08-May-2009 09:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
WARNING for Debian users.&nbsp; Just to drive you completely crazy Debian does its own form of session management and will completely ignore all alterations to the values who do within your PHP script.<br />
<br />
Debian sets up a &lt;crontab /etc/cron.d/php5&gt; which deletes all files, including those in subdirectories, which exceed the gc_maxlifetime specified in the &lt;php.ini&gt; file only.<br />
<br />
That is, on Debian (and likely variants like Ubuntu) modifying the session expiration settings (like gc_maxlifetime) does *NOTHING*.&nbsp; You *HAVE* to modify the global &lt;php.ini&gt;.&nbsp; Not even a &lt;.htaccess&gt; file will help you.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90739""></a>
  <div class="note">
   <strong class="user">edA-qa at disemia dot com</strong>
   <a href="#90739" class="date">07-May-2009 02:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Sessions may be deleted before the time limit you set in gc_maxlifetime. <br />
<br />
If you have multiple pages on the same server, each using the session (the same or distinct named sessions, it doesn't matter), the *minimum* gc_maxlifetime of any of those scripts ends up being the effective lifetime of the session files.<br />
<br />
This can also apply to the lifetime coming from a CLI invocation of a PHP script on that machine which happens to use the session.<br />
<br />
This can be bothersome since even though you think all your pages include the same file which sets up the script, even a single PHP page which doesn't can invoke the GC and have the scripts deleted.<br />
<br />
Thus, if you need to set a long gc_maxlifetime you are best doing this through the INI file or in a .htaccess file for the entire directory.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87392""></a>
  <div class="note">
   <strong class="user">LaurentT</strong>
   <a href="#87392" class="date">03-Dec-2008 11:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For UNIX :
<br />

<br />
One might encounter some problems with sessions, having different sites on the same server : sessions would either merge if one is using more than one site at a time or crash if sites are owned by different system users. For instance :
<br />

<br />
www.example.com is stored in /home/site1/www
<br />
www.example.net is stored in /home/site2/www
<br />

<br />
Using both www.example.com and www.example.net would cause sessions to act weird.
<br />

<br />
If you're using PHP as an Apache module, you can easely use php_value in the http.conf to set a unique session.name depending on the site. If you're using suPHP though (PHP as CGI) you can't use php_value, though you can use suPHP_ConfigPath.
<br />

<br />
Here's an example : 
<br />

<br />
&lt;VirtualHost 10.10.10.10:8081&gt;
<br />
&nbsp;&nbsp;&nbsp; DocumentRoot /home/site1/www
<br />
&nbsp;&nbsp;&nbsp; ServerName www.example.com
<br />
&nbsp;&nbsp;&nbsp; suPHP_ConfigPath /home/site1/server_config
<br />
&lt;/VirtualHost&gt;
<br />
&lt;VirtualHost 10.10.10.10:8082&gt;
<br />
&nbsp;&nbsp;&nbsp; DocumentRoot /home/site2/www
<br />
&nbsp;&nbsp;&nbsp; ServerName www.example.net
<br />
&nbsp;&nbsp;&nbsp; suPHP_ConfigPath /home/site2/server_config
<br />
&lt;/VirtualHost&gt;
<br />

<br />
Each server_config folder contain a php.ini file specific to the vHost. You then just have to change the values of each session.name to unique ones and you're done !</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83625""></a>
  <div class="note">
   <strong class="user">hinom - iMasters</strong>
   <a href="#83625" class="date">05-Jun-2008 06:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
simple session test
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">/* [EDIT by danbrown AT php DOT net:
<br />
&nbsp;&nbsp; The author of this note named this
<br />
&nbsp;&nbsp; file tmp.php in his/her tests. If
<br />
&nbsp;&nbsp; you save it as a different name,
<br />
&nbsp;&nbsp; simply update the links at the
<br />
&nbsp;&nbsp; bottom to reflect the change.] */
<br />

<br />
</span><span class="default">session_start</span><span class="keyword">();
<br />

<br />
</span><span class="default">$sessPath&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">ini_get</span><span class="keyword">(</span><span class="string">'session.save_path'</span><span class="keyword">);
<br />
</span><span class="default">$sessCookie </span><span class="keyword">= </span><span class="default">ini_get</span><span class="keyword">(</span><span class="string">'session.cookie_path'</span><span class="keyword">);
<br />
</span><span class="default">$sessName&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">ini_get</span><span class="keyword">(</span><span class="string">'session.name'</span><span class="keyword">);
<br />
</span><span class="default">$sessVar&nbsp; &nbsp; </span><span class="keyword">= </span><span class="string">'foo'</span><span class="keyword">;
<br />

<br />
echo </span><span class="string">'&lt;br&gt;sessPath: ' </span><span class="keyword">. </span><span class="default">$sessPath</span><span class="keyword">;
<br />
echo </span><span class="string">'&lt;br&gt;sessCookie: ' </span><span class="keyword">. </span><span class="default">$sessCookie</span><span class="keyword">;
<br />

<br />
echo </span><span class="string">'&lt;hr&gt;'</span><span class="keyword">;
<br />

<br />
if( !isset( </span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'p'</span><span class="keyword">] ) ){
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// instantiate new session var
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="default">$sessVar</span><span class="keyword">] = </span><span class="string">'hello world'</span><span class="keyword">;
<br />
}else{
<br />
&nbsp;&nbsp;&nbsp; if( </span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'p'</span><span class="keyword">] == </span><span class="default">1 </span><span class="keyword">){
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// printing session value and global cookie PHPSESSID
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">echo </span><span class="default">$sessVar </span><span class="keyword">. </span><span class="string">': '</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( isset( </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="default">$sessVar</span><span class="keyword">] ) ){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="default">$sessVar</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }else{
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'[not exists]'</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'&lt;br&gt;' </span><span class="keyword">. </span><span class="default">$sessName </span><span class="keyword">. </span><span class="string">': '</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( isset( </span><span class="default">$_COOKIE</span><span class="keyword">[</span><span class="default">$sessName</span><span class="keyword">] ) ){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$_COOKIE</span><span class="keyword">[</span><span class="default">$sessName</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }else{
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( isset( </span><span class="default">$_REQUEST</span><span class="keyword">[</span><span class="default">$sessName</span><span class="keyword">] ) ){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$_REQUEST</span><span class="keyword">[</span><span class="default">$sessName</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else{
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( isset( </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'HTTP_COOKIE'</span><span class="keyword">] ) ){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'HTTP_COOKIE'</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else{
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'problem, check your PHP settings'</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; }else{
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// destroy session by unset() function
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">unset( </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="default">$sessVar</span><span class="keyword">] );
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// check if was destroyed
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if( !isset( </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="default">$sessVar</span><span class="keyword">] ) ){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'&lt;br&gt;'</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$sessName </span><span class="keyword">. </span><span class="string">' was "unseted"'</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }else{
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'&lt;br&gt;'</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$sessName </span><span class="keyword">. </span><span class="string">' was not "unseted"'</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>&lt;hr&gt;
<br />
&lt;a href=tmp.php?p=1&gt;test 1 (printing session value)&lt;/a&gt;
<br />
&lt;br&gt;
<br />
&lt;a href=tmp.php?p=2&gt;test 2 (kill session)&lt;/a&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82987""></a>
  <div class="note">
   <strong class="user">paul at shirron dot net</strong>
   <a href="#82987" class="date">05-May-2008 04:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In php.ini, I have:<br />
<br />
session.save_path="C:\DOCUME~1\pjs9486\LOCALS~1\Temp\php\session"<br />
<br />
I was cleaning out the temp directory, and deleted the php directory. Session stuff quit working. I re-created the php directory. Still no luck. I re-created the session directory in the php directory, and session stuff resumed working.<br />
<br />
I would have expected session_start() to have re-created directories in the path, if they didn't exist, but, it doesn't.<br />
<br />
Note to self: Don't do that again!!!!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82301""></a>
  <div class="note">
   <strong class="user">Vextor</strong>
   <a href="#82301" class="date">04-Apr-2008 05:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It seems that the garbage engine can't delete the expired session related to the itself. If there is only one session, it won't expire even if it has expired the gc_maxlifetime set.<br />
<br />
It will be necessary another client connecting, starting a different session, and the garbage collector of this new session will be able to clean the other expired sessions.<br />
<br />
I tested this in Windows with file sessions.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82149""></a>
  <div class="note">
   <strong class="user">session a emailaddress d cjb d net</strong>
   <a href="#82149" class="date">28-Mar-2008 08:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It doesn't appear in the documentation, or in anyone's comment here, but setting session.gc_maxlifetime to 0 means the session will not expire until the browser is closed.<br />
<br />
Of course this still doesn't fix the problems associated with the garbage collector doing it's own thing.<br />
The best solution to that still appears to be changing session.save_path</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81641""></a>
  <div class="note">
   <strong class="user">Csar</strong>
   <a href="#81641" class="date">07-Mar-2008 04:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There's a bug in Internet explorer in which sessions do not work if the name of the server is not a valid name. For example...if your server is called web_server (_ isn't a valid character), if you call a page which uses sessions like <a href="http://web_server/example.php your sessions won" rel="nofollow" target="_blank">http://web_server/example.php your sessions won</a>'t work but sessions will work if you call the script like this
<br />
[IP NUMBER]/example.php</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78151""></a>
  <div class="note">
   <strong class="user">carl /a/ suchideas /o/ com</strong>
   <a href="#78151" class="date">30-Sep-2007 06:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Another gotcha to add to this list is that using a relative session.save_path is a VERY BAD idea.<br />
<br />
You can just about pull it off, if you're very careful, but note two related points:<br />
<br />
1) The path is taken relative to the directory of the ORIGINALLY executed script, so unless all pages are run from the same directory, you'll have to set the directory separately in each individual subfolder<br />
<br />
2) If you call certain functions, such as session_regenerate_id(), PHP will try to take the session directory relative to the exectuable, or something like that, creating an error IN the executable. This provides slightly cryptic error messages, like this:<br />
<br />
Warning: Unknown: open(relative_path\ilti9oq3j9ks0jvih1fmiq4sv1.session, O_RDWR) failed: No such file or directory (2) in Unknown on line 0<br />
<br />
Warning: Unknown: Failed to write session data (files). Please verify that the current setting of session.save_path is correct (relative_path) in Unknown on line 0<br />
<br />
... so don't even bother. Just use<br />
<br />
<span class="default">&lt;?php ini_set</span><span class="keyword">(</span><span class="string">"session.save_path"</span><span class="keyword">,</span><span class="default">dirname</span><span class="keyword">(</span><span class="default">__FILE__</span><span class="keyword">).</span><span class="string">"/relative_path"</span><span class="keyword">); </span><span class="default">?&gt;<br />
</span><br />
(or equivalent) in a file which you know is always in the same place relative to the file.<br />
<br />
{PHP version 5.1.6}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77438""></a>
  <div class="note">
   <strong class="user">jsnell at e-normous dot com</strong>
   <a href="#77438" class="date">29-Aug-2007 10:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Careful not to try to use integer as a key to the $_SESSION array (such as $_SESSION[0] = 1;)&nbsp; or you will get the error "Notice: Unknown: Skipping numeric key 0. in Unknown on line 0"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76061""></a>
  <div class="note">
   <strong class="user">Nigel Barlass</strong>
   <a href="#76061" class="date">28-Jun-2007 03:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Lima's note on sessions and browser's tabs needs to be modified for my version of php as the call to uniqid('') will return an alphanumeric string.<br />
Hence the ereg statement should be:<br />
if(!ereg('^SESS[0-9a-z]+$',$_REQUEST['SESSION_NAME'])) {...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74557""></a>
  <div class="note">
   <strong class="user">Edemilson Lima &lt;pulstar at gmail dot com&gt;</strong>
   <a href="#74557" class="date">17-Apr-2007 03:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Sessions and browser's tabs
<br />

<br />
May you have noticed when you open your website in two or more tabs in Firefox, Opera, IE 7.0 or use 'Control+N' in IE 6.0 to open a new window, it is using the same cookie or is passing the same session id, so the another tab is just a copy of the previous tab. What you do in one will affect the another and vice-versa. Even if you open Firefox again, it will use the same cookie of the previous session. But that is not what you need mostly of time, specially when you want to copy information from one place to another in your web application. This occurs because the default session name is "PHPSESSID" and all tabs will use it. There is a workaround and it rely only on changing the session's name.
<br />

<br />
Put these lines in the top of your main script (the script that call the subscripts) or on top of each script you have:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">if(</span><span class="default">version_compare</span><span class="keyword">(</span><span class="default">phpversion</span><span class="keyword">(),</span><span class="string">'4.3.0'</span><span class="keyword">)&gt;=</span><span class="default">0</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">ereg</span><span class="keyword">(</span><span class="string">'^SESS[0-9]+$'</span><span class="keyword">,</span><span class="default">$_REQUEST</span><span class="keyword">[</span><span class="string">'SESSION_NAME'</span><span class="keyword">])) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_REQUEST</span><span class="keyword">[</span><span class="string">'SESSION_NAME'</span><span class="keyword">]=</span><span class="string">'SESS'</span><span class="keyword">.</span><span class="default">uniqid</span><span class="keyword">(</span><span class="string">''</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">output_add_rewrite_var</span><span class="keyword">(</span><span class="string">'SESSION_NAME'</span><span class="keyword">,</span><span class="default">$_REQUEST</span><span class="keyword">[</span><span class="string">'SESSION_NAME'</span><span class="keyword">]);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">session_name</span><span class="keyword">(</span><span class="default">$_REQUEST</span><span class="keyword">[</span><span class="string">'SESSION_NAME'</span><span class="keyword">]);
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
How it works: 
<br />

<br />
First we compare if the PHP version is at least 4.3.0 (the function output_add_rewrite_var() is not available before this release). 
<br />

<br />
After we check if the SESSION_NAME element in $_REQUEST array is a valid string in the format "SESSIONxxxxx", where xxxxx is an unique id, generated by the script. If SESSION_NAME is not valid (ie. not set yet), we set a value to it. 
<br />

<br />
uniqid('') will generate an unique id for a new session name. It don't need to be too strong like uniqid(rand(),TRUE), because all security rely in the session id, not in the session name. We only need here a different id for each session we open. Even getmypid() is enough to be used for this, but I don't know if this may post a treat to the web server. I don't think so.
<br />

<br />
output_add_rewrite_var() will add automatically a pair of 'SESSION_NAME=SESSxxxxx' to each link and web form in your website. But to work properly, you will need to add it manually to any header('location') and Javascript code you have, like this:
<br />

<br />
<span class="default">&lt;?php
<br />
header</span><span class="keyword">(</span><span class="string">'location: script.php?'</span><span class="keyword">.</span><span class="default">session_name</span><span class="keyword">().</span><span class="string">'='</span><span class="keyword">.</span><span class="default">session_id</span><span class="keyword">()
<br />
&nbsp;&nbsp; &nbsp;&nbsp; . </span><span class="string">'&amp;SESSION_NAME='</span><span class="keyword">.</span><span class="default">session_name</span><span class="keyword">());
<br />
</span><span class="default">?&gt;
<br />
</span>&lt;input type="image" src="button.gif" onClick="javascript:open_popup('script.php?<span class="default">&lt;?php 
<br />
</span><span class="keyword">echo </span><span class="default">session_name</span><span class="keyword">(); </span><span class="default">?&gt;</span>=<span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">session_id</span><span class="keyword">(); </span><span class="default">?&gt;</span>&amp;SESSION_NAME=<span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">session_name</span><span class="keyword">(); </span><span class="default">?&gt;</span>')" /&gt;
<br />

<br />
The last function, session_name() will define the name of the actual session that the script will use. 
<br />

<br />
So, every link, form, header() and Javascript code will forward the SESSION_NAME value to the next script and it will know which is the session it must use. If none is given, it will generate a new one (and so, create a new session to a new tab).
<br />

<br />
May you are asking why not use a cookie to pass the SESSION_NAME along with the session id instead. Well, the problem with cookie is that all tabs will share the same cookie to do it, and the sessions will mix anyway. Cookies will work partially if you set them in different paths and each cookie will be available in their own directories. But this will not make sessions in each tab completly separated from each other. Passing the session name through URL via GET and POST is the best way, I think.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37555""></a>
  <div class="note">
   <strong class="user">pautzomat at web dot de</strong>
   <a href="#37555" class="date">19-Nov-2003 09:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be aware of the fact that absolute URLs are NOT automatically rewritten to contain the SID. <br />
<br />
Of course, it says so in the documentation ('Passing the Session Id') and of course it makes perfectly sense to have that restriction, but here's what happened to me:<br />
I have been using sessions for quite a while without problems. When I used a global configuration file to be included in all my scripts, it contained a line like this:<br />
<br />
$sHomeDirectory = '<a href="http://my.server.com/one/of/my/projects" rel="nofollow" target="_blank">http://my.server.com/one/of/my/projects</a>'<br />
<br />
which was used to make sure that all automatically generated links had the right prefix (just like $cfg['PmaAbsoluteUri'] works in phpMyAdmin). After introducing that variable, no link would pass the SID anymore, causing every script to return to the login page. It took me hours (!!) to recognize that this wasn't a bug in my code or some misconfiguration in php.ini and then still some more time to find out what it was. The above restriction had completely slipped from my mind (if it ever was there...)<br />
<br />
Skipping the 'http:' did the job.<br />
<br />
OK, it was my own mistake, of course, but it just shows you how easily one can sabotage his own work for hours... Just don't do it ;)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="7915""></a>
  <div class="note">
   <strong class="user">shanemayer42 at yahoo dot com</strong>
   <a href="#7915" class="date">20-Aug-2000 04:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Session Garbage Collection Observation:
<br />

<br />
It appears that session file garbage collection occurs AFTER the current session is loaded.&nbsp; 
<br />

<br />
This means that:
<br />
even if session.gc_maxlifetime = 1 second, 
<br />
if someone starts a session A and no one starts a session for an hour,&nbsp; that person can reconnect to session A and all of their previous session values will be available (That is, session A will not be cleaned up even though it is older than gc_maxlifetime).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>执行外部程序，并且显示输出</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.shell-exec.html">? shell_exec</a></li>
      <li style="float: right;"><a href="book.pthreads.html">pthreads ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.exec.html">程序执行 函数</a></li>
    <li>执行外部程序，并且显示输出</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.system" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">system</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">system</span> &mdash; <span class="dc-title">执行外部程序，并且显示输出</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.system-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><strong>system</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$command</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter reference">&$return_var</code></span>
  ] )</div>

  <p class="para rdfs-comment">
    同 C 版本的 <span class="function"><strong>system()</strong></span> 函数一样，
    本函数执行 <code class="parameter">command</code> 参数所指定的命令，
    并且输出执行结果。
  </p>
  <p class="para">
    如果 PHP 运行在服务器模块中，
    <span class="function"><strong>system()</strong></span> 函数还会尝试在每行输出完毕之后，
    自动刷新 web 服务器的输出缓存。
  </p>
  <p class="para">
    如果要获取一个命令未经任何处理的
    原始输出，
    请使用 <span class="function"><a href="function.passthru.html" class="function">passthru()</a></span> 函数。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.system-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">command</code></dt>

     <dd>

      <p class="para">
       要执行的命令。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">return_var</code></dt>

     <dd>

      <p class="para">
        如果提供 <code class="parameter">return_var</code> 参数，
        则外部命令执行后的返回状态将会被设置到此变量中。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.system-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
    成功则返回命令输出的最后一行，
    失败则返回 <strong><code>FALSE</code></strong>
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.system-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-3671">
    <p><strong>Example #1 <span class="function"><strong>system()</strong></span> 例程</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'&lt;pre&gt;'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;输出&nbsp;shell&nbsp;命令&nbsp;"ls"&nbsp;的返回结果<br />//&nbsp;并且将输出的最后一样内容返回到&nbsp;$last_line。<br />//&nbsp;将命令的返回值保存到&nbsp;$retval。<br /></span><span style="color: #0000BB">$last_line&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">system</span><span style="color: #007700">(</span><span style="color: #DD0000">'ls'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$retval</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;打印更多信息<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'<br />&lt;/pre&gt;<br />&lt;hr&nbsp;/&gt;Last&nbsp;line&nbsp;of&nbsp;the&nbsp;output:&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$last_line&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'<br />&lt;hr&nbsp;/&gt;Return&nbsp;value:&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$retval</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.system-notes">
  <h3 class="title">注释</h3>
  <div class="warning"><strong class="warning">Warning</strong><p class="para">当用户提供的数据传入此函数，使用
<span class="function"><a href="function.escapeshellarg.html" class="function">escapeshellarg()</a></span> 或 <span class="function"><a href="function.escapeshellcmd.html" class="function">escapeshellcmd()</a></span>
来确保用户欺骗系统从而执行任意命令。</p></div>
  <blockquote class="note"><p><strong class="note">Note</strong>: <p class="para">如何程序使用此函数启动，为了能保持在后台运行，此程序必须将输出重定向到文件或其它输出流。否则会导致
PHP 挂起，直至程序执行结束。</p></p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara"><a href="features.safe-mode.html" class="link">安全模式</a> 启用时，可仅可用
<a href="ini.sect.safe-mode.html#ini.safe-mode-exec-dir" class="link">safe_mode_exec_dir</a> 执行文件。实际上，现在不允许在到可执行的路径中存在 <em>..</em> 组件。</span></p></blockquote>
  <div class="warning"><strong class="warning">Warning</strong><p class="simpara"><a href="features.safe-mode.html" class="link">安全模式</a> 启用时，命令字符串会被
<span class="function"><a href="function.escapeshellcmd.html" class="function">escapeshellcmd()</a></span> 转换。因此，<em>echo y | echo x</em> 会变成
<em>echo y \| echo x</em>。</p></div>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.system-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.exec.html" class="function" rel="rdfs-seeAlso">exec()</a> - 执行一个外部程序</span></li>
    <li class="member"><span class="function"><a href="function.passthru.html" class="function" rel="rdfs-seeAlso">passthru()</a> - 执行外部程序并且显示原始输出</span></li>
    <li class="member"><span class="function"><a href="function.popen.html" class="function" rel="rdfs-seeAlso">popen()</a> - 打开进程文件指针</span></li>
    <li class="member"><span class="function"><a href="function.escapeshellcmd.html" class="function" rel="rdfs-seeAlso">escapeshellcmd()</a> - shell 元字符转义</span></li>
    <li class="member"><span class="function"><a href="function.pcntl-exec.html" class="function" rel="rdfs-seeAlso">pcntl_exec()</a> - 在当前进程空间执行指定程序</span></li>
    <li class="member"><a href="language.operators.execution.html" class="link">执行操作符</a></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="116609""></a>
  <div class="note">
   <strong class="user">Tom Kaminski</strong>
   <a href="#116609" class="date">29-Jan-2015 02:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Seems like php doesn't recognize the -e command line switch for system command "echo":<br />
<br />
<span class="default">&lt;?php<br />
system</span><span class="keyword">(</span><span class="string">'echo -e hello'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
returns "-e hello", but you'd expect "hello".&nbsp; Odd thing is that you don't need to specify -e as it by default enables the interpretation of backslash escapes:<br />
<br />
<span class="default">&lt;?php<br />
system</span><span class="keyword">(</span><span class="string">'echo \'hello\nthere\'&nbsp; '</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
returns:<br />
hello<br />
there<br />
<br />
but running the same command from the bash shell:<br />
# echo 'hello\nthere'<br />
<br />
returns:<br />
hello\nthere<br />
<br />
My guess is that php does some special checks to see if echo is being executed by the system and automatically adds the -e switch.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115659""></a>
  <div class="note">
   <strong class="user">gvs</strong>
   <a href="#115659" class="date">04-Sep-2014 02:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
system() will flush the last line retuned from your executed process directly to the output buffer. This you will see in a double echo if you call 'echo system(...)' .<br />
To prevent this use exec() instead<br />
or<br />
change output buffering around the call.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112910""></a>
  <div class="note">
   <strong class="user">Vinicius Monteiro</strong>
   <a href="#112910" class="date">06-Aug-2013 11:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have a way to get the return of system, using ob_start() and ob_get_contents(). Ex.:<br />
<br />
ob_start();<br />
<br />
system("echo I'll catch the buffer");<br />
<br />
$return = ob_get_contents();<br />
<br />
ob_end_clean();</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108713""></a>
  <div class="note">
   <strong class="user">no at mail dot com</strong>
   <a href="#108713" class="date">20-May-2012 07:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is for WINDOWS users. I am running apache and I have been trying for hours now to capture the output of a command. <br />
<br />
I'd tried everything that is written here and then continued searching online with no luck at all. The output of the command was never captured. All I got was an empty array.<br />
<br />
Finally, I found a comment in a blog by a certain amazing guy that solved my problems. <br />
<br />
Adding the string ' 2&gt;&amp;1' to the command name finally returned the output!! This works in exec() as well as system() in PHP since it uses stream redirection to redirect the output to the correct place!<br />
<br />
system("yourCommandName 2&gt;&amp;1",$output) ;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102395""></a>
  <div class="note">
   <strong class="user">daveloop</strong>
   <a href="#102395" class="date">11-Feb-2011 04:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was trying to get the server-side to beep in windows 7.&nbsp; I finally found something that would work without creating my own EXE.<br />
<br />
Create a batch file with at the CMD prompt type:<br />
&nbsp;<br />
&nbsp;&nbsp; echo @echo (Alt-7)&gt;beep.bat<br />
<br />
Then execute it in PHP with:<br />
<br />
&nbsp;&nbsp; exec ('start /MIN c:\your_path_here\beep.bat');<br />
<br />
NOTE: The only drawback I can find is that a cmd.exe does visually flash on the system (which is why I used the /MIN to ensure it only goes to the taskbar).&nbsp; Not really sure why I don't like that, but it was a side effect that I wasn't looking for.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94929""></a>
  <div class="note">
   <strong class="user">kexianin at diyism dot com</strong>
   <a href="#94929" class="date">03-Dec-2009 08:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you can't see any output or error from system(), shell_exec() etc, you could try this:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">my_exec</span><span class="keyword">(</span><span class="default">$cmd</span><span class="keyword">, </span><span class="default">$input</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; {</span><span class="default">$proc</span><span class="keyword">=</span><span class="default">proc_open</span><span class="keyword">(</span><span class="default">$cmd</span><span class="keyword">, array(</span><span class="default">0</span><span class="keyword">=&gt;array(</span><span class="string">'pipe'</span><span class="keyword">, </span><span class="string">'r'</span><span class="keyword">), </span><span class="default">1</span><span class="keyword">=&gt;array(</span><span class="string">'pipe'</span><span class="keyword">, </span><span class="string">'w'</span><span class="keyword">), </span><span class="default">2</span><span class="keyword">=&gt;array(</span><span class="string">'pipe'</span><span class="keyword">, </span><span class="string">'w'</span><span class="keyword">)), </span><span class="default">$pipes</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$pipes</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="default">$input</span><span class="keyword">);</span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$pipes</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$stdout</span><span class="keyword">=</span><span class="default">stream_get_contents</span><span class="keyword">(</span><span class="default">$pipes</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);</span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$pipes</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$stderr</span><span class="keyword">=</span><span class="default">stream_get_contents</span><span class="keyword">(</span><span class="default">$pipes</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]);</span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$pipes</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rtn</span><span class="keyword">=</span><span class="default">proc_close</span><span class="keyword">(</span><span class="default">$proc</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return array(</span><span class="string">'stdout'</span><span class="keyword">=&gt;</span><span class="default">$stdout</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'stderr'</span><span class="keyword">=&gt;</span><span class="default">$stderr</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'return'</span><span class="keyword">=&gt;</span><span class="default">$rtn
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }
<br />
</span><span class="default">var_export</span><span class="keyword">(</span><span class="default">my_exec</span><span class="keyword">(</span><span class="string">'echo -e $(&lt;/dev/stdin) | wc -l'</span><span class="keyword">, </span><span class="string">'h\\nel\\nlo'</span><span class="keyword">));
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
For example, "echo shell_exec('ls');" will get nothing output,
<br />
"my_exec('ls');" will get "sh: ls: command not found",
<br />
"my_exec('/bin/ls');" will maybe get "sh: /bin/ls: Permission denied",
<br />
and the permission may be caused by selinux.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90664""></a>
  <div class="note">
   <strong class="user">grytolle at gmail dot com</strong>
   <a href="#90664" class="date">03-May-2009 07:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a work-around that makes the program run in it's own directory instead of the script's.
<br />

<br />
example usage:
<br />
<span class="default">&lt;?php runAsynchronously</span><span class="keyword">(</span><span class="string">"c:\games\jazz2\jazz2.exe"</span><span class="keyword">,</span><span class="string">"-connect 1.2.3.4"</span><span class="keyword">); </span><span class="default">?&gt;
<br />
</span>
<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">runAsynchronously</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">,</span><span class="default">$arguments</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$WshShell </span><span class="keyword">= new </span><span class="default">COM</span><span class="keyword">(</span><span class="string">"WScript.Shell"</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$oShellLink </span><span class="keyword">= </span><span class="default">$WshShell</span><span class="keyword">-&gt;</span><span class="default">CreateShortcut</span><span class="keyword">(</span><span class="string">"temp.lnk"</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$oShellLink</span><span class="keyword">-&gt;</span><span class="default">TargetPath </span><span class="keyword">= </span><span class="default">$path</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$oShellLink</span><span class="keyword">-&gt;</span><span class="default">Arguments </span><span class="keyword">= </span><span class="default">$arguments</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$oShellLink</span><span class="keyword">-&gt;</span><span class="default">WorkingDirectory </span><span class="keyword">= </span><span class="default">dirname</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$oShellLink</span><span class="keyword">-&gt;</span><span class="default">WindowStyle </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$oShellLink</span><span class="keyword">-&gt;</span><span class="default">Save</span><span class="keyword">();
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$oExec </span><span class="keyword">= </span><span class="default">$WshShell</span><span class="keyword">-&gt;</span><span class="default">Run</span><span class="keyword">(</span><span class="string">"temp.lnk"</span><span class="keyword">, </span><span class="default">7</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; unset(</span><span class="default">$WshShell</span><span class="keyword">,</span><span class="default">$oShellLink</span><span class="keyword">,</span><span class="default">$oExec</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">unlink</span><span class="keyword">(</span><span class="string">"temp.lnk"</span><span class="keyword">);
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90662""></a>
  <div class="note">
   <strong class="user">grytolle at gmail dot com</strong>
   <a href="#90662" class="date">03-May-2009 04:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A more direct approach:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">runAsynchronously</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$WshShell </span><span class="keyword">= new </span><span class="default">COM</span><span class="keyword">(</span><span class="string">"WScript.Shell"</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$oExec </span><span class="keyword">= </span><span class="default">$WshShell</span><span class="keyword">-&gt;</span><span class="default">Run</span><span class="keyword">(</span><span class="default">addslashes</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">), </span><span class="default">7</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; unset(</span><span class="default">$WshShell</span><span class="keyword">,</span><span class="default">$oExec</span><span class="keyword">);
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84945""></a>
  <div class="note">
   <strong class="user">dukeman at seagate dot com</strong>
   <a href="#84945" class="date">06-Aug-2008 10:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For novices remember that the executable has to be in a directory the server is serving or only local host will be able to access it.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83930""></a>
  <div class="note">
   <strong class="user">al at aj8 dot org</strong>
   <a href="#83930" class="date">19-Jun-2008 01:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In response to willytk at gmail dot com, 10-Sep-2007 01:39<br />
<br />
If imagemagick / convert from eps or pdf is not working because the gs executable is not in the apache path, you can compile imagemagick with&nbsp; --with-frozenpaths<br />
<br />
This makes imagemagick store the full path to the gs executable. The error I was getting before was<br />
"sh: gs: command not found"<br />
when convert was called with "-debug All"<br />
<br />
Cheers<br />
Alastair Battrick</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83572""></a>
  <div class="note">
   <strong class="user">Daniel Morris (danielxmorris.com)</strong>
   <a href="#83572" class="date">02-Jun-2008 03:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
How to produce a system beep with PHP.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">beep </span><span class="keyword">(</span><span class="default">$int_beeps </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$int_beeps</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++): </span><span class="default">$string_beeps </span><span class="keyword">.= </span><span class="string">"\x07"</span><span class="keyword">; endfor;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; isset (</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'SERVER_PROTOCOL'</span><span class="keyword">]) ? </span><span class="default">false </span><span class="keyword">: print </span><span class="default">$string_beeps</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
This will not do anything when running through a browser, if running through a shell it will produce an audible beep $int_beeps times.&nbsp; This should work on Windows, Unix, etc.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82411""></a>
  <div class="note">
   <strong class="user">vlad dot sharanhovich at gmail dot com</strong>
   <a href="#82411" class="date">09-Apr-2008 09:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The double quote problem on Windows platform discussed earlier here in comments still present in PHP 5.2.5. You can't execute system($command) if $command contains more than 2 " chars. system('"echo" A'); works, while system('"echo" "A"'); does not. Search comment, that was a solution posted to overhaul this issue via temporary .bat file.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80550""></a>
  <div class="note">
   <strong class="user">Dennis</strong>
   <a href="#80550" class="date">22-Jan-2008 04:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are writing CLI scripts in PHP and call external programs which produce some kind of progress bar you should really use passthru()&nbsp; for the output of the external program to go to the terminal immediately.<br />
Such progress bar are usually done by outputing the string with "\r" at the end, and contain no "\n". system() and friends look for "\n" before flushing the buffer. As a result, you see nothing during the lengthy operation and suddenly you get the 100% reading, because all output was buffered and quickly replayed into the terminal when the final "\n" has been seen.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77715""></a>
  <div class="note">
   <strong class="user">willytk at gmail dot com</strong>
   <a href="#77715" class="date">10-Sep-2007 02:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you're having problems with getting imagemagick/convert to work with ghostscript because the gs executable isn't in the apache PATH, do the following:<br />
<br />
To create a thumb of the first pdf page:<br />
<br />
<span class="default">&lt;?php<br />
$command</span><span class="keyword">= </span><span class="string">'export PATH=$PATH:/sw/bin; convert "files/example.pdf[0]" -thumbnail 150x150 "files/thumbs/example.png"'</span><span class="keyword">;<br />
<br />
</span><span class="default">$lastline </span><span class="keyword">= </span><span class="default">system</span><span class="keyword">(</span><span class="default">$command</span><span class="keyword">,</span><span class="default">$return</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Thanks entropy.ch and phpaladin!<br />
<br />
Regards,<br />
<br />
Willy T. Koch<br />
Oslo, Norway</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76561""></a>
  <div class="note">
   <strong class="user">timgolding_10 at hotmail dot com</strong>
   <a href="#76561" class="date">20-Jul-2007 04:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An example of using the system to call the file command on a linux server. This script detects whether a user posted file is a jpeg, gif or png<br />
<br />
<span class="default">&lt;?PHP<br />
<br />
$accepted_types</span><span class="keyword">=array(</span><span class="string">"JPEG" </span><span class="keyword">, </span><span class="string">"GIF"</span><span class="keyword">, </span><span class="string">"PNG"</span><span class="keyword">); <br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// The temporary filename of the file in which the uploaded file was stored on the server. <br />
</span><span class="keyword">if(!empty(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">"uploadedfile"</span><span class="keyword">]))<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$uploaddir </span><span class="keyword">= </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'DOCUMENT_ROOT'</span><span class="keyword">].</span><span class="string">"/images/"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$uploaddir</span><span class="keyword">.=</span><span class="default">basename</span><span class="keyword">( </span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">'uploadedfile'</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">]);<br />
&nbsp;&nbsp; <br />
&nbsp;</span><span class="comment">//verfiy file using linux FILE command <br />
&nbsp;</span><span class="default">$last_line </span><span class="keyword">= </span><span class="default">system</span><span class="keyword">(</span><span class="string">'file '</span><span class="keyword">.</span><span class="default">escapeshellarg</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">'uploadedfile'</span><span class="keyword">][</span><span class="string">'tmp_name'</span><span class="keyword">]), </span><span class="default">$retval</span><span class="keyword">);<br />
<br />
&nbsp;</span><span class="comment">//get the file extension returned through magic database<br />
&nbsp;</span><span class="default">$splitvals</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">' image data' </span><span class="keyword">,&nbsp; </span><span class="default">$last_line</span><span class="keyword">);<br />
&nbsp;</span><span class="default">$vals</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">':'</span><span class="keyword">, </span><span class="default">$splitvals</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br />
&nbsp;</span><span class="default">$vals</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]=</span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">, </span><span class="default">$vals</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]); <br />
<br />
&nbsp;if (</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$vals</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$accepted_types</span><span class="keyword">))<br />
&nbsp;{<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$vals</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">].</span><span class="string">' was accepted &lt;br /&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$uploaddir</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Copy the file to some permanent location<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">move_uploaded_file</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">"uploadedfile"</span><span class="keyword">][</span><span class="string">"tmp_name"</span><span class="keyword">], </span><span class="default">$uploaddir</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$uploaddir</span><span class="keyword">.</span><span class="string">" was uploaded! &lt;br /&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"There was a problem when uploding the new file, please contact admin about this."</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else echo </span><span class="string">'This file already exists in DB please rename file before uploading'</span><span class="keyword">;<br />
}<br />
}else echo </span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">'uploadedfile'</span><span class="keyword">][</span><span class="string">'error'</span><span class="keyword">].</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75883""></a>
  <div class="note">
   <strong class="user">eis</strong>
   <a href="#75883" class="date">20-Jun-2007 11:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It should be noted, too, that "unable to fork" error in Windows also occurs if you try to send a command that's too long for cmd.exe to process.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74173""></a>
  <div class="note">
   <strong class="user">peter at randomnity dot com</strong>
   <a href="#74173" class="date">28-Mar-2007 06:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just a note to dan at thecsl dot org<br />
<br />
0 and FALSE are _NOT_ the same.<br />
You can check for false like so:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if(</span><span class="default">$return_val </span><span class="keyword">=== </span><span class="default">FALSE</span><span class="keyword">) {<br />
&nbsp;&nbsp; </span><span class="comment">// ....<br />
</span><span class="keyword">} else if (</span><span class="default">$return_val </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; </span><span class="comment">// ...<br />
</span><span class="keyword">}<br />
</span><span class="comment">// Continue...<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74012""></a>
  <div class="note">
   <strong class="user">jordan314 at mailinator dot com</strong>
   <a href="#74012" class="date">20-Mar-2007 09:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
z1a7n8g, your system logging to file function was really useful, but had two errors:<br />
$line=fgets($fPtr,filesize("yourfile.php");<br />
that line needs a second closing ')'<br />
and:<br />
while ($line)<br />
returns true until your script runs out of memory. Those two lines can be combined:<br />
while($line=fgets($fPtr,filesize("yourfile.php")));</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73737""></a>
  <div class="note">
   <strong class="user">norman_ss at hotmail dot com</strong>
   <a href="#73737" class="date">08-Mar-2007 12:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
thanks to tr4nc3,<br />
<br />
I'm trying to, from the explorer, run an access's macro and this example give me the solution:<br />
<br />
You can execute a .bat file with the especifications that give us tr4nc3.<br />
After, in this .bat file, you can execute msacces.exe and pass /x parameter with the name of the macro. like this:<br />
<br />
"c:\windows\system32\cmd.exe /c &lt;path or the msaccess.exe&gt;" &lt;path of the .mdb file&gt; /x &lt;name of the macro&gt;"<br />
<br />
At the end of the .bat file you have to put "exit" and the thread will end.<br />
<br />
Thanks to tr4nc3!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="66795""></a>
  <div class="note">
   <strong class="user">dan at thecsl dot org</strong>
   <a href="#66795" class="date">29-May-2006 05:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You probably want to check your system calls for errors. The convention is to return 0&nbsp; for "no error" which is the same as FALSE which can be confusing. You need to do something like:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; $cmd </span><span class="keyword">= </span><span class="string">"/usr/bin/pngtopnm </span><span class="default">$png_file</span><span class="string"> &gt; </span><span class="default">$pnm_file</span><span class="string">"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">system</span><span class="keyword">(</span><span class="default">$cmd</span><span class="keyword">,</span><span class="default">$return_value</span><span class="keyword">);<br />
&nbsp; (</span><span class="default">$return_value </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) or die(</span><span class="string">"returned an error: </span><span class="default">$cmd</span><span class="string">"</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60836""></a>
  <div class="note">
   <strong class="user">matt-php at cdsportland dot com</strong>
   <a href="#60836" class="date">18-Jan-2006 06:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If using Windows with IIS and you're having problems with the system() and related commands, I found the easiest way to solve it was to modify the Authentication Method for the file (or directory) that uses the call and change the anonymous access user from the default (IUSR_IMAGE) to a user with enough permissions to execute the commands in the system call.&nbsp; This way, there is no need to give execute permissions to IUSR_IMAGE on cmd.exe (which opens up a security risk system-wide) or copy cmd.exe into your php directory (per the suggestions of others).&nbsp; Hope this helps someone!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58423""></a>
  <div class="note">
   <strong class="user">cho at stunt growth dot com</strong>
   <a href="#58423" class="date">03-Nov-2005 10:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note to the persons who suggested using backticks for gathering a return value from scripts via system().<br />
<br />
Using Backticks is generally frowned upon for security sake.&nbsp; They can be exploited more easily.<br />
<br />
Instead, why not use the exec() function with a return parameter specified as an array type.&nbsp; This will allow you to take the full string returned from your script (for example rsync) and return each line in an array.<br />
<br />
like so:<br />
$result = array();<br />
exec( $cmd, &amp;$result);<br />
foreach ( $result as $v )<br />
{<br />
// parse, or do cool stuff<br />
}<br />
<br />
Hope this alternative brings you merriment.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55627""></a>
  <div class="note">
   <strong class="user">vdweij at hotmail dot com</strong>
   <a href="#55627" class="date">09-Aug-2005 11:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It is possible to only capture the error stream (STERR). Here it goes...<br />
<br />
(some_command par1 par2 &gt; /dev/null) 3&gt;&amp;1 1&gt;&amp;2 2&gt;&amp;3<br />
<br />
-First STDOUT is redirected to /dev/null.<br />
-By using parenthesis it is possible to gain control over STERR and STOUT again.<br />
-Then switch STERR with STOUT. <br />
<br />
The switch is using the standard variable switch method -- 3 variables (buckets) are required to swap 2 variables with each other. (you have 2 variables and you need to switch the contents - you must bring in a 3rd temporary variable to hold the contents of one value so you can properly swap them).<br />
<br />
This link gave me this information:<br />
<a href="http://www.cpqlinux.com/redirect.html" rel="nofollow" target="_blank">http://www.cpqlinux.com/redirect.html</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52770""></a>
  <div class="note">
   <strong class="user">Stuart Prescott</strong>
   <a href="#52770" class="date">12-May-2005 07:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that for stderr redirection, you have to use double quotes (") not single quotes (') for the 2&gt;&amp;1 part at least.<br />
<br />
&lt;?<br />
//e.g. the this will NOT do what you expect:<br />
exec('mysqldump -h localhost ...... 2&gt;&amp;1', $output);<br />
<br />
//but this will:<br />
exec("mysqldump -h localhost ...... 2&gt;&amp;1", $output);<br />
?&gt;<br />
<br />
*sigh*<br />
<br />
(Sounds like a PHP bug to me..., or at least buggy docs!)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52273""></a>
  <div class="note">
   <strong class="user">phil at pjhayward.net</strong>
   <a href="#52273" class="date">26-Apr-2005 10:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On Windows XP, (possibly others)<br />
<br />
If you are getting the unable to fork error, make sure the internet guest user has permission to read and execute the \Windows\System32\cmd.exe file.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52195""></a>
  <div class="note">
   <strong class="user">admin at nabeelakhtar dot net</strong>
   <a href="#52195" class="date">24-Apr-2005 04:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Windows XP (IIS) users: (Unable to fork Problem)<br />
<br />
If you receive something like:<br />
Warning:&nbsp; passthru() [function.passthru]: Unable to fork [dir] in c:\Inetpub\wwwroot\ping.php on line X<br />
<br />
1. Copy CMD.EXE file from the Windows\System32\ folder to your PHP directory (c:\PHP\).<br />
<br />
This should fix the problem.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="48010""></a>
  <div class="note">
   <strong class="user">Shai Coleman</strong>
   <a href="#48010" class="date">09-Dec-2004 01:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The easiest way to run a process in the background under Windows, is to use system() with the bgrun.exe utility, available from <a href="http://www.jukkis.net/bgrun/" rel="nofollow" target="_blank">http://www.jukkis.net/bgrun/</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="45961""></a>
  <div class="note">
   <strong class="user">roga at yoopee dot de</strong>
   <a href="#45961" class="date">24-Sep-2004 06:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In combination with Zend Optimizer and Windows 2K/XP some programs may not run with system(), exec(), etc.<br />
<br />
I tried to use a small tool for ejecting the cd tray and it did just nothing. Disabling Zend Optimizer solved it.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="45390""></a>
  <div class="note">
   <strong class="user">srawlinNOSPAM at magma dot ca</strong>
   <a href="#45390" class="date">04-Sep-2004 10:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are running PHP in a chroot environment then the system (and passthru) function needs /bin/sh to be located in the chroot as well.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42567""></a>
  <div class="note">
   <strong class="user">eric_REMOVE at movementmovement_REMOVE dot com</strong>
   <a href="#42567" class="date">21-May-2004 09:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It's important to note that if you are running a series of system() commands in a loop, you need to include the second argument in order for them to run synchonously.<br />
<br />
ie)<br />
<br />
// this will execute process.php asynchronously; not waiting for completion before executing the next one.<br />
$array = array('apple', 'banana', 'pear');<br />
foreach($array as $i)<br />
{<br />
system("php process.php \"fruit=$i\"");<br />
}<br />
<br />
// this will execute process.php 3 times, waiting for the prior command to complete before starting a new one<br />
$array = array('apple', 'banana', 'pear');<br />
foreach($array as $i)<br />
{<br />
system("php process.php \"fruit=$i\"", $status);<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="40581""></a>
  <div class="note">
   <strong class="user">beetung at yahoo dot com</strong>
   <a href="#40581" class="date">08-Mar-2004 10:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Under Linux<br />
exec() doesnt follow symbolic link when interpret by httpd...<br />
<br />
I have my /home/www/cgi-bin --&gt; soft linked to a samba mounted directory under /mnt/Downloads/www.site.com/cgi-bin<br />
<br />
exec("/home/www/cgi-bin/runProg $a $b");<br />
<br />
works ok when I execute the script using &gt; php myscript.php but fails to show the output when run via the web browser.<br />
<br />
When I give it the exact full path without the symbolic link<br />
<br />
exec("/mnt/Downloads/www.site.com/cgi-bin/runProg $a $b");<br />
<br />
everything works perfectly.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="40454""></a>
  <div class="note">
   <strong class="user">mortoray at ecircle-ag dot com</strong>
   <a href="#40454" class="date">04-Mar-2004 12:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Do not use "system" if you use the "php.ini" option:<br />
&nbsp;&nbsp;&nbsp; zlib.output_compression = On<br />
<br />
Doing so will result in the browser receiving garbage (I'm guessing the headers/buffers get confused).<br />
<br />
Use passthru in this case, it appears to work as intended.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="40110""></a>
  <div class="note">
   <strong class="user">tr4nc3 at msn dot com</strong>
   <a href="#40110" class="date">22-Feb-2004 11:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I almost gave up trying to get Windows XP w/ Apache 2 to use either system(), or exec() to run a batch file.<br />
<br />
If the batch file was this...<br />
<br />
echo test &gt; test.txt<br />
<br />
it would work fine, creating test.txt...<br />
<br />
but if the batch file was..<br />
<br />
iexplore.exe "<a href="http://www.ibm.com" rel="nofollow" target="_blank">http://www.ibm.com</a>"<br />
<br />
I would get nothing. After hours and hours of messing around with this I figured it must be some type of permission problem. (dugh!)<br />
<br />
Long story a little shorter.. You have to give Apache permission to "interact with the desktop".<br />
<br />
Here's how...<br />
<br />
Start&gt;Run&gt;services.msc<br />
Right click "Apache...", select properties.<br />
Click on the "LOG ON" tab<br />
Check the box "Allow this service to interact with desktop"<br />
Click OK<br />
Restart Apache<br />
<br />
Works great!<br />
:D<br />
<br />
HOPE THIS HELPS SOMEONE!<br />
Too bad I didn't find a post like this before I figured it out myself. (I could have been working on something.)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="39969""></a>
  <div class="note">
   <strong class="user">djem at shadrinsk dot net</strong>
   <a href="#39969" class="date">17-Feb-2004 02:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
BUGFIX for the mysystem() function, posted by n-jones.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">syscall</span><span class="keyword">(</span><span class="default">$command</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$proc </span><span class="keyword">= </span><span class="default">popen</span><span class="keyword">(</span><span class="string">"(</span><span class="default">$command</span><span class="string">)2&gt;&amp;1"</span><span class="keyword">,</span><span class="string">"r"</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while (!</span><span class="default">feof</span><span class="keyword">(</span><span class="default">$proc</span><span class="keyword">)) </span><span class="default">$result </span><span class="keyword">.= </span><span class="default">fgets</span><span class="keyword">(</span><span class="default">$proc</span><span class="keyword">, </span><span class="default">1000</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">pclose</span><span class="keyword">(</span><span class="default">$proc</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
Hello from Russia! :)<br />
djem.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37835""></a>
  <div class="note">
   <strong class="user">diogaogv at icqmail dot com</strong>
   <a href="#37835" class="date">29-Nov-2003 01:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
a really useful use for import(); while running the server at ur own machine is taking a screenshot of you desktop and showing it to the guest !!!<br />
<br />
&lt;?<br />
echo system("/usr/X11R6/bin/import -window root -display localhost:0 /mnt/d/Desenvolvimento/Desenvolvimento\ WWW/import/cache/imagem.jpg -quality 30" ." 2&gt;&amp;1");<br />
?&gt;<br />
&lt;img src="cache/imagem.jpg"&gt;<br />
<br />
remember to set chmod 777 to your directory (called "cache" on my code). also do "xhost +" or you r gonna get a xlib error saying that it could not connect to x server at localhost...<br />
<br />
the code is still too simple. i've just done it. e.g. you can improve a real cache system avoying more than one screenshot in a minute while...<br />
<br />
that is it! hope u enjoy it ( rofl... =DDD ) ...<br />
<br />
diogo86</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37089""></a>
  <div class="note">
   <strong class="user">tomlubbock at hotmail dot com</strong>
   <a href="#37089" class="date">03-Nov-2003 03:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need to run root-level commands, such as to reboot a service, the utility 'sudo' will let you handle linux permissions. In our example we use 'sudo' to allow apache temporary root access to restart a service. We can then use:<br />
<br />
system("sudo service dhcpd restart")<br />
<br />
You also need to examine the /etc/sudoers file to specify what permissions to grant. Hope this helps someone!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="35842""></a>
  <div class="note">
   <strong class="user">morris_hirsch at hotmail dot com</strong>
   <a href="#35842" class="date">16-Sep-2003 11:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
another reason to use shell_exec instead of system is when the result is multiple lines such as grep or ls <br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// this correctly sets answer string to all lines found<br />
//$answer = shell_exec ("grep 'set of color names' *.php ");<br />
//echo "answer = $answer";<br />
<br />
// this passes all lines to output (they&nbsp; show on page)<br />
// and sets answer string to the final line<br />
&nbsp;</span><span class="default">$sys </span><span class="keyword">= </span><span class="default">system </span><span class="keyword">(</span><span class="string">"grep 'set of color names' *.php "</span><span class="keyword">);<br />
&nbsp;echo </span><span class="string">"sys =((</span><span class="default">$sys</span><span class="string">))"</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
here is view/source resulting from system call<br />
<br />
setprefs.php:// The standard set of color names is:<br />
setprefs.php:// Most browsers accept a wider set of color names<br />
silly.php:&nbsp; //$answer = shell_exec ("grep 'set of color names' *.php ");<br />
silly.php: $sys = system ("grep 'set of color names' *.php ");<br />
sys =((silly.php: $sys = system ("grep 'set of color names' *.php ");))<br />
<br />
and here is view source from using shell_exec instead<br />
<br />
answer = setprefs.php:// The standard set of color names is:<br />
setprefs.php:// Most browsers accept a wider set of color names<br />
silly.php:&nbsp; $answer = shell_exec ("grep 'set of color names' *.php ");<br />
silly.php:// $sys = system ("grep 'set of color names' *.php ");</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="35649""></a>
  <div class="note">
   <strong class="user">lc at _REMOVE__THIS_lc dot yi dot org</strong>
   <a href="#35649" class="date">10-Sep-2003 02:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Re: cpmorris at hotmail dot com and WINNT.<br />
<br />
I just spent some time learning to use the php system function.&nbsp; I managed to get long file names to work for me.&nbsp; It seems you need to take the same approach that batch files, WSH, and most other programming languages do under WinNT/2K/XP.&nbsp; Putting double quotes around the Path+Filename seems to work.&nbsp; So, something like this should have worked for you:<br />
<br />
"c:\program files\apache group\apache2\bin\htpasswd"<br />
<br />
Note that if you have parameters, they go OUTSIDE of the last quote.&nbsp; Oh, and don't forget to escape the slashes and quotes!&nbsp; <br />
<br />
I don't know what htpasswd's params are, but let us pretend:<br />
<br />
$cmd="\"c:\\program files\\apache group\\apache2\\bin\\htpasswd\" username password";<br />
$str=system($cmd);<br />
<br />
Hope this helps someone!<br />
<br />
Leonard<br />
http:\\www.lc.yi.org</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="35297""></a>
  <div class="note">
   <strong class="user">Jim Belton</strong>
   <a href="#35297" class="date">26-Aug-2003 10:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To run a full screen program from a PHP CLI script, redirect input from and output to /dev/tty.&nbsp; For example:<br />
<br />
system("timeconfig &gt; /dev/tty &lt; /dev/tty");<br />
<br />
System will wait for the program to finish before continuing.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="33617""></a>
  <div class="note">
   <strong class="user">chris at karakas-online dot de</strong>
   <a href="#33617" class="date">02-Jul-2003 03:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If your PHP installation permits execution of commands through system() (e.g. you are not running in safe mode, or, if you are, safe_mode_exec_dir contains all the commands you need), you can trigger a backup of your MySQL database, just by pointing your browser to the following script:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="comment">// Enter your MySQL access data&nbsp; <br />
&nbsp; </span><span class="default">$host</span><span class="keyword">= </span><span class="string">'dbhost'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp; </span><span class="default">$user</span><span class="keyword">= </span><span class="string">'dbuser'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp; </span><span class="default">$pass</span><span class="keyword">= </span><span class="string">'dbpassword'</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$db</span><span class="keyword">=&nbsp;&nbsp; </span><span class="string">'db'</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">$backupdir </span><span class="keyword">= </span><span class="string">'backups'</span><span class="keyword">;&nbsp;&nbsp; <br />
<br />
&nbsp; </span><span class="comment">// Compute day, month, year, hour and min.<br />
&nbsp; </span><span class="default">$today </span><span class="keyword">= </span><span class="default">getdate</span><span class="keyword">();<br />
&nbsp; </span><span class="default">$day </span><span class="keyword">= </span><span class="default">$today</span><span class="keyword">[</span><span class="default">mday</span><span class="keyword">];<br />
&nbsp; if (</span><span class="default">$day </span><span class="keyword">&lt; </span><span class="default">10</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$day </span><span class="keyword">= </span><span class="string">"0</span><span class="default">$day</span><span class="string">"</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; </span><span class="default">$month </span><span class="keyword">= </span><span class="default">$today</span><span class="keyword">[</span><span class="default">mon</span><span class="keyword">];<br />
&nbsp; if (</span><span class="default">$month </span><span class="keyword">&lt; </span><span class="default">10</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$month </span><span class="keyword">= </span><span class="string">"0</span><span class="default">$month</span><span class="string">"</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; </span><span class="default">$year </span><span class="keyword">= </span><span class="default">$today</span><span class="keyword">[</span><span class="default">year</span><span class="keyword">];<br />
&nbsp; </span><span class="default">$hour </span><span class="keyword">= </span><span class="default">$today</span><span class="keyword">[</span><span class="default">hours</span><span class="keyword">];<br />
&nbsp; </span><span class="default">$min </span><span class="keyword">= </span><span class="default">$today</span><span class="keyword">[</span><span class="default">minutes</span><span class="keyword">];<br />
&nbsp; </span><span class="default">$sec </span><span class="keyword">= </span><span class="string">"00"</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="comment">// Execute mysqldump command.<br />
&nbsp; // It will produce a file named $db-$year$month$day-$hour$min.gz <br />
&nbsp; // under $DOCUMENT_ROOT/$backupdir<br />
&nbsp; </span><span class="default">system</span><span class="keyword">(</span><span class="default">sprintf</span><span class="keyword">( <br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'mysqldump --opt -h %s -u %s -p%s %s | gzip &gt; %s/%s/%s-%s%s%s-%s%s.gz'</span><span class="keyword">,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$host</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$user</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pass</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$db</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">getenv</span><span class="keyword">(</span><span class="string">'DOCUMENT_ROOT'</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$backupdir</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$db</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$year</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$month</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$day</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$hour</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$min<br />
&nbsp; </span><span class="keyword">));&nbsp; <br />
&nbsp; echo </span><span class="string">'+DONE'</span><span class="keyword">;&nbsp; <br />
</span><span class="default">?&gt;</span> <br />
<br />
If you are not allowed cron access on the web server, you can set up your own cron job to periodically call the above script. If you don't have cron, or a similar functionality on your system, you can still modify the above script to inform the browser to reget the file every xxx hours. A poor man's cron, so to say ;-)<br />
<br />
Of course, the $backupdir should at least be protected with a .htaccess file.<br />
<br />
And of course, you are not going to backup a really large database this way, if your PHP has some timeout set (as is usually the case with web hosters).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="30193""></a>
  <div class="note">
   <strong class="user">d dot kraft at szo dot de</strong>
   <a href="#30193" class="date">10-Mar-2003 11:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For PHP running inside a Webserver:<br />
<br />
When calling a process via<br />
system("your_process &amp;");<br />
to make it running in background, note that this process is killed when the webserver is restarted.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="30053""></a>
  <div class="note">
   <strong class="user">cnoelker at softpearls dot de</strong>
   <a href="#30053" class="date">05-Mar-2003 03:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi,<br />
some tips for using a system()-call for batch files on a windows computer:<br />
* Write the path to the executable with double back-slashes, like so:<br />
&nbsp;&nbsp; C:\\path\\to\\prog.exe<br />
* If you are refering to other pathes, e.g. as a parameter, one back-slash works fine.<br />
* Do not use SET for declaring parameters - this does not work! Example:<br />
&nbsp;&nbsp; SET PATH="C:\path\to\lib"<br />
&nbsp;&nbsp; echo path is %PATH%<br />
This works fine when started from the comand line, but when called from PHP, the variable is just empty.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="28519""></a>
  <div class="note">
   <strong class="user">user at unknown dot com</strong>
   <a href="#28519" class="date">15-Jan-2003 11:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
a simple way to include a beep on the server-side whenever a page in viewed.<br />
**contents of 'beeping' page**<br />
require ("beep.php")<br />
<br />
**contents of beep.php**<br />
<span class="default">&lt;?php<br />
system </span><span class="keyword">(</span><span class="string">"/home/site/exe/beep.executable"</span><span class="keyword">);<br />
</span><span class="comment">// on windows system ("c:\beep.exe");<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="24031""></a>
  <div class="note">
   <strong class="user">n-jones at fredesign dot net</strong>
   <a href="#24031" class="date">05-Aug-2002 12:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To have system output from both the STDERR and STDOUT, I've modified the function posted above by lowery@craiglowery.com<br />
<br />
function mysystem($command) {<br />
&nbsp; if (!($p=popen("($command)2&gt;&amp;1","r"))) { <br />
&nbsp;&nbsp;&nbsp; return 126;<br />
&nbsp; }<br />
<br />
&nbsp; while (!feof($p)) {<br />
&nbsp;&nbsp;&nbsp; $line=fgets($p,1000);<br />
&nbsp;&nbsp;&nbsp; $out .= $line;<br />
&nbsp; }<br />
&nbsp; pclose($p);<br />
&nbsp; return $out; <br />
}<br />
<br />
Now you can use mysystem() like;<br />
<br />
$var = "cat ".$file;<br />
echo mysystem($var);<br />
<br />
$catfile = mysystem($var);<br />
<br />
if (ereg("text", $catfile)) {<br />
&nbsp; //stuff here;<br />
}<br />
<br />
N.Jones</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="23532""></a>
  <div class="note">
   <strong class="user">a dot paul at bernardlabs dot com</strong>
   <a href="#23532" class="date">21-Jul-2002 01:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Well system is a pretty interesting and useful function.<br />
<br />
This might have been already pointed out by predessors but anyways, for anyone looking to execute command line queries from php or scripts in general, this function does the trick.<br />
<br />
However while using the command, you have to always think in terms of the command you are using as the function and the parameters as the arguments.<br />
<br />
So say I want to do a 'ls -ls' on /home/sites/sitexyz/www/$username<br />
<br />
I could do a <br />
<br />
system("ls -la \"/home/sites/sitexyz/www/$username\" ");<br />
<br />
Its important to think of this as passing&nbsp; &nbsp; &nbsp; /home/sites/sitexyz/www/$username&nbsp; &nbsp;&nbsp; as an argument to the function ls -la .<br />
<br />
Similarly, you could do a <br />
<br />
system("cp -r \"/home/sites/sitexyz/www/$username\"&nbsp; \"/home/sites/sitexyz/www/$username2\" ");<br />
<br />
But you then need to use 'chmod -R 777 to the directory you want to copy it to, which can be done by a&nbsp; <br />
<br />
system("chmod -R 777&nbsp;&nbsp; \"/home/sites/sitexyz/www/$username2\" ");<br />
<br />
Now you can execute all the terminal commans via the php, however do realise the security concerns of using the same, especially when the operation is going to preceeded by some user input, so, you need to make sure you filter the inputs, or better not allow user intervention.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="21427""></a>
  <div class="note">
   <strong class="user">roger at proproject dot com</strong>
   <a href="#21427" class="date">13-May-2002 07:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For your in-house pages, I recommend redirecting stderr to stdout so you'll know if something goes wrong.&nbsp; Here's a real-life example:<br />
<br />
system("/mysql_reboot 2&gt;&amp;1");</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="20207""></a>
  <div class="note">
   <strong class="user">james at jsrobertson dot net</strong>
   <a href="#20207" class="date">26-Mar-2002 08:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've found a very useful technique for the system function. Say if you want to create a page of quotes and you have /usr/games/fortune available. Instead of spending time creating a database and populating it with thousands of quotes, you can just use:<br />
<br />
<span class="default">&lt;?php<br />
system</span><span class="keyword">(</span><span class="string">'/usr/games/fortune'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
likewise if you want to list the files in your directory, say for example, Mp3's?<br />
<br />
<span class="default">&lt;?php<br />
system</span><span class="keyword">(</span><span class="string">'ls /home/mp3 -l'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
basically<br />
<br />
<span class="default">&lt;?php<br />
system</span><span class="keyword">(</span><span class="string">'any_command'</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="20062""></a>
  <div class="note">
   <strong class="user">z1a7n8g at / at a&lt;o&lt;l dot c&lt;o&lt;m</strong>
   <a href="#20062" class="date">21-Mar-2002 05:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I am currently using a form driven administration<br />
page to start an ftp server remotely from a web page in FreeBSD 4.5 using PHP 4.1.2 &amp; apache 1.3.23. (Sorry guys, no CVS!!)<br />
This code will emulate a CLI command from your browser (anywhere!!) and execute it if your PHP module/binary has the correct permissions...<br />
&lt;code&gt;&lt;pre&gt;<br />
//your front end<br />
&lt;form ..your form stuff here...&gt;<br />
&lt;input type="text" name=command&gt;<br />
&lt;your additional form stuff&gt;<br />
///the gutz<br />
&lt;? <br />
&nbsp;$arg=explode( " ", $command, 4 )<br />
&nbsp;&nbsp; &nbsp; if ($arg[0] = "system")<br />
&nbsp;&nbsp; &nbsp; &nbsp; { <br />
&nbsp;system($arg[1] . " " . $arg[2] . " " . $arg[3]..etc);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }?&gt;<br />
&lt;/code&gt;&lt;/pre&gt;<br />
This works, however it is simple and lacks any error output.<br />
try:<br />
&lt;pre&gt;&lt;code&gt;<br />
&nbsp;&lt;?system(command &gt; /path/to/yourfile.php);<br />
&nbsp;&nbsp; &nbsp; $fPtr=@fopen("yourfile.php",r);<br />
&nbsp;&nbsp; &nbsp; $line=fgets($fPtr,filesize("yourfile.php");<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while ($line)<br />
&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $formatted_line=ereg_replace("your favorite newline semantic","&lt;BR&gt;",$line);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; print $formatted_line;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
<br />
&nbsp;?&gt;<br />
&lt;/pre&gt;&lt;/code&gt;<br />
Keep in mind the SECURITY implications with the use of this and like scripts. You've been warned.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="19230""></a>
  <div class="note">
   <strong class="user">tk at taponet dot de</strong>
   <a href="#19230" class="date">20-Feb-2002 04:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Beware:
<br />
if (! system($cmd)) {
<br />
&nbsp; print "error";
<br />
}
<br />

<br />
does not work!
<br />
Use
<br />
if (system($cmd) === false) {
<br />
...}
<br />

<br />
instead!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="15159""></a>
  <div class="note">
   <strong class="user">ryan at seattleone dot com</strong>
   <a href="#15159" class="date">30-Aug-2001 02:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was trying to use the system command, and I couldnt get it to work, then it occured to me, send the stderr to a file to see what is really happening.
<br />

<br />
system( $command . " &amp;&gt; /tmp/error " );</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="6978""></a>
  <div class="note">
   <strong class="user">nospam at php dot net</strong>
   <a href="#6978" class="date">24-Jul-2000 02:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are trying to parse a CGI script to your webserver which needs arguments, take a look to the virtual() function .. it took me long before i found out it existed...
<br />
It's used like this:
<br />
<span class="default">&lt;?php
<br />
virtual</span><span class="keyword">(</span><span class="string">"/cgi-bin/lastuser.cgi?argument"</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>And that works excellent now for me</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="6347""></a>
  <div class="note">
   <strong class="user">digitalturbulence at softhome dot net</strong>
   <a href="#6347" class="date">09-Jul-2000 09:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If the command printf("%s",system($cmd)); doesn't work, check the httpd.error_log file in your /var/log directory. At my home, the system command can just load binary files in the directory /usr/lib/apache/bin
<br />
Stephan.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="973""></a>
  <div class="note">
   <strong class="user">ccurtis at aet-usa dot com</strong>
   <a href="#973" class="date">14-Jun-1999 08:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If no headers have been printed, calling the system() function will flush the headers to the client and insert a newline; no further headers or cookies will be transferred to the browser.&nbsp; In version 3.0.7, you will not be warned that the Header() function failed, but will be warned if trying to set a cookie.&nbsp; If you want to continue to send headers after the function call, use exec() instead.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

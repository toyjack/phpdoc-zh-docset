<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>给指定的主机（域名）或者IP地址做DNS通信检查</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="ref.network.html">? 网络 函数</a></li>
      <li style="float: right;"><a href="function.closelog.html">closelog ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.network.html">网络 函数</a></li>
    <li>给指定的主机（域名）或者IP地址做DNS通信检查</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.checkdnsrr" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">checkdnsrr</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7)</p><p class="refpurpose"><span class="refname">checkdnsrr</span> &mdash; <span class="dc-title">给指定的主机（域名）或者IP地址做DNS通信检查</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.checkdnsrr-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><strong>checkdnsrr</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$host</code></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$type</code><span class="initializer"> = &quot;MX&quot;</span></span>
  ] )</div>

  <p class="para rdfs-comment">
   根据不同记录（<code class="parameter">type</code>）类型查询主机（<code class="parameter">host</code>）相应的DNS记录。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.checkdnsrr-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">host</code></dt>

     <dd>

      <p class="para">
       主机（<code class="parameter">host</code>）可以是一个IP地址也可以是域名。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">type</code></dt>

     <dd>

      <p class="para">
       解析记录类型（<code class="parameter">type</code>）可能是下面这些类型中的任何一个：A，MX，NS，SOA，PTR，CNAME，AAAA，A6， SRV，NAPTR，TXT 或者 ANY。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.checkdnsrr-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   如果记录能找到，就返回<strong><code>TRUE</code></strong>；如果查找不到该DNS记录或者发生了错误，就返回<strong><code>FALSE</code></strong>。
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.checkdnsrr-changelog">
  <h3 class="title">更新日志</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>版本</th>
       <th>说明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.3.0</td>
       <td>
         这个函数在Windows平台上也可以使用了。
       </td>
      </tr>

      <tr>
       <td>5.2.4</td>
       <td>
        增加了TXT的记录<code class="parameter">类型</code>。
       </td>
      </tr>

      <tr>
       <td>5.0.0</td>
       <td>
        增加了AAAA的记录<code class="parameter">类型</code>。
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.checkdnsrr-notes">
  <h3 class="title">注释</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    出于对低版本在windows平台上的兼容性，可以试试<a href="http://pear.php.net/" class="link external" title="Link : http://pear.php.net/">&raquo;&nbsp;PEAR</a>扩展包里面提供的
    <a href="http://pear.php.net/package/Net_DNS" class="link external" title="Link : http://pear.php.net/package/Net_DNS">&raquo;&nbsp;Net_DNS</a>类。
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.checkdnsrr-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.dns-get-record.html" class="function" rel="rdfs-seeAlso">dns_get_record()</a> - 获取指定主机的DNS记录</span></li>
    <li class="member"><span class="function"><a href="function.getmxrr.html" class="function" rel="rdfs-seeAlso">getmxrr()</a> - Get MX records corresponding to a given Internet host name</span></li>
    <li class="member"><span class="function"><a href="function.gethostbyaddr.html" class="function" rel="rdfs-seeAlso">gethostbyaddr()</a> - 获取指定的IP地址对应的主机名</span></li>
    <li class="member"><span class="function"><a href="function.gethostbyname.html" class="function" rel="rdfs-seeAlso">gethostbyname()</a> - Get the IPv4 address corresponding to a given Internet host name</span></li>
    <li class="member"><span class="function"><a href="function.gethostbynamel.html" class="function" rel="rdfs-seeAlso">gethostbynamel()</a> - Get a list of IPv4 addresses corresponding to a given Internet host
   name</span></li>
    <li class="member">the named(8) manual page</li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="117880""></a>
  <div class="note">
   <strong class="user">mshallop at linux dot com</strong>
   <a href="#117880" class="date">26-Aug-2015 07:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Updated (eregi is deprecated) function to validate an email and a domain.&nbsp; Function allows for either fully-qualified email addresses, or partial address (@gmail.com or gmail.com).&nbsp;&nbsp; Also supports the I18N character conversion.<br />
<br />
&nbsp;I'm using the function for white/black list content validation:<br />
<br />
function checkEmailAndDomain($_email)<br />
{<br />
&nbsp;&nbsp;&nbsp; $exp = "/^(.*)@(.*)$/";<br />
&nbsp;&nbsp;&nbsp; preg_match($exp, $_email, $matches);<br />
<br />
&nbsp;&nbsp;&nbsp; if (!empty($matches[1]) and (!filter_var($_email, FILTER_VALIDATE_EMAIL)))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return (false);<br />
<br />
&nbsp;&nbsp;&nbsp; return (checkdnsrr(idn_to_ascii($matches[2]), 'MX'));<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116974""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#116974" class="date">30-Mar-2015 07:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Attention! By default the function searches only for MX records, when no type is specified. To search for any record you have to manually ask for it.<br />
<br />
I hope i spared someone my day of bug searching caused by that oversight. :(</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113537""></a>
  <div class="note">
   <strong class="user">Krisztin Ferenczi</strong>
   <a href="#113537" class="date">27-Oct-2013 08:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
criffoh at gmail dot com is right. Before you check domain, you must convert to ascii with idn_to_ascii function:<br />
<a href="http://us2.php.net/manual/en/function.idn-to-ascii.php ." rel="nofollow" target="_blank">http://us2.php.net/manual/en/function.idn-to-ascii.php .</a><br />
<br />
var_dump(checkdnsrr('?andu.cl', 'A')); // returns false<br />
var_dump(checkdnsrr(idn_to_ascii('?andu.cl'), 'A')); // return true</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112739""></a>
  <div class="note">
   <strong class="user">criffoh at gmail dot com</strong>
   <a href="#112739" class="date">18-Jul-2013 11:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Is not possible validate domains with '?' for my country.<br />
<br />
In my country is possible to register domain using '?' character. For example:<br />
<br />
?andu.cl<br />
<a href="http://nic.cl/cgi-bin/dom-CL?q=%F1andu" rel="nofollow" target="_blank">http://nic.cl/cgi-bin/dom-CL?q=%F1andu</a><br />
<br />
If I use this function to check DNS record, it return false, but the domain already exists:<br />
<br />
var_dump(checkdnsrr('?andu.cl', 'A')); // returns false</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71686""></a>
  <div class="note">
   
   <a href="#71686" class="date">12-Dec-2006 01:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">check_dnsbl</span><span class="keyword">(</span><span class="default">$ip</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dnsbl_check</span><span class="keyword">=array(</span><span class="string">"bl.spamcop.net"</span><span class="keyword">,</span><span class="string">"list.dsbl.org"</span><span class="keyword">,<br />
</span><span class="string">"sbl.spamhaus.org"</span><span class="keyword">,</span><span class="string">'xbl.spamhaus.org'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$ip</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rip</span><span class="keyword">=</span><span class="default">implode</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">,</span><span class="default">array_reverse</span><span class="keyword">(</span><span class="default">explode</span><span class="keyword">(</span><span class="string">"."</span><span class="keyword">,</span><span class="default">$ip</span><span class="keyword">))); <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$dnsbl_check </span><span class="keyword">as </span><span class="default">$val</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">checkdnsrr</span><span class="keyword">(</span><span class="default">$rip</span><span class="keyword">.</span><span class="string">'.'</span><span class="keyword">.</span><span class="default">$val</span><span class="keyword">.</span><span class="string">'.'</span><span class="keyword">,</span><span class="string">'A'</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$rip</span><span class="keyword">.</span><span class="string">'.'</span><span class="keyword">.</span><span class="default">$val</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="61220""></a>
  <div class="note">
   <strong class="user">satmd</strong>
   <a href="#61220" class="date">28-Jan-2006 05:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
fox dot 69 at gmx dot net: I wonder where you got this code from. I have written this piece of code half a year ago and released it WITH a copyright header that is missing now! Anyways... this code is to be considered licenced "as-is", however it'd be nice to keep the authors note (This is something about reputation, you see?). Thanks.<br />
<br />
(Much) more recent version of it:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">is_blacklisted</span><span class="keyword">(</span><span class="default">$ip</span><span class="keyword">) {<br />
&nbsp;&nbsp; </span><span class="comment">// written by satmd, do what you want with it, but keep the author please<br />
&nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">=Array();<br />
&nbsp;&nbsp; </span><span class="default">$dnsbl_check</span><span class="keyword">=array(</span><span class="string">"bl.spamcop.net"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"list.dsbl.org"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"sbl.spamhaus.org"</span><span class="keyword">);<br />
&nbsp;&nbsp; if (</span><span class="default">$ip</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$quads</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">"."</span><span class="keyword">,</span><span class="default">$ip</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$rip</span><span class="keyword">=</span><span class="default">$quads</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">].</span><span class="string">"."</span><span class="keyword">.</span><span class="default">$quads</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">].</span><span class="string">"."</span><span class="keyword">.</span><span class="default">$quads</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">].</span><span class="string">"."</span><span class="keyword">.</span><span class="default">$quads</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">count</span><span class="keyword">(</span><span class="default">$dnsbl_check</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">checkdnsrr</span><span class="keyword">(</span><span class="default">$rip</span><span class="keyword">.</span><span class="string">"."</span><span class="keyword">.</span><span class="default">$dnsbl_check</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">].</span><span class="string">"."</span><span class="keyword">,</span><span class="string">"A"</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[]=Array(</span><span class="default">$dnsbl_check</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">],</span><span class="default">$rip</span><span class="keyword">.</span><span class="string">"."</span><span class="keyword">.</span><span class="default">$dnsbl_check</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Beware that this code's signature differs from the original! I also removed osirusoft as its results are not useful anyways (false positives!). Please make sure that you have nscd or a caching dns server running as this code is prone to (d)dos! Only use it in places where it is necessary (when data is to be modified), e.g. the script processing uploads/posts/replies in a blog.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="48157""></a>
  <div class="note">
   <strong class="user">Patrick</strong>
   <a href="#48157" class="date">14-Dec-2004 04:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a little code example that will validate an email address in two ways:<br />
- first the general syntax of the string is checked with a regular expression<br />
- then the domain substring (after the '@') is checked using the 'checkdnsrr' function<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">validate_email</span><span class="keyword">(</span><span class="default">$email</span><span class="keyword">){<br />
<br />
&nbsp;&nbsp; </span><span class="default">$exp </span><span class="keyword">= </span><span class="string">"^[a-z\'0-9]+([._-][a-z\'0-9]+)*@([a-z0-9]+([._-][a-z0-9]+))+$"</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; if(</span><span class="default">eregi</span><span class="keyword">(</span><span class="default">$exp</span><span class="keyword">,</span><span class="default">$email</span><span class="keyword">)){<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(</span><span class="default">checkdnsrr</span><span class="keyword">(</span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">explode</span><span class="keyword">(</span><span class="string">"@"</span><span class="keyword">,</span><span class="default">$email</span><span class="keyword">)),</span><span class="string">"MX"</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; }else{<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; }&nbsp; &nbsp; <br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="31730""></a>
  <div class="note">
   <strong class="user">fox dot 69 at gmx dot net</strong>
   <a href="#31730" class="date">01-May-2003 10:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
maybe usefull, a blacklist (DNSBL) check function:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">is_blacklisted</span><span class="keyword">(</span><span class="default">$ip</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dnsbl_check</span><span class="keyword">=array(</span><span class="string">"bl.spamcop.net"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"relays.osirusoft.com"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"list.dsbl.org"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"sbl.spamhaus.org"</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$ip</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$quads</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">"."</span><span class="keyword">,</span><span class="default">$ip</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rip</span><span class="keyword">=</span><span class="default">$quads</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">].</span><span class="string">"."</span><span class="keyword">.</span><span class="default">$quads</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">].</span><span class="string">"."</span><span class="keyword">.</span><span class="default">$quads</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">].</span><span class="string">"."</span><span class="keyword">.</span><span class="default">$quads</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">count</span><span class="keyword">(</span><span class="default">$dnsbl_check</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">checkdnsrr</span><span class="keyword">(</span><span class="default">$rip</span><span class="keyword">.</span><span class="string">"."</span><span class="keyword">.</span><span class="default">$dnsbl_check</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">],</span><span class="string">"A"</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$listed</span><span class="keyword">.=</span><span class="default">$dnsbl_check</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">].</span><span class="string">" "</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; if (</span><span class="default">$listed</span><span class="keyword">) { return </span><span class="default">$listed</span><span class="keyword">; } else { return </span><span class="default">FALSE</span><span class="keyword">; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="30692""></a>
  <div class="note">
   <strong class="user">kriek at jonkriek dot com</strong>
   <a href="#30692" class="date">26-Mar-2003 02:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The checkdnsrr function is not implemented on the Windows platform. The way to get around this problem is to write your own version of checkdnsrr. Example: myCheckDNSRR
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">myCheckDNSRR</span><span class="keyword">(</span><span class="default">$hostName</span><span class="keyword">, </span><span class="default">$recType </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">) 
<br />
{ 
<br />
&nbsp;if(!empty(</span><span class="default">$hostName</span><span class="keyword">)) { 
<br />
&nbsp;&nbsp; if( </span><span class="default">$recType </span><span class="keyword">== </span><span class="string">'' </span><span class="keyword">) </span><span class="default">$recType </span><span class="keyword">= </span><span class="string">"MX"</span><span class="keyword">; 
<br />
&nbsp;&nbsp; </span><span class="default">exec</span><span class="keyword">(</span><span class="string">"nslookup -type=</span><span class="default">$recType</span><span class="string"> </span><span class="default">$hostName</span><span class="string">"</span><span class="keyword">, </span><span class="default">$result</span><span class="keyword">); 
<br />
&nbsp;&nbsp; </span><span class="comment">// check each line to find the one that starts with the host 
<br />
&nbsp;&nbsp; // name. If it exists then the function succeeded. 
<br />
&nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$result </span><span class="keyword">as </span><span class="default">$line</span><span class="keyword">) { 
<br />
&nbsp;&nbsp; &nbsp; if(</span><span class="default">eregi</span><span class="keyword">(</span><span class="string">"^</span><span class="default">$hostName</span><span class="string">"</span><span class="keyword">,</span><span class="default">$line</span><span class="keyword">)) { 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">; 
<br />
&nbsp;&nbsp; &nbsp; } 
<br />
&nbsp;&nbsp; } 
<br />
&nbsp;&nbsp; </span><span class="comment">// otherwise there was no mail handler for the domain 
<br />
&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">false</span><span class="keyword">; 
<br />
&nbsp;} 
<br />
&nbsp;return </span><span class="default">false</span><span class="keyword">; 
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>Note that the type parameter is optional, and if you don't supply it then the type defaults to "MX" (which means Mail Exchange). If any records are found, the function returns TRUE. Otherwise, it returns FALSE.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Bitwise XOR</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.gmp-testbit.html">? gmp_testbit</a></li>
      <li style="float: right;"><a href="class.gmp.html">GMP ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.gmp.html">GMP 函数</a></li>
    <li>Bitwise XOR</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.gmp-xor" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">gmp_xor</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.4, PHP 5, PHP 7)</p><p class="refpurpose"><span class="refname">gmp_xor</span> &mdash; <span class="dc-title">Bitwise XOR</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.gmp-xor-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="class.gmp.html" class="type GMP">GMP</a></span> <span class="methodname"><strong>gmp_xor</strong></span>
    ( <span class="methodparam"><span class="type"><a href="class.gmp.html" class="type GMP">GMP</a></span> <code class="parameter">$a</code></span>
   , <span class="methodparam"><span class="type"><a href="class.gmp.html" class="type GMP">GMP</a></span> <code class="parameter">$b</code></span>
   )</div>

  <p class="para rdfs-comment">
   Calculates bitwise exclusive OR (XOR) of two GMP numbers.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.gmp-xor-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">a</code></dt>

     <dd>

      <p class="para">可以是一个 GMP
数据 <span class="type"><span class="type resouce">resouce</span></span>，或一个可以转换为数值的字符串。</p> 
     </dd>

    
    
     <dt>
<code class="parameter">b</code></dt>

     <dd>

      <p class="para">可以是一个 GMP
数据 <span class="type"><span class="type resouce">resouce</span></span>，或一个可以转换为数值的字符串。</p> 
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.gmp-xor-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   GMP 数值<span class="type"><span class="type 资源">资源</span></span>.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.gmp-xor-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-3853">
    <p><strong>Example #1 <span class="function"><strong>gmp_xor()</strong></span> example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$xor1&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">gmp_init</span><span style="color: #007700">(</span><span style="color: #DD0000">"1101101110011101"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$xor2&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">gmp_init</span><span style="color: #007700">(</span><span style="color: #DD0000">"0110011001011001"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$xor3&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">gmp_xor</span><span style="color: #007700">(</span><span style="color: #0000BB">$xor1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$xor2</span><span style="color: #007700">);<br /><br />echo&nbsp;</span><span style="color: #0000BB">gmp_strval</span><span style="color: #007700">(</span><span style="color: #0000BB">$xor3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
1011110111000100
</pre></div>
    </div>
   </div>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="84191""></a>
  <div class="note">
   <strong class="user">greenone</strong>
   <a href="#84191" class="date">02-Jul-2008 09:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
here's a fast alternative to compute the xor-value of two bitstrings of an arbitrary (but same) length.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* xor-op for bitstrings of arbitrary length<br />
&nbsp;* bitstrings must have same length<br />
&nbsp;* <br />
&nbsp;* @param string $o1<br />
&nbsp;* @param string $o2<br />
&nbsp;* @return string<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">bitxor</span><span class="keyword">(</span><span class="default">$o1</span><span class="keyword">, </span><span class="default">$o2</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$xorWidth </span><span class="keyword">= </span><span class="default">PHP_INT_SIZE</span><span class="keyword">*</span><span class="default">8</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$o1 </span><span class="keyword">= </span><span class="default">str_split</span><span class="keyword">(</span><span class="default">$o1</span><span class="keyword">, </span><span class="default">$xorWidth</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$o2 </span><span class="keyword">= </span><span class="default">str_split</span><span class="keyword">(</span><span class="default">$o2</span><span class="keyword">, </span><span class="default">$xorWidth</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$res </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$runs </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$o1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$runs</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$res </span><span class="keyword">.= </span><span class="default">decbin</span><span class="keyword">(</span><span class="default">bindec</span><span class="keyword">(</span><span class="default">$o1</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]) ^ </span><span class="default">bindec</span><span class="keyword">(</span><span class="default">$o2</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]));&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$res</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57431""></a>
  <div class="note">
   <strong class="user">kimcbrowne at hotmail dot com</strong>
   <a href="#57431" class="date">04-Oct-2005 04:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To be unbreakable XOR encryption must have a key that is totally random and is never re-used.&nbsp; If you use a key a second time, it can be broken.&nbsp; This can be confirmed by reading the page at <a href="http://en.wikipedia.org/wiki/One-time_pad." rel="nofollow" target="_blank">http://en.wikipedia.org/wiki/One-time_pad.</a><br />
<br />
Although I am not an expert on cryptography, I understand that decyphering involves recognizing patterns and that it would be possible to decrypt code that was encoded using XOR with the same key if there were enough samples to examine.&nbsp; Maintaining unique keys for each encryption at both encryption and decryption points to ensure 100 percent unbreakability has security problems of its own - where and how are the keys stored and how are they transmitted to the decryption points?</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51371""></a>
  <div class="note">
   <strong class="user">bukaj at bukaj dot net</strong>
   <a href="#51371" class="date">29-Mar-2005 02:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
XOR encryption is an ultimate encryption algorithm. It can't be be broken. It is used to encrypt stealth submarine's orders. I cannot agree with "kid-sister" post below. If you use vast key (as long as encrypted message) which is random (space noise recorded on a cd), the encrypted message is also radnom - impossible to decrypt without key. Under those conditions, XOR is strongest encryption algorithm ever known.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="38823""></a>
  <div class="note">
   <strong class="user">patm at pureconnection dot net</strong>
   <a href="#38823" class="date">08-Jan-2004 02:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
XOR encryption only works if the key is at liest the same size as the plaintext, and the key is perfectly random. And no, rand() is not perfectly random.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="23298""></a>
  <div class="note">
   <strong class="user">mikko at entris dot net</strong>
   <a href="#23298" class="date">15-Jul-2002 11:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The logical XOR can be used for encrypting data. Use resource A as your original text and resource B as the key. Be sure to use long enough key so that the key doesn't loop. Decryption works the same way, input encrypted text as res A and key as res B.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

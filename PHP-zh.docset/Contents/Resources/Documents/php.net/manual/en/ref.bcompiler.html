<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>bcompiler 函数</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="bcompiler.constants.html">? 预定义常量</a></li>
      <li style="float: right;"><a href="function.bcompiler-load-exe.html">bcompiler_load_exe ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="book.bcompiler.html">bcompiler</a></li>
    <li>bcompiler 函数</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="ref.bcompiler" class="reference">
 <h1 class="title">bcompiler 函数</h1>
 <div class="partintro">
  <div class="section" id="bcompiler.contact">
  <h2 class="title">联系信息</h2>
   <p class="para">
    如果你有评论、问题的修复、功能的增强，或者想要帮助开发这头野兽，你可以给我投封邮件 <a href="mailto:alan_k@php.net" class="link external" title="Link : mailto:alan_k@php.net">&raquo;&nbsp;alan_k@php.net</a>。
    非常欢迎任何您的帮助！
   </p>
  </div>
 </div>

 






















































































































<h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="function.bcompiler-load-exe.html">bcompiler_load_exe</a> &mdash; 从一个 bcompiler exe 文件中读取并创建类</li><li><a href="function.bcompiler-load.html">bcompiler_load</a> &mdash; 从一个 bz 压缩过的文件中读取并创建类</li><li><a href="function.bcompiler-parse-class.html">bcompiler_parse_class</a> &mdash; 读取一个类的字节码并回调一个用户的函数</li><li><a href="function.bcompiler-read.html">bcompiler_read</a> &mdash; 从一个文件句柄中读取并创建类</li><li><a href="function.bcompiler-write-class.html">bcompiler_write_class</a> &mdash; 写入定义过的类的字节码</li><li><a href="function.bcompiler-write-constant.html">bcompiler_write_constant</a> &mdash; 写入定义过的常量的字节码</li><li><a href="function.bcompiler-write-exe-footer.html">bcompiler_write_exe_footer</a> &mdash; 写入开始位置以及 exe 类型文件的结尾信号</li><li><a href="function.bcompiler-write-file.html">bcompiler_write_file</a> &mdash; 写入 PHP 源码文件的字节码</li><li><a href="function.bcompiler-write-footer.html">bcompiler_write_footer</a> &mdash; 写入单个字符 \x00 用于标识编译数据的结尾</li><li><a href="function.bcompiler-write-function.html">bcompiler_write_function</a> &mdash; 以字节码写入定义过的函数</li><li><a href="function.bcompiler-write-functions-from-file.html">bcompiler_write_functions_from_file</a> &mdash; 以字节码写入一个文件中定义过的所以函数</li><li><a href="function.bcompiler-write-header.html">bcompiler_write_header</a> &mdash; 写入 bcompiler 头</li><li><a href="function.bcompiler-write-included-filename.html">bcompiler_write_included_filename</a> &mdash; 写入一个包含的文件的字节码</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="109716""></a>
  <div class="note">
   <strong class="user">volomike</strong>
   <a href="#109716" class="date">14-Aug-2012 01:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I'm using bencoder v1.6 and latest bcompiler (<a href="http://pecl.php.net/get/bcompiler" rel="nofollow" target="_blank">http://pecl.php.net/get/bcompiler</a>) -- 1.0.2 at time of writing this -- and I ran a test on PHP5 static class functions and regular class functions, and then ran a test with __FILE__. I encountered no problems. So, at least the static class issue and the __FILE__ issue is resolved now.<br />
<br />
However, please continue your testing and reporting bugs (https://bugs.php.net/report.php?package=bcompiler).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93823""></a>
  <div class="note">
   <strong class="user">mail - at- albertkok - dot - com</strong>
   <a href="#93823" class="date">01-Oct-2009 01:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It's been a while since my past post, but yes, I'm still using bcompiler. I just found another problem that I think you should be aware of. It took me hours to find.<br />
<br />
It pretty much comes to this: When compiling on a 64-bit Linux operating system, your compiled code will NOT run on a 32-bit version, and visa versa. It will merely echo the file's content.<br />
<br />
Regards,<br />
Albert Kok</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80355""></a>
  <div class="note">
   <strong class="user">codeslinger+uph80111 at compsalot dot com</strong>
   <a href="#80355" class="date">11-Jan-2008 06:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
try this, I believe that it will solve the problem with __FILE__ <br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">eval(</span><span class="string">"\$Foo = dirname(__FILE__);"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"\n&lt;br&gt;FILE = '</span><span class="default">$Foo</span><span class="string">'\n"</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78704""></a>
  <div class="note">
   <strong class="user">Albert Kok</strong>
   <a href="#78704" class="date">24-Oct-2007 01:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A few notes to succesfully configure PHP5 to load bcompiler.<br />
<br />
In case of using Debian/Ubuntu Linux: When installing from the PECL (PEAR) package, make sure you have the php5-dev library installed in your system (apt-get install php5-dev).<br />
<br />
Newer versions of Ubuntu may error out while installing bcompiler thru PECL, asking you to reinstall bzip2. This will not fix the installation. Instead, install the libbz2-dev library (apt-get install libbz2-dev) and try installing bcompiler from PECL again.<br />
<br />
After installing bcompiler from PECL, don't forget to make sure you load the bcompiler.so library in your PHP configuration for the new bcompiler functions to become available. This is done by adding the following line to the bottom of your php.ini file(s):<br />
<br />
extension=bcompiler.so<br />
<br />
If you were to use the bcompiler functions thru your webserver, you need to restart it to reload the php configuration.<br />
<br />
Regards,<br />
Albert Kok</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75970""></a>
  <div class="note">
   <strong class="user">roberto at spadim dot net dot br</strong>
   <a href="#75970" class="date">25-Jun-2007 07:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
hello guys, since bencoder don't work for __FILE__ constants i have a bcompiler script working, anyone that want it can send me an email<br />
the source is 100% compatible with original file, the only problem is php5 new function methods that<br />
&lt;?<br />
if (!function_exists('function_name')){<br />
&nbsp;function function_name()<br />
}<br />
?&gt;<br />
don't work but it's a php5 new method for understand bytecode</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68388""></a>
  <div class="note">
   <strong class="user">cdsheen+bencoder at gmail dot com</strong>
   <a href="#68388" class="date">25-Jul-2006 02:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a script to act as a front-end for bcompiler, which may be very similar to the eA ones:<br />
<br />
<a href="http://bbs.giga.net.tw/bencoder.php" rel="nofollow" target="_blank">http://bbs.giga.net.tw/bencoder.php</a><br />
<br />
BENCODER v1.1 - Encode your PHP script using bcompiler<br />
<br />
Usage: bencoder [-f] -o FILE&nbsp; &nbsp; file1.php<br />
&nbsp;&nbsp; &nbsp; &nbsp; bencoder [-f] -o OUTDIR&nbsp; file1.php file2.php ...<br />
&nbsp;&nbsp; &nbsp; &nbsp; bencoder [-f] -o OUTDIR&nbsp; -a SRCDIR&nbsp; [-s SUFFIX] [-c] [-r]<br />
<br />
&nbsp; -f&nbsp; &nbsp; &nbsp; &nbsp; : force overwriting even if the target exists<br />
&nbsp; -o FILE&nbsp;&nbsp; : the file name to write the encoded script<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (default to '-encoded.php' suffix)<br />
&nbsp; -o OUTDIR : the directory to write all encoded files<br />
<br />
&nbsp; -a SRCDIR : encode all files in this source directory<br />
&nbsp; -s SUFFIX : encode the files with the SUFFIX extension only (default: php)<br />
&nbsp; -c&nbsp; &nbsp; &nbsp; &nbsp; : copy files those shouldn't be encoded (no by default)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="65316""></a>
  <div class="note">
   <strong class="user">arplynn at gmail dot com</strong>
   <a href="#65316" class="date">28-Apr-2006 05:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PHP seems to choke on trying to compile PHP5 classes with the private, protected or public modifiers. Additionally, when including files with properly compiled classes on PHP5, it works fine but when php tries to exit it throws a segmentation fault.<br />
<br />
It's just not a great idea to use bcompiler for anything other than functions on PHP5, at least for now.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="61592""></a>
  <div class="note">
   <strong class="user">tda at example dot com</strong>
   <a href="#61592" class="date">07-Feb-2006 02:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Creating a function after checking if a function exists using function_exists will result in a "Zero Sized Reply" error.
<br />

<br />
<span class="default">&lt;?php
<br />
this does NOT work any longer</span><span class="keyword">:
<br />
if (!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">"file_get_contents"</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">, </span><span class="default">$use_include_path </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; { </span><span class="comment">/*...define your own function here...*/ </span><span class="keyword">}
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Apache returns: "Zero Sized Reply" after compilation.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>把第一个参数作为回调函数调用</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.call-user-func-array.html">? call_user_func_array</a></li>
      <li style="float: right;"><a href="function.create-function.html">create_function ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.funchand.html">Function handling 函数</a></li>
    <li>把第一个参数作为回调函数调用</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.call-user-func" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">call_user_func</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7)</p><p class="refpurpose"><span class="refname">call_user_func</span> &mdash; <span class="dc-title">把第一个参数作为回调函数调用</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.call-user-func-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <span class="methodname"><strong>call_user_func</strong></span>
    ( <span class="methodparam"><span class="type"><a href="language.types.callable.html" class="type callable">callable</a></span> <code class="parameter">$callback</code></span>
   [, <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$parameter</code></span>
   [, <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$...</code></span>
  ]] )</div>

  <p class="para rdfs-comment">
   第一个参数 <code class="parameter">callback</code> 是被调用的回调函数，其余参数是回调函数的参数。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.call-user-func-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">callback</code></dt>

     <dd>

      <p class="para">
       将被调用的回调函数（<span class="type"><a href="language.types.callable.html" class="type callable">callable</a></span>）。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">parameter</code></dt>

     <dd>

      <p class="para">
       0个或以上的参数，被传入回调函数。
      </p>
      <blockquote class="note"><p><strong class="note">Note</strong>: 
       <p class="para">
        请注意，传入<span class="function"><strong>call_user_func()</strong></span>的参数不能为引用传递。
        <div class="example" id="example-5787">
         <p><strong>Example #1 <span class="function"><strong>call_user_func()</strong></span> 的参考例子</strong></p>
         <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />error_reporting</span><span style="color: #007700">(</span><span style="color: #0000BB">E_ALL</span><span style="color: #007700">);<br />function&nbsp;</span><span style="color: #0000BB">increment</span><span style="color: #007700">(&amp;</span><span style="color: #0000BB">$var</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$var</span><span style="color: #007700">++;<br />}<br /><br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">call_user_func</span><span style="color: #007700">(</span><span style="color: #DD0000">'increment'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">.</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">call_user_func_array</span><span style="color: #007700">(</span><span style="color: #DD0000">'increment'</span><span style="color: #007700">,&nbsp;array(&amp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">));&nbsp;</span><span style="color: #FF8000">//&nbsp;You&nbsp;can&nbsp;use&nbsp;this&nbsp;instead&nbsp;before&nbsp;PHP&nbsp;5.3<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">.</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
         </div>

         <div class="example-contents"><p>以上例程会输出：</p></div>
         <div class="example-contents screen">
<div class="cdata"><pre>
0
1
</pre></div>
         </div>
        </div>
       </p>
      </p></blockquote>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.call-user-func-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   返回回调函数的返回值，如果错误则返回<strong><code>FALSE</code></strong>。
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.call-user-func-changelog">
  <h3 class="title">更新日志</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>版本</th>
       <th>说明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.3.0</td>
       <td>
        对面向对象里面的关键字的解析有所增强。在此之前，使用双引号来来连接一个类和里面的一个方法，把之作为参数来作为回调函数的会，将会发出一个<strong><code>E_STRICT</code></strong>的警告，因为这个传入的参数被视为静态方法。
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.call-user-func-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-5788">
    <p><strong>Example #2 <span class="function"><strong>call_user_func()</strong></span> 的例子</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">barber</span><span style="color: #007700">(</span><span style="color: #0000BB">$type</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"You&nbsp;wanted&nbsp;a&nbsp;</span><span style="color: #0000BB">$type</span><span style="color: #DD0000">&nbsp;haircut,&nbsp;no&nbsp;problem\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">call_user_func</span><span style="color: #007700">(</span><span style="color: #DD0000">'barber'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"mushroom"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">call_user_func</span><span style="color: #007700">(</span><span style="color: #DD0000">'barber'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"shave"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
You wanted a mushroom haircut, no problem
You wanted a shave haircut, no problem
</pre></div>
    </div>
   </div>
   <div class="example" id="example-5789">
    <p><strong>Example #3 <span class="function"><strong>call_user_func()</strong></span> 命名空间的使用</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">namespace&nbsp;</span><span style="color: #0000BB">Foobar</span><span style="color: #007700">;<br /><br />class&nbsp;</span><span style="color: #0000BB">Foo&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">test</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #DD0000">"Hello&nbsp;world!\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">call_user_func</span><span style="color: #007700">(</span><span style="color: #0000BB">__NAMESPACE__&nbsp;</span><span style="color: #007700">.</span><span style="color: #DD0000">'\Foo::test'</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;As&nbsp;of&nbsp;PHP&nbsp;5.3.0<br /></span><span style="color: #0000BB">call_user_func</span><span style="color: #007700">(array(</span><span style="color: #0000BB">__NAMESPACE__&nbsp;</span><span style="color: #007700">.</span><span style="color: #DD0000">'\Foo'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'test'</span><span style="color: #007700">));&nbsp;</span><span style="color: #FF8000">//&nbsp;As&nbsp;of&nbsp;PHP&nbsp;5.3.0<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Hello world!
Hello world!
</pre></div>
    </div>
   </div>
   <div class="example" id="example-5790">
    <p><strong>Example #4 用<span class="function"><strong>call_user_func()</strong></span>来调用一个类里面的方法</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">myclass&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;function&nbsp;</span><span style="color: #0000BB">say_hello</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Hello!\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">$classname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"myclass"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">call_user_func</span><span style="color: #007700">(array(</span><span style="color: #0000BB">$classname</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'say_hello'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">call_user_func</span><span style="color: #007700">(</span><span style="color: #0000BB">$classname&nbsp;</span><span style="color: #007700">.</span><span style="color: #DD0000">'::say_hello'</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;As&nbsp;of&nbsp;5.2.3<br /><br /></span><span style="color: #0000BB">$myobject&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">myclass</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">call_user_func</span><span style="color: #007700">(array(</span><span style="color: #0000BB">$myobject</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'say_hello'</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Hello!
Hello!
Hello!
</pre></div>
    </div>   
   </div>
   <div class="example" id="example-5791">
    <p><strong>Example #5 把完整的函数作为回调传入<span class="function"><strong>call_user_func()</strong></span></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />call_user_func</span><span style="color: #007700">(function(</span><span style="color: #0000BB">$arg</span><span style="color: #007700">)&nbsp;{&nbsp;print&nbsp;</span><span style="color: #DD0000">"[</span><span style="color: #0000BB">$arg</span><span style="color: #DD0000">]\n"</span><span style="color: #007700">;&nbsp;},&nbsp;</span><span style="color: #DD0000">'test'</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">/*&nbsp;As&nbsp;of&nbsp;PHP&nbsp;5.3.0&nbsp;*/<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
[test]
</pre></div>
    </div>   
   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.call-user-func-notes">
  <h3 class="title">注释</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: <p class="para">在函数中注册有多个回调内容时(如使用
<span class="function"><strong>call_user_func()</strong></span> 与 <span class="function"><a href="function.call-user-func-array.html" class="function">call_user_func_array()</a></span>)，如在前一个回调中有未捕获的异常，其后的将不再被调用。</p></p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.call-user-func-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.call-user-func-array.html" class="function" rel="rdfs-seeAlso">call_user_func_array()</a> - 调用回调函数，并把一个数组参数作为回调函数的参数</span></li>
    <li class="member"><span class="function"><a href="function.is-callable.html" class="function" rel="rdfs-seeAlso">is_callable()</a> - 检测参数是否为合法的可调用结构</span></li>
    <li class="member"><a href="language.pseudo-types.html#language.types.callback" class="link">callback</a> 类型的信息</li>
    <li class="member"><span class="methodname"><a href="reflectionfunction.invoke.html" class="methodname" rel="rdfs-seeAlso">ReflectionFunction::invoke()</a> - Invokes function</span></li>
    <li class="member"><span class="methodname"><a href="reflectionmethod.invoke.html" class="methodname" rel="rdfs-seeAlso">ReflectionMethod::invoke()</a> - Invoke</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="119446""></a>
  <div class="note">
   <strong class="user">jcastro at eftec dot cl</strong>
   <a href="#119446" class="date">08-Jun-2016 06:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Lets say that $a1 is an object and fn is a function then:<br />
<br />
echo $a1-&gt;fn('hello world');<br />
echo $a1-&gt;{"fn"}('hello world');<br />
echo call_user_func(array($a1, 'fn'),'hello world');<br />
<br />
Are three valid ways to do the same.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117769""></a>
  <div class="note">
   <strong class="user">Jordan LeDoux</strong>
   <a href="#117769" class="date">06-Aug-2015 06:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I re-ran the test insta outlined 9 years ago to see how things had changed. <br />
<br />
Variable functions took 0.014201879501343 seconds.<br />
call_user_func took 0.044676065444946 seconds.<br />
eval took 0.17955899238586 seconds.<br />
<br />
As expected, eval() is slowes by a wide margin, and variable functions are fastest. However, 9 years ago there weren't closures, and so I added them to the test for comparison.<br />
<br />
closures took 0.012146949768066 seconds.<br />
<br />
As you can see, closures ended up being the fastest, but all of these have experienced improvements. I also increased the number of loops per test to 50,000 from 5,000. This was tested with PHP 5.5.9 on Ubuntu LTS.<br />
<br />
The original test code was:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">fa </span><span class="keyword">() { return </span><span class="default">1</span><span class="keyword">; }<br />
function </span><span class="default">fb </span><span class="keyword">() { return </span><span class="default">1</span><span class="keyword">; }<br />
function </span><span class="default">fc </span><span class="keyword">() { return </span><span class="default">1</span><span class="keyword">; }<br />
<br />
</span><span class="default">$calla </span><span class="keyword">= </span><span class="string">'fa'</span><span class="keyword">;<br />
</span><span class="default">$callb </span><span class="keyword">= </span><span class="string">'fb'</span><span class="keyword">;<br />
</span><span class="default">$callc </span><span class="keyword">= </span><span class="string">'fc'</span><span class="keyword">;<br />
<br />
</span><span class="default">$time </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">( </span><span class="default">true </span><span class="keyword">);<br />
for( </span><span class="default">$i </span><span class="keyword">= </span><span class="default">50000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">--; ) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">+= </span><span class="default">$calla</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">+= </span><span class="default">$callb</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">+= </span><span class="default">$callc</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; if( </span><span class="default">$x </span><span class="keyword">!= </span><span class="default">3 </span><span class="keyword">) die( </span><span class="string">'Bad numbers' </span><span class="keyword">);<br />
}<br />
echo( </span><span class="string">"Variable functions took " </span><span class="keyword">. (</span><span class="default">microtime</span><span class="keyword">( </span><span class="default">true </span><span class="keyword">) - </span><span class="default">$time</span><span class="keyword">) . </span><span class="string">" seconds.&lt;br /&gt;" </span><span class="keyword">);<br />
<br />
</span><span class="default">$time </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">( </span><span class="default">true </span><span class="keyword">);<br />
for( </span><span class="default">$i </span><span class="keyword">= </span><span class="default">50000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">--; ) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">+= </span><span class="default">call_user_func</span><span class="keyword">(</span><span class="string">'fa'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">+= </span><span class="default">call_user_func</span><span class="keyword">(</span><span class="string">'fb'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">+= </span><span class="default">call_user_func</span><span class="keyword">(</span><span class="string">'fc'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if( </span><span class="default">$x </span><span class="keyword">!= </span><span class="default">3 </span><span class="keyword">) die( </span><span class="string">'Bad numbers' </span><span class="keyword">);<br />
}<br />
echo( </span><span class="string">"call_user_func took " </span><span class="keyword">. (</span><span class="default">microtime</span><span class="keyword">( </span><span class="default">true </span><span class="keyword">) - </span><span class="default">$time</span><span class="keyword">) . </span><span class="string">" seconds.&lt;br /&gt;" </span><span class="keyword">);<br />
<br />
</span><span class="default">$time </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">( </span><span class="default">true </span><span class="keyword">);<br />
for( </span><span class="default">$i </span><span class="keyword">= </span><span class="default">50000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">--; ) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; eval( </span><span class="string">'$x += ' </span><span class="keyword">. </span><span class="default">$calla </span><span class="keyword">. </span><span class="string">'();' </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; eval( </span><span class="string">'$x += ' </span><span class="keyword">. </span><span class="default">$callb </span><span class="keyword">. </span><span class="string">'();' </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; eval( </span><span class="string">'$x += ' </span><span class="keyword">. </span><span class="default">$callc </span><span class="keyword">. </span><span class="string">'();' </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if( </span><span class="default">$x </span><span class="keyword">!= </span><span class="default">3 </span><span class="keyword">) die( </span><span class="string">'Bad numbers' </span><span class="keyword">);<br />
}<br />
echo( </span><span class="string">"eval took " </span><span class="keyword">. (</span><span class="default">microtime</span><span class="keyword">( </span><span class="default">true </span><span class="keyword">) - </span><span class="default">$time</span><span class="keyword">) . </span><span class="string">" seconds.&lt;br /&gt;" </span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Here is the closures addition.<br />
<br />
<span class="default">&lt;?php<br />
<br />
$funa </span><span class="keyword">= function() { return </span><span class="default">1</span><span class="keyword">; };<br />
</span><span class="default">$funb </span><span class="keyword">= function() { return </span><span class="default">1</span><span class="keyword">; };<br />
</span><span class="default">$func </span><span class="keyword">= function() { return </span><span class="default">1</span><span class="keyword">; };<br />
<br />
</span><span class="default">$time </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">( </span><span class="default">true </span><span class="keyword">);<br />
for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">50000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">--; ) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">+= </span><span class="default">$funa</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">+= </span><span class="default">$funb</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">+= </span><span class="default">$func</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; if( </span><span class="default">$x </span><span class="keyword">!= </span><span class="default">3 </span><span class="keyword">) die( </span><span class="string">'Bad numbers' </span><span class="keyword">);<br />
}<br />
echo( </span><span class="string">"closures took " </span><span class="keyword">. (</span><span class="default">microtime</span><span class="keyword">( </span><span class="default">true </span><span class="keyword">) - </span><span class="default">$time</span><span class="keyword">) . </span><span class="string">" seconds.&lt;br /&gt;" </span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106391""></a>
  <div class="note">
   <strong class="user">dexen dot devries at gmail dot com</strong>
   <a href="#106391" class="date">04-Nov-2011 02:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In PHP v5.2, you /can/ use call_user_func(array($this, 'parent::SOME_FUNCTION')).
<br />

<br />
If you don't have custom __autoload() function, you are good to go.
<br />

<br />
If you do have custom __autoload(), you need to make it `parent' aware. Something like:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">__autoload</span><span class="keyword">(</span><span class="default">$classname</span><span class="keyword">) {
<br />
&nbsp; if (</span><span class="default">$classname </span><span class="keyword">=== </span><span class="string">'parent'</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; return;
<br />
&nbsp; else
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//((load class definition))
<br />
</span><span class="keyword">}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Rationale: PHP 5.2 surprisingly tries to autoload a class named `parent'. However, if you don't do anything in __autoload() for the `parent' class, it'll work just fine.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104292""></a>
  <div class="note">
   <strong class="user">blakerenton09 at yahoo dot com</strong>
   <a href="#104292" class="date">06-Jun-2011 01:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
call_user_func may also be used to call a closure or anonymous function that has been passed into a user-defined function.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">Benchmark</span><span class="keyword">()<br />
{<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">func_get_args</span><span class="keyword">() as </span><span class="default">$function</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$st </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">call_user_func</span><span class="keyword">(</span><span class="default">$function</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$et </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">"Time: %f"</span><span class="keyword">, </span><span class="default">$et </span><span class="keyword">- </span><span class="default">$st</span><span class="keyword">) . </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">Benchmark</span><span class="keyword">(function()<br />
{<br />
&nbsp;&nbsp;&nbsp; for ( </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">10000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++ )<br />
&nbsp;&nbsp;&nbsp; { }<br />
}, <br />
function()<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; while ( </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">10000 </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; }<br />
});<br />
</span><span class="default">?&gt;<br />
</span><br />
Returns:<br />
Time: 0.001652<br />
Time: 0.001458</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103889""></a>
  <div class="note">
   <strong class="user">romainbessuges at gmail dot com</strong>
   <a href="#103889" class="date">09-May-2011 02:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I made a wrapper for call_user_func_array which is really simple and convenient. It takes advantage of the __invoke() magic method :
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">class </span><span class="default">Func </span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">fromFunction</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return new </span><span class="default">Func</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">fromClassMethod</span><span class="keyword">(</span><span class="default">$class</span><span class="keyword">, </span><span class="default">$name</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return new </span><span class="default">Func</span><span class="keyword">(array(</span><span class="default">$class</span><span class="keyword">, </span><span class="default">$name</span><span class="keyword">));
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">fromObjectMethod</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">, </span><span class="default">$name</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return new </span><span class="default">Func</span><span class="keyword">(array(</span><span class="default">$object</span><span class="keyword">, </span><span class="default">$name</span><span class="keyword">));&nbsp; &nbsp; &nbsp; &nbsp; 
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$function</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp;&nbsp; public function&nbsp; </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$function</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">function </span><span class="keyword">= </span><span class="default">$function</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__invoke</span><span class="keyword">(){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">function</span><span class="keyword">, </span><span class="default">func_get_args</span><span class="keyword">());
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Example : 
<br />

<br />
<span class="default">&lt;?php
<br />
$func </span><span class="keyword">= </span><span class="default">Func</span><span class="keyword">::</span><span class="default">fromObjectMethod</span><span class="keyword">(</span><span class="default">$myArrayObject</span><span class="keyword">, </span><span class="string">"offsetGet"</span><span class="keyword">);
<br />

<br />
echo </span><span class="default">$func</span><span class="keyword">(</span><span class="default">3</span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99870""></a>
  <div class="note">
   <strong class="user">gskluzacek dot nospam at gmail dot com</strong>
   <a href="#99870" class="date">11-Sep-2010 07:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if you simply want to dynamically call a method on an object it is not necessary to use call_user_function but instead you can do the following:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$method_name </span><span class="keyword">= </span><span class="string">"AMethodName"</span><span class="keyword">;<br />
<br />
</span><span class="default">$obj </span><span class="keyword">= new </span><span class="default">ClassName</span><span class="keyword">();<br />
<br />
</span><span class="default">$obj</span><span class="keyword">-&gt;{</span><span class="default">$method_name</span><span class="keyword">}();<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
I've used the above so I know it works.<br />
<br />
Regards,<br />
-- Greg</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97879""></a>
  <div class="note">
   <strong class="user">moisadoru at gmail dot com</strong>
   <a href="#97879" class="date">13-May-2010 05:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Actually, when calling a static method of some class, the params are sent by reference:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Foo </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">getX</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">x</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">setX</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">x </span><span class="keyword">= </span><span class="default">$val</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">Bar </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; static function </span><span class="default">incStatic</span><span class="keyword">(</span><span class="default">Foo $f</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$f</span><span class="keyword">-&gt;</span><span class="default">setX</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">-&gt;</span><span class="default">getX</span><span class="keyword">()+</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; global </span><span class="default">$foo</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$f </span><span class="keyword">=== </span><span class="default">$foo</span><span class="keyword">) echo </span><span class="string">'&lt;span style="color: blue"&gt;' </span><span class="keyword">. </span><span class="default">__METHOD__ </span><span class="keyword">. </span><span class="string">'() objects are equal&lt;/span&gt;&lt;br /&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else&nbsp; echo </span><span class="string">'&lt;span style="color: red"&gt;' </span><span class="keyword">. </span><span class="default">__METHOD__ </span><span class="keyword">. </span><span class="string">'() objects are not equal&lt;/span&gt;&lt;br /&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">incNonStatic</span><span class="keyword">(</span><span class="default">Foo $f</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$f</span><span class="keyword">-&gt;</span><span class="default">setX</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">-&gt;</span><span class="default">getX</span><span class="keyword">()+</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$f </span><span class="keyword">=== </span><span class="default">$foo</span><span class="keyword">) echo </span><span class="string">'&lt;span style="color: blue"&gt;' </span><span class="keyword">. </span><span class="default">__METHOD__ </span><span class="keyword">. </span><span class="string">'() objects are equal&lt;/span&gt;&lt;br /&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else&nbsp; echo </span><span class="string">'&lt;span style="color: red"&gt;' </span><span class="keyword">. </span><span class="default">__METHOD__ </span><span class="keyword">. </span><span class="string">'() objects are not equal&lt;/span&gt;&lt;br /&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
function </span><span class="default">inc</span><span class="keyword">(</span><span class="default">Foo $f</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$f</span><span class="keyword">-&gt;</span><span class="default">setX</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">-&gt;</span><span class="default">getX</span><span class="keyword">()+</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$f </span><span class="keyword">=== </span><span class="default">$foo</span><span class="keyword">) echo </span><span class="string">'&lt;span style="color: blue"&gt;' </span><span class="keyword">. </span><span class="default">__FUNCTION__ </span><span class="keyword">. </span><span class="string">'() objects are equal&lt;/span&gt;&lt;br /&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; else&nbsp; echo </span><span class="string">'&lt;span style="color: red"&gt;' </span><span class="keyword">. </span><span class="default">__FUNCTION__ </span><span class="keyword">. </span><span class="string">'() objects are not equal&lt;/span&gt;&lt;br /&gt;'</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$foo </span><span class="keyword">= new </span><span class="default">Foo</span><span class="keyword">;<br />
</span><span class="default">$bar </span><span class="keyword">= new </span><span class="default">Bar</span><span class="keyword">;<br />
<br />
</span><span class="default">call_user_func</span><span class="keyword">(</span><span class="string">'inc'</span><span class="keyword">, </span><span class="default">$foo</span><span class="keyword">);<br />
</span><span class="default">call_user_func</span><span class="keyword">(</span><span class="string">'Bar::incStatic'</span><span class="keyword">, </span><span class="default">$foo</span><span class="keyword">);<br />
</span><span class="default">call_user_func</span><span class="keyword">(array(</span><span class="default">$bar</span><span class="keyword">, </span><span class="string">'incNonStatic'</span><span class="keyword">), </span><span class="default">$foo</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
The results on PHP 5.2.6 (macosx 10.5):<br />
<br />
inc() objects are not equal<br />
Bar::incStatic() objects are equal<br />
Bar::incNonStatic() objects are not equal<br />
<br />
Hope it helps sombody.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93869""></a>
  <div class="note">
   <strong class="user">Nitrogen</strong>
   <a href="#93869" class="date">05-Oct-2009 01:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A good use for call_user_func(); is for recursive functions.<br />
If you're distributing code, you will often come across users who will rename functions and break the code..<br />
Use this: call_user_func(__FUNCTION__, ... ); inside a function to call itself with whatever parameters you want.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// example, an extremely simplified factorial calculator..<br />
// it's quite obvious when someone renames the function, it'll spit out an error because it wants to call itself.<br />
</span><span class="keyword">function </span><span class="default">Factorial</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">) {<br />
&nbsp; return(</span><span class="default">$i</span><span class="keyword">==</span><span class="default">1</span><span class="keyword">?</span><span class="default">1</span><span class="keyword">:</span><span class="default">$i</span><span class="keyword">*</span><span class="default">Factorial</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">));<br />
}<br />
<br />
</span><span class="comment">// you can give this function whatever name you want, it'll always work, of course if you initially call it using the name you gave it.<br />
</span><span class="keyword">function </span><span class="default">qwertyuiop</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">) {<br />
&nbsp; return(</span><span class="default">$i</span><span class="keyword">==</span><span class="default">1</span><span class="keyword">?</span><span class="default">1</span><span class="keyword">:</span><span class="default">$i</span><span class="keyword">*</span><span class="default">call_user_func</span><span class="keyword">(</span><span class="default">__FUNCTION__</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">));<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Just that I didn't see any reference to recursive functions when user_call_func(); really helps.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89636""></a>
  <div class="note">
   <strong class="user">edgar dot klerks at gmail dot com</strong>
   <a href="#89636" class="date">17-Mar-2009 04:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An entirely OO solution to add dynamicly methods to classes, I used in a project:<br />
<span class="default">&lt;?php <br />
</span><span class="keyword">class </span><span class="default">ProductPart </span><span class="keyword">{<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; protected </span><span class="default">$data</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; protected </span><span class="default">$plugins </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">){<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">data </span><span class="keyword">= </span><span class="default">$data</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public function </span><span class="default">register</span><span class="keyword">(</span><span class="default">ProductPlugin $plugin</span><span class="keyword">){<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$plugin</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">plugins</span><span class="keyword">)){<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">plugins</span><span class="keyword">[</span><span class="default">$plugin</span><span class="keyword">-&gt;</span><span class="default">toString</span><span class="keyword">()] = </span><span class="default">$plugin</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">'Function allready defined'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public function </span><span class="default">unregister</span><span class="keyword">(</span><span class="default">ProductPlugin $plugin</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(isset(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">plugins</span><span class="keyword">[</span><span class="default">$plugin</span><span class="keyword">-&gt;</span><span class="default">toString</span><span class="keyword">()])){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">plugins</span><span class="keyword">[</span><span class="default">$plugin</span><span class="keyword">-&gt;</span><span class="default">toString</span><span class="keyword">()]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">'No such function'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; protected function </span><span class="default">__call</span><span class="keyword">(</span><span class="default">$method</span><span class="keyword">, </span><span class="default">$args</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(isset(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">plugins</span><span class="keyword">[</span><span class="default">$method</span><span class="keyword">])){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_unshift</span><span class="keyword">(&amp;</span><span class="default">$args</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">data</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_unshift</span><span class="keyword">(&amp;</span><span class="default">$args</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">plugins</span><span class="keyword">[</span><span class="default">$method</span><span class="keyword">]-&gt;</span><span class="default">run</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="default">$args</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$args</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">'No such function'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
} </span><span class="default">?&gt;<br />
</span><br />
I simplified the class somewhat for clearity.<br />
<br />
With this class, you can dynamicly add and remove classes by calling register or unregister. Register will store the object in an associative array by calling toString (as defined by ProductPlugin) and saving the method under the returned string in the array. (In this case the name of the method the class adds.)<br />
<br />
When a method is called, which isn't standard in the object, _call will lookup the called method in the array. If found, __call run the method of the plugin with the provided arguments. I restricted the user provided argument to 1, because I want to force the user to use associative arrays.<br />
<br />
Because I chose an array to store my classes, removing a function is quite simple. However the unregister function isn't optimal, I better pass a string instead of a plugin object. I didn't test it yet on performance.<br />
<br />
The ProductPlugin class:<br />
<br />
<span class="default">&lt;?php <br />
<br />
</span><span class="keyword">abstract class </span><span class="default">ProductPlugin </span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; protected </span><span class="default">$name </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; abstract public function </span><span class="default">run</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">, </span><span class="default">$args</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$data </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">=== </span><span class="default">null</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">'Name must be defined'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">init</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; protected function </span><span class="default">init</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">){<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public function </span><span class="default">toString</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
And at last some demonstration code: <br />
<br />
<span class="default">&lt;?php <br />
$bla </span><span class="keyword">= new </span><span class="default">ProductPart</span><span class="keyword">(array(</span><span class="string">'HelloWorld' </span><span class="keyword">=&gt; </span><span class="string">'Hello world'</span><span class="keyword">));<br />
</span><span class="default">$hello </span><span class="keyword">= new </span><span class="default">helloPlugin</span><span class="keyword">();<br />
</span><span class="default">$bla</span><span class="keyword">-&gt;</span><span class="default">register</span><span class="keyword">(</span><span class="default">$hello</span><span class="keyword">);<br />
</span><span class="default">$bla</span><span class="keyword">-&gt;</span><span class="default">HelloWorld</span><span class="keyword">();<br />
</span><span class="default">$bla</span><span class="keyword">-&gt;</span><span class="default">unregister</span><span class="keyword">(</span><span class="default">$hello</span><span class="keyword">);<br />
</span><span class="default">$bla</span><span class="keyword">-&gt;</span><span class="default">HelloWorld</span><span class="keyword">();<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87786""></a>
  <div class="note">
   <strong class="user">dead,screamer@seznam,cz</strong>
   <a href="#87786" class="date">21-Dec-2008 05:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php call_user_func</span><span class="keyword">()</span><span class="default">?&gt;</span> and <span class="default">&lt;?php call_user_func_array</span><span class="keyword">()</span><span class="default">?&gt;</span> hide some errors (notices, warnings and maybe errors), even if is display_errors turned on and error_Reporting is set to E_ALL|E_STRICT</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78949""></a>
  <div class="note">
   <strong class="user">Maxdamantus</strong>
   <a href="#78949" class="date">04-Nov-2007 07:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that the parser can interpret variables in function syntax, which means you can pass all variables normally (eg: reference).<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">myfunction</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, &amp;</span><span class="default">$int</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$string</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$int</span><span class="keyword">++;<br />
}<br />
</span><span class="default">$function_name </span><span class="keyword">= </span><span class="string">"myfunction"</span><span class="keyword">;<br />
</span><span class="default">$x </span><span class="keyword">= </span><span class="default">1336</span><span class="keyword">;<br />
</span><span class="default">$function_name</span><span class="keyword">(</span><span class="string">"Hello World"</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">);<br />
echo </span><span class="default">$x</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span>---<br />
Hello World<br />
1337</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77663""></a>
  <div class="note">
   <strong class="user">Knightnet</strong>
   <a href="#77663" class="date">07-Sep-2007 02:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You don't need to use this function to call a variable class function. Instead you can do the following:<br />
<br />
$this-&gt;{$fnname}();<br />
<br />
The example works in PHP 5 from within the class. It is the {} that do the trick.<br />
<br />
Regards,<br />
Julian.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76087""></a>
  <div class="note">
   <strong class="user">lsblsb at gmx dot de</strong>
   <a href="#76087" class="date">29-Jun-2007 01:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
referring to Mr.KTO (and Bug #24931):<br />
[system: PHP 5.2.0-8] - _doesnt_ pass by reference, at least when using the old syntax with the '&amp;'.<br />
<br />
when you pass your object by reference using call_user_func, any changes made on that object within the called function wont effect your "original" object.<br />
<br />
you should use mixed call_user_func_array ( callback $function, array $param_arr ) instead or eval() (slower).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75756""></a>
  <div class="note">
   <strong class="user">Mr.KTO</strong>
   <a href="#75756" class="date">14-Jun-2007 04:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To send an object to your function by link, using call_user_func it's not enough (in php4) to define func(&amp;$obj) { ... }<br />
<br />
You need: call_user_func("callback", &amp;$myobj)<br />
<br />
(in php5 objects are sending by link as default)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70781""></a>
  <div class="note">
   <strong class="user">jaimz at vertigolabs dot org</strong>
   <a href="#70781" class="date">27-Oct-2006 07:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
replay to bkfake-php at yahoo dot com's comment:<br />
<br />
that's not passing by referance, your explicitly setting the value of $testy's member variable, infact, if you take the &amp; out of your outsidefunc() it still works...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70757""></a>
  <div class="note">
   <strong class="user">bkfake-php at yahoo dot com</strong>
   <a href="#70757" class="date">26-Oct-2006 07:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have found a case where the parameters ARE passed by reference<br />
<br />
class test<br />
{<br />
&nbsp;&nbsp;&nbsp; function test()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;passme = '';<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; call_user_func('outsidefunc',$this);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // $this-&gt;passme is now 'not empty'<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // with 5.1.2<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // not so with php 4.3.10...<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
function outsidefunc(&amp;$testy)<br />
{<br />
&nbsp;&nbsp; &nbsp; $testy-&gt;passme = 'not empty';<br />
}<br />
$test = new test();<br />
echo 'passme = '.$test-&gt;passme;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69596""></a>
  <div class="note">
   <strong class="user">Typer85 at gmail dot com</strong>
   <a href="#69596" class="date">12-Sep-2006 12:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I would just like to say at first that I prefer variable function calls over the use of this function.<br />
<br />
However I found that at some times, the use of this function is needed in situtations where variable function calls can not be used. And in those same situations, the use of this function is also better than using eval.<br />
<br />
The situation I ran into is this:<br />
<br />
I wanted to call object methods dynamically from within the object but with arguments given for possible parameters that the method I will call requires.<br />
<br />
The parameters themselves are dynamic, meaning I have no prior knowledge of how many their are, their values, or if they even exist.<br />
<br />
Also because object methods are dynamic, meaning I have no prior knowledge which object method will actually be called, I can not simply use variable function calls, call the method and pass any parameters.<br />
<br />
So what I simply do is call the object method with an array of parameters, something that, to the best of my knowledge, can not be done with variable function calls, since variable function calls, even though they themeselves are dynamic, passing parameters to them is not.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69270""></a>
  <div class="note">
   <strong class="user">watchout at no dot spam dot please</strong>
   <a href="#69270" class="date">29-Aug-2006 03:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
&gt; This particular case will not work. The user functions can only be successfully called (as the documentation alludes to), with static calls to class functions.<br />
<br />
actually it *does* work on PHP 5.0.2 (tested), and should also work on PHP 4.3.x (untested). Also the documentation does not state that only calls to static class methods are possible, but it says clearly that calls to OBJECT (thats dynamic) methods are possible: <a href="http://cz.php.net/manual/en/language.pseudo-types.php (see under type callback" rel="nofollow" target="_blank">http://cz.php.net/manual/en/language.pseudo-types.php (see under type callback</a>)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68147""></a>
  <div class="note">
   <strong class="user">rlansky at webroot dot com</strong>
   <a href="#68147" class="date">15-Jul-2006 01:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Based on the previous posts, it appears that using call_user_func can be serveral times slower than using variable substitution. I think these results are somewhat misleading.<br />
<br />
I set up a similar test in which a static method of an object was called repeatedly in a loop. I got similar results to those seen; when calling the method using call_user_func the execution was twice that of calling the method directly. However, I then started adding some "meat" to the method in question. In my case, I found that what was constant was not the percentage change, but rather that there is a fixed cost to using call_user_func. <br />
<br />
In my case, this fixed cost was 2 microseconds per call. When executing a method that performs no operations, this is a large percentage of the execution time for that method. However, when using this on a method that actually performs some work, the 2 microsecond cost is almost impossible to measure.<br />
<br />
It seems to me that if you want to use call_user_func to call a very fast executing method, and you need to do this thousands of times, then you may want to reconsider. However, if you are using this to call methods that are not executed thousands of times, the small fixed cost of using php call_user_func is probably not an issue.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="64415""></a>
  <div class="note">
   <strong class="user">Maresa</strong>
   <a href="#64415" class="date">14-Apr-2006 12:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I tested the same code that insta at citiesunlimited dot com pasted on the following machines:<br />
<br />
www1 machine:<br />
OS:&nbsp; FreeBSD 5.2.1-RELEASE<br />
CPU: 2 x Intel(R) Xeon(TM) CPU 2.66GHz (2657.82-MHz 686-class CPU) with Hyperthreading<br />
MEM: 1073217536 (1023 MB)<br />
PHP 5.1.2 (cli)<br />
PHP 4.4.1 (Web)<br />
<br />
www2 machine:<br />
OS:&nbsp; Linux version 2.6.14-gentoo-r5 Gentoo 3.4.3-r1, ssp-3.4.3-0, pie-8.7.7)<br />
CPU: 2 x Dual Core AMD Opteron(tm) Processor 265 stepping 02 1808.357 MHz<br />
MEM: 2060388k total<br />
PHP 5.1.2 (cli)<br />
PHP Version 4.4.0-pl1-gentoo (web)<br />
<br />
dev machine:<br />
OS:&nbsp; Linux version 2.6.15-gentoo-r1 Gentoo 3.3.5.20050130-r1, ssp-3.3.5.20050130-1, pie-8.7.7.1<br />
CPU: Intel(R) Pentium(R) 4 CPU 2.00GHz stepping 04<br />
MEM: 516384k total,<br />
PHP 4.4.0-pl1-gentoo (cli)<br />
PHP Version 4.4.0-pl1-gentoo (web)<br />
<br />
The result are as follows:<br />
<br />
www1 - CLI<br />
Variable functions took 0.012186050415 seconds.<br />
call_user_func took 0.0300550460815 seconds.<br />
eval took 0.17235994339 seconds.<br />
<br />
www1 - Web<br />
Variable functions took 0.017616 seconds. <br />
call_user_func took 0.034926 seconds. <br />
eval took 0.149618 seconds<br />
<br />
www2 - CLI<br />
Variable functions took 0.0065491199493408 seconds.<br />
call_user_func took 0.019452095031738 seconds.<br />
eval took 0.10734891891479 seconds.<br />
<br />
www2 - Web<br />
Variable functions took 0.01565 seconds. <br />
call_user_func took 0.02613 seconds. <br />
eval took 0.132258 seconds.<br />
<br />
dev - CLI<br />
Variable functions took 0.025176 seconds.<br />
call_user_func took 0.047402 seconds.<br />
eval took 0.168196 seconds.<br />
<br />
dev - Web<br />
Variable functions took 0.025465 seconds. <br />
call_user_func took 0.049713 seconds. <br />
eval took 0.20154 seconds.<br />
<br />
On www1 - CLI, eval is about 14 times slower than calling function by using variable.<br />
On www1 - Web, eval is about 8.5 times slower (hmm interesting. Perhaps PHP4 is faster calculating eval than PHP5)<br />
<br />
On www2 - CLI, eval is about 16 times slower than calling function by using variable.<br />
On www2 - Web, eval is about 8.5 times slower (about same result as www1)<br />
<br />
On dev - CLI, eval is about 6.6 times slower than calling function by using variable.<br />
On dev - Web, eval is about 8 times slower (about same result as www1)<br />
<br />
On the dev machine, CLI and web version of PHP is the same. and their speed difference between calling function using variable or eval does not differ that much compare to PHP5 VS PHP5</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="61553""></a>
  <div class="note">
   <strong class="user">insta at citiesunlimited dot com</strong>
   <a href="#61553" class="date">06-Feb-2006 09:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I benchmarked the comparison in speed between variable functions, call_user_func, and eval.&nbsp; My results are below:<br />
<br />
Variable functions took 0.125958204269 seconds.<br />
call_user_func took 0.485446929932 seconds.<br />
eval took 2.78526711464 seconds.<br />
<br />
This was run on a Compaq Proliant server, 180MHz Pentium Pro 256MB RAM.&nbsp; Code is as follows:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">fa </span><span class="keyword">() { return </span><span class="default">1</span><span class="keyword">; }<br />
function </span><span class="default">fb </span><span class="keyword">() { return </span><span class="default">1</span><span class="keyword">; }<br />
function </span><span class="default">fc </span><span class="keyword">() { return </span><span class="default">1</span><span class="keyword">; }<br />
<br />
</span><span class="default">$calla </span><span class="keyword">= </span><span class="string">'fa'</span><span class="keyword">;<br />
</span><span class="default">$callb </span><span class="keyword">= </span><span class="string">'fb'</span><span class="keyword">;<br />
</span><span class="default">$callc </span><span class="keyword">= </span><span class="string">'fc'</span><span class="keyword">;<br />
<br />
</span><span class="default">$time </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">( </span><span class="default">true </span><span class="keyword">);<br />
for( </span><span class="default">$i </span><span class="keyword">= </span><span class="default">5000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">--; ) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">+= </span><span class="default">$calla</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">+= </span><span class="default">$callb</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">+= </span><span class="default">$callc</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; if( </span><span class="default">$x </span><span class="keyword">!= </span><span class="default">3 </span><span class="keyword">) die( </span><span class="string">'Bad numbers' </span><span class="keyword">);<br />
}<br />
echo( </span><span class="string">"Variable functions took " </span><span class="keyword">. (</span><span class="default">microtime</span><span class="keyword">( </span><span class="default">true </span><span class="keyword">) - </span><span class="default">$time</span><span class="keyword">) . </span><span class="string">" seconds.&lt;br /&gt;" </span><span class="keyword">);<br />
<br />
</span><span class="default">$time </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">( </span><span class="default">true </span><span class="keyword">);<br />
for( </span><span class="default">$i </span><span class="keyword">= </span><span class="default">5000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">--; ) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">+= </span><span class="default">call_user_func</span><span class="keyword">(</span><span class="string">'fa'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">+= </span><span class="default">call_user_func</span><span class="keyword">(</span><span class="string">'fb'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">+= </span><span class="default">call_user_func</span><span class="keyword">(</span><span class="string">'fc'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if( </span><span class="default">$x </span><span class="keyword">!= </span><span class="default">3 </span><span class="keyword">) die( </span><span class="string">'Bad numbers' </span><span class="keyword">);<br />
}<br />
echo( </span><span class="string">"call_user_func took " </span><span class="keyword">. (</span><span class="default">microtime</span><span class="keyword">( </span><span class="default">true </span><span class="keyword">) - </span><span class="default">$time</span><span class="keyword">) . </span><span class="string">" seconds.&lt;br /&gt;" </span><span class="keyword">);<br />
<br />
</span><span class="default">$time </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">( </span><span class="default">true </span><span class="keyword">);<br />
for( </span><span class="default">$i </span><span class="keyword">= </span><span class="default">5000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">--; ) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; eval( </span><span class="string">'$x += ' </span><span class="keyword">. </span><span class="default">$calla </span><span class="keyword">. </span><span class="string">'();' </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; eval( </span><span class="string">'$x += ' </span><span class="keyword">. </span><span class="default">$callb </span><span class="keyword">. </span><span class="string">'();' </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; eval( </span><span class="string">'$x += ' </span><span class="keyword">. </span><span class="default">$callc </span><span class="keyword">. </span><span class="string">'();' </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if( </span><span class="default">$x </span><span class="keyword">!= </span><span class="default">3 </span><span class="keyword">) die( </span><span class="string">'Bad numbers' </span><span class="keyword">);<br />
}<br />
echo( </span><span class="string">"eval took " </span><span class="keyword">. (</span><span class="default">microtime</span><span class="keyword">( </span><span class="default">true </span><span class="keyword">) - </span><span class="default">$time</span><span class="keyword">) . </span><span class="string">" seconds.&lt;br /&gt;" </span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57469""></a>
  <div class="note">
   <strong class="user">Marco</strong>
   <a href="#57469" class="date">05-Oct-2005 10:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
&gt;phil at gettcomm dot com
<br />
&gt;22-May-2002 04:51
<br />
&gt;if you need to get a reference back from a method, you can work around 
<br />
&gt;call_user_func()'s shortcomings like this:
<br />
&gt;
<br />
Naaa! Having back a reference is a real problem, but it can be solved by mean of eval(), instead of using call_user_func: 
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp; </span><span class="keyword">class </span><span class="default">Node </span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; var </span><span class="default">$name</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; var </span><span class="default">$child</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">Node </span><span class="keyword">( </span><span class="default">$name </span><span class="keyword">) { </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">= </span><span class="default">$name</span><span class="keyword">; }
<br />
&nbsp;&nbsp;&nbsp; function &amp;</span><span class="default">getChild </span><span class="keyword">() { return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">child</span><span class="keyword">; }
<br />
&nbsp; }
<br />
&nbsp; </span><span class="default">$p </span><span class="keyword">= new </span><span class="default">Node </span><span class="keyword">( </span><span class="string">'Father' </span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$c </span><span class="keyword">= new </span><span class="default">Node </span><span class="keyword">( </span><span class="string">'Child' </span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">child </span><span class="keyword">= &amp;</span><span class="default">$c</span><span class="keyword">;&nbsp; 
<br />

<br />
&nbsp; eval ( </span><span class="string">"\\</span><span class="default">$cref</span><span class="string"> = &amp;\\</span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">getChild</span><span class="string"> ();" </span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$cref</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">= </span><span class="string">'Another Child'</span><span class="keyword">;
<br />

<br />
&nbsp; </span><span class="comment">// Prints out 'Another Child'
<br />
&nbsp; </span><span class="keyword">echo </span><span class="string">"****** After eval c = " </span><span class="keyword">. </span><span class="default">$c</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">. </span><span class="string">"\\n\\n"</span><span class="keyword">;
<br />

<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55644""></a>
  <div class="note">
   <strong class="user">php at REMOVEMEkennel17 dot co dot uk</strong>
   <a href="#55644" class="date">09-Aug-2005 05:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
re comment by mw at lanfear dot com<br />
<br />
I am using PHP 4.3.2 and that technique works fine here as well.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55164""></a>
  <div class="note">
   <strong class="user">mw at lanfear dot com</strong>
   <a href="#55164" class="date">26-Jul-2005 10:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function is actually quite useful for calling static methods on classes, which you CANNOT call as:<br />
<br />
$v1 = 'MyClass';<br />
$m1 = 'method';<br />
$v1::$m1();&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // syntax error -- not permitted.<br />
<br />
The following, however, DOES work quite well, and is hopefully slightly faster than eval() ...<br />
<br />
$ar = array($v1, $m1);<br />
<br />
call_user_func($ar);&nbsp; &nbsp; // works teh awes0me!!1!<br />
<br />
[I am, however, presuming PHP5 here ...]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52952""></a>
  <div class="note">
   <strong class="user">info at webseiteselberpflegen dot de</strong>
   <a href="#52952" class="date">18-May-2005 10:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It seems like call_user_func() can not be used to create Objects via the new Command.
<br />

<br />
The Following example dosen't work:
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp; </span><span class="keyword">include_once(</span><span class="default">class_</span><span class="string">".</span><span class="default">$type</span><span class="string">."</span><span class="keyword">.</span><span class="default">php</span><span class="string">");
<br />
&nbsp; </span><span class="default">$object</span><span class="string"> = new call_user_func ('bdv_'.</span><span class="default">$type</span><span class="string">);
<br />
?&gt;
<br />

<br />
But this works:
<br />

<br />
&lt;?php
<br />
&nbsp;&nbsp;&nbsp; include_once(class_"</span><span class="keyword">.</span><span class="default">$type</span><span class="keyword">.</span><span class="string">".php"</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$constr </span><span class="keyword">= </span><span class="string">'bdv_'</span><span class="keyword">.</span><span class="default">$type</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$object </span><span class="keyword">= new </span><span class="default">$constr</span><span class="keyword">();
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50974""></a>
  <div class="note">
   <strong class="user">d at safetypub dot org</strong>
   <a href="#50974" class="date">15-Mar-2005 05:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
callbacks, this par excellence, goes with set error handler, everywhere you'ren't sure of extensio de intensionibus (animis alii).<br />
<br />
<span class="default">&lt;?php<br />
<br />
$checkMe </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
</span><span class="default">$detail </span><span class="keyword">= array();<br />
</span><span class="default">set_error_handler</span><span class="keyword">(</span><span class="string">"imErrant"</span><span class="keyword">);<br />
<br />
</span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$argv</span><span class="keyword">);<br />
if (</span><span class="default">$argc </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">call_user_func</span><span class="keyword">(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$argv</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]));<br />
} else if(</span><span class="default">$argc </span><span class="keyword">== </span><span class="default">2</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">call_user_func</span><span class="keyword">(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$argv</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]), </span><span class="default">$argv</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);<br />
} <br />
else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$argv</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]),</span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$argv</span><span class="keyword">));<br />
<br />
if(</span><span class="default">$checkMe</span><span class="keyword">)</span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$detail</span><span class="keyword">);<br />
<br />
function </span><span class="default">imErrant</span><span class="keyword">(</span><span class="default">$no</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">, </span><span class="default">$file</span><span class="keyword">, </span><span class="default">$line</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; global </span><span class="default">$checkMe</span><span class="keyword">, </span><span class="default">$detail</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$checkMe </span><span class="keyword">= </span><span class="default">$no</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$detail </span><span class="keyword">= array(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$file</span><span class="keyword">, </span><span class="default">$line</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50343""></a>
  <div class="note">
   
   <a href="#50343" class="date">25-Feb-2005 04:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">/*<br />
&nbsp;&nbsp;&nbsp; A very simple event handler dispose and change the latest one I did<br />
*/<br />
<br />
</span><span class="keyword">class </span><span class="default">Duke<br />
</span><span class="keyword">{<br />
</span><span class="comment">//public:<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">var </span><span class="default">$m_pRaiser</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; var </span><span class="default">$m_strRaiserFun</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; var </span><span class="default">$m_objArgs</span><span class="keyword">;<br />
</span><span class="comment">//public:<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">Duke</span><span class="keyword">(&nbsp; </span><span class="default">$pRaiser</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$strRaiserFun</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$objArgs </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this </span><span class="keyword">-&gt;</span><span class="default">m_pRaiser&nbsp; &nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">$pRaiser</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this </span><span class="keyword">-&gt;</span><span class="default">m_strRaiserFun </span><span class="keyword">= </span><span class="default">$strRaiserFun</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this </span><span class="keyword">-&gt;</span><span class="default">m_objArgs&nbsp; &nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">$objArgs</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; }</span><span class="comment">//end of constructor<br />
<br />
</span><span class="keyword">}</span><span class="comment">//end of class Duke<br />
<br />
</span><span class="keyword">class </span><span class="default">A<br />
</span><span class="keyword">{<br />
</span><span class="comment">//protected:<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">OnEventHandler</span><span class="keyword">( </span><span class="default">$sender</span><span class="keyword">, </span><span class="default">$args </span><span class="keyword">)</span><span class="comment">//virtual<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sender </span><span class="keyword">-&gt;</span><span class="default">SayHello</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; }</span><span class="comment">//end of OnEventHandler( $sender, $args )<br />
&nbsp;<br />
//public:<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">OnEvent</span><span class="keyword">( </span><span class="default">$pDuke </span><span class="keyword">= </span><span class="default">null </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">$pDuke </span><span class="keyword">== </span><span class="default">null </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">call_user_func</span><span class="keyword">( array( &amp;</span><span class="default">$this</span><span class="keyword">, </span><span class="string">"OnEventHandler" </span><span class="keyword">), </span><span class="default">$this</span><span class="keyword">, </span><span class="default">null </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">call_user_func</span><span class="keyword">( array( </span><span class="default">$pDuke </span><span class="keyword">-&gt;</span><span class="default">m_pRaiser</span><span class="keyword">, </span><span class="default">$pDuke </span><span class="keyword">-&gt;</span><span class="default">m_strRaiserFun </span><span class="keyword">), </span><span class="default">$pDuke </span><span class="keyword">-&gt;</span><span class="default">m_pRaiser</span><span class="keyword">, </span><span class="default">$pDuke </span><span class="keyword">-&gt;</span><span class="default">m_objArgs </span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; }</span><span class="comment">//end of&nbsp; OnEvent( $pDuke )<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">SayHello</span><span class="keyword">()</span><span class="comment">//virtual<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"A::SayHello" </span><span class="keyword">. </span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }</span><span class="comment">//end of SayHello() <br />
<br />
</span><span class="keyword">}</span><span class="comment">//end of class A<br />
<br />
</span><span class="keyword">class </span><span class="default">B </span><span class="keyword">extends </span><span class="default">A<br />
</span><span class="keyword">{<br />
</span><span class="comment">//public:<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">SayHello</span><span class="keyword">()</span><span class="comment">//override<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"B::SayHello" </span><span class="keyword">. </span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }</span><span class="comment">//end of SayHello()<br />
<br />
</span><span class="keyword">}</span><span class="comment">//end of class B<br />
<br />
//////////////////////////////////////////////////////////////////////<br />
//Main import to test<br />
//<br />
</span><span class="default">$a </span><span class="keyword">= &amp;new </span><span class="default">A</span><span class="keyword">();<br />
</span><span class="default">$b </span><span class="keyword">= &amp;new </span><span class="default">B</span><span class="keyword">();<br />
<br />
</span><span class="default">$pDuke </span><span class="keyword">= &amp;new </span><span class="default">Duke</span><span class="keyword">( </span><span class="default">$b</span><span class="keyword">, </span><span class="string">"OnEventHandler"</span><span class="keyword">, </span><span class="default">null </span><span class="keyword">);<br />
<br />
</span><span class="default">$b </span><span class="keyword">-&gt;</span><span class="default">OnEvent</span><span class="keyword">();<br />
</span><span class="default">$b </span><span class="keyword">-&gt;</span><span class="default">OnEvent</span><span class="keyword">( </span><span class="default">$pDuke </span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50305""></a>
  <div class="note">
   <strong class="user">zxy at estec-jp dot com</strong>
   <a href="#50305" class="date">24-Feb-2005 11:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A simple event handler dispose released by useful callback in PHP 4.x<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Duke<br />
</span><span class="keyword">{<br />
</span><span class="comment">//public:<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">var </span><span class="default">$m_pRaiser</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; var </span><span class="default">$m_strRaiserFun</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; var </span><span class="default">$m_objArgs</span><span class="keyword">;<br />
</span><span class="comment">//public:<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">Duke</span><span class="keyword">(&nbsp; </span><span class="default">$pRaiser</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$strRaiserFun</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$objArgs </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this </span><span class="keyword">-&gt;</span><span class="default">m_pRaiser&nbsp; &nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">$pRaiser</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this </span><span class="keyword">-&gt;</span><span class="default">m_strRaiserFun </span><span class="keyword">= </span><span class="default">$strRaiserFun</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this </span><span class="keyword">-&gt;</span><span class="default">m_objArgs&nbsp; &nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">$objArgs</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; }</span><span class="comment">//end of constructor<br />
<br />
</span><span class="keyword">}</span><span class="comment">//end of class Duke<br />
<br />
</span><span class="keyword">class </span><span class="default">A<br />
</span><span class="keyword">{<br />
</span><span class="comment">//protected:<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">OnEventHandler</span><span class="keyword">( </span><span class="default">$sender</span><span class="keyword">, </span><span class="default">$args </span><span class="keyword">)</span><span class="comment">//virtual<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sender </span><span class="keyword">-&gt;</span><span class="default">SayHello</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; }</span><span class="comment">//end of OnEventHandler( $sender, $args )<br />
&nbsp;<br />
//public:<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">OnEvent</span><span class="keyword">( </span><span class="default">$pDuke </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">call_user_func</span><span class="keyword">( array( </span><span class="default">$pDuke </span><span class="keyword">-&gt;</span><span class="default">m_pRaiser</span><span class="keyword">, </span><span class="default">$pDuke </span><span class="keyword">-&gt;</span><span class="default">m_strRaiserFun </span><span class="keyword">), </span><span class="default">$pDuke </span><span class="keyword">-&gt;</span><span class="default">m_pRaiser</span><span class="keyword">, </span><span class="default">$pDuke </span><span class="keyword">-&gt;</span><span class="default">m_objArgs </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }</span><span class="comment">//end of&nbsp; OnEvent( $pDuke )<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">SayHello</span><span class="keyword">()</span><span class="comment">//virtual<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"A::SayHello" </span><span class="keyword">. </span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }</span><span class="comment">//end of SayHello() <br />
<br />
</span><span class="keyword">}</span><span class="comment">//end of class A<br />
<br />
</span><span class="keyword">class </span><span class="default">B </span><span class="keyword">extends </span><span class="default">A<br />
</span><span class="keyword">{<br />
</span><span class="comment">//public:<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">SayHello</span><span class="keyword">()</span><span class="comment">//override<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"B::SayHello" </span><span class="keyword">. </span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }</span><span class="comment">//end of SayHello()<br />
<br />
</span><span class="keyword">}</span><span class="comment">//end of class B<br />
<br />
///////////////////////////////////////////////////////////<br />
//Main import to test<br />
//<br />
</span><span class="default">$a </span><span class="keyword">= &amp;new </span><span class="default">A</span><span class="keyword">();<br />
</span><span class="default">$b </span><span class="keyword">= &amp;new </span><span class="default">B</span><span class="keyword">();<br />
<br />
</span><span class="default">$pDuke </span><span class="keyword">= &amp;new </span><span class="default">Duke</span><span class="keyword">( </span><span class="default">$b</span><span class="keyword">, </span><span class="string">"SayHello"</span><span class="keyword">, </span><span class="default">null </span><span class="keyword">);<br />
</span><span class="default">$b </span><span class="keyword">-&gt;</span><span class="default">OnEvent</span><span class="keyword">( </span><span class="default">$pDuke </span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46327""></a>
  <div class="note">
   
   <a href="#46327" class="date">07-Oct-2004 09:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are trying to instantiate an object from a class whose name is dynamic, you WILL NOT be able to do this with call_user_func() and I do not suggest that you do it with eval(). The way to do it is actually much simpler than i thought. As far as i know this works in PHP 4 and 5:<br />
<br />
<span class="default">&lt;?PHP<br />
</span><span class="keyword">class </span><span class="default">foo </span><span class="keyword">{<br />
&nbsp;var </span><span class="default">$boo</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">foo</span><span class="keyword">( </span><span class="default">$someVal </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">boo </span><span class="keyword">= </span><span class="default">$someVal</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$ClassToUse </span><span class="keyword">= </span><span class="string">"foo"</span><span class="keyword">;<br />
</span><span class="default">$bar </span><span class="keyword">= new </span><span class="default">$ClassToUse</span><span class="keyword">(</span><span class="string">'test'</span><span class="keyword">);<br />
echo </span><span class="default">$bar</span><span class="keyword">-&gt;</span><span class="default">boo</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41087""></a>
  <div class="note">
   <strong class="user">arjini at mac dot com</strong>
   <a href="#41087" class="date">30-Mar-2004 02:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Some of the wierder examples below confused me, and made me think that the following would work (but it does!).
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
</span><span class="keyword">class </span><span class="default">barber</span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">shop</span><span class="keyword">(</span><span class="default">$one</span><span class="keyword">,</span><span class="default">$two</span><span class="keyword">,</span><span class="default">$three</span><span class="keyword">,</span><span class="default">$four</span><span class="keyword">=</span><span class="string">'quartet'</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$one</span><span class="keyword">.</span><span class="string">','</span><span class="keyword">.</span><span class="default">$two</span><span class="keyword">.</span><span class="string">','</span><span class="keyword">.</span><span class="default">$three</span><span class="keyword">.</span><span class="string">','</span><span class="keyword">.</span><span class="default">$four</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />

<br />
</span><span class="default">$bsq </span><span class="keyword">= new </span><span class="default">barber</span><span class="keyword">;
<br />
</span><span class="default">call_user_func</span><span class="keyword">(array(&amp;</span><span class="default">$bsq</span><span class="keyword">,</span><span class="string">'shop'</span><span class="keyword">),</span><span class="string">'one'</span><span class="keyword">,</span><span class="string">'two'</span><span class="keyword">,</span><span class="string">'three'</span><span class="keyword">);
<br />

<br />
</span><span class="comment">/* Output = one,two,three,quartet */
<br />

<br />
</span><span class="keyword">class </span><span class="default">bigBarber</span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; var </span><span class="default">$quartet</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">bigBarber</span><span class="keyword">(){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">quartet </span><span class="keyword">= </span><span class="string">'four'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">shop</span><span class="keyword">(</span><span class="default">$one</span><span class="keyword">,</span><span class="default">$two</span><span class="keyword">,</span><span class="default">$three</span><span class="keyword">,</span><span class="default">$five</span><span class="keyword">=</span><span class="string">'quintet'</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$one</span><span class="keyword">.</span><span class="string">','</span><span class="keyword">.</span><span class="default">$two</span><span class="keyword">.</span><span class="string">','</span><span class="keyword">.</span><span class="default">$three</span><span class="keyword">.</span><span class="string">','</span><span class="keyword">.</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">quartet</span><span class="keyword">.</span><span class="string">','</span><span class="keyword">.</span><span class="default">$five</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />

<br />
</span><span class="default">$bbsq </span><span class="keyword">= new </span><span class="default">bigBarber</span><span class="keyword">();
<br />
</span><span class="default">call_user_func</span><span class="keyword">(array(&amp;</span><span class="default">$bbsq</span><span class="keyword">,</span><span class="string">'shop'</span><span class="keyword">),</span><span class="string">'one'</span><span class="keyword">,</span><span class="string">'two'</span><span class="keyword">,</span><span class="string">'three'</span><span class="keyword">);
<br />

<br />
</span><span class="comment">/* Output = one,two,three,four,quintet */
<br />

<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="39280""></a>
  <div class="note">
   <strong class="user">Kris Koskelin</strong>
   <a href="#39280" class="date">23-Jan-2004 12:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was trying to use this function to call a method of an already-instantiated object.&nbsp; I needed to do this with the object itself, not simply call the class' method.
<br />

<br />
To accomplish this, I really avoided this particular function altogether like this:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">if ( </span><span class="default">method_exists</span><span class="keyword">(</span><span class="default">$my_obj</span><span class="keyword">, </span><span class="default">$action</span><span class="keyword">) ){
<br />
&nbsp;&nbsp; &nbsp; return </span><span class="default">$my_obj</span><span class="keyword">-&gt;{</span><span class="default">$action</span><span class="keyword">}();
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
I hope someone else finds this useful.&nbsp; Note that doing this allows you to pass params to the function more-or-less in the same way you would to any other class method.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="36168""></a>
  <div class="note">
   <strong class="user">Michele.Manzato at verona.miz.it</strong>
   <a href="#36168" class="date">29-Sep-2003 05:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
With overload()ed classes call_user_func_* calls real class methods only. If the method does not exist then PHP does not try with the "__call()" magic method (at least until PHP 4.3.3). See this:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">A <br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">A</span><span class="keyword">() {}<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">__call</span><span class="keyword">(</span><span class="default">$method</span><span class="keyword">, </span><span class="default">$args</span><span class="keyword">, &amp;</span><span class="default">$ret</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"__call(): You called '</span><span class="keyword">{</span><span class="default">$method</span><span class="keyword">}</span><span class="string">()'&lt;br&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">regular</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"You called 'regular()'&lt;br&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; <br />
};<br />
</span><span class="default">overload</span><span class="keyword">(</span><span class="string">"A"</span><span class="keyword">);<br />
<br />
</span><span class="default">$a </span><span class="keyword">= new </span><span class="default">A</span><span class="keyword">;<br />
<br />
</span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">regular</span><span class="keyword">();&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Works, calls regular()<br />
</span><span class="default">call_user_func</span><span class="keyword">(array(&amp;</span><span class="default">$a</span><span class="keyword">, </span><span class="string">"regular"</span><span class="keyword">));&nbsp; </span><span class="comment">// Works, calls regular()<br />
<br />
</span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">hello</span><span class="keyword">();&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Works, calls __call()<br />
</span><span class="default">call_user_func</span><span class="keyword">(array(&amp;</span><span class="default">$a</span><span class="keyword">, </span><span class="string">"hello"</span><span class="keyword">));&nbsp; &nbsp; </span><span class="comment">// Does NOT work!<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="34474""></a>
  <div class="note">
   <strong class="user">Carl</strong>
   <a href="#34474" class="date">28-Jul-2003 08:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had a problem where I wanted to parameterize a callback. The end called was in an external class, but I needed to save some state for the callback that didn't make sense to keep in the original object, as it might change from call to call...
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">class </span><span class="default">foo 
<br />
</span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">foo</span><span class="keyword">()
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="string">"Hello There"</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str2 </span><span class="keyword">= </span><span class="string">"Carl"</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$that </span><span class="keyword">=&amp; new </span><span class="default">holder</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">call_user_func</span><span class="keyword">(array(&amp;</span><span class="default">$that</span><span class="keyword">, </span><span class="string">'callback'</span><span class="keyword">), </span><span class="default">$str2</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />

<br />
class </span><span class="default">holder
<br />
</span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">holder</span><span class="keyword">(</span><span class="default">$aParam</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">param </span><span class="keyword">= </span><span class="default">$aParam</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">callback</span><span class="keyword">(</span><span class="default">$aStr</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"A=</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">param</span><span class="string">, B=</span><span class="default">$aStr</span><span class="string">\n"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="27120""></a>
  <div class="note">
   <strong class="user">matt at tasonline dot com</strong>
   <a href="#27120" class="date">23-Nov-2002 09:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On PHP 4.2.3 (not sure about older releases) you can send objects by reference by sending the reference from call_user_func()
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">myFunction</span><span class="keyword">(@</span><span class="default">$obj</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp; </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">doThis</span><span class="keyword">(</span><span class="string">'hello'</span><span class="keyword">);
<br />
&nbsp;&nbsp; return </span><span class="default">0</span><span class="keyword">;
<br />
}
<br />

<br />
</span><span class="default">$myObj </span><span class="keyword">= new </span><span class="default">CObject</span><span class="keyword">();
<br />

<br />
</span><span class="default">call_user_func</span><span class="keyword">(</span><span class="string">'myFunction'</span><span class="keyword">, @</span><span class="default">$myObj</span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="21646""></a>
  <div class="note">
   <strong class="user">phil at gettcomm dot com</strong>
   <a href="#21646" class="date">22-May-2002 04:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if you need to get a reference back from a method, you can work around call_user_func()'s shortcomings like this:
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
$globalObj</span><span class="keyword">;
<br />

<br />
class </span><span class="default">tClass
<br />
</span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; function &amp;</span><span class="default">instance</span><span class="keyword">()
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; global </span><span class="default">$globalObj</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$globalObj</span><span class="keyword">))
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$globalObj </span><span class="keyword">= new </span><span class="default">tClass</span><span class="keyword">();
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$globalObj</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />

<br />
</span><span class="default">$classname </span><span class="keyword">= </span><span class="string">"tClass"</span><span class="keyword">;
<br />
</span><span class="comment"># calling the function this way won't 
<br />
# return a reference.
<br />
</span><span class="default">$test </span><span class="keyword">= &amp;</span><span class="default">call_user_func</span><span class="keyword">(array(</span><span class="default">$classname</span><span class="keyword">,</span><span class="string">"instance"</span><span class="keyword">));
<br />
</span><span class="comment"># but if we call it again with the instance
<br />
# that we just got, it'll be the right
<br />
# one
<br />
</span><span class="default">$test </span><span class="keyword">= &amp;</span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">instance</span><span class="keyword">();
<br />
</span><span class="comment"># so test is now a reference to $globalObj, just like it should be
<br />

<br />
# let's verify it:
<br />
</span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">blah</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;
<br />

<br />
echo </span><span class="string">"&lt;pre&gt;"</span><span class="keyword">;
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">).</span><span class="string">"\n"</span><span class="keyword">;
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$globalObj</span><span class="keyword">);
<br />
echo </span><span class="string">"&lt;/pre&gt;"</span><span class="keyword">;
<br />
</span><span class="comment"># there, now it behaves just like you'd expect
<br />

<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="19698""></a>
  <div class="note">
   <strong class="user">dougqh at hotmail dot com</strong>
   <a href="#19698" class="date">08-Mar-2002 02:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The previous note I posted had an error in the source code.&nbsp; That has been corrected in this note.
<br />

<br />
Note, that returning by reference does not work properly when the function
<br />
is called using call_user_func.
<br />

<br />
This example illustrates the problem...
<br />

<br />
<span class="default">&lt;?php
<br />
$globalVar </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />

<br />
function &amp;</span><span class="default">staticFunction</span><span class="keyword">()
<br />
{
<br />
&nbsp;&nbsp; global </span><span class="default">$globalVar</span><span class="keyword">;
<br />
&nbsp;&nbsp; 
<br />
&nbsp;&nbsp; return </span><span class="default">$globalVar</span><span class="keyword">;
<br />
}
<br />

<br />
</span><span class="default">$result </span><span class="keyword">=&amp; </span><span class="default">call_user_func</span><span class="keyword">( </span><span class="string">"staticFunction" </span><span class="keyword">);
<br />

<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">3</span><span class="keyword">;
<br />

<br />
print </span><span class="string">"result:" </span><span class="keyword">. </span><span class="default">$result </span><span class="keyword">. </span><span class="string">"&lt;br/&gt;\n"</span><span class="keyword">;
<br />
print </span><span class="string">"globalVar: " </span><span class="keyword">. </span><span class="default">$globalVar </span><span class="keyword">. </span><span class="string">"&lt;br/&gt;\n"</span><span class="keyword">;
<br />

<br />
</span><span class="default">$result2 </span><span class="keyword">=&amp; </span><span class="default">staticFunction</span><span class="keyword">();
<br />

<br />
</span><span class="default">$result2 </span><span class="keyword">= </span><span class="default">3</span><span class="keyword">;
<br />

<br />
print </span><span class="string">"result2: " </span><span class="keyword">. </span><span class="default">$result2 </span><span class="keyword">. </span><span class="string">"&lt;br/&gt;\n"</span><span class="keyword">;
<br />
print </span><span class="string">"globalVar: " </span><span class="keyword">. </span><span class="default">$globalVar </span><span class="keyword">. </span><span class="string">"&lt;br/&gt;\n"</span><span class="keyword">;
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
The above code results in the following output ...
<br />
Note that $result is not a reference to $globalVar.
<br />

<br />
result:0
<br />
globalVar: 0
<br />
result2: 3
<br />
globalVar: 3
<br />

<br />
Also, the use of call_user_method is now deprecated in favor of passing
<br />
array( &amp;$object, $method ) as the function to call_user_func.&nbsp; This is
<br />
reported when error reporting is set to E_ALL in the latest versions of
<br />
PHP.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="14105""></a>
  <div class="note">
   <strong class="user">danyloco at yahoo dot com</strong>
   <a href="#14105" class="date">18-Jul-2001 01:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was trying to call multiple functions within a class, and after a brain frying experience this is what came out... hope it helps:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">class </span><span class="default">Foo </span><span class="keyword">{
<br />
&nbsp;function </span><span class="default">hey1</span><span class="keyword">(</span><span class="default">$id</span><span class="keyword">){echo </span><span class="string">"In hey1"</span><span class="keyword">;}
<br />
&nbsp;function </span><span class="default">hey2</span><span class="keyword">(</span><span class="default">$id</span><span class="keyword">){echo </span><span class="string">"In hey2"</span><span class="keyword">;}
<br />
&nbsp;</span><span class="comment">#... and so forth ...
<br />
&nbsp;</span><span class="keyword">function </span><span class="default">runtest</span><span class="keyword">(</span><span class="default">$id</span><span class="keyword">) {
<br />
&nbsp;&nbsp; </span><span class="comment">#the fun part :)
<br />
&nbsp;&nbsp; </span><span class="keyword">for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">2</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {
<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$fp </span><span class="keyword">= </span><span class="string">"hey"</span><span class="keyword">.</span><span class="default">$i</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">$fp</span><span class="keyword">(</span><span class="default">$id</span><span class="keyword">);
<br />
}
<br />
}
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
It worked like a charm :).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="7961""></a>
  <div class="note">
   <strong class="user">andreyhristov at yahoo dot com</strong>
   <a href="#7961" class="date">22-Aug-2000 03:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Let say we construct somehow the name of the function. In some cases we can use nested&nbsp; 'switch'&nbsp; but the alternative is to to use for and parse a string to construct&nbsp; the&nbsp; function&nbsp; name, after than&nbsp; we also can construct and the parameter(s) for it. It&nbsp; is like using of eval. I use it in&nbsp; one of my projects to construct a name of nested array like $ar['1999'['july']['29']['19'], etc.
<br />

<br />
the problem is in that I'm parsing a string to construct the name. If I've {1:2:3}&nbsp; the array name&nbsp; will be $ar['1']['2']['3'] but if i've
<br />
{1:2:3:4:5} it will&nbsp; be $ar['1']['2']['3']['4']['5'].
<br />

<br />
Eval is the only way (very hard because of characters escaping is needed)&nbsp; to do it. So this function is of the type of EVAL().
<br />
USE IT wherever your script is&nbsp; 'self-modified';</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

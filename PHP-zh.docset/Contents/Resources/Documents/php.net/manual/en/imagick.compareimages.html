<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Compares an image to a reconstructed image</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="imagick.compareimagelayers.html">? Imagick::compareImageLayers</a></li>
      <li style="float: right;"><a href="imagick.compositeimage.html">Imagick::compositeImage ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.imagick.html">Imagick</a></li>
    <li>Compares an image to a reconstructed image</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="imagick.compareimages" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">Imagick::compareImages</h1>
  <p class="verinfo">(PECL imagick 2.0.0)</p><p class="refpurpose"><span class="refname">Imagick::compareImages</span> &mdash; <span class="dc-title">Compares an image to a reconstructed image</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-imagick.compareimages-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">array</span> <span class="methodname"><strong>Imagick::compareImages</strong></span>
    ( <span class="methodparam"><span class="type"><a href="class.imagick.html" class="type Imagick">Imagick</a></span> <code class="parameter">$compare</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$metric</code></span>
   )</div>

  <p class="para rdfs-comment">
   Returns an array containing a reconstructed image and the difference between images.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-imagick.compareimages-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">compare</code></dt>

     <dd>

      <p class="para">
       An image to compare to.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">metric</code></dt>

     <dd>

      <p class="para">
       Provide a valid metric type constant. Refer to this
       list of  <a href="imagick.constants.html#imagick.constants.metric" class="link">metric constants</a>.
      </p>
     </dd>

    
   </dl>

  </p>

 </div>

 <div class="refsect1 returnvalues" id="refsect1-imagick.compareimages-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   Returns an array containing a reconstructed image and the difference between images.
  </p>
 </div>


 <div class="refsect1 errors" id="refsect1-imagick.compareimages-errors">
  <h3 class="title">错误／异常</h3>
  <p class="para">
   错误时抛出 ImagickException。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-imagick.compareimages-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-3529">
    <p><strong>Example #1 Using <span class="function"><strong>Imagick::compareImages()</strong></span>:</strong></p>
    <div class="example-contents"><p>
     Compare images and display the reconstructed image
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$image1&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">imagick</span><span style="color: #007700">(</span><span style="color: #DD0000">"image1.png"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$image2&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">imagick</span><span style="color: #007700">(</span><span style="color: #DD0000">"image2.png"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$image1</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">compareImages</span><span style="color: #007700">(</span><span style="color: #0000BB">$image2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">Imagick</span><span style="color: #007700">::</span><span style="color: #0000BB">METRIC_MEANSQUAREERROR</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$result</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">setImageFormat</span><span style="color: #007700">(</span><span style="color: #DD0000">"png"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">"Content-Type:&nbsp;image/png"</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">];<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="115540""></a>
  <div class="note">
   <strong class="user">info at celeste-design dot de</strong>
   <a href="#115540" class="date">12-Aug-2014 11:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you get the following non-descriptive error message:<br />
<br />
Uncaught exception 'ImagickException' with message 'Compare images failed'<br />
<br />
Check your picture dimensions! i compared a 21x20 png to a 20x20 png which resulted in that error. Took me forever to figure out that the dimensions have to be exactly the same.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114944""></a>
  <div class="note">
   <strong class="user">Tim K and Sam M @netflix</strong>
   <a href="#114944" class="date">02-May-2014 03:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The *Absolute Error* metric is not listed as an available metric constant. However, you can still use it if needed by passing the internal constant definition for AE which is 1. This is useful when you wish to compare using a desired fuzz factor. Example:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// init the image objects<br />
</span><span class="default">$image1 </span><span class="keyword">= new </span><span class="default">imagick</span><span class="keyword">();<br />
</span><span class="default">$image2 </span><span class="keyword">= new </span><span class="default">imagick</span><span class="keyword">();<br />
<br />
</span><span class="comment">// set the fuzz factor (must be done BEFORE reading in the images)<br />
</span><span class="default">$image1</span><span class="keyword">-&gt;</span><span class="default">SetOption</span><span class="keyword">(</span><span class="string">'fuzz'</span><span class="keyword">, </span><span class="string">'2%'</span><span class="keyword">);<br />
<br />
</span><span class="comment">// read in the images<br />
</span><span class="default">$image1</span><span class="keyword">-&gt;</span><span class="default">readImage</span><span class="keyword">(</span><span class="string">"php_step29_actual.png"</span><span class="keyword">);<br />
</span><span class="default">$image2</span><span class="keyword">-&gt;</span><span class="default">readImage</span><span class="keyword">(</span><span class="string">"php_step29_correct.png"</span><span class="keyword">);<br />
<br />
</span><span class="comment">// compare the images using METRIC=1 (Absolute Error)<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">$image1</span><span class="keyword">-&gt;</span><span class="default">compareImages</span><span class="keyword">(</span><span class="default">$image2</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
<br />
</span><span class="comment">// print out the result<br />
</span><span class="keyword">echo </span><span class="string">"The image comparison 2% Fuzz factor is: " </span><span class="keyword">. </span><span class="default">$result</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

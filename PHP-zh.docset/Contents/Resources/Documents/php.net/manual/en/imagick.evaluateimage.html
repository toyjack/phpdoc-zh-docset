<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Applies an expression to an image</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="imagick.equalizeimage.html">? Imagick::equalizeImage</a></li>
      <li style="float: right;"><a href="imagick.exportimagepixels.html">Imagick::exportImagePixels ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.imagick.html">Imagick</a></li>
    <li>Applies an expression to an image</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="imagick.evaluateimage" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">Imagick::evaluateImage</h1>
  <p class="verinfo">(PECL imagick 2.0.0)</p><p class="refpurpose"><span class="refname">Imagick::evaluateImage</span> &mdash; <span class="dc-title">Applies an expression to an image</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-imagick.evaluateimage-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><strong>Imagick::evaluateImage</strong></span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$op</code></span>
   , <span class="methodparam"><span class="type">float</span> <code class="parameter">$constant</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$channel</code><span class="initializer"> = Imagick::CHANNEL_ALL</span></span>
  ] )</div>

  <p class="para rdfs-comment">
   Applys an arithmetic, relational, or logical expression to an image.  Use
   these operators to lighten or darken an image, to increase or decrease
   contrast in an image, or to produce the &quot;negative&quot; of an image.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-imagick.evaluateimage-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">op</code></dt>

     <dd>

      <p class="para">
      The evaluation operator
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">constant</code></dt>

     <dd>

      <p class="para">
      The value of the operator
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">channel</code></dt>

     <dd>

      <p class="para">
       Provide any channel constant that is valid for your channel mode. To
       apply to more than one channel, combine channeltype constants using
       bitwise operators. Refer to this
       list of  <a href="imagick.constants.html#imagick.constants.channel" class="link">channel constants</a>.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 
 <div class="refsect1 examples" id="refsect1-imagick.evaluateimage-examples">
  <h3 class="title">范例</h3>
  <p class="para">
  <div class="example" id="example-3540">
   <p><strong>Example #1 Using <span class="function"><strong>Imagick::evaluateImage()</strong></span></strong></p>
   <div class="example-contents"><p>
    Using evaluateImage to reduce opacity in an image.
   </p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Create&nbsp;new&nbsp;object&nbsp;with&nbsp;the&nbsp;image<br /></span><span style="color: #0000BB">$im&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Imagick</span><span style="color: #007700">(</span><span style="color: #DD0000">'example-alpha.png'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Reduce&nbsp;the&nbsp;alpha&nbsp;by&nbsp;50%<br /></span><span style="color: #0000BB">$im</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">evaluateImage</span><span style="color: #007700">(</span><span style="color: #0000BB">Imagick</span><span style="color: #007700">::</span><span style="color: #0000BB">EVALUATE_DIVIDE</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">Imagick</span><span style="color: #007700">::</span><span style="color: #0000BB">CHANNEL_ALPHA</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Output&nbsp;the&nbsp;image<br /></span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">"Content-Type:&nbsp;image/png"</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$im</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </p>
 </div>
 

 <div class="refsect1 returnvalues" id="refsect1-imagick.evaluateimage-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   成功时返回 <strong><code>TRUE</code></strong>。
  </p>
 </div>


 <div class="refsect1 errors" id="refsect1-imagick.evaluateimage-errors">
  <h3 class="title">错误／异常</h3>
  <p class="para">
   错误时抛出 ImagickException。
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="107068""></a>
  <div class="note">
   <strong class="user">nils dot rocine at gmail dot com</strong>
   <a href="#107068" class="date">04-Jan-2012 08:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
What worked for me to convert a JPG source file to a semi-transparent PNG.
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp;&nbsp;&nbsp; $srcImagick </span><span class="keyword">= new </span><span class="default">Imagick</span><span class="keyword">(</span><span class="default">$srcPath</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pathTo50Perc </span><span class="keyword">= </span><span class="string">'transparent1.png'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$srcImagick</span><span class="keyword">-&gt;</span><span class="default">setImageAlphaChannel</span><span class="keyword">(</span><span class="default">Imagick</span><span class="keyword">::</span><span class="default">ALPHACHANNEL_OPAQUE</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$srcImagick</span><span class="keyword">-&gt;</span><span class="default">evaluateImage</span><span class="keyword">(</span><span class="default">Imagick</span><span class="keyword">::</span><span class="default">EVALUATE_DIVIDE</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">Imagick</span><span class="keyword">::</span><span class="default">CHANNEL_ALPHA</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$srcImagick</span><span class="keyword">-&gt;</span><span class="default">writeImage</span><span class="keyword">(</span><span class="default">$pathTo50Perc</span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>类型运算符</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="language.operators.array.html">? 数组运算符</a></li>
      <li style="float: right;"><a href="language.control-structures.html">流程控制 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="language.operators.html">运算符</a></li>
    <li>类型运算符</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="language.operators.type" class="sect1">
   <h2 class="title">类型运算符</h2>
   <p class="para">
    <code class="literal">instanceof</code> 用于确定一个 PHP 变量是否属于某一类
    <a href="language.oop5.basic.html#language.oop5.basic.class" class="link">class</a> 的实例：
    <div class="example" id="example-122">
     <p><strong>Example #1 对类使用 <code class="literal">instanceof</code></strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">MyClass<br /></span><span style="color: #007700">{<br />}<br /><br />class&nbsp;</span><span style="color: #0000BB">NotMyClass<br /></span><span style="color: #007700">{<br />}<br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MyClass</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">instanceof&nbsp;</span><span style="color: #0000BB">MyClass</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">instanceof&nbsp;</span><span style="color: #0000BB">NotMyClass</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

     <div class="example-contents"><p>以上例程会输出：</p></div>
     <div class="example-contents screen">
<div class="cdata"><pre>
bool(true)
bool(false)
</pre></div>
     </div>
    </div>
   </p>
   <p class="para">
    <code class="literal">instanceof</code>　也可用来确定一个变量是不是继承自某一父类的子类的实例：
    <div class="example" id="example-123">
     <p><strong>Example #2 对继承类使用 <code class="literal">instanceof</code></strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">ParentClass<br /></span><span style="color: #007700">{<br />}<br /><br />class&nbsp;</span><span style="color: #0000BB">MyClass&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">ParentClass<br /></span><span style="color: #007700">{<br />}<br /><br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MyClass</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">instanceof&nbsp;</span><span style="color: #0000BB">MyClass</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">instanceof&nbsp;</span><span style="color: #0000BB">ParentClass</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

     <div class="example-contents"><p>以上例程会输出：</p></div>
     <div class="example-contents screen">
<div class="cdata"><pre>
bool(true)
bool(true)
</pre></div>
     </div>
    </div>
   </p>
   <p class="para">
    检查一个对象是否<em class="emphasis">不是</em>某个类的实例，可以使用<a href="language.operators.logical.html" class="link">逻辑运算符 <code class="literal">not</code></a>。
    <div class="example" id="example-124">
     <p><strong>Example #3 使用 <code class="literal">instanceof</code> 检查对象<em class="emphasis">不是</em>某个类的实例</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">MyClass<br /></span><span style="color: #007700">{<br />}<br /><br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MyClass</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(!(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">instanceof&nbsp;</span><span style="color: #0000BB">stdClass</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    <div class="example-contents"><p>以上例程会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
bool(true)
</pre></div>
     </div>
    </div>
   </p>
   <p class="para">
    最后，<code class="literal">instanceof</code>也可用于确定一个变量是不是实现了某个<a href="language.oop5.interfaces.html" class="link">接口</a>的对象的实例:
    <div class="example" id="example-125">
     <p><strong>Example #4 对接口使用 <code class="literal">instanceof</code></strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">interface&nbsp;</span><span style="color: #0000BB">MyInterface<br /></span><span style="color: #007700">{<br />}<br /><br />class&nbsp;</span><span style="color: #0000BB">MyClass&nbsp;</span><span style="color: #007700">implements&nbsp;</span><span style="color: #0000BB">MyInterface<br /></span><span style="color: #007700">{<br />}<br /><br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MyClass</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">instanceof&nbsp;</span><span style="color: #0000BB">MyClass</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">instanceof&nbsp;</span><span style="color: #0000BB">MyInterface</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

     <div class="example-contents"><p>以上例程会输出：</p></div>
     <div class="example-contents screen">
<div class="cdata"><pre>
bool(true)
bool(true)
</pre></div>
     </div>
    </div>
   </p>
   <p class="para">
    虽然 <code class="literal">instanceof</code> 通常直接与类名一起使用，但也可以使用对象或字符串变量：
    <div class="example" id="example-126">
     <p><strong>Example #5 对其它变量使用 <code class="literal">instanceof</code></strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">interface&nbsp;</span><span style="color: #0000BB">MyInterface<br /></span><span style="color: #007700">{<br />}<br /><br />class&nbsp;</span><span style="color: #0000BB">MyClass&nbsp;</span><span style="color: #007700">implements&nbsp;</span><span style="color: #0000BB">MyInterface<br /></span><span style="color: #007700">{<br />}<br /><br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MyClass</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$b&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MyClass</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'MyClass'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$d&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'NotMyClass'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">instanceof&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;$b&nbsp;is&nbsp;an&nbsp;object&nbsp;of&nbsp;class&nbsp;MyClass<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">instanceof&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;$c&nbsp;is&nbsp;a&nbsp;string&nbsp;'MyClass'<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">instanceof&nbsp;</span><span style="color: #0000BB">$d</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;$d&nbsp;is&nbsp;a&nbsp;string&nbsp;'NotMyClass'<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
bool(true)
bool(true)
bool(false)
</pre></div>
     </div>
    </div>
   </p>
   <p class="para">
    如果被检测的变量不是对象，instanceof 并不发出任何错误信息而是返回
    <strong><code>false</code></strong>。PHP 7.3.0 之前不允许用于检测常量。
    <div class="example" id="example-127">
     <p><strong>Example #6 用 <code class="literal">instanceof</code> 检测其它变量</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$a&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$b&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">NULL</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">imagecreate</span><span style="color: #007700">(</span><span style="color: #0000BB">5</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">instanceof&nbsp;</span><span style="color: #0000BB">stdClass</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;$a&nbsp;is&nbsp;an&nbsp;integer<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$b&nbsp;</span><span style="color: #007700">instanceof&nbsp;</span><span style="color: #0000BB">stdClass</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;$b&nbsp;is&nbsp;NULL<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">instanceof&nbsp;</span><span style="color: #0000BB">stdClass</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;$c&nbsp;is&nbsp;a&nbsp;resource<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">FALSE&nbsp;</span><span style="color: #007700">instanceof&nbsp;</span><span style="color: #0000BB">stdClass</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
bool(false)
bool(false)
bool(false)
PHP Fatal error:  instanceof expects an object instance, constant given
</pre></div>
     </div>
    </div>
   </p><p class="para">
    PHP 7.3.0 起，
    <code class="literal">instanceof</code> 操作符的左侧可以放常量。
    <div class="example" id="example-128">
     <p><strong>Example #7 使用 <code class="literal">instanceof</code> 测试常量</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">FALSE&nbsp;</span><span style="color: #007700">instanceof&nbsp;</span><span style="color: #0000BB">stdClass</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程在 PHP 7.3 中的输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
bool(false)
</pre></div>
     </div>
    </div>
   </p>
   <p class="simpara">
    <code class="literal">instanceof</code> 在功能上有个
    类似的变体 <span class="function"><a href="function.is-a.html" class="function">is_a()</a></span>。
   </p>

   <div class="sect2">
    <h3 class="title">参见</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="function"><a href="function.get-class.html" class="function">get_class()</a></span></li>
      <li class="member"><span class="function"><a href="function.is-a.html" class="function">is_a()</a></span></li>
     </ul>
    </p>
   </div>
  </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="124629""></a>
  <div class="note">
   <strong class="user">ASchmidt at Anamera dot net</strong>
   <a href="#124629" class="date">20-Jan-2020 06:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Using an undefined variable will result in an error.<br />
<br />
If variable is in doubt, one must prequalify:<br />
<br />
&nbsp;&nbsp;&nbsp; if ( isset( $MyInstance ) and $MyInstance instanceof MyClass ) ...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124519""></a>
  <div class="note">
   <strong class="user">waahhhh</strong>
   <a href="#124519" class="date">18-Dec-2019 10:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The first parameter must be an object instance.<br />
<br />
example:<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">A </span><span class="keyword">{}<br />
class </span><span class="default">B </span><span class="keyword">extends </span><span class="default">A </span><span class="keyword">{}<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">A</span><span class="keyword">::class instanceof </span><span class="default">B</span><span class="keyword">); </span><span class="comment">// false<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">B</span><span class="keyword">::class instanceof </span><span class="default">A</span><span class="keyword">); </span><span class="comment">// false<br />
</span><span class="default">var_dump</span><span class="keyword">(new </span><span class="default">B</span><span class="keyword">() instanceof </span><span class="default">A</span><span class="keyword">); </span><span class="comment">// true</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="121827""></a>
  <div class="note">
   <strong class="user">Hayley Watson</strong>
   <a href="#121827" class="date">04-Nov-2017 11:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to use "$foo instanceof $bar" to determine if two objects are the same class, remember that "instanceof" will also evaluate to true if $foo is an instance of a _subclass_ of $bar's class.<br />
<br />
If you really want to see if they are the _same_ class, then they both have to be instances of each other's class. That is:<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">(</span><span class="default">$foo </span><span class="keyword">instanceof </span><span class="default">$bar </span><span class="keyword">&amp;&amp; </span><span class="default">$bar </span><span class="keyword">instanceof </span><span class="default">$foo</span><span class="keyword">)<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Consider it an alternative to "get_class($bar) == get_class($foo)" that avoids the detour through to string lookups and comparisons.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="121460""></a>
  <div class="note">
   <strong class="user">wadih at creationmw dot com</strong>
   <a href="#121460" class="date">29-Jul-2017 08:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Doing $a instanceof stdClass from inside a namespace will not work on its own. <br />
<br />
You will have to do:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if (</span><span class="default">$a </span><span class="keyword">instanceof \</span><span class="default">stdClass</span><span class="keyword">) <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114137""></a>
  <div class="note">
   <strong class="user">CH</strong>
   <a href="#114137" class="date">15-Jan-2014 02:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can use instanceof also for interfaces.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113871""></a>
  <div class="note">
   <strong class="user">dava</strong>
   <a href="#113871" class="date">11-Dec-2013 05:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You are also able to compare 2 objects using instanceOf. In that case, instanceOf will compare the types of both objects. That is sometimes very useful:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">A </span><span class="keyword">{ }<br />
class </span><span class="default">B </span><span class="keyword">{ }<br />
<br />
</span><span class="default">$a </span><span class="keyword">= new </span><span class="default">A</span><span class="keyword">;<br />
</span><span class="default">$b </span><span class="keyword">= new </span><span class="default">B</span><span class="keyword">;<br />
</span><span class="default">$a2 </span><span class="keyword">= new </span><span class="default">A</span><span class="keyword">;<br />
<br />
echo </span><span class="default">$a </span><span class="keyword">instanceOf </span><span class="default">$a</span><span class="keyword">; </span><span class="comment">// true<br />
</span><span class="keyword">echo </span><span class="default">$a </span><span class="keyword">instanceOf </span><span class="default">$b</span><span class="keyword">; </span><span class="comment">// false<br />
</span><span class="keyword">echo </span><span class="default">$a </span><span class="keyword">instanceOf </span><span class="default">$a2</span><span class="keyword">; </span><span class="comment">// true<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113552""></a>
  <div class="note">
   <strong class="user">info at pkrules dot in</strong>
   <a href="#113552" class="date">29-Oct-2013 11:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
use this to check instance of or you can add the else part inside the if making it nested if for dual varification.:-<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">MyClass</span><span class="keyword">{}<br />
class </span><span class="default">Test </span><span class="keyword">extends </span><span class="default">MyClass</span><span class="keyword">{<br />
public function </span><span class="default">checkObjectArray</span><span class="keyword">(array </span><span class="default">$array</span><span class="keyword">,</span><span class="default">$classname</span><span class="keyword">,</span><span class="default">$strict</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">){<br />
if(!</span><span class="default">$strict</span><span class="keyword">){<br />
foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$element</span><span class="keyword">){<br />
&nbsp;if(!(</span><span class="default">$element </span><span class="keyword">instanceOf </span><span class="default">$classname</span><span class="keyword">)){</span><span class="comment">//we can use typehint objects<br />
</span><span class="default">INSIDE an </span><span class="keyword">array<br />
&nbsp;echo </span><span class="string">"false"</span><span class="keyword">;<br />
&nbsp;echo </span><span class="string">"&lt;br /&gt;"</span><span class="keyword">;<br />
&nbsp;break;<br />
&nbsp;}<br />
&nbsp;else{<br />
&nbsp;print </span><span class="string">"&lt;br /&gt;true (if)"</span><span class="keyword">;<br />
&nbsp;}<br />
}<br />
}<br />
else{<br />
foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$element</span><span class="keyword">){<br />
if(</span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$element</span><span class="keyword">)!=</span><span class="default">$classname</span><span class="keyword">){</span><span class="comment">// or we can use this function to<br />
</span><span class="default">check the classes inside this </span><span class="keyword">array<br />
echo </span><span class="string">"false (else)"</span><span class="keyword">;<br />
}<br />
}<br />
}<br />
echo </span><span class="string">"&lt;br /&gt;true"</span><span class="keyword">;<br />
}<br />
}<br />
</span><span class="default">$ob</span><span class="keyword">=new </span><span class="default">Test</span><span class="keyword">;<br />
<br />
</span><span class="default">$a</span><span class="keyword">=new </span><span class="default">MyClass</span><span class="keyword">();<br />
</span><span class="default">$array</span><span class="keyword">=array(</span><span class="default">$a</span><span class="keyword">);<br />
</span><span class="default">$ob</span><span class="keyword">-&gt;</span><span class="default">checkObjectArray</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">,</span><span class="string">'MyClass'</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111527""></a>
  <div class="note">
   <strong class="user">knarlin at yahoo dot com dot au</strong>
   <a href="#111527" class="date">28-Feb-2013 11:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Checking an object is not an instance of a class, example #3 uses extraneous parentheses.<br />
<br />
<span class="default">&lt;?php<br />
var_dump</span><span class="keyword">(!(</span><span class="default">$a </span><span class="keyword">instanceof </span><span class="default">stdClass</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
Because instanceof has higher operator precedence than ! you can just do<br />
<br />
<span class="default">&lt;?php<br />
var_dump</span><span class="keyword">( ! </span><span class="default">$a </span><span class="keyword">instanceof </span><span class="default">stdClass </span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108696""></a>
  <div class="note">
   <strong class="user">wbcarts at juno dot com</strong>
   <a href="#108696" class="date">18-May-2012 02:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
SIMPLE, CLEAN, CLEAR use of the instanceof OPERATOR<br />
<br />
First, define a couple of simple PHP Objects to work on -- I'll introduce Circle and Point. Here's the class definitions for both:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">Circle<br />
</span><span class="keyword">{<br />
&nbsp; protected </span><span class="default">$radius </span><span class="keyword">= </span><span class="default">1.0</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp; * This function is the reason we are going to use the<br />
&nbsp;&nbsp; * instanceof operator below.<br />
&nbsp;&nbsp; */<br />
&nbsp; </span><span class="keyword">public function </span><span class="default">setRadius</span><span class="keyword">(</span><span class="default">$r</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">radius </span><span class="keyword">= </span><span class="default">$r</span><span class="keyword">;<br />
&nbsp; }<br />
<br />
&nbsp; public function </span><span class="default">__toString</span><span class="keyword">()<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="string">'Circle [radius=' </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">radius </span><span class="keyword">. </span><span class="string">']'</span><span class="keyword">;<br />
&nbsp; }<br />
}<br />
<br />
class </span><span class="default">Point<br />
</span><span class="keyword">{<br />
&nbsp; protected </span><span class="default">$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp; protected </span><span class="default">$y </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp; * This function is the reason we are going to use the<br />
&nbsp;&nbsp; * instanceof operator below.<br />
&nbsp;&nbsp; */<br />
&nbsp; </span><span class="keyword">public function </span><span class="default">setLocation</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">x </span><span class="keyword">= </span><span class="default">$x</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">y </span><span class="keyword">= </span><span class="default">$y</span><span class="keyword">;<br />
&nbsp; }<br />
<br />
&nbsp; public function </span><span class="default">__toString</span><span class="keyword">()<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="string">'Point [x=' </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">x </span><span class="keyword">. </span><span class="string">', y=' </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">y </span><span class="keyword">. </span><span class="string">']'</span><span class="keyword">;<br />
&nbsp; }<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Now instantiate a few instances of these types. Note, I will put them in an array (collection) so we can iterate through them quickly.<br />
<br />
<span class="default">&lt;?php<br />
<br />
$myCollection </span><span class="keyword">= array(</span><span class="default">123</span><span class="keyword">, </span><span class="string">'abc'</span><span class="keyword">, </span><span class="string">'Hello World!'</span><span class="keyword">,<br />
&nbsp; new </span><span class="default">Circle</span><span class="keyword">(), new </span><span class="default">Circle</span><span class="keyword">(), new </span><span class="default">Circle</span><span class="keyword">(),<br />
&nbsp; new </span><span class="default">Point</span><span class="keyword">(), new </span><span class="default">Point</span><span class="keyword">(), new </span><span class="default">Point</span><span class="keyword">());<br />
<br />
</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
foreach(</span><span class="default">$myCollection </span><span class="keyword">AS </span><span class="default">$item</span><span class="keyword">)<br />
{<br />
&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp; * The setRadius() function is written in the Circle class<br />
&nbsp;&nbsp; * definition above, so make sure $item is an instance of<br />
&nbsp;&nbsp; * type Circle BEFORE calling it AND to avoid PHP PMS!<br />
&nbsp;&nbsp; */<br />
&nbsp; </span><span class="keyword">if(</span><span class="default">$item </span><span class="keyword">instanceof </span><span class="default">Circle</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$item</span><span class="keyword">-&gt;</span><span class="default">setRadius</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">);<br />
&nbsp; }<br />
<br />
&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp; * The setLocation() function is written in the Point class<br />
&nbsp;&nbsp; * definition above, so make sure $item is an instance of <br />
&nbsp;&nbsp; * type Point BEFORE calling it AND to stay out of the ER!<br />
&nbsp;&nbsp; */<br />
&nbsp; </span><span class="keyword">if(</span><span class="default">$item </span><span class="keyword">instanceof </span><span class="default">Point</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$item</span><span class="keyword">-&gt;</span><span class="default">setLocation</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">);<br />
&nbsp; }<br />
<br />
&nbsp; echo </span><span class="string">'$myCollection[' </span><span class="keyword">. </span><span class="default">$i</span><span class="keyword">++ . </span><span class="string">'] = ' </span><span class="keyword">. </span><span class="default">$item </span><span class="keyword">. </span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
$myCollection[0] = 123<br />
$myCollection[1] = abc<br />
$myCollection[2] = Hello World!<br />
$myCollection[3] = Circle [radius=3]<br />
$myCollection[4] = Circle [radius=4]<br />
$myCollection[5] = Circle [radius=5]<br />
$myCollection[6] = Point [x=6, y=6]<br />
$myCollection[7] = Point [x=7, y=7]<br />
$myCollection[8] = Point [x=8, y=8]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106882""></a>
  <div class="note">
   <strong class="user">Sudarshan Wadkar</strong>
   <a href="#106882" class="date">15-Dec-2011 04:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I don't see any mention of "namespaces" on this page so I thought I would chime in. The instanceof operator takes FQCN as second operator when you pass it as string and not a simple class name. It will not resolve it even if you have a `use MyNamespace\Bar;` at the top level. Here is what I am trying to say:<br />
<br />
## testinclude.php ##<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">namespace </span><span class="default">Bar1</span><span class="keyword">;<br />
{<br />
class </span><span class="default">Foo1</span><span class="keyword">{ }<br />
}<br />
namespace </span><span class="default">Bar2</span><span class="keyword">;<br />
{<br />
class </span><span class="default">Foo2</span><span class="keyword">{ }<br />
}<br />
</span><span class="default">?&gt;<br />
</span>## test.php ##<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">include(</span><span class="string">'testinclude.php'</span><span class="keyword">);<br />
use </span><span class="default">Bar1</span><span class="keyword">\</span><span class="default">Foo1 </span><span class="keyword">as </span><span class="default">Foo</span><span class="keyword">;<br />
</span><span class="default">$foo1 </span><span class="keyword">= new </span><span class="default">Foo</span><span class="keyword">(); </span><span class="default">$className </span><span class="keyword">= </span><span class="string">'Bar1\Foo1'</span><span class="keyword">;<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$foo1 </span><span class="keyword">instanceof </span><span class="default">Bar1</span><span class="keyword">\</span><span class="default">Foo1</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$foo1 </span><span class="keyword">instanceof </span><span class="default">$className</span><span class="keyword">);<br />
</span><span class="default">$className </span><span class="keyword">= </span><span class="string">'Foo'</span><span class="keyword">;<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$foo1 </span><span class="keyword">instanceof </span><span class="default">$className</span><span class="keyword">);<br />
use </span><span class="default">Bar2</span><span class="keyword">\</span><span class="default">Foo2</span><span class="keyword">;<br />
</span><span class="default">$foo2 </span><span class="keyword">= new </span><span class="default">Foo2</span><span class="keyword">(); </span><span class="default">$className </span><span class="keyword">= </span><span class="string">'Bar2\Foo2'</span><span class="keyword">;<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$foo2 </span><span class="keyword">instanceof </span><span class="default">Bar2</span><span class="keyword">\</span><span class="default">Foo2</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$foo2 </span><span class="keyword">instanceof </span><span class="default">$className</span><span class="keyword">);<br />
</span><span class="default">$className </span><span class="keyword">= </span><span class="string">'Foo2'</span><span class="keyword">;<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$foo2 </span><span class="keyword">instanceof </span><span class="default">$className</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>## stdout ##<br />
bool(true)<br />
bool(true)<br />
bool(false)<br />
bool(true)<br />
bool(true)<br />
bool(false)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102988""></a>
  <div class="note">
   <strong class="user">fbableus</strong>
   <a href="#102988" class="date">18-Mar-2011 06:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to test if a classname is an instance of a class, the instanceof operator won't work.<br />
<br />
<span class="default">&lt;?php<br />
$classname </span><span class="keyword">= </span><span class="string">'MyClass'</span><span class="keyword">;<br />
if( </span><span class="default">$classname </span><span class="keyword">instanceof </span><span class="default">MyParentClass</span><span class="keyword">) echo </span><span class="string">'Child of it'</span><span class="keyword">;<br />
else echo </span><span class="string">'Not child of it'</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
Will always output <br />
Not child of it<br />
<br />
You must use a ReflectionClass :<br />
<span class="default">&lt;?php<br />
$classname </span><span class="keyword">= </span><span class="string">'MyClass'</span><span class="keyword">;<br />
</span><span class="default">$myReflection </span><span class="keyword">= new </span><span class="default">ReflectionClass</span><span class="keyword">(</span><span class="default">$classname</span><span class="keyword">);<br />
if( </span><span class="default">$myReflection</span><span class="keyword">-&gt;</span><span class="default">isSubclassOf</span><span class="keyword">(</span><span class="string">'MyParentClass'</span><span class="keyword">)) echo&nbsp; </span><span class="string">'Child of it'</span><span class="keyword">;<br />
else echo </span><span class="string">'Not child of it'</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
Will output the good result.<br />
If you're testing an interface, use implementsInterface() instead of isSublassOf().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99384""></a>
  <div class="note">
   <strong class="user">mauritsdajong at gmail dot com</strong>
   <a href="#99384" class="date">13-Aug-2010 03:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Sometimes you want to typehint objects INSIDE an array, but I think you can't.<br />
<br />
Instead, you can use this function to check the classes inside this array:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">public </span><span class="default">checkObjectsArray</span><span class="keyword">(array </span><span class="default">$array</span><span class="keyword">, </span><span class="default">$classname</span><span class="keyword">, </span><span class="default">$strict </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">$strict</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$element</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!(</span><span class="default">$element </span><span class="keyword">instanceof </span><span class="default">$classname</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$element</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$element</span><span class="keyword">) != </span><span class="default">$classname</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98926""></a>
  <div class="note">
   <strong class="user">phil dot taylor at gmail dot com</strong>
   <a href="#98926" class="date">15-Jul-2010 04:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It seems like instanceOf is using a string comparison. Longer class names take longer to check in conditional statements<br />
<br />
eg.<br />
<br />
if ($f instanceOf HelloWorldTestClass) <br />
<br />
is much slower than<br />
<br />
if ($f instanceOf HWT)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87053""></a>
  <div class="note">
   <strong class="user">jtaal at eljakim dot nl</strong>
   <a href="#87053" class="date">17-Nov-2008 05:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can use "self" to reference to the current class:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">class </span><span class="default">myclass </span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">mymethod</span><span class="keyword">(</span><span class="default">$otherObject</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$otherObject </span><span class="keyword">instanceof </span><span class="default">self</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$otherObject</span><span class="keyword">-&gt;</span><span class="default">mymethod</span><span class="keyword">(</span><span class="default">null</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'works!'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />

<br />
</span><span class="default">$a </span><span class="keyword">= new </span><span class="default">myclass</span><span class="keyword">();
<br />
print </span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">mymethod</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85239""></a>
  <div class="note">
   <strong class="user">kevin dot benton at beatport dot com</strong>
   <a href="#85239" class="date">21-Aug-2008 09:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Example #5 could also be extended to include...<br />
<br />
var_dump($a instanceof MyInterface);<br />
<br />
The new result would be<br />
<br />
bool(true)<br />
<br />
So - instanceof is smart enough to know that a class that implements an interface is an instance of the interface, not just the class.&nbsp; I didn't see that point made clearly enough in the explanation at the top.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80495""></a>
  <div class="note">
   <strong class="user">ejohnson82 at gmail dot com</strong>
   <a href="#80495" class="date">18-Jan-2008 01:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The PHP parser generates a parse error on either of the two lines that are commented out here.&nbsp; <br />
Apparently the 'instanceof' construct will take a string variable in the second spot, but it will NOT take a string... lame<br />
<br />
class Bar {}<br />
$b = new Bar;<br />
$b_class = "Bar";<br />
var_export($b instanceof Bar); // this is ok<br />
var_export($b instanceof $b_class); // this is ok<br />
//var_export($f instanceof "Bar"); // this is syntactically illegal<br />
//var_export($f instanceof 'Bar'); // this is syntactically illegal</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76582""></a>
  <div class="note">
   <strong class="user">julien plee using g mail dot com</strong>
   <a href="#76582" class="date">20-Jul-2007 06:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Response to vinyanov at poczta dot onet dot pl:<br />
<br />
You mentionned "the instanceof operator will not accept a string as its first operand". However, this behavior is absolutely right and therefore, you're misleading the meaning of an instance.<br />
<br />
<span class="default">&lt;?php </span><span class="string">'ClassA' </span><span class="keyword">instanceof </span><span class="string">'ClassB'</span><span class="keyword">; </span><span class="default">?&gt;</span> means "the class named ClassA is an instance of the class named ClassB". This is a nonsense sentence because when you instanciate a class, you ALWAYS obtain an object. Consequently, you only can ask if an object is an instance of a class.<br />
<br />
I believe asking if "a ClassA belongs to a ClassB" (or "a ClassA is a class of (type) ClassB") or even "a ClassA is (also) a ClassB" is more appropriate. But the first is not implemented and the second only works with objects, just like the instanceof operator.<br />
<br />
Plus, I just have tested your code and it does absolutely NOT do the same as instanceof (extended to classes)! I can't advise anyone to reuse it. The use of <span class="default">&lt;?php is_instance_of </span><span class="keyword">(</span><span class="default">$instanceOfA</span><span class="keyword">, </span><span class="string">'ClassB'</span><span class="keyword">); </span><span class="default">?&gt;</span> raises a warning "include_once(Object id #1.php) ..." when using __autoload (trying to look for $instanceOfA as if it was a class name).<br />
<br />
Finally, here is a fast (to me) sample function code to verify if an object or class:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">kind_of </span><span class="keyword">(&amp;</span><span class="default">$object_or_class</span><span class="keyword">, </span><span class="default">$class</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">is_object </span><span class="keyword">(</span><span class="default">$object_or_class</span><span class="keyword">) ? <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$object_or_class </span><span class="keyword">instanceof </span><span class="default">$class<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">: (</span><span class="default">is_subclass_of </span><span class="keyword">(</span><span class="default">$object_or_class $class</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; || </span><span class="default">strtolower </span><span class="keyword">(</span><span class="default">$object_or_class</span><span class="keyword">) == </span><span class="default">strtolower </span><span class="keyword">(</span><span class="default">$class</span><span class="keyword">));<br />
} <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76352""></a>
  <div class="note">
   <strong class="user">jphaas at gmail dot com</strong>
   <a href="#76352" class="date">11-Jul-2007 10:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Posting this so the word typeof appears on this page, so that this page will show up when you google 'php typeof'.&nbsp; ...yeah, former Java user.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73853""></a>
  <div class="note">
   <strong class="user">jeanyves dot terrien at orange-ftgroup dot com</strong>
   <a href="#73853" class="date">13-Mar-2007 12:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Cross version function even if you are working in php4<br />
(instanceof is an undefined operator for php4)<br />
<br />
&nbsp;&nbsp; function isMemberOf($classename) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; $ver = floor(phpversion());<br />
&nbsp;&nbsp; &nbsp;&nbsp; if($ver &gt; 4) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; $instanceof = create_function ('$obj,$classname','return $obj instanceof $classname;');<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; return $instanceof($this,$classname);<br />
&nbsp;&nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; // Php4 uses lowercase for classname.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; return is_a($this, strtolower($classname));<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; } // end function isMemberOf</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73609""></a>
  <div class="note">
   <strong class="user">soletan at toxa dot de</strong>
   <a href="#73609" class="date">03-Mar-2007 04:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please note: != is a separate operator with separate semantics. Thinking about language grammar it's kind of ridicilous to negate an operator. Of course, it's possible to negate the result of a function (like is_a()), since it isn't negating the function itself or its semantics.<br />
<br />
instanceof is a binary operator, and so used in binary terms like this<br />
<br />
terma instanceof termb<br />
<br />
while ! (negation) is a unary operator and so may be applied to a single term like this<br />
<br />
!term<br />
<br />
And a term never consists of an operator, only! There is no such construct in any language (please correct me!). However, instanceof doesn't finally support nested terms in every operand position ("terma" or "termb" above) as negation does:<br />
<br />
!!!!!!!!!!!!!!term == term<br />
<br />
So back again, did you ever write<br />
<br />
a !!!!!!!!!!!!= b<br />
<br />
to test equivalence?</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50101""></a>
  <div class="note">
   <strong class="user">archanglmr at yahoo dot com</strong>
   <a href="#50101" class="date">17-Feb-2005 06:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Negated instanceof doesn't seem to be documented. When I read instanceof I think of it as a compairson operator (which I suppose it's not).<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">A </span><span class="keyword">{}<br />
class </span><span class="default">X </span><span class="keyword">{}<br />
<br />
</span><span class="comment">//parse error from !<br />
</span><span class="keyword">if (new </span><span class="default">X </span><span class="keyword">!instanceof </span><span class="default">A</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">'X is not an A'</span><span class="keyword">);<br />
}<br />
</span><span class="comment">//proper way to negate instanceof ?<br />
</span><span class="keyword">if (!(new </span><span class="default">X </span><span class="keyword">instanceof </span><span class="default">A</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">'X is not an A'</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="48311""></a>
  <div class="note">
   <strong class="user">d dot schneider at 24you dot de</strong>
   <a href="#48311" class="date">18-Dec-2004 12:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
use this for cross-version development...<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">is_instance_of</span><span class="keyword">(</span><span class="default">$IIO_INSTANCE</span><span class="keyword">, </span><span class="default">$IIO_CLASS</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">floor</span><span class="keyword">(</span><span class="default">phpversion</span><span class="keyword">()) &gt; </span><span class="default">4</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$IIO_INSTANCE </span><span class="keyword">instanceof </span><span class="default">$IIO_CLASS</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; elseif(</span><span class="default">floor</span><span class="keyword">(</span><span class="default">phpversion</span><span class="keyword">()) &gt; </span><span class="default">3</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">is_a</span><span class="keyword">(</span><span class="default">$IIO_INSTANCE</span><span class="keyword">, </span><span class="default">$IIO_CLASS</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

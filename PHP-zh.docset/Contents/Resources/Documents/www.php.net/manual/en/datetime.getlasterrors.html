<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>获取警告和错误信息</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="datetime.createfrominterface.html">? DateTime::createFromInterface</a></li>
      <li style="float: right;"><a href="datetime.modify.html">DateTime::modify ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.datetime.html">DateTime</a></li>
    <li>获取警告和错误信息</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="datetime.getlasterrors" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">DateTime::getLastErrors</h1>
  <h1 class="refname">date_get_last_errors</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.3.0, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">DateTime::getLastErrors</span> -- <span class="refname">date_get_last_errors</span> &mdash; <span class="dc-title">获取警告和错误信息</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-datetime.getlasterrors-description">
  <h3 class="title">说明</h3>
  <p class="para">面向对象风格</p>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><strong>DateTime::getLastErrors</strong></span>(): <span class="type">array</span></div>

  <p class="para rdfs-comment">过程化风格</p>
  <div class="methodsynopsis dc-description"><span class="methodname"><a href="function.date-get-last-errors.html" class="methodname">date_get_last_errors</a></span>(): <span class="type">array</span></div>

  <p class="para rdfs-comment">
   返回在解析日期时间字符串的过程中发生的警告和错误信息。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-datetime.getlasterrors-parameters">
  <h3 class="title">参数</h3>
  <p class="para">此函数没有参数。</p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-datetime.getlasterrors-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   返回一个数组，其中包含在解析日期时间字符串的过程中发生的警告和错误信息。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-datetime.getlasterrors-examples">
  <h3 class="title">范例</h3>
  <div class="example" id="example-1975">
   <p><strong>Example #1 <span class="function"><strong>DateTime::getLastErrors()</strong></span> 例程</strong></p>
   <div class="example-contents"><p>面向对象风格</p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$date&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">(</span><span style="color: #DD0000">'asdfasdf'</span><span style="color: #007700">);<br />}&nbsp;catch&nbsp;(</span><span style="color: #0000BB">Exception&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;仅出于演示的目的...<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">::</span><span style="color: #0000BB">getLastErrors</span><span style="color: #007700">());<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;实际的代码中你应该这样使用返回对象<br />&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;echo&nbsp;$e-&gt;getMessage();<br /></span><span style="color: #007700">}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>过程化风格</p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$date&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">date_create</span><span style="color: #007700">(</span><span style="color: #DD0000">'asdfasdf'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">date_get_last_errors</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>以上例程会输出：</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
   [warning_count] =&gt; 1
   [warnings] =&gt; Array
       (
           [6] =&gt; Double timezone specification
       )

   [error_count] =&gt; 1
   [errors] =&gt; Array
       (
           [0] =&gt; The timezone could not be found in the database
       )

)
</pre></div>
   </div>
   <div class="example-contents"><p>
    返回数组中的索引 6 和 0 表示在解析过程中，所提供的日期时间字符串中无法正确解析的字符位置。
   </p></div>
  </div>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="102686""></a>
  <div class="note">
   <strong class="user">framework  at  photon-project  dot  com</strong>
   <a href="#102686" class="date">28-Feb-2011 12:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
DateTime::createFromFormat is smart to handle the cases where you input an invalid date, like April 31st, and convert it to May 1st. In some cases, you do not want this automatic smart handling of the dates for example in a user input form where you want to be sure that your user did input the date he wanted. To do that, you need to get access to the warnings, this method is the only way to do it:<br />
<br />
<span class="default">&lt;?php<br />
$date </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">, </span><span class="string">'1999-04-31'</span><span class="keyword">);<br />
print </span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">) . </span><span class="default">PHP_EOL</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">getLastErrors</span><span class="keyword">());<br />
</span><span class="default">?&gt;<br />
</span><br />
The output is:<br />
<br />
1999-05-01<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [warning_count] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [warnings] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [10] =&gt; The parsed date was invalid<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [error_count] =&gt; 0<br />
&nbsp;&nbsp;&nbsp; [errors] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)<br />
<br />
So, here you can see, you have a warning because the date was invalid, but not an error because PHP was smart enough to convert it into a valid date. It is then up to you to do something with this information.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

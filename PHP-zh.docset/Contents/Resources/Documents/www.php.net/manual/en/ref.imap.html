<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>IMAP 函数</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="imap.constants.html">? 预定义常量</a></li>
      <li style="float: right;"><a href="function.imap-8bit.html">imap_8bit ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="book.imap.html">IMAP</a></li>
    <li>IMAP 函数</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="ref.imap" class="reference">
  <h1 class="title">IMAP 函数</h1>

  <div class="partintro">
   <h1 class="title">参见</h1>
    <p class="para">
     This document can&#039;t go into detail on all the topics touched by
     the provided functions. Further information is provided by the
     documentation of the c-client library source
     (<var class="filename">docs/internal.txt</var>). and the following RFC
     documents:
     <ul class="itemizedlist">
      <li class="listitem">
       <span class="simpara">
        <a href="http://www.faqs.org/rfcs/rfc2821" class="link external" title="Link : http://www.faqs.org/rfcs/rfc2821">&raquo;&nbsp;RFC2821</a>:
        <em>Simple Mail Transfer Protocol</em> (<acronym>SMTP</acronym>).
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        <a href="http://www.faqs.org/rfcs/rfc2822" class="link external" title="Link : http://www.faqs.org/rfcs/rfc2822">&raquo;&nbsp;RFC2822</a>:
        <em>Standard for ARPA internet text messages</em>.
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        <a href="http://www.faqs.org/rfcs/rfc2060" class="link external" title="Link : http://www.faqs.org/rfcs/rfc2060">&raquo;&nbsp;RFC2060</a>:
        <em>Internet Message Access Protocol</em> (<acronym title="Internet Message Access Protocol">IMAP</acronym>) Version 4rev1. 
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        <a href="http://www.faqs.org/rfcs/rfc1939" class="link external" title="Link : http://www.faqs.org/rfcs/rfc1939">&raquo;&nbsp;RFC1939</a>:
        <em>Post Office Protocol Version 3</em> (<acronym title="Post Office Protocol version 3">POP3</acronym>).
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        <a href="http://www.faqs.org/rfcs/rfc977" class="link external" title="Link : http://www.faqs.org/rfcs/rfc977">&raquo;&nbsp;RFC977</a>:
        <em>Network News Transfer Protocol</em> (<acronym title="Network News Transfer Protocol">NNTP</acronym>).
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        <a href="http://www.faqs.org/rfcs/rfc2076" class="link external" title="Link : http://www.faqs.org/rfcs/rfc2076">&raquo;&nbsp;RFC2076</a>:
        <em>Common Internet Message Headers</em>.
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        <a href="http://www.faqs.org/rfcs/rfc2045" class="link external" title="Link : http://www.faqs.org/rfcs/rfc2045">&raquo;&nbsp;RFC2045</a> , <a href="http://www.faqs.org/rfcs/rfc2046" class="link external" title="Link : http://www.faqs.org/rfcs/rfc2046">&raquo;&nbsp;RFC2046</a> , <a href="http://www.faqs.org/rfcs/rfc2047" class="link external" title="Link : http://www.faqs.org/rfcs/rfc2047">&raquo;&nbsp;RFC2047</a> , <a href="http://www.faqs.org/rfcs/rfc2048" class="link external" title="Link : http://www.faqs.org/rfcs/rfc2048">&raquo;&nbsp;RFC2048</a> &amp; <a href="http://www.faqs.org/rfcs/rfc2049" class="link external" title="Link : http://www.faqs.org/rfcs/rfc2049">&raquo;&nbsp;RFC2049</a>:
        <em>Multipurpose Internet Mail Extensions</em> (<acronym title="Multipurpose Internet Mail Extensions">MIME</acronym>).
       </span>
      </li>
     </ul> 
     A detailed overview is also available in the books
     <a href="http://www.oreilly.com/catalog/progintemail/noframes.html" class="link external" title="Link : http://www.oreilly.com/catalog/progintemail/noframes.html">&raquo;&nbsp;<em>Programming Internet Email</em></a>
     by David Wood and  <a href="http://oreilly.com/catalog/9780596000127/" class="link external" title="Link : http://oreilly.com/catalog/9780596000127/">&raquo;&nbsp;Managing
     IMAP</a> by Dianna Mullet &amp; Kevin Mullet.
    </p>
  </div>











































































































































































































































































































































































































































































 <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="function.imap-8bit.html">imap_8bit</a> &mdash; Convert an 8bit string to a quoted-printable string</li><li><a href="function.imap-alerts.html">imap_alerts</a> &mdash; Returns all IMAP alert messages that have occurred</li><li><a href="function.imap-append.html">imap_append</a> &mdash; Append a string message to a specified mailbox</li><li><a href="function.imap-base64.html">imap_base64</a> &mdash; Decode BASE64 encoded text</li><li><a href="function.imap-binary.html">imap_binary</a> &mdash; Convert an 8bit string to a base64 string</li><li><a href="function.imap-body.html">imap_body</a> &mdash; Read the message body</li><li><a href="function.imap-bodystruct.html">imap_bodystruct</a> &mdash; Read the structure of a specified body section of a specific message</li><li><a href="function.imap-check.html">imap_check</a> &mdash; Check current mailbox</li><li><a href="function.imap-clearflag-full.html">imap_clearflag_full</a> &mdash; Clears flags on messages</li><li><a href="function.imap-close.html">imap_close</a> &mdash; Close an IMAP stream</li><li><a href="function.imap-create.html">imap_create</a> &mdash; 别名 imap_createmailbox</li><li><a href="function.imap-createmailbox.html">imap_createmailbox</a> &mdash; Create a new mailbox</li><li><a href="function.imap-delete.html">imap_delete</a> &mdash; Mark a message for deletion from current mailbox</li><li><a href="function.imap-deletemailbox.html">imap_deletemailbox</a> &mdash; Delete a mailbox</li><li><a href="function.imap-errors.html">imap_errors</a> &mdash; Returns all of the IMAP errors that have occurred</li><li><a href="function.imap-expunge.html">imap_expunge</a> &mdash; Delete all messages marked for deletion</li><li><a href="function.imap-fetch-overview.html">imap_fetch_overview</a> &mdash; Read an overview of the information in the headers of the given message</li><li><a href="function.imap-fetchbody.html">imap_fetchbody</a> &mdash; Fetch a particular section of the body of the message</li><li><a href="function.imap-fetchheader.html">imap_fetchheader</a> &mdash; Returns header for a message</li><li><a href="function.imap-fetchmime.html">imap_fetchmime</a> &mdash; Fetch MIME headers for a particular section of the message</li><li><a href="function.imap-fetchstructure.html">imap_fetchstructure</a> &mdash; Read the structure of a particular message</li><li><a href="function.imap-fetchtext.html">imap_fetchtext</a> &mdash; 别名 imap_body</li><li><a href="function.imap-gc.html">imap_gc</a> &mdash; Clears IMAP cache</li><li><a href="function.imap-get-quota.html">imap_get_quota</a> &mdash; Retrieve the quota level settings, and usage statics per mailbox</li><li><a href="function.imap-get-quotaroot.html">imap_get_quotaroot</a> &mdash; Retrieve the quota settings per user</li><li><a href="function.imap-getacl.html">imap_getacl</a> &mdash; Gets the ACL for a given mailbox</li><li><a href="function.imap-getmailboxes.html">imap_getmailboxes</a> &mdash; Read the list of mailboxes, returning detailed information on each one</li><li><a href="function.imap-getsubscribed.html">imap_getsubscribed</a> &mdash; List all the subscribed mailboxes</li><li><a href="function.imap-header.html">imap_header</a> &mdash; 别名 imap_headerinfo</li><li><a href="function.imap-headerinfo.html">imap_headerinfo</a> &mdash; Read the header of the message</li><li><a href="function.imap-headers.html">imap_headers</a> &mdash; Returns headers for all messages in a mailbox</li><li><a href="function.imap-last-error.html">imap_last_error</a> &mdash; Gets the last IMAP error that occurred during this page request</li><li><a href="function.imap-list.html">imap_list</a> &mdash; Read the list of mailboxes</li><li><a href="function.imap-listmailbox.html">imap_listmailbox</a> &mdash; 别名 imap_list</li><li><a href="function.imap-listscan.html">imap_listscan</a> &mdash; Returns the list of mailboxes that matches the given text</li><li><a href="function.imap-listsubscribed.html">imap_listsubscribed</a> &mdash; 别名 imap_lsub</li><li><a href="function.imap-lsub.html">imap_lsub</a> &mdash; List all the subscribed mailboxes</li><li><a href="function.imap-mail-compose.html">imap_mail_compose</a> &mdash; Create a MIME message based on given envelope and body sections</li><li><a href="function.imap-mail-copy.html">imap_mail_copy</a> &mdash; Copy specified messages to a mailbox</li><li><a href="function.imap-mail-move.html">imap_mail_move</a> &mdash; Move specified messages to a mailbox</li><li><a href="function.imap-mail.html">imap_mail</a> &mdash; Send an email message</li><li><a href="function.imap-mailboxmsginfo.html">imap_mailboxmsginfo</a> &mdash; Get information about the current mailbox</li><li><a href="function.imap-mime-header-decode.html">imap_mime_header_decode</a> &mdash; Decode MIME header elements</li><li><a href="function.imap-msgno.html">imap_msgno</a> &mdash; Gets the message sequence number for the given UID</li><li><a href="function.imap-mutf7-to-utf8.html">imap_mutf7_to_utf8</a> &mdash; Decode a modified UTF-7 string to UTF-8</li><li><a href="function.imap-num-msg.html">imap_num_msg</a> &mdash; Gets the number of messages in the current mailbox</li><li><a href="function.imap-num-recent.html">imap_num_recent</a> &mdash; Gets the number of recent messages in current mailbox</li><li><a href="function.imap-open.html">imap_open</a> &mdash; Open an IMAP stream to a mailbox</li><li><a href="function.imap-ping.html">imap_ping</a> &mdash; Check if the IMAP stream is still active</li><li><a href="function.imap-qprint.html">imap_qprint</a> &mdash; Convert a quoted-printable string to an 8 bit string</li><li><a href="function.imap-rename.html">imap_rename</a> &mdash; 别名 imap_renamemailbox</li><li><a href="function.imap-renamemailbox.html">imap_renamemailbox</a> &mdash; Rename an old mailbox to new mailbox</li><li><a href="function.imap-reopen.html">imap_reopen</a> &mdash; Reopen IMAP stream to new mailbox</li><li><a href="function.imap-rfc822-parse-adrlist.html">imap_rfc822_parse_adrlist</a> &mdash; Parses an address string</li><li><a href="function.imap-rfc822-parse-headers.html">imap_rfc822_parse_headers</a> &mdash; Parse mail headers from a string</li><li><a href="function.imap-rfc822-write-address.html">imap_rfc822_write_address</a> &mdash; Returns a properly formatted email address given the mailbox, host, and personal info</li><li><a href="function.imap-savebody.html">imap_savebody</a> &mdash; Save a specific body section to a file</li><li><a href="function.imap-scan.html">imap_scan</a> &mdash; 别名 imap_listscan</li><li><a href="function.imap-scanmailbox.html">imap_scanmailbox</a> &mdash; 别名 imap_listscan</li><li><a href="function.imap-search.html">imap_search</a> &mdash; This function returns an array of messages matching the given search criteria</li><li><a href="function.imap-set-quota.html">imap_set_quota</a> &mdash; Sets a quota for a given mailbox</li><li><a href="function.imap-setacl.html">imap_setacl</a> &mdash; Sets the ACL for a given mailbox</li><li><a href="function.imap-setflag-full.html">imap_setflag_full</a> &mdash; Sets flags on messages</li><li><a href="function.imap-sort.html">imap_sort</a> &mdash; Gets and sort messages</li><li><a href="function.imap-status.html">imap_status</a> &mdash; Returns status information on a mailbox</li><li><a href="function.imap-subscribe.html">imap_subscribe</a> &mdash; Subscribe to a mailbox</li><li><a href="function.imap-thread.html">imap_thread</a> &mdash; Returns a tree of threaded message</li><li><a href="function.imap-timeout.html">imap_timeout</a> &mdash; Set or fetch imap timeout</li><li><a href="function.imap-uid.html">imap_uid</a> &mdash; This function returns the UID for the given message sequence number</li><li><a href="function.imap-undelete.html">imap_undelete</a> &mdash; Unmark the message which is marked deleted</li><li><a href="function.imap-unsubscribe.html">imap_unsubscribe</a> &mdash; Unsubscribe from a mailbox</li><li><a href="function.imap-utf7-decode.html">imap_utf7_decode</a> &mdash; Decodes a modified UTF-7 encoded string</li><li><a href="function.imap-utf7-encode.html">imap_utf7_encode</a> &mdash; Converts ISO-8859-1 string to modified UTF-7 text</li><li><a href="function.imap-utf8-to-mutf7.html">imap_utf8_to_mutf7</a> &mdash; Encode a UTF-8 string to modified UTF-7</li><li><a href="function.imap-utf8.html">imap_utf8</a> &mdash; Converts MIME-encoded text to UTF-8</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="103585""></a>
  <div class="note">
   <strong class="user">Eelco</strong>
   <a href="#103585" class="date">21-Apr-2011 02:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I used the instructions from Chris (thanks Chris) to recompile the imap.so module for CentOS 5 (PHP 5.2.11). I didn't want to recompile all PHP extensions only imap.so.<br />
<br />
So here is my version of recompiling imap.so for PHP 5.2.11 based on the instructions of Chris.<br />
<br />
0) Install the dependencies<br />
yum groupinstall "Development Tools"<br />
yum install openssl-devel<br />
yum install krb5 krb5-devel <br />
yum install pam-devel<br />
1) Create a temporary folder and cd to it.<br />
# mkdir ~/php-imap &amp;&amp; cd ~/php-imap<br />
2) Download c-client.tar.Z<br />
# wget <a href="ftp://ftp.cac.washington.edu/imap/c-client.tar.Z" rel="nofollow" target="_blank">ftp://ftp.cac.washington.edu/imap/c-client.tar.Z</a><br />
3) Extract the c-client.tar.Z file, which would create the imap-2007e folder at this moment.<br />
# tar -zxf c-client.tar.Z <br />
4) Download php source code using. Use the version of the php installed on the machine (php --version)<br />
Extract the php-*.rpm file to get the php-*.tar.bz2 source package<br />
# wget <a href="http://3es.atomicrocketturtle.com/packages/ php/php-5.2.11-3.art.src.rpm" rel="nofollow" target="_blank">http://3es.atomicrocketturtle.com/packages/ php/php-5.2.11-3.art.src.rpm</a><br />
# rpm2cpio php-5.2.11-3.art.src.rpm | cpio -idmv<br />
# tar xvjf php-5.2.11.tar.bz2 <br />
5) Install php-imap plugin using or you can simply just add the php ini file for the imap.so extension<br />
# sudo yum install php-imap<br />
6) Go to the imap-2007e folder and edit the Makefile such that the 'EXTRACFLAGS=' line reads: 'EXTRACFLAGS=-fPIC'<br />
7) Compile c-client.<br />
# make lr5&nbsp; IP6=4<br />
8) Go to the php source folder and run the configure script with the following arguments: <br />
# ./configure --disable-all --with-imap=shared,&lt;path to imap-2007e folder&gt; --with-imap-ssl --with-openssl=/usr<br />
9) Compile php<br />
# make<br />
10) Copy/replace the imap.so file from the ./modules folder to the php module folder.<br />
# sudo cp ./modules/imap.so /usr/lib64/php/modules<br />
11) Restart Apache<br />
# sudo /etc/init.d/httpd restart<br />
12) Check imap section of <span class="default">&lt;?php phpinfo</span><span class="keyword">(); </span><span class="default">?&gt;</span>, and it should only list IMAP c-Client Version and SSL Support. The Kerberos Support should NOT be listed here!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101712""></a>
  <div class="note">
   <strong class="user">chris dot kistner at gmail dot com</strong>
   <a href="#101712" class="date">06-Jan-2011 04:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The IMAP php plugin doesn't work by default with Microsoft Exchange 2007 server, so I had to recompile php with the c-client without Kerberos support.<br />
<br />
Also, I wanted to compile it as a shared library (imap.so).<br />
<br />
The quick and easy way that I've used to do this on Fedora Core 13 &amp; 14 x64 was:<br />
1) Create a temporary folder and cd to it.<br />
2) Download c-client.tar.Z from <a href="ftp://ftp.cac.washington.edu/imap/" rel="nofollow" target="_blank">ftp://ftp.cac.washington.edu/imap/</a><br />
3) Extract the c-client.tar.Z file, using 'tar -zxf c-client.tar.Z', which would create the imap-2007e folder at this moment.<br />
4) Download php source code using 'yumdownloader --source php' *(a)<br />
Extract the php-*.rpm file to get the php-*.tar.bz2 source package *(b)<br />
5) Install php-imap plugin using 'sudo yum install php-imap', or you can simply just add the php ini file for the imap.so extension<br />
6) Go to the imap-2007e folder and edit the Makefile such that the 'EXTRACFLAGS=' line reads: 'EXTRACFLAGS=-fPIC'<br />
7) Compile c-client. I had to use 'make lfd IP6=4'<br />
8) Go to the php source folder and run the configure script with the following arguments: './configure --with-imap=shared,&lt;path to imap-2007e folder&gt; --with-imap-ssl'<br />
eg. I used './configure --with-imap=shared,/home/chris/imap-2007e --with-imap-ssl'<br />
9) Compile php by simply running 'make' *(c)<br />
10) Copy/replace the imap.so file from the ./modules folder to your PC's php module folder. I used 'sudo cp ./modules/imap.so /usr/lib64/php/modules'<br />
11) Restart Apache: 'sudo service httpd restart'<br />
12) Check imap section of <span class="default">&lt;?php phpinfo</span><span class="keyword">(); </span><span class="default">?&gt;</span>, and it should only list IMAP c-Client Version and SSL Support. The Kerberos Support should NOT be listed here!<br />
<br />
There are slight differences in achieving the same in Ubuntu 10.04 x64 (or perhaps other versions too):<br />
4) Download php source code using 'apt-get source php5', which will create a php5-* source folder<br />
5) Install the php5-imap plugin using 'sudo apt-get install php5-imap'<br />
7) Compile c-client. I had to use 'make ldb IP6=4'<br />
10) Copy/replace the imap.so file from the ./modules folder to your PC's php folder. I used 'sudo cp ./modules/imap.so /usr/lib64/php5/20090626'<br />
11) Restart Apache: 'sudo service apache2 restart'<br />
<br />
* Notes:<br />
(a) yumdownloader is part of yum-utils package, which can be installed using 'yum install yum-utils'<br />
(b) You can extract the rpm file using 'rpm2cpio php-*.src.rpm | cpio -idmv'<br />
(c) You can greatly improve the compilation speed on a multi-core PC using 'make -j `grep -c ^processor /proc/cpuinfo`'</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81324""></a>
  <div class="note">
   <strong class="user">bigben3333 - gmail</strong>
   <a href="#81324" class="date">22-Feb-2008 06:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've tried to compile php with imap sources for 2 days on a mandriva 2006 and it never work...<br />
<br />
I succeed only when i uninstall the following RPM witch was already installed on my system :<br />
<br />
libc-client<br />
libc-client-devel<br />
imap<br />
imap-devel<br />
<br />
here is my configure command :<br />
<br />
./configure&nbsp; --with-apache=/usr/local/apache --with-dbase --with-filepro --enable-mbstring --with-xml=/usr/local/php --enable-ftp --with-db --enable-bcmath --enable-calendar --with-mysql --with-zlib-dir --enable-trans-sid --with-imap=/usr/local/imap-2004g --with-kerberos --with-imap-ssl --with-openssl --enable-sysvsem --enable-sysvshm</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81016""></a>
  <div class="note">
   <strong class="user">kvazitron at gmail dot com</strong>
   <a href="#81016" class="date">11-Feb-2008 02:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I successfully installed c-client and compiled php 5.2.5 with imap on FreeBSD 6.3. To get this stuff work, i did following steps:<br />
<br />
1) to install c-client:<br />
<br />
download and uncompress c-client.tar.Z to folder /usr/local/<br />
cd /usr/local/imap-2007<br />
make bsf<br />
mkdir include<br />
ln -s c-client include<br />
mkdir lib<br />
cd lib<br />
ln -s ../c-client/c-client.a libc-client.a<br />
<br />
2) to compile php:<br />
add this options<br />
--with-imap=/usr/local/imap-2007 --with-imap-ssl</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78627""></a>
  <div class="note">
   <strong class="user">mogmios at gmail dot com</strong>
   <a href="#78627" class="date">19-Oct-2007 12:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In Fedora Core 6 64 bit w/ a custom compiled copy of Apache and PHP 4 I had to add packages libc-client*x84_64 and then just used config options --with-imap --with-kerberos --with-imap-ssl.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76950""></a>
  <div class="note">
   <strong class="user">gpayne at galenaparkisd com</strong>
   <a href="#76950" class="date">07-Aug-2007 12:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can also use the novalidate-cert flag and it won't bother you about the ssl stuff:<br />
<br />
$mailbox = imap_open("{localhost:143/imap/novalidate-cert}INBOX", "user","pw");</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76703""></a>
  <div class="note">
   <strong class="user">mleiv</strong>
   <a href="#76703" class="date">26-Jul-2007 04:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
MAC OSX advice for those less experienced in UNIX.<br />
<br />
I had a lot of trouble with all the advice here, but I finally got it working, so I thought I'd leave my steps.&nbsp; If you know a decent amount about UNIX you can probably do better on you own.<br />
#1) downloaded version listed by php.net above.<br />
#2) ran "make opx" on it (the three-letter is your OS, opx is later osx versions)<br />
#3) copied resulting c-client/ folder to where I wanted to leave my imap stuff, herafter referred to as IMAP_HOME.<br />
#4) renamed IMAP_HOME/c-client/c-client.a to libc-client.a<br />
#5) ran "configure" on php using --with-imap=IMAP_HOME --with-kerberos&nbsp; --with-imap-ssl (my configure insisted that I use the last two)<br />
#6) make, make install, and restarted Apache.&nbsp; Voila!&nbsp; &nbsp; <br />
<br />
At this point you can delete the downloaded imap stuff, or move it to your sources/ folder or whatever.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76248""></a>
  <div class="note">
   <strong class="user">bogdanderen at mail dot ru</strong>
   <a href="#76248" class="date">07-Jul-2007 06:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
INSTALLING IMAP<br />
&nbsp;&nbsp; 1. Log in as root:<br />
&nbsp;&nbsp; &nbsp;&nbsp; su -<br />
&nbsp;&nbsp; 2. Download IMAP installation<br />
&nbsp;&nbsp; 3. Untar the package:<br />
&nbsp;&nbsp; &nbsp;&nbsp; tar -zxf IMAP_PACKAGE_FILENAME<br />
&nbsp;&nbsp; 4. Enter the source directory:<br />
&nbsp;&nbsp; &nbsp;&nbsp; cd IMAP_PACKAGE_DIRECTORY<br />
&nbsp;&nbsp; 5. Build the package.<br />
&nbsp;&nbsp; &nbsp;&nbsp; # edit Makefile EXTRACFLAGS=-fPIC<br />
&nbsp;&nbsp; &nbsp;&nbsp; # make lrh<br />
&nbsp;&nbsp; 6. Install the lib and include files:<br />
&nbsp;&nbsp; &nbsp;&nbsp; # mkdir /IMAP_DIR/lib<br />
&nbsp;&nbsp; &nbsp;&nbsp; # mkdir /IMAP_DIR/include<br />
&nbsp;&nbsp; &nbsp;&nbsp; # cp -r ./src/c-client/*.h /IMAP_DIR/include/<br />
&nbsp;&nbsp; &nbsp;&nbsp; # cp&nbsp; ./c-client/linkage.h /IMAP_DIR/include/<br />
&nbsp;&nbsp; &nbsp;&nbsp; # cp ./src/osdep/unix/*.h /IMAP_DIR/include/<br />
&nbsp;&nbsp; &nbsp;&nbsp; # cp ./src/osdep/unix/*.c /IMAP_DIR/lib/<br />
&nbsp;&nbsp; &nbsp;&nbsp; # rm -rf all files and directories except /IMAP_DIR/include/ &amp; /IMAP_DIR/lib/<br />
&nbsp;&nbsp; 7. Create the osdep.h link:<br />
&nbsp;&nbsp; &nbsp;&nbsp; Linux:<br />
&nbsp;&nbsp; &nbsp;&nbsp; # ln -s ./include/c-client/os_slx.h \<br />
&nbsp;&nbsp; &nbsp;&nbsp; /IMAP_DIR/include/osdep.h<br />
<br />
INSTALLING PHP (DO NOT --with-kerberos)<br />
&nbsp;&nbsp;&nbsp; --with-imap=/IMAP_DIR</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73364""></a>
  <div class="note">
   <strong class="user">eeescalona at yahoo dot com</strong>
   <a href="#73364" class="date">20-Feb-2007 12:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
fyi.<br />
<br />
I had an error during this process<br />
<br />
*downloaded from ftp.cac.washington.edu&nbsp; imap-2006e.tar.gz<br />
*untarred it as /usr/local/src/imap-2006e.<br />
*made lrh (make lrh)<br />
*copied /usr...imap-2006e/c-client/c-client.a into ..../client/libc-client.a<br />
*cd /usr/local/src/php-4.2.1/<br />
*configured php using ... --with-imap=/usr/local/src/imap-2006e --with-ssl<br />
<br />
*and during make the following error occurred.<br />
<br />
php_imap.c:71: error: conflicting types for 'utf8_mime2text'<br />
/usr/local/src/imap-2006e//c-client/utf8aux.h:37: error: previous declaration of 'utf8_mime2text' was here<br />
php_imap.c:71: error: conflicting types for 'utf8_mime2text'<br />
/usr/local/src/imap-2006e//c-client/utf8aux.h:37: error: previous declaration of 'utf8_mime2text' was here<br />
make[3]: *** [php_imap.lo] Error 1<br />
make[3]: Leaving directory `/usr/local/src/php-4.2.1/ext/imap'<br />
make[2]: *** [all-recursive] Error 1<br />
make[2]: Leaving directory `/usr/local/src/php-4.2.1/ext/imap'<br />
make[1]: *** [all-recursive] Error 1<br />
make[1]: Leaving directory `/usr/local/src/php-4.2.1/ext'<br />
make: *** [all-recursive] Error 1<br />
<br />
apparently, apache 4.2.1 and imap-2006e has the same declared function which creates a duplication problem. the utf8_mime2text function is both found on files:<br />
<br />
php-4.2.1/imap/php_imap.c (2 occurences)<br />
imap-2006e/c-client/utf8aux.h (1 occurences) <br />
imap-2006e/c-client/utf8aux.c (1 occurrences) <br />
imap-2006e/c-client/mail.c (5 occrences)<br />
<br />
bug fixers says i have to upgrade my php, but I cant afford to change versions since i run some home grown developed php software which doesnt work on higher versions. <br />
<br />
So I did this.<br />
<br />
I replaced all utf8_mime2text texts with utf8_mime2text2 for the imap sources.<br />
<br />
since my server is both web and mysql, i used a built in mysql command called 'replace'<br />
<br />
$&gt;replace utf8_mime2text utf8_mime2text2 -- /..../c-client/utf8aux.h<br />
$&gt;replace utf8_mime2text utf8_mime2text2 -- /..../c-client/utf8aux.c<br />
$&gt;replace utf8_mime2text utf8_mime2text2 -- /..../c-client/mail.c<br />
<br />
then i continued make and make install, without the reported error.<br />
<br />
caveats...i just did this to try it. i dunno if it will work later...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73177""></a>
  <div class="note">
   <strong class="user">couplewith at interpakr dot co dot kr</strong>
   <a href="#73177" class="date">12-Feb-2007 05:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
imap-install <br />
&nbsp; 1. tar xvzf c-client.tgz<br />
&nbsp; 2. cd imap-2006e<br />
&nbsp; 3. make lrh&nbsp; &nbsp; # install redhat linux<br />
&nbsp; 4. cp c-client/c-client.a&nbsp; /usr/local/lib/libc-client.a<br />
&nbsp;&nbsp; &nbsp;&nbsp; copy head files <br />
&nbsp;&nbsp; &nbsp;&nbsp; c-client/rfc822.h, mail.h ? linkage.h<br />
&nbsp;&nbsp; &nbsp; &nbsp; /usr/local/include <br />
&nbsp;&nbsp; &nbsp; &nbsp; c-clinet/utf-8.h /usr/local/include<br />
&nbsp; 5. if&nbsp; U8T_CANONICAL undefined error <br />
&nbsp;&nbsp; &nbsp;&nbsp; edit php_src/ext/imap/php_imap.c<br />
<br />
==add 53 line ==<br />
#include &lt;time.h&gt;<br />
#include &lt;stdio.h&gt;<br />
#include &lt;ctype.h&gt;<br />
#include &lt;signal.h&gt;<br />
+#include "utf8.h"<br />
&nbsp;&nbsp; 6. make php installatin step</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71352""></a>
  <div class="note">
   <strong class="user">Marplatense</strong>
   <a href="#71352" class="date">23-Nov-2006 08:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Compiling php with support for imap on a linux 64 bits server (tested with php 5.1.6, php 5.2.0, CentOS 4.4 64 bits and c-client snap 0611201609):<br />
<br />
1- download the imap from ftp.<br />
# tar -zxvf imap-2006d.DEV.tar.Z<br />
# cd imap-2006d.DEV.SNAP-0611201609/<br />
# vim MakeFile<br />
2- Search for "EXTRACFLAGS=" and add -fPIC at then end:<br />
&nbsp;&nbsp;&nbsp; before EXTRACFLAGS=<br />
&nbsp;&nbsp;&nbsp; after&nbsp;&nbsp; EXTRACFLAGS=-fPIC<br />
3- save the file and quit <br />
# make lrh<br />
# cd c-client/<br />
# cp /.../imap-2006d.DEV.SNAP-0611201609/c-client/c-client.a /.../imap-2006d.DEV.SNAP-0611201609/c-client/libc-client.a<br />
4- navigate to your php directory and:<br />
# ./configure ... lots of options here and ... --with-imap=/.../imap-2006d.DEV.SNAP-0611201609 --with-imap-ssl<br />
# make <br />
# make install<br />
<br />
Additional notes: <br />
a- I choose "lrh" in the make but you might check what's yours option.<br />
b- I made it with ssl support and because of this I added the --with-imap-ssl in the php configure option. You might make it with no SSL</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="64029""></a>
  <div class="note">
   <strong class="user">James Triplett &lt;jm-php at vj8 dot net&gt;</strong>
   <a href="#64029" class="date">05-Apr-2006 07:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Building Apache2, PHP and IMAP requires a shareable version<br />
of the c-client library, but the standard UW code doesn't provide one.<br />
I couldn't find any way to build with the libc-client.a without generating piles of relocation errors. (gcc on Solaris 10)<br />
<br />
The IMAP c-client library can be built shareable with the following steps:<br />
1. fix the Makefile in .../imap-2004/c-client to include:<br />
BASECFLAGS="-fPIC -O3"<br />
2. make <br />
3. mkdir tmp<br />
4. cd tmp<br />
5. ar xv ../c-client.a&nbsp; (to extract the .o files)<br />
6. gcc -shared -o c-client.so *.o&nbsp; (to create the .so library)<br />
7. copy that c-client.so to /usr/local/imap/lib/libc-client.so<br />
&nbsp;&nbsp;&nbsp; (it may be necessary to hide the libc-client.a)<br />
8. configure PHP ; make; make install</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57986""></a>
  <div class="note">
   <strong class="user">BjarneDM macintosh at mathiesen dot info</strong>
   <a href="#57986" class="date">20-Oct-2005 12:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Mac OS X client install notes with DarwinPorts<br />
<br />
The c-client.a isn't present on your system after you've installed the imap-uw package. !But! it's actually present at a specific time during the install phase as it's being complied from source - it's just deleted at the end of the compilation process. So, we'll have to break the install process down into it's component processes and get hold of what we need at the appropriate time:<br />
<br />
sudo port fetch imap-uw<br />
sudo port extract imap-uw<br />
sudo port patch imap-uw<br />
sudo port configure imap-uw<br />
sudo port build imap-uw<br />
imapLib=/darwinports/var/db/dports/distfiles/imap-uw/lib<br />
imapIncludes=/darwinports/var/db/dports/distfiles/imap-uw/include<br />
sudo mkdir ${imapLib} ${imapInclude}<br />
cd /darwinports/var/db/dports/build/*/*/*/c-client<br />
sudo cp *.c ${imapLib}<br />
sudo cp *.h ${imapIncludes}<br />
sudo cp c-client.a ${imapLib}/libc-client.a<br />
cd ${imapLib}<br />
ranlib - libc-client.a<br />
sudo port install imap-uw<br />
<br />
Now, you can just specify:<br />
&nbsp;&nbsp;&nbsp; --with-imap=/darwinports/var/db/dports/distfiles/imap-uw \<br />
&nbsp;&nbsp;&nbsp; --with-imap-ssl=/darwinports \<br />
in your ./configure command.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56560""></a>
  <div class="note">
   <strong class="user">php at got2get dot net</strong>
   <a href="#56560" class="date">07-Sep-2005 08:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Install note for FreeBSD:<br />
<br />
If you get this:<br />
<br />
/libexec/ld-elf.so.1: /usr/local/lib/php/20041030/imap.so: Undefined symbol "ssl_onceonlyinit"<br />
<br />
...in your httpd-error.log.<br />
<br />
It is because you compiled cclient without SSL support.<br />
<br />
However. In order for me to get SquirrelMail woorking, I had to install ports/mail/imap-uw with WITHOUT_SSL=yes and same option for ports/mail/cclient. After doing this, I recompiled cclient w/o any options to get SSL support, and then installed posrt/mail/php5-imap.<br />
<br />
This works. But if you just want SSL everywhere - install imap-uw normally, which will install cclient too. After that, install php5-imap normally as well - and you have a working system with SSL.<br />
<br />
Hope this saves more people from wasting too much time like I just did ;)<br />
<br />
&nbsp;- Nicolai</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54098""></a>
  <div class="note">
   <strong class="user">v dot 0000000001 dot -0006398047 at vertabiz dot com</strong>
   <a href="#54098" class="date">23-Jun-2005 09:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Since this library at a whole is fairly poorly documented, and it doesn't help that there's 30-something functions, and many of the functions do the same things, I have gone through and categorized the functions.&nbsp; Hopefully this will help somebody else, I know it will help me!! -Justin
<br />

<br />
CONNECTION, ERRORS &amp; QUOTAS
<br />
===========================
<br />
imap_timeout 
<br />
imap_ping 
<br />
imap_open 
<br />
imap_reopen 
<br />
imap_close 
<br />
imap_check **(fairly useless)
<br />
imap_alerts 
<br />
imap_errors
<br />
imap_last_error 
<br />
imap_get_quota 
<br />
imap_get_quotaroot 
<br />
imap_set_quota 
<br />

<br />
MESSAGES - READING
<br />
==================
<br />
imap_uid 
<br />
imap_msgno 
<br />
imap_fetchbody 
<br />
imap_fetchheader 
<br />
imap_fetchstructure 
<br />
imap_fetch_overview 
<br />
imap_body 
<br />
imap_rfc822_parse_adrlist 
<br />
imap_rfc822_parse_headers 
<br />

<br />
MESSAGES - WRITING
<br />
==================
<br />
imap_mail_compose 
<br />
imap_mail
<br />
imap_append 
<br />
imap_rfc822_write_address 
<br />

<br />
MESSAGES - OPERATIONS
<br />
=====================
<br />
imap_undelete 
<br />
imap_thread
<br />
imap_delete 
<br />
imap_mail_copy 
<br />
imap_mail_move 
<br />
imap_expunge 
<br />
imap_clearflag_full 
<br />
imap_setflag_full 
<br />

<br />
MESSAGES - DECODE/ENCODE
<br />
========================
<br />
imap_utf7_decode 
<br />
imap_utf7_encode 
<br />
imap_utf8
<br />
imap_8bit 
<br />
imap_base64 
<br />
imap_binary 
<br />
imap_mime_header_decode 
<br />
imap_qprint 
<br />

<br />
FOLDERS
<br />
=======
<br />
imap_createmailbox 
<br />
imap_deletemailbox 
<br />
imap_getmailboxes 
<br />
imap_mailboxmsginfo 
<br />
imap_renamemailbox 
<br />
imap_headers **(fairly useless)
<br />
imap_status 
<br />
imap_sort 
<br />
imap_search
<br />
imap_listscan
<br />

<br />
NNTP
<br />
====
<br />
imap_unsubscribe 
<br />
imap_subscribe 
<br />
imap_getsubscribed 
<br />

<br />
Others
<br />
=============================
<br />
imap_num_msg - use imap_mailboxmsginfo()
<br />
imap_num_recent - use imap_mailboxmsginfo() 
<br />
imap_header - alias of imap_headerinfo()
<br />
imap_scanmailbox - alias of imap_listscan()
<br />
imap_listsubscribed - alias of imap_lsub()
<br />
imap_listmailbox - alias of imap_list()
<br />
imap_lsub - use imap_getsubscribed()
<br />
imap_list - use imap_getmailboxes()
<br />
imap_bodystruct - not documented
<br />
imap_getacl - not documented
<br />
imap_setacl - not documented
<br />
imap_headerinfo - use imap_fetch_overview()</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51884""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#51884" class="date">13-Apr-2005 12:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are having difficulty compiling on netbsd from source and want imap support then you should know that the c-client library is compiled with kerberos support.&nbsp; Unfortunately gssapi_krb5 and k5crypto is not on the system (or at least wasn't for me).&nbsp; I didn't have administrative level access to add these libraries so I had to do the following.&nbsp; I still have to test that it worked 100% but at least it compiled without complaining.<br />
<br />
Comment the following segments from the configure script.<br />
<br />
Segment 1 -- test for gssapi_krb5 library<br />
<br />
&nbsp; case gssapi_krb5 in<br />
&nbsp; c|c_r|pthread*) ;;<br />
&nbsp; *)<br />
&nbsp;&nbsp;&nbsp; if test "$ext_shared" = "yes"; then<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; IMAP_SHARED_LIBADD="$IMAP_SHARED_LIBADD -lgssapi_krb5"<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;<br />
&nbsp;<br />
&nbsp; case gssapi_krb5 in<br />
&nbsp; c|c_r|pthread*) ;;<br />
&nbsp; *)<br />
&nbsp;&nbsp; &nbsp;&nbsp; LIBS="$LIBS -lgssapi_krb5"<br />
&nbsp;&nbsp; ;;<br />
&nbsp; esac<br />
<br />
&nbsp;&nbsp;&nbsp; fi<br />
&nbsp;&nbsp; ;;<br />
&nbsp; esac<br />
<br />
Segment 2 -- test for k5crypto<br />
<br />
&nbsp; case k5crypto in<br />
&nbsp; c|c_r|pthread*) ;;<br />
&nbsp; *)<br />
&nbsp;&nbsp;&nbsp; if test "$ext_shared" = "yes"; then<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; IMAP_SHARED_LIBADD="$IMAP_SHARED_LIBADD -lk5crypto"<br />
&nbsp;&nbsp;&nbsp; else<br />
<br />
&nbsp; case k5crypto in<br />
&nbsp; c|c_r|pthread*) ;;<br />
&nbsp; *)<br />
&nbsp;&nbsp; &nbsp;&nbsp; LIBS="$LIBS -lk5crypto"<br />
&nbsp;&nbsp; ;;<br />
&nbsp; esac<br />
<br />
&nbsp;&nbsp;&nbsp; fi<br />
&nbsp;&nbsp; ;;<br />
&nbsp; esac<br />
<br />
BTW.&nbsp; Since I was only compiling for the modules (they have suPHP so I compile all my own modules when I need them) I only dropped this in for the php configure script parameters<br />
<br />
./configure --with-imap=shared,xxxxxx --with-kerberos=xxxxxx --with-imap-ssl<br />
<br />
This is verified working via an imap test.&nbsp; One excellent test that I located on the phpbuilder.com site.&nbsp; Here it is.&nbsp; Modify the address, port, protocol type, username, and password appropriately.&nbsp; The post was 5 years old but the script still works fine.&nbsp; The posters name was "Matthew"<br />
<br />
&lt;HTML&gt; <br />
&lt;HEAD&gt; <br />
&lt;TITLE&gt;imap_check&lt;/TITLE&gt; <br />
&lt;/HEAD&gt; <br />
&lt;BODY&gt; <br />
&lt;? <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; //check for new messages <br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; $mailbox = imap_open("{localhost/pop3:110}INBOX", <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "#username#","#password#"); <br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; // Check messages <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; $check = imap_check($mailbox); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; print("&lt;PRE&gt;"); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; print("Date most recent message : " . $check-&gt;Date); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; print("&lt;BR&gt;"); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; print("Connection type : " . $check-&gt;Driver); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; print("&lt;BR&gt;"); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; print("Name of the mailbox : " . $check-&gt;Mailbox); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; print("&lt;BR&gt;"); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; print("Number of messages : " . $check-&gt;Nmsgs); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; print("&lt;BR&gt;"); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; print("Number of recent messages : " . $check-&gt;Recent); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; print("&lt;BR&gt;"); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; print("&lt;/PRE&gt;"); <br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; // show headers for messages <br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; $index=1; <br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; $header = imap_header($mailbox, $index); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; print("&lt;PRE&gt;"); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; print("Header Date : " . $header-&gt;Date . "&lt;BR&gt;"); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; print("Header To : " . $header-&gt;to) . "&lt;BR&gt;"; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; print("Header From : " . $header-&gt;From . "&lt;BR&gt;"); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; print("Header cc : " . $header-&gt;cc . "&lt;BR&gt;"); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; print("Header ReplyTo : " . $header-&gt;ReplyTo . "&lt;BR&gt;"); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; print("Header Subject : " . $header-&gt;Subject . "&lt;BR&gt;&lt;/PRE&gt;"); <br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; print("&lt;PRE&gt;"); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; print(imap_body($mailbox,$index)); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; print("&lt;/PRE&gt;&lt;HR&gt;"); <br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; imap_close($mailbox); <br />
?&gt; <br />
<br />
&lt;/BODY&gt;&lt;/HTML&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50013""></a>
  <div class="note">
   <strong class="user">seem dot iges at mail dot ee</strong>
   <a href="#50013" class="date">15-Feb-2005 05:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you like me disvoer that "make slx" fails, but you're damn sure you've openssl installed then, it might be that the lib and include paths on your distro are different then the defaults provided in the imap-2004a (or imap-XXXXx). To modify go to dir ../imap-2004a/src/osdep/unix and edit the section (shown below) in the Makefile<br />
<br />
# Extended flags needed for SSL.&nbsp; You may need to modify.<br />
<br />
#SSLDIR=/usr/local/ssl<br />
SSLDIR=/etc/ssl<br />
SSLCERTS=$(SSLDIR)/certs<br />
SSLKEYS=$(SSLCERTS)<br />
#SSLINCLUDE=$(SSLDIR)/include<br />
SSLINCLUDE=/usr/include/openssl<br />
#SSLLIB=$(SSLDIR)/lib<br />
SSLLIB=/usr/lib<br />
<br />
SSLCRYPTO=-lcrypto<br />
<br />
Commented out SSLDIR, SSLINCLUDE and SSLIB are defaults and the uncommented are valid paths for Slackware (10.0/10.1).<br />
You should also check your ld.so.conf for valid paths.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="48976""></a>
  <div class="note">
   <strong class="user">antivert</strong>
   <a href="#48976" class="date">13-Jan-2005 08:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that is not not necessary to disable SSL in the IMAP compile to make it work with PHP 5.0.3.<br />
<br />
1. Compile IMAP with SSL support for your system:<br />
<br />
cd /path/to/imap/source/<br />
make &lt;system type&gt; (ldb, lnx, etc)<br />
mkdir include<br />
mkdir lib<br />
<br />
2. Make links in IMAP source directory: <br />
<br />
cd /path/to/imap/source/c-client<br />
cp *.h ../include/<br />
cp *.c ../lib/<br />
cp c-client.a ../lib/libc-client.a<br />
<br />
3. Compile PHP with SSL support,&nbsp; --with-imap=/path/to/imap/source/ . If SSL support fails, you'll get a configure-time error that IMAP doesn't work. This is a lie, you just need to get SSL support working in PHP. On certain linux systems, with OpenSSL 0.9.7, this means adding --with-openssl=/usr (if the OpenSSL files are in /usr/include/openssl/) instead of the proper directory containing the OpenSSL files. For some reason, giving a parent directory makes PHP able to find the OpenSSL include files.<br />
<br />
4. PHP should build. <br />
<br />
Alternately, you can disable SSL during the IMAP build, as per the previous directions posted here.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="47498""></a>
  <div class="note">
   <strong class="user">amit dot gupta at prudence-india dot com</strong>
   <a href="#47498" class="date">18-Nov-2004 12:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I faced problem in compiling imap with php-5.0.2 release version. Then following commands on snapshot version solved my problem<br />
<br />
# tar -zxvf imap-2004b.DEV.tar.Z<br />
# cd imap-2004b.DEV.SNAP-0411051435/<br />
# make lnp SSLTYPE=none<br />
# cp -r /usr/local/imap-2004b.DEV.SNAP-0411051435/c-client/*.h /usr/local/imap-2004b.DEV.SNAP-0411051435/include/<br />
<br />
# cp -r /usr/local/imap-2004b.DEV.SNAP-0411051435/c-client/*.c /usr/local/imap-2004b.DEV.SNAP-0411051435/lib/<br />
<br />
# ln -s /usr/local/imap-2004b.DEV.SNAP-0411051435/c-client/c-client.a /usr/local/imap-2004b.DEV.SNAP-0411051435/lib/libc-client.a<br />
<br />
# tar -zxvf php5-STABLE-200411180530.tar.gz<br />
<br />
# cd php5-STABLE-200411180530<br />
<br />
./configure&nbsp; --with-apxs2=/usr/sbin/apxs --enable-shared --with-mod_charset --enable-force-cgi-redirect --enable-fastcgi --enable-magic-quotes --with-openssl&nbsp; --with-zlib&nbsp; --enable-bcmath&nbsp; --enable-calendar --with-curl&nbsp; --with-curlwrappers&nbsp; --enable-dba&nbsp;&nbsp; --with-gdbm --with-cdb&nbsp; --with-inifile&nbsp; --with-flatfile&nbsp; --enable-dbase&nbsp;&nbsp; --enable-dbx&nbsp; &nbsp;&nbsp; --enable-dio --with-fam&nbsp; --enable-filepro&nbsp; --enable-ftp&nbsp; --with-ldap&nbsp; --enable-mbstring --with-mysql=/usr/include&nbsp; --with-zlib-dir&nbsp; --enable-shmop --enable-soap&nbsp; --enable-sockets&nbsp; &nbsp; --enable-sysvmsg&nbsp;&nbsp; --enable-sysvsem&nbsp; --enable-sysvshm&nbsp; --enable-wddx --with-pic --enable-versioning&nbsp; --with-pgsql --with-java=/usr/java/jdk1.5.0/&nbsp; --with-imap=/usr/local/imap-2004b.DEV.SNAP-0411051435 --with-kerberos<br />
<br />
# make <br />
<br />
# make install<br />
<br />
Thus, php compiled sucessufully with imap support on fedora core 1.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="44201""></a>
  <div class="note">
   <strong class="user">Pete Spicer, sleeping [at] myperch.org</strong>
   <a href="#44201" class="date">17-Jul-2004 03:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have a pretty much stock set-up of SuSE 8.1 Personal (Apache, PHP et al built by me) and IMAP-2004 refused to build for me.<br />
<br />
What I found was, using the make lsu (for SuSE) almost worked built I was getting odd build results, i.e. make failures.<br />
<br />
The problem? GCC 3.2. If you don't have an older GCC available, please install one! I installed the gcc_old package from SuSE and built with the following command:<br />
<br />
CC=gcc297 make lsu SSLTYPE=none<br />
<br />
The result was a perfect build. So if you are getting errors, please try an earlier build of GCC.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42294""></a>
  <div class="note">
   <strong class="user">Tomas V.V.Cox</strong>
   <a href="#42294" class="date">11-May-2004 06:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For compiling this extension without compiling imap from sources I did (this was mandrake):<br />
<br />
Install the following rpms:<br />
imap<br />
imap-devel<br />
openssl<br />
openssl-devel<br />
krb5<br />
krb5-devel<br />
pam<br />
pam-devel<br />
<br />
Do the trick:<br />
# mkdir /usr/include/imap/lib<br />
# cp /usr/lib/libc-client-PHP4.a /usr/include/imap/lib/libc-client.a<br />
<br />
And the configure line:<br />
./configure &lt;options&gt; --with-imap=/usr/include/imap --with-imap-ssl<br />
<br />
(don't forget --enable-pear ;)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

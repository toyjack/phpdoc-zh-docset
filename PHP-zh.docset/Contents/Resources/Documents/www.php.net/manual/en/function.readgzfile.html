<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Output a gz-file</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.inflate-init.html">? inflate_init</a></li>
      <li style="float: right;"><a href="function.zlib-decode.html">zlib_decode ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.zlib.html">Zlib 函数</a></li>
    <li>Output a gz-file</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.readgzfile" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">readgzfile</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">readgzfile</span> &mdash; <span class="dc-title">Output a gz-file</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.readgzfile-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>readgzfile</strong></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$filename</code></span>, <span class="methodparam"><span class="type">int</span> <code class="parameter">$use_include_path</code><span class="initializer"> = 0</span></span>): <span class="type"><span class="type">int</span>|<span class="type"><span class="type false">false</span></span></span></div>

  <p class="para rdfs-comment"> 
   Reads a file, decompresses it and writes it to standard output.
  </p>
  <p class="para">
   <span class="function"><strong>readgzfile()</strong></span> can be used to read a file which is not in
   gzip format; in this case <span class="function"><strong>readgzfile()</strong></span> will directly 
   read from the file without decompression.
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.readgzfile-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">filename</code></dt>

     <dd>

      <p class="para">
       The file name. This file will be opened from the filesystem and its
       contents written to standard output.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">use_include_path</code></dt>

     <dd>

      <p class="para">
       You can set this optional parameter to <code class="literal">1</code>, if you
       want to search for the file in the <a href="ini.core.html#ini.include-path" class="link">include_path</a> too.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.readgzfile-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para"> 
   Returns the number of (uncompressed) bytes read from the file on success,
    或者在失败时返回 <strong><code>false</code></strong>
  </p>
 </div>


 <div class="refsect1 errors" id="refsect1-function.readgzfile-errors">
  <h3 class="title">错误／异常</h3>
  <p class="para">
失败时抛出<strong><code>E_WARNING</code></strong>警告。
</p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.readgzfile-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.gzpassthru.html" class="function" rel="rdfs-seeAlso">gzpassthru()</a> - Output all remaining data on a gz-file pointer</span></li>
    <li class="member"><span class="function"><a href="function.gzfile.html" class="function" rel="rdfs-seeAlso">gzfile()</a> - Read entire gz-file into an array</span></li>
    <li class="member"><span class="function"><a href="function.gzopen.html" class="function" rel="rdfs-seeAlso">gzopen()</a> - Open gz-file</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="36243""></a>
  <div class="note">
   <strong class="user">glennh at webadept dot net</strong>
   <a href="#36243" class="date">02-Oct-2003 01:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a rather simple example of usage for this function, but it does work, and it solved a problem I was using with old browsers accessing gzipped files. <br />
<br />
<span class="default">&lt;?PHP <br />
&nbsp;<br />
</span><span class="comment">// first we need to stop the server from sending any headers at all.&nbsp; <br />
</span><span class="default">ob_start</span><span class="keyword">(); <br />
&nbsp;<br />
</span><span class="default">readgzfile</span><span class="keyword">(</span><span class="string">"test.html.gz"</span><span class="keyword">); </span><span class="comment">// read the file and output directly to<br />
</span><span class="default">the browser<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// non compressed data from the<br />
</span><span class="default">file<br />
&nbsp;<br />
ob_end_flush</span><span class="keyword">(); </span><span class="comment">// let the headers go//&nbsp; <br />
&nbsp;<br />
</span><span class="default">?&gt;</span> <br />
<br />
There is no need for any html formating if the source file is an HTML formated page, such as the ones I'm using are. Checking the browser version, sends either the gzip file directly, or sends the browser to a page like this, which does the work for it. Well done simple function. <br />
<br />
My server is running PHP 4.2.2 on Linux Redhat version 9 and<br />
Apache 2.0.40</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

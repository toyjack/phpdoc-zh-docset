<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>设定文件的访问和修改时间</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.tmpfile.html">? tmpfile</a></li>
      <li style="float: right;"><a href="function.umask.html">umask ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.filesystem.html">文件系统函数</a></li>
    <li>设定文件的访问和修改时间</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.touch" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">touch</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">touch</span> &mdash; <span class="dc-title">设定文件的访问和修改时间</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.touch-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>touch</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$filename</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$time</code><span class="initializer"> = time()</span></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$atime</code> = ?</span>
   ) : <span class="type">bool</span></div>

  <p class="para rdfs-comment">
   尝试将由 <code class="parameter">filename</code>
   给出的文件的访问和修改时间设定为给出的 <code class="parameter">time</code>。
   注意访问时间总是会被修改的，不论有几个参数。
  </p>
  <p class="para">
   如果文件不存在，则会被创建。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.touch-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">filename</code></dt>

     <dd>

      <p class="para">
       要设定的文件名。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">time</code></dt>

     <dd>

      <p class="para">
       要设定的时间。如果没有提供参数 <code class="parameter">time</code> 则会使用当前系统的时间。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">atime</code></dt>

     <dd>

      <p class="para">
       如果给出了这个参数，则给定文件的访问时间会被设为
   <code class="parameter">atime</code>，否则会设置 为<code class="parameter">time</code>。如果没有给出这两个参数，则使用当前系统时间。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 
 <div class="refsect1 returnvalues" id="refsect1-function.touch-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   成功时返回 <strong><code>true</code></strong>， 或者在失败时返回 <strong><code>false</code></strong>。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.touch-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-2611">
    <p><strong>Example #1 <span class="function"><strong>touch()</strong></span> 例子</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">touch</span><span style="color: #007700">(</span><span style="color: #0000BB">$filename</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$filename&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'&nbsp;modification&nbsp;time&nbsp;has&nbsp;been&nbsp;changed&nbsp;to&nbsp;present&nbsp;time'</span><span style="color: #007700">;<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'Sorry,&nbsp;could&nbsp;not&nbsp;change&nbsp;modification&nbsp;time&nbsp;of&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$filename</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-2612">
    <p><strong>Example #2 使用 <code class="parameter">time</code> 参数的 <span class="function"><strong>touch()</strong></span></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;This&nbsp;is&nbsp;the&nbsp;touch&nbsp;time,&nbsp;we'll&nbsp;set&nbsp;it&nbsp;to&nbsp;one&nbsp;hour&nbsp;in&nbsp;the&nbsp;past.<br /></span><span style="color: #0000BB">$time&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">time</span><span style="color: #007700">()&nbsp;-&nbsp;</span><span style="color: #0000BB">3600</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;Touch&nbsp;the&nbsp;file<br /></span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">touch</span><span style="color: #007700">(</span><span style="color: #DD0000">'some_file.txt'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$time</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'Whoops,&nbsp;something&nbsp;went&nbsp;wrong...'</span><span style="color: #007700">;<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'Touched&nbsp;file&nbsp;with&nbsp;success'</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.touch-notes">
  <h3 class="title">注释</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: <p class="para">注意：不同文件系统对时间的判断方法可能是不相同的。</p></p></blockquote>
  <div class="warning"><strong class="warning">Warning</strong>
   <p class="para">
    在 PHP 5.3.0 之前无法修改 Windows 下目录的最后修改时间。
   </p>
  </div>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="121530""></a>
  <div class="note">
   <strong class="user">centurianii at yahoo dot co dot uk</strong>
   <a href="#121530" class="date">17-Aug-2017 08:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A better explanation:<br />
<br />
For file $file and UNIX time stored in vars $access and $modified<br />
<br />
- change only access time<br />
\touch($file, \filemtime($file), $access);<br />
<br />
- change only modified time<br />
\touch($file, $modified, \fileatime($file));<br />
<br />
- change both access and modified time<br />
\touch($file, $modified, $access);<br />
<br />
Seeing the results:<br />
<br />
//use a session cookie stored in a custom folder<br />
$file = '/var/www/test_com/session/sess_qfn587cudfpgsijm1bs4d81s75';<br />
echo 'stats for sess_qfn587cudfpgsijm1bs4d81s75&lt;br/&gt;';<br />
\clearstatcache();<br />
echo 'access: '.\date("Y-m-d H:i:s", \fileatime($file)).'&lt;br/&gt;';<br />
echo 'modified: '.\date("Y-m-d H:i:s", \filemtime($file)).'&lt;br/&gt;';<br />
echo 'change access to now, modified +1 hour&lt;br/&gt;';<br />
\touch($x, \filemtime($file)+3600, time());<br />
\clearstatcache();<br />
echo 'access: '.\date("Y-m-d H:i:s", \fileatime($file)).'&lt;br/&gt;';<br />
echo 'modified: '.\date("Y-m-d H:i:s", \filemtime($file)).'&lt;br/&gt;';<br />
<br />
Notice the double call to clearstatcache()!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116331""></a>
  <div class="note">
   <strong class="user">csouth at xistins dot com</strong>
   <a href="#116331" class="date">14-Dec-2014 08:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An earlier comment referenced a code snippet that showed file_put_contents() was faster the touch for creating files. I re-ran the same tests on PHP 5.5.9 and this seems to no longer be the case.<br />
<br />
<span class="default">&lt;?php<br />
$startTime </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">100000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">file_put_contents</span><span class="keyword">(</span><span class="string">'dir/file'</span><span class="keyword">.</span><span class="default">$i</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">unlink</span><span class="keyword">(</span><span class="string">'dir/file'</span><span class="keyword">.</span><span class="default">$i</span><span class="keyword">);<br />
}<br />
echo </span><span class="string">"Time: "</span><span class="keyword">.(</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">)-</span><span class="default">$startTime</span><span class="keyword">).</span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">// Time: 2.6902809143066<br />
<br />
</span><span class="default">$startTime </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">100000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">touch</span><span class="keyword">(</span><span class="string">'dir/file'</span><span class="keyword">.</span><span class="default">$i</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">unlink</span><span class="keyword">(</span><span class="string">'dir/file'</span><span class="keyword">.</span><span class="default">$i</span><span class="keyword">);<br />
}<br />
echo </span><span class="string">"Time: "</span><span class="keyword">.(</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">)-</span><span class="default">$startTime</span><span class="keyword">).</span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">// Time: 2.3343770503998<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113652""></a>
  <div class="note">
   <strong class="user">anon</strong>
   <a href="#113652" class="date">10-Nov-2013 04:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that when PHP is called by f.e. apache or nginx instead of directly from the command line, touch() will not prefix the location of the invoking script, so the supplied filename must contain an absolute path.<br />
<br />
With script started from /home/user/www, this will not touch "/home/user/www/somefile":<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; touch</span><span class="keyword">( </span><span class="string">'somefile' </span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
But this will:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; touch</span><span class="keyword">( </span><span class="default">__DIR__ </span><span class="keyword">. </span><span class="string">'/somefile' </span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100337""></a>
  <div class="note">
   <strong class="user">bosslog at gmail dot com</strong>
   <a href="#100337" class="date">08-Oct-2010 02:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I has passed a small test to check which function is faster to create a new file. <br />
<br />
file_put_contents vs touch<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">100</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br />
{<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">file_put_contents</span><span class="keyword">(</span><span class="string">'dir/file'</span><span class="keyword">.</span><span class="default">$i</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span>Average time: 0,1145s<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">100</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br />
{<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">touch</span><span class="keyword">(</span><span class="string">'dir/file'</span><span class="keyword">.</span><span class="default">$i</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span>Average time: 0,2322s<br />
<br />
So, file_put_contents is faster than touch, about two times.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97239""></a>
  <div class="note">
   <strong class="user">chris dot dallaire at csquaredsystems dot com</strong>
   <a href="#97239" class="date">09-Apr-2010 07:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed to use this to touch the /etc/cron.d directory when I updated some files in there. I know the docs say this isn't necessary, but I'm finding that i need to do it in order form my changes to be picked up quickly. <br />
<br />
I ran into the permissions error as well and I found that using chmod 777 /etc/cron.d does the trick.<br />
<br />
So, you should be able to use the PHP touch function on a directory that has open write access.<br />
<br />
Of course, this isn't the most secure approach, but in our application it's not a big deal for that folder to not be super secure.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93787""></a>
  <div class="note">
   <strong class="user">ernst at cron-it dot de</strong>
   <a href="#93787" class="date">29-Sep-2009 06:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To touch a file without being owner, it is much easier:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">touchFile</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">) {
<br />
&nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">));
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87356""></a>
  <div class="note">
   <strong class="user">info at archiwumrocka dot art dot pl</strong>
   <a href="#87356" class="date">01-Dec-2008 01:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Only way to change modification date in catalogue is to create file in via touch() and dalete it with unlink():
<br />

<br />
<span class="default">&lt;?php
<br />
$dir&nbsp; &nbsp; </span><span class="keyword">= </span><span class="string">'temp'</span><span class="keyword">;
<br />
</span><span class="default">$files1 </span><span class="keyword">= </span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">);
<br />

<br />
</span><span class="default">$files1 </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$files1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);
<br />

<br />
foreach (</span><span class="default">$files1 </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">) 
<br />
{
<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)) continue;
<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">touch</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)) 
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">touch</span><span class="keyword">(</span><span class="default">$val </span><span class="keyword">. </span><span class="string">"/plik.txt"</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">unlink</span><span class="keyword">(</span><span class="default">$val </span><span class="keyword">. </span><span class="string">"/plik.txt"</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87315""></a>
  <div class="note">
   <strong class="user">mrgrier at yahoo dot com</strong>
   <a href="#87315" class="date">29-Nov-2008 10:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
At least on Linux, touch will not change the time on a symlink itself, but on the file/directory it points to. The only way to work around this is to unlink the symlink, then recreate it.<br />
<br />
It took a bit of searching to discover this. The OS itself provides no way to do it. Many people wondered why anyone would want to do this. I use symlinks inside a web tree to point to files outside the web tree. After a certain length of time has passed, I want the symlinks to die, so the files cannot be successfully hotlinked.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86781""></a>
  <div class="note">
   <strong class="user">ddalex at gmail dot com</strong>
   <a href="#86781" class="date">03-Nov-2008 09:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Actually, Glen is right, PHP won't touch if it is not the current owner of the file, even if the directory and files are writeable by the PHP user.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84983""></a>
  <div class="note">
   <strong class="user">Radon8472</strong>
   <a href="#84983" class="date">08-Aug-2008 05:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Important info:<br />
<br />
touch() used on a directory always returns FALSE and prints "Permission denied" on NTFS and FAT Filesystem (tested on winXP).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84081""></a>
  <div class="note">
   <strong class="user">Jeff</strong>
   <a href="#84081" class="date">26-Jun-2008 12:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've been trying to set a filemtime into the future with touch() on PHP5.<br />
<br />
It seems touch $time has a future limit around 1000000 seconds (11 days or so). Beyond this point it reverts to a previous $time.<br />
<br />
It doesn't make much sense but I could save you hours of time.<br />
<br />
$time = time()+1500000;<br />
touch($cachedfile,$time);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78606""></a>
  <div class="note">
   <strong class="user">Glen</strong>
   <a href="#78606" class="date">18-Oct-2007 01:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In unix on the command-line, you can touch files you don't own - but like other comments on this page state - PHP's built in touch won't work.<br />
<br />
I simple alternative (on unix):<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">touch_it_good</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">exec</span><span class="keyword">(</span><span class="string">"touch </span><span class="keyword">{</span><span class="default">$filename</span><span class="keyword">}</span><span class="string">"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68227""></a>
  <div class="note">
   <strong class="user">Charles Belov</strong>
   <a href="#68227" class="date">18-Jul-2006 06:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Update the access time without updating the modified time:<br />
<br />
Unix command: touch -a filename<br />
<br />
PHP: touch(filename, date('U', filemtime(filename)), time())</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56399""></a>
  <div class="note">
   <strong class="user">spam at webmastersguide dot com</strong>
   <a href="#56399" class="date">01-Sep-2005 05:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you're going to go around deleting (unlinking) files<br />
that you don't own just in order to change the modification<br />
time on the file, you darn well better chown() the file <br />
back to it's original ownership after you are done and<br />
chmod() it back to it's correct permissions.&nbsp; Otherwise <br />
you will almost certainly break things.&nbsp; Additionally the<br />
code listed for touch()ing a file you don't own should <br />
set the file creation time back to it's original time if <br />
what is wanted is to just change the modification time.<br />
Also, the code listed will break things if there is an i/o <br />
error such as disk full or too many files in the directory.<br />
Here's how the code SHOULD be written:<br />
<br />
Create the new file FIRST, rather than last, with a different<br />
name such as $file.tmp.<br />
Read the ownership, permissions, and creation time of the old file.<br />
Set permissions and creation time of the new file the same as the old.<br />
Rename the new file to the name of the old.<br />
chown() the new file to the user that owned the file it's replacing.<br />
<br />
Please be careful adding to the documentation if you've <br />
never taken programming 101.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55101""></a>
  <div class="note">
   <strong class="user">rf_public at yahoo dot co dot uk</strong>
   <a href="#55101" class="date">25-Jul-2005 12:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note: the script to touch a file you don't own will change it's owner so ensure permissions are correct or you could lose access to it</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52781""></a>
  <div class="note">
   <strong class="user">guy at forster design dot com</strong>
   <a href="#52781" class="date">12-May-2005 03:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a little workaround that allows the PHP user to touch a file it doesn't own:<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; $target_file </span><span class="keyword">= </span><span class="string">"/path/to/file/filename.txt"</span><span class="keyword">; </span><span class="comment">//system filepath to your file<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$file_content </span><span class="keyword">= </span><span class="default">implode</span><span class="keyword">(</span><span class="string">""</span><span class="keyword">,</span><span class="default">file</span><span class="keyword">(</span><span class="default">$target_file</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; @</span><span class="default">unlink</span><span class="keyword">(</span><span class="default">$target_file</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$savetofile </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$target_file</span><span class="keyword">, </span><span class="string">"w"</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">fputs</span><span class="keyword">(</span><span class="default">$savetofile</span><span class="keyword">, </span><span class="default">$file_content</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$savetofile</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$new_date </span><span class="keyword">= </span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">"23 April 2005"</span><span class="keyword">); </span><span class="comment">// set the required date timestamp here<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">touch</span><span class="keyword">(</span><span class="default">$target_file</span><span class="keyword">,</span><span class="default">$new_date</span><span class="keyword">);<br />
&nbsp;<br />
</span><span class="default">?&gt;<br />
</span><br />
Of course, PHP needs to have write access to the folder containing the file you want to touch, but that should be easy to arrange.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="24348""></a>
  <div class="note">
   <strong class="user">feathern at yahoo dot com</strong>
   <a href="#24348" class="date">13-Aug-2002 03:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Neat little script that will give you a list of all modified files in a certain folder after a certain date:<br />
<br />
$filelist = Array();<br />
$filelist = list_dir("d:\\my_folder");<br />
for($i=0;$i&lt;count($filelist);$i++){<br />
&nbsp;&nbsp;&nbsp; $test = Array();<br />
&nbsp;&nbsp;&nbsp; $test = explode("/",date("m/d/Y",filemtime($filelist[$i])));<br />
//example of files that are later then<br />
//06/17/2002<br />
&nbsp;&nbsp;&nbsp; if(($test[2] &gt; 2001) &amp;&amp; ($test[1] &gt; 16) &amp;&amp; ($test[0] &gt; 5)){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo $filelist[$i]."\r\n";<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; clearstatcache();<br />
}<br />
function list_dir($dn){<br />
&nbsp;&nbsp;&nbsp; if($dn[strlen($dn)-1] != '\\') $dn.='\\';<br />
&nbsp;&nbsp;&nbsp; static $ra = array();<br />
&nbsp;&nbsp;&nbsp; $handle = opendir($dn);<br />
&nbsp;&nbsp;&nbsp; while($fn = readdir($handle)){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if($fn == '.' || $fn == '..') continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(is_dir($dn.$fn)) list_dir($dn.$fn.'\\');<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else $ra[] = $dn.$fn;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; closedir($handle);<br />
&nbsp;&nbsp;&nbsp; return $ra;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Open a persistent connection to an InterBase database</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.ibase-param-info.html">? ibase_param_info</a></li>
      <li style="float: right;"><a href="function.ibase-prepare.html">ibase_prepare ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.ibase.html">Firebird/InterBase 函数</a></li>
    <li>Open a persistent connection to an InterBase database</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.ibase-pconnect" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">ibase_pconnect</h1>
  <p class="verinfo">(PHP 5, PHP 7)</p><p class="refpurpose"><span class="refname">ibase_pconnect</span> &mdash; <span class="dc-title">Open a persistent connection to an InterBase database</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.ibase-pconnect-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>ibase_pconnect</strong></span>
    ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$database</code></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$username</code></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$password</code></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$charset</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$buffers</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$dialect</code></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$role</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$sync</code></span>
  ]]]]]]]] ) : <span class="type">resource</span></div>

  <p class="para rdfs-comment">
   Opens a persistent connection to an InterBase database.
  </p>
  <p class="para">
   <span class="function"><strong>ibase_pconnect()</strong></span> acts very much like
   <span class="function"><a href="function.ibase-connect.html" class="function">ibase_connect()</a></span> with two major differences.
  </p>
  <p class="para">
   First, when connecting, the function will first try to find a (persistent)
   link that&#039;s already opened with the same parameters. If one is found, an
   identifier for it will be returned instead of opening a new connection.
  </p>
  <p class="para">
   Second, the connection to the InterBase server will not be closed when the
   execution of the script ends. Instead, the link will remain open for
   future use (<span class="function"><a href="function.ibase-close.html" class="function">ibase_close()</a></span> will not close links
   established by <span class="function"><strong>ibase_pconnect()</strong></span>). This type of link is
   therefore called &#039;persistent&#039;.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.ibase-pconnect-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">database</code></dt>

     <dd>

      <p class="para">
       The <code class="parameter">database</code> argument has to be a valid path to
       database file on the server it resides on. If the server is not local,
       it must be prefixed with either &#039;hostname:&#039; (TCP/IP), &#039;//hostname/&#039;
       (NetBEUI) or &#039;hostname@&#039; (IPX/SPX), depending on the connection
       protocol used.   
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">username</code></dt>

     <dd>

      <p class="para">
       The user name. Can be set with the
       <em>ibase.default_user</em> <var class="filename">php.ini</var> directive.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">password</code></dt>

     <dd>

      <p class="para">
       The password for <code class="parameter">username</code>. Can be set with the
       <em>ibase.default_password</em> <var class="filename">php.ini</var> directive.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">charset</code></dt>

     <dd>

      <p class="para">
       <code class="parameter">charset</code> is the default character set for a
       database.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">buffers</code></dt>

     <dd>

      <p class="para">
       <code class="parameter">buffers</code> is the number of database buffers to
       allocate for the server-side cache. If 0 or omitted, server chooses
       its own default.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">dialect</code></dt>

     <dd>

      <p class="para">
       <code class="parameter">dialect</code> selects the default SQL dialect for any
       statement executed within a connection, and it defaults to the highest
       one supported by client libraries. Functional only with InterBase 6
       and up.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">role</code></dt>

     <dd>

      <p class="para">
       Functional only with InterBase 5 and up.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">sync</code></dt>

     <dd>

      <p class="para">
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.ibase-pconnect-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   Returns an InterBase link identifier on success, or <strong><code>FALSE</code></strong> on error.
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.ibase-pconnect-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.ibase-close.html" class="function" rel="rdfs-seeAlso">ibase_close()</a> - Close a connection to an InterBase database</span></li>
    <li class="member"><span class="function"><a href="function.ibase-connect.html" class="function" rel="rdfs-seeAlso">ibase_connect()</a> - Open a connection to a database</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="64668""></a>
  <div class="note">
   <strong class="user">houston_roadrunner at yahoo dot com</strong>
   <a href="#64668" class="date">19-Apr-2006 08:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To make a connection to a firebird database with pconnect many people like to use the SYSDBA, or database owner. <br />
example:<br />
$dbConnection = ibase_pconnect('path to db','SYSDBA','masterkey');<br />
<br />
The above is fine unless you want to login in various user that have different permissions. To use permission make roles in the database, either as the database creator (or SYSDBA) and grant the roles to the various users. <br />
<br />
If you login with...<br />
$dbConnection = ibase_pconnect('path to db', 'USERNAME', 'userpassword');<br />
...interbase will default your user to the PUBLIC role, which is created when the database is create and usualy has select rights on tables only. To get the proper role you will need to use all the parameters, like this...<br />
$user='USERNAME';<br />
$password='userpassword';<br />
$role='MANAGER_HR';<br />
$dbConnection = ibase_pconnect('path to db', $user, $password, '', 0, 3, $role, 0);<br />
<br />
BTW - The "path to db", is formed like this...<br />
---------------------<br />
'localhost:c:/firebird/test_db/test.fdb'<br />
---------------------<br />
<br />
reading the interbase material, it states 3 connection methods, PHP appears to have selected the tcp type for us. So you can use localhost, or I suspect(never tested this myself) a ip address.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

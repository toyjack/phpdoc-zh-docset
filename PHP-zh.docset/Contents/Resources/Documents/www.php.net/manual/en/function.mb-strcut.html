<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>获取字符的一部分</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.mb-split.html">? mb_split</a></li>
      <li style="float: right;"><a href="function.mb-strimwidth.html">mb_strimwidth ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.mbstring.html">多字节字符串 函数</a></li>
    <li>获取字符的一部分</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.mb-strcut" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">mb_strcut</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.6, PHP 5, PHP 7)</p><p class="refpurpose"><span class="refname">mb_strcut</span> &mdash; <span class="dc-title">获取字符的一部分</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.mb-strcut-description">
  <h3 class="title">说明</h3>
<div class="methodsynopsis dc-description">
   <span class="methodname"><strong>mb_strcut</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$str</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$start</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$length</code><span class="initializer"> = NULL</span></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$encoding</code><span class="initializer"> = mb_internal_encoding()</span></span>
  ]] ) : <span class="type">string</span></div>

  <p class="para rdfs-comment">
   <span class="function"><strong>mb_strcut()</strong></span> 和 <span class="function"><a href="function.mb-substr.html" class="function">mb_substr()</a></span> 类似，都是从字符串中提取子字符串，但是按字节数来执行，而不是字符个数。
   如果截断位置位于多字节字符两个字节的中间，将于该字符的第一个字节开始执行。
   这也是和 <span class="function"><a href="function.substr.html" class="function">substr()</a></span> 函数的不同之处，后者简单地将字符串在字节之间截断，这将导致一个畸形的字节序列。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.mb-strcut-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">str</code></dt>

     <dd>

      <p class="para">
       要截断的 <span class="type"><a href="language.types.string.html" class="type string">string</a></span>。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">start</code></dt>

     <dd>

      <p class="para">
        如果 <code class="parameter">start</code> 不是负数，返回的字符串会从 <code class="parameter">str</code> 的第 <code class="parameter">start</code> <em class="emphasis">字节</em>位置开始，从 0 开始计数。举个例子，字符串 &#039;<em>abcdef</em>&#039;，字节位置 <em>0</em> 的字符是 &#039;<em>a</em>&#039;，字节位置 <em>2</em> 的字符是
       &#039;<em>c</em>&#039;，以此类推。
      </p>
      <p class="para">
       如果 <code class="parameter">start</code> 是负数，返回的字符串是从 <code class="parameter">str</code> 末尾处第 <code class="parameter">start</code> 个字节开始的。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">length</code></dt>

     <dd>

      <p class="para">
       <em class="emphasis">字节</em>长度。If omitted or <em>NULL</em>
       is passed, extract all bytes to the end of the string.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">encoding</code></dt>

     <dd>

      <p class="para"><code class="parameter">encoding</code>
参数为字符编码。如果省略，则使用内部字符编码。</p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.mb-strcut-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   <span class="function"><strong>mb_strcut()</strong></span> 根据 <code class="parameter">start</code> 和 <code class="parameter">length</code> 参数返回 <code class="parameter">str</code> 的一部分。
  </p>
 </div>

 
 
 <div class="refsect1 changelog" id="refsect1-function.mb-strcut-changelog">
  <h3 class="title">更新日志</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>版本</th>
       <th>说明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.4.8</td>
       <td>
        Passing <em>NULL</em> as <code class="parameter">length</code>
        extracts all bytes to the end of the string. Prior to this version
        <em>NULL</em> was treated the same as <em>0</em>.
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.mb-strcut-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.mb-substr.html" class="function" rel="rdfs-seeAlso">mb_substr()</a> - 获取部分字符串</span></li>
    <li class="member"><span class="function"><a href="function.mb-internal-encoding.html" class="function" rel="rdfs-seeAlso">mb_internal_encoding()</a> - 设置/获取内部字符编码</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="121877""></a>
  <div class="note">
   <strong class="user">olivthill at gmail dot com</strong>
   <a href="#121877" class="date">16-Nov-2017 02:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is an example with UTF8 characters, to see how the start and length arguments are working:<br />
<br />
&nbsp; $str_utf8 = utf8_encode("Déjà_vu");<br />
&nbsp; $str_utf8_0 = mb_strcut($str_utf8, 0, 4, "UTF-8"); // Déj<br />
&nbsp; $str_utf8_1 = mb_strcut($str_utf8, 1, 4, "UTF-8"); // éj<br />
&nbsp; $str_utf8_2 = mb_strcut($str_utf8, 2, 4, "UTF-8"); // éj<br />
&nbsp; $str_utf8_3 = mb_strcut($str_utf8, 3, 4, "UTF-8"); // jà_<br />
&nbsp; $str_utf8_4 = mb_strcut($str_utf8, 4, 4, "UTF-8"); // à_v<br />
<br />
The string includes two special charaters, "é" and "à" internally coded with two bytes.<br />
Note that a multibyte character is removed rather than kept in half at the end of the output.<br />
Note also that the result is the same for a cut 1,4 and a cut 2,4 with this string.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100327""></a>
  <div class="note">
   <strong class="user">php_engineer_bk at yahoo dot com</strong>
   <a href="#100327" class="date">08-Oct-2010 03:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
function cut_sense($matne_harf, $l_harf ,$return=1 ) {<br />
if ( strlen($matne_harf) &gt; $l_harf){<br />
$end='...';<br />
}else{<br />
$end='';<br />
}<br />
&nbsp;&nbsp;&nbsp; if ( function_exists('mb_strcut') ){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $matne_harf = mb_strcut ( $matne_harf, 0 , $l_harf , "UTF-8" );<br />
&nbsp;&nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $matne_harf =substr($matne_harf, 0, $l_harf);<br />
&nbsp;&nbsp;&nbsp; }<br />
$text=''.$matne_harf.''.$end.'';<br />
&nbsp; if ( $return == 1){<br />
&nbsp; return $text;<br />
&nbsp; }else{<br />
&nbsp; print $text;<br />
&nbsp; }<br />
}<br />
<br />
Iranian php programmer (farhad zand +989383015266)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="45142""></a>
  <div class="note">
   <strong class="user">t dot starling at physics dot unimelb dot edu dot au</strong>
   <a href="#45142" class="date">27-Aug-2004 04:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
What the manual and the first commenter are trying to say is that mb_strcut uses byte offsets, as opposed to mb_substr which uses character offsets. <br />
<br />
Both mb_strcut and mb_substr appear to treat negative and out-of-range offsets and lengths in the basically the same way as substr. An exception is that if start is too large, an empty string will be returned rather than FALSE. Testing indicates that mb_strcut first works out start and end byte offsets, then moves each offset left to the nearest character boundary.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="36115""></a>
  <div class="note">
   <strong class="user">oyag02 at yahoo dot co dot jp</strong>
   <a href="#36115" class="date">26-Sep-2003 03:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
diffrence between mb_substr and mb_substr<br />
<br />
example:<br />
mb_strcut('I_ROHA', 1, 2) returns 'I_'. Treated as byte stream.<br />
mb_substr('I_ROHA', 1, 2) returns 'ROHA' Treated as character stream.<br />
<br />
# 'I_' 'RO' 'HA' means multi-byte character</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

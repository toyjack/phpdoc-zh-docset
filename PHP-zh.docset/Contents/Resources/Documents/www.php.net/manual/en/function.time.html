<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>返回当前的 Unix 时间戳</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.strtotime.html">? strtotime</a></li>
      <li style="float: right;"><a href="function.timezone-abbreviations-list.html">timezone_abbreviations_list ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.datetime.html">Date/Time 函数</a></li>
    <li>返回当前的 Unix 时间戳</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.time" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">time</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">time</span> &mdash; <span class="dc-title">返回当前的 Unix 时间戳</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.time-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>time</strong></span>
    (
   ) : <span class="type">int</span></div>

  <p class="para rdfs-comment">
   返回自从 Unix 纪元（格林威治时间 1970 年 1 月 1 日 00:00:00）到当前时间的秒数。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.time-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-2499">
    <p><strong>Example #1 <span class="function"><strong>time()</strong></span> 例子</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$nextWeek&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">time</span><span style="color: #007700">()&nbsp;+&nbsp;(</span><span style="color: #0000BB">7&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">24&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">60&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">60</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;7&nbsp;days;&nbsp;24&nbsp;hours;&nbsp;60&nbsp;mins;&nbsp;60&nbsp;secs<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Now:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d'</span><span style="color: #007700">)&nbsp;.</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">'Next&nbsp;Week:&nbsp;'</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$nextWeek</span><span style="color: #007700">)&nbsp;.</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #FF8000">//&nbsp;or&nbsp;using&nbsp;strtotime():<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Next&nbsp;Week:&nbsp;'</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">strtotime</span><span style="color: #007700">(</span><span style="color: #DD0000">'+1&nbsp;week'</span><span style="color: #007700">))&nbsp;.</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程的输出类似于：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Now:       2005-03-30
Next Week: 2005-04-06
Next Week: 2005-04-06
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.time-notes">
  <h3 class="title">注释</h3>
  <div class="tip"><strong class="tip">Tip</strong>
   <p class="para">
    自 PHP 5.1 起在 <var class="varname"><a href="reserved.variables.server.html" class="classname">$_SERVER['REQUEST_TIME']</a></var>
    中保存了发起该请求时刻的时间戳。
   </p>
  </div>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.time-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.date.html" class="function" rel="rdfs-seeAlso">date()</a> - 格式化一个本地时间／日期</span></li>
    <li class="member"><span class="function"><a href="function.microtime.html" class="function" rel="rdfs-seeAlso">microtime()</a> - 返回当前 Unix 时间戳和微秒数</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="125009""></a>
  <div class="note">
   <strong class="user">derinus at gmail dot com</strong>
   <a href="#125009" class="date">14-May-2020 11:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please do NOT use above code example to calculate $nextWeek.<br />
In zones with daylight saving time it's wrong twice a year.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="123177""></a>
  <div class="note">
   <strong class="user">correa dot rafael at live dot com</strong>
   <a href="#123177" class="date">29-Sep-2018 08:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a little tweak for those having trouble with cookies being set in the future or past (even after setting the date.timezone directive in php.ini or using the function):<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; setcookie</span><span class="keyword">(</span><span class="string">'userAgent'</span><span class="keyword">,</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'HTTP_USER_AGENT'</span><span class="keyword">], </span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">date</span><span class="keyword">(</span><span class="string">'r'</span><span class="keyword">, </span><span class="default">time</span><span class="keyword">()).</span><span class="string">'+2 days'</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
The example above will fetch the current time() in Unix Epoch, convert to your date() and timezone, and covert the result to Unix Epoch again with strtotime() so you can use it to set cookie expiration dates.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="122711""></a>
  <div class="note">
   <strong class="user">Dan J</strong>
   <a href="#122711" class="date">07-May-2018 11:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It seems that the output of time()&gt; is a few hundred microseconds behind the output of microtime() - be wary of mixing these functions.<br />
<br />
Here's a snippet of code that demonstrates the difference:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// Find the next second<br />
</span><span class="default">$nextSecond </span><span class="keyword">= </span><span class="default">time</span><span class="keyword">() + </span><span class="default">1</span><span class="keyword">;<br />
<br />
</span><span class="comment">// Sleep until 2.5 milliseconds before the next second<br />
</span><span class="default">time_sleep_until</span><span class="keyword">(</span><span class="default">floatval</span><span class="keyword">(</span><span class="default">$nextSecond</span><span class="keyword">) - </span><span class="default">2.5e-3</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Check time() and microtime() every 250 microseconds for 20 iterations<br />
</span><span class="keyword">for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">20</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">++) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$time </span><span class="keyword">= </span><span class="default">time</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$uTime </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">printf</span><span class="keyword">(</span><span class="string">"TIME: %d&nbsp; uTIME: %0.6f"</span><span class="keyword">, </span><span class="default">$time</span><span class="keyword">, </span><span class="default">$uTime</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">floor</span><span class="keyword">(</span><span class="default">$uTime</span><span class="keyword">) &gt; </span><span class="default">$time</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&nbsp; time() is behind"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">usleep</span><span class="keyword">(</span><span class="default">250</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="comment">// Example output:<br />
<br />
// TIME: 1525735820&nbsp; uTIME: 1525735820.997716<br />
// TIME: 1525735820&nbsp; uTIME: 1525735820.998137<br />
// TIME: 1525735820&nbsp; uTIME: 1525735820.998528<br />
// TIME: 1525735820&nbsp; uTIME: 1525735820.998914<br />
// TIME: 1525735820&nbsp; uTIME: 1525735820.999287<br />
// TIME: 1525735820&nbsp; uTIME: 1525735820.999657<br />
// TIME: 1525735820&nbsp; uTIME: 1525735821.000026&nbsp; time() is behind<br />
// TIME: 1525735820&nbsp; uTIME: 1525735821.000367&nbsp; time() is behind<br />
// TIME: 1525735820&nbsp; uTIME: 1525735821.000705&nbsp; time() is behind<br />
// TIME: 1525735820&nbsp; uTIME: 1525735821.001042&nbsp; time() is behind<br />
// TIME: 1525735820&nbsp; uTIME: 1525735821.001379&nbsp; time() is behind<br />
// TIME: 1525735821&nbsp; uTIME: 1525735821.001718<br />
// TIME: 1525735821&nbsp; uTIME: 1525735821.002070<br />
// TIME: 1525735821&nbsp; uTIME: 1525735821.002425<br />
// TIME: 1525735821&nbsp; uTIME: 1525735821.002770<br />
// TIME: 1525735821&nbsp; uTIME: 1525735821.003109<br />
// TIME: 1525735821&nbsp; uTIME: 1525735821.003448<br />
// TIME: 1525735821&nbsp; uTIME: 1525735821.003787<br />
// TIME: 1525735821&nbsp; uTIME: 1525735821.004125<br />
// TIME: 1525735821&nbsp; uTIME: 1525735821.004480</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="121908""></a>
  <div class="note">
   <strong class="user">APM</strong>
   <a href="#121908" class="date">23-Nov-2017 03:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A better way to get a nice time-format (1 year ago, 2 months until) without all the trailing months, days, hours, minutes, seconds in the result is by using the DateTime format and using the date_diff function as they both does most of the heavy lifting for you<br />
<br />
Function below as example<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Get time interval function<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">getTimeInterval</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Set date as DateTime object<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$date </span><span class="keyword">= new </span><span class="default">DateTime </span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Set now as DateTime object<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$now </span><span class="keyword">= </span><span class="default">date </span><span class="keyword">(</span><span class="string">'Y-m-d H:i:s'</span><span class="keyword">, </span><span class="default">time</span><span class="keyword">()); </span><span class="comment">// If you want to compare two dates you both provide just delete this line and add a $now to the function parameter (ie. function getTimeInterval($date, $now))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$now </span><span class="keyword">= new </span><span class="default">DateTime </span><span class="keyword">(</span><span class="default">$now</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Check if date is in the past or future and calculate timedifference and set tense accordingly<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$now </span><span class="keyword">&gt;= </span><span class="default">$date</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$timeDifference </span><span class="keyword">= </span><span class="default">date_diff </span><span class="keyword">(</span><span class="default">$date </span><span class="keyword">, </span><span class="default">$now</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tense </span><span class="keyword">= </span><span class="string">" ago"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$timeDifference </span><span class="keyword">= </span><span class="default">date_diff </span><span class="keyword">(</span><span class="default">$now</span><span class="keyword">, </span><span class="default">$date</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tense </span><span class="keyword">= </span><span class="string">" until"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Set posible periods (lowest first as to end result with the highest value that isn't 0)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$period </span><span class="keyword">= array (</span><span class="string">" second"</span><span class="keyword">, </span><span class="string">" minute"</span><span class="keyword">, </span><span class="string">" hour"</span><span class="keyword">, </span><span class="string">" day"</span><span class="keyword">, </span><span class="string">" month"</span><span class="keyword">, </span><span class="string">" year"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Set values of the periods using the DateTime formats (matching the periods above)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$periodValue</span><span class="keyword">= array (</span><span class="default">$timeDifference</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'%s'</span><span class="keyword">), </span><span class="default">$timeDifference</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'%i'</span><span class="keyword">), </span><span class="default">$timeDifference</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'%h'</span><span class="keyword">), </span><span class="default">$timeDifference</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'%d'</span><span class="keyword">), </span><span class="default">$timeDifference</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'%m'</span><span class="keyword">), </span><span class="default">$timeDifference</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'%y'</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Loop through the periods (ie. seconds to years)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$periodValue</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If current value is different from 1 add 's' to the end of current period (ie. seconds)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$periodValue</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] != </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$period</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] .= </span><span class="string">"s"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If current value is larger than 0 set new interval overwriting the lower value that came before ensuring the result shows only the highest value that isn't 0<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$periodValue</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] &gt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$interval </span><span class="keyword">= </span><span class="default">$periodValue</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">].</span><span class="default">$period</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">].</span><span class="default">$tense</span><span class="keyword">; </span><span class="comment">// ie.: 3 months ago<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If any values were larger than 0 (ie. timedifference is not 0 years, 0 months, 0 days, 0 hours, 0 minutes, 0 seconds ago) return interval<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (isset(</span><span class="default">$interval</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$interval</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Else if no values were larger than 0 (ie. timedifference is 0 years, 0 months, 0 days, 0 hours, 0 minites, 0 seconds ago) return 0 seconds ago<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">} else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">"0 seconds" </span><span class="keyword">. </span><span class="default">$tense</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Ex. (time now = November 23 2017)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">getTimeInterval</span><span class="keyword">(</span><span class="string">"2016-05-04 12:00:00"</span><span class="keyword">); </span><span class="comment">// Returns: 1 year ago<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">getTimeInterval</span><span class="keyword">(</span><span class="string">"2017-12-24 12:00:00"</span><span class="keyword">); </span><span class="comment">// Returns: 1 month until<br />
&nbsp;&nbsp;&nbsp; <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120369""></a>
  <div class="note">
   <strong class="user">jaak dot tamre at gmail dot com</strong>
   <a href="#120369" class="date">23-Dec-2016 09:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Does anyone know if the year 2038 issue will be solved in PHP?<br />
<br />
Lets imagine it's year 2039 and the time() function will return negative numbers? This is not acceptable.<br />
<br />
Using the DateTime interface is nice, but will these timestamp helper functions be removed or fixed?</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118876""></a>
  <div class="note">
   <strong class="user">Ray.Paseur sometimes uses Gmail</strong>
   <a href="#118876" class="date">21-Feb-2016 04:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The number of 86,400 seconds in a day comes from the assumption of 60 seconds per minute, 60 minutes per hour and 24 hours per day: 60*60*24.&nbsp; But not every day has 24 hours.&nbsp; This edge case occurs on the days that clocks change as we enter and leave daylight savings (summer) time.&nbsp; Date and time arithmetic is logically consistent and correct when you use PHP built-in functions, but it may not always work as expected if you try to write your own date and time arithmetic.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117402""></a>
  <div class="note">
   <strong class="user">Peter F</strong>
   <a href="#117402" class="date">04-Jun-2015 12:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Javier:<br />
<br />
The issue are highlighting is with the date() function, not with time(). the following code demonstrates this:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// server in BST Timezone<br />
</span><span class="keyword">print </span><span class="string">'server timezone&lt;br&gt;'</span><span class="keyword">;<br />
</span><span class="default">$time1 </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'H:i:s'</span><span class="keyword">, </span><span class="default">time</span><span class="keyword">() - </span><span class="default">date</span><span class="keyword">(</span><span class="string">'Z'</span><span class="keyword">)); </span><span class="comment">// 12:50:29<br />
</span><span class="default">$time2 </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'H:i:s'</span><span class="keyword">, </span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">'U'</span><span class="keyword">)); </span><span class="comment">// 13:50:29<br />
</span><span class="default">$time3 </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'H:i:s'</span><span class="keyword">, </span><span class="default">time</span><span class="keyword">()); </span><span class="comment">// 13:50:29<br />
</span><span class="default">$time4 </span><span class="keyword">= </span><span class="default">time</span><span class="keyword">() - </span><span class="default">date</span><span class="keyword">(</span><span class="string">'Z'</span><span class="keyword">); </span><span class="comment">// 1433418629<br />
</span><span class="default">$time5 </span><span class="keyword">= </span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">'U'</span><span class="keyword">); </span><span class="comment">// 1433422229<br />
</span><span class="default">$time6 </span><span class="keyword">= </span><span class="default">time</span><span class="keyword">(); </span><span class="comment">// 1433422229<br />
</span><span class="keyword">print </span><span class="default">$time1</span><span class="keyword">.</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
print </span><span class="default">$time2</span><span class="keyword">.</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
print </span><span class="default">$time3</span><span class="keyword">.</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
print </span><span class="default">$time4</span><span class="keyword">.</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
print </span><span class="default">$time5</span><span class="keyword">.</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
print </span><span class="default">$time6</span><span class="keyword">.</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
<br />
</span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">'date.timezone'</span><span class="keyword">, </span><span class="string">'Europe/Berlin'</span><span class="keyword">);<br />
print </span><span class="string">'Europe/Berlin&lt;br&gt;'</span><span class="keyword">;<br />
</span><span class="default">$time1 </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'H:i:s'</span><span class="keyword">, </span><span class="default">time</span><span class="keyword">() - </span><span class="default">date</span><span class="keyword">(</span><span class="string">'Z'</span><span class="keyword">)); </span><span class="comment">// 12:50:29<br />
</span><span class="default">$time2 </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'H:i:s'</span><span class="keyword">, </span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">'U'</span><span class="keyword">)); </span><span class="comment">// 14:50:29<br />
</span><span class="default">$time3 </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'H:i:s'</span><span class="keyword">, </span><span class="default">time</span><span class="keyword">()); </span><span class="comment">// 14:50:29<br />
</span><span class="default">$time4 </span><span class="keyword">= </span><span class="default">time</span><span class="keyword">() - </span><span class="default">date</span><span class="keyword">(</span><span class="string">'Z'</span><span class="keyword">); </span><span class="comment">// 1433415029<br />
</span><span class="default">$time5 </span><span class="keyword">= </span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">'U'</span><span class="keyword">); </span><span class="comment">// 1433422229<br />
</span><span class="default">$time6 </span><span class="keyword">= </span><span class="default">time</span><span class="keyword">(); </span><span class="comment">// 1433422229<br />
</span><span class="keyword">print </span><span class="default">$time1</span><span class="keyword">.</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
print </span><span class="default">$time2</span><span class="keyword">.</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
print </span><span class="default">$time3</span><span class="keyword">.</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
print </span><span class="default">$time4</span><span class="keyword">.</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
print </span><span class="default">$time5</span><span class="keyword">.</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
print </span><span class="default">$time6</span><span class="keyword">.</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
<br />
</span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">'date.timezone'</span><span class="keyword">, </span><span class="string">'UTC'</span><span class="keyword">);<br />
print </span><span class="string">'UTC&lt;br&gt;'</span><span class="keyword">;<br />
</span><span class="default">$time1 </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'H:i:s'</span><span class="keyword">, </span><span class="default">time</span><span class="keyword">() - </span><span class="default">date</span><span class="keyword">(</span><span class="string">'Z'</span><span class="keyword">)); </span><span class="comment">// 12:50:29<br />
</span><span class="default">$time2 </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'H:i:s'</span><span class="keyword">, </span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">'U'</span><span class="keyword">)); </span><span class="comment">// 12:50:29<br />
</span><span class="default">$time3 </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'H:i:s'</span><span class="keyword">, </span><span class="default">time</span><span class="keyword">()); </span><span class="comment">// 12:50:29<br />
</span><span class="default">$time4 </span><span class="keyword">= </span><span class="default">time</span><span class="keyword">() - </span><span class="default">date</span><span class="keyword">(</span><span class="string">'Z'</span><span class="keyword">); </span><span class="comment">// 1433422229<br />
</span><span class="default">$time5 </span><span class="keyword">= </span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">'U'</span><span class="keyword">); </span><span class="comment">// 1433422229<br />
</span><span class="default">$time6 </span><span class="keyword">= </span><span class="default">time</span><span class="keyword">(); </span><span class="comment">// 1433422229<br />
</span><span class="keyword">print </span><span class="default">$time1</span><span class="keyword">.</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
print </span><span class="default">$time2</span><span class="keyword">.</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
print </span><span class="default">$time3</span><span class="keyword">.</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
print </span><span class="default">$time4</span><span class="keyword">.</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
print </span><span class="default">$time5</span><span class="keyword">.</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
print </span><span class="default">$time6</span><span class="keyword">.</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114830""></a>
  <div class="note">
   <strong class="user">hoangvu4000 at gmail dot com</strong>
   <a href="#114830" class="date">11-Apr-2014 05:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
//Calculate number of hours between pass and now<br />
$dayinpass = "2013-06-23 05:09:12";<br />
$today = time();<br />
$dayinpass= strtotime($dayinpass);<br />
echo round(abs($today-$dayinpass)/60/60);<br />
<br />
//Calculate number of days between pass and now<br />
$dayinpass = "2013-06-23 05:09:12";<br />
$today = time();<br />
$dayinpass= strtotime($dayinpass);<br />
echo round(abs($today-$dayinpass)/60/60/24);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113492""></a>
  <div class="note">
   <strong class="user">jnostuh at gmail dot com</strong>
   <a href="#113492" class="date">18-Oct-2013 01:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I built this function to get the strtotime numbers for the beginning and ending of the month and return them as arrays in an object.&nbsp; Cheers.<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //Returns values in the format of strtotime for evaluating purposes!<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function returnDateFirstAndLast($numberOfMonths) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $time=time();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $lastdayofcurrentmonth=strtotime('+1 month -1 day',strtotime(date('Y-m-1 24:59:59',$time)));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $values=new stdClass();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for ( $i = 0;$i &lt; $numberOfMonths;$i++ ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $time=time();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $firstdayofmonth=strtotime('-'.$i.' month',strtotime(date('Y-m-1 00:00:00',$time)));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $lastdayofmonth=strtotime('-'.($i - 1).' month -1 day',strtotime(date('Y-m-1 24:59:59',$time)));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $first[$i]=$firstdayofmonth;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( $i == 0 ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $last[$i]=$lastdayofcurrentmonth;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $last[$i]=$lastdayofmonth;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $values-&gt;first=$first;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $values-&gt;last=$last;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return $values;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112053""></a>
  <div class="note">
   <strong class="user">w dot scholtyssek at netdivision dot eu</strong>
   <a href="#112053" class="date">26-Apr-2013 11:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
public static function daysBetween($date_1, $date_2) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $one_day = 1000 * 60 * 60 * 24;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return round(abs(time($date_2) - time($date_1)) / $one_day);<br />
&nbsp;&nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109516""></a>
  <div class="note">
   <strong class="user">siegfried at anggit dot com</strong>
   <a href="#109516" class="date">24-Jul-2012 11:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
elapsed time function with precision:
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
</span><span class="keyword">function </span><span class="default">elapsed_time</span><span class="keyword">(</span><span class="default">$timestamp</span><span class="keyword">, </span><span class="default">$precision </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">) {
<br />
&nbsp; </span><span class="default">$time </span><span class="keyword">= </span><span class="default">time</span><span class="keyword">() - </span><span class="default">$timestamp</span><span class="keyword">;
<br />
&nbsp; </span><span class="default">$a </span><span class="keyword">= array(</span><span class="string">'decade' </span><span class="keyword">=&gt; </span><span class="default">315576000</span><span class="keyword">, </span><span class="string">'year' </span><span class="keyword">=&gt; </span><span class="default">31557600</span><span class="keyword">, </span><span class="string">'month' </span><span class="keyword">=&gt; </span><span class="default">2629800</span><span class="keyword">, </span><span class="string">'week' </span><span class="keyword">=&gt; </span><span class="default">604800</span><span class="keyword">, </span><span class="string">'day' </span><span class="keyword">=&gt; </span><span class="default">86400</span><span class="keyword">, </span><span class="string">'hour' </span><span class="keyword">=&gt; </span><span class="default">3600</span><span class="keyword">, </span><span class="string">'min' </span><span class="keyword">=&gt; </span><span class="default">60</span><span class="keyword">, </span><span class="string">'sec' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$a </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; $</span><span class="default">$k </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$time</span><span class="keyword">/</span><span class="default">$v</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp;&nbsp; if ($</span><span class="default">$k</span><span class="keyword">) </span><span class="default">$i</span><span class="keyword">++;
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$time </span><span class="keyword">= </span><span class="default">$i </span><span class="keyword">&gt;= </span><span class="default">$precision </span><span class="keyword">? </span><span class="default">0 </span><span class="keyword">: </span><span class="default">$time </span><span class="keyword">- $</span><span class="default">$k </span><span class="keyword">* </span><span class="default">$v</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$s </span><span class="keyword">= $</span><span class="default">$k </span><span class="keyword">&gt; </span><span class="default">1 </span><span class="keyword">? </span><span class="string">'s' </span><span class="keyword">: </span><span class="string">''</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp;&nbsp; $</span><span class="default">$k </span><span class="keyword">= $</span><span class="default">$k </span><span class="keyword">? $</span><span class="default">$k</span><span class="keyword">.</span><span class="string">' '</span><span class="keyword">.</span><span class="default">$k</span><span class="keyword">.</span><span class="default">$s</span><span class="keyword">.</span><span class="string">' ' </span><span class="keyword">: </span><span class="string">''</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp;&nbsp; @</span><span class="default">$result </span><span class="keyword">.= $</span><span class="default">$k</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp; return </span><span class="default">$result </span><span class="keyword">? </span><span class="default">$result</span><span class="keyword">.</span><span class="string">'ago' </span><span class="keyword">: </span><span class="string">'1 sec to go'</span><span class="keyword">;
<br />
}
<br />

<br />
echo </span><span class="default">elapsed_time</span><span class="keyword">(</span><span class="string">'1234567890'</span><span class="keyword">).</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">; </span><span class="comment">// 3 years 5 months ago
<br />
</span><span class="keyword">echo </span><span class="default">elapsed_time</span><span class="keyword">(</span><span class="string">'1234567890'</span><span class="keyword">, </span><span class="default">6</span><span class="keyword">); </span><span class="comment">// 3 years 5 months 1 week 2 days 57 mins 4 secs ago
<br />

<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108581""></a>
  <div class="note">
   <strong class="user">salladin</strong>
   <a href="#108581" class="date">08-May-2012 09:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Two quick approaches to getting the time elapsed in human readable form.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">time_elapsed_A</span><span class="keyword">(</span><span class="default">$secs</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$bit </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'y' </span><span class="keyword">=&gt; </span><span class="default">$secs </span><span class="keyword">/ </span><span class="default">31556926 </span><span class="keyword">% </span><span class="default">12</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'w' </span><span class="keyword">=&gt; </span><span class="default">$secs </span><span class="keyword">/ </span><span class="default">604800 </span><span class="keyword">% </span><span class="default">52</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'d' </span><span class="keyword">=&gt; </span><span class="default">$secs </span><span class="keyword">/ </span><span class="default">86400 </span><span class="keyword">% </span><span class="default">7</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'h' </span><span class="keyword">=&gt; </span><span class="default">$secs </span><span class="keyword">/ </span><span class="default">3600 </span><span class="keyword">% </span><span class="default">24</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'m' </span><span class="keyword">=&gt; </span><span class="default">$secs </span><span class="keyword">/ </span><span class="default">60 </span><span class="keyword">% </span><span class="default">60</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'s' </span><span class="keyword">=&gt; </span><span class="default">$secs </span><span class="keyword">% </span><span class="default">60<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$bit </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$v </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">)</span><span class="default">$ret</span><span class="keyword">[] = </span><span class="default">$v </span><span class="keyword">. </span><span class="default">$k</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">join</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">, </span><span class="default">$ret</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
<br />
function </span><span class="default">time_elapsed_B</span><span class="keyword">(</span><span class="default">$secs</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$bit </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">' year'&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">$secs </span><span class="keyword">/ </span><span class="default">31556926 </span><span class="keyword">% </span><span class="default">12</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">' week'&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">$secs </span><span class="keyword">/ </span><span class="default">604800 </span><span class="keyword">% </span><span class="default">52</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">' day'&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">$secs </span><span class="keyword">/ </span><span class="default">86400 </span><span class="keyword">% </span><span class="default">7</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">' hour'&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">$secs </span><span class="keyword">/ </span><span class="default">3600 </span><span class="keyword">% </span><span class="default">24</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">' minute'&nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">$secs </span><span class="keyword">/ </span><span class="default">60 </span><span class="keyword">% </span><span class="default">60</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">' second'&nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">$secs </span><span class="keyword">% </span><span class="default">60<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$bit </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$v </span><span class="keyword">&gt; </span><span class="default">1</span><span class="keyword">)</span><span class="default">$ret</span><span class="keyword">[] = </span><span class="default">$v </span><span class="keyword">. </span><span class="default">$k </span><span class="keyword">. </span><span class="string">'s'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$v </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">)</span><span class="default">$ret</span><span class="keyword">[] = </span><span class="default">$v </span><span class="keyword">. </span><span class="default">$k</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$ret</span><span class="keyword">, </span><span class="default">count</span><span class="keyword">(</span><span class="default">$ret</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="string">'and'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ret</span><span class="keyword">[] = </span><span class="string">'ago.'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">join</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">, </span><span class="default">$ret</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; <br />
</span><span class="default">$nowtime </span><span class="keyword">= </span><span class="default">time</span><span class="keyword">();<br />
</span><span class="default">$oldtime </span><span class="keyword">= </span><span class="default">1335939007</span><span class="keyword">;<br />
<br />
echo </span><span class="string">"time_elapsed_A: "</span><span class="keyword">.</span><span class="default">time_elapsed_A</span><span class="keyword">(</span><span class="default">$nowtime</span><span class="keyword">-</span><span class="default">$oldtime</span><span class="keyword">).</span><span class="string">"\n"</span><span class="keyword">;<br />
echo </span><span class="string">"time_elapsed_B: "</span><span class="keyword">.</span><span class="default">time_elapsed_B</span><span class="keyword">(</span><span class="default">$nowtime</span><span class="keyword">-</span><span class="default">$oldtime</span><span class="keyword">).</span><span class="string">"\n"</span><span class="keyword">;<br />
<br />
</span><span class="comment">/** Output:<br />
time_elapsed_A: 6d 15h 48m 19s<br />
time_elapsed_B: 6 days 15 hours 48 minutes and 19 seconds ago.<br />
**/<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107092""></a>
  <div class="note">
   <strong class="user">tav</strong>
   <a href="#107092" class="date">06-Jan-2012 04:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Calculates the difference between $start and $s, returns a formatted string Xd Yh Zm As, e.g. 15d 23h 54m 31s. Empty sections will be stripped, returning 12d 4s, not 12d 0h 0m 4s.<br />
<br />
Argument order (begin date, end date) doesn't matter.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">time_diff_conv</span><span class="keyword">(</span><span class="default">$start</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$t </span><span class="keyword">= array( </span><span class="comment">//suffixes<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'d' </span><span class="keyword">=&gt; </span><span class="default">86400</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'h' </span><span class="keyword">=&gt; </span><span class="default">3600</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'m' </span><span class="keyword">=&gt; </span><span class="default">60</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; );<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">abs</span><span class="keyword">(</span><span class="default">$s </span><span class="keyword">- </span><span class="default">$start</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$t </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; &amp;</span><span class="default">$val</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $</span><span class="default">$key </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">/</span><span class="default">$val</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$s </span><span class="keyword">-= ($</span><span class="default">$key</span><span class="keyword">*</span><span class="default">$val</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$string </span><span class="keyword">.= ($</span><span class="default">$key</span><span class="keyword">==</span><span class="default">0</span><span class="keyword">) ? </span><span class="string">'' </span><span class="keyword">: $</span><span class="default">$key </span><span class="keyword">. </span><span class="string">"</span><span class="default">$key</span><span class="string"> "</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$string </span><span class="keyword">. </span><span class="default">$s</span><span class="keyword">. </span><span class="string">'s'</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106160""></a>
  <div class="note">
   <strong class="user">instantcarma2000 at yahoo dot se</strong>
   <a href="#106160" class="date">14-Oct-2011 02:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a very basic and simple function to display either min -OR- hrs and min -OR- days and hrs -OR- days depending on how many seconds are given.
<br />

<br />
Example use:
<br />

<br />
<span class="default">&lt;?php
<br />
$td </span><span class="keyword">= </span><span class="default">time_diff</span><span class="keyword">(</span><span class="default">$timestamp1</span><span class="keyword">-</span><span class="default">$timestamp2</span><span class="keyword">); </span><span class="comment">// has to be a positive result
<br />
</span><span class="default">$td </span><span class="keyword">.= (</span><span class="default">$td</span><span class="keyword">==</span><span class="string">"now"</span><span class="keyword">)? </span><span class="string">""</span><span class="keyword">:</span><span class="string">" ago"</span><span class="keyword">; </span><span class="comment">// in this example "ago"
<br />
</span><span class="keyword">echo </span><span class="default">$td</span><span class="keyword">;
<br />

<br />
function </span><span class="default">time_diff</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">){
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$m</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$hr</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$d</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$td</span><span class="keyword">=</span><span class="string">"now"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$s</span><span class="keyword">&gt;</span><span class="default">59</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$m </span><span class="keyword">= (int)(</span><span class="default">$s</span><span class="keyword">/</span><span class="default">60</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">$s</span><span class="keyword">-(</span><span class="default">$m</span><span class="keyword">*</span><span class="default">60</span><span class="keyword">); </span><span class="comment">// sec left over
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$td </span><span class="keyword">= </span><span class="string">"</span><span class="default">$m</span><span class="string"> min"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$m</span><span class="keyword">&gt;</span><span class="default">59</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$hr </span><span class="keyword">= (int)(</span><span class="default">$m</span><span class="keyword">/</span><span class="default">60</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$m </span><span class="keyword">= </span><span class="default">$m</span><span class="keyword">-(</span><span class="default">$hr</span><span class="keyword">*</span><span class="default">60</span><span class="keyword">); </span><span class="comment">// min left over
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$td </span><span class="keyword">= </span><span class="string">"</span><span class="default">$hr</span><span class="string"> hr"</span><span class="keyword">; if(</span><span class="default">$hr</span><span class="keyword">&gt;</span><span class="default">1</span><span class="keyword">) </span><span class="default">$td </span><span class="keyword">.= </span><span class="string">"s"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$m</span><span class="keyword">&gt;</span><span class="default">0</span><span class="keyword">) </span><span class="default">$td </span><span class="keyword">.= </span><span class="string">", </span><span class="default">$m</span><span class="string"> min"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$hr</span><span class="keyword">&gt;</span><span class="default">23</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$d </span><span class="keyword">= (int)(</span><span class="default">$hr</span><span class="keyword">/</span><span class="default">24</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$hr </span><span class="keyword">= </span><span class="default">$hr</span><span class="keyword">-(</span><span class="default">$d</span><span class="keyword">*</span><span class="default">24</span><span class="keyword">); </span><span class="comment">// hr left over
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$td </span><span class="keyword">= </span><span class="string">"</span><span class="default">$d</span><span class="string"> day"</span><span class="keyword">; if(</span><span class="default">$d</span><span class="keyword">&gt;</span><span class="default">1</span><span class="keyword">) </span><span class="default">$td </span><span class="keyword">.= </span><span class="string">"s"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$d</span><span class="keyword">&lt;</span><span class="default">3</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$hr</span><span class="keyword">&gt;</span><span class="default">0</span><span class="keyword">) </span><span class="default">$td </span><span class="keyword">.= </span><span class="string">", </span><span class="default">$hr</span><span class="string"> hr"</span><span class="keyword">; if(</span><span class="default">$hr</span><span class="keyword">&gt;</span><span class="default">1</span><span class="keyword">) </span><span class="default">$td </span><span class="keyword">.= </span><span class="string">"s"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$td</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105257""></a>
  <div class="note">
   <strong class="user">dev dot ivangc at gmail dot com</strong>
   <a href="#105257" class="date">05-Aug-2011 03:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here a class extension to get the a datetime in the "X time ago" format easily.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Cokidoo_DateTime </span><span class="keyword">extends </span><span class="default">DateTime </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; protected </span><span class="default">$strings </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'y' </span><span class="keyword">=&gt; array(</span><span class="string">'1 year ago'</span><span class="keyword">, </span><span class="string">'%d years ago'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'m' </span><span class="keyword">=&gt; array(</span><span class="string">'1 month ago'</span><span class="keyword">, </span><span class="string">'%d months ago'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'d' </span><span class="keyword">=&gt; array(</span><span class="string">'1 day ago'</span><span class="keyword">, </span><span class="string">'%d days ago'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'h' </span><span class="keyword">=&gt; array(</span><span class="string">'1 hour ago'</span><span class="keyword">, </span><span class="string">'%d hours ago'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'i' </span><span class="keyword">=&gt; array(</span><span class="string">'1 minute ago'</span><span class="keyword">, </span><span class="string">'%d minutes ago'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'s' </span><span class="keyword">=&gt; array(</span><span class="string">'now'</span><span class="keyword">, </span><span class="string">'%d secons ago'</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; );<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Returns the difference from the current time in the format X time ago<br />
&nbsp;&nbsp; &nbsp; * @return string<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">__toString</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$now </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">'now'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$diff </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">diff</span><span class="keyword">(</span><span class="default">$now</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">strings </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( (</span><span class="default">$text </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">getDiffText</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$diff</span><span class="keyword">)) ){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$text</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Try to construct the time diff text with the specified interval key<br />
&nbsp;&nbsp; &nbsp; * @param string $intervalKey A value of: [y,m,d,h,i,s]<br />
&nbsp;&nbsp; &nbsp; * @param DateInterval $diff<br />
&nbsp;&nbsp; &nbsp; * @return string|null<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">protected function </span><span class="default">getDiffText</span><span class="keyword">(</span><span class="default">$intervalKey</span><span class="keyword">, </span><span class="default">$diff</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pluralKey </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">$diff</span><span class="keyword">-&gt;</span><span class="default">$intervalKey</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$value </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$value </span><span class="keyword">&lt; </span><span class="default">2</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pluralKey </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">sprintf</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">strings</span><span class="keyword">[</span><span class="default">$intervalKey</span><span class="keyword">][</span><span class="default">$pluralKey</span><span class="keyword">], </span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
How to use:<br />
<span class="default">&lt;?php<br />
$date </span><span class="keyword">= new </span><span class="default">Cokidoo_Datetime</span><span class="keyword">(</span><span class="string">'2011-01-01'</span><span class="keyword">);<br />
echo </span><span class="default">$date</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102881""></a>
  <div class="note">
   <strong class="user">residualenvy at gmail dot com</strong>
   <a href="#102881" class="date">11-Mar-2011 03:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
My take on a function to find the differences between a timestamp and current time.
<br />

<br />
Format: findTime($sometime['stamp'], '%d Days, %h Hours, %m Minutes');
<br />

<br />
Always use plural it will auto correct on singular results.&nbsp; You don't have to include all %d,%m,%h you may include only one.&nbsp; To get Total Hours remaining(including days) use %ho.&nbsp; To get Total Minutes remaining(including hours and days) use %mo.&nbsp; Take a look at the format I assumed to make any changes.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">findTime</span><span class="keyword">(</span><span class="default">$timestamp</span><span class="keyword">, </span><span class="default">$format</span><span class="keyword">) {&nbsp; &nbsp; &nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$difference </span><span class="keyword">= </span><span class="default">$timestamp </span><span class="keyword">- </span><span class="default">time</span><span class="keyword">();
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$difference </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else{
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$min_only </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">floor</span><span class="keyword">(</span><span class="default">$difference </span><span class="keyword">/ </span><span class="default">60</span><span class="keyword">));
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$hour_only </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">floor</span><span class="keyword">(</span><span class="default">$difference </span><span class="keyword">/ </span><span class="default">3600</span><span class="keyword">));
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$days </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">floor</span><span class="keyword">(</span><span class="default">$difference </span><span class="keyword">/ </span><span class="default">86400</span><span class="keyword">));
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$difference </span><span class="keyword">= </span><span class="default">$difference </span><span class="keyword">% </span><span class="default">86400</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$hours </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">floor</span><span class="keyword">(</span><span class="default">$difference </span><span class="keyword">/ </span><span class="default">3600</span><span class="keyword">));
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$difference </span><span class="keyword">= </span><span class="default">$difference </span><span class="keyword">% </span><span class="default">3600</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$minutes </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">floor</span><span class="keyword">(</span><span class="default">$difference </span><span class="keyword">/ </span><span class="default">60</span><span class="keyword">));
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$minutes </span><span class="keyword">== </span><span class="default">60</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$hours </span><span class="keyword">= </span><span class="default">$hours</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$minutes </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$days </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$format </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'Days'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="default">$format</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$format </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'Ds'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="default">$format</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$format </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%d'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$format</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$hours </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$format </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'Hours'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="default">$format</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$format </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'Hs'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="default">$format</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$format </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%h'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$format</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$minutes </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$format </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'Minutes'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="default">$format</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$format </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'Mins'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="default">$format</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$format </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'Ms'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="default">$format</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$format </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%m'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$format</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$format </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'?,'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$format</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$format </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'?:'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$format</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$format </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'?'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$format</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$timeLeft </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%d'</span><span class="keyword">, </span><span class="default">number_format</span><span class="keyword">(</span><span class="default">$days</span><span class="keyword">), </span><span class="default">$format</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$timeLeft </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%ho'</span><span class="keyword">, </span><span class="default">number_format</span><span class="keyword">(</span><span class="default">$hour_only</span><span class="keyword">), </span><span class="default">$timeLeft</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$timeLeft </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%mo'</span><span class="keyword">, </span><span class="default">number_format</span><span class="keyword">(</span><span class="default">$min_only</span><span class="keyword">), </span><span class="default">$timeLeft</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$timeLeft </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%h'</span><span class="keyword">, </span><span class="default">number_format</span><span class="keyword">(</span><span class="default">$hours</span><span class="keyword">), </span><span class="default">$timeLeft</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$timeLeft </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%m'</span><span class="keyword">, </span><span class="default">number_format</span><span class="keyword">(</span><span class="default">$minutes</span><span class="keyword">), </span><span class="default">$timeLeft</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$days </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$timeLeft </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'Days'</span><span class="keyword">, </span><span class="string">'Day'</span><span class="keyword">, </span><span class="default">$timeLeft</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$timeLeft </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'Ds'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="default">$timeLeft</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$hours </span><span class="keyword">== </span><span class="default">1 </span><span class="keyword">|| </span><span class="default">$hour_only </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$timeLeft </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'Hours'</span><span class="keyword">, </span><span class="string">'Hour'</span><span class="keyword">, </span><span class="default">$timeLeft</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$timeLeft </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'Hs'</span><span class="keyword">, </span><span class="string">'H'</span><span class="keyword">, </span><span class="default">$timeLeft</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$minutes </span><span class="keyword">== </span><span class="default">1 </span><span class="keyword">|| </span><span class="default">$min_only </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$timeLeft </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'Minutes'</span><span class="keyword">, </span><span class="string">'Minute'</span><span class="keyword">, </span><span class="default">$timeLeft</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$timeLeft </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'Mins'</span><span class="keyword">, </span><span class="string">'Min'</span><span class="keyword">, </span><span class="default">$timeLeft</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$timeLeft </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'Ms'</span><span class="keyword">, </span><span class="string">'M'</span><span class="keyword">, </span><span class="default">$timeLeft</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$timeLeft</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102632""></a>
  <div class="note">
   <strong class="user">php/hotblocks/nl</strong>
   <a href="#102632" class="date">25-Feb-2011 02:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The easiest way to get the gmtime is to use gmdate():<br />
<br />
<span class="default">&lt;?php<br />
$gmtime </span><span class="keyword">= (int)</span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">'U'</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102595""></a>
  <div class="note">
   <strong class="user">Yi</strong>
   <a href="#102595" class="date">23-Feb-2011 08:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A method return GMT time (gmttime):
<br />

<br />
<span class="default">&lt;?php
<br />
$gmtimenow </span><span class="keyword">= </span><span class="default">time</span><span class="keyword">() - (int)</span><span class="default">substr</span><span class="keyword">(</span><span class="default">date</span><span class="keyword">(</span><span class="string">'O'</span><span class="keyword">),</span><span class="default">0</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">)*</span><span class="default">60</span><span class="keyword">*</span><span class="default">60</span><span class="keyword">;
<br />
echo </span><span class="default">$gmtimenow </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
it convert current time to GMT based on time zone offset.
<br />

<br />
by frank.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102017""></a>
  <div class="note">
   <strong class="user">karls_post at hotmail dot com</strong>
   <a href="#102017" class="date">23-Jan-2011 03:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To accurately calculate the difference between the current time and a time in the future I use the following.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">time_difference</span><span class="keyword">(</span><span class="default">$endtime</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$days</span><span class="keyword">= (</span><span class="default">date</span><span class="keyword">(</span><span class="string">"j"</span><span class="keyword">,</span><span class="default">$endtime</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$months </span><span class="keyword">=(</span><span class="default">date</span><span class="keyword">(</span><span class="string">"n"</span><span class="keyword">,</span><span class="default">$endtime</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$years </span><span class="keyword">=(</span><span class="default">date</span><span class="keyword">(</span><span class="string">"Y"</span><span class="keyword">,</span><span class="default">$endtime</span><span class="keyword">)-</span><span class="default">1970</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$hours </span><span class="keyword">=</span><span class="default">date</span><span class="keyword">(</span><span class="string">"G"</span><span class="keyword">,</span><span class="default">$endtime</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$mins </span><span class="keyword">=</span><span class="default">date</span><span class="keyword">(</span><span class="string">"i"</span><span class="keyword">,</span><span class="default">$endtime</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$secs </span><span class="keyword">=</span><span class="default">date</span><span class="keyword">(</span><span class="string">"s"</span><span class="keyword">,</span><span class="default">$endtime</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$diff</span><span class="keyword">=</span><span class="string">"'day': "</span><span class="keyword">.</span><span class="default">$days</span><span class="keyword">.</span><span class="string">",'month': "</span><span class="keyword">.</span><span class="default">$months</span><span class="keyword">.</span><span class="string">",'year': "</span><span class="keyword">.</span><span class="default">$years</span><span class="keyword">.</span><span class="string">",'hour': "</span><span class="keyword">.</span><span class="default">$hours</span><span class="keyword">.</span><span class="string">",'min': "</span><span class="keyword">.</span><span class="default">$mins</span><span class="keyword">.</span><span class="string">",'sec': "</span><span class="keyword">.</span><span class="default">$secs</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$diff</span><span class="keyword">;<br />
}&nbsp; &nbsp; <br />
</span><span class="default">$end_time </span><span class="keyword">= </span><span class="default">$future_date </span><span class="keyword">- </span><span class="default">time</span><span class="keyword">();<br />
</span><span class="default">$difference </span><span class="keyword">= </span><span class="default">time_difference</span><span class="keyword">(</span><span class="default">$end_time</span><span class="keyword">);<br />
echo </span><span class="default">$difference</span><span class="keyword">;<br />
<br />
</span><span class="comment">//sample output<br />
</span><span class="string">'day'</span><span class="keyword">: </span><span class="default">2</span><span class="keyword">,</span><span class="string">'month'</span><span class="keyword">: </span><span class="default">1</span><span class="keyword">,</span><span class="string">'year'</span><span class="keyword">: </span><span class="default">0</span><span class="keyword">,</span><span class="string">'hour'</span><span class="keyword">: </span><span class="default">2</span><span class="keyword">,</span><span class="string">'min'</span><span class="keyword">: </span><span class="default">05</span><span class="keyword">,</span><span class="string">'sec'</span><span class="keyword">: </span><span class="default">41<br />
<br />
?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100220""></a>
  <div class="note">
   <strong class="user">Timo K</strong>
   <a href="#100220" class="date">02-Oct-2010 05:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The documentation should have this info. The function time() returns always timestamp that is timezone independent (=UTC).
<br />

<br />
<span class="default">&lt;?php
<br />
date_default_timezone_set</span><span class="keyword">(</span><span class="string">"UTC"</span><span class="keyword">); 
<br />
echo </span><span class="string">"UTC:"</span><span class="keyword">.</span><span class="default">time</span><span class="keyword">();
<br />
echo </span><span class="string">"&lt;br&gt;"</span><span class="keyword">;
<br />

<br />
</span><span class="default">date_default_timezone_set</span><span class="keyword">(</span><span class="string">"Europe/Helsinki"</span><span class="keyword">); 
<br />
echo </span><span class="string">"Europe/Helsinki:"</span><span class="keyword">.</span><span class="default">time</span><span class="keyword">();
<br />
echo </span><span class="string">"&lt;br&gt;"</span><span class="keyword">;
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Local time as string can be get by strftime() and local timestamp (if ever needed) by mktime().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99610""></a>
  <div class="note">
   <strong class="user">johan dot lindskog at humlab dot umu dot se</strong>
   <a href="#99610" class="date">26-Aug-2010 06:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed to convert between Unix timestamps and Windows/AD timestamps, so I wrote a pair of simple functions for it.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">unix_time_to_win_time</span><span class="keyword">(</span><span class="default">$unix_time</span><span class="keyword">) {<br />
&nbsp; </span><span class="comment">//add the seconds between 1601-01-01 and 1970-01-01 and make it 100-nanosecond precision<br />
&nbsp; </span><span class="default">$win_time </span><span class="keyword">= (</span><span class="default">$unix_time </span><span class="keyword">+ </span><span class="default">11644477200</span><span class="keyword">) * </span><span class="default">10000000</span><span class="keyword">;<br />
&nbsp; return </span><span class="default">$win_time</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">win_time_to_unix_time</span><span class="keyword">(</span><span class="default">$win_time</span><span class="keyword">) {<br />
&nbsp; </span><span class="comment">//round the win timestamp down to seconds and remove the seconds between 1601-01-01 and 1970-01-01<br />
&nbsp; </span><span class="default">$unix_time </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">(</span><span class="default">$win_time </span><span class="keyword">/ </span><span class="default">10000000</span><span class="keyword">) - </span><span class="default">11644477200</span><span class="keyword">;<br />
&nbsp; return </span><span class="default">$unix_time</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99393""></a>
  <div class="note">
   <strong class="user">John Galt</strong>
   <a href="#99393" class="date">14-Aug-2010 03:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is another function to calculate the difference between two times and output it in a relative format. This one, however, combines various units. In other words, it will return "3 days, 2 hours, 6 minutes, and 2 seconds ago" instead of "3 days ago."<br />
<br />
Please bear in mind that it is intended for times that are very close together. It will not be accurate for calculating dates more than a month apart. This is because one of the units it relies on is "weeks," which do not correspond directly with months. What I'm trying to get across is, the program assumes that a month is precisely 4 weeks long, i.e. 28 days. This also means that a "year" according to this function is 336 days.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;</span><span class="keyword">function </span><span class="default">rel_time</span><span class="keyword">(</span><span class="default">$from</span><span class="keyword">, </span><span class="default">$to </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">)<br />
&nbsp;{<br />
&nbsp; </span><span class="default">$to </span><span class="keyword">= ((</span><span class="default">$to </span><span class="keyword">=== </span><span class="default">null</span><span class="keyword">) ? (</span><span class="default">time</span><span class="keyword">()) : (</span><span class="default">$to</span><span class="keyword">));<br />
&nbsp; </span><span class="default">$to </span><span class="keyword">= ((</span><span class="default">is_int</span><span class="keyword">(</span><span class="default">$to</span><span class="keyword">)) ? (</span><span class="default">$to</span><span class="keyword">) : (</span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$to</span><span class="keyword">)));<br />
&nbsp; </span><span class="default">$from </span><span class="keyword">= ((</span><span class="default">is_int</span><span class="keyword">(</span><span class="default">$from</span><span class="keyword">)) ? (</span><span class="default">$from</span><span class="keyword">) : (</span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$from</span><span class="keyword">)));<br />
<br />
&nbsp; </span><span class="default">$units </span><span class="keyword">= array<br />
&nbsp; (<br />
&nbsp;&nbsp; </span><span class="string">"year"&nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="default">29030400</span><span class="keyword">, </span><span class="comment">// seconds in a year&nbsp;&nbsp; (12 months)<br />
&nbsp;&nbsp; </span><span class="string">"month"&nbsp; </span><span class="keyword">=&gt; </span><span class="default">2419200</span><span class="keyword">,&nbsp; </span><span class="comment">// seconds in a month&nbsp; (4 weeks)<br />
&nbsp;&nbsp; </span><span class="string">"week"&nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="default">604800</span><span class="keyword">,&nbsp;&nbsp; </span><span class="comment">// seconds in a week&nbsp;&nbsp; (7 days)<br />
&nbsp;&nbsp; </span><span class="string">"day"&nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">86400</span><span class="keyword">,&nbsp; &nbsp; </span><span class="comment">// seconds in a day&nbsp; &nbsp; (24 hours)<br />
&nbsp;&nbsp; </span><span class="string">"hour"&nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="default">3600</span><span class="keyword">,&nbsp; &nbsp;&nbsp; </span><span class="comment">// seconds in an hour&nbsp; (60 minutes)<br />
&nbsp;&nbsp; </span><span class="string">"minute" </span><span class="keyword">=&gt; </span><span class="default">60</span><span class="keyword">,&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// seconds in a minute (60 seconds)<br />
&nbsp;&nbsp; </span><span class="string">"second" </span><span class="keyword">=&gt; </span><span class="default">1&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// 1 second<br />
&nbsp; </span><span class="keyword">);<br />
<br />
&nbsp; </span><span class="default">$diff </span><span class="keyword">= </span><span class="default">abs</span><span class="keyword">(</span><span class="default">$from </span><span class="keyword">- </span><span class="default">$to</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$suffix </span><span class="keyword">= ((</span><span class="default">$from </span><span class="keyword">&gt; </span><span class="default">$to</span><span class="keyword">) ? (</span><span class="string">"from now"</span><span class="keyword">) : (</span><span class="string">"ago"</span><span class="keyword">));<br />
<br />
&nbsp; foreach(</span><span class="default">$units </span><span class="keyword">as </span><span class="default">$unit </span><span class="keyword">=&gt; </span><span class="default">$mult</span><span class="keyword">)<br />
&nbsp;&nbsp; if(</span><span class="default">$diff </span><span class="keyword">&gt;= </span><span class="default">$mult</span><span class="keyword">)<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$and </span><span class="keyword">= ((</span><span class="default">$mult </span><span class="keyword">!= </span><span class="default">1</span><span class="keyword">) ? (</span><span class="string">""</span><span class="keyword">) : (</span><span class="string">"and "</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$output </span><span class="keyword">.= </span><span class="string">", "</span><span class="keyword">.</span><span class="default">$and</span><span class="keyword">.</span><span class="default">intval</span><span class="keyword">(</span><span class="default">$diff </span><span class="keyword">/ </span><span class="default">$mult</span><span class="keyword">).</span><span class="string">" "</span><span class="keyword">.</span><span class="default">$unit</span><span class="keyword">.((</span><span class="default">intval</span><span class="keyword">(</span><span class="default">$diff </span><span class="keyword">/ </span><span class="default">$mult</span><span class="keyword">) == </span><span class="default">1</span><span class="keyword">) ? (</span><span class="string">""</span><span class="keyword">) : (</span><span class="string">"s"</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$diff </span><span class="keyword">-= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$diff </span><span class="keyword">/ </span><span class="default">$mult</span><span class="keyword">) * </span><span class="default">$mult</span><span class="keyword">;<br />
&nbsp;&nbsp; }<br />
&nbsp; </span><span class="default">$output </span><span class="keyword">.= </span><span class="string">" "</span><span class="keyword">.</span><span class="default">$suffix</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$output </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$output</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="string">", "</span><span class="keyword">));<br />
<br />
&nbsp; return </span><span class="default">$output</span><span class="keyword">;<br />
&nbsp;}<br />
</span><span class="default">?&gt;<br />
</span><br />
The function rel_time() accepts two parameters: $from and $to. For best results, provide them as UNIX timestamps (derived from PHP's time() function). They also accept formats supported by strtotime(). $to is an optional argument and defaults to the current time.<br />
<br />
The function will calculate the difference between $from and $to. If $from occurs after $to, the function will substitue "ago" with "from now."<br />
<br />
Example usage:<br />
<span class="default">&lt;?php<br />
&nbsp;</span><span class="keyword">echo </span><span class="default">rel_time</span><span class="keyword">(</span><span class="string">"September 2, 2010 4:20 PM"</span><span class="keyword">);<br />
&nbsp;</span><span class="comment">// returns "2 weeks, 4 days, 23 hours, 25 minutes, and 3 seconds from now"<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96097""></a>
  <div class="note">
   <strong class="user">nickr at visuality dot com</strong>
   <a href="#96097" class="date">08-Feb-2010 01:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a version for the difference code that displays "ago" code.<br />
<br />
It does use some precision after the time difference is longer than a day. ( ie days are more than 60 * 60 * 24 hours long )<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">ago</span><span class="keyword">(</span><span class="default">$datefrom</span><span class="keyword">,</span><span class="default">$dateto</span><span class="keyword">=-</span><span class="default">1</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Defaults and assume if 0 is passed in that<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // its an error rather than the epoch<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$datefrom</span><span class="keyword">==</span><span class="default">0</span><span class="keyword">) { return </span><span class="string">"A long time ago"</span><span class="keyword">; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$dateto</span><span class="keyword">==-</span><span class="default">1</span><span class="keyword">) { </span><span class="default">$dateto </span><span class="keyword">= </span><span class="default">time</span><span class="keyword">(); }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Make the entered date into Unix timestamp from MySQL datetime field<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$datefrom </span><span class="keyword">= </span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$datefrom</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Calculate the difference in seconds betweeen<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // the two timestamps<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$difference </span><span class="keyword">= </span><span class="default">$dateto </span><span class="keyword">- </span><span class="default">$datefrom</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Based on the interval, determine the<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // number of units between the two dates<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // From this point on, you would be hard<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // pushed telling the difference between<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // this function and DateDiff. If the $datediff<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // returned is 1, be sure to return the singular<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // of the unit, e.g. 'day' rather 'days'<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">switch(</span><span class="default">true</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If difference is less than 60 seconds,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // seconds is a good interval of choice<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">case(</span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">'-1 min'</span><span class="keyword">, </span><span class="default">$dateto</span><span class="keyword">) &lt; </span><span class="default">$datefrom</span><span class="keyword">):<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$datediff </span><span class="keyword">= </span><span class="default">$difference</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$res </span><span class="keyword">= (</span><span class="default">$datediff</span><span class="keyword">==</span><span class="default">1</span><span class="keyword">) ? </span><span class="default">$datediff</span><span class="keyword">.</span><span class="string">' second ago' </span><span class="keyword">: </span><span class="default">$datediff</span><span class="keyword">.</span><span class="string">' seconds ago'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If difference is between 60 seconds and<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // 60 minutes, minutes is a good interval<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">case(</span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">'-1 hour'</span><span class="keyword">, </span><span class="default">$dateto</span><span class="keyword">) &lt; </span><span class="default">$datefrom</span><span class="keyword">):<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$datediff </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$difference </span><span class="keyword">/ </span><span class="default">60</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$res </span><span class="keyword">= (</span><span class="default">$datediff</span><span class="keyword">==</span><span class="default">1</span><span class="keyword">) ? </span><span class="default">$datediff</span><span class="keyword">.</span><span class="string">' minute ago' </span><span class="keyword">: </span><span class="default">$datediff</span><span class="keyword">.</span><span class="string">' minutes ago'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If difference is between 1 hour and 24 hours<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // hours is a good interval<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">case(</span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">'-1 day'</span><span class="keyword">, </span><span class="default">$dateto</span><span class="keyword">) &lt; </span><span class="default">$datefrom</span><span class="keyword">):<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$datediff </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$difference </span><span class="keyword">/ </span><span class="default">60 </span><span class="keyword">/ </span><span class="default">60</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$res </span><span class="keyword">= (</span><span class="default">$datediff</span><span class="keyword">==</span><span class="default">1</span><span class="keyword">) ? </span><span class="default">$datediff</span><span class="keyword">.</span><span class="string">' hour ago' </span><span class="keyword">: </span><span class="default">$datediff</span><span class="keyword">.</span><span class="string">' hours ago'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If difference is between 1 day and 7 days<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // days is a good interval&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">case(</span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">'-1 week'</span><span class="keyword">, </span><span class="default">$dateto</span><span class="keyword">) &lt; </span><span class="default">$datefrom</span><span class="keyword">):<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$day_difference </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while (</span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">'-'</span><span class="keyword">.</span><span class="default">$day_difference</span><span class="keyword">.</span><span class="string">' day'</span><span class="keyword">, </span><span class="default">$dateto</span><span class="keyword">) &gt;= </span><span class="default">$datefrom</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$day_difference</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$datediff </span><span class="keyword">= </span><span class="default">$day_difference</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$res </span><span class="keyword">= (</span><span class="default">$datediff</span><span class="keyword">==</span><span class="default">1</span><span class="keyword">) ? </span><span class="string">'yesterday' </span><span class="keyword">: </span><span class="default">$datediff</span><span class="keyword">.</span><span class="string">' days ago'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If difference is between 1 week and 30 days<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // weeks is a good interval&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">case(</span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">'-1 month'</span><span class="keyword">, </span><span class="default">$dateto</span><span class="keyword">) &lt; </span><span class="default">$datefrom</span><span class="keyword">):<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$week_difference </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while (</span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">'-'</span><span class="keyword">.</span><span class="default">$week_difference</span><span class="keyword">.</span><span class="string">' week'</span><span class="keyword">, </span><span class="default">$dateto</span><span class="keyword">) &gt;= </span><span class="default">$datefrom</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$week_difference</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$datediff </span><span class="keyword">= </span><span class="default">$week_difference</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$res </span><span class="keyword">= (</span><span class="default">$datediff</span><span class="keyword">==</span><span class="default">1</span><span class="keyword">) ? </span><span class="string">'last week' </span><span class="keyword">: </span><span class="default">$datediff</span><span class="keyword">.</span><span class="string">' weeks ago'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If difference is between 30 days and 365 days<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // months is a good interval, again, the same thing<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // applies, if the 29th February happens to exist<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // between your 2 dates, the function will return<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // the 'incorrect' value for a day<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">case(</span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">'-1 year'</span><span class="keyword">, </span><span class="default">$dateto</span><span class="keyword">) &lt; </span><span class="default">$datefrom</span><span class="keyword">):<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$months_difference </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while (</span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">'-'</span><span class="keyword">.</span><span class="default">$months_difference</span><span class="keyword">.</span><span class="string">' month'</span><span class="keyword">, </span><span class="default">$dateto</span><span class="keyword">) &gt;= </span><span class="default">$datefrom</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$months_difference</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$datediff </span><span class="keyword">= </span><span class="default">$months_difference</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$res </span><span class="keyword">= (</span><span class="default">$datediff</span><span class="keyword">==</span><span class="default">1</span><span class="keyword">) ? </span><span class="default">$datediff</span><span class="keyword">.</span><span class="string">' month ago' </span><span class="keyword">: </span><span class="default">$datediff</span><span class="keyword">.</span><span class="string">' months ago'</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If difference is greater than or equal to 365<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // days, return year. This will be incorrect if<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // for example, you call the function on the 28th April<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // 2008 passing in 29th April 2007. It will return<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // 1 year ago when in actual fact (yawn!) not quite<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // a year has gone by<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">case(</span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">'-1 year'</span><span class="keyword">, </span><span class="default">$dateto</span><span class="keyword">) &gt;= </span><span class="default">$datefrom</span><span class="keyword">):<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$year_difference </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while (</span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">'-'</span><span class="keyword">.</span><span class="default">$year_difference</span><span class="keyword">.</span><span class="string">' year'</span><span class="keyword">, </span><span class="default">$dateto</span><span class="keyword">) &gt;= </span><span class="default">$datefrom</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$year_difference</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$datediff </span><span class="keyword">= </span><span class="default">$year_difference</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$res </span><span class="keyword">= (</span><span class="default">$datediff</span><span class="keyword">==</span><span class="default">1</span><span class="keyword">) ? </span><span class="default">$datediff</span><span class="keyword">.</span><span class="string">' year ago' </span><span class="keyword">: </span><span class="default">$datediff</span><span class="keyword">.</span><span class="string">' years ago'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$res</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89415""></a>
  <div class="note">
   <strong class="user">yasmary at gmail dot com</strong>
   <a href="#89415" class="date">06-Mar-2009 12:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A time difference function that outputs the time passed in facebook's style: 1 day ago, or 4 months ago. I took andrew dot macrobert at gmail dot com function and tweaked it a bit. On a strict enviroment it was throwing errors, plus I needed it to calculate the difference in time between a past date and a future date. <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">nicetime</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if(empty(</span><span class="default">$date</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">"No date provided"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$periods&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">= array(</span><span class="string">"second"</span><span class="keyword">, </span><span class="string">"minute"</span><span class="keyword">, </span><span class="string">"hour"</span><span class="keyword">, </span><span class="string">"day"</span><span class="keyword">, </span><span class="string">"week"</span><span class="keyword">, </span><span class="string">"month"</span><span class="keyword">, </span><span class="string">"year"</span><span class="keyword">, </span><span class="string">"decade"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$lengths&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">= array(</span><span class="string">"60"</span><span class="keyword">,</span><span class="string">"60"</span><span class="keyword">,</span><span class="string">"24"</span><span class="keyword">,</span><span class="string">"7"</span><span class="keyword">,</span><span class="string">"4.35"</span><span class="keyword">,</span><span class="string">"12"</span><span class="keyword">,</span><span class="string">"10"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$now&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">time</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$unix_date&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="comment">// check validity of date<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(empty(</span><span class="default">$unix_date</span><span class="keyword">)) {&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">"Bad date"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// is it future date or past date<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$now </span><span class="keyword">&gt; </span><span class="default">$unix_date</span><span class="keyword">) {&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$difference&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">$now </span><span class="keyword">- </span><span class="default">$unix_date</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tense&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="string">"ago"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$difference&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">$unix_date </span><span class="keyword">- </span><span class="default">$now</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tense&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="string">"from now"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$j </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$difference </span><span class="keyword">&gt;= </span><span class="default">$lengths</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">] &amp;&amp; </span><span class="default">$j </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$lengths</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">; </span><span class="default">$j</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$difference </span><span class="keyword">/= </span><span class="default">$lengths</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$difference </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">(</span><span class="default">$difference</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$difference </span><span class="keyword">!= </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$periods</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">].= </span><span class="string">"s"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="string">"</span><span class="default">$difference</span><span class="string"> </span><span class="default">$periods</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">]</span><span class="string"> </span><span class="keyword">{</span><span class="default">$tense</span><span class="keyword">}</span><span class="string">"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$date </span><span class="keyword">= </span><span class="string">"2009-03-04 17:45"</span><span class="keyword">;<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">nicetime</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">); </span><span class="comment">// 2 days ago<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88498""></a>
  <div class="note">
   <strong class="user">anon</strong>
   <a href="#88498" class="date">26-Jan-2009 05:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Below, a function to create TNG-style stardates, taking 2009 to start stardate 41000.0.&nbsp; In fact, the offset is trivial to adjust if you wish to begin from a different date.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">getStardate</span><span class="keyword">(</span><span class="default">void</span><span class="keyword">)<br />
{<br />
&nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">2000</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$seconds_per_stardate </span><span class="keyword">= </span><span class="default">31449.6</span><span class="keyword">; </span><span class="comment">// is the number of seconds in a year divided by 1000, for hopefully obvious reasons<br />
&nbsp; </span><span class="keyword">return </span><span class="default">time</span><span class="keyword">() / </span><span class="default">$seconds_per_stardate </span><span class="keyword">+ </span><span class="default">$offset</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Other series use less reliable stardate formats, which makes it difficult [read: nigh impossible] to create a function that converts a unix timestamp into a stardate.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85481""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#85481" class="date">01-Sep-2008 05:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A cleaner example (half the comparisons) of distanceOfTimeInWords() function below:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">public static function </span><span class="default">distanceOfTimeInWords</span><span class="keyword">(</span><span class="default">$fromTime</span><span class="keyword">, </span><span class="default">$toTime </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$showLessThanAMinute </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$distanceInSeconds </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">(</span><span class="default">abs</span><span class="keyword">(</span><span class="default">$toTime </span><span class="keyword">- </span><span class="default">$fromTime</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$distanceInMinutes </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">(</span><span class="default">$distanceInSeconds </span><span class="keyword">/ </span><span class="default">60</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$distanceInMinutes </span><span class="keyword">&lt;= </span><span class="default">1 </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( !</span><span class="default">$showLessThanAMinute </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return (</span><span class="default">$distanceInMinutes </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) ? </span><span class="string">'less than a minute' </span><span class="keyword">: </span><span class="string">'1 minute'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$distanceInSeconds </span><span class="keyword">&lt; </span><span class="default">5 </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'less than 5 seconds'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$distanceInSeconds </span><span class="keyword">&lt; </span><span class="default">10 </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'less than 10 seconds'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$distanceInSeconds </span><span class="keyword">&lt; </span><span class="default">20 </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'less than 20 seconds'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$distanceInSeconds </span><span class="keyword">&lt; </span><span class="default">40 </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'about half a minute'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$distanceInSeconds </span><span class="keyword">&lt; </span><span class="default">60 </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'less than a minute'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'1 minute'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$distanceInMinutes </span><span class="keyword">&lt; </span><span class="default">45 </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$distanceInMinutes </span><span class="keyword">. </span><span class="string">' minutes'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$distanceInMinutes </span><span class="keyword">&lt; </span><span class="default">90 </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'about 1 hour'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$distanceInMinutes </span><span class="keyword">&lt; </span><span class="default">1440 </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'about ' </span><span class="keyword">. </span><span class="default">round</span><span class="keyword">(</span><span class="default">floatval</span><span class="keyword">(</span><span class="default">$distanceInMinutes</span><span class="keyword">) / </span><span class="default">60.0</span><span class="keyword">) . </span><span class="string">' hours'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$distanceInMinutes </span><span class="keyword">&lt; </span><span class="default">2880 </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'1 day'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$distanceInMinutes </span><span class="keyword">&lt; </span><span class="default">43200 </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'about ' </span><span class="keyword">. </span><span class="default">round</span><span class="keyword">(</span><span class="default">floatval</span><span class="keyword">(</span><span class="default">$distanceInMinutes</span><span class="keyword">) / </span><span class="default">1440</span><span class="keyword">) . </span><span class="string">' days'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$distanceInMinutes </span><span class="keyword">&lt; </span><span class="default">86400 </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'about 1 month'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$distanceInMinutes </span><span class="keyword">&lt; </span><span class="default">525600 </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">round</span><span class="keyword">(</span><span class="default">floatval</span><span class="keyword">(</span><span class="default">$distanceInMinutes</span><span class="keyword">) / </span><span class="default">43200</span><span class="keyword">) . </span><span class="string">' months'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$distanceInMinutes </span><span class="keyword">&lt; </span><span class="default">1051199 </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'about 1 year'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'over ' </span><span class="keyword">. </span><span class="default">round</span><span class="keyword">(</span><span class="default">floatval</span><span class="keyword">(</span><span class="default">$distanceInMinutes</span><span class="keyword">) / </span><span class="default">525600</span><span class="keyword">) . </span><span class="string">' years'</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78119""></a>
  <div class="note">
   <strong class="user">Josh Abraham</strong>
   <a href="#78119" class="date">28-Sep-2007 07:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When dealing with the results of the time function, taking the modulus (remainder) is often a good way to find recurring information such as day of the week, week of the year, or month of the year. In the example given below of a firefighter's shift, you could do the following to simplify the code.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">whatShift</span><span class="keyword">() {<br />
<br />
&nbsp; </span><span class="default">$referencePoint </span><span class="keyword">= </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">7</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">9</span><span class="keyword">, </span><span class="default">11</span><span class="keyword">, </span><span class="default">2004</span><span class="keyword">);&nbsp;&nbsp; </span><span class="comment">// Sept 11, 2004 at 7AM started an A Shift.<br />
<br />
&nbsp; //This is the where we divide the current time since reference by the amount of time in all shifts<br />
&nbsp; //The result of this is the remainder.<br />
&nbsp; </span><span class="default">$sinceReference </span><span class="keyword">= (</span><span class="default">time</span><span class="keyword">() - </span><span class="default">$referencePoint</span><span class="keyword">) % (</span><span class="default">60 </span><span class="keyword">* </span><span class="default">60 </span><span class="keyword">* </span><span class="default">24 </span><span class="keyword">* </span><span class="default">3</span><span class="keyword">);<br />
<br />
&nbsp; </span><span class="comment">//The rest of the code can be basically the same so I shortened it here.<br />
&nbsp; </span><span class="keyword">if (</span><span class="default">$sinceReference </span><span class="keyword">&lt; </span><span class="default">60 </span><span class="keyword">* </span><span class="default">60 </span><span class="keyword">* </span><span class="default">25</span><span class="keyword">)&nbsp; </span><span class="default">$shift </span><span class="keyword">= </span><span class="string">"A"</span><span class="keyword">;<br />
&nbsp; elseif (</span><span class="default">$sinceReference </span><span class="keyword">&lt; </span><span class="default">60 </span><span class="keyword">* </span><span class="default">60 </span><span class="keyword">* </span><span class="default">49</span><span class="keyword">)&nbsp; </span><span class="default">$shift </span><span class="keyword">= </span><span class="string">"B"</span><span class="keyword">;<br />
&nbsp; else </span><span class="default">$shift </span><span class="keyword">= </span><span class="string">"C"</span><span class="keyword">;&nbsp; <br />
<br />
&nbsp; return </span><span class="default">$shift</span><span class="keyword">;<br />
<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77506""></a>
  <div class="note">
   <strong class="user">lsd25 at hotmail dot com</strong>
   <a href="#77506" class="date">01-Sep-2007 07:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I did an article on floating point time you can download from my website. Roun movements is the radial ounion movement and there is a quantum ounion movement as well, this code will generate the data for <a href="http://www.chronolabs.org.au/bin/roun-time-article.pdf which is an article on floating point time, I have created the calendar system as well for this time. It is compatible with other time and other solar systems with different revolutions of the planets as well as different quantumy stuff." rel="nofollow" target="_blank">http://www.chronolabs.org.au/bin/roun-time-article.pdf which is an article on floating point time, I have created the calendar system as well for this time. It is compatible with other time and other solar systems with different revolutions of the planets as well as different quantumy stuff.</a>
<br />

<br />
Thanks:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">if (</span><span class="default">$gmt</span><span class="keyword">&gt;</span><span class="default">0</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$gmt</span><span class="keyword">=-</span><span class="default">$gmt</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$gmt</span><span class="keyword">=</span><span class="default">$gmt</span><span class="keyword">+</span><span class="default">$gmt</span><span class="keyword">+</span><span class="default">$gmt</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ptime </span><span class="keyword">= </span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">'2008-05-11 10:05 AM'</span><span class="keyword">)+(</span><span class="default">60</span><span class="keyword">*</span><span class="default">60</span><span class="keyword">*</span><span class="default">gmt</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$weight </span><span class="keyword">= -</span><span class="default">20.22222222223</span><span class="keyword">+(</span><span class="default">1</span><span class="keyword">*</span><span class="default">gmt</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$roun_xa </span><span class="keyword">= (</span><span class="default">$tme</span><span class="keyword">)/(</span><span class="default">24</span><span class="keyword">*</span><span class="default">60</span><span class="keyword">*</span><span class="default">60</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$roun_ya </span><span class="keyword">= </span><span class="default">$ptime</span><span class="keyword">/(</span><span class="default">24</span><span class="keyword">*</span><span class="default">60</span><span class="keyword">*</span><span class="default">60</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$roun </span><span class="keyword">= ((</span><span class="default">$roun_xa </span><span class="keyword">-</span><span class="default">$roun_ya</span><span class="keyword">) - </span><span class="default">$weight</span><span class="keyword">)+(</span><span class="default">microtime</span><span class="keyword">/</span><span class="default">999999</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$nonedeficient </span><span class="keyword">= array(</span><span class="string">"seq1" </span><span class="keyword">=&gt; array(</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">),
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"seq2" </span><span class="keyword">=&gt; array(</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">),&nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"seq3" </span><span class="keyword">=&gt; array(</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">),
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"seq4" </span><span class="keyword">=&gt; array(</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">));
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$deficient </span><span class="keyword">=&nbsp; &nbsp;&nbsp; array(</span><span class="string">"seq1" </span><span class="keyword">=&gt; array(</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">),
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"seq2" </span><span class="keyword">=&gt; array(</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">),&nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"seq3" </span><span class="keyword">=&gt; array(</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">),
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"seq4" </span><span class="keyword">=&gt; array(</span><span class="default">30</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">));
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$monthusage </span><span class="keyword">= isset(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'deficienty'</span><span class="keyword">]) ? ${</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'deficienty'</span><span class="keyword">]} : </span><span class="default">$deficient</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$monthusage </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$item</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$item </span><span class="keyword">as </span><span class="default">$numdays</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ttl_num</span><span class="keyword">=</span><span class="default">$ttl_num</span><span class="keyword">+</span><span class="default">$numdays</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$revolutionsperyear </span><span class="keyword">= </span><span class="default">$ttl_num </span><span class="keyword">/ </span><span class="default">$i</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$numyears </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">((</span><span class="default">round</span><span class="keyword">(</span><span class="default">ceil</span><span class="keyword">(</span><span class="default">$roun</span><span class="keyword">)) / </span><span class="default">$revolutionsperyear</span><span class="keyword">),</span><span class="default">0</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$jtl </span><span class="keyword">= </span><span class="default">abs</span><span class="keyword">(</span><span class="default">abs</span><span class="keyword">(</span><span class="default">$roun</span><span class="keyword">) - </span><span class="default">ceil</span><span class="keyword">(</span><span class="default">$revolutionsperyear</span><span class="keyword">*(</span><span class="default">$numyears</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">)));
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; while(</span><span class="default">$month</span><span class="keyword">==</span><span class="default">0</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$day</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$monthusage </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$item</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$t</span><span class="keyword">++;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$u</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$item </span><span class="keyword">as </span><span class="default">$numdays</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$ii</span><span class="keyword">&lt;</span><span class="default">abs</span><span class="keyword">(</span><span class="default">$roun</span><span class="keyword">)){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$isbelow</span><span class="keyword">=</span><span class="default">true</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ii</span><span class="keyword">=</span><span class="default">$ii</span><span class="keyword">+</span><span class="default">$numdays</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$ii</span><span class="keyword">&gt;</span><span class="default">abs</span><span class="keyword">(</span><span class="default">$roun</span><span class="keyword">)){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$isabove</span><span class="keyword">=</span><span class="default">true</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$isbelow</span><span class="keyword">==</span><span class="default">true</span><span class="keyword">&amp;&amp;</span><span class="default">$isabove</span><span class="keyword">==</span><span class="default">true</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$daynum </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">((</span><span class="default">$ii</span><span class="keyword">-</span><span class="default">$numday</span><span class="keyword">)-</span><span class="default">abs</span><span class="keyword">(</span><span class="default">$roun</span><span class="keyword">));
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$month </span><span class="keyword">= </span><span class="default">$u</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$month</span><span class="keyword">++;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$isbelow</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$isabove</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nodaycount</span><span class="keyword">=</span><span class="default">true</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$nodaycount</span><span class="keyword">==</span><span class="default">false</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$day</span><span class="keyword">++;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$u</span><span class="keyword">++;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$timer </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$roun</span><span class="keyword">, </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$roun</span><span class="keyword">,</span><span class="string">'.'</span><span class="keyword">)+</span><span class="default">1</span><span class="keyword">,</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$roun</span><span class="keyword">)-</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$roun</span><span class="keyword">,</span><span class="string">'.'</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$roun_out</span><span class="keyword">= </span><span class="default">$numyears</span><span class="keyword">.</span><span class="string">'-'</span><span class="keyword">.</span><span class="default">$month</span><span class="keyword">.</span><span class="string">'-'</span><span class="keyword">.</span><span class="default">$daynum</span><span class="keyword">.</span><span class="string">' '</span><span class="keyword">.</span><span class="default">$day</span><span class="keyword">.</span><span class="string">".</span><span class="default">$timer</span><span class="string">"</span><span class="keyword">;
<br />

<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="67546""></a>
  <div class="note">
   <strong class="user">send at mail dot 2aj dot net</strong>
   <a href="#67546" class="date">08-Jun-2006 11:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to create a "rounded" time stamp, for example, to the nearest 15 minutes use this as a reference:<br />
<br />
<span class="default">&lt;?php<br />
$round_numerator </span><span class="keyword">= </span><span class="default">60 </span><span class="keyword">* </span><span class="default">15 </span><span class="comment">// 60 seconds per minute * 15 minutes equals 900 seconds<br />
//$round_numerator = 60 * 60 or to the nearest hour<br />
//$round_numerator = 60 * 60 * 24 or to the nearest day<br />
<br />
// Calculate time to nearest 15 minutes!<br />
</span><span class="default">$rounded_time </span><span class="keyword">= ( </span><span class="default">round </span><span class="keyword">( </span><span class="default">time</span><span class="keyword">() / </span><span class="default">$round_numerator </span><span class="keyword">) * </span><span class="default">$round_numerator </span><span class="keyword">);<br />
<br />
</span><span class="comment">//If it was 12:40 this would return the timestamp for 12:45;<br />
//3:04, 3:00; etc. <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="32487""></a>
  <div class="note">
   <strong class="user">mayank_arya at hotmail dot com</strong>
   <a href="#32487" class="date">28-May-2003 06:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's one way to generate all intermediate dates (in mySQL format) between any 2 dates. 
<br />
Get start and end dates from user input, you'd need to do the basic validations that :
<br />
- start and end dates are valid dates 
<br />
- start date &lt;= end date.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">//start date 2001-02-23
<br />
</span><span class="default">$sm</span><span class="keyword">=</span><span class="default">2</span><span class="keyword">;
<br />
</span><span class="default">$sd</span><span class="keyword">=</span><span class="default">23</span><span class="keyword">;
<br />
</span><span class="default">$sy</span><span class="keyword">=</span><span class="default">2001</span><span class="keyword">;
<br />

<br />
</span><span class="comment">//end date 2001-03-14
<br />
</span><span class="default">$em</span><span class="keyword">=</span><span class="default">3</span><span class="keyword">;
<br />
</span><span class="default">$ed</span><span class="keyword">=</span><span class="default">14</span><span class="keyword">;
<br />
</span><span class="default">$ey</span><span class="keyword">=</span><span class="default">2001</span><span class="keyword">;
<br />

<br />
</span><span class="comment">//utc of start and end dates
<br />
</span><span class="default">$s</span><span class="keyword">=</span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$sm</span><span class="keyword">, </span><span class="default">$sd</span><span class="keyword">, </span><span class="default">$sy</span><span class="keyword">); 
<br />
</span><span class="default">$e</span><span class="keyword">=</span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$em</span><span class="keyword">, </span><span class="default">$ed</span><span class="keyword">, </span><span class="default">$ey</span><span class="keyword">); 
<br />

<br />
while(</span><span class="default">$s</span><span class="keyword">&lt;=</span><span class="default">$e</span><span class="keyword">){
<br />
print </span><span class="default">date</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">).</span><span class="string">"&lt; br &gt;"</span><span class="keyword">; </span><span class="comment">//display date in&nbsp; mySQL format 
<br />
</span><span class="default">$s</span><span class="keyword">=</span><span class="default">$s</span><span class="keyword">+</span><span class="default">86400</span><span class="keyword">; </span><span class="comment">//increment date by 86400 seconds(1 day) 
<br />
</span><span class="keyword">}
<br />

<br />
</span><span class="default">Hope this helps </span><span class="keyword">:)
<br />

<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

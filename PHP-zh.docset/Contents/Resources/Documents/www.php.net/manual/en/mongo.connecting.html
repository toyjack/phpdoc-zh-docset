<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>链接服务器</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="mongo.sqltomongo.html">? SQL 到 Mongo 的对应表</a></li>
      <li style="float: right;"><a href="mongo.connecting.auth.html">认证 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="mongo.manual.html">手册</a></li>
    <li>链接服务器</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="mongo.connecting" class="chapter">
 <h1>链接服务器</h1>
<h2>Table of Contents</h2><ul class="chunklist chunklist_chapter"><li><a href="mongo.connecting.auth.html">认证</a></li><li><a href="mongo.connecting.rs.html">复制集合</a></li><li><a href="mongo.connecting.mongos.html">Sharding</a></li><li><a href="mongo.connecting.uds.html">Unix Domain Socket支持</a></li><li><a href="mongo.connecting.pools.html">Connection Pooling (version 1.2.0-1.2.12 *only*)</a></li><li><a href="mongo.connecting.persistent.html">Persistent Connections (version up to 1.1.4 *only*)</a></li></ul>


 <p class="para">
  链接到 mongo 服务器非常简单，只需要 <em>new MongoClient</em>，但是还可以改变更多的选项设置。
  <span class="function"><a href="mongoclient.construct.html" class="function">MongoClient::__construct()</a></span> 方法的文档中包括了所有的 API 参数。这个页面给出了一些详细说明，和一些实用的案例。
 </p>

 

 

 

 

 

 

</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="111102""></a>
  <div class="note">
   <strong class="user">daveg at smartbombinteractive dot com</strong>
   <a href="#111102" class="date">14-Jan-2013 05:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was getting "couldn't determine master" when trying to connect to a replica set.&nbsp; It turns out there was a typo in my /etc/hosts entry for on of the replica set members.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110728""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#110728" class="date">28-Nov-2012 05:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The whole part of persistent connections is outdated. In version 1.3.0:<br />
<br />
?Removed the "persist" option, as all connections are now persistent. It can still be used, but it doesn't affect anything.?<br />
<br />
As a matter of fact, this note is also wrong. Using option "persist" will throw an<br />
<br />
Uncaught exception 'MongoConnectionException' with message '- Found unknown connection string option 'persist' with value 'x'</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109462""></a>
  <div class="note">
   <strong class="user">james at dunmore dot me dot uk</strong>
   <a href="#109462" class="date">19-Jul-2012 11:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
We've got a strange gotcha (it maybe a bug with the mongo driver and we will raise an appropriate bug with them), but I think this is worth noting here.....
<br />

<br />
We were connecting to a replica set, but always getting "couldn't determine master" being returned. Connecting to individual notes without replicaset being set worked fine (directly to the master, or slave okay for reads). Replicaset working fine, and all setup okay.
<br />

<br />
The issue was our network setup, despite being able to resolve dbname-X.domain.com the server names were returning as dbname-X without the domain. 
<br />

<br />
Pinging dbname-X worked, but for some reason the driver isn't resolving it. Adding the entry to hosts fixed this though.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

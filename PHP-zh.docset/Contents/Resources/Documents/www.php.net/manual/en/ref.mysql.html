<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>MySQL 函数</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="mysql.examples-basic.html">? MySQL 扩展概述范例</a></li>
      <li style="float: right;"><a href="function.mysql-affected-rows.html">mysql_affected_rows ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="book.mysql.html">Mysql（原始）</a></li>
    <li>MySQL 函数</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="ref.mysql" class="reference">
  <h1 class="title">MySQL 函数</h1>

  <div class="partintro">
   <div class="section" id="mysql.notes">
   <h2 class="title">注释</h2>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <p class="para">
      大多数 MySQL 函数的最后一个可选参数是 <code class="parameter">link_identifier</code>。
      如果没有提供这个参数，则会使用最后一个打开的连接。
      若不存在这个最后打开的连接，则会尝试用 <var class="filename">php.ini</var> 里定义的默认参数来连接。
      如果没有成功连接，函数会返回 <strong><code>false</code></strong>。
     </p>
    </p></blockquote>
   </div>
  </div>






























































  















  







  







  































  























  







  















  







  























  







  







  







  







  







  







  







  







  















  







  















  








  







  







  
























  















  







  





 <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="function.mysql-affected-rows.html">mysql_affected_rows</a> &mdash; 取得前一次 MySQL 操作所影响的记录行数</li><li><a href="function.mysql-client-encoding.html">mysql_client_encoding</a> &mdash; 返回字符集的名称</li><li><a href="function.mysql-close.html">mysql_close</a> &mdash; 关闭 MySQL 连接</li><li><a href="function.mysql-connect.html">mysql_connect</a> &mdash; 打开一个到 MySQL 服务器的连接</li><li><a href="function.mysql-create-db.html">mysql_create_db</a> &mdash; 新建一个 MySQL 数据库</li><li><a href="function.mysql-data-seek.html">mysql_data_seek</a> &mdash; 移动内部结果的指针</li><li><a href="function.mysql-db-name.html">mysql_db_name</a> &mdash; 取得 mysql_list_dbs 返回的结果数据</li><li><a href="function.mysql-db-query.html">mysql_db_query</a> &mdash; 发送一条 MySQL 查询</li><li><a href="function.mysql-drop-db.html">mysql_drop_db</a> &mdash; 丢弃（删除）一个 MySQL 数据库</li><li><a href="function.mysql-errno.html">mysql_errno</a> &mdash; 返回上一个 MySQL 操作中的错误信息的数字编码</li><li><a href="function.mysql-error.html">mysql_error</a> &mdash; 返回上一个 MySQL 操作产生的文本错误信息</li><li><a href="function.mysql-escape-string.html">mysql_escape_string</a> &mdash; 转义一个字符串用于 mysql_query</li><li><a href="function.mysql-fetch-array.html">mysql_fetch_array</a> &mdash; 从结果集中取得一行作为关联数组</li><li><a href="function.mysql-fetch-assoc.html">mysql_fetch_assoc</a> &mdash; 从结果集中取得一行作为关联数组</li><li><a href="function.mysql-fetch-field.html">mysql_fetch_field</a> &mdash; 从结果集中取得列信息并作为对象返回</li><li><a href="function.mysql-fetch-lengths.html">mysql_fetch_lengths</a> &mdash; 取得结果集中每个输出的长度</li><li><a href="function.mysql-fetch-object.html">mysql_fetch_object</a> &mdash; 从结果集中取得一行作为对象返回</li><li><a href="function.mysql-fetch-row.html">mysql_fetch_row</a> &mdash; 从结果集中取得一行作为枚举数组</li><li><a href="function.mysql-field-flags.html">mysql_field_flags</a> &mdash; 从结果中取得和指定字段关联的标志</li><li><a href="function.mysql-field-len.html">mysql_field_len</a> &mdash; 返回指定字段的长度</li><li><a href="function.mysql-field-name.html">mysql_field_name</a> &mdash; 取得结果中指定字段的字段名</li><li><a href="function.mysql-field-seek.html">mysql_field_seek</a> &mdash; 将结果集中的指针设定为制定的字段偏移量</li><li><a href="function.mysql-field-table.html">mysql_field_table</a> &mdash; 取得指定字段所在的表名</li><li><a href="function.mysql-field-type.html">mysql_field_type</a> &mdash; 取得结果集中指定字段的类型</li><li><a href="function.mysql-free-result.html">mysql_free_result</a> &mdash; 释放结果内存</li><li><a href="function.mysql-get-client-info.html">mysql_get_client_info</a> &mdash; 取得 MySQL 客户端信息</li><li><a href="function.mysql-get-host-info.html">mysql_get_host_info</a> &mdash; 取得 MySQL 主机信息</li><li><a href="function.mysql-get-proto-info.html">mysql_get_proto_info</a> &mdash; 取得 MySQL 协议信息</li><li><a href="function.mysql-get-server-info.html">mysql_get_server_info</a> &mdash; 取得 MySQL 服务器信息</li><li><a href="function.mysql-info.html">mysql_info</a> &mdash; 取得最近一条查询的信息</li><li><a href="function.mysql-insert-id.html">mysql_insert_id</a> &mdash; 取得上一步 INSERT 操作产生的 ID</li><li><a href="function.mysql-list-dbs.html">mysql_list_dbs</a> &mdash; 列出 MySQL 服务器中所有的数据库</li><li><a href="function.mysql-list-fields.html">mysql_list_fields</a> &mdash; 列出 MySQL 结果中的字段</li><li><a href="function.mysql-list-processes.html">mysql_list_processes</a> &mdash; 列出 MySQL 进程</li><li><a href="function.mysql-list-tables.html">mysql_list_tables</a> &mdash; 列出 MySQL 数据库中的表</li><li><a href="function.mysql-num-fields.html">mysql_num_fields</a> &mdash; 取得结果集中字段的数目</li><li><a href="function.mysql-num-rows.html">mysql_num_rows</a> &mdash; 取得结果集中行的数目</li><li><a href="function.mysql-pconnect.html">mysql_pconnect</a> &mdash; 打开一个到 MySQL 服务器的持久连接</li><li><a href="function.mysql-ping.html">mysql_ping</a> &mdash; Ping 一个服务器连接，如果没有连接则重新连接</li><li><a href="function.mysql-query.html">mysql_query</a> &mdash; 发送一条 MySQL 查询</li><li><a href="function.mysql-real-escape-string.html">mysql_real_escape_string</a> &mdash; 转义 SQL 语句中使用的字符串中的特殊字符，并考虑到连接的当前字符集</li><li><a href="function.mysql-result.html">mysql_result</a> &mdash; 取得结果数据</li><li><a href="function.mysql-select-db.html">mysql_select_db</a> &mdash; 选择 MySQL 数据库</li><li><a href="function.mysql-set-charset.html">mysql_set_charset</a> &mdash; 设置客户端的字符集</li><li><a href="function.mysql-stat.html">mysql_stat</a> &mdash; 取得当前系统状态</li><li><a href="function.mysql-tablename.html">mysql_tablename</a> &mdash; 取得表名</li><li><a href="function.mysql-thread-id.html">mysql_thread_id</a> &mdash; 返回当前线程的 ID</li><li><a href="function.mysql-unbuffered-query.html">mysql_unbuffered_query</a> &mdash; 向 MySQL 发送一条 SQL 查询，并不获取和缓存结果的行</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="100626""></a>
  <div class="note">
   <strong class="user">Vladimir Kosmala</strong>
   <a href="#100626" class="date">27-Oct-2010 07:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here a mysql helper containing the main functions of the mysql extension. It's easy to understand for a beginner and quite useful because queries are secure. It understands what you want, just write your sql query. I called it mysql_magic.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Examples<br />
</span><span class="default">$nb_affected </span><span class="keyword">= </span><span class="default">mysql_magic</span><span class="keyword">(</span><span class="string">'delete from users'</span><span class="keyword">);<br />
</span><span class="default">$nb </span><span class="keyword">= </span><span class="default">mysql_magic</span><span class="keyword">(</span><span class="string">'select count(*) from users'</span><span class="keyword">);<br />
</span><span class="default">$one_row </span><span class="keyword">= </span><span class="default">mysql_magic</span><span class="keyword">(</span><span class="string">'select * from users limit 1'</span><span class="keyword">);<br />
</span><span class="default">$all_rows </span><span class="keyword">= </span><span class="default">mysql_magic</span><span class="keyword">(</span><span class="string">'select * from users where name = ?'</span><span class="keyword">, </span><span class="string">'John'</span><span class="keyword">);<br />
</span><span class="default">$id </span><span class="keyword">= </span><span class="default">mysql_magic</span><span class="keyword">(</span><span class="string">'insert into users(name,rank) values(?,?)'</span><span class="keyword">, </span><span class="string">'Vincent'</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Usage: mysql_magic($query [, $arg...]);<br />
</span><span class="keyword">function </span><span class="default">mysql_magic</span><span class="keyword">()<br />
{<br />
&nbsp;&nbsp;&nbsp; global </span><span class="default">$dblink</span><span class="keyword">, </span><span class="default">$sqlhost</span><span class="keyword">, </span><span class="default">$sqluser</span><span class="keyword">, </span><span class="default">$sqlpass</span><span class="keyword">, </span><span class="default">$sqlbase</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$narg </span><span class="keyword">= </span><span class="default">func_num_args</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$args </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">$dblink</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dblink </span><span class="keyword">= </span><span class="default">mysql_connect</span><span class="keyword">( </span><span class="default">$sqlhost</span><span class="keyword">, </span><span class="default">$sqluser</span><span class="keyword">, </span><span class="default">$sqlpass </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">mysql_select_db</span><span class="keyword">( </span><span class="default">$sqlbase</span><span class="keyword">, </span><span class="default">$dblink </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$req_sql </span><span class="keyword">= </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$req_args </span><span class="keyword">= </span><span class="default">$args</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$req_query </span><span class="keyword">= </span><span class="default">mysql_bind</span><span class="keyword">(</span><span class="default">$req_sql</span><span class="keyword">, </span><span class="default">$req_args</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$req_result </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="default">$req_query</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">$req_result</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="default">mysql_error</span><span class="keyword">());<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">startsWith</span><span class="keyword">(</span><span class="default">$req_sql</span><span class="keyword">, </span><span class="string">'delete'</span><span class="keyword">) || </span><span class="default">startsWith</span><span class="keyword">(</span><span class="default">$req_sql</span><span class="keyword">, </span><span class="string">'update'</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">mysql_affected_rows</span><span class="keyword">(); </span><span class="comment">// -1 || N<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp;&nbsp; else if (</span><span class="default">startsWith</span><span class="keyword">(</span><span class="default">$req_sql</span><span class="keyword">, </span><span class="string">'insert'</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">mysql_insert_id</span><span class="keyword">(); </span><span class="comment">// ID || 0 || FALSE<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp;&nbsp; else if (</span><span class="default">endsWith</span><span class="keyword">(</span><span class="default">$req_sql</span><span class="keyword">, </span><span class="string">'limit 1'</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">mysql_fetch_assoc</span><span class="keyword">(</span><span class="default">$req_result</span><span class="keyword">); </span><span class="comment">// [] || FALSE<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp;&nbsp; else if (</span><span class="default">startsWith</span><span class="keyword">(</span><span class="default">$req_sql</span><span class="keyword">, </span><span class="string">'select count(*)'</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$line </span><span class="keyword">= </span><span class="default">mysql_fetch_row</span><span class="keyword">(</span><span class="default">$req_result</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$line</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]; </span><span class="comment">// N<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">mysql_fetch_all</span><span class="keyword">(</span><span class="default">$req_result</span><span class="keyword">); </span><span class="comment">// [][]<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
}<br />
<br />
function </span><span class="default">mysql_bind</span><span class="keyword">(</span><span class="default">$sql</span><span class="keyword">, </span><span class="default">$values</span><span class="keyword">=array())<br />
{<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$values </span><span class="keyword">as &amp;</span><span class="default">$value</span><span class="keyword">) </span><span class="default">$value </span><span class="keyword">= </span><span class="default">mysql_real_escape_string</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$sql </span><span class="keyword">= </span><span class="default">vsprintf</span><span class="keyword">( </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'?'</span><span class="keyword">, </span><span class="string">"'%s'"</span><span class="keyword">, </span><span class="default">$sql</span><span class="keyword">), </span><span class="default">$values</span><span class="keyword">); <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$sql</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">mysql_fetch_all</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$resultArray </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; while((</span><span class="default">$resultArray</span><span class="keyword">[] = </span><span class="default">mysql_fetch_assoc</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">)) || </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$resultArray</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$resultArray</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">startsWith</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">,</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$case</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$case</span><span class="keyword">){return (</span><span class="default">strcmp</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">)),</span><span class="default">$needle</span><span class="keyword">)===</span><span class="default">0</span><span class="keyword">);}<br />
&nbsp;&nbsp;&nbsp; return (</span><span class="default">strcasecmp</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">)),</span><span class="default">$needle</span><span class="keyword">)===</span><span class="default">0</span><span class="keyword">);<br />
}<br />
<br />
function </span><span class="default">endsWith</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">,</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$case</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$case</span><span class="keyword">){return (</span><span class="default">strcmp</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">) - </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">)),</span><span class="default">$needle</span><span class="keyword">)===</span><span class="default">0</span><span class="keyword">);}<br />
&nbsp;&nbsp;&nbsp; return (</span><span class="default">strcasecmp</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">) - </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">)),</span><span class="default">$needle</span><span class="keyword">)===</span><span class="default">0</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Don't forget to set $sqlhost, $sqluser, $sqlpass and $sqlbase.<br />
<br />
With help of :<br />
mysql_bind : <a href="http://php.net/manual/en/function.mysql-real-escape-string.php#96391" rel="nofollow" target="_blank">http://php.net/manual/en/function.mysql-real-escape-string.php#96391</a><br />
mysql_fetch_all : <a href="http://php.net/manual/en/function.mysql-fetch-assoc.php#90030" rel="nofollow" target="_blank">http://php.net/manual/en/function.mysql-fetch-assoc.php#90030</a><br />
<br />
trigger_error may be enhanced with this tip : <a href="http://php.net/manual/en/function.trigger-error.php#98910" rel="nofollow" target="_blank">http://php.net/manual/en/function.trigger-error.php#98910</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83255""></a>
  <div class="note">
   <strong class="user">joachimb at gmail dot com</strong>
   <a href="#83255" class="date">16-May-2008 02:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Lazy Man's Logging:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="comment">/// Creates a table called $table as (id, when, message) if none such exists, and inserts a row with $message in it.<br />
&nbsp; /// If no connection details are given, it uses the current database connection. Same goes for $database and $when.<br />
&nbsp; ///<br />
&nbsp; /// @returns TRUE on success or FALSE on failure.<br />
&nbsp; ///<br />
&nbsp; /// @example mysql_put_contents("orders", "I CAN HAZ CHEEZBURGER?", "mysite", NULL, "127.0.0.1:3306", "mysite_user", "secret") or die(mysql_error());<br />
&nbsp; /// @example mysql_put_contents("guestbook", "Longcat says: I'm loooooooooooong") or die("Errorz!");<br />
&nbsp; </span><span class="keyword">function </span><span class="default">mysql_put_contents</span><span class="keyword">(</span><span class="default">$table</span><span class="keyword">, </span><span class="default">$message</span><span class="keyword">, </span><span class="default">$database </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$when </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$host </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$user </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$pass </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$host</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">mysql_connect</span><span class="keyword">(</span><span class="default">$host</span><span class="keyword">, </span><span class="default">$user</span><span class="keyword">, </span><span class="default">$pass</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(</span><span class="default">$database</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">mysql_select_db</span><span class="keyword">(</span><span class="default">$database</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$qry </span><span class="keyword">= </span><span class="string">"CREATE TABLE IF NOT EXISTS `</span><span class="default">$table</span><span class="string">` (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; `id` INT NOT NULL AUTO_INCREMENT PRIMARY KEY,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; `when` TIMESTAMP DEFAULT NOW(),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; `message` TEXT NOT NULL<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="default">$qry</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$result </span><span class="keyword">=== </span><span class="default">FALSE</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$qry </span><span class="keyword">= </span><span class="string">"INSERT INTO `</span><span class="default">$table</span><span class="string">` VALUES(NULL, "</span><span class="keyword">.(</span><span class="default">$when </span><span class="keyword">? </span><span class="default">$when </span><span class="keyword">: </span><span class="string">'NULL'</span><span class="keyword">).</span><span class="string">", '"</span><span class="keyword">.</span><span class="default">mysql_real_escape_string</span><span class="keyword">(</span><span class="default">$message</span><span class="keyword">).</span><span class="string">"');"</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="default">$qry</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$result </span><span class="keyword">=== </span><span class="default">FALSE</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">TRUE</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80870""></a>
  <div class="note">
   <strong class="user">dhirendrak at yahoo dot com</strong>
   <a href="#80870" class="date">04-Feb-2008 11:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment"># Created by dhirendra can be reached at dhirendrak at yahoo dot com<br />
# This script is created to check the data difference between two tables<br />
# when the structure of both tables are same.<br />
# Limitation : <br />
# 1) Structure of both tables should be same.<br />
# 2) Name of both table should be different but if same than obviously <br />
# second table should be if different database.<br />
# 3) If use two database than both database permission should be same <br />
# as i am using aliases to get the information.<br />
#<br />
# USES::<br />
# 1) This may be useful when you did some changes in your existing <br />
# script and you expect the certain output. So with the help of this <br />
#&nbsp; &nbsp; function you may compare the impact due to your changes in script.<br />
#<br />
#&nbsp; <br />
<br />
</span><span class="default">$host</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment"># host name or ip address <br />
</span><span class="default">$user</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment"># database user name<br />
</span><span class="default">$pass</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">;&nbsp; &nbsp; </span><span class="comment"># database password<br />
</span><span class="default">$database</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment"># dateabase name with which you want to connect<br />
<br />
# get connection with mysql<br />
</span><span class="default">$dblink </span><span class="keyword">= @</span><span class="default">mysql_connect</span><span class="keyword">(</span><span class="default">$host</span><span class="keyword">,</span><span class="default">$user</span><span class="keyword">,</span><span class="default">$pass</span><span class="keyword">);<br />
<br />
</span><span class="comment"># select and open database<br />
</span><span class="default">mysql_select_db</span><span class="keyword">(</span><span class="default">$database</span><span class="keyword">,</span><span class="default">$dblink</span><span class="keyword">);<br />
<br />
</span><span class="default">$db1</span><span class="keyword">=</span><span class="string">"&lt; your db1 &gt;"</span><span class="keyword">; </span><span class="comment">// first database<br />
// second database if database are same for both tables than use the same as db1<br />
</span><span class="default">$db2</span><span class="keyword">=</span><span class="string">"&lt; your db2 &gt;"</span><span class="keyword">; <br />
</span><span class="default">$table1</span><span class="keyword">=</span><span class="string">"&lt; your table1 &gt;"</span><span class="keyword">; </span><span class="comment">// first table<br />
// second table if database is same for both tables than table name <br />
# must be different but fields name are same and order of the fields are same.<br />
<br />
</span><span class="default">$table2</span><span class="keyword">=</span><span class="string">"&lt; your table2 &gt;"</span><span class="keyword">; <br />
<br />
</span><span class="comment">// function starts here <br />
</span><span class="keyword">function </span><span class="default">table_data_difference</span><span class="keyword">(</span><span class="default">$first</span><span class="keyword">,</span><span class="default">$second</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; global </span><span class="default">$dblink</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$sql1 </span><span class="keyword">= </span><span class="string">"SHOW FIELDS FROM </span><span class="default">$first</span><span class="string">"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="default">$sql1</span><span class="keyword">,</span><span class="default">$dblink</span><span class="keyword">) or die(</span><span class="string">"Having error in execution 1 =="</span><span class="keyword">.</span><span class="default">mysql_error</span><span class="keyword">());<br />
<br />
&nbsp;&nbsp;&nbsp; while(</span><span class="default">$row </span><span class="keyword">= </span><span class="default">mysql_fetch_object</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$from_fields</span><span class="keyword">[]=</span><span class="default">$row</span><span class="keyword">-&gt;</span><span class="default">Field</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$sql</span><span class="keyword">=</span><span class="string">"select * from </span><span class="default">$first</span><span class="string">"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$res</span><span class="keyword">=</span><span class="default">mysql_query</span><span class="keyword">(</span><span class="default">$sql</span><span class="keyword">,</span><span class="default">$dblink</span><span class="keyword">) or die(</span><span class="string">"Having error in execution 2=="</span><span class="keyword">.</span><span class="default">mysql_error</span><span class="keyword">());<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$j</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; while(</span><span class="default">$row</span><span class="keyword">=</span><span class="default">mysql_fetch_array</span><span class="keyword">(</span><span class="default">$res</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$num</span><span class="keyword">=</span><span class="default">count</span><span class="keyword">(</span><span class="default">$from_fields</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sql_next</span><span class="keyword">=</span><span class="string">"select </span><span class="default">$second</span><span class="string">.* from </span><span class="default">$second</span><span class="string"> where"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$num</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sql_next</span><span class="keyword">=</span><span class="default">$sql_next</span><span class="keyword">.</span><span class="string">" "</span><span class="keyword">.</span><span class="default">$second</span><span class="keyword">.</span><span class="string">"."</span><span class="keyword">.</span><span class="default">$from_fields</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">].</span><span class="string">"='"</span><span class="keyword">.</span><span class="default">$row</span><span class="keyword">[</span><span class="default">$from_fields</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]].</span><span class="string">"' and "</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sql_next</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$sql_next</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$sql_next</span><span class="keyword">)-</span><span class="default">5</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$res_next</span><span class="keyword">=</span><span class="default">mysql_query</span><span class="keyword">(</span><span class="default">$sql_next</span><span class="keyword">,</span><span class="default">$dblink</span><span class="keyword">) or die(</span><span class="string">"Having error in execution 3=="</span><span class="keyword">.</span><span class="default">mysql_error</span><span class="keyword">());<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$num1</span><span class="keyword">=</span><span class="default">mysql_num_rows</span><span class="keyword">(</span><span class="default">$res_next</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$num1</span><span class="keyword">==</span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$from_fields</span><span class="keyword">);</span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$val</span><span class="keyword">=</span><span class="default">$val</span><span class="keyword">.</span><span class="string">"&lt;br&gt;"</span><span class="keyword">.</span><span class="default">$from_fields</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">].</span><span class="string">"="</span><span class="keyword">.</span><span class="default">$row</span><span class="keyword">[</span><span class="default">$from_fields</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Display the record which are not matched.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">echo </span><span class="string">"&lt;br&gt;\n"</span><span class="keyword">.</span><span class="default">$j</span><span class="keyword">.</span><span class="string">"."</span><span class="keyword">.</span><span class="default">$val</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;br&gt;-----------------------------------------------------"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$j</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
}<br />
<br />
</span><span class="default">$first</span><span class="keyword">=</span><span class="default">$db1</span><span class="keyword">.</span><span class="string">'.'</span><span class="keyword">.</span><span class="default">$table1</span><span class="keyword">;<br />
</span><span class="default">$second</span><span class="keyword">=</span><span class="default">$db2</span><span class="keyword">.</span><span class="string">'.'</span><span class="keyword">.</span><span class="default">$table2</span><span class="keyword">;<br />
<br />
</span><span class="default">table_data_difference</span><span class="keyword">(</span><span class="default">$first</span><span class="keyword">,</span><span class="default">$second</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79260""></a>
  <div class="note">
   <strong class="user">matiyahoo-publico at yhoo dot com dot ar</strong>
   <a href="#79260" class="date">17-Nov-2007 08:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
David:<br />
<br />
In this line:<br />
<br />
$query = "SELECT username FROM users WHERE username REGEXP '$username[0-9*]'";<br />
<br />
PHP may read $username[, *including* the open square bracket, and may think you are trying to get into an array.<br />
<br />
You should use this instead:<br />
<br />
$query = "SELECT username FROM users WHERE username REGEXP '${username}[0-9*]'";<br />
<br />
Or maybe this:<br />
<br />
$query = "SELECT username FROM users WHERE username REGEXP '$username" . "[0-9*]'";</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79082""></a>
  <div class="note">
   <strong class="user">david at kiwi dot com</strong>
   <a href="#79082" class="date">09-Nov-2007 08:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I am wanting to increment usernames which are to be alphabetic characters A-Z or a-z and if someone uses "abc" it will automatically be given "abc1" and the next applicant to apply for that same username will automatically be given "abc2", the next "abc3" and so on. If I enter the following into MySQL;<br />
<br />
SELECT username FROM users WHERE username REGEXP 'abc[0-9*]';<br />
<br />
the result is<br />
<br />
abc1<br />
abc2<br />
abc3<br />
<br />
I have been given the following script from another forum but it does not work;<br />
<br />
<span class="default">&lt;?php <br />
$username </span><span class="keyword">= </span><span class="string">'abc'</span><span class="keyword">; <br />
</span><span class="default">$query </span><span class="keyword">= </span><span class="string">"SELECT username FROM users WHERE username LIKE '</span><span class="default">$username</span><span class="string">%'"</span><span class="keyword">; <br />
</span><span class="default">$res </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">); <br />
while(</span><span class="default">$row </span><span class="keyword">= </span><span class="default">mysql_fetch_assoc</span><span class="keyword">(</span><span class="default">$res</span><span class="keyword">)) { <br />
&nbsp;&nbsp; </span><span class="default">$n </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$username</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$row</span><span class="keyword">[</span><span class="string">'username'</span><span class="keyword">]); <br />
&nbsp;&nbsp; if (</span><span class="default">$old_n</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">!=</span><span class="default">$n</span><span class="keyword">) { <br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$new_user </span><span class="keyword">= </span><span class="default">$username </span><span class="keyword">. (</span><span class="default">$old_n</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">); <br />
&nbsp;&nbsp; &nbsp;&nbsp; break; <br />
&nbsp;&nbsp; } <br />
} <br />
</span><span class="default">?&gt;</span> <br />
<br />
In addition to the script not working the "LIKE" function would not be suitable because if a username was applied as "blue" it would pick up usernames "blue1" and "bluebird1" therefore it appears as if "REGEXP '$username[0-9*]' is the only or correct option.<br />
<br />
I have tried the REGEXP option in association with the balance of the code but it appears as if PHP will not interact with the "[" and "]" in the following;<br />
<br />
$query = "SELECT username FROM users WHERE username REGEXP '$username[0-9*]'";</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79021""></a>
  <div class="note">
   <strong class="user">SID TRIVEDI</strong>
   <a href="#79021" class="date">07-Nov-2007 04:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">/*<br />
MySQL (Community) Server Installation on 32-bit Windows XP running Apache<br />
<br />
On Windows, the recommended way to run MySQL is to install it as a Windows service, whereby MySQL starts and stops automatically when Windows starts and stops. A MySQL server installed as a service can also be controlled from the command line commands, or with the graphical Services utility like phpMyAdmin.<br />
<br />
PHP ---&gt; MySQL CONNECTORS (php_mysql.dll and php_mysqli.dll as extensions)<br />
MySQL provides the mysql and mysqli extensions for the Windows operating system on <a href="http://dev.mysql.com/downloads/connector/php/ for MySQL version 4.1.16 and higher, MySQL 5.0.18, and MySQL 5.1. As with enabling any PHP extension in php.ini (such as php_mysql.dll" rel="nofollow" target="_blank">http://dev.mysql.com/downloads/connector/php/ for MySQL version 4.1.16 and higher, MySQL 5.0.18, and MySQL 5.1. As with enabling any PHP extension in php.ini (such as php_mysql.dll</a>), the PHP directive extension_dir should be set to the directory where the PHP extensions are located.<br />
<br />
MySQL is no longer enabled by default, so the php_mysql.dll DLL must be enabled inside of php.ini. Also, PHP needs access to the MySQL client library. A file named libmysql.dll is included in the Windows PHP distribution and in order for PHP to talk to MySQL this file needs to be available to the Windows systems PATH.<br />
<br />
Following PHP Script is useful to test PHP connection with MySQL.<br />
*/<br />
<br />
//$connect = mysql_connect("Your Host Name", "MySQL root directory", 'MySQL password, if any');<br />
//$connect = mysql_connect("Host Name or Address - 127.0.0.1", "root", 'password');<br />
</span><span class="default">$connect </span><span class="keyword">= </span><span class="default">mysql_connect</span><span class="keyword">(</span><span class="string">"localhost"</span><span class="keyword">, </span><span class="string">"root"</span><span class="keyword">, </span><span class="string">'password'</span><span class="keyword">);<br />
if (</span><span class="default">$connect</span><span class="keyword">){<br />
echo </span><span class="string">"Congratulations!\n&lt;br&gt;"</span><span class="keyword">;<br />
echo </span><span class="string">"Successfully connected to MySQL database server.\n&lt;br&gt;"</span><span class="keyword">;<br />
}else{<br />
</span><span class="default">$error </span><span class="keyword">= </span><span class="default">mysql_error</span><span class="keyword">();<br />
echo </span><span class="string">"Could not connect to the database. Error = </span><span class="default">$error</span><span class="string">.\n&lt;br&gt;"</span><span class="keyword">;<br />
exit();<br />
}<br />
<br />
</span><span class="comment">// Closing connection<br />
</span><span class="default">$close </span><span class="keyword">= </span><span class="default">mysql_close</span><span class="keyword">(</span><span class="default">$connect</span><span class="keyword">);<br />
if (</span><span class="default">$close</span><span class="keyword">){<br />
echo </span><span class="string">"\n&lt;br&gt;"</span><span class="keyword">;<br />
echo </span><span class="string">"Now closing the connection...\n&lt;br&gt;"</span><span class="keyword">;<br />
echo </span><span class="string">"MySQL connection closed successfully as well.\n&lt;br&gt;"</span><span class="keyword">;<br />
}else{<br />
echo </span><span class="string">"There's a problem in closing MySQL connection.\n&lt;br&gt;"</span><span class="keyword">;<br />
}<br />
exit();<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78486""></a>
  <div class="note">
   <strong class="user">rad14701 at yahoo dot com</strong>
   <a href="#78486" class="date">14-Oct-2007 12:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
@Amanda 12-Oct-2007 09:58<br />
<br />
I almost had to ask myself if this was a real question... If the MySQL server rejects the connection attempt then, yes, MySQL would be able to send back an error to PHP... And if PHP can't access the target MySQL server at all then it is also smart enough to issue the appropriate error all by itself...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78467""></a>
  <div class="note">
   <strong class="user">arnold_dba</strong>
   <a href="#78467" class="date">13-Oct-2007 06:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Also, to secure MySQL data and to be able to comply with PCI standards, you should encrypt the data. There are many ways to do it. For hackers, you can use dm-crypt (www.saout.de/misc/dm-crypt) tool. It is basically used to encrypt the whole partition. If you want a sophisticated solution go with Security-GENERAL for MySQL from packet general (www.packetgeneral.com)<br />
On windows, you can use disk encryption feature provided by windows itself or tool like trucrypt (www.truecrypt.org)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77528""></a>
  <div class="note">
   <strong class="user">DuiMDog</strong>
   <a href="#77528" class="date">02-Sep-2007 03:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On 11-Apr-2007 admin at mihalism dot com posted an 'easy to use MySql-class'.<br />
In my opinion there is a bug in the get_affected_rows-function. It refers to query-id, but&nbsp; it should refer to connect-id instead.<br />
<br />
The corrected function should be:<br />
&nbsp;&nbsp;&nbsp; function get_affected_rows($connect_id = ""){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if($connect_id == NULL){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $return = mysql_affected_rows($this-&gt;connect_id);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $return = mysql_affected_rows($connect_id);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!$return){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;error();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return $return;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75761""></a>
  <div class="note">
   <strong class="user">atk2 at hotmail dot com</strong>
   <a href="#75761" class="date">14-Jun-2007 08:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
After finally getting IIS, PHP, and MySQL on a new Windows XP machine, I decided to write the steps I took so you can see how it was done: <a href="http://www.atksolutions.com/articles/install_php_mysql_iis.html" rel="nofollow" target="_blank">http://www.atksolutions.com/articles/install_php_mysql_iis.html</a><br />
<br />
Hope this helps.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74505""></a>
  <div class="note">
   <strong class="user">Nobody Special</strong>
   <a href="#74505" class="date">14-Apr-2007 11:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This PHP5-only class is used so that $db isn't passed. Kudos to arjen at queek dot nl for example.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">SQL </span><span class="keyword">{<br />
&nbsp;private </span><span class="default">$db</span><span class="keyword">;<br />
&nbsp;public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$host</span><span class="keyword">=</span><span class="string">"localhost"</span><span class="keyword">,</span><span class="default">$user</span><span class="keyword">=</span><span class="string">"root"</span><span class="keyword">,</span><span class="default">$pass</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">,</span><span class="default">$db</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">db </span><span class="keyword">= @</span><span class="default">mysql_connect</span><span class="keyword">(</span><span class="default">$host</span><span class="keyword">, </span><span class="default">$user</span><span class="keyword">, </span><span class="default">$pass</span><span class="keyword">);<br />
&nbsp; if(!</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">db</span><span class="keyword">) die(@</span><span class="default">mysql_error</span><span class="keyword">());<br />
&nbsp; if(</span><span class="default">$db </span><span class="keyword">!= </span><span class="string">""</span><span class="keyword">) </span><span class="default">$dbs </span><span class="keyword">= @</span><span class="default">mysql_select_db</span><span class="keyword">(</span><span class="default">$db</span><span class="keyword">);<br />
&nbsp; if(!</span><span class="default">$dbs</span><span class="keyword">) die(@</span><span class="default">mysql_error</span><span class="keyword">());<br />
&nbsp;}<br />
&nbsp;public function </span><span class="default">__destruct</span><span class="keyword">() {<br />
&nbsp; @</span><span class="default">mysql_close</span><span class="keyword">(</span><span class="default">$db</span><span class="keyword">);<br />
&nbsp;}<br />
&nbsp;public function </span><span class="default">__call</span><span class="keyword">(</span><span class="default">$function</span><span class="keyword">, </span><span class="default">$arguments</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$arguments</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">db</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$return </span><span class="keyword">= </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">"mysql_"</span><span class="keyword">.</span><span class="default">$function</span><span class="keyword">, </span><span class="default">$arguments</span><span class="keyword">);<br />
&nbsp; if(!</span><span class="default">$return</span><span class="keyword">) die(@</span><span class="default">mysql_error</span><span class="keyword">());<br />
&nbsp;}<br />
}<br />
<br />
</span><span class="default">$db </span><span class="keyword">= new </span><span class="default">SQL</span><span class="keyword">();<br />
</span><span class="default">$query </span><span class="keyword">= </span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="string">"SELECT * FROM this_table WHERE my_variable='1'"</span><span class="keyword">);<br />
</span><span class="default">$fetch </span><span class="keyword">= </span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">fetch_array</span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$fetch</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74482""></a>
  <div class="note">
   <strong class="user">mega-squall at caramail dot com</strong>
   <a href="#74482" class="date">13-Apr-2007 02:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For Windows users, please note:<br />
<br />
If apache is installed as a service, and you change PATH variable so it can reach libmysql.dll, you will need to reboot your machine in order to have changes applied.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74437""></a>
  <div class="note">
   <strong class="user">admin at mihalism dot com</strong>
   <a href="#74437" class="date">11-Apr-2007 07:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Heres a easy to use MySQL class for any website<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">class </span><span class="default">mysql_db</span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//+======================================================+<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">sql_connect</span><span class="keyword">(</span><span class="default">$sqlserver</span><span class="keyword">, </span><span class="default">$sqluser</span><span class="keyword">, </span><span class="default">$sqlpassword</span><span class="keyword">, </span><span class="default">$database</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">connect_id </span><span class="keyword">= </span><span class="default">mysql_connect</span><span class="keyword">(</span><span class="default">$sqlserver</span><span class="keyword">, </span><span class="default">$sqluser</span><span class="keyword">, </span><span class="default">$sqlpassword</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">connect_id</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">mysql_select_db</span><span class="keyword">(</span><span class="default">$database</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">connect_id</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">error</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">error</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//+======================================================+<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">error</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">mysql_error</span><span class="keyword">() != </span><span class="string">''</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'&lt;b&gt;MySQL Error&lt;/b&gt;: '</span><span class="keyword">.</span><span class="default">mysql_error</span><span class="keyword">().</span><span class="string">'&lt;br/&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//+======================================================+<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">query</span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$query </span><span class="keyword">!= </span><span class="default">NULL</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">query_result </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">connect_id</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">query_result</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">error</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">query_result</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'&lt;b&gt;MySQL Error&lt;/b&gt;: Empty Query!'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//+======================================================+<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">get_num_rows</span><span class="keyword">(</span><span class="default">$query_id </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$query_id </span><span class="keyword">== </span><span class="default">NULL</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= </span><span class="default">mysql_num_rows</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">query_result</span><span class="keyword">); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= </span><span class="default">mysql_num_rows</span><span class="keyword">(</span><span class="default">$query_id</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">$return</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">error</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$return</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//+======================================================+<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">fetch_row</span><span class="keyword">(</span><span class="default">$query_id </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$query_id </span><span class="keyword">== </span><span class="default">NULL</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= </span><span class="default">mysql_fetch_array</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">query_result</span><span class="keyword">); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= </span><span class="default">mysql_fetch_array</span><span class="keyword">(</span><span class="default">$query_id</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">$return</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">error</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$return</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//+======================================================+<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">get_affected_rows</span><span class="keyword">(</span><span class="default">$query_id </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$query_id </span><span class="keyword">== </span><span class="default">NULL</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= </span><span class="default">mysql_affected_rows</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">query_result</span><span class="keyword">); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= </span><span class="default">mysql_affected_rows</span><span class="keyword">(</span><span class="default">$query_id</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">$return</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">error</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$return</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//+======================================================+<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">sql_close</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">connect_id</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">mysql_close</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">connect_id</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//+======================================================+&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/* Example */<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$DB </span><span class="keyword">= new </span><span class="default">mysql_db</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$DB</span><span class="keyword">-&gt;</span><span class="default">sql_connect</span><span class="keyword">(</span><span class="string">'sql_host'</span><span class="keyword">, </span><span class="string">'sql_user'</span><span class="keyword">, </span><span class="string">'sql_password'</span><span class="keyword">, </span><span class="string">'sql_database_name'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$DB</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="string">"SELECT * FROM `members`"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$DB</span><span class="keyword">-&gt;</span><span class="default">sql_close</span><span class="keyword">();<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68864""></a>
  <div class="note">
   <strong class="user">davesteinb at yahoo dot com</strong>
   <a href="#68864" class="date">13-Aug-2006 03:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I made this function to reduce DB calls. You can store Mysql results in a session var and sort the results on any column. Might work nice in an AJAX app.<br />
<br />
&lt;?<br />
<br />
function mysql_sort($results, $sort_field, $dir="ASC") {<br />
&nbsp;&nbsp;&nbsp; $temp_array = array();<br />
&nbsp;&nbsp;&nbsp; $i=0;<br />
&nbsp;&nbsp;&nbsp; foreach ($results as $res) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $temp_array[$i] = $res[$sort_field];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $i++;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if ($dir=="ASC") {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; asort($temp_array);<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; arsort($temp_array);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; $new_results = array();<br />
&nbsp;&nbsp;&nbsp; $i=0;<br />
&nbsp;&nbsp;&nbsp; foreach($temp_array as $k =&gt; $v) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $new_results[$i] = $results[$k];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $i++;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; ksort($new_results);<br />
&nbsp;&nbsp;&nbsp; return $new_results;<br />
&nbsp;&nbsp;&nbsp; <br />
}<br />
<br />
//use<br />
if (count($_SESSION["res"])==0) {<br />
&nbsp;&nbsp;&nbsp; $_SESSION["res"] = [GET DATABASE RESULTS HOWEVER YOU MAY]<br />
}<br />
<br />
$_SESSION["res"] = mysql_sort($_SESSION["res"], $_REQUEST["sort"], $_REQUEST["dir"]);<br />
<br />
?&gt;<br />
&lt;table&gt;<br />
&lt;tr&gt;<br />
&nbsp; &lt;td&gt;&lt;a href="page.php?sort=f_name&amp;dir=&lt;? echo ($_REQUEST["dir"]=="ASC") ? "DESC":"ASC"; ?&gt;"&gt;First&lt;/a&gt;&lt;/td&gt;<br />
&nbsp; &lt;td&gt;&lt;a href="page.php?sort=l_name&amp;dir=&lt;? echo ($_REQUEST["dir"]=="ASC") ? "DESC":"ASC"; ?&gt;"&gt;Last&lt;/a&gt;&lt;/td&gt;<br />
&lt;/tr&gt;<br />
<br />
&lt;? foreach ($_SESSION["res"] as $r) {?&gt;<br />
&lt;tr&gt;<br />
&nbsp; &lt;td&gt;<span class="default">&lt;?=$r</span><span class="keyword">[</span><span class="string">"f_name"</span><span class="keyword">]</span><span class="default">?&gt;</span>&lt;/td&gt;<br />
&nbsp; &lt;td&gt;<span class="default">&lt;?=$r</span><span class="keyword">[</span><span class="string">"l_name"</span><span class="keyword">]</span><span class="default">?&gt;</span>&lt;/td&gt;<br />
&lt;/tr&gt;<br />
&lt;? } ?&gt;<br />
&lt;/table&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68260""></a>
  <div class="note">
   <strong class="user">richard at NOSPAM dot dimax dot com</strong>
   <a href="#68260" class="date">19-Jul-2006 04:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In response to Conrad Decker's post below:&nbsp; <br />
<br />
If your tables contain foreign key constraints you will not be able to properly restore from a datafile created by mysqldump.<br />
<br />
mysqldump dumps table data in alphabetical order, not in the logical order required by the foreign key constraints.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68006""></a>
  <div class="note">
   <strong class="user">vbolshov at rbc dot ru</strong>
   <a href="#68006" class="date">09-Jul-2006 11:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have recently ran into a problem with configuring php extensions related to mysql (namely, mysql and pdo_mysql). Later I've discovered that it wasn't a PHP problem but that of MySQL - libmysqlclient doesn't ship with binary downloads. I've built MySQL from sources and both extensions then compiled successfully.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="65478""></a>
  <div class="note">
   <strong class="user">sb at stephenbrooks dot org</strong>
   <a href="#65478" class="date">01-May-2006 01:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I'm in the process of changing web hosts and my previous host provided a "dump" of the database in the form of a sequence of SQL requests that (I assume) have to be executed in order to rebuild the database on another system.&nbsp; It was generated using "MySQL dump 9.11".&nbsp; Queries are finished by a semicolon and linefeed, while comment-lines begin with a double hyphen.&nbsp; The script below opens a connection to an SQL server and loads a dump file $file of this format into the database $dest_db.<br />
<br />
function load_db_dump($file,$sqlserver,$user,$pass,$dest_db)<br />
{<br />
&nbsp; $sql=mysql_connect($sqlserver,$user,$pass);<br />
&nbsp; mysql_select_db($dest_db);<br />
&nbsp; $a=file($file);<br />
&nbsp; foreach ($a as $n =&gt; $l) if (substr($l,0,2)=='--') unset($a[$n]);<br />
&nbsp; $a=explode(";\n",implode("\n",$a));<br />
&nbsp; unset($a[count($a)-1]);<br />
&nbsp; foreach ($a as $q) if ($q) <br />
&nbsp;&nbsp;&nbsp; if (!mysql_query($q)) {echo "Fail on '$q'"; mysql_close($sql); return 0;}<br />
&nbsp; mysql_close($sql);<br />
&nbsp; return 1;<br />
}<br />
<br />
This may not be watertight if the ";\n" sequence appears inside queries, but I hope it helps others who are in posession of such dumps.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="63197""></a>
  <div class="note">
   <strong class="user">yp</strong>
   <a href="#63197" class="date">15-Mar-2006 02:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
when using Fedora Core linux Mysql rpm installation.<br />
Configure as following to load the mysql header files.<br />
./configure --with-mysql=/usr/<br />
Remember to do make clean to remove old configurations before compile</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="62013""></a>
  <div class="note">
   <strong class="user">php comments of fuzzyworm co., uk</strong>
   <a href="#62013" class="date">17-Feb-2006 03:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to get PHP working nicely with MySQL, even with Apache, under Windows based systems, try XAMPP, from Apache Friends. It saves messing about with config files, which is the only major problem with trying to get the three to work together under windows.<br />
<br />
<a href="http://www.apachefriends.org/en/xampp-windows.html" rel="nofollow" target="_blank">http://www.apachefriends.org/en/xampp-windows.html</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="59793""></a>
  <div class="note">
   <strong class="user">Joe Greklek</strong>
   <a href="#59793" class="date">15-Dec-2005 01:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've seen alot of newbies getting frustrated over the extenstions not being installed initially, so heres a quick tut for Windows.<br />
<br />
It's ok to use the php5 installer. Just be sure to also grab the .zip or "manual" version of php5.<br />
<br />
Install it like any other app. It's pretty straight forward. Don't forget to set the securities mentioned in the last message box at the end of the install. Next, If you installed php to c:\php then you will need to add this to your PATH environment variable. This is a very important step.<br />
<br />
Now open up the .zip manual version of php5 and extract the ext folder, and "libmysql.dll" to "c:\php\". <br />
<br />
You *MUST* set your security permissions on libmysql.dll and the ext folder to READ/READ&amp;EXECUTE for IUSR_"MACHINE_NAME". like my machine is called master&lt;acct = IUSR_MASTER&gt;. If you don't do this you will recieve an ******.dll - Access Denied. type message.<br />
<br />
Next edit your php.ini file usually located in c:\windows\.<br />
Find the line for&nbsp; &nbsp; extension_dir&nbsp; &nbsp; variable and make it say <br />
extension_dir = "c:\php\ext\"<br />
<br />
Then scroll down a little bit and find the lines that say <br />
;extension=php_mbstring.dll<br />
;extension=php_bz2.dll<br />
;extension=php_curl.dll<br />
;extension=php_dba.dll<br />
;extension=php_dbase.dll<br />
;extension=php_exif.dll<br />
;extension=php_fdf.dll<br />
;extension=php_filepro.dll<br />
;extension=php_gd2.dll<br />
;extension=php_gettext.dll<br />
;extension=php_ifx.dll<br />
<br />
just remove the semicolin for each extension you would like loaded. Such as <br />
extention=php_mysql.dll<br />
and so on.<br />
<br />
Now just reboot and all should be well. Query away. you basically only need to reboot to update the PATH environment variable. Hope this helps at least 1 person.:)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56927""></a>
  <div class="note">
   <strong class="user">nick smith</strong>
   <a href="#56927" class="date">19-Sep-2005 12:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
i'm fairly new to this but have just managed to set up (on windows xp) apache 2.0.54 with php 5.0.4 and mySQL 4.1.13, also phpMyAdmin 2.6.4 having had exactly the problems reported by so many others. i wasnt actually aware of mySQL not being loaded in php until i tried to use phpmyadmin and it told me to check my php/mysql configuration.<br />
<br />
basically i just did everything that is mentioned by others (setting extension_dir to c:\php\ext ( not c:\php\ext\ ), uncommenting extension=php_mysql.dll from php.ini and putting c:\php into my PATH) but i was still getting the infuriating message when trying to start apache that php_mysql.dll could not be found. <br />
<br />
i restarted my machine and it worked! It seems i had to restart windows after editing my PATH. i didnt bother restarting until it was the last resort because on xp i have NEVER had to do this before - changes to System Variables always took effect immediately. I could understand this on, say, windows 98 where you put the addition to your PATH into your autoexec.bat but why i had to do this with xp is a mystery.<br />
<br />
Anyway, give it a go, it might save you tearing out prescious hair!<br />
<br />
N.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56389""></a>
  <div class="note">
   <strong class="user">avis_del at yahoo dot com</strong>
   <a href="#56389" class="date">01-Sep-2005 01:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I aggree with j at jonathany.com<br />
<br />
PHP 5.04 to MySQL,<br />
php_mysql.dll will not found on windows installer (.msi)<br />
just extract from .zip file (can download).<br />
It works.<br />
<br />
1. cgi.force_redirect = 0<br />
2. extension_dir = "c:\php\ext"<br />
3. extension=php_mysql.dll<br />
<br />
untill on phpinfo.php show<br />
<br />
MySQL Support enabled <br />
Active Persistent Links&nbsp; 0&nbsp; <br />
Active Links&nbsp; 0&nbsp; <br />
Client API version&nbsp; 4.1.12</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56166""></a>
  <div class="note">
   <strong class="user">claude(at)claude(dot)nl</strong>
   <a href="#56166" class="date">25-Aug-2005 07:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A note on resources<br />
<br />
When a resource (e.g. a link identifier) runs out of scope, it is deleted and the associated computer resources (e.g. the tcp link to the database) will be terminated as well. So far so good!<br />
However, in the following code the tcp mysql link persists until the end of execution:<br />
<span class="default">&lt;?php<br />
$conn </span><span class="keyword">= </span><span class="default">mysql_connect</span><span class="keyword">(</span><span class="string">'hostname'</span><span class="keyword">, </span><span class="string">'username'</span><span class="keyword">,</span><span class="string">'password'</span><span class="keyword">);<br />
</span><span class="default">$conn </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
</span><span class="default">sleep </span><span class="keyword">(</span><span class="default">30</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>This is because the internally the link-identifier is being saved, so that subsequent mysql functions will work. There seems to be no way to delete this internal reference.<br />
If you were, however, to open 2 connections, the oldest one will be deleted automatically (so the connection to hostname will terminate at the $conn=null statement, the connection to hostname2 will exist till the end of the script).<br />
<span class="default">&lt;?php<br />
$conn </span><span class="keyword">= </span><span class="default">mysql_connect</span><span class="keyword">(</span><span class="string">'hostname'</span><span class="keyword">, </span><span class="string">'username'</span><span class="keyword">,</span><span class="string">'password'</span><span class="keyword">);<br />
</span><span class="default">$conn2 </span><span class="keyword">= </span><span class="default">mysql_connect</span><span class="keyword">(</span><span class="string">'hostname2'</span><span class="keyword">, </span><span class="string">'username'</span><span class="keyword">,</span><span class="string">'password'</span><span class="keyword">);<br />
</span><span class="default">$conn </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
</span><span class="default">$conn2 </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
</span><span class="default">sleep </span><span class="keyword">(</span><span class="default">30</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55489""></a>
  <div class="note">
   <strong class="user">arjen at mysql dot com</strong>
   <a href="#55489" class="date">04-Aug-2005 01:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
John Coggeshall wrote a PHP5 ext/mysqli compatibility script for applications that still use the old ext/mysql functions. This prevents the hassle of trying to have both the mysql and mysqli extensions loaded in PHP5, which can be tricky.
<br />

<br />
The script is at:
<br />
<a href="http://www.coggeshall.org/oss/mysql2i/" rel="nofollow" target="_blank">http://www.coggeshall.org/oss/mysql2i/</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54941""></a>
  <div class="note">
   <strong class="user">allan666 at NOSPAM dot gmail dot com</strong>
   <a href="#54941" class="date">20-Jul-2005 03:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
[Editor's Note: In MySQL v5.0+, you can use the INFORMATION_SCHEMA tables to retrieve information on tables, views, databases and so on. --zak@php.net]
<br />

<br />
Here is a small function to parse a mysql creation table DDL. The function takes a string with the SQL code to create a table and returns the table name, table fields, table key fields and fields type, all in arrays (except by the name, obviously). The function requires that the primary key be named "id" and the foreign keys named "id...". All foreign key types are suposed to be int (or its variations, bigint, etc...). All those restrictions are easily modified to others needs.
<br />

<br />
Here is a example of a DDL code.
<br />

<br />
CREATE TABLE `telefones` (
<br />
&nbsp; `id` int(11) NOT NULL auto_increment,
<br />
&nbsp; `id_tipo_telefone` int(11) NOT NULL default '0',
<br />
&nbsp; `numero` varchar(15) NOT NULL default '',
<br />
&nbsp; `id_pessoa` int(11) NOT NULL default '0',
<br />
&nbsp; PRIMARY KEY&nbsp; (`id`),
<br />
&nbsp; KEY `id_tipo_telefone` (`id_tipo_telefone`),
<br />
&nbsp; KEY `id_pessoa` (`id_pessoa`),
<br />
&nbsp; CONSTRAINT `0_775` FOREIGN KEY (`id_tipo_telefone`) REFERENCES `tipos_telefone` (`id`),
<br />
&nbsp; CONSTRAINT `0_776` FOREIGN KEY (`id_pessoa`) REFERENCES `pessoas` (`id`)
<br />
) TYPE=InnoDB
<br />

<br />
that returns
<br />

<br />
$tbname = "telefones"
<br />
$fields = array("numero");
<br />
$kfields = array("id_tipo_telefone","id_pessoa");
<br />
$tipos = array("varchar");
<br />

<br />
Hope it helps...
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">parseQuery</span><span class="keyword">(</span><span class="default">$Q</span><span class="keyword">, &amp;</span><span class="default">$tbname</span><span class="keyword">, &amp;</span><span class="default">$fields</span><span class="keyword">, &amp;</span><span class="default">$kfields</span><span class="keyword">, &amp;</span><span class="default">$tipos</span><span class="keyword">) {
<br />

<br />
</span><span class="comment">/** rules to a corect parse:
<br />
&nbsp;*
<br />
&nbsp;*&nbsp; &nbsp;&nbsp; 1 - primary key must be named "id"
<br />
&nbsp;*&nbsp; &nbsp;&nbsp; 2 - foreign key must be named "id..." eg.: id_field
<br />
&nbsp;*&nbsp; &nbsp;&nbsp; 3 - lowercase is recomended
<br />
&nbsp;*/
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$Q </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(array(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">10</span><span class="keyword">),</span><span class="default">chr</span><span class="keyword">(</span><span class="default">13</span><span class="keyword">)),</span><span class="string">" "</span><span class="keyword">,</span><span class="default">$Q</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$Q </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(array(</span><span class="string">"'"</span><span class="keyword">,</span><span class="string">"`"</span><span class="keyword">),</span><span class="string">" "</span><span class="keyword">,</span><span class="default">$Q</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/([^(]*)\((.*)\)(.*)/"</span><span class="keyword">,</span><span class="default">$Q</span><span class="keyword">,</span><span class="default">$A</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$part1 </span><span class="keyword">= </span><span class="default">$A</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$part2 </span><span class="keyword">= </span><span class="default">$A</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">];
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$part3 </span><span class="keyword">= </span><span class="default">$A</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">];
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/(.*) ([a-zA-Z_]+)/"</span><span class="keyword">,</span><span class="default">$part1</span><span class="keyword">,</span><span class="default">$A</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$tbname </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$A</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]);
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$temp </span><span class="keyword">= </span><span class="default">split</span><span class="keyword">(</span><span class="string">","</span><span class="keyword">,</span><span class="default">$part2</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$temp </span><span class="keyword">as </span><span class="default">$t</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/ *([a-zA-Z_]+) +([a-zA-Z_]+)(.*)/"</span><span class="keyword">,</span><span class="default">$t</span><span class="keyword">,</span><span class="default">$A</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pcampo </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$A</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ptipo </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$A</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/</span><span class="default">$pcampo</span><span class="string">/"</span><span class="keyword">,</span><span class="string">"primary key constraint id unique foreign"</span><span class="keyword">) )&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( (</span><span class="default">$pcampo</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] == </span><span class="string">"i"</span><span class="keyword">) &amp;&amp; (</span><span class="default">$pcampo</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] == </span><span class="string">"d"</span><span class="keyword">) )
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$kfields</span><span class="keyword">[] = </span><span class="default">$pcampo</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$fields</span><span class="keyword">[] = </span><span class="default">$pcampo</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tipos</span><span class="keyword">[] = </span><span class="default">$ptipo</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53527""></a>
  <div class="note">
   <strong class="user">Microsoul V3</strong>
   <a href="#53527" class="date">04-Jun-2005 03:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I use IIS 6, PHP 5.04, Windows Server 2003 and MySQL 4.1.11. and here is what I was able to figure out.<br />
To get MySQL and PHP to talk to each other, in the php.cfg, dont forget to turn on the tag<br />
cgi.force_redirect = 0, and make sure you set it at 0 (it is default at 1. just delete the semi-colon from in front of it to activate it in the code) Then the phpinfo will say its reading the cfg from your PHP install directory instead of your WINDOWS root. Then your phpinfo will show the MySQL entry that some people may be having a hard time with. No registry settings or copying of anything is needed. Also follow the rest of the excellent help from the user comments. Here's what I did, to make it simple:<br />
I made a folder in the folder tree just above program files (explore your computer) and named it PHP. I extracted the .zip php version into it (not the auto install version). I edited the php.ini-recommended, renamed it to just php, added my sql username, database name, etc.( you really gotta look closely at the cfg file and make sure you dont overlook something). Turned on the extension=php_mysql.dll (just delete the semi-colon thats in front of it). Added the php folder to the PATH (instructions on how to do this are pretty simple, and documented above). I also made the ext folder available to the PATH, but Im not sure if it's really necessary. The user comments are what really helped me, so I thought I would return the favor, and try to expand on this topic a little bit.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53329""></a>
  <div class="note">
   <strong class="user">noel at nettensity dot com</strong>
   <a href="#53329" class="date">28-May-2005 10:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Enabling MySQL with Windows Server 2003/IIS 6.0:<br />
Find your php.ini file first, check phpinfo() to see where php is currently looking for php.ini. (i.e. Using the Windows installer for PHP 5.0.4, the php.ini file was placed in the C:\Windows dir.) I recommend, however, that you don't use the installer - go with full manual install.<br />
<br />
Set the following in php.ini:<br />
display_errors = on<br />
error_reporting = E_ALL<br />
This will make sure that you'll see any errors that arise during configuration. MAKE SURE TO CORRECT THESE WHEN YOU ARE DONE PLAYING WITH PHP.INI! Do not leave these settings like this on a production machine.<br />
<br />
In php.ini set the following:<br />
extension_dir = "pathtoextensions (ususally [yourpathtophp]\ext)"<br />
extension=php_mysql.dll (make sure this is un-commented if its already in your php.ini)<br />
<br />
In IIS, open Web Service Extensions, click "Add a new Web service extension..."<br />
Type-in PHP for the extension name<br />
Under required files:<br />
Add&nbsp; [yourpathtophp]\php5isapi.dll<br />
Add&nbsp; [yourpathtophp]\php5ts.dll<br />
Click 'Apply' then click 'OK'<br />
<br />
Create web sites like you normally would, but make sure they have executable permissions, not just script access. Under the "Home Directory" tab, click 'Configuration'. Scroll down the list at the top and see if you can find PHP. If you do, make sure the path to the executable for PHP is correct. If you don't find PHP in the list, click 'Add...', then browse to the correct executable, [yourpathtophp]\php5isapi.dll, and click OK. In the extension field, enter 'PHP'. Verbs should already be set to 'All verbs', leave it like that.<br />
<br />
Create a test page with this code:<br />
&lt;? echo(phpinfo()); ?&gt;<br />
call it test.php, and place this file into the web site you just created. Browse to the page, with firefox preferably ;), and make sure that you have a MySql section with some MySql info in there. If not, then your paths are possibly screwed up, or you're still not editing the correct php.ini (again, look at the location that phpinfo() shows you, and just edit it there if you have to, then move it afterwards and re-config).<br />
<br />
Hope this helps!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52858""></a>
  <div class="note">
   <strong class="user">medic at setiherbipolis dot de</strong>
   <a href="#52858" class="date">15-May-2005 08:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Client does not support authentication protocol requested by server; consider upgrading MySQL client<br />
<br />
means that you're using an old version of MySQL Client ( possibly not mysqli)<br />
<br />
Authentication protocol for MySQL has changed with version 4.1.<br />
<br />
To get a hint at which mysql-client version you're using try phpinfo();</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50659""></a>
  <div class="note">
   
   <a href="#50659" class="date">05-Mar-2005 11:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are installing PHP5 on Windows 2003 server (AKA Win 2k3) and need MySQL to work using the either the php_mysql.dll or php_mysqli.dll or both of them at the same time, and MySQl isn't showing up in phpinfo, then your php.ini is probably not loading.&nbsp; In the direction in the PHP 5 zip file, they will tell you to add your PHP install directory to your windows path.&nbsp; This should tell php where to load its php.ini from but it doesn't.&nbsp; If you want to get this to work, you don't have to copy any DLL's anywhere like everyone suggests.&nbsp; All you have to do is add the folling regsitry key to windows:<br />
<br />
[HKEY_LOCAL_MACHINE\SOFTWARE\PHP]<br />
"IniFilePath"="C:\\PHP"<br />
<br />
simply copy the above 2 lines of code into a text file and save the file as php_ini_path.reg<br />
<br />
After you save the file it will look like a registry file.&nbsp; Simply double click on it. <br />
<br />
It will make it so PHP will look for your php.ini in C:\PHP.&nbsp; I would assume you can edit this if you install php into a different location, but I haven't tried that.<br />
<br />
After running the reg file, make sure your php.ini is in your PHP dir and make sure all the appropriate things are set.&nbsp; This should get you up and running.&nbsp; Make sure you also follow all the steps on how to make it work in IIS.&nbsp; This is just an addition to the direction.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50569""></a>
  <div class="note">
   <strong class="user">Protik Mukherjee</strong>
   <a href="#50569" class="date">03-Mar-2005 09:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Fedora mysql problems!!<br />
In Fedora 3 the php mysql module does not come with the default installation. To install it use $&gt;yum install php_mysql<br />
If u dont do this you will get errors with mysql functions like mysql_connect()<br />
<br />
Hope this helps!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46478""></a>
  <div class="note">
   <strong class="user">nleippe at integr8ted dot com</strong>
   <a href="#46478" class="date">12-Oct-2004 03:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
trace_mode breaks SQL_CALC_FOUND_ROWS.<br />
This is because it emits an EXPLAIN &lt;query&gt; before sending the &lt;query&gt; by itself, thus the subsequent SELECT FOUND_ROWS() is no longer the next consecutive query, and the result is zero.<br />
This was true for me for at least MySQL 4.0.21 and 4.1.5gamma.<br />
(PHP 4.3.9)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="44750""></a>
  <div class="note">
   <strong class="user">aidan at php dot net</strong>
   <a href="#44750" class="date">15-Aug-2004 05:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to replicate the output of `mysql --html`, printing your results in a HTML table, see this function:
<br />

<br />
<a href="http://aidanlister.com/repos/v/function.mysql_draw_table.php" rel="nofollow" target="_blank">http://aidanlister.com/repos/v/function.mysql_draw_table.php</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42726""></a>
  <div class="note">
   <strong class="user">irn-bru at gmx dot de</strong>
   <a href="#42726" class="date">27-May-2004 05:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note, that the sql.safe_mode configuration setting does effect all mysql_* functions. This has nothing to to with the php safe mode, check the [SQL] section in php.ini.<br />
<br />
I found out, that if you set sql.safe_mode = On, mysql_connect will ignore provided username and passwort and makes use of the script owner instead (checked on debian).<br />
<br />
Brian</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="30347""></a>
  <div class="note">
   <strong class="user">soren at byu dot edu</strong>
   <a href="#30347" class="date">14-Mar-2003 01:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Let's say that you want to generate a MySQL password hash from a plain text password.&nbsp; Normally, you would just submit the MySQL query "SELECT PASSWORD('password')", but if for some reason you can't access to MySQL database directly, then you can use the following function (translated right out of the MySQL source code):
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">mysql_password</span><span class="keyword">(</span><span class="default">$passStr</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nr</span><span class="keyword">=</span><span class="default">0x50305735</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nr2</span><span class="keyword">=</span><span class="default">0x12345671</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$add</span><span class="keyword">=</span><span class="default">7</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$charArr </span><span class="keyword">= </span><span class="default">preg_split</span><span class="keyword">(</span><span class="string">"//"</span><span class="keyword">, </span><span class="default">$passStr</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$charArr </span><span class="keyword">as </span><span class="default">$char</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ((</span><span class="default">$char </span><span class="keyword">== </span><span class="string">''</span><span class="keyword">) || (</span><span class="default">$char </span><span class="keyword">== </span><span class="string">' '</span><span class="keyword">) || (</span><span class="default">$char </span><span class="keyword">== </span><span class="string">'\t'</span><span class="keyword">)) continue;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$charVal </span><span class="keyword">= </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$char</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nr </span><span class="keyword">^= (((</span><span class="default">$nr </span><span class="keyword">&amp; </span><span class="default">63</span><span class="keyword">) + </span><span class="default">$add</span><span class="keyword">) * </span><span class="default">$charVal</span><span class="keyword">) + (</span><span class="default">$nr </span><span class="keyword">&lt;&lt; </span><span class="default">8</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nr2 </span><span class="keyword">+= (</span><span class="default">$nr2 </span><span class="keyword">&lt;&lt; </span><span class="default">8</span><span class="keyword">) ^ </span><span class="default">$nr</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$add </span><span class="keyword">+= </span><span class="default">$charVal</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">"%08x%08x"</span><span class="keyword">, (</span><span class="default">$nr </span><span class="keyword">&amp; </span><span class="default">0x7fffffff</span><span class="keyword">), (</span><span class="default">$nr2 </span><span class="keyword">&amp; </span><span class="default">0x7fffffff</span><span class="keyword">));
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
example:
<br />

<br />
&lt;? print mysql_password("hello"); ?&gt;
<br />

<br />
outputs:
<br />

<br />
70de51425df9d787
<br />

<br />
Which is the same result you get if you do "SELECT PASSWORD('hello')" directly in MySQL.&nbsp; Hopefully you'll never be in a situation where you have to use this, but if you need it (like I did), it's here.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="27029""></a>
  <div class="note">
   <strong class="user">mijnpc at xs4all dot nl</strong>
   <a href="#27029" class="date">20-Nov-2002 02:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you have a Windows machine running a webserver with PHP you don't need to install MySQL server to locally test scripts, if you are granted to establish a Secure Telnet connection (port 22) to the remote webserver.<br />
<br />
To do this you need a Secure Telnet client, which supports port-forwarding.<br />
Before you establish a connection, define the port-forward.<br />
Forward local port 3306 to [name or ip of remote server]:3306<br />
Make sure that local ports accept connections from other hosts<br />
Save this session<br />
<br />
Connect to remote server with username and password<br />
Minimize the shell and that's it...<br />
<br />
You can use the same username (and password) as if you were working on the remote server !<br />
E.g. : $link = mysql_connect("localhost", "root", "") or die("no way jose");<br />
<br />
You may get a shell-timeout after xx minutes depending on your remote server, just reconnect or press enter in the shell once in a while...<br />
<br />
An example of a superb freeware Secure Telnet client is Putty : Putty : <a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/" rel="nofollow" target="_blank">http://www.chiark.greenend.org.uk/~sgtatham/putty/</a><br />
<br />
This 'discovery' really has saved me a lot of time because I don't have to upload the scripts to the remote server time and time again, pressing [save] is enough, heh (-:</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="15667""></a>
  <div class="note">
   <strong class="user">skelley at diff dot nl</strong>
   <a href="#15667" class="date">25-Sep-2001 02:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi, here's a nice little trick to select records in random order from a table in a MySQL database prior to version 3.23
<br />

<br />
SELECT *, (ItemID/ItemID)*RAND() AS MyRandom FROM Items ORDER BY MyRandom
<br />

<br />
[Editors note: And just "SELECT * FROM foo ORDER BY RAND()" after 3.23]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="14386""></a>
  <div class="note">
   <strong class="user">mbabcock-php at fibrespeed dot net</strong>
   <a href="#14386" class="date">28-Jul-2001 07:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Since there aren't functions to start and end/rollback transactions, you'll have to use mysql_query("BEGIN"), mysql_query("COMMIT") and mysql_query("ROLLBACK").&nbsp; These will only work properly on tables that support transactions.&nbsp; You may also wish to roll your own mysql_begin (etc) functions that run the above queries for you.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="13569""></a>
  <div class="note">
   <strong class="user">mw-php at ender dot com</strong>
   <a href="#13569" class="date">21-Jun-2001 09:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The mysql_fetch_[row|object|array] functions return data as type string. Owing to the very flexible nature of php variables, this is normally not relevent, but if you happen to retrieve two integers from a database, then try to compare with bitwise operators, you'll run into trouble, because (19 &amp; 2) == 2, but ("19" &amp; "2") == 0. To remedy this, if you use variables from a database with bitwise operators, use the settype() function to explicitly cast your variables as integers before comparing.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Sybase 函数</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="sybase.constants.html">? 预定义常量</a></li>
      <li style="float: right;"><a href="function.sybase-affected-rows.html">sybase_affected_rows ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="book.sybase.html">Sybase</a></li>
    <li>Sybase 函数</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="ref.sybase" class="reference">
 <h1 class="title">Sybase 函数</h1>

  























































































































































<h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="function.sybase-affected-rows.html">sybase_affected_rows</a> &mdash; Gets number of affected rows in last query</li><li><a href="function.sybase-close.html">sybase_close</a> &mdash; Closes a Sybase connection</li><li><a href="function.sybase-connect.html">sybase_connect</a> &mdash; Opens a Sybase server connection</li><li><a href="function.sybase-data-seek.html">sybase_data_seek</a> &mdash; Moves internal row pointer</li><li><a href="function.sybase-deadlock-retry-count.html">sybase_deadlock_retry_count</a> &mdash; Sets the deadlock retry count</li><li><a href="function.sybase-fetch-array.html">sybase_fetch_array</a> &mdash; Fetch row as array</li><li><a href="function.sybase-fetch-assoc.html">sybase_fetch_assoc</a> &mdash; Fetch a result row as an associative array</li><li><a href="function.sybase-fetch-field.html">sybase_fetch_field</a> &mdash; Get field information from a result</li><li><a href="function.sybase-fetch-object.html">sybase_fetch_object</a> &mdash; Fetch a row as an object</li><li><a href="function.sybase-fetch-row.html">sybase_fetch_row</a> &mdash; Get a result row as an enumerated array</li><li><a href="function.sybase-field-seek.html">sybase_field_seek</a> &mdash; Sets field offset</li><li><a href="function.sybase-free-result.html">sybase_free_result</a> &mdash; Frees result memory</li><li><a href="function.sybase-get-last-message.html">sybase_get_last_message</a> &mdash; Returns the last message from the server</li><li><a href="function.sybase-min-client-severity.html">sybase_min_client_severity</a> &mdash; Sets minimum client severity</li><li><a href="function.sybase-min-error-severity.html">sybase_min_error_severity</a> &mdash; Sets minimum error severity</li><li><a href="function.sybase-min-message-severity.html">sybase_min_message_severity</a> &mdash; Sets minimum message severity</li><li><a href="function.sybase-min-server-severity.html">sybase_min_server_severity</a> &mdash; Sets minimum server severity</li><li><a href="function.sybase-num-fields.html">sybase_num_fields</a> &mdash; Gets the number of fields in a result set</li><li><a href="function.sybase-num-rows.html">sybase_num_rows</a> &mdash; Get number of rows in a result set</li><li><a href="function.sybase-pconnect.html">sybase_pconnect</a> &mdash; Open persistent Sybase connection</li><li><a href="function.sybase-query.html">sybase_query</a> &mdash; Sends a Sybase query</li><li><a href="function.sybase-result.html">sybase_result</a> &mdash; Get result data</li><li><a href="function.sybase-select-db.html">sybase_select_db</a> &mdash; Selects a Sybase database</li><li><a href="function.sybase-set-message-handler.html">sybase_set_message_handler</a> &mdash; Sets the handler called when a server message is raised</li><li><a href="function.sybase-unbuffered-query.html">sybase_unbuffered_query</a> &mdash; Send a Sybase query and do not block</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="98974""></a>
  <div class="note">
   <strong class="user">tgburrin</strong>
   <a href="#98974" class="date">19-Jul-2010 12:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For ASE 15 you can run $SYBASE/$SYBASE_OCS/scripts/lnsyblibs to create symlinks for the older library names.&nbsp; Using this instead of cp will presumably not break your installation should you apply something like an EBF.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76954""></a>
  <div class="note">
   <strong class="user">jeffersonmfs at hotmail dot com</strong>
   <a href="#76954" class="date">07-Aug-2007 05:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PHP and Sybase 15<br />
<br />
# cat /opt/sybase/SYBASE.sh &gt;&gt; /etc/profile<br />
# exit<br />
&nbsp;&nbsp; <br />
Make new logon<br />
<br />
# vi /var/build/php-5.2.3/ext/sybase_ct/php_sybase_ct.h<br />
<br />
change this line ...<br />
#define CTLIB_VERSION CS_VERSION_100<br />
...to...<br />
#define CTLIB_VERSION CS_VERSION_150<br />
<br />
# ln -sd /opt/sybase /home/sybase<br />
<br />
# cp /opt/sybase/OCS-15_0/lib/libsybcomn.a&nbsp; &nbsp;&nbsp; /opt/sybase/OCS-15_0/lib/libcomn.a<br />
&nbsp;&nbsp; &nbsp; &nbsp; <br />
# cp /opt/sybase/OCS-15_0/lib/libsybcs.a&nbsp; &nbsp;&nbsp; /opt/sybase/OCS-15_0/lib/libs.a<br />
<br />
# cp /opt/sybase/OCS-15_0/lib/libsybct.a&nbsp; &nbsp;&nbsp; /opt/sybase/OCS-15_0/lib/libct.a<br />
<br />
# cp /opt/sybase/OCS-15_0/lib/libsybintl.a&nbsp; &nbsp;&nbsp; /opt/sybase/OCS-15_0/lib/libintl.a<br />
<br />
The new&nbsp; file&nbsp; /etc/ld.so.conf.d/sybase it must have the line <br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; /opt/sybase/OCS-15_0/lib<br />
<br />
# ldconfig<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; BUILD PHP<br />
<br />
# ./configure --with-apxs2=/usr/sbin/apxs --with-config-file-path=/etc/ --with-sybase-ct=/opt/sybase/OCS-15_0<br />
<br />
# make<br />
<br />
# make install<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
# cp php.ini-dist&nbsp; /etc/php.ini<br />
<br />
Change display_erros=On to display_erros=Off<br />
<br />
Edit Apache's httpd.conf file to associate .php files with a MIME type:<br />
<br />
#<br />
# PHP script support<br />
#<br />
AddType application/x-httpd-php .php</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58234""></a>
  <div class="note">
   <strong class="user">sean dot healey at bayernlb dot co dot uk</strong>
   <a href="#58234" class="date">28-Oct-2005 03:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've finally got PHP 5.0.5 running under Apache2 on Solaris 8 ... connecting to Sybase ASE servers 12.0 and 12.5 using CT-LIB 12.5.<br />
<br />
The following was my build procedure -<br />
<br />
Build Apache:<br />
<br />
./configure \<br />
&nbsp; --prefix=/usr/local/apache2 \<br />
&nbsp; --enable-so<br />
<br />
make<br />
make install<br />
<br />
Edit httpd.conf, adjusting directives to suit the local environment.<br />
<br />
Following advice given above, update the Sybase version string in the PHP sybase_ct module header file:<br />
<br />
vi /var/build/php-5.0.5/ext/sybase_ct/php_sybase_ct.h<br />
<br />
change this line ...<br />
#define CTLIB_VERSION CS_VERSION_100<br />
...to...<br />
#define CTLIB_VERSION CS_VERSION_125<br />
<br />
Build PHP:<br />
<br />
SYBASE=/..../..../sybase12_5&nbsp; &lt;&lt;-- path to your Sybase distribution root<br />
SYBASE_OCS=OCS-12_5<br />
LD_LIBRARY_PATH=$SYBASE/$SYBASE_OCS/lib<br />
<br />
export SYBASE SYBASE_OCS PATH LD_LIBRARY_PATH<br />
<br />
./configure \<br />
&nbsp; --prefix=/usr/local/php \<br />
&nbsp; --with-sybase-ct=$SYBASE/$SYBASE_OCS \<br />
&nbsp; --enable-static=sybase-ct \<br />
&nbsp; --with-apxs2=/usr/local/apache2/bin/apxs \<br />
&nbsp; --enable-sysvmsg \<br />
&nbsp; --enable-sysvsem \<br />
&nbsp; --enable-sysvshm<br />
<br />
make<br />
make test<br />
<br />
NOTE: 'make test' will almost certainly fail all of the Sybase functionality, unless you update the test include file to use valid connectivity details for your local server:<br />
<br />
vi /var/build/php-5.0.5/ext/sybase_ct/tests/test.inc<br />
<br />
&nbsp; // Change if needed<br />
&nbsp; define('HOST',&nbsp; &nbsp;&nbsp; '****');<br />
&nbsp; define('USER',&nbsp; &nbsp;&nbsp; '****');<br />
&nbsp; define('PASSWORD', '****');<br />
<br />
make install<br />
<br />
Edit Apache's httpd.conf file to associate .php files with a MIME type:<br />
<br />
&nbsp; #<br />
&nbsp; # PHP script support<br />
&nbsp; #<br />
&nbsp; AddType application/x-httpd-php .php .phtml<br />
&nbsp; AddType application/x-httpd-php-source .phps<br />
<br />
Edit the apachectl script, inserting the following variable declarations after environment variables are imported:<br />
<br />
&nbsp; SYBASE=/..../..../sybase12_5<br />
&nbsp; SYBASE_OCS=OCS-12_5<br />
&nbsp; LD_LIBRARY_PATH=$SYBASE/$SYBASE_OCS/lib:$LD_LIBRARY_PATH<br />
&nbsp; export SYBASE SYBASE_OCS LD_LIBRARY_PATH<br />
<br />
Ensure you have an 'interfaces' file in the root of your sybase distribution (Above the OCS-12_5 subdirectory), containing a server entry in the following format for each server you want to connect to:<br />
<br />
&nbsp; dataservername_ds<br />
&nbsp;&nbsp; &lt;tab&gt; master tcp ether &lt;hostname&gt; &lt;port&gt;<br />
&nbsp;&nbsp; &lt;tab&gt; query tcp ether &lt;hostname&gt; &lt;port&gt;<br />
<br />
(if this is your dataserver machine, there will be at least 1 entry already for the local dataserver. It is advisable to install all of the above on a separate machine though, with its own copy of the sybase client)<br />
<br />
Cross fingers, and:<br />
<br />
apachectl start<br />
<br />
If you get 'relocation' errors when starting Apache with the php module configured to load, check the output of 'ldd libphp5.so'. Each of the Sybase libraries should link to files under your Sybase client distribution:<br />
<br />
ldd /usr/local/apache2/modules/libphp5.so <br />
&nbsp;&nbsp;&nbsp; libtcl.so =&gt;&nbsp; &nbsp;&nbsp; /.../sybase12_5/OCS-12_5/lib/libtcl.so<br />
&nbsp;&nbsp;&nbsp; libintl.so.1 =&gt; /.../sybase12_5/OCS-12_5/lib/libintl.so.1<br />
&nbsp;&nbsp;&nbsp; libcomn.so =&gt; /.../sybase12_5/OCS-12_5/lib/libcomn.so<br />
&nbsp;&nbsp;&nbsp; libct.so =&gt;&nbsp; &nbsp; &nbsp; /.../sybase12_5/OCS-12_5/lib/libct.so<br />
&nbsp;&nbsp;&nbsp; libcs.so =&gt;&nbsp; &nbsp; &nbsp; /.../sybase12_5/OCS-12_5/lib/libcs.so<br />
&nbsp;&nbsp;&nbsp; ...<br />
&nbsp;&nbsp; &lt;snip other libraries&gt;<br />
&nbsp;&nbsp;&nbsp; ...<br />
<br />
If you see 'libintl.so' linking anywhere else, this is likely because the PHP build has incorrectly linked to a slightly different filename - libintl.so.1 - which doesn't exist in the Sybase client. Unfortunately a completely unrelated library of the same name does exist elsewhere in Unix! (Apparently the Sybase version was created before the duplicate was introduced into Unix).<br />
<br />
My workaround was to create the following symlink in sybase client library 'lib' directory -<br />
<br />
&nbsp; libintl.so.1 -&gt; ./libintl.so*<br />
<br />
'make distclean' in your PHP build directory, and repeat the build as above.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56892""></a>
  <div class="note">
   <strong class="user">zeldorblat at gmail dot com</strong>
   <a href="#56892" class="date">18-Sep-2005 01:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In response to the post by jon dot bertsch at ucop dot edu, it is possible to install both the FreeTDS libraries and the Sybase libraries.&nbsp; The problem is that the Sybase extension alias's its function names to the mssql_ functions.<br />
<br />
Take a look in your PHP source directory under /ext/sybase_ct/php_sybase_ct.c near the top where the sybase_functions[] declaration is.&nbsp; You can comment out the part that alias's the function names, recompile with FreeTDS and Sybase, and you're all set!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54147""></a>
  <div class="note">
   <strong class="user">jon dot bertsch at ucop dot edu</strong>
   <a href="#54147" class="date">24-Jun-2005 11:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Up to php 5.0.4 you cannot install both sybase and mssql (they use the same function names). It turns out though that if you use the Freetds library you can connect to sybase using the mssql functions (and visa versa I assume). Setup your servers in the freetds.conf file (for sybase use specify version 5.0, for mssql 7 or 8.0) and call the database connection as you would with mssql (mssql_conect). You should be able to connect either sql server or sybase. I don't know if all sybase functions will work as expected but basic querying is succesful. Hope this helps someone.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="48170""></a>
  <div class="note">
   <strong class="user">punkarruso at despammed dot com</strong>
   <a href="#48170" class="date">14-Dec-2004 05:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I just want to report that, like explained in bug #27562, selective stored procedures (like sp_helpdb) don't return a resultset with freeTDS &gt;= 0.62. (using php &lt;= 4.3.9)<br />
If you have installed such releases of freeTDS, downgrade to 0.61.x.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="47795""></a>
  <div class="note">
   <strong class="user">matt dot sawyer at gmail dot com</strong>
   <a href="#47795" class="date">30-Nov-2004 08:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've noticed (after days of frustration) that setting the sybase.interface_file to a location other than the default ($SYBASE/interfaces) in php.ini doesn't always work.&nbsp; I finally gave up and copied my interface entries to the default location, and it works consistently now.&nbsp; (This is even with sybase.interface_file still set to the non-default location).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="47613""></a>
  <div class="note">
   <strong class="user">greg dot fenton at ianywhere dot com</strong>
   <a href="#47613" class="date">22-Nov-2004 02:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For Sybase/iAnywhere SQL Anywhere (a.k.a Adaptive Server Anywhere, a.k.a. ASA), you likely should try the SQLAnywhere PHP module [which now ships with ASA as of 9.0.2]:<br />
<br />
&nbsp;&nbsp;&nbsp; <a href="http://www.ianywhere.com/developer/code_samples/sqlany_php_module.html" rel="nofollow" target="_blank">http://www.ianywhere.com/developer/code_samples/sqlany_php_module.html</a><br />
<br />
ASA can work with TDS (Open Client), but if performance is something you care about you likely want to use the native ASA interface.&nbsp; For info/help, consider posting to sybase.public.sqlanywhere.general or sybase.public.sqlanywhere.linux&nbsp; (<a href="http://www.ianywhere.com/support/newsgroups.html" rel="nofollow" target="_blank">http://www.ianywhere.com/support/newsgroups.html</a>)<br />
<br />
Hope this helps,<br />
greg.fenton</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="44377""></a>
  <div class="note">
   <strong class="user">info(at)sovall(dot)cz</strong>
   <a href="#44377" class="date">04-Aug-2004 04:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is way to compile Sybase ASE 12.5 with PHP5.0.0 and Apache 2 on Linux:<br />
- install apache<br />
- install ase1252_de_linux.tgz to /opt/sybase-12.5<br />
- shell:# ln -s /opt/sybase-12.5 /opt/sybase<br />
- edit phpsrc/configure and remove all '-linsck'<br />
- edit phpsrc/ext/sybase-ct/php_sybase_ct.h and change CTLIB_VERSION CS_VERSION_100 to 125<br />
- shell:# export SYBASE=/opt/sybase<br />
- phpsrc/configure --with-sybase-ct=/opt/sybase/OCS-12_5<br />
- phpsrc/make and make install<br />
- edit apache2/conf/httpd.conf and add AddType... .php<br />
- create /opt/sybase/interfaces file<br />
SERVERNAME<br />
[tab!]master tcp ether ipAddress port<br />
[tab!]query tcp ether ipAddress port<br />
- apache2/bin/apachectl start<br />
<br />
I hope, that I save your time.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="40943""></a>
  <div class="note">
   <strong class="user">1rsv_sign_mail.ru (stas_aka_rsv)</strong>
   <a href="#40943" class="date">23-Mar-2004 10:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is a way how to force php work with both php_mssql.dll and php_sybase_ct.dll. Just open php_sybase_ct.dll in any editor (dont use MS WORD :0) ) and replace all "mssql_" on something like that "masql_".<br />
After that there will not be warnings about double function definitions and php can use php_sybase_ct.dll to access to sybase and php_mssql.dll to access to mssql.<br />
The reason why I did such thing is that I couldnt connect to mssql using php_sybase_ct.dll.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="40798""></a>
  <div class="note">
   <strong class="user">ms at klmoberg dot no</strong>
   <a href="#40798" class="date">15-Mar-2004 05:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I solved my connection problems by setting ENV variables directly in PHP.<br />
<br />
putenv ("SYBASE=/opt/sybase");<br />
putenv ("SYBPLATFORM=linux");<br />
putenv ("LD_LIBRARY_PATH=/opt/sybase/lib"); <br />
putenv ("LC_ALL=default");<br />
putenv ("PATH=\"/opt/sybase/bin:$PATH\"");<br />
putenv ("DSQUERY=SYBASE");<br />
<br />
--<br />
Martin Sarajervi</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="25804""></a>
  <div class="note">
   <strong class="user">ddc at portalframework dot com</strong>
   <a href="#25804" class="date">07-Oct-2002 06:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you would like to use the wide table support of Sybase ASE 12.5, take advantage of XML/XQL embedded in the database and use varchars of more than 255 char, you'll need to recompile PHP changing this line in the<br />
&nbsp;&nbsp;&nbsp; php_sybase_ct.h file:<br />
<br />
From:<br />
<br />
#define CTLIB_VERSION CS_VERSION_100<br />
<br />
To:<br />
<br />
#define CTLIB_VERSION CS_VERSION_125<br />
<br />
This will only run if you have installed Sybase ASE Open Client v. 12.5 and configured PHP telling it where the OCS is... (./configure --with-sybase-ct=$SYBASE_HOME/OCS [...])<br />
<br />
--<br />
Diego Dal Cero.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="24914""></a>
  <div class="note">
   <strong class="user">aj at bootsector dot org</strong>
   <a href="#24914" class="date">04-Sep-2002 02:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A note for all who may be struggling...&nbsp; Microsoft did away with the ct-lib support in SQL Server 2000.<br />
<br />
I played with it and found a couple of articles related to it on google.&nbsp; A workaround/different method would be preferrable.&nbsp; Anybody?</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="21472""></a>
  <div class="note">
   <strong class="user">ddc at portalframework.com</strong>
   <a href="#21472" class="date">14-May-2002 11:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Compiling PHP with Sybase ASE 12.5 on Linux.<br />
<br />
Assuming that you have installed the Sybase ASE 12.5 client in linux, and you have the SYBASE env variable set, you can compile PHP &gt;= 4.0.6 with Sybase ASE 12.5.<br />
Just use:<br />
<br />
&nbsp; --with-sybase-ct=$SYBASE/OCS<br />
instead of<br />
&nbsp; --with-sybase-ct=$SYBASE</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="20750""></a>
  <div class="note">
   <strong class="user">elee at kinwai dot net</strong>
   <a href="#20750" class="date">15-Apr-2002 02:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Freetds 5.2 bugs!!<br />
<br />
For those who use Freetds 5.2 running under linux connect to sqlserver2000, there is a bugs in selecting NVARCHAR field that data will either duplicated or truncated. To avoid this problem, please use CAST or CONVERT function in sql statement such as:<br />
$query="select CAST(fieldname as nchar(1000)) as fieldname from table"<br />
<br />
Feel free to contact us at <br />
aikok@netfront.net<br />
or<br />
elee@kinwai.net<br />
<br />
German Chu &amp; Eagle Lee</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="16349""></a>
  <div class="note">
   <strong class="user">basilio_mail at chat dot ru</strong>
   <a href="#16349" class="date">25-Oct-2001 03:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those, who might want to use SyBase client not only under Linux, you may try to use open-source FreeTDS library - <a href="http://www.freetds.org " rel="nofollow" target="_blank">http://www.freetds.org </a>
<br />

<br />
Also there's how-to for FreeTDS and PHP:
<br />
<a href="http://www.freetds.org/userguide/php.html" rel="nofollow" target="_blank">http://www.freetds.org/userguide/php.html</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="15096""></a>
  <div class="note">
   <strong class="user">rbuico at ntep dot nec dot co dot jp</strong>
   <a href="#15096" class="date">27-Aug-2001 08:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
maybe it can help.
<br />
my database is ASE
<br />

<br />
this is my script....
<br />

<br />
&lt;?
<br />
$cnn = sybase_connect("db_server","sa","password");
<br />
$result = sybase_query("Select itemno,stockno from your_db..your_table");
<br />
$i = 0;
<br />
while ($r = sybase_fetch_array($result)) {
<br />
$i++;
<br />
$itemno = $r["itemno"];
<br />
$stockno = $r["stockno"];
<br />
echo "$i&nbsp; &nbsp; $stockno&nbsp;&nbsp; $itemno &lt;br&gt;";
<br />
}
<br />
?&gt;
<br />

<br />
note that I did not use the
<br />
sybase_select_db("db") function because ASE had a default database.
<br />
thx...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="13670""></a>
  <div class="note">
   <strong class="user">borreo at softhome dot net</strong>
   <a href="#13670" class="date">28-Jun-2001 06:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It's important to note that sybase_ct connect or pconnect were causing GPF.
<br />
If you experienced this problem, just update PHP to 4.0.6.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="8963""></a>
  <div class="note">
   <strong class="user">koos at kzdoos dot xs4all dot nl</strong>
   <a href="#8963" class="date">09-Oct-2000 11:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A bit more about blobs:
<br />
If you want to retrieve blobs without them getting truncated, do a 'set textsize value' query first.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="8320""></a>
  <div class="note">
   <strong class="user">chptma at hydra dot esfm dot ipn dot mx</strong>
   <a href="#8320" class="date">06-Sep-2000 01:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
about sybase-ct library 
<br />

<br />
You can download the file from php.net but the samples in the tar (and php) maybe not compile I have this problem in some systems (but not in others with old librarys and old gcc).
<br />

<br />
Try freetds from www.freetds.org that is ok!
<br />

<br />
System wthout trouble
<br />
Debian 2.1 gcc (2.7.2.3) libc-2.0.7.so
<br />
System With trouble
<br />
Debian 2.2 gcc (2.95.2) libc-2.1.3.so
<br />
RedHat 6.2 gcc [egcs] (2.91.66) libc-2.1.3.so
<br />

<br />
Please refer to mssql if you try to connect to MS SQL Server!!!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="7894""></a>
  <div class="note">
   <strong class="user">hoadley at xoom dot com</strong>
   <a href="#7894" class="date">18-Aug-2000 02:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I would STRONGLY recommend using the ct library over the db library when compiling sybase support with php4+. I ran into strange http child seg faults when trying to issue multiple sql statements in one php page.&nbsp; Using ct-library there is no problem.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="4540""></a>
  <div class="note">
   <strong class="user">james at lasolas dot com</strong>
   <a href="#4540" class="date">21-Mar-2000 06:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you get a segfault with sybase-ct, add a en_US entry to your&nbsp; $SYBASE/locales/locales.dat file: 
<br />

<br />
[linux]
<br />
&nbsp;&nbsp;&nbsp; locale = en_US, us_english, iso_1
<br />
&nbsp;&nbsp;&nbsp; ...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="4222""></a>
  <div class="note">
   <strong class="user">ericnewman at aol dot com</strong>
   <a href="#4222" class="date">06-Mar-2000 01:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I struggled to get this to work for a week. Here's a tip. Log on to your system using the same login as your web server, probably "nobody". Using this account, make sure you can get isql to work. In my case, I had to change the permissions on the /opt/sybase folder, as well as chmod the /opt/sybase/interfaces file to 644. (It was 600 by default, and did not allow anyone but root to read it.) Once I did this, things started to happen...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="4100""></a>
  <div class="note">
   <strong class="user">tcurdt at dff dot st</strong>
   <a href="#4100" class="date">01-Mar-2000 01:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Poor documentation on sybase support!! Here's how I made it work... First get the linux ASE from sybase (maybe the ctlibs provided at php.net will do fine, too) Install the ASE rpm. (some distributions don't have system libs etc in the rpm database so you might get some dependency errors. If your systems fits the requirements install with "ignore dependencies") Recompile php with option --with-sybase-ct=/dirtoyoursybasehome. Then you need to set the env variable for (at least)your apache user by export SYBASE=/dirtoyoursybasehome. Now you need to set up your servers (like DSNs for ODBC). Edit the file $SYBASE/interfaces and add your server entries:
<br />

<br />
SERVERNAME
<br />
&nbsp; query tcp ether 172.16.1.4 4100
<br />
&nbsp; master tcp ether 172.16.1.4 4100
<br />

<br />
(change IP/FQHN and port to your setup) Now you can check your config by using 
<br />
$SYBASE/bin/isql -S SERVERNAME -U DBUSER -P PASSWD
<br />
If you get a prompt you have connected to your sybase! Hurray! Now you can try with php
<br />
$db=sybase_connect("SERVERNAME","DBUSER","DBPASSWD");
<br />
And... Voila!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="3873""></a>
  <div class="note">
   <strong class="user">Xtof at fromages-et-desserts dot com</strong>
   <a href="#3873" class="date">20-Feb-2000 10:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To store an image file into Sybase try this :
<br />

<br />
$data = bin2hex(fread(fopen($image,"r"), filesize($image)));
<br />
//don't forget the 0x before the hex data.
<br />
if(! sybase_query("INSERT INTO test_image (image) VALUES (0x".$data.")")) die ("Unable to store the image.");
<br />

<br />
To retrieve it just do a select and use a hex2bin function (this one has been submitted by carl@five-ten-sg.com and is the fastest) :
<br />

<br />
function hex2bin($data) {
<br />
&nbsp;&nbsp; &nbsp; $len = strlen($data);
<br />
&nbsp;&nbsp; &nbsp;&nbsp; return pack("H" . $len, $data);
<br />
}
<br />

<br />
PS : use CT-lib rather than DB-lib (Sybase doesn't work on it anymore!)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

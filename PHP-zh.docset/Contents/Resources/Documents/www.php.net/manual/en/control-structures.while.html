<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>while</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="control-structures.alternative-syntax.html">? 流程控制的替代语法</a></li>
      <li style="float: right;"><a href="control-structures.do.while.html">do-while ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="language.control-structures.html">流程控制</a></li>
    <li>while</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="control-structures.while" class="sect1">
 <h2 class="title">while</h2>
 <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p>
 <p class="para">
  <code class="literal">while</code> 循环是 PHP 中最简单的循环类型。它和
  C 语言中的 <code class="literal">while</code> 表现地一样。<code class="literal">while</code>
  语句的基本格式是：
  <div class="informalexample">
   <div class="example-contents">
<div class="cdata"><pre>
while (expr)
    statement
</pre></div>
   </div>

  </div>
 </p>
 <p class="simpara">
  <code class="literal">while</code> 语句的含意很简单，它告诉 PHP 只要
  <code class="literal">while</code> 表达式的值为 <strong><code>true</code></strong>
  就重复执行嵌套中的循环语句。表达式的值在每次开始循环时检查，所以即使这个值在循环语句中改变了，语句也不会停止执行，直到本次循环结束。
  如果 <code class="literal">while</code> 表达式的值一开始就是 <strong><code>false</code></strong>，则循环语句一次都不会执行。
 </p>
 <p class="para">
  和 <code class="literal">if</code> 语句一样，可以在 <code class="literal">while</code>
  循环中用花括号括起一个语句组，或者用替代语法：
  <div class="informalexample">
   <div class="example-contents">
<div class="cdata"><pre>
while (expr):
    statement
    ...
endwhile;
</pre></div>
   </div>

  </div>
 </p>
 <p class="para">
  下面两个例子完全一样，都显示数字 1 到 10：
  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;示例&nbsp;1&nbsp;*/<br /><br /></span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />while&nbsp;(</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">&lt;=&nbsp;</span><span style="color: #0000BB">10</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;在自增前（后自增）打印的值将会是&nbsp;$i&nbsp;*/<br /></span><span style="color: #007700">}<br /><br /></span><span style="color: #FF8000">/*&nbsp;示例&nbsp;2&nbsp;*/<br /><br /></span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />while&nbsp;(</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">&lt;=&nbsp;</span><span style="color: #0000BB">10</span><span style="color: #007700">):<br />&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++;<br />endwhile;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </p>
</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="126014""></a>
  <div class="note">
   <strong class="user">Dan Liebner</strong>
   <a href="#126014" class="date">16-Apr-2021 05:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
While loops don't require a code block (statement).<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">while( ++</span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">10 </span><span class="keyword">); </span><span class="comment">// look ma, no brackets!<br />
<br />
</span><span class="keyword">echo </span><span class="default">$i</span><span class="keyword">; </span><span class="comment">// 10<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="125919""></a>
  <div class="note">
   <strong class="user">mparsa1372 at gmail dot com</strong>
   <a href="#125919" class="date">12-Mar-2021 03:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The example below displays the numbers from 1 to 5:<br />
<br />
<span class="default">&lt;?php<br />
$x </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
<br />
while(</span><span class="default">$x </span><span class="keyword">&lt;= </span><span class="default">5</span><span class="keyword">) {<br />
&nbsp; echo </span><span class="string">"The number is: </span><span class="default">$x</span><span class="string"> &lt;br&gt;"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$x</span><span class="keyword">++;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
This example counts to 100 by tens:<br />
<br />
<span class="default">&lt;?php<br />
$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
<br />
while(</span><span class="default">$x </span><span class="keyword">&lt;= </span><span class="default">100</span><span class="keyword">) {<br />
&nbsp; echo </span><span class="string">"The number is: </span><span class="default">$x</span><span class="string"> &lt;br&gt;"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$x</span><span class="keyword">+=</span><span class="default">10</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="121944""></a>
  <div class="note">
   <strong class="user">nickleus at gmail dot com</strong>
   <a href="#121944" class="date">29-Nov-2017 03:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
$i </span><span class="keyword">= -</span><span class="default">1</span><span class="keyword">;<br />
while (</span><span class="default">$i</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$i</span><span class="keyword">++;<br />
}<br />
</span><span class="default">?&gt;<br />
</span>outputs&nbsp; "-1" then stops because "0" (zero) gets evaluated as FALSE.<br />
<br />
this demonstrates why it's important for a PDO statement fetch-ing a column value inside a while-loop to test explicitly for FALSE.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119261""></a>
  <div class="note">
   <strong class="user">synnus at gmail dot com</strong>
   <a href="#119261" class="date">28-Apr-2016 05:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php <br />
<br />
</span><span class="comment">// test While Vs For php 5.6.17<br />
<br />
</span><span class="default">$t1 </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
</span><span class="default">$a</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
while(</span><span class="default">$a</span><span class="keyword">++ &lt;= </span><span class="default">1000000000</span><span class="keyword">);<br />
</span><span class="default">$t2 </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
</span><span class="default">$x1 </span><span class="keyword">= </span><span class="default">$t2 </span><span class="keyword">- </span><span class="default">$t1</span><span class="keyword">;<br />
echo </span><span class="default">PHP_EOL</span><span class="keyword">,</span><span class="string">' &gt; while($a++ &lt;= 100000000); : ' </span><span class="keyword">,</span><span class="default">$x1</span><span class="keyword">, </span><span class="string">'s'</span><span class="keyword">, </span><span class="default">PHP_EOL</span><span class="keyword">;<br />
<br />
</span><span class="default">$t3 </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
for(</span><span class="default">$a</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$a </span><span class="keyword">&lt;= </span><span class="default">1000000000</span><span class="keyword">;</span><span class="default">$a</span><span class="keyword">++);<br />
</span><span class="default">$t4 </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
</span><span class="default">$x2 </span><span class="keyword">= </span><span class="default">$t4 </span><span class="keyword">- </span><span class="default">$t3</span><span class="keyword">;<br />
echo </span><span class="default">PHP_EOL</span><span class="keyword">,</span><span class="string">'&gt; for($a=0;$a &lt;= 100000000;$a++); : ' </span><span class="keyword">,</span><span class="default">$x2</span><span class="keyword">, </span><span class="string">'s'</span><span class="keyword">, </span><span class="default">PHP_EOL</span><span class="keyword">;<br />
<br />
</span><span class="default">$t5 </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
</span><span class="default">$a</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; for(;</span><span class="default">$a</span><span class="keyword">++ &lt;= </span><span class="default">1000000000</span><span class="keyword">;);<br />
</span><span class="default">$t6 </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
</span><span class="default">$x3 </span><span class="keyword">= </span><span class="default">$t6 </span><span class="keyword">- </span><span class="default">$t5</span><span class="keyword">;<br />
echo </span><span class="default">PHP_EOL</span><span class="keyword">,</span><span class="string">' &gt; $a=0; for(;$a++ &lt;= 100000000;); : ' </span><span class="keyword">, </span><span class="default">$x3</span><span class="keyword">, </span><span class="string">'s'</span><span class="keyword">, </span><span class="default">PHP_EOL</span><span class="keyword">;<br />
<br />
</span><span class="comment">//&gt; while($a++ &lt;= 100000000);&nbsp;&nbsp; = 18.509671926498s<br />
//<br />
//&gt; for($a=0;$a &lt;= 100000000;$a++);&nbsp; =&nbsp; 25.450572013855s<br />
//<br />
//&gt; $a=0; for(;$a++ &lt;= 100000000;);&nbsp; =&nbsp; 22.614907979965s<br />
<br />
// ===================<br />
<br />
//&gt; while($a++ != 100000000); : 18.204656839371s<br />
//<br />
//&gt; for($a=0;$a != 100000000;$a++); : 25.025605201721s<br />
//<br />
//&gt; $a=0; for(;$a++ != 100000000;); : 22.340576887131s<br />
<br />
// ===================<br />
<br />
//&gt; while($a++ &lt; 100000000); : 18.383454084396s<br />
//<br />
//&gt; for($a=0;$a &lt; 100000000;$a++); : 25.290743112564s<br />
//<br />
//&gt; $a=0; for(;$a++ &lt; 100000000;); : 23.28609919548s<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118103""></a>
  <div class="note">
   <strong class="user">er dot sarimkhan786 at gmail dot com</strong>
   <a href="#118103" class="date">05-Oct-2015 08:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
simple pyramid pattern program using while loop<br />
<span class="default">&lt;?php <br />
$i</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;<br />
while(</span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">5</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$j</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; while(</span><span class="default">$j</span><span class="keyword">&lt;=</span><span class="default">$i</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; echo</span><span class="string">"*&amp;nbsp&amp;nbsp"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$j</span><span class="keyword">++;&nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; echo</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
}<br />
</span><span class="default">?&gt;<br />
</span>// or alternatively you can use:<br />
<span class="default">&lt;?php<br />
$i</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;<br />
while(</span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">5</span><span class="keyword">):<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$j</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; while(</span><span class="default">$j</span><span class="keyword">&lt;=</span><span class="default">$i</span><span class="keyword">):<br />
&nbsp;&nbsp; &nbsp;&nbsp; echo</span><span class="string">"*&amp;nbsp&amp;nbsp"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$j</span><span class="keyword">++;&nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; endwhile;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; echo</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
endwhile;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109801""></a>
  <div class="note">
   <strong class="user">qeremy [atta] gmail [dotta] com</strong>
   <a href="#109801" class="date">22-Aug-2012 08:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Instead of this usage;<br />
<br />
<span class="default">&lt;?php<br />
$arr </span><span class="keyword">= array(</span><span class="string">"orange"</span><span class="keyword">, </span><span class="string">"banana"</span><span class="keyword">, </span><span class="string">"apple"</span><span class="keyword">, </span><span class="string">"raspberry"</span><span class="keyword">);<br />
<br />
</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
while (</span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">)) {<br />
&nbsp;&nbsp; </span><span class="default">$a </span><span class="keyword">= </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; echo </span><span class="default">$a </span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
}<br />
</span><span class="comment">// or<br />
</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
</span><span class="default">$c </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
while (</span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$c</span><span class="keyword">) {<br />
&nbsp;&nbsp; </span><span class="default">$a </span><span class="keyword">= </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; echo </span><span class="default">$a </span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
This could be more efficient;<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">while (</span><span class="default">$a </span><span class="keyword">= </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">1 </span><span class="keyword">* </span><span class="default">$i</span><span class="keyword">++]) echo </span><span class="default">$a </span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96591""></a>
  <div class="note">
   <strong class="user">ravenswd at gmail dot com</strong>
   <a href="#96591" class="date">06-Mar-2010 07:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I find it often clearer to set a simple flag ($finished) to false at the start of the loop, and have the program set it to true when it's finished doing whatever it's trying to do. Then the code is more self-documenting: WHILE NOT FINISHED keep going through the loop. FINISHED EQUALS TRUE when you're done. Here's an example. This is the code I use to generate a random filename and ensure that there is not already an existing file with the same name. I've added very verbose comments to it to make it clear how it works:<br />
<br />
<span class="default">&lt;?php<br />
$finaldir </span><span class="keyword">= </span><span class="string">'download'</span><span class="keyword">;<br />
<br />
</span><span class="default">$finished </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// we're not finished yet (we just started)<br />
</span><span class="keyword">while ( ! </span><span class="default">$finished </span><span class="keyword">):&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// while not finished<br />
&nbsp; </span><span class="default">$rn </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">();&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// random number<br />
&nbsp; </span><span class="default">$outfile </span><span class="keyword">= </span><span class="default">$finaldir</span><span class="keyword">.</span><span class="string">'/'</span><span class="keyword">.</span><span class="default">$rn</span><span class="keyword">.</span><span class="string">'.gif'</span><span class="keyword">;&nbsp;&nbsp; </span><span class="comment">// output file name<br />
&nbsp; </span><span class="keyword">if ( ! </span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$outfile</span><span class="keyword">) ):&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// if file DOES NOT exist...<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$finished </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// ...we are finished<br />
&nbsp; </span><span class="keyword">endif;<br />
endwhile;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// (if not finished, re-start WHILE loop)<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93919""></a>
  <div class="note">
   <strong class="user">scott at mstech dot com</strong>
   <a href="#93919" class="date">06-Oct-2009 02:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just a note about using the continue statement to forego the remainder of a loop - be SURE you're not issuing the continue statement from within a SWITCH case - doing so will not continue the while loop, but rather the switch statement itself.<br />
<br />
While that may seem obvious to some, it took a little bit of testing for me, so hopefully this helps someone else.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="19408""></a>
  <div class="note">
   <strong class="user">chayes at antenna dot nl</strong>
   <a href="#19408" class="date">26-Feb-2002 02:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
At the end of the while (list / each) loop the array pointer will be at the end. 
<br />
This means the second while loop on that array will be skipped!
<br />

<br />
You can put the array pointer back with the reset($myArray) function.
<br />

<br />
example: 
<br />

<br />
<span class="default">&lt;?php
<br />
$myArray</span><span class="keyword">=array(</span><span class="string">'aa'</span><span class="keyword">,</span><span class="string">'bb'</span><span class="keyword">,</span><span class="string">'cc'</span><span class="keyword">,</span><span class="string">'dd'</span><span class="keyword">);
<br />
&nbsp;while (list (</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">) = </span><span class="default">each </span><span class="keyword">(</span><span class="default">$myArray</span><span class="keyword">) ) echo </span><span class="default">$val</span><span class="keyword">; 
<br />
</span><span class="default">reset</span><span class="keyword">(</span><span class="default">$myArray</span><span class="keyword">);
<br />
&nbsp;while (list (</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">) = </span><span class="default">each </span><span class="keyword">(</span><span class="default">$myArray</span><span class="keyword">) ) echo </span><span class="default">$val</span><span class="keyword">;
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

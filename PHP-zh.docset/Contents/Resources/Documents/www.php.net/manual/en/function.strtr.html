<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>转换指定字符</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.strtoupper.html">? strtoupper</a></li>
      <li style="float: right;"><a href="function.substr-compare.html">substr_compare ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.strings.html">字符串 函数</a></li>
    <li>转换指定字符</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.strtr" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">strtr</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">strtr</span> &mdash; <span class="dc-title">转换指定字符</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.strtr-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>strtr</strong></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$str</code></span>, <span class="methodparam"><span class="type">string</span> <code class="parameter">$from</code></span>, <span class="methodparam"><span class="type">string</span> <code class="parameter">$to</code></span>): <span class="type">string</span></div>

  <div class="methodsynopsis dc-description"><span class="methodname"><strong>strtr</strong></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$str</code></span>, <span class="methodparam"><span class="type">array</span> <code class="parameter">$replace_pairs</code></span>): <span class="type">string</span></div>

  <p class="para rdfs-comment">
   该函数返回 <code class="parameter">str</code> 的一个副本，并将在 <code class="parameter">from</code> 中指定的字符转换为 <code class="parameter">to</code> 中相应的字符。
   比如， <code class="literal">$from[$n]</code>中每次的出现都会被替换为
   <code class="literal">$to[$n]</code>，其中 <code class="literal">$n</code> 是两个参数都有效的位移(offset)。
  </p>
  <p class="para">
   如果 <code class="parameter">from</code> 与 <code class="parameter">to</code> 长度不相等，那么多余的字符部分将被忽略。 <code class="parameter">str</code> 的长度将会和返回的值一样。
  </p>
  <p class="para">
   If given two arguments, the second should be an <span class="type">array</span> in the
   form <code class="literal">array(&#039;from&#039; =&gt; &#039;to&#039;, ...)</code>. The return value is
   a <span class="type">string</span> where all the occurrences of the array keys have been
   replaced by the corresponding values. The longest keys will be tried first.
   Once a substring has been replaced, its new value will not be searched
   again.
  </p>
  <p class="para">
   In this case, the keys and the values may have any length, provided that
   there is no empty key; additionally, the length of the return value may
   differ from that of <code class="parameter">str</code>.
   However, this function will be the most efficient when all the keys have the
   same size.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.strtr-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">str</code></dt>

     <dd>

      <p class="para">
       待转换的<span class="type"><span class="type 字符串">字符串</span></span>。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">from</code></dt>

     <dd>

      <p class="para">
       <span class="type"><span class="type 字符串">字符串</span></span>中与将要被转换的目的字符 <code class="parameter">to</code> 相对应的源字符。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">to</code></dt>

     <dd>

      <p class="para">
       <span class="type"><span class="type 字符串">字符串</span></span>中与将要被转换的字符 <code class="parameter">from</code> 相对应的目的字符。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">replace_pairs</code></dt>

     <dd>

      <p class="para">
       参数 <code class="parameter">replace_pairs</code> 可以用来取代 <code class="parameter">to</code> 和 <code class="parameter">from</code> 参数，因为它是以  <code class="literal">array(&#039;from&#039; =&gt; &#039;to&#039;, ...)</code> 格式出现的数组。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 
 <div class="refsect1 returnvalues" id="refsect1-function.strtr-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   返回转换后的<span class="type"><span class="type 字符串">字符串</span></span>。
  </p>
  <p class="para">
   如果 <code class="parameter">replace_pairs</code> 中包含一个空<span class="type"><span class="type 字符串">字符串</span></span>（<code class="literal">&quot;&quot;</code>）键，那么将返回 <strong><code>false</code></strong>。
   If the <code class="parameter">str</code> is not a scalar
   then it is not typecasted into a string, instead a warning is raised and 
   <strong><code>null</code></strong> is returned. 
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.strtr-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-4757">
    <p><strong>Example #1 <span class="function"><strong>strtr()</strong></span> 范例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$addr&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strtr</span><span style="color: #007700">(</span><span style="color: #0000BB">$addr</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"???"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"aao"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   The next example shows the behavior of <span class="function"><strong>strtr()</strong></span> when
   called with only two arguments. Note the preference of the replacements
   (<code class="literal">&quot;h&quot;</code> is not picked because there are longer matches)
   and how replaced text was not searched again.
  </p>
  <div class="example" id="example-4758">
   <p><strong>Example #2 使用两个参数的 <span class="function"><strong>strtr()</strong></span> 范例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$trans&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"hello"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"hi"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"hi"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"hello"</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">strtr</span><span style="color: #007700">(</span><span style="color: #DD0000">"hi&nbsp;all,&nbsp;I&nbsp;said&nbsp;hello"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$trans</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
hello all, I said hi
</pre></div>
    </div>
  </div>
  <p class="para">
   The two modes of behavior are substantially different. With three arguments,
   <span class="function"><strong>strtr()</strong></span> will replace bytes; with two, it may replace
   longer substrings.
  </p>
  <div class="example" id="example-4759">
   <p><strong>Example #3 <span class="function"><strong>strtr()</strong></span> behavior comparison</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">strtr</span><span style="color: #007700">(</span><span style="color: #DD0000">"baab"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"ab"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"01"</span><span style="color: #007700">),</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$trans&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"ab"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"01"</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">strtr</span><span style="color: #007700">(</span><span style="color: #DD0000">"baab"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$trans</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
1001
ba01
</pre></div>
    </div>
  </div>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.strtr-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.str-replace.html" class="function" rel="rdfs-seeAlso">str_replace()</a> - 子字符串替换</span></li>
    <li class="member"><span class="function"><a href="function.preg-replace.html" class="function" rel="rdfs-seeAlso">preg_replace()</a> - 执行一个正则表达式的搜索和替换</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="125093""></a>
  <div class="note">
   <strong class="user">tekintian#gmail.com</strong>
   <a href="#125093" class="date">07-Jun-2020 12:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
/**<br />
&nbsp;*&nbsp; <br />
&nbsp;*&nbsp; 将一个字串中含有全角的数字字符、字母、空格或'%+-()'字符转换为相应半角字符<br />
&nbsp;* @author tekintian#gmail.com<br />
&nbsp;* @param&nbsp;&nbsp; string&nbsp; &nbsp; &nbsp;&nbsp; $str&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 待转换字串<br />
&nbsp;*<br />
&nbsp;* @return&nbsp; string&nbsp; &nbsp; &nbsp;&nbsp; $str&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 处理后字串<br />
&nbsp;*/<br />
function str2byte_convert(String $str):String&nbsp; {<br />
&nbsp;&nbsp;&nbsp; $arr = array('０' =&gt; '0', '１' =&gt; '1', '２' =&gt; '2', '３' =&gt; '3', '４' =&gt; '4',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; '５' =&gt; '5', '６' =&gt; '6', '７' =&gt; '7', '８' =&gt; '8', '９' =&gt; '9',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'Ａ' =&gt; 'A', 'Ｂ' =&gt; 'B', 'Ｃ' =&gt; 'C', 'Ｄ' =&gt; 'D', 'Ｅ' =&gt; 'E',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'Ｆ' =&gt; 'F', 'Ｇ' =&gt; 'G', 'Ｈ' =&gt; 'H', 'Ｉ' =&gt; 'I', 'Ｊ' =&gt; 'J',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'Ｋ' =&gt; 'K', 'Ｌ' =&gt; 'L', 'Ｍ' =&gt; 'M', 'Ｎ' =&gt; 'N', 'Ｏ' =&gt; 'O',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'Ｐ' =&gt; 'P', 'Ｑ' =&gt; 'Q', 'Ｒ' =&gt; 'R', 'Ｓ' =&gt; 'S', 'Ｔ' =&gt; 'T',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'Ｕ' =&gt; 'U', 'Ｖ' =&gt; 'V', 'Ｗ' =&gt; 'W', 'Ｘ' =&gt; 'X', 'Ｙ' =&gt; 'Y',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'Ｚ' =&gt; 'Z', 'ａ' =&gt; 'a', 'ｂ' =&gt; 'b', 'ｃ' =&gt; 'c', 'ｄ' =&gt; 'd',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'ｅ' =&gt; 'e', 'ｆ' =&gt; 'f', 'ｇ' =&gt; 'g', 'ｈ' =&gt; 'h', 'ｉ' =&gt; 'i',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'ｊ' =&gt; 'j', 'ｋ' =&gt; 'k', 'ｌ' =&gt; 'l', 'ｍ' =&gt; 'm', 'ｎ' =&gt; 'n',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'ｏ' =&gt; 'o', 'ｐ' =&gt; 'p', 'ｑ' =&gt; 'q', 'ｒ' =&gt; 'r', 'ｓ' =&gt; 's',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'ｔ' =&gt; 't', 'ｕ' =&gt; 'u', 'ｖ' =&gt; 'v', 'ｗ' =&gt; 'w', 'ｘ' =&gt; 'x',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'ｙ' =&gt; 'y', 'ｚ' =&gt; 'z',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; '（' =&gt; '(', '）' =&gt; ')', '〔' =&gt; '[', '〕' =&gt; ']', '【' =&gt; '[',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; '】' =&gt; ']', '〖' =&gt; '[', '〗' =&gt; ']', '"' =&gt; '[', '"' =&gt; ']',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ''' =&gt; '[', ''' =&gt; ']', '｛' =&gt; '{', '｝' =&gt; '}', '《' =&gt; '&lt;',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; '》' =&gt; '&gt;',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; '％' =&gt; '%', '＋' =&gt; '+', '&mdash;' =&gt; '-', '－' =&gt; '-', '～' =&gt; '-',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; '：' =&gt; ':', '。' =&gt; '.', '、' =&gt; ',', '，' =&gt; '.', '、' =&gt; '.',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; '；' =&gt; ',', '？' =&gt; '?', '！' =&gt; '!', '...' =&gt; '-', '‖' =&gt; '|',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; '"' =&gt; '"', ''' =&gt; '`', ''' =&gt; '`', '｜' =&gt; '|', '〃' =&gt; '"',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; '　' =&gt; ' ');<br />
<br />
&nbsp;&nbsp;&nbsp; return strtr($str, $arr);<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124599""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#124599" class="date">10-Jan-2020 10:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The string, string form cannot remove characters, but the array form can.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="123120""></a>
  <div class="note">
   <strong class="user">Annubis</strong>
   <a href="#123120" class="date">09-Sep-2018 06:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Since I was having a lot of trouble finding a multibyte safe strtr and the solutions I found didn't help, I came out with this function, I don't know how it works with non latin chars but it works for me using spanish/french utf8, I hope it helps someone... <br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if(!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'mb_strtr'</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">mb_strtr </span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$from</span><span class="keyword">, </span><span class="default">$to </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$from</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$from </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'utf8_decode'</span><span class="keyword">, </span><span class="default">$from</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$from </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'utf8_decode'</span><span class="keyword">, </span><span class="default">array_flip </span><span class="keyword">(</span><span class="default">$from</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">utf8_encode </span><span class="keyword">(</span><span class="default">strtr </span><span class="keyword">(</span><span class="default">utf8_decode </span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">), </span><span class="default">array_flip </span><span class="keyword">(</span><span class="default">$from</span><span class="keyword">)));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">utf8_encode </span><span class="keyword">(</span><span class="default">strtr </span><span class="keyword">(</span><span class="default">utf8_decode </span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">), </span><span class="default">utf8_decode</span><span class="keyword">(</span><span class="default">$from</span><span class="keyword">), </span><span class="default">utf8_decode </span><span class="keyword">(</span><span class="default">$to</span><span class="keyword">)));<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117169""></a>
  <div class="note">
   <strong class="user">evan dot king at NOSPAM dot example dot com</strong>
   <a href="#117169" class="date">24-Apr-2015 03:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's an important real-world example use-case for strtr where str_replace will not work or will introduce obscure bugs:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$strTemplate </span><span class="keyword">= </span><span class="string">"My name is :name, not :name2."</span><span class="keyword">;<br />
</span><span class="default">$strParams </span><span class="keyword">= [<br />
&nbsp; </span><span class="string">':name' </span><span class="keyword">=&gt; </span><span class="string">'Dave'</span><span class="keyword">,<br />
&nbsp; </span><span class="string">'Dave' </span><span class="keyword">=&gt; </span><span class="string">':name2 or :password'</span><span class="keyword">, </span><span class="comment">// a wrench in the otherwise sensible input<br />
&nbsp; </span><span class="string">':name2' </span><span class="keyword">=&gt; </span><span class="string">'Steve'</span><span class="keyword">,<br />
&nbsp; </span><span class="string">':pass' </span><span class="keyword">=&gt; </span><span class="string">'7hf2348'</span><span class="keyword">, </span><span class="comment">// sensitive data that maybe shouldn't be here<br />
</span><span class="keyword">];<br />
<br />
echo </span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$strTemplate</span><span class="keyword">, </span><span class="default">$strParams</span><span class="keyword">);<br />
</span><span class="comment">// "My name is Dave, not Steve."<br />
<br />
</span><span class="keyword">echo </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$strParams</span><span class="keyword">), </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$strParams</span><span class="keyword">), </span><span class="default">$strTemplate</span><span class="keyword">);<br />
</span><span class="comment">// "My name is Steve or 7hf2348word, not Steve or 7hf2348word2."<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Any time you're trying to template out a string and don't necessarily know what the replacement keys/values will be (or fully understand the implications of and control their content and order), str_replace will introduce the potential to incorrectly match your keys because it does not expand the longest keys first.<br />
<br />
Further, str_replace will replace in previous replacements, introducing potential for unintended nested expansions.&nbsp; Doing so can put the wrong data into the "sub-template" or even give users a chance to provide input that exposes data (if they get to define some of the replacement strings).<br />
<br />
Don't support recursive expansion unless you need it and know it will be safe.&nbsp; When you do support it, do so explicitly by repeating strtr calls until no more expansions are occurring or a sane iteration limit is reached, so that the results never implicitly depend on order of your replacement keys.&nbsp; Also make certain that any user input will expanded in an isolated step after any sensitive data is already expanded into the output and no longer available as input.<br />
<br />
Note: using some character(s) around your keys to designate them also reduces the possibility of unintended mangling of output, whether maliciously triggered or otherwise.&nbsp; Thus the use of a colon prefix in these examples, which you can easily enforce when accepting replacement input to your templating/translation system.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115988""></a>
  <div class="note">
   <strong class="user">Romain</strong>
   <a href="#115988" class="date">23-Oct-2014 09:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Clean string,<br />
&nbsp;&nbsp; &nbsp; * minimize and remove space, accent and other<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; * @param string $string<br />
&nbsp;&nbsp; &nbsp; * @return string<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">mb_strtoclean</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Valeur a nettoyer (conversion)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$unwanted_array </span><span class="keyword">= array(&nbsp; &nbsp; </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'S'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'s'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'Z'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'z'</span><span class="keyword">, </span><span class="string">'à'</span><span class="keyword">=&gt;</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'á'</span><span class="keyword">=&gt;</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'è'</span><span class="keyword">=&gt;</span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'é'</span><span class="keyword">=&gt;</span><span class="string">'E'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'ê'</span><span class="keyword">=&gt;</span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'ì'</span><span class="keyword">=&gt;</span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'í'</span><span class="keyword">=&gt;</span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'N'</span><span class="keyword">, </span><span class="string">'ò'</span><span class="keyword">=&gt;</span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'ó'</span><span class="keyword">=&gt;</span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'ù'</span><span class="keyword">=&gt;</span><span class="string">'U'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'ú'</span><span class="keyword">=&gt;</span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'ü'</span><span class="keyword">=&gt;</span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'Y'</span><span class="keyword">=&gt;</span><span class="string">'Y'</span><span class="keyword">, </span><span class="string">'T'</span><span class="keyword">=&gt;</span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'Ss'</span><span class="keyword">, </span><span class="string">'à'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'á'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'c'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'è'</span><span class="keyword">=&gt;</span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'é'</span><span class="keyword">=&gt;</span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'ê'</span><span class="keyword">=&gt;</span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'ì'</span><span class="keyword">=&gt;</span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'í'</span><span class="keyword">=&gt;</span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'e'</span><span class="keyword">=&gt;</span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'n'</span><span class="keyword">, </span><span class="string">'ò'</span><span class="keyword">=&gt;</span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'ó'</span><span class="keyword">=&gt;</span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'o'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'ù'</span><span class="keyword">=&gt;</span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'ú'</span><span class="keyword">=&gt;</span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'y'</span><span class="keyword">=&gt;</span><span class="string">'y'</span><span class="keyword">, </span><span class="string">'y'</span><span class="keyword">=&gt;</span><span class="string">'y'</span><span class="keyword">, </span><span class="string">'t'</span><span class="keyword">=&gt;</span><span class="string">'b'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'y'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">' ' </span><span class="keyword">=&gt; </span><span class="string">''</span><span class="keyword">, </span><span class="string">'_' </span><span class="keyword">=&gt; </span><span class="string">''</span><span class="keyword">, </span><span class="string">'-' </span><span class="keyword">=&gt; </span><span class="string">''</span><span class="keyword">, </span><span class="string">'.'</span><span class="keyword">=&gt; </span><span class="string">''</span><span class="keyword">, </span><span class="string">',' </span><span class="keyword">=&gt; </span><span class="string">''</span><span class="keyword">, </span><span class="string">';' </span><span class="keyword">=&gt; </span><span class="string">''</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">mb_strtolower</span><span class="keyword">(</span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$unwanted_array </span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112959""></a>
  <div class="note">
   <strong class="user">doydoy44</strong>
   <a href="#112959" class="date">12-Aug-2013 04:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The example of VOVA (<a href="http://www.php.net/manual/fr/function.strtr.php#111968" rel="nofollow" target="_blank">http://www.php.net/manual/fr/function.strtr.php#111968</a>) is good but the result is false:<br />
His example dont replace the string.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">f1_strtr</span><span class="keyword">() {<br />
&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">1000000</span><span class="keyword">; ++</span><span class="default">$i</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$new_string </span><span class="keyword">= </span><span class="default">strtr</span><span class="keyword">(</span><span class="string">"aboutdealers.com"</span><span class="keyword">, array(</span><span class="string">".com" </span><span class="keyword">=&gt; </span><span class="string">""</span><span class="keyword">));<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$new_string</span><span class="keyword">;<br />
}<br />
function </span><span class="default">f2_str_replace</span><span class="keyword">() {<br />
&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">1000000</span><span class="keyword">; ++</span><span class="default">$i</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$new_string </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">".com"</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">, </span><span class="string">"aboutdealers.com"</span><span class="keyword">);<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$new_string</span><span class="keyword">;<br />
}<br />
</span><span class="default">$start </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
</span><span class="default">$strtr </span><span class="keyword">= </span><span class="default">f1_strtr</span><span class="keyword">();<br />
</span><span class="default">$stop </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
</span><span class="default">$time_strtr </span><span class="keyword">= </span><span class="default">$stop </span><span class="keyword">- </span><span class="default">$start</span><span class="keyword">;<br />
&nbsp;<br />
</span><span class="default">$start </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
</span><span class="default">$str_replace </span><span class="keyword">= </span><span class="default">f2_str_replace</span><span class="keyword">();<br />
</span><span class="default">$stop </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
</span><span class="default">$time_str_replace </span><span class="keyword">= </span><span class="default">$stop </span><span class="keyword">- </span><span class="default">$start</span><span class="keyword">;<br />
&nbsp;<br />
&nbsp;<br />
echo </span><span class="string">'time strtr&nbsp; &nbsp; &nbsp;&nbsp; : ' </span><span class="keyword">. </span><span class="default">$time_strtr&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">. </span><span class="string">"\tresult :" </span><span class="keyword">. </span><span class="default">$strtr&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;<br />
echo </span><span class="string">'time str_replace : ' </span><span class="keyword">. </span><span class="default">$time_str_replace </span><span class="keyword">. </span><span class="string">"\tresult :" </span><span class="keyword">. </span><span class="default">$str_replace </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;<br />
echo </span><span class="string">'time strtr &gt; time str_replace =&gt; ' </span><span class="keyword">. (</span><span class="default">$time_strtr </span><span class="keyword">&gt; </span><span class="default">$time_str_replace</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>--------------------------------------<br />
time strtr&nbsp; &nbsp; &nbsp;&nbsp; : 3.9719619750977&nbsp; &nbsp; &nbsp; result :aboutdealers<br />
time str_replace : 2.9930369853973&nbsp; &nbsp; &nbsp; result :aboutdealers<br />
time strtr &gt; time str_replace =&gt; 1<br />
<br />
str_replace is faster than strtr</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112930""></a>
  <div class="note">
   <strong class="user">dcz at phpbb-seo dot com</strong>
   <a href="#112930" class="date">08-Aug-2013 08:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
strstr will issue a notice when $replace_pairs contains an array, even unused, with php 5.5.0.<br />
<br />
It was not the case with version at least up to 5.3.2, but I'm not sure the notice was added with exactly 5.5.0.<br />
<br />
<span class="default">&lt;?php<br />
$str </span><span class="keyword">= </span><span class="string">'hi all, I said hello'</span><span class="keyword">;<br />
</span><span class="default">$replace_pairs </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="string">'all' </span><span class="keyword">=&gt; </span><span class="string">'everybody'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'unused' </span><span class="keyword">=&gt; array(</span><span class="string">'somtehing'</span><span class="keyword">, </span><span class="string">'something else'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; </span><span class="string">'hello' </span><span class="keyword">=&gt; </span><span class="string">'hey'</span><span class="keyword">,<br />
);<br />
</span><span class="comment">// php 5.5.0 Notice: Array to string conversion in test.php on line 8<br />
</span><span class="keyword">echo </span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$replace_pairs</span><span class="keyword">); </span><span class="comment">// hi everybody, I said hey<br />
</span><span class="default">?&gt;<br />
</span><br />
since the result is still correct, @strstr seems a working solution.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111270""></a>
  <div class="note">
   <strong class="user">Hayley Watson</strong>
   <a href="#111270" class="date">01-Feb-2013 02:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Since strtr (like PHP's other string functions) treats strings as a sequence of bytes, and since UTF-8 and other multibyte encodings use - by definition - more than one byte for at least some characters, the three-string form is likely to have problems. Use the associative array form to specify the mapping.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Assuming UTF-8<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="string">'?bc ?bc'</span><span class="keyword">; </span><span class="comment">// strtr() sees this as nine bytes (including two for each ?)<br />
</span><span class="keyword">echo </span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">); </span><span class="comment">// The second argument is equivalent to the string "\xc3\x84" so "\xc3" gets replaced by "a" and the "\x84" is ignored<br />
<br />
</span><span class="keyword">echo </span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, array(</span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'a'</span><span class="keyword">)); </span><span class="comment">// Works much better<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111176""></a>
  <div class="note">
   <strong class="user">qeremy [atta] gmail [dotta] com</strong>
   <a href="#111176" class="date">22-Jan-2013 07:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Weird, but strtr corrupting chars, if used like below and if file is encoded in UTF-8;<br />
<br />
<span class="default">&lt;?php<br />
$str </span><span class="keyword">= </span><span class="string">'?bc ?bc'</span><span class="keyword">;<br />
echo </span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">);<br />
</span><span class="comment">// output: a?bc a?bc<br />
</span><span class="default">?&gt;<br />
</span><br />
And a simple solution;<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">strtr_unicode</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$a </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">, </span><span class="default">$b </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$translate </span><span class="keyword">= </span><span class="default">$a</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">) &amp;&amp; !</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a </span><span class="keyword">= (array) </span><span class="default">$a</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$b </span><span class="keyword">= (array) </span><span class="default">$b</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$translate </span><span class="keyword">= </span><span class="default">array_combine</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; );<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// again weird, but accepts an array in this case<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$translate</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="string">'?bc ?bc'</span><span class="keyword">;<br />
echo </span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">) .</span><span class="string">"\n"</span><span class="keyword">;<br />
echo </span><span class="default">strtr_unicode</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">) .</span><span class="string">"\n"</span><span class="keyword">;<br />
echo </span><span class="default">strtr_unicode</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, array(</span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'a'</span><span class="keyword">)) .</span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="comment">// outputs<br />
// a?bc a?bc<br />
// abc abc<br />
// abc abc<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110524""></a>
  <div class="note">
   <strong class="user">Tedy</strong>
   <a href="#110524" class="date">01-Nov-2012 08:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Since strtr() is twice faster than strlwr I decided to write my own lowering function which also handles UTF-8 characters.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">strlwr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$utf </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$latin_letters </span><span class="keyword">= array(</span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'a'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'a'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'i'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'s'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'s'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'t'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'t'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$utf_letters </span><span class="keyword">= array(</span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'?'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'a'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'?'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'?'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'?'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'?'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'?'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$letters </span><span class="keyword">= array(</span><span class="string">'A' </span><span class="keyword">=&gt; </span><span class="string">'a'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'B' </span><span class="keyword">=&gt; </span><span class="string">'b'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'C' </span><span class="keyword">=&gt; </span><span class="string">'c'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'D' </span><span class="keyword">=&gt; </span><span class="string">'d'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'E' </span><span class="keyword">=&gt; </span><span class="string">'e'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'F' </span><span class="keyword">=&gt; </span><span class="string">'f'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'G' </span><span class="keyword">=&gt; </span><span class="string">'g'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'H' </span><span class="keyword">=&gt; </span><span class="string">'h'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'I' </span><span class="keyword">=&gt; </span><span class="string">'i'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'J' </span><span class="keyword">=&gt; </span><span class="string">'j'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'K' </span><span class="keyword">=&gt; </span><span class="string">'k'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'L' </span><span class="keyword">=&gt; </span><span class="string">'l'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'M' </span><span class="keyword">=&gt; </span><span class="string">'m'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'N' </span><span class="keyword">=&gt; </span><span class="string">'n'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'O' </span><span class="keyword">=&gt; </span><span class="string">'o'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'P' </span><span class="keyword">=&gt; </span><span class="string">'p'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Q' </span><span class="keyword">=&gt; </span><span class="string">'q'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'R' </span><span class="keyword">=&gt; </span><span class="string">'r'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'S' </span><span class="keyword">=&gt; </span><span class="string">'s'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'T' </span><span class="keyword">=&gt; </span><span class="string">'t'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'U' </span><span class="keyword">=&gt; </span><span class="string">'u'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'V' </span><span class="keyword">=&gt; </span><span class="string">'v'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'W' </span><span class="keyword">=&gt; </span><span class="string">'w'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'X' </span><span class="keyword">=&gt; </span><span class="string">'x'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Y' </span><span class="keyword">=&gt; </span><span class="string">'y'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Z' </span><span class="keyword">=&gt; </span><span class="string">'z'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return (</span><span class="default">$utf </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">) ? </span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$utf_letters</span><span class="keyword">, </span><span class="default">$letters</span><span class="keyword">)) : </span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$latin_letters</span><span class="keyword">, </span><span class="default">$letters</span><span class="keyword">));<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
This allows you to lower every character (even UTF-8 ones) if you don't set the second parameter, or just lower the UTF-8 ones into their specific latin characters (used when making friendly-urls for example). <br />
<br />
I used romanian characters but, of course, you can add your own local characters. <br />
<br />
Feel free to use/modify this function as you wish. Hope it helps.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106282""></a>
  <div class="note">
   <strong class="user">Michael Schuijff</strong>
   <a href="#106282" class="date">24-Oct-2011 10:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I found that this approach is often faster than strtr() and won't change the same thing in your string twice (as opposed to str_replace(), which will overwrite things in the order of the array you feed it with):<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">replace </span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$length </span><span class="keyword">= </span><span class="default">array_combine</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">, </span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'strlen'</span><span class="keyword">, </span><span class="default">$keys</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">arsort</span><span class="keyword">(</span><span class="default">$length</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">[] = </span><span class="default">$text</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">reset</span><span class="keyword">(</span><span class="default">$length</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">$key </span><span class="keyword">= </span><span class="default">key</span><span class="keyword">(</span><span class="default">$length</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$count</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">+= </span><span class="default">2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ((</span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], </span><span class="default">$key</span><span class="keyword">)) === </span><span class="default">false</span><span class="keyword">) continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, array(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], </span><span class="default">0</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">), </span><span class="default">$replace</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">], </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], </span><span class="default">$pos </span><span class="keyword">+ </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">))));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">+= </span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">next</span><span class="keyword">(</span><span class="default">$length</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">implode</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97439""></a>
  <div class="note">
   <strong class="user">elloromtz at gmail dot com</strong>
   <a href="#97439" class="date">19-Apr-2010 05:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you supply 3 arguments and the 2nd is an array, strtr will search the "A" from "Array" (because you're treating it as a scalar string) and replace it with the 3rd argument:<br />
<br />
strtr('Analogy', array('x'=&gt;'y'),&nbsp; '_'); //'_nalogy'<br />
<br />
so in reality the above code has the same affect as:<br />
<br />
strtr('Analogy', 'A' , '_');</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90925""></a>
  <div class="note">
   <strong class="user">allixsenos at gmail dot com</strong>
   <a href="#90925" class="date">16-May-2009 08:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
fixed "normaliza" functions written below to include Slavic Latin characters... also, it doesn't return lowercase any more (you can easily get that by applying strtolower yourself)...<br />
<br />
also, renamed to normalize()<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">normalize </span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$table </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'S'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'s'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'Dj'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'dj'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'Z'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'z'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'c'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'c'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'à'</span><span class="keyword">=&gt;</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'á'</span><span class="keyword">=&gt;</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'è'</span><span class="keyword">=&gt;</span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'é'</span><span class="keyword">=&gt;</span><span class="string">'E'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'ê'</span><span class="keyword">=&gt;</span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'ì'</span><span class="keyword">=&gt;</span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'í'</span><span class="keyword">=&gt;</span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'N'</span><span class="keyword">, </span><span class="string">'ò'</span><span class="keyword">=&gt;</span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'ó'</span><span class="keyword">=&gt;</span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'O'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'ù'</span><span class="keyword">=&gt;</span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'ú'</span><span class="keyword">=&gt;</span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'ü'</span><span class="keyword">=&gt;</span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'Y'</span><span class="keyword">=&gt;</span><span class="string">'Y'</span><span class="keyword">, </span><span class="string">'T'</span><span class="keyword">=&gt;</span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'Ss'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'à'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'á'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'c'</span><span class="keyword">, </span><span class="string">'è'</span><span class="keyword">=&gt;</span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'é'</span><span class="keyword">=&gt;</span><span class="string">'e'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'ê'</span><span class="keyword">=&gt;</span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'ì'</span><span class="keyword">=&gt;</span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'í'</span><span class="keyword">=&gt;</span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'e'</span><span class="keyword">=&gt;</span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'n'</span><span class="keyword">, </span><span class="string">'ò'</span><span class="keyword">=&gt;</span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'ó'</span><span class="keyword">=&gt;</span><span class="string">'o'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'ù'</span><span class="keyword">=&gt;</span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'ú'</span><span class="keyword">=&gt;</span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'y'</span><span class="keyword">=&gt;</span><span class="string">'y'</span><span class="keyword">, </span><span class="string">'y'</span><span class="keyword">=&gt;</span><span class="string">'y'</span><span class="keyword">, </span><span class="string">'t'</span><span class="keyword">=&gt;</span><span class="string">'b'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'y'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'R'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">=&gt;</span><span class="string">'r'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; );<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$table</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85556""></a>
  <div class="note">
   <strong class="user">Sidney Ricardo</strong>
   <a href="#85556" class="date">05-Sep-2008 11:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This work fine to me:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">normaliza </span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">){
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$a </span><span class="keyword">= </span><span class="string">'àá??????èéê?ìí??D?òó????ùú?üYT
<br />
?àáa?????èéê?ìí??e?òó????ùú?yyt???'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$b </span><span class="keyword">= </span><span class="string">'aaaaaaaceeeeiiiidnoooooouuuuy
<br />
bsaaaaaaaceeeeiiiidnoooooouuuyybyRr'</span><span class="keyword">; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">utf8_decode</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);&nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">utf8_decode</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">), </span><span class="default">$b</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">utf8_encode</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82051""></a>
  <div class="note">
   <strong class="user"> dot  dot  dot  dot  dot alexander at gmail dot com</strong>
   <a href="#82051" class="date">25-Mar-2008 04:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
OK, I debugged the function (had some errors)<br />
Here it is:<br />
<br />
if(!function_exists("stritr")){<br />
&nbsp;&nbsp;&nbsp; function stritr($string, $one = NULL, $two = NULL){<br />
/*<br />
stritr - case insensitive version of strtr<br />
Author: Alexander Peev<br />
Posted in PHP.NET<br />
*/<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(&nbsp; is_string( $one )&nbsp; ){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $two = strval( $two );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $one = substr(&nbsp; $one, 0, min( strlen($one), strlen($two) )&nbsp; );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $two = substr(&nbsp; $two, 0, min( strlen($one), strlen($two) )&nbsp; );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $product = strtr(&nbsp; $string, ( strtoupper($one) . strtolower($one) ), ( $two . $two )&nbsp; );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return $product;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else if(&nbsp; is_array( $one )&nbsp; ){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $pos1 = 0;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $product = $string;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while(&nbsp; count( $one ) &gt; 0&nbsp; ){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $positions = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(&nbsp; $one as $from =&gt; $to&nbsp; ){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(&nbsp;&nbsp; (&nbsp; $pos2 = stripos( $product, $from, $pos1 )&nbsp; ) === FALSE&nbsp;&nbsp; ){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(&nbsp; $one[ $from ]&nbsp; );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $positions[ $from ] = $pos2;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(&nbsp; count( $one ) &lt;= 0&nbsp; )break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $winner = min( $positions );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $key = array_search(&nbsp; $winner, $positions&nbsp; );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $product = (&nbsp;&nbsp; substr(&nbsp; $product, 0, $winner&nbsp; ) . $one[$key] . substr(&nbsp; $product, ( $winner + strlen($key) )&nbsp; )&nbsp;&nbsp; );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $pos1 = (&nbsp; $winner + strlen( $one[$key] )&nbsp; );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return $product;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return $string;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }/* endfunction stritr */<br />
}/* endfunction exists stritr */</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82039""></a>
  <div class="note">
   <strong class="user"> dot  dot  dot  dot  dot alexander at gmail dot com</strong>
   <a href="#82039" class="date">25-Mar-2008 10:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is the stritr I always needed... I wrote it in 15 minutes... But only after the idea struck me. Hope you find it helpful, and enjoy...<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if(!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">"stritr"</span><span class="keyword">)){<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">stritr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$one </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$two </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">){<br />
</span><span class="comment">/*<br />
stritr - case insensitive version of strtr<br />
Author: Alexander Peev<br />
Posted in PHP.NET<br />
*/<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(&nbsp; </span><span class="default">is_string</span><span class="keyword">( </span><span class="default">$one </span><span class="keyword">)&nbsp; ){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$two </span><span class="keyword">= </span><span class="default">strval</span><span class="keyword">( </span><span class="default">$two </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$one </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(&nbsp; </span><span class="default">$one</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">min</span><span class="keyword">( </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$one</span><span class="keyword">), </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$two</span><span class="keyword">) )&nbsp; );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$two </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(&nbsp; </span><span class="default">$two</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">min</span><span class="keyword">( </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$one</span><span class="keyword">), </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$two</span><span class="keyword">) )&nbsp; );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$product </span><span class="keyword">= </span><span class="default">strtr</span><span class="keyword">(&nbsp; </span><span class="default">$string</span><span class="keyword">, ( </span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$one</span><span class="keyword">) . </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$one</span><span class="keyword">) ), ( </span><span class="default">$two </span><span class="keyword">. </span><span class="default">$two </span><span class="keyword">)&nbsp; );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$product</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else if(&nbsp; </span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$one </span><span class="keyword">)&nbsp; ){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos1 </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$product </span><span class="keyword">= </span><span class="default">$string</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while(&nbsp; </span><span class="default">count</span><span class="keyword">( </span><span class="default">$one </span><span class="keyword">) &gt; </span><span class="default">0&nbsp; </span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$positions </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(&nbsp; </span><span class="default">$one </span><span class="keyword">as </span><span class="default">$from </span><span class="keyword">=&gt; </span><span class="default">$to&nbsp; </span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(&nbsp;&nbsp; (&nbsp; </span><span class="default">$pos2 </span><span class="keyword">= </span><span class="default">stripos</span><span class="keyword">( </span><span class="default">$product</span><span class="keyword">, </span><span class="default">$from</span><span class="keyword">, </span><span class="default">$pos1 </span><span class="keyword">)&nbsp; ) === </span><span class="default">FALSE&nbsp;&nbsp; </span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(&nbsp; </span><span class="default">$one</span><span class="keyword">[ </span><span class="default">$from </span><span class="keyword">]&nbsp; );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$positions</span><span class="keyword">[ </span><span class="default">$from </span><span class="keyword">] = </span><span class="default">$pos2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$winner </span><span class="keyword">= </span><span class="default">min</span><span class="keyword">( </span><span class="default">$positions </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$key </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(&nbsp; </span><span class="default">$winner</span><span class="keyword">, </span><span class="default">$positions&nbsp; </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$product </span><span class="keyword">= (&nbsp;&nbsp; </span><span class="default">substr</span><span class="keyword">(&nbsp; </span><span class="default">$product</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$winner&nbsp; </span><span class="keyword">) . </span><span class="default">$positions</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] . </span><span class="default">substr</span><span class="keyword">(&nbsp; </span><span class="default">$product</span><span class="keyword">, ( </span><span class="default">$winner </span><span class="keyword">+ </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) )&nbsp; )&nbsp;&nbsp; );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos1 </span><span class="keyword">= (&nbsp; </span><span class="default">$winner </span><span class="keyword">+ </span><span class="default">strlen</span><span class="keyword">( </span><span class="default">$positions</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] )&nbsp; );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$product</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$string</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }</span><span class="comment">/* endfunction stritr */<br />
</span><span class="keyword">}</span><span class="comment">/* endfunction exists stritr */<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80591""></a>
  <div class="note">
   <strong class="user">troelskn at gmail dot com</strong>
   <a href="#80591" class="date">23-Jan-2008 03:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's another transcribe function. This one converts cp1252 (aka. Windows-1252) into iso-8859-1 (aka. latin1, the default PHP charset). It only transcribes the few exotic characters, which are unique to cp1252.<br />
<br />
function transcribe_cp1252_to_latin1($cp1252) {<br />
&nbsp; return strtr(<br />
&nbsp;&nbsp;&nbsp; $cp1252,<br />
&nbsp;&nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp;&nbsp; "\x80" =&gt; "e",&nbsp; "\x81" =&gt; " ",&nbsp; &nbsp; "\x82" =&gt; "'", "\x83" =&gt; 'f',<br />
&nbsp;&nbsp; &nbsp;&nbsp; "\x84" =&gt; '"',&nbsp; "\x85" =&gt; "...",&nbsp; "\x86" =&gt; "+", "\x87" =&gt; "#",<br />
&nbsp;&nbsp; &nbsp;&nbsp; "\x88" =&gt; "^",&nbsp; "\x89" =&gt; "0/00", "\x8A" =&gt; "S", "\x8B" =&gt; "&lt;",<br />
&nbsp;&nbsp; &nbsp;&nbsp; "\x8C" =&gt; "OE", "\x8D" =&gt; " ",&nbsp; &nbsp; "\x8E" =&gt; "Z", "\x8F" =&gt; " ",<br />
&nbsp;&nbsp; &nbsp;&nbsp; "\x90" =&gt; " ",&nbsp; "\x91" =&gt; "`",&nbsp; &nbsp; "\x92" =&gt; "'", "\x93" =&gt; '"',<br />
&nbsp;&nbsp; &nbsp;&nbsp; "\x94" =&gt; '"',&nbsp; "\x95" =&gt; "*",&nbsp; &nbsp; "\x96" =&gt; "-", "\x97" =&gt; "--",<br />
&nbsp;&nbsp; &nbsp;&nbsp; "\x98" =&gt; "~",&nbsp; "\x99" =&gt; "(TM)", "\x9A" =&gt; "s", "\x9B" =&gt; "&gt;",<br />
&nbsp;&nbsp; &nbsp;&nbsp; "\x9C" =&gt; "oe", "\x9D" =&gt; " ",&nbsp; &nbsp; "\x9E" =&gt; "z", "\x9F" =&gt; "Y"));</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76930""></a>
  <div class="note">
   <strong class="user">ajitsingh4u at gmail dot com</strong>
   <a href="#76930" class="date">06-Aug-2007 07:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
/**<br />
* Replaces special characters with single quote,double quote and comma for charset iso-8859-1<br />
*<br />
* replaceSpecialChars()<br />
* @param string $str<br />
* @return string<br />
*/<br />
function replaceSpecialChars($str)<br />
{<br />
&nbsp;&nbsp;&nbsp; //`(96) '(130) ?(132) '(145) '(146) "(147) "(148) ′(180)&nbsp;&nbsp; // equivalent ascii values of these characters.<br />
&nbsp;&nbsp;&nbsp; $str = strtr($str, "`'?''′", "'','''");<br />
&nbsp;&nbsp;&nbsp; $str = strtr($str, '""', '""'); <br />
&nbsp;&nbsp;&nbsp; return $str;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75286""></a>
  <div class="note">
   <strong class="user">horak.jan AT centrum.cz</strong>
   <a href="#75286" class="date">22-May-2007 07:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a function to convert middle-european windows charset (cp1250) to the charset, that php script is written in:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">cp1250_to_utf2</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dict&nbsp; </span><span class="keyword">= array(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">225</span><span class="keyword">) =&gt; </span><span class="string">'á'</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">228</span><span class="keyword">) =&gt;&nbsp; </span><span class="string">'?'</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">232</span><span class="keyword">) =&gt; </span><span class="string">'?'</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">239</span><span class="keyword">) =&gt; </span><span class="string">'?'</span><span class="keyword">, <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">233</span><span class="keyword">) =&gt; </span><span class="string">'é'</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">236</span><span class="keyword">) =&gt; </span><span class="string">'ě'</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">237</span><span class="keyword">) =&gt; </span><span class="string">'í'</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">229</span><span class="keyword">) =&gt; </span><span class="string">'?'</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">229</span><span class="keyword">) =&gt; </span><span class="string">'?'</span><span class="keyword">, <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">242</span><span class="keyword">) =&gt; </span><span class="string">''</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">244</span><span class="keyword">) =&gt; </span><span class="string">'?'</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">243</span><span class="keyword">) =&gt; </span><span class="string">'ó'</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">154</span><span class="keyword">) =&gt; </span><span class="string">'?'</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">248</span><span class="keyword">) =&gt; </span><span class="string">'?'</span><span class="keyword">, <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">250</span><span class="keyword">) =&gt; </span><span class="string">'ú'</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">249</span><span class="keyword">) =&gt; </span><span class="string">'?'</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">157</span><span class="keyword">) =&gt; </span><span class="string">'?'</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">253</span><span class="keyword">) =&gt; </span><span class="string">'y'</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">158</span><span class="keyword">) =&gt; </span><span class="string">'?'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">193</span><span class="keyword">) =&gt; </span><span class="string">'á'</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">196</span><span class="keyword">) =&gt; </span><span class="string">'?'</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">200</span><span class="keyword">) =&gt; </span><span class="string">'?'</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">207</span><span class="keyword">) =&gt; </span><span class="string">'?'</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">201</span><span class="keyword">) =&gt; </span><span class="string">'é'</span><span class="keyword">, <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">204</span><span class="keyword">) =&gt; </span><span class="string">'ě'</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">205</span><span class="keyword">) =&gt; </span><span class="string">'í'</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">197</span><span class="keyword">) =&gt; </span><span class="string">'?'</span><span class="keyword">,&nbsp; &nbsp; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">188</span><span class="keyword">) =&gt; </span><span class="string">'?'</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">210</span><span class="keyword">) =&gt; </span><span class="string">'?'</span><span class="keyword">, <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">212</span><span class="keyword">) =&gt; </span><span class="string">'?'</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">211</span><span class="keyword">) =&gt; </span><span class="string">'ó'</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">138</span><span class="keyword">) =&gt; </span><span class="string">'?'</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">216</span><span class="keyword">) =&gt; </span><span class="string">'?'</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">218</span><span class="keyword">) =&gt; </span><span class="string">'ú'</span><span class="keyword">, <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">217</span><span class="keyword">) =&gt; </span><span class="string">'?'</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">141</span><span class="keyword">) =&gt; </span><span class="string">'?'</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">221</span><span class="keyword">) =&gt; </span><span class="string">'Y'</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">142</span><span class="keyword">) =&gt; </span><span class="string">'?'</span><span class="keyword">, <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">150</span><span class="keyword">) =&gt; </span><span class="string">'-'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">, </span><span class="default">$dict</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="64108""></a>
  <div class="note">
   <strong class="user">joeldegan AT yahoo</strong>
   <a href="#64108" class="date">07-Apr-2006 08:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
After battling with strtr trying to strip out MS word formatting from things pasted into forms I ended up coming up with this..<br />
<br />
it strips ALL non-standard ascii characters, preserving html codes and such, but gets rid of all the characters that refuse to show in firefox.<br />
<br />
If you look at this page in firefox you will see a ton of "question mark" characters and so it is not possible to copy and paste those to remove them from strings..&nbsp; (this fixes that issue nicely, though I admit it could be done a bit better)<br />
<br />
&lt;?<br />
function fixoutput($str){<br />
&nbsp;&nbsp;&nbsp; $good[] = 9;&nbsp; #tab<br />
&nbsp;&nbsp;&nbsp; $good[] = 10; #nl<br />
&nbsp;&nbsp;&nbsp; $good[] = 13; #cr<br />
&nbsp;&nbsp;&nbsp; for($a=32;$a&lt;127;$a++){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $good[] = $a;<br />
&nbsp;&nbsp;&nbsp; }&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; $len = strlen($str);<br />
&nbsp;&nbsp;&nbsp; for($b=0;$b &lt; $len+1; $b++){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(in_array(ord($str[$b]), $good)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $newstr .= $str[$b];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }//fi<br />
&nbsp;&nbsp;&nbsp; }//rof<br />
&nbsp;&nbsp;&nbsp; return $newstr;<br />
}<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60195""></a>
  <div class="note">
   <strong class="user">martin[dot]pelikan[at]gmail[dot]com</strong>
   <a href="#60195" class="date">29-Dec-2005 07:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
// if you are upset with windows' ^M characters at the end of the line,<br />
// these two lines are for you:<br />
$trans = array("\x0D" =&gt; "");<br />
$text = strtr($orig_text,$trans);<br />
<br />
// note that ctrl+M (in vim known as ^M) is hexadecimally 0x0D</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="59920""></a>
  <div class="note">
   <strong class="user">tomhmambo at seznam dot cz</strong>
   <a href="#59920" class="date">20-Dec-2005 02:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
&lt;?<br />
// Windows-1250 to ASCII<br />
// This function replace all Windows-1250 accent characters with <br />
// thier non-accent ekvivalents. Useful for Czech and Slovak languages.<br />
<br />
function win2ascii($str)&nbsp; &nbsp; {&nbsp; &nbsp; <br />
<br />
&nbsp;&nbsp;&nbsp; $str = StrTr($str,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "\xE1\xE8\xEF\xEC\xE9\xED\xF2",<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "\x61\x63\x64\x65\x65\x69\x6E");<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; $str = StrTr($str,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "\xF3\xF8\x9A\x9D\xF9\xFA\xFD\x9E\xF4\xBC\xBE",<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "\x6F\x72\x73\x74\x75\x75\x79\x7A\x6F\x4C\x6C");<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; $str = StrTr($str,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "\xC1\xC8\xCF\xCC\xC9\xCD\xC2\xD3\xD8",<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "\x41\x43\x44\x45\x45\x49\x4E\x4F\x52");<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; $str = StrTr($str,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "\x8A\x8D\xDA\xDD\x8E\xD2\xD9\xEF\xCF",<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "\x53\x54\x55\x59\x5A\x4E\x55\x64\x44");<br />
<br />
&nbsp;&nbsp;&nbsp; return $str;<br />
}<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54636""></a>
  <div class="note">
   <strong class="user">ru dot dy at gmx dot net</strong>
   <a href="#54636" class="date">10-Jul-2005 04:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Posting umlaute here resulted in a mess. Heres a version of the same function that works with preg_replace only:<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="keyword">function </span><span class="default">getRewriteString</span><span class="keyword">(</span><span class="default">$sString</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">htmlentities</span><span class="keyword">(</span><span class="default">$sString</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/&amp;(.)(uml);/"</span><span class="keyword">, </span><span class="string">"$1e"</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/&amp;(.)(acute|cedil|circ|ring|tilde|uml);/"</span><span class="keyword">, </span><span class="string">"$1"</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/([^a-z0-9]+)/"</span><span class="keyword">, </span><span class="string">"-"</span><span class="keyword">, </span><span class="default">html_entity_decode</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="string">"-"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; return </span><span class="default">$string</span><span class="keyword">;<br />
&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49722""></a>
  <div class="note">
   <strong class="user">patrick at p-roocks dot de</strong>
   <a href="#49722" class="date">06-Feb-2005 02:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As Daijoubu suggested use str_replace instead of this function for large arrays/subjects. I just tried it with a array of 60 elements, a string with 8KB length, and the execution time of str_replace was faster at factor 20! <br />
<br />
Patrick</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="48095""></a>
  <div class="note">
   
   <a href="#48095" class="date">11-Dec-2004 05:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are going to call strtr a lot, consider using str_replace instead, as it is much faster. I cut execution time in half just by doing this.<br />
<br />
&lt;?<br />
// i.e. instead of:<br />
$s=strtr($s,$replace_array);<br />
<br />
// use: <br />
foreach($replace_array as $key=&gt;$value) $s=str_replace($key,$value,$s);<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="45910""></a>
  <div class="note">
   <strong class="user">ktogias at math dot upatras dot gr</strong>
   <a href="#45910" class="date">23-Sep-2004 03:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function is usefull for <br />
accent insensitive regexp <br />
searches into greek (iso8859-7) text:<br />
(Select View -&gt; Character Encoding -&gt; Greek (iso8859-7)<br />
at your browser to see the correct greek characters)<br />
<br />
function gr_regexp($mystring){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $replacement=array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array("?","?","?","?"),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array("?","?","?","?"),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array("?","?","?","?"),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array("?","?","?","?","?","?"),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array("?","?","?","?"),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array("?","?","?","?","?","?"),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array("?","?","?","?")<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; );<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach($replacement as $group){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach($group as $character){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $exp="[";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach($group as $expcharacter){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $exp.=$expcharacter;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $exp.="]";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $trans[$character]=$exp;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $temp=explode(" ", $mystring);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for ($i=0;$i&lt;sizeof($temp);$i++){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $temp[$i]=strtr($temp[$i],$trans);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $temp[$i]=addslashes($temp[$i]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return implode(".*",$temp);<br />
}<br />
<br />
$match=gr_regexp("????????????????????? ??? ????????");<br />
<br />
//The next query string can be sent to MySQL<br />
through mysql_query()<br />
$query=<br />
&nbsp;&nbsp; &nbsp;&nbsp; "Select `column` from `table` where `column2` REGEXP&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '".$match."'";</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37860""></a>
  <div class="note">
   <strong class="user">j at pureftpd dot org</strong>
   <a href="#37860" class="date">30-Nov-2003 08:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a very useful function to translate Microsoft characters into Latin 15, so that people won't see any more square instead of characters in web pages .<br />
<br />
function demicrosoftize($str) {<br />
&nbsp;&nbsp;&nbsp; return strtr($str,<br />
"\x82\x83\x84\x85\x86\x87\x89\x8a" .<br />
"\x8b\x8c\x8e\x91\x92\x93\x94\x95" .<br />
"\x96\x97\x98\x99\x9a\x9b\x9c\x9e\x9f",<br />
"'f\".**^\xa6&lt;\xbc\xb4''" .<br />
"\"\"---~ \xa8&gt;\xbd\xb8\xbe");<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="36983""></a>
  <div class="note">
   <strong class="user">Fernando &quot;Malk&quot; Piancastelli</strong>
   <a href="#36983" class="date">29-Oct-2003 01:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a function to replace linebreaks to html &lt;p&gt; tags. This was initially designed to receive a typed text by a form in a "insert new notice" page and put in a database, then a "notice" page could get the text preformatted with paragraph tags instead of linebreaks that won't appear on browser. The function also removes repeated linebreaks the user may have typed in the form.<br />
<br />
function break_to_tags(&amp;$text) {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; // find and remove repeated linebreaks<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; $double_break = array("\r\n\r\n" =&gt; "\r\n");<br />
&nbsp;&nbsp; &nbsp; &nbsp; do {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $text = strtr($text, $double_break);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $position = strpos($text, "\r\n\r\n");<br />
&nbsp;&nbsp; &nbsp; &nbsp; } while ($position !== false);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; // find and replace remanescent linebreaks by &lt;p&gt; tags<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; $change = array("\r\n" =&gt; "&lt;p&gt;");<br />
&nbsp;&nbsp; &nbsp; &nbsp; $text = strtr($text, $change);<br />
}<br />
<br />
[]'s<br />
Fernando</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="24246""></a>
  <div class="note">
   <strong class="user">bisqwit at iki dot fi</strong>
   <a href="#24246" class="date">10-Aug-2002 10:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
#!/bin/sh<br />
# This shell script generates a strtr() call<br />
# to translate from a character set to another.<br />
# Requires: gnu recode, perl, php commandline binary<br />
#<br />
# Usage:<br />
#&nbsp; Set set1 and set2 to whatever you prefer<br />
#&nbsp; (multibyte character sets are not supported)<br />
#&nbsp; and run the script. The script outputs<br />
#&nbsp; a strtr() php code for you to use.<br />
#<br />
# Example is set to generate a<br />
# cp437..latin9 conversion code.<br />
#<br />
set1=cp437<br />
set2=iso-8859-15<br />
result="`echo '&lt;? for($c=32;$c&lt;256;$c++)'\<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 'echo chr($c);'\&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; |php -q|recode -f $set1..$set2`"<br />
echo "// This php function call converts \$string in $set1 to $set2";<br />
cat &lt;&lt;EOF&nbsp; | php -q<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">\</span><span class="default">$set1</span><span class="keyword">=</span><span class="string">'`echo -n "$result"\<br />
&nbsp;&nbsp; |perl -pe "s/([\\\\\'])/\\\\\\\\\\$1/g"`'</span><span class="keyword">;<br />
\</span><span class="default">$set2</span><span class="keyword">=</span><span class="string">'`echo -n "$result"|recode -f $set2..$set1\<br />
&nbsp;&nbsp; |perl -pe "s/([\\\\\'])/\\\\\\\\\\$1/g"`'</span><span class="keyword">;<br />
\</span><span class="default">$erase</span><span class="keyword">=array();<br />
\</span><span class="default">$l</span><span class="keyword">=</span><span class="default">strlen</span><span class="keyword">(\</span><span class="default">$set1</span><span class="keyword">);<br />
for(\</span><span class="default">$c</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;\</span><span class="default">$c</span><span class="keyword">&lt;\</span><span class="default">$l</span><span class="keyword">;++\</span><span class="default">$c</span><span class="keyword">)<br />
&nbsp; if(\</span><span class="default">$set1</span><span class="keyword">[\</span><span class="default">$c</span><span class="keyword">]==\</span><span class="default">$set2</span><span class="keyword">[\</span><span class="default">$c</span><span class="keyword">])\</span><span class="default">$erase</span><span class="keyword">[\</span><span class="default">$set1</span><span class="keyword">[\</span><span class="default">$c</span><span class="keyword">]]=</span><span class="string">''</span><span class="keyword">;<br />
if(</span><span class="default">count</span><span class="keyword">(\</span><span class="default">$erase</span><span class="keyword">))<br />
{<br />
&nbsp; \</span><span class="default">$set1</span><span class="keyword">=</span><span class="default">strtr</span><span class="keyword">(\</span><span class="default">$set1</span><span class="keyword">,\</span><span class="default">$erase</span><span class="keyword">);<br />
&nbsp; \</span><span class="default">$set2</span><span class="keyword">=</span><span class="default">strtr</span><span class="keyword">(\</span><span class="default">$set2</span><span class="keyword">,\</span><span class="default">$erase</span><span class="keyword">);<br />
}<br />
if(!</span><span class="default">strlen</span><span class="keyword">(\</span><span class="default">$set1</span><span class="keyword">))echo </span><span class="string">'IRREVERSIBLE'</span><span class="keyword">;else<br />
echo </span><span class="string">"strtr(\\\$string,\n&nbsp; '"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">ereg_replace</span><span class="keyword">(</span><span class="string">'([\\\\\\'</span><span class="keyword">])</span><span class="string">', '</span><span class="keyword">\\\\\\</span><span class="default">1</span><span class="string">', \$set2),<br />
&nbsp;&nbsp; &nbsp; "'</span><span class="keyword">,\</span><span class="default">n&nbsp; </span><span class="string">'",<br />
&nbsp;&nbsp; &nbsp; ereg_replace('</span><span class="keyword">([\\\\\\</span><span class="string">'])'</span><span class="keyword">, </span><span class="string">'\\\\\\1'</span><span class="keyword">, \</span><span class="default">$set1</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; </span><span class="string">"');"</span><span class="keyword">;<br />
</span><span class="default">EOF</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="23384""></a>
  <div class="note">
   <strong class="user">gabi at unica dot edu</strong>
   <a href="#23384" class="date">17-Jul-2002 05:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To convert special chars to their html entities strtr you can use strtr in conjunction with get_html_translation_table(HTML_ENTITIES) :<br />
<br />
$trans = get_html_translation_table(HTML_ENTITIES);<br />
$html_code = strtr($html_code, $trans); <br />
<br />
This will replace in $html_code the ? by &amp;Aacute; , etc.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="20860""></a>
  <div class="note">
   <strong class="user">symlink23-remove-my-spleen at yahoo dot com</strong>
   <a href="#20860" class="date">18-Apr-2002 09:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As noted in the str_rot13 docs, some servers don't provide the str_rot13() function. However, the presence of strtr makes it easy to build your own facsimile thereof:<br />
<br />
if (!function_exists('str_rot13')) {<br />
&nbsp;&nbsp;&nbsp; function str_rot13($str) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $from = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $to&nbsp;&nbsp; = 'nopqrstuvwxyzabcdefghijklmNOPQRSTUVWXYZABCDEFGHIJKLM';<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return strtr($str, $from, $to);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
This is suitable for very light "encryption" such as hiding email addressess from spambots (then unscrambling them in a mail class, for example).<br />
<br />
$mail_to=str_rot13("$mail_to");</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="17049""></a>
  <div class="note">
   <strong class="user">erik at eldata dot se</strong>
   <a href="#17049" class="date">23-Nov-2001 09:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As an alternative to the not-yet-existing function stritr mentioned in the first note above You can easily do this:
<br />

<br />
strtr("abc","ABCabc","xyzxyz")
<br />

<br />
or more general:
<br />

<br />
strtr("abc",
<br />
strtoupper($fromchars).strtolower($fromchars),
<br />
$tochars.$tochars);
<br />

<br />
Just a thought.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>输出或返回一个变量的字符串表示</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.var-dump.html">? var_dump</a></li>
      <li style="float: right;"><a href="refs.webservice.html">Web 服务 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.var.html">Variable handling 函数</a></li>
    <li>输出或返回一个变量的字符串表示</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.var-export" class="refentry">
   <div class="refnamediv">
    <h1 class="refname">var_export</h1>
    <p class="verinfo">(PHP 4 &gt;= 4.2.0, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">var_export</span> &mdash; <span class="dc-title">输出或返回一个变量的字符串表示</span></p>

   </div>

 <div class="refsect1 description" id="refsect1-function.var-export-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>var_export</strong></span>
    ( <span class="methodparam"><span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span> <code class="parameter">$expression</code></span>
   , <span class="methodparam"><span class="type">bool</span> <code class="parameter">$return</code><span class="initializer"> = <strong><code>false</code></strong></span></span>
   ) : <span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span></div>

  <p class="simpara">
    <span class="function"><strong>var_export()</strong></span> 函数返回关于传递给该函数的变量的结构信息，它和
    <span class="function"><a href="function.var-dump.html" class="function">var_dump()</a></span> 函数类似，不同的是其返回的表示是合法的 PHP 代码。
  </p>
 </div>


<div class="refsect1 parameters" id="refsect1-function.var-export-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">expression</code></dt>

     <dd>

      <p class="para">
        想要输出的变量名。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">return</code></dt>

     <dd>

      <p class="para">
       此参数为 <strong><code>true</code></strong> 时，<span class="function"><strong>var_export()</strong></span> 将返回一个变量，而不是输出它。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.var-export-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
    参数 <code class="parameter">return</code> 为 <strong><code>true</code></strong> 时返回变量，否则返回 <strong><code>null</code></strong>。
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.var-export-notes">
  <h3 class="title">注释</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: <p class="para">当使用了<code class="parameter">return</code>
参数时，本函数使用其内部输出缓冲，因此不能在
<span class="function"><a href="function.ob-start.html" class="function">ob_start()</a></span> 回调函数的内部使用。</p></p></blockquote>
 </div>


<div class="refsect1 changelog" id="refsect1-function.var-export-changelog">
  <h3 class="title">更新日志</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>版本</th>
       <th>说明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>7.3.0</td>
       <td>
        Now exports <strong class="classname">stdClass</strong> objects as an array cast to
        an object (<code class="code">(object) array( ... )</code>), rather than using the
        nonexistent method <span class="methodname"><strong>stdClass::__setState()</strong></span>.
        The practical effect is that now <strong class="classname">stdClass</strong> is
        exportable, and the resulting code will even work on earlier versions of
        PHP.
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>



 <div class="refsect1 examples" id="refsect1-function.var-export-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-5610">
    <p><strong>Example #1 <span class="function"><strong>var_export()</strong></span> 示例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$a&nbsp;</span><span style="color: #007700">=&nbsp;array&nbsp;(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;array&nbsp;(</span><span style="color: #DD0000">"a"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"b"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"c"</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_export</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
array (
  0 =&gt; 1,
  1 =&gt; 2,
  2 =&gt; 
  array (
    0 =&gt; &#039;a&#039;,
    1 =&gt; &#039;b&#039;,
    2 =&gt; &#039;c&#039;,
  ),
)
</pre></div>
    </div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$b&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">3.1</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$v&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">var_export</span><span style="color: #007700">(</span><span style="color: #0000BB">$b</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
3.1
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   <div class="example" id="example-5611">
    <p><strong>Example #2 输出类 stdClass (自 PHP 7.3.0 起)</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$person&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">stdClass</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$person</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'ElePHPant&nbsp;ElePHPantsdotter'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$person</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">website&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'https://php.net/elephpant.php'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">var_export</span><span style="color: #007700">(</span><span style="color: #0000BB">$person</span><span style="color: #007700">);</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
(object) array(
   &#039;name&#039; =&gt; &#039;ElePHPant ElePHPantsdotter&#039;,
   &#039;website&#039; =&gt; &#039;https://php.net/elephpant.php&#039;,
)
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   <div class="example" id="example-5612">
    <p><strong>Example #3 输出对象 (自 PHP 5.1.0 起)</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">A&nbsp;</span><span style="color: #007700">{&nbsp;public&nbsp;</span><span style="color: #0000BB">$var</span><span style="color: #007700">;&nbsp;}<br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">A</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$a</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">var&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">var_export</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
A::__set_state(array(
   &#039;var&#039; =&gt; 5,
))
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   <div class="example" id="example-5613">
    <p><strong>Example #4 使用 <a href="language.oop5.magic.html#object.set-state" class="link">__set_state()</a> (自 PHP 5.1.0 起)</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">A<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$var1</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$var2</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;</span><span style="color: #0000BB">__set_state</span><span style="color: #007700">(</span><span style="color: #0000BB">$an_array</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$obj&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">A</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$obj</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">var1&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$an_array</span><span style="color: #007700">[</span><span style="color: #DD0000">'var1'</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$obj</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">var2&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$an_array</span><span style="color: #007700">[</span><span style="color: #DD0000">'var2'</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$obj</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">A</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$a</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">var1&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$a</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">var2&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">;<br /><br />eval(</span><span style="color: #DD0000">'$b&nbsp;=&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">var_export</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">';'</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;$b&nbsp;=&nbsp;A::__set_state(array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;'var1'&nbsp;=&gt;&nbsp;5,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;'var2'&nbsp;=&gt;&nbsp;'foo',<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$b</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
object(A)#2 (2) {
  [&quot;var1&quot;]=&gt;
  int(5)
  [&quot;var2&quot;]=&gt;
  string(3) &quot;foo&quot;
}
</pre></div>
    </div>
   </div>
  </p>
 </div>



 <div class="refsect1 notes" id="refsect1-function.var-export-notes">
  <h3 class="title">注释</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    类型为 <span class="type">resource</span> 的变量无法通过此函数输出。
   </p>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    <span class="function"><strong>var_export()</strong></span> does not handle circular references as
    it would be close to impossible to generate parsable PHP code for that.
    If you want to do something with the full representation of an array
    or object, use <span class="function"><a href="function.serialize.html" class="function">serialize()</a></span>.
   </p>
  </p></blockquote>
  <div class="warning"><strong class="warning">Warning</strong>
   <p class="para">
    When <span class="function"><strong>var_export()</strong></span> exports objects, the leading backslash is not included in the class name of namespaced classes for maximum compatibility.
   </p>
  </div>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    To be able to evaluate the PHP generated by <span class="function"><strong>var_export()</strong></span>,
    all processed objects must implement the magic <a href="language.oop5.magic.html#object.set-state" class="link">__set_state</a> method. The only exception is
    <strong class="classname">stdClass</strong>, which is exported using an array cast to
    an object.
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.var-export-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.print-r.html" class="function" rel="rdfs-seeAlso">print_r()</a> - 以易于理解的格式打印变量。</span></li>
    <li class="member"><span class="function"><a href="function.serialize.html" class="function" rel="rdfs-seeAlso">serialize()</a> - 产生一个可存储的值的表示</span></li>
    <li class="member"><span class="function"><a href="function.var-dump.html" class="function" rel="rdfs-seeAlso">var_dump()</a> - 打印变量的相关信息</span></li>
   </ul>
  </p>  
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="124194""></a>
  <div class="note">
   <strong class="user">steven at nevvix dot com</strong>
   <a href="#124194" class="date">13-Sep-2019 03:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I improved my previous varexport().<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* PHP var_export() with short array syntax (square brackets) indented 2 spaces.<br />
&nbsp;*<br />
&nbsp;* NOTE: The only issue is when a string value has `=&gt;\n[`, it will get converted to `=&gt; [`<br />
&nbsp;* @link https://www.php.net/manual/en/function.var-export.php<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">varexport</span><span class="keyword">(</span><span class="default">$expression</span><span class="keyword">, </span><span class="default">$return</span><span class="keyword">=</span><span class="default">FALSE</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$export </span><span class="keyword">= </span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$expression</span><span class="keyword">, </span><span class="default">TRUE</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$patterns </span><span class="keyword">= [<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"/array \(/" </span><span class="keyword">=&gt; </span><span class="string">'['</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"/^([ ]*)\)(,?)$/m" </span><span class="keyword">=&gt; </span><span class="string">'$1]$2'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"/=&gt;[ ]?\n[ ]+\[/" </span><span class="keyword">=&gt; </span><span class="string">'=&gt; ['</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"/([ ]*)(\'[^\']+\') =&gt; ([\[\'])/" </span><span class="keyword">=&gt; </span><span class="string">'$1$2 =&gt; $3'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; ];<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$export </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$patterns</span><span class="keyword">), </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$patterns</span><span class="keyword">), </span><span class="default">$export</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if ((bool)</span><span class="default">$return</span><span class="keyword">) return </span><span class="default">$export</span><span class="keyword">; else echo </span><span class="default">$export</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$array </span><span class="keyword">= [<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'str' </span><span class="keyword">=&gt; </span><span class="string">'Test<br />
&nbsp;&nbsp; &nbsp; &nbsp; spaces'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="default">33</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="default">TRUE</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; [</span><span class="default">3</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">,</span><span class="string">'d'</span><span class="keyword">,[]],<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'arr' </span><span class="keyword">=&gt; [<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'text with spaces' </span><span class="keyword">=&gt; </span><span class="string">'[Tes\'t"s":<br />
&nbsp;=&gt; [<br />
&nbsp;=&gt; <br />
&nbsp; [<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; spaces'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; ],<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"str2" </span><span class="keyword">=&gt; </span><span class="string">"Test's'<br />
&nbsp;} spaces"</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'arr2' </span><span class="keyword">=&gt; [<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'text with spaces' </span><span class="keyword">=&gt; [<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'arr3' </span><span class="keyword">=&gt; [<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'text with spaces' </span><span class="keyword">=&gt; </span><span class="string">'Te": "st \' =&gt; [<br />
&nbsp;&nbsp; &nbsp;&nbsp; spaces'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ],<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ],<br />
&nbsp;&nbsp;&nbsp; ],<br />
];<br />
</span><span class="default">varexport</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
</span><span class="comment">// Result:<br />
</span><span class="keyword">```</span><span class="string"><br />
[<br />
&nbsp; 'str' =&gt; 'Test<br />
&nbsp;&nbsp; &nbsp; &nbsp; spaces',<br />
&nbsp; 0 =&gt; 33,<br />
&nbsp; 1 =&gt; true,<br />
&nbsp; 2 =&gt; [<br />
&nbsp;&nbsp;&nbsp; 0 =&gt; 3,<br />
&nbsp;&nbsp;&nbsp; 1 =&gt; 4,<br />
&nbsp;&nbsp;&nbsp; 2 =&gt; 'd',<br />
&nbsp;&nbsp;&nbsp; 3 =&gt; [<br />
&nbsp;&nbsp;&nbsp; ],<br />
&nbsp; ],<br />
&nbsp; 'arr' =&gt; [<br />
&nbsp;&nbsp;&nbsp; 'text with spaces' =&gt; '[Tes\'t"s":<br />
&nbsp;=&gt; [<br />
&nbsp;=&gt; [<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; spaces',<br />
&nbsp; ],<br />
&nbsp; 'str2' =&gt; 'Test\'s\'<br />
&nbsp;} spaces',<br />
&nbsp; 'arr2' =&gt; [<br />
&nbsp;&nbsp;&nbsp; 'text with spaces' =&gt; [<br />
&nbsp;&nbsp; &nbsp;&nbsp; 'arr3' =&gt; [<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'text with spaces' =&gt; 'Te": "st \' =&gt; [<br />
&nbsp;&nbsp; &nbsp;&nbsp; spaces',<br />
&nbsp;&nbsp; &nbsp;&nbsp; ],<br />
&nbsp;&nbsp;&nbsp; ],<br />
&nbsp; ],<br />
]<br />
</span><span class="keyword">```<br />
</span><span class="default">NOTE</span><span class="keyword">: </span><span class="default">The only issue is when a string value has </span><span class="keyword">`</span><span class="string">=&gt;\n[</span><span class="keyword">`, </span><span class="default">it will get converted to </span><span class="keyword">`</span><span class="string">=&gt; [</span><span class="keyword">`</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="123814""></a>
  <div class="note">
   <strong class="user">beverasrilakshmi at gmail dot com</strong>
   <a href="#123814" class="date">01-May-2019 08:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just for fun, trying to understand the definition of "returns parsable string"....any type of variable passed to var_export, the return value will be a typecasted as string...<br />
<br />
<span class="default">&lt;?php <br />
<br />
$var </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">); </span><span class="comment">//type is int as expected <br />
</span><span class="keyword">echo </span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
</span><span class="default">$var_after_export </span><span class="keyword">= </span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">); </span><span class="comment">//returning $var will now makes it a string<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$var_after_export</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="122853""></a>
  <div class="note">
   <strong class="user">steven at nevvix dot com</strong>
   <a href="#122853" class="date">18-Jun-2018 06:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
/**<br />
&nbsp;* var_export() with square brackets and indented 4 spaces.<br />
&nbsp;*/<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">varexport</span><span class="keyword">(</span><span class="default">$expression</span><span class="keyword">, </span><span class="default">$return</span><span class="keyword">=</span><span class="default">FALSE</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$export </span><span class="keyword">= </span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$expression</span><span class="keyword">, </span><span class="default">TRUE</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$export </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/^([ ]*)(.*)/m"</span><span class="keyword">, </span><span class="string">'$1$1$2'</span><span class="keyword">, </span><span class="default">$export</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">preg_split</span><span class="keyword">(</span><span class="string">"/\r\n|\n|\r/"</span><span class="keyword">, </span><span class="default">$export</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">([</span><span class="string">"/\s*array\s\($/"</span><span class="keyword">, </span><span class="string">"/\)(,)?$/"</span><span class="keyword">, </span><span class="string">"/\s=&gt;\s$/"</span><span class="keyword">], [</span><span class="default">NULL</span><span class="keyword">, </span><span class="string">']$1'</span><span class="keyword">, </span><span class="string">' =&gt; ['</span><span class="keyword">], </span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$export </span><span class="keyword">= </span><span class="default">join</span><span class="keyword">(</span><span class="default">PHP_EOL</span><span class="keyword">, </span><span class="default">array_filter</span><span class="keyword">([</span><span class="string">"["</span><span class="keyword">] + </span><span class="default">$array</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; if ((bool)</span><span class="default">$return</span><span class="keyword">) return </span><span class="default">$export</span><span class="keyword">; else echo </span><span class="default">$export</span><span class="keyword">;<br />
}</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118746""></a>
  <div class="note">
   <strong class="user">Mark P</strong>
   <a href="#118746" class="date">29-Jan-2016 09:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It doesn't appear to be documented, but the behaviour of `var_export()` changed in PHP 7.<br />
<br />
Previously, `var_export(3.)` returned "3", now it returns "3.0".</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117713""></a>
  <div class="note">
   <strong class="user">cpmcgrat()uci ! edu</strong>
   <a href="#117713" class="date">27-Jul-2015 10:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When trying to use __set_state() to rebuild a huge, tricky class use the following:<br />
<br />
class Foo<br />
{<br />
&nbsp;&nbsp;&nbsp; public $a;<br />
&nbsp;&nbsp;&nbsp; public $b;<br />
&nbsp;&nbsp;&nbsp; public $c;<br />
&nbsp;&nbsp;&nbsp; public $d;<br />
&nbsp;&nbsp;&nbsp; public $e;<br />
&nbsp;&nbsp;&nbsp; public $f;<br />
&nbsp;&nbsp;&nbsp; public $g;<br />
&nbsp;&nbsp;&nbsp; public $h;<br />
&nbsp;&nbsp;&nbsp; public $i;<br />
<br />
&nbsp;&nbsp;&nbsp; public function __set_state($array)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $obj = new ArrayConfig;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach($array as $k =&gt; $v) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; eval('$obj-&gt;'.$k.' = '.$v.';');<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $obj;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
This will return a reconstructed version of the class without having to manually type each individual object in the class manually (as shown in the __set_state() example)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114094""></a>
  <div class="note">
   <strong class="user">dan at coders dot co dot nz</strong>
   <a href="#114094" class="date">10-Jan-2014 02:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I found that my complex type was exporting with <br />
&nbsp; stdClass::__set_state()<br />
in places. Not only was that strange and messy, it cannot be eval()-ed back in at all. Fatal error. Doh!<br />
<br />
However a quick string-replace tidy-up of the result rendered it valid again.<br />
<br />
&nbsp;&nbsp;&nbsp; $macro = var_export($data, TRUE);<br />
&nbsp;&nbsp;&nbsp; $macro = str_replace("stdClass::__set_state", "(object)", $macro);<br />
&nbsp;&nbsp;&nbsp; $macro = '$data = ' . $macro . ';';<br />
<br />
And now the string I output *can* be evaluated back in again.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113962""></a>
  <div class="note">
   <strong class="user">wyattstorch42 at outlook dot com</strong>
   <a href="#113962" class="date">22-Dec-2013 10:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you call var_export() on an instance of stdClass, it attempts to export it using ::__set_state(), which, for some reason, is not implemented in stdClass.<br />
<br />
However, casting an associative array to an object usually produces the same effect (at least, it does in my case). So I wrote an improved_var_export() function to convert instances of stdClass to (object) array () calls. If you choose to export objects of any other class, I'd advise you to implement ::__set_state().<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* An implementation of var_export() that is compatible with instances<br />
&nbsp;* of stdClass.<br />
&nbsp;* @param mixed $variable The variable you want to export<br />
&nbsp;* @param bool $return If used and set to true, improved_var_export()<br />
&nbsp;*&nbsp; &nbsp;&nbsp; will return the variable representation instead of outputting it.<br />
&nbsp;* @return mixed|null Returns the variable representation when the<br />
&nbsp;*&nbsp; &nbsp;&nbsp; return parameter is used and evaluates to TRUE. Otherwise, this<br />
&nbsp;*&nbsp; &nbsp;&nbsp; function will return NULL.<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">improved_var_export </span><span class="keyword">(</span><span class="default">$variable</span><span class="keyword">, </span><span class="default">$return </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$variable </span><span class="keyword">instanceof </span><span class="default">stdClass</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="string">'(object) '</span><span class="keyword">.</span><span class="default">improved_var_export</span><span class="keyword">(</span><span class="default">get_object_vars</span><span class="keyword">(</span><span class="default">$variable</span><span class="keyword">), </span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; } else if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$variable</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= array ();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$variable </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">[] = </span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">).</span><span class="string">' =&gt; '</span><span class="keyword">.</span><span class="default">improved_var_export</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="string">'array ('</span><span class="keyword">.</span><span class="default">implode</span><span class="keyword">(</span><span class="string">', '</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">).</span><span class="string">')'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$variable</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">$return</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; print </span><span class="default">$result</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="comment">// Example usage:<br />
</span><span class="default">$obj </span><span class="keyword">= new </span><span class="default">stdClass</span><span class="keyword">;<br />
</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">test </span><span class="keyword">= </span><span class="string">'abc'</span><span class="keyword">;<br />
</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">other </span><span class="keyword">= </span><span class="default">6.2</span><span class="keyword">;<br />
</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">arr </span><span class="keyword">= array (</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">);<br />
<br />
</span><span class="default">improved_var_export</span><span class="keyword">((object) array (<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'prop1' </span><span class="keyword">=&gt; </span><span class="default">true</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'prop2' </span><span class="keyword">=&gt; </span><span class="default">$obj</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'assocArray' </span><span class="keyword">=&gt; array (<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'apple' </span><span class="keyword">=&gt; </span><span class="string">'good'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'orange' </span><span class="keyword">=&gt; </span><span class="string">'great'<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">)<br />
));<br />
<br />
</span><span class="comment">/* Output:<br />
(object) array ('prop1' =&gt; true, 'prop2' =&gt; (object) array ('test' =&gt; 'abc', 'other' =&gt; 6.2, 'arr' =&gt; array (0 =&gt; 1, 1 =&gt; 2, 2 =&gt; 3)), 'assocArray' =&gt; array ('apple' =&gt; 'good', 'orange' =&gt; 'great'))<br />
*/<br />
</span><span class="default">?&gt;<br />
</span><br />
Note: This function spits out a single line of code, which is useful to save in a cache file to include/eval. It isn't formatted for readability. If you want to print a readable version for debugging purposes, then I would suggest print_r() or var_dump().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113770""></a>
  <div class="note">
   <strong class="user">chudinov at yahoo dot com</strong>
   <a href="#113770" class="date">29-Nov-2013 09:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Looks like since version 5.4.22 var_export uses the serialize_precision ini setting, rather than the precision one used for normal output of floating-point numbers.<br />
As a consequence since version 5.4.22 for example var_export(1.1) will output 1.1000000000000001 (17 is default precision value) and not 1.1 as before. <br />
<br />
<span class="default">&lt;?php <br />
</span><span class="comment">//ouput 1.1000000000000001<br />
</span><span class="default">var_export</span><span class="keyword">(</span><span class="default">1.1</span><span class="keyword">)<br />
&nbsp;</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112665""></a>
  <div class="note">
   <strong class="user">NitPicker</strong>
   <a href="#112665" class="date">10-Jul-2013 04:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When it comes to HTML output (as discussed below), it's all fun and games until someone pokes their eye out with a "&lt;".<br />
<br />
Surround it with "&lt;pre&gt;", but do remember to wrap it in htmlspecialchars() as well.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110243""></a>
  <div class="note">
   <strong class="user">sergei dot solomonov at gmail dot com</strong>
   <a href="#110243" class="date">04-Oct-2012 04:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php
<br />
$closure </span><span class="keyword">= function(){};
<br />

<br />
</span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$closure</span><span class="keyword">);
<br />

<br />
</span><span class="comment">// output: Closure::__set_state(array())
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110067""></a>
  <div class="note">
   <strong class="user">kexianbin at diyism dot com</strong>
   <a href="#110067" class="date">16-Sep-2012 02:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
to use my_var_export(), it is as beautiful as var_export() and as could deal with recursive reference as print_r():<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">my_var_export</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">, </span><span class="default">$is_str</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; {</span><span class="default">$rtn</span><span class="keyword">=</span><span class="default">preg_replace</span><span class="keyword">(array(</span><span class="string">'/Array\s+\(/'</span><span class="keyword">, </span><span class="string">'/\[(\d+)\] =&gt; (.*)\n/'</span><span class="keyword">, </span><span class="string">'/\[([^\d].*)\] =&gt; (.*)\n/'</span><span class="keyword">), array(</span><span class="string">'array ('</span><span class="keyword">, </span><span class="string">'\1 =&gt; \'\2\''</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">, </span><span class="string">'\'\1\' =&gt; \'\2\''</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">), </span><span class="default">substr</span><span class="keyword">(</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">), </span><span class="default">0</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rtn</span><span class="keyword">=</span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$rtn</span><span class="keyword">, array(</span><span class="string">"=&gt; 'array ('"</span><span class="keyword">=&gt;</span><span class="string">'=&gt; array ('</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rtn</span><span class="keyword">=</span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$rtn</span><span class="keyword">, array(</span><span class="string">")\n\n"</span><span class="keyword">=&gt;</span><span class="string">")\n"</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rtn</span><span class="keyword">=</span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$rtn</span><span class="keyword">, array(</span><span class="string">"'\n"</span><span class="keyword">=&gt;</span><span class="string">"',\n"</span><span class="keyword">, </span><span class="string">")\n"</span><span class="keyword">=&gt;</span><span class="string">"),\n"</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rtn</span><span class="keyword">=</span><span class="default">preg_replace</span><span class="keyword">(array(</span><span class="string">'/\n +/e'</span><span class="keyword">), array(</span><span class="string">'strtr(\'\0\', array(\'&nbsp; &nbsp; \'=&gt;\'&nbsp; \'))'</span><span class="keyword">), </span><span class="default">$rtn</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rtn</span><span class="keyword">=</span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$rtn</span><span class="keyword">, array(</span><span class="string">" Object',"</span><span class="keyword">=&gt;</span><span class="string">" Object'&lt;-"</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$is_str</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {return </span><span class="default">$rtn</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {echo </span><span class="default">$rtn</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108094""></a>
  <div class="note">
   <strong class="user">jodybrabec at gmail dot com</strong>
   <a href="#108094" class="date">28-Mar-2012 05:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
WORKAROUND for error "Nesting level too deep - recursive dependency":<br />
ob_start();<br />
var_dump($GLOBALS);<br />
$dataDump = ob_get_clean();<br />
echo $dataDump;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106471""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#106471" class="date">11-Nov-2011 09:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is an even simpler way to have clean output from var_export and print_r in html pages:<br />
<br />
<span class="default">&lt;?php <br />
</span><span class="keyword">function </span><span class="default">pretty_var</span><span class="keyword">(</span><span class="default">$myArray</span><span class="keyword">)<br />
{ <br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"&lt;pre&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$myArray</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"&lt;/pre&gt;"</span><span class="keyword">;<br />
} <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100302""></a>
  <div class="note">
   <strong class="user">laszlo dot heredy at gmail dot com</strong>
   <a href="#100302" class="date">06-Oct-2010 01:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Try this function instead of var_export($GLOBALS) or var_dump($GLOBALS) when all you want to know is the values of the variables you set on the current page.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">globalvars</span><span class="keyword">(){
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">=array();
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$skip</span><span class="keyword">=array(</span><span class="string">'GLOBALS'</span><span class="keyword">,</span><span class="string">'_ENV'</span><span class="keyword">,</span><span class="string">'HTTP_ENV_VARS'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'_POST'</span><span class="keyword">,</span><span class="string">'HTTP_POST_VARS'</span><span class="keyword">,</span><span class="string">'_GET'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'HTTP_GET_VARS'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'_COOKIE'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'HTTP_COOKIE_VARS'</span><span class="keyword">,</span><span class="string">'_SERVER'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'HTTP_SERVER_VARS'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'_FILES'</span><span class="keyword">,</span><span class="string">'HTTP_POST_FILES'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'_REQUEST'</span><span class="keyword">,</span><span class="string">'HTTP_SESSION_VARS'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'_SESSION'</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$GLOBALS </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$k</span><span class="keyword">,</span><span class="default">$skip</span><span class="keyword">))
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]=</span><span class="default">$v</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;
<br />
}</span><span class="comment">//functionglobalvars
<br />

<br />
</span><span class="default">var_export</span><span class="keyword">(</span><span class="default">globalvars</span><span class="keyword">());
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98483""></a>
  <div class="note">
   <strong class="user">4n4jmza02 at sneakemail dot com</strong>
   <a href="#98483" class="date">17-Jun-2010 04:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I learned the hard way that if var_export encounters a resource handle it exports it as "NULL", even if it is a valid handle. The documentation states that a handle cannot be exported, but it does not describe what happens if you try to do so anyway.<br />
<br />
I had been using var_export in some debugging code while tracing a problem with a resource handle not being generated and ended up thinking that null handles were still being generated long after the problem had been fixed.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95700""></a>
  <div class="note">
   <strong class="user">john dot risken at gmail dot com</strong>
   <a href="#95700" class="date">16-Jan-2010 03:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I didn't see this simple little item anywhere in the user notes. Maybe I'm blind!
<br />

<br />
Anyway, var_export and print_r both use spaces and carriage returns for formatting.&nbsp; Sent to an html page, most of the formatting is lost. This simple function prints a nicely formatted array to an html screen:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">pretty_var</span><span class="keyword">(</span><span class="default">$myArray</span><span class="keyword">){
<br />
&nbsp;&nbsp;&nbsp; print </span><span class="default">str_replace</span><span class="keyword">(array(</span><span class="string">"\n"</span><span class="keyword">,</span><span class="string">" "</span><span class="keyword">),array(</span><span class="string">"&lt;br&gt;"</span><span class="keyword">,</span><span class="string">"&amp;nbsp;"</span><span class="keyword">), </span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$myArray</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">)).</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94333""></a>
  <div class="note">
   <strong class="user">rarioj at gmail dot com</strong>
   <a href="#94333" class="date">28-Oct-2009 10:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
NOTE: If an object Foo has __set_state() method, but if that object contains another object Bar with no __set_state() method implemented, the resulting PHP expression will not be eval()-able.<br />
<br />
This is an example (object Test that contains an instance of Exception).<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">Test<br />
</span><span class="keyword">{<br />
&nbsp; public </span><span class="default">$one</span><span class="keyword">;<br />
&nbsp; public </span><span class="default">$two</span><span class="keyword">;<br />
&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$one</span><span class="keyword">, </span><span class="default">$two</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">one </span><span class="keyword">= </span><span class="default">$one</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">two </span><span class="keyword">= </span><span class="default">$two</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; public static function </span><span class="default">__set_state</span><span class="keyword">(array </span><span class="default">$array</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; return new </span><span class="default">self</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">[</span><span class="string">'one'</span><span class="keyword">], </span><span class="default">$array</span><span class="keyword">[</span><span class="string">'two'</span><span class="keyword">]);<br />
&nbsp; }<br />
}<br />
<br />
</span><span class="default">$test </span><span class="keyword">= new </span><span class="default">Test</span><span class="keyword">(</span><span class="string">'one'</span><span class="keyword">, new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">'test'</span><span class="keyword">));<br />
<br />
</span><span class="default">$string </span><span class="keyword">= </span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
<br />
</span><span class="comment">/* $string =<br />
Test::__set_state(array(<br />
&nbsp;&nbsp; 'one' =&gt; 'one',<br />
&nbsp;&nbsp; 'two' =&gt; <br />
&nbsp; Exception::__set_state(array(<br />
&nbsp;&nbsp; &nbsp; 'message' =&gt; 'test',<br />
&nbsp;&nbsp; &nbsp; 'string' =&gt; '',<br />
&nbsp;&nbsp; &nbsp; 'code' =&gt; 0,<br />
&nbsp;&nbsp; &nbsp; 'file' =&gt; 'E:\\xampp\\htdocs\\test.Q.php',<br />
&nbsp;&nbsp; &nbsp; 'line' =&gt; 35,<br />
&nbsp;&nbsp; &nbsp; 'trace' =&gt; <br />
&nbsp;&nbsp;&nbsp; array (<br />
&nbsp;&nbsp;&nbsp; ),<br />
&nbsp;&nbsp; &nbsp; 'previous' =&gt; NULL,<br />
&nbsp; )),<br />
))<br />
*/<br />
<br />
</span><span class="keyword">eval(</span><span class="string">'$test2 = '</span><span class="keyword">.</span><span class="default">$string</span><span class="keyword">.</span><span class="string">';'</span><span class="keyword">); </span><span class="comment">// Fatal error: Call to undefined method Exception::__set_state<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
So avoid using var_export() on a complex array/object that contains other objects. Instead, use serialize() and unserialize() functions.<br />
<br />
<span class="default">&lt;?php<br />
<br />
$string </span><span class="keyword">= </span><span class="string">'unserialize('</span><span class="keyword">.</span><span class="default">var_export</span><span class="keyword">(</span><span class="default">serialize</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">), </span><span class="default">true</span><span class="keyword">).</span><span class="string">')'</span><span class="keyword">;<br />
<br />
eval(</span><span class="string">'$test2 = '</span><span class="keyword">.</span><span class="default">$string</span><span class="keyword">.</span><span class="string">';'</span><span class="keyword">);<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$test </span><span class="keyword">== </span><span class="default">$test2</span><span class="keyword">); </span><span class="comment">// bool(true)<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92065""></a>
  <div class="note">
   <strong class="user">ravenswd at gmail dot com</strong>
   <a href="#92065" class="date">07-Jul-2009 10:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
(This replaces my note of 3-July-2009. The original version produced no output if a variable contained an empty array, or an array consisting only of empty arrays. For example, $bigarray['x'] = array(); Also, I have added a second version of the function.)<br />
<br />
The output can be difficult to decipher when looking at an array with many levels and many elements on each level. For example:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">print (</span><span class="string">'$bigarray = ' </span><span class="keyword">. </span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$bigarray</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
will return:<br />
<br />
$bigarray = array(<br />
... (500 lines skipped) ...<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 'mod' =&gt; 'charlie',<br />
<br />
Whereas the routine below can be called with:<br />
<br />
<span class="default">&lt;?php<br />
recursive_print </span><span class="keyword">(</span><span class="string">'$bigarray'</span><span class="keyword">, </span><span class="default">$bigarray</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
and it will return:<br />
<br />
$bigarray = array()<br />
... (500 lines skipped) ...<br />
$bigarray['foo']['bar']['0']['somethingelse']['mod'] = 'charlie'<br />
<br />
Here's the function:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">recursive_print </span><span class="keyword">(</span><span class="default">$varname</span><span class="keyword">, </span><span class="default">$varval</span><span class="keyword">) {<br />
&nbsp; if (! </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$varval</span><span class="keyword">)):<br />
&nbsp;&nbsp;&nbsp; print </span><span class="default">$varname </span><span class="keyword">. </span><span class="string">' = ' </span><span class="keyword">. </span><span class="default">$varval </span><span class="keyword">. </span><span class="string">"&lt;br&gt;\n"</span><span class="keyword">;<br />
&nbsp; else:<br />
&nbsp;&nbsp;&nbsp; print </span><span class="default">$varname </span><span class="keyword">. </span><span class="string">" = array()&lt;br&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$varval </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">):<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">recursive_print </span><span class="keyword">(</span><span class="default">$varname </span><span class="keyword">. </span><span class="string">"['" </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">"']"</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; endforeach;<br />
&nbsp; endif;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
For those who want a version that produces valid PHP code, use this version:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">recursive_print </span><span class="keyword">(</span><span class="default">$varname</span><span class="keyword">, </span><span class="default">$varval</span><span class="keyword">) {<br />
&nbsp; if (! </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$varval</span><span class="keyword">)):<br />
&nbsp;&nbsp;&nbsp; print </span><span class="default">$varname </span><span class="keyword">. </span><span class="string">' = ' </span><span class="keyword">. </span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$varval</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">) . </span><span class="string">";&lt;br&gt;\n"</span><span class="keyword">;<br />
&nbsp; else:<br />
&nbsp;&nbsp;&nbsp; print </span><span class="default">$varname </span><span class="keyword">. </span><span class="string">" = array();&lt;br&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$varval </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">):<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">recursive_print </span><span class="keyword">(</span><span class="default">$varname </span><span class="keyword">. </span><span class="string">"[" </span><span class="keyword">. </span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">) . </span><span class="string">"]"</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; endforeach;<br />
&nbsp; endif;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
If your output is to a text file and not an HTML page, remove the &lt;br&gt;s.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91979""></a>
  <div class="note">
   <strong class="user">ravenswd at gmail dot com</strong>
   <a href="#91979" class="date">03-Jul-2009 05:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The output can be difficult to decipher when looking at an array with many levels and many elements on each level. For example:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">print (</span><span class="string">'$bigarray = ' </span><span class="keyword">. </span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$bigarray</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
will return:<br />
<br />
$bigarray = array(<br />
... (500 lines skipped) ...<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 'mod' =&gt; 'charlie',<br />
<br />
Whereas the routine below can be called with:<br />
<br />
<span class="default">&lt;?php<br />
recursive_print </span><span class="keyword">(</span><span class="string">'$bigarray'</span><span class="keyword">, </span><span class="default">$bigarray</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
and it will return:<br />
<br />
$bigarray['firstelement'] = 'something'<br />
... (500 lines skipped) ...<br />
$bigarray['foo']['bar']['0']['somethingelse']['mod'] = 'charlie'<br />
<br />
Here's the function:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">recursive_print </span><span class="keyword">(</span><span class="default">$varname</span><span class="keyword">, </span><span class="default">$varval</span><span class="keyword">) {<br />
&nbsp; if (! </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$varval</span><span class="keyword">)):<br />
&nbsp;&nbsp;&nbsp; print </span><span class="default">$varname </span><span class="keyword">. </span><span class="string">' = ' </span><span class="keyword">. </span><span class="default">$varval </span><span class="keyword">. </span><span class="string">"&lt;br&gt;\n"</span><span class="keyword">;<br />
&nbsp; else:<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$varval </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">):<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">recursive_print </span><span class="keyword">(</span><span class="default">$varname </span><span class="keyword">. </span><span class="string">"['" </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">"']"</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; endforeach;<br />
&nbsp; endif;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91486""></a>
  <div class="note">
   <strong class="user">cmusicfan (at) gmail (daught) com</strong>
   <a href="#91486" class="date">11-Jun-2009 09:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Caution! var_export will add a backslash to single quotes (').<br />
<br />
You may want to use stripslashes() to remove the mysteriously added backslashes.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76099""></a>
  <div class="note">
   <strong class="user">stangelanda at arrowquick dot com</strong>
   <a href="#76099" class="date">29-Jun-2007 04:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have been looking for the best method to store data in cache files.<br />
<br />
First, I've identified two limitations of var_export verus serialize.&nbsp; It can't store internal references inside of an array and it can't store a nested object or an array containing objects before PHP 5.1.0.<br />
<br />
However, I could deal with both of those so I created a benchmark.&nbsp; I used a single array containing from 10 to 150 indexes.&nbsp; I've generate the elements' values randomly using booleans, nulls, integers, floats, and some nested arrays (the nested arrays are smaller averaging 5 elements but created similarly).&nbsp; The largest percentage of elements are short strings around 10-15 characters.&nbsp; While there is a small number of long strings (around 500 characters).<br />
<br />
Benchmarking returned these results for 1000 * [total time] / [iterations (4000 in this case)]<br />
<br />
serialize 3.656, 3.575, 3.68, 3.933, mean of 3.71<br />
include 7.099, 5.42, 5.185, 6.076, mean of 5.95<br />
eval 5.514, 5.204, 5.011, 5.788, mean of 5.38<br />
<br />
Meaning serialize is around 1 and a half times faster than var_export for a single large array.&nbsp; include and eval were consistently very close but eval was usually a few tenths faster (eval did better this particular set of trials than usual). An opcode cache like APC might make include faster, but otherwise serialize is the best choice.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75327""></a>
  <div class="note">
   <strong class="user">Glen</strong>
   <a href="#75327" class="date">23-May-2007 05:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Like previously reported, i find var_export() frustrating when dealing with recursive structures.&nbsp; Doing a :<br />
<br />
<span class="default">&lt;?php<br />
var_export</span><span class="keyword">(</span><span class="default">$GLOBALS</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
fails.&nbsp; Interestingly, var_dump() has some logic to avoid recursive references.&nbsp; So :<br />
<br />
<span class="default">&lt;?php<br />
var_dump</span><span class="keyword">(</span><span class="default">$GLOBALS</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
works (while being more ugly).&nbsp; Unlike var_export(), var_dump() has no option to return the string, so output buffering logic is required if you want to direct the output.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56494""></a>
  <div class="note">
   <strong class="user">Zorro</strong>
   <a href="#56494" class="date">04-Sep-2005 11:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function can't export EVERYTHING. Moreover, you can have an error on an simple recursive array:<br />
<br />
$test = array();<br />
$test["oops"] = &amp; $test;<br />
<br />
echo var_export($test);<br />
<br />
=&gt;<br />
<br />
Fatal error:&nbsp; Nesting level too deep - recursive dependency? in ??.php on line 59</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54440""></a>
  <div class="note">
   <strong class="user">linus at flowingcreativity dot net</strong>
   <a href="#54440" class="date">04-Jul-2005 09:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
&lt;roman at DIESPAM dot feather dot org dot ru&gt;, your function has inefficiencies and problems. I probably speak for everyone when I ask you to test code before you add to the manual.<br />
<br />
Since the issue of whitespace only comes up when exporting arrays, you can use the original var_export() for all other variable types. This function does the job, and, from the outside, works the same as var_export().<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">var_export_min</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">, </span><span class="default">$return </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$toImplode </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$var </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$toImplode</span><span class="keyword">[] = </span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">).</span><span class="string">'=&gt;'</span><span class="keyword">.</span><span class="default">var_export_min</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$code </span><span class="keyword">= </span><span class="string">'array('</span><span class="keyword">.</span><span class="default">implode</span><span class="keyword">(</span><span class="string">','</span><span class="keyword">, </span><span class="default">$toImplode</span><span class="keyword">).</span><span class="string">')'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$return</span><span class="keyword">) return </span><span class="default">$code</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else echo </span><span class="default">$code</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">, </span><span class="default">$return</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="47674""></a>
  <div class="note">
   <strong class="user">paul at worldwithoutwalls dot co dot uk</strong>
   <a href="#47674" class="date">24-Nov-2004 11:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
var_export() differs from print_r() for variables that are resources, with print_r() being more useful if you are using the function for debugging purposes.<br />
e.g.<br />
<span class="default">&lt;?php<br />
$res </span><span class="keyword">= </span><span class="default">mysql_connect</span><span class="keyword">(</span><span class="default">$dbhost</span><span class="keyword">, </span><span class="default">$dbuser</span><span class="keyword">, </span><span class="default">$dbpass</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$res</span><span class="keyword">); </span><span class="comment">//output: Resource id #14<br />
</span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$res</span><span class="keyword">); </span><span class="comment">//output: NULL<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="36606""></a>
  <div class="note">
   <strong class="user">php_manual_note at bigredspark dot com</strong>
   <a href="#36606" class="date">16-Oct-2003 12:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
[john holmes]
<br />
True, but that method would require you to open and read the file into a variable and then unserialize it into another variable.
<br />

<br />
Using a file created with var_export() could simply be include()'d, which will be less code and faster. 
<br />

<br />
[kaja]
<br />
If you are trying to find a way to temporarily save variables into some other file, check out serialize() and unserialize() instead - this one is more useful for its readable property, very handy while debugging.
<br />

<br />
[original post]
<br />
If you're like me, you're wondering why a function that outputs "correct PHP syntax" is useful. This function can be useful in implementing a cache system. You can var_export() the array into a variable and write it into a file. Writing a string such as
<br />

<br />
<span class="default">&lt;?php
<br />
$string </span><span class="keyword">= </span><span class="string">'&lt;?php $array = ' </span><span class="keyword">. </span><span class="default">$data </span><span class="keyword">. </span><span class="string">'; ?&gt;'</span><span class="keyword">;
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
where $data is the output of var_export() can create a file that can be easily include()d back into the script to recreate $array. 
<br />

<br />
The raw output of var_export() could also be eval()d to recreate the array.
<br />

<br />
---John Holmes...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

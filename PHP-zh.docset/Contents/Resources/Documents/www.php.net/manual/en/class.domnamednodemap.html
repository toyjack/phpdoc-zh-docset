<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>The DOMNamedNodeMap class</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="domimplementation.hasfeature.html">? DOMImplementation::hasFeature</a></li>
      <li style="float: right;"><a href="domnamednodemap.count.html">DOMNamedNodeMap::count ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="book.dom.html">DOM</a></li>
    <li>The DOMNamedNodeMap class</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="class.domnamednodemap" class="reference">
 <h1 class="title">The DOMNamedNodeMap class</h1>
 
 
 <div class="partintro"><p class="verinfo">(PHP 5, PHP 7, PHP 8)</p>
 



 
  <div class="section" id="domnamednodemap.synopsis">
   <h2 class="title">类摘要</h2>
 

   <div class="classsynopsis">
    <div class="ooclass">
     
    </div>

    <div class="classsynopsisinfo">
     <span class="ooclass">
      <span class="modifier">class</span> <strong class="classname">DOMNamedNodeMap</strong>
     </span>

     <span class="oointerface"><span class="modifier">implements</span> 
       <a href="class.iteratoraggregate.html" class="interfacename">IteratorAggregate</a></span><span class="oointerface">,  <a href="class.countable.html" class="interfacename">Countable</a></span> {</div>

    <div class="classsynopsisinfo classsynopsisinfo_comment">/* 属性 */</div>
    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="modifier">readonly</span>
     <span class="type">int</span>
      <var class="varname"><a href="class.domnamednodemap.html#domnamednodemap.props.length">$<var class="varname">length</var></a></var>;</div>


    <div class="classsynopsisinfo classsynopsisinfo_comment">/* 方法 */</div>
    <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><a href="domnamednodemap.count.html" class="methodname">count</a></span>(): <span class="type">int</span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="domnamednodemap.getnameditem.html" class="methodname">getNamedItem</a></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$qualifiedName</code></span>): <span class="type"><span class="type">?</span><span class="type"><a href="class.domnode.html" class="type DOMNode">DOMNode</a></span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="domnamednodemap.getnameditemns.html" class="methodname">getNamedItemNS</a></span>(<span class="methodparam"><span class="type">?</span><span class="type"><span class="type">string</span><span class="type"></span></span> <code class="parameter">$namespace</code></span>, <span class="methodparam"><span class="type">string</span> <code class="parameter">$localName</code></span>): <span class="type"><span class="type">?</span><span class="type"><a href="class.domnode.html" class="type DOMNode">DOMNode</a></span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="domnamednodemap.item.html" class="methodname">item</a></span>(<span class="methodparam"><span class="type">int</span> <code class="parameter">$index</code></span>): <span class="type"><span class="type">?</span><span class="type"><a href="class.domnode.html" class="type DOMNode">DOMNode</a></span></span></div>

   }</div>

 
  </div>
 

  <div class="section" id="domnamednodemap.props">
   <h2 class="title">属性</h2>
   <dl>
    
     <dt id="domnamednodemap.props.length"><var class="varname">length</var></dt>

     <dd>

      <p class="para">
       The number of nodes in the map. The range of valid child node 
       indices is <code class="literal">0</code> to <code class="literal">length - 1</code> inclusive.
      </p>
     </dd>

    
   </dl>

  </div>


  <div class="section">
   <h2 class="title">更新日志</h2>
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>版本</th>
       <th>说明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>8.0.0</td>
       <td>
        The unimplemented methods <span class="methodname"><strong>DOMNamedNodeMap::setNamedItem()</strong></span>,
        <span class="methodname"><strong>DOMNamedNodeMap::removeNamedItem()</strong></span>,
        <span class="methodname"><strong>DOMNamedNodeMap::setNamedItemNS()</strong></span> and
        <span class="methodname"><strong>DOMNamedNodeMap::removeNamedItem()</strong></span> have been removed.
       </td>
      </tr>

      <tr>
       <td>8.0.0</td>
       <td>
        <span class="classname"><strong class="classname">DOMNamedNodeMap</strong></span> implements
        <span class="interfacename"><a href="class.iteratoraggregate.html" class="interfacename">IteratorAggregate</a></span> now.
        Previously, <span class="interfacename"><a href="class.traversable.html" class="interfacename">Traversable</a></span> was implemented instead.
       </td>
      </tr>

     </tbody>
    
   </table>

  </div>




 
 </div>
 
 




















 
<h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="domnamednodemap.count.html">DOMNamedNodeMap::count</a> &mdash; Get number of nodes in the map</li><li><a href="domnamednodemap.getnameditem.html">DOMNamedNodeMap::getNamedItem</a> &mdash; Retrieves a node specified by name</li><li><a href="domnamednodemap.getnameditemns.html">DOMNamedNodeMap::getNamedItemNS</a> &mdash; Retrieves a node specified by local name and namespace URI</li><li><a href="domnamednodemap.item.html">DOMNamedNodeMap::item</a> &mdash; Retrieves a node specified by index</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="125646""></a>
  <div class="note">
   <strong class="user">sirajshaikh96 at yahoo dot com</strong>
   <a href="#125646" class="date">01-Jan-2021 02:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have tried to solve the general problem occurs in DOMNamedNodeMap that during executing for/foreachloop after executing removeAttribute('$name') for item(0), item(1) is not executing and warning occurs. Following codes give the solution of this problem that in loop item(0) should be applied rather than item($i) because after removing first attribute node now present element has only one attribute node.<br />
<br />
<span class="default">&lt;?php<br />
$html&nbsp; </span><span class="keyword">= </span><span class="string">'&lt;h1 id="h1test" class="h2test"&gt;Heading&lt;/h1&gt;'</span><span class="keyword">;<br />
</span><span class="default">$html </span><span class="keyword">.= </span><span class="string">'&lt;p align="left" class="right"&gt;Hello World&lt;/p&gt;'</span><span class="keyword">;<br />
<br />
</span><span class="default">$doc </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">();<br />
</span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">loadHTML</span><span class="keyword">(</span><span class="default">$html</span><span class="keyword">);<br />
<br />
</span><span class="comment">// remove attributes from&nbsp; the h1 element<br />
</span><span class="default">$h1 </span><span class="keyword">= </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">getElementsByTagName</span><span class="keyword">(</span><span class="string">'h1'</span><span class="keyword">)-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">$length </span><span class="keyword">= </span><span class="default">$h1</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">-&gt;</span><span class="default">length</span><span class="keyword">;<br />
for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$length</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$name </span><span class="keyword">= </span><span class="default">$h1</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">)-&gt;</span><span class="default">nodeName</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">$h1</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">)-&gt;</span><span class="default">nodeValue</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$h1</span><span class="keyword">-&gt;</span><span class="default">removeAttribute</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">);&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"h1: removed attribute name :- " </span><span class="keyword">.</span><span class="default">$name</span><span class="keyword">.</span><span class="string">"&lt;/br&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"h1: removed attribute value :- " </span><span class="keyword">.</span><span class="default">$value</span><span class="keyword">.</span><span class="string">"&lt;/br&gt;"</span><span class="keyword">;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; } <br />
</span><span class="comment">// remove attributes from the p element<br />
</span><span class="default">$p </span><span class="keyword">= </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">getElementsByTagName</span><span class="keyword">(</span><span class="string">'p'</span><span class="keyword">)-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">);<br />
for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$length</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$name </span><span class="keyword">= </span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">)-&gt;</span><span class="default">nodeName</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">)-&gt;</span><span class="default">nodeValue</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">removeAttribute</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">);&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"p: removed attribute name :- " </span><span class="keyword">.</span><span class="default">$name</span><span class="keyword">.</span><span class="string">"&lt;/br&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"p: removed attribute value :- " </span><span class="keyword">.</span><span class="default">$value</span><span class="keyword">.</span><span class="string">"&lt;/br&gt;"</span><span class="keyword">;&nbsp;&nbsp; <br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
OUTPUT:<br />
<br />
h1: removed attribute name :- id<br />
h1: removed attribute value :- h1test<br />
h1: removed attribute name :- class<br />
h1: removed attribute value :- h2test<br />
p: removed attribute name :- align<br />
p: removed attribute value :- left<br />
p: removed attribute name :- class<br />
p: removed attribute value :- right</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94346""></a>
  <div class="note">
   <strong class="user">kendsnyder at gmail dot com</strong>
   <a href="#94346" class="date">29-Oct-2009 07:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To add to xafford's comment. When iterating a named node map collection using -&gt;item() or using foreach, removing a attribute with DOMNode-&gt;removeAttribute() or DOMNode-&gt;removeAttributeNode() alters the collection as if it were a stack. To illustrate, the code below tries to remove all attributes from each element but only removes the first. One work around is to copy the named node map into an array before removing attributes. Using PHP 5.2.9 on Windows XP.<br />
<br />
<span class="default">&lt;?php<br />
error_reporting</span><span class="keyword">(</span><span class="default">E_ALL</span><span class="keyword">);<br />
</span><span class="default">$html&nbsp; </span><span class="keyword">= </span><span class="string">'&lt;h1 id="h1test" class="h1test"&gt;Heading&lt;/h1&gt;'</span><span class="keyword">;<br />
</span><span class="default">$html </span><span class="keyword">.= </span><span class="string">'&lt;p align="left" class="ptest"&gt;Hello World&lt;/p&gt;'</span><span class="keyword">;<br />
<br />
</span><span class="default">$doc </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">();<br />
</span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">loadHTML</span><span class="keyword">(</span><span class="default">$html</span><span class="keyword">);<br />
<br />
</span><span class="comment">// remove attributes from&nbsp; the h1 element<br />
</span><span class="default">$h1 </span><span class="keyword">= </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">getElementsByTagName</span><span class="keyword">(</span><span class="string">'h1'</span><span class="keyword">)-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">$length </span><span class="keyword">= </span><span class="default">$h1</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">-&gt;</span><span class="default">length</span><span class="keyword">;<br />
for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$length</span><span class="keyword">; ++</span><span class="default">$i</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$name </span><span class="keyword">= </span><span class="default">$h1</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">)-&gt;</span><span class="default">name</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$h1</span><span class="keyword">-&gt;</span><span class="default">removeAttribute</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"h1: removed attribute `</span><span class="default">$name</span><span class="string">`&lt;br&gt;"</span><span class="keyword">;<br />
}<br />
</span><span class="comment">// remove attributes from the p element<br />
</span><span class="default">$p </span><span class="keyword">= </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">getElementsByTagName</span><span class="keyword">(</span><span class="string">'p'</span><span class="keyword">)-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">);<br />
foreach (</span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">attributes </span><span class="keyword">as </span><span class="default">$name </span><span class="keyword">=&gt; </span><span class="default">$attrNode</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">removeAttribute</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"p: removed attribute `</span><span class="default">$name</span><span class="string">`&lt;br&gt;"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
OUTPUT:<br />
-------<br />
h1: removed attribute `id`<br />
<br />
Notice: Trying to get property of non-object in nodemap.php on line 13<br />
h1: removed attribute ``<br />
p: removed attribute `align`</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94078""></a>
  <div class="note">
   <strong class="user">xafford</strong>
   <a href="#94078" class="date">15-Oct-2009 03:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I stumbled upon a problem with DOMNamedNodeMap. If you iterate over a DOMNamedNodeMap, representing the attributes of a DOMElement with foreach and you use DOMElement::removeAttributeNode only the first attribute will be handled.
<br />

<br />
Example (not complete):
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
</span><span class="comment">/*
<br />
&nbsp;* Imagine you got a node like this:
<br />
&nbsp;* &lt;a onclick="alert('evil')" href="<a href="http://example.com" rel="nofollow" target="_blank">http://example.com</a>"&gt;evil&lt;/a&gt;
<br />
&nbsp;* and onclick should be removed, href would not be tested.
<br />
&nbsp;*/
<br />

<br />
</span><span class="keyword">foreach ( </span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">attributes </span><span class="keyword">as </span><span class="default">$attribute </span><span class="keyword">)
<br />
{
<br />

<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'checking attribute '</span><span class="keyword">, </span><span class="default">$attribute</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">, </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp;&nbsp; if ( ! </span><span class="default">in_array </span><span class="keyword">( </span><span class="default">$attribute</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">, </span><span class="default">$allowed_attributes </span><span class="keyword">) )
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">removeAttributeNode </span><span class="keyword">( </span><span class="default">$attribute </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
}
<br />

<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
The output would be:
<br />

<br />
checking attribute onclick</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

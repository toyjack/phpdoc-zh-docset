<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Sanitize filters</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="filter.filters.validate.html">? Validate filters</a></li>
      <li style="float: right;"><a href="filter.filters.misc.html">Other filters ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="filter.filters.html">Types of filters</a></li>
    <li>Sanitize filters</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="filter.filters.sanitize" class="section">
  <h2 class="title">Sanitize filters</h2>
   <p class="para">
    <table class="doctable table">
     <caption><strong>List of filters for sanitization</strong></caption>
     
      <thead>
       <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Flags</th>
        <th>Description</th>
       </tr>

      </thead>

      <tbody class="tbody">
       <tr>
        <td><strong><code>FILTER_SANITIZE_EMAIL</code></strong></td>
        <td>&quot;email&quot;</td>
        <td class="empty">&nbsp;</td>
        <td>
         Remove all characters except letters, digits and
         <code class="literal">!#$%&amp;&#039;*+-=?^_`{|}~@.[]</code>.
        </td>
       </tr>

       <tr>
        <td><strong><code>FILTER_SANITIZE_ENCODED</code></strong></td>
        <td>&quot;encoded&quot;</td>
        <td>
         <strong><code>FILTER_FLAG_STRIP_LOW</code></strong>,
         <strong><code>FILTER_FLAG_STRIP_HIGH</code></strong>,
         <strong><code>FILTER_FLAG_STRIP_BACKTICK</code></strong>,
         <strong><code>FILTER_FLAG_ENCODE_LOW</code></strong>,
         <strong><code>FILTER_FLAG_ENCODE_HIGH</code></strong>
        </td>
        <td>URL-encode string, optionally strip or encode special characters.</td>
       </tr>

       <tr>
        <td><strong><code>FILTER_SANITIZE_MAGIC_QUOTES</code></strong></td>
        <td>&quot;magic_quotes&quot;</td>
        <td class="empty">&nbsp;</td>
        <td>Apply <span class="function"><a href="function.addslashes.html" class="function">addslashes()</a></span>.</td>
       </tr>

       <tr>
        <td><strong><code>FILTER_SANITIZE_NUMBER_FLOAT</code></strong></td>
        <td>&quot;number_float&quot;</td>
        <td>
         <strong><code>FILTER_FLAG_ALLOW_FRACTION</code></strong>,
         <strong><code>FILTER_FLAG_ALLOW_THOUSAND</code></strong>,
         <strong><code>FILTER_FLAG_ALLOW_SCIENTIFIC</code></strong>
        </td>
        <td>
         Remove all characters except digits, <code class="literal">+-</code> and
         optionally <code class="literal">.,eE</code>.
        </td>
       </tr>

       <tr>
        <td><strong><code>FILTER_SANITIZE_NUMBER_INT</code></strong></td>
        <td>&quot;number_int&quot;</td>
        <td class="empty">&nbsp;</td>
        <td>
         Remove all characters except digits, plus and minus sign.
        </td>
       </tr>

       <tr>
        <td><strong><code>FILTER_SANITIZE_SPECIAL_CHARS</code></strong></td>
        <td>&quot;special_chars&quot;</td>
        <td>
         <strong><code>FILTER_FLAG_STRIP_LOW</code></strong>,
         <strong><code>FILTER_FLAG_STRIP_HIGH</code></strong>,
         <strong><code>FILTER_FLAG_STRIP_BACKTICK</code></strong>,
         <strong><code>FILTER_FLAG_ENCODE_HIGH</code></strong>
        </td>
        <td>
         HTML-escape <code class="literal">&#039;&quot;&lt;&gt;&amp;</code> and characters with
         ASCII value less than 32, optionally strip or encode other special
         characters.
        </td>
       </tr>

       <tr>
        <td><strong><code>FILTER_SANITIZE_FULL_SPECIAL_CHARS</code></strong></td>
        <td>&quot;full_special_chars&quot;</td>
        <td>
         <strong><code>FILTER_FLAG_NO_ENCODE_QUOTES</code></strong>,
        </td>
        <td>
         Equivalent to calling <span class="function"><a href="function.htmlspecialchars.html" class="function">htmlspecialchars()</a></span> with <strong><code>ENT_QUOTES</code></strong> set. Encoding quotes can
         be disabled by setting <strong><code>FILTER_FLAG_NO_ENCODE_QUOTES</code></strong>. Like <span class="function"><a href="function.htmlspecialchars.html" class="function">htmlspecialchars()</a></span>, this
         filter is aware of the <a href="ini.core.html#ini.default-charset" class="link">default_charset</a> and if a sequence of bytes is detected that
         makes up an invalid character in the current character set then the entire string is rejected resulting in a 0-length string.
         When using this filter as a default filter, see the warning below about setting the default flags to 0.
        </td>
       </tr>

       <tr>
        <td><strong><code>FILTER_SANITIZE_STRING</code></strong></td>
        <td>&quot;string&quot;</td>
        <td>
         <strong><code>FILTER_FLAG_NO_ENCODE_QUOTES</code></strong>,
         <strong><code>FILTER_FLAG_STRIP_LOW</code></strong>,
         <strong><code>FILTER_FLAG_STRIP_HIGH</code></strong>,
         <strong><code>FILTER_FLAG_STRIP_BACKTICK</code></strong>,
         <strong><code>FILTER_FLAG_ENCODE_LOW</code></strong>,
         <strong><code>FILTER_FLAG_ENCODE_HIGH</code></strong>,
         <strong><code>FILTER_FLAG_ENCODE_AMP</code></strong>
        </td>
        <td>Strip tags, optionally strip or encode special characters.</td>
       </tr>

       <tr>
        <td><strong><code>FILTER_SANITIZE_STRIPPED</code></strong></td>
        <td>&quot;stripped&quot;</td>
        <td class="empty">&nbsp;</td>
        <td>Alias of &quot;string&quot; filter.</td>
       </tr>

       <tr>
        <td><strong><code>FILTER_SANITIZE_URL</code></strong></td>
        <td>&quot;url&quot;</td>
        <td class="empty">&nbsp;</td>
        <td>
         Remove all characters except letters, digits and
         <code class="literal">$-_.+!*&#039;(),{}|\\^~[]`&lt;&gt;#%&quot;;/?:@&amp;=</code>.
        </td>
       </tr>

       <tr>
        <td><strong><code>FILTER_UNSAFE_RAW</code></strong></td>
        <td>&quot;unsafe_raw&quot;</td>
        <td>
         <strong><code>FILTER_FLAG_STRIP_LOW</code></strong>,
         <strong><code>FILTER_FLAG_STRIP_HIGH</code></strong>,
         <strong><code>FILTER_FLAG_STRIP_BACKTICK</code></strong>,
         <strong><code>FILTER_FLAG_ENCODE_LOW</code></strong>,
         <strong><code>FILTER_FLAG_ENCODE_HIGH</code></strong>,
         <strong><code>FILTER_FLAG_ENCODE_AMP</code></strong>
        </td>
        <td>
         Do nothing, optionally strip or encode special characters. This
         filter is also aliased to <strong><code>FILTER_DEFAULT</code></strong>.
        </td>
       </tr>

      </tbody>
     
    </table>

   </p>
   <div class="warning"><strong class="warning">Warning</strong>
     <p class="para">
       When using one of these filters as a default filter either through your ini file
       or through your web server&#039;s configuration, the default flags is set to 
       <strong><code>FILTER_FLAG_NO_ENCODE_QUOTES</code></strong>.  You need to explicitly set
       filter.default_flags to 0 to have quotes encoded by default. Like this:
       <div class="example" id="example-5401">
         <p><strong>Example #1 Configuring the default filter to act like htmlspecialchars</strong></p>
         <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
filter.default&nbsp;=&nbsp;full_special_chars<br />filter.default_flags&nbsp;=&nbsp;0</span>
</code></div>
         </div>

       </div>
     </p>
   </div>
   
  <div class="simplesect">
   <h3 class="title">更新日志</h3>
   <p class="para">
    <table class="doctable informaltable">
     
      <thead>
       <tr>
        <th>版本</th>
        <th>说明</th>
       </tr>

      </thead>

      <tbody class="tbody">
       <tr>
        <td>5.2.11/5.3.1</td>
        <td>
         Slashes (<code class="literal">/</code>) are removed by
         <strong><code>FILTER_SANITIZE_EMAIL</code></strong>. Prior they were retained.
        </td>
       </tr>

      </tbody>
     
    </table>

   </p>
  </div>

 </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="125563""></a>
  <div class="note">
   <strong class="user">ipse at sergiosantos dot me</strong>
   <a href="#125563" class="date">02-Dec-2020 04:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Although it's specifically mentioned in the above documentation, because many seem to find this unintuitive it's worth pointing out that FILTER_SANITIZE_NUMBER_FLOAT will remove the decimal character unless you specify FILTER_FLAG_ALLOW_FRACTION:<br />
<br />
<span class="default">&lt;?php<br />
$number_string </span><span class="keyword">= </span><span class="string">'12.34'</span><span class="keyword">;<br />
<br />
echo </span><span class="default">filter_var</span><span class="keyword">( </span><span class="default">$number_string</span><span class="keyword">, </span><span class="default">FILTER_SANITIZE_NUMBER_FLOAT </span><span class="keyword">); </span><span class="comment">// 1234<br />
<br />
</span><span class="keyword">echo </span><span class="default">filter_var</span><span class="keyword">( </span><span class="default">$number_string</span><span class="keyword">, </span><span class="default">FILTER_SANITIZE_NUMBER_FLOAT</span><span class="keyword">, </span><span class="default">FILTER_FLAG_ALLOW_FRACTION </span><span class="keyword">); </span><span class="comment">// 12.34<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="125198""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#125198" class="date">20-Jul-2020 05:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
&nbsp;</span><span class="comment">/*<br />
&nbsp;&nbsp; &nbsp; filter all ascii and save juste 0-9 a-Z and @ . _<br />
*/<br />
<br />
</span><span class="keyword">echo </span><span class="default">alphanum</span><span class="keyword">(</span><span class="string">'abcdefghABCDEFGH0123456789/!:;@._'</span><span class="keyword">);<br />
</span><span class="comment">// return abcdefghABCDEFGH0123456789@._<br />
<br />
</span><span class="keyword">function </span><span class="default">alphanum</span><span class="keyword">( </span><span class="default">$string </span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$h</span><span class="keyword">=</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$a</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$a</span><span class="keyword">&lt;</span><span class="default">$h</span><span class="keyword">; </span><span class="default">$a</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">[</span><span class="default">$a</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (</span><span class="default">$i</span><span class="keyword">==</span><span class="default">46</span><span class="keyword">) || </span><span class="comment">// .<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">==</span><span class="default">64</span><span class="keyword">) || </span><span class="comment">// @<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">==</span><span class="default">95</span><span class="keyword">) || </span><span class="comment">// _<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">(</span><span class="default">$i </span><span class="keyword">&gt; </span><span class="default">47 </span><span class="keyword">&amp;&amp; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">58</span><span class="keyword">) || </span><span class="comment">//0123456789 <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">(</span><span class="default">$i </span><span class="keyword">&gt; </span><span class="default">64 </span><span class="keyword">&amp;&amp; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">91</span><span class="keyword">) || </span><span class="comment">//ABCDEFGH..Z<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">(</span><span class="default">$i </span><span class="keyword">&gt; </span><span class="default">96 </span><span class="keyword">&amp;&amp; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">123</span><span class="keyword">)&nbsp;&nbsp; </span><span class="comment">//abcdefgh..z<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">) { </span><span class="default">$x </span><span class="keyword">.= </span><span class="default">$string</span><span class="keyword">[</span><span class="default">$a</span><span class="keyword">]; }&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$x</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124717""></a>
  <div class="note">
   <strong class="user">Rodrigo Guariento</strong>
   <a href="#124717" class="date">13-Feb-2020 11:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To get ONLY numbers from a string use this code:<br />
&nbsp;&nbsp;&nbsp; echo preg_replace('/[^0-9]/', '', '123456-789');</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124667""></a>
  <div class="note">
   <strong class="user">anonymous</strong>
   <a href="#124667" class="date">31-Jan-2020 12:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In the "FILTER_SANITIZE_URL" section where it says, "Remove all characters except letters, digits and $-_.+!*'(),{}|\\^~[]`&lt;&gt;#%";/?:@&amp;=." is there a reason why there is a double backslash (\\)? Shouldn't there only be one backslash if it's saying that backslashes are allowed?</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="123334""></a>
  <div class="note">
   <strong class="user">darren at daz-web dot com</strong>
   <a href="#123334" class="date">12-Nov-2018 12:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those looking for a simple way around filtering POST forms that have textarea elements in them. If you also need tab for example you can extend quite easily.<br />
<br />
<span class="default">&lt;?php <br />
</span><span class="comment">//create an array of all relevant textareas<br />
</span><span class="default">$textareas </span><span class="keyword">= array(</span><span class="string">"ta1"</span><span class="keyword">);<br />
<br />
foreach(</span><span class="default">$_POST </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$v </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">);</span><span class="comment">//so we are sure it is whitespace free at both ends<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //preserve newline for textarea answers<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$k</span><span class="keyword">,</span><span class="default">$textareas</span><span class="keyword">))</span><span class="default">$v</span><span class="keyword">=</span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"\n"</span><span class="keyword">,</span><span class="string">"[NEWLINE]"</span><span class="keyword">,</span><span class="default">$v</span><span class="keyword">); <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//sanitise string<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$v </span><span class="keyword">= </span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">, </span><span class="default">FILTER_SANITIZE_STRING</span><span class="keyword">, </span><span class="default">FILTER_FLAG_STRIP_LOW </span><span class="keyword">| </span><span class="default">FILTER_FLAG_STRIP_HIGH </span><span class="keyword">| </span><span class="default">FILTER_FLAG_STRIP_BACKTICK</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//now replace the placeholder with the original newline<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_POST</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"[NEWLINE]"</span><span class="keyword">,</span><span class="string">"\n"</span><span class="keyword">,</span><span class="default">$v</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
</span><span class="comment">//simple form for testing submital<br />
<br />
</span><span class="default">?&gt;</span>&lt;!doctype html&gt;<br />
&lt;html&gt;<br />
&lt;head&gt;<br />
&lt;meta charset="utf-8"&gt;<br />
&lt;title&gt;Filter test&lt;/title&gt;<br />
&lt;/head&gt;<br />
<br />
&lt;body&gt;<br />
&nbsp;&nbsp;&nbsp; <br />
&lt;form action="" method="post"&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;p&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;textarea name="ta1" cols="30" rows="10"&gt;<span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'ta1'</span><span class="keyword">]; </span><span class="default">?&gt;</span>&lt;/textarea&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/p&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;p&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;input type="text" name="txt1" size="30" value="<span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'txt1'</span><span class="keyword">]; </span><span class="default">?&gt;</span>" /&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/p&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;p&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;input type="submit" /&gt;&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; &lt;/p&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/form&gt;<br />
<br />
&lt;/body&gt;<br />
&nbsp;&nbsp;&nbsp; <br />
&lt;/html&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119697""></a>
  <div class="note">
   <strong class="user">AntonioPrimera</strong>
   <a href="#119697" class="date">04-Aug-2016 01:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please be aware that when using filter_var() with FILTER_SANITIZE_NUMBER_FLOAT and FILTER_SANITIZE_NUMBER_INT the result will be a string, even if the input value is actually a float or an int.<br />
<br />
Use FILTER_VALIDATE_FLOAT and FILTER_VALIDATE_INT, which will convert the result to the expected type.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119431""></a>
  <div class="note">
   <strong class="user">Ruth</strong>
   <a href="#119431" class="date">03-Jun-2016 02:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is an example for a form having a group of checkboxes besides a lot of other inputs:<br />
<br />
$args = array(<br />
&nbsp;&nbsp;&nbsp; 'details' =&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'name' =&gt; 'details[]',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'filter' =&gt; FILTER_SANITIZE_STRING,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'flags'&nbsp; =&gt; FILTER_REQUIRE_ARRAY<br />
&nbsp;&nbsp;&nbsp; )<br />
&nbsp;&nbsp;&nbsp; // , <br />
&nbsp;&nbsp;&nbsp; // a lot of other stuff here (all the form's elements)<br />
);<br />
$myInputs = filter_input_array( INPUT_GET, $args, true );<br />
<br />
where the checkboxes are (their form is in a page that reloads itself):<br />
<br />
&lt;label&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;input type="checkbox" name="details[]" value="A" <span class="default">&lt;?php </span><span class="keyword">if (</span><span class="default">in_array</span><span class="keyword">( </span><span class="default">"A"</span><span class="keyword">, </span><span class="default">$myInputs</span><span class="keyword">[</span><span class="string">'details'</span><span class="keyword">] )) { echo </span><span class="string">'checked'</span><span class="keyword">; } </span><span class="default">?&gt;</span>&gt;<br />
&nbsp;&nbsp;&nbsp; Show A<br />
&lt;/label&gt;<br />
&lt;label&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;input type="checkbox" name="details[]" value="B" <span class="default">&lt;?php </span><span class="keyword">if (</span><span class="default">in_array</span><span class="keyword">( </span><span class="default">"B"</span><span class="keyword">, </span><span class="default">$myInputs</span><span class="keyword">[</span><span class="string">'details'</span><span class="keyword">] )) { echo </span><span class="string">'checked'</span><span class="keyword">; } </span><span class="default">?&gt;</span>&gt;<br />
&nbsp;&nbsp;&nbsp; Show B<br />
&lt;/label&gt;<br />
&lt;label&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;input type="checkbox" name="details[]" value="C" <span class="default">&lt;?php </span><span class="keyword">if (</span><span class="default">in_array</span><span class="keyword">( </span><span class="default">"C"</span><span class="keyword">, </span><span class="default">$myInputs</span><span class="keyword">[</span><span class="string">'details'</span><span class="keyword">] )) { echo </span><span class="string">'checked'</span><span class="keyword">; } </span><span class="default">?&gt;</span>&gt;<br />
&nbsp;&nbsp;&nbsp; Show C<br />
&lt;/label&gt;<br />
&lt;label&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;input type="checkbox" name="details[]" value="D" <span class="default">&lt;?php </span><span class="keyword">if (</span><span class="default">in_array</span><span class="keyword">( </span><span class="default">"D"</span><span class="keyword">, </span><span class="default">$myInputs</span><span class="keyword">[</span><span class="string">'details'</span><span class="keyword">] )) { echo </span><span class="string">'checked'</span><span class="keyword">; } </span><span class="default">?&gt;</span>&gt;<br />
&nbsp;&nbsp;&nbsp; Show D<br />
&lt;/label&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118970""></a>
  <div class="note">
   <strong class="user">Willscrlt</strong>
   <a href="#118970" class="date">10-Mar-2016 10:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To include multiple flags, simply separate the flags with vertical pipe symbols.<br />
<br />
For example, if you want to use filter_var() to sanitize $string with FILTER_SANITIZE_STRING and pass in FILTER_FLAG_STRIP_HIGH and FILTER_FLAG_STRIP_LOW, just call it like this:<br />
<br />
$string = filter_var($string, FILTER_SANITIZE_STRING, FILTER_FLAG_STRIP_HIGH | FILTER_FLAG_STRIP_LOW);<br />
<br />
The same goes for passing a flags field in an options array in the case of using callbacks.<br />
<br />
$var = filter_var($string, FILTER_SANITIZE_SPECIAL_CHARS,<br />
array('flags' =&gt; FILTER_FLAG_STRIP_LOW | FILTER_FLAG_ENCODE_HIGH));<br />
<br />
Thanks to the Brain Goo blog at popmartian.com/tipsntricks/for this info.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118186""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#118186" class="date">22-Oct-2015 03:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
FILTER_SANITIZE_STRING doesn't behavior the same as strip_tags function.&nbsp; &nbsp; strip_tags allows less than symbol inferred from context, FILTER_SANITIZE_STRING strips regardless.<br />
<span class="default">&lt;?php<br />
$smaller </span><span class="keyword">= </span><span class="string">"not a tag &lt; 5"</span><span class="keyword">;<br />
echo </span><span class="default">strip_tags</span><span class="keyword">(</span><span class="default">$smaller</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// -&gt; not a tag &lt; 5<br />
</span><span class="keyword">echo </span><span class="default">filter_var </span><span class="keyword">( </span><span class="default">$smaller</span><span class="keyword">, </span><span class="default">FILTER_SANITIZE_STRING</span><span class="keyword">); </span><span class="comment">// -&gt; not a tag<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114484""></a>
  <div class="note">
   <strong class="user">david dot drakulovski at gmail dot com</strong>
   <a href="#114484" class="date">25-Feb-2014 07:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a simpler and a better presented ASCII list for the &lt;32 or 127&gt; filters <br />
(if wikipedia confused the hell out of you):<br />
<br />
<a href="http://www.danshort.com/ASCIImap/" rel="nofollow" target="_blank">http://www.danshort.com/ASCIImap/</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111542""></a>
  <div class="note">
   <strong class="user">galvao at galvao dot eti dot br</strong>
   <a href="#111542" class="date">02-Mar-2013 06:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just to clarify, since this may be unknown for a lot of people:
<br />

<br />
ASCII characters above 127 are known as "Extended" and they represent characters such as greek letters and accented letters in latin alphabets, used in languages such as pt_BR.
<br />

<br />
A good ASCII quick reference (aside from the already mentioned Wikipedia article) can be found at: <a href="http://www.asciicodes.com/" rel="nofollow" target="_blank">http://www.asciicodes.com/</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111398""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#111398" class="date">15-Feb-2013 07:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Support for FILTER_SANITIZE_FULL_SPECIAL_CHARS was added from version 5.3.3</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110103""></a>
  <div class="note">
   <strong class="user">googlybash24 at aol dot com</strong>
   <a href="#110103" class="date">19-Sep-2012 05:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Remember to trim() the $_POST before your filters are applied:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// We trim the $_POST data before any spaces get encoded to "%20"<br />
<br />
// Trim array values using this function "trim_value"<br />
</span><span class="keyword">function </span><span class="default">trim_value</span><span class="keyword">(&amp;</span><span class="default">$value</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// this removes whitespace and related characters from the beginning and end of the string<br />
</span><span class="keyword">}<br />
</span><span class="default">array_filter</span><span class="keyword">(</span><span class="default">$_POST</span><span class="keyword">, </span><span class="string">'trim_value'</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// the data in $_POST is trimmed<br />
<br />
</span><span class="default">$postfilter </span><span class="keyword">=&nbsp; &nbsp; </span><span class="comment">// set up the filters to be used with the trimmed post array<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'user_tasks'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt;&nbsp; &nbsp; array(</span><span class="string">'filter' </span><span class="keyword">=&gt; </span><span class="default">FILTER_SANITIZE_STRING</span><span class="keyword">, </span><span class="string">'flags' </span><span class="keyword">=&gt; !</span><span class="default">FILTER_FLAG_STRIP_LOW</span><span class="keyword">),&nbsp; &nbsp; </span><span class="comment">// removes tags. formatting code is encoded -- add nl2br() when displaying<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'username'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt;&nbsp; &nbsp; array(</span><span class="string">'filter' </span><span class="keyword">=&gt; </span><span class="default">FILTER_SANITIZE_ENCODED</span><span class="keyword">, </span><span class="string">'flags' </span><span class="keyword">=&gt; </span><span class="default">FILTER_FLAG_STRIP_LOW</span><span class="keyword">),&nbsp; &nbsp; </span><span class="comment">// we are using this in the url<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'mod_title'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt;&nbsp; &nbsp; array(</span><span class="string">'filter' </span><span class="keyword">=&gt; </span><span class="default">FILTER_SANITIZE_ENCODED</span><span class="keyword">, </span><span class="string">'flags' </span><span class="keyword">=&gt; </span><span class="default">FILTER_FLAG_STRIP_LOW</span><span class="keyword">),&nbsp; &nbsp; </span><span class="comment">// we are using this in the url<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);<br />
<br />
</span><span class="default">$revised_post_array </span><span class="keyword">= </span><span class="default">filter_var_array</span><span class="keyword">(</span><span class="default">$_POST</span><span class="keyword">, </span><span class="default">$postfilter</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// must be referenced via a variable which is now an array that takes the place of $_POST[]<br />
</span><span class="keyword">echo (</span><span class="default">nl2br</span><span class="keyword">(</span><span class="default">$revised_post_array</span><span class="keyword">[</span><span class="string">'user_tasks'</span><span class="keyword">]));&nbsp; &nbsp; </span><span class="comment">//-- use nl2br() upon output like so, for the ['user_tasks'] array value so that the newlines are formatted, since this is our HTML &lt;textarea&gt; field and we want to maintain newlines<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110026""></a>
  <div class="note">
   <strong class="user">googlybash24 at aol dot com</strong>
   <a href="#110026" class="date">13-Sep-2012 08:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This should help with most simple "textarea" fields in post forms.<br />
<br />
Removing user html tags while maintaining text formatting such as newlines and carriage returns involves using the FILTER_SANITIZE_STRING filter ID with the flag !FILTER_FLAG_STRIP_LOW. The formatting text (the low ASCII values under decimal 32) are encoded because of the included FILTER_FLAG_ENCODE_LOW flag, but you are now preventing these from being removed. When you want to display the value on the page back in its intended format, use nl2br() so the encoded newlines are formatted properly on the page.<br />
<br />
This example cleans $_POST data from a textarea field with the name "user_tasks" on a previous html form, stripping tags but maintaining formatting (at least for newlines):<br />
<br />
<span class="default">&lt;?php<br />
$postfilter </span><span class="keyword">=<br />
&nbsp;&nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'user_tasks'&nbsp; &nbsp; </span><span class="keyword">=&gt;&nbsp; &nbsp; array(</span><span class="string">'filter' </span><span class="keyword">=&gt; </span><span class="default">FILTER_SANITIZE_STRING</span><span class="keyword">, </span><span class="string">'flags' </span><span class="keyword">=&gt; !</span><span class="default">FILTER_FLAG_STRIP_LOW</span><span class="keyword">),&nbsp; &nbsp; </span><span class="comment">// removes tags. formatting code is encoded -- add nl2br() when displaying<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);<br />
<br />
</span><span class="default">$revised_post_array </span><span class="keyword">= </span><span class="default">filter_input_array</span><span class="keyword">(</span><span class="default">INPUT_POST</span><span class="keyword">, </span><span class="default">$postfilter</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// must be referenced via a variable which is now an array that takes the place of $_POST[]<br />
</span><span class="keyword">echo (</span><span class="default">nl2br</span><span class="keyword">(</span><span class="default">$revised_post_array</span><span class="keyword">[</span><span class="string">'user_tasks'</span><span class="keyword">]));&nbsp; &nbsp; </span><span class="comment">// here we use nl2br() for the displayed value, for the ['user_tasks'] array value so that the newlines are formatted<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109350""></a>
  <div class="note">
   <strong class="user">adellemfrank at hotmail dot com</strong>
   <a href="#109350" class="date">09-Jul-2012 07:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A good list of which ASCII characters are &lt; 32 and &gt; 127 can be found at: <a href="http://en.wikipedia.org/wiki/ASCII#ASCII_printable_characters" rel="nofollow" target="_blank">http://en.wikipedia.org/wiki/ASCII#ASCII_printable_characters</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105279""></a>
  <div class="note">
   <strong class="user">scamber256 at hotmail dot de</strong>
   <a href="#105279" class="date">06-Aug-2011 02:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just a hint I tested,<br />
<br />
You can obtain all the chars &lt;32 (so newline and c.return), by using not operator &gt; !FILTER_FLAG_STRIP_LOW as the last argument.<br />
<br />
Example:<br />
filter_input(INPUT_GET,'test',FILTER_SANITIZE_STRING,!FILTER_FLAG_STRIP_LOW);<br />
<br />
The filter keeps working as before removing anything else as before apart from FILTER_FLAG_STRIP_LOW.<br />
Just filter those "bad" chars &lt;32 manually you don't want.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103379""></a>
  <div class="note">
   <strong class="user">Dmitry Snytkine</strong>
   <a href="#103379" class="date">11-Apr-2011 04:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Beware that FILTER_FLAG_STRIP_LOW strips NEWLINE and TAG and CARRIAGE RETURN chars. If you have a form that accepts user input in plaintext format, all the submitted text will lose all the line breaks, making it appear all on one line. This basically renders this filter useless for parsing user-submitted text, even in plain text.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94828""></a>
  <div class="note">
   <strong class="user">marcus at synchromedia dot co dot uk</strong>
   <a href="#94828" class="date">27-Nov-2009 01:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It's not entirely clear what the LOW and HIGH ranges are. LOW is characters below 32, HIGH is those above 127, i.e. outside the ASCII range.<br />
<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= </span><span class="string">"\tcafé\n"</span><span class="keyword">;<br />
</span><span class="comment">//This will remove the tab and the line break<br />
</span><span class="keyword">echo </span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">FILTER_SANITIZE_STRING</span><span class="keyword">, </span><span class="default">FILTER_FLAG_STRIP_LOW</span><span class="keyword">);<br />
</span><span class="comment">//This will remove the é.<br />
</span><span class="keyword">echo </span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">FILTER_SANITIZE_STRING</span><span class="keyword">, </span><span class="default">FILTER_FLAG_STRIP_HIGH</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>运行时配置</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="fileinfo.installation.html">? 安装</a></li>
      <li style="float: right;"><a href="fileinfo.resources.html">资源类型 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="fileinfo.setup.html">安装／配置</a></li>
    <li>运行时配置</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="fileinfo.configuration" class="section">
  <h2 class="title">运行时配置</h2>
  <p class="para">此扩展没有在 <var class="filename">php.ini</var> 中定义配置指令。</p>
 </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="112304""></a>
  <div class="note">
   <strong class="user">thomandre at gmail dot com</strong>
   <a href="#112304" class="date">30-May-2013 02:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In the PHP 5.3.13 CLI version, it might use the "MAGIC" environnement variable to get the magic database file. Due to the fact that this version doesn't use the standard format, this file may be wrong. You can see it via a simple script : <br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; var_dump</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'MAGIC'</span><span class="keyword">]);<br />
</span><span class="default">?&gt;<br />
</span><br />
Unset this variable and it will work again. You can use unsetenv (C-Shell) or unset (Bourne Shell).<br />
<br />
This does not affect the Apache version. Other CLI versions might be affected.<br />
<br />
I lost a lot of time on this undocumented issue.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96939""></a>
  <div class="note">
   <strong class="user">sam nospam at archives.org.au</strong>
   <a href="#96939" class="date">23-Mar-2010 10:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In addition to<br />
&nbsp;extension=fileinfo.so<br />
I also had to add<br />
&nbsp;mime_magic.magicfile=/usr/share/file/magic<br />
to my php configuration.&nbsp; Then, I instantiate Finfo thus:<br />
<br />
<span class="default">&lt;?php<br />
$mimeMagicFile </span><span class="keyword">= </span><span class="default">get_cfg_var</span><span class="keyword">(</span><span class="string">'mime_magic.magicfile'</span><span class="keyword">);<br />
</span><span class="default">$finfo </span><span class="keyword">= new </span><span class="default">finfo</span><span class="keyword">(</span><span class="default">FILEINFO_MIME</span><span class="keyword">, </span><span class="default">$mimeMagicFile</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
(This is despite the rumours I hear about the default being exactly what I set it to anyway.)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85040""></a>
  <div class="note">
   <strong class="user">wade at waddles dot org</strong>
   <a href="#85040" class="date">12-Aug-2008 08:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On Ubuntu Feisty, you need to add the line<br />
<br />
extension=fileinfo.so<br />
<br />
to your /etc/php5/*/php.ini files. The extension gets linked at compile time to /usr/lib/libmagic.so.1 which uses a MAGIC environment variable which defaults to <br />
<br />
/etc/magic:/usr/share/file/magic</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

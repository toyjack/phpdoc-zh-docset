<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>格式化一个 GMT/UTC 日期／时间</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.gettimeofday.html">? gettimeofday</a></li>
      <li style="float: right;"><a href="function.gmmktime.html">gmmktime ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.datetime.html">Date/Time 函数</a></li>
    <li>格式化一个 GMT/UTC 日期／时间</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.gmdate" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">gmdate</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">gmdate</span> &mdash; <span class="dc-title">格式化一个 GMT/UTC 日期／时间</span></p>

 </div>
 <div class="refsect1 unknown-examplet" id="refsect1-function.gmdate-unknown-examplet">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>gmdate</strong></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$format</code></span>, <span class="methodparam"><span class="type">int</span> <code class="parameter">$timestamp</code><span class="initializer"> = ?</span></span>): <span class="type">string</span></div>

  <p class="para rdfs-comment">
   同 <span class="function"><a href="function.date.html" class="function">date()</a></span>
   函数完全一样，只除了返回的时间是格林威治标准时（GMT）。例如当在中国（GMT
   +0800）运行以下程序时，第一行显示"Jan 01 2000 00:00:00"而第二行显示"Dec
   31 1999 16:00:00"。
   <div class="example" id="example-2038">
    <p><strong>Example #1 <span class="function"><strong>gmdate()</strong></span> 例子</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">"M&nbsp;d&nbsp;Y&nbsp;H:i:s"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">mktime&nbsp;</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,</span><span style="color: #0000BB">0</span><span style="color: #007700">,</span><span style="color: #0000BB">0</span><span style="color: #007700">,</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">2000</span><span style="color: #007700">));<br />echo&nbsp;</span><span style="color: #0000BB">gmdate</span><span style="color: #007700">(</span><span style="color: #DD0000">"M&nbsp;d&nbsp;Y&nbsp;H:i:s"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">mktime&nbsp;</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,</span><span style="color: #0000BB">0</span><span style="color: #007700">,</span><span style="color: #0000BB">0</span><span style="color: #007700">,</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">2000</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    在 PHP 5.1.0 之前，负的时间戳（1970 年之前的日期）在某些系统下（例如
    Windows）不能工作。
   </p>
  </p></blockquote>
  <p class="para">
   参见 <span class="function"><a href="function.date.html" class="function">date()</a></span>，<span class="function"><a href="function.mktime.html" class="function">mktime()</a></span>，<span class="function"><a href="function.gmmktime.html" class="function">gmmktime()</a></span>
   和 <span class="function"><a href="function.strftime.html" class="function">strftime()</a></span>。
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="123024""></a>
  <div class="note">
   <strong class="user">abhijagtap73 at gmail dot com</strong>
   <a href="#123024" class="date">10-Aug-2018 06:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I am getting a string which is a timestamp:<br />
<br />
string(13) "1532941682753"<br />
<br />
I need to convert it to date in the following format: (yyyy-mm-dd hh:mm:ss.SSS) I can do it with<br />
<br />
gmdate('yyyy-mm-dd hh:mm:ss.SSS', $timestamp)<br />
<br />
but I get the error that 2nd argument is not an int. So I need to convert my timestamp to valid int. I tried to cast my timestamp string to int but the problem is it is too long for int and every time I get the maximum allowed for int, which is int(2147483647). Any ideas how to fix it would be welcome. Thank you.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="122905""></a>
  <div class="note">
   <strong class="user">rob AT rob DASH jakobs DOT nl</strong>
   <a href="#122905" class="date">03-Jul-2018 11:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to calculate the time period between two clocked events that happen less than 24 hours apart, for example the daylight period between sunrise and sunset, you can take advantage of the fact that the gmdate() function also accepts a negative timestamp. If you want to present the time period in the format hours:minutes you can use<br />
<br />
<span class="default">&lt;?php<br />
$sunrise_clocked </span><span class="keyword">= </span><span class="string">'7:45'</span><span class="keyword">;&nbsp; </span><span class="comment">// hours with or without leading zeros<br />
</span><span class="default">$sunset_clocked </span><span class="keyword">= </span><span class="string">'21:05'</span><span class="keyword">;&nbsp; </span><span class="comment">// hours with or without leading zeros<br />
<br />
</span><span class="default">$time_past </span><span class="keyword">= </span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">'G:i'</span><span class="keyword">, </span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$sunset_clocked</span><span class="keyword">) - </span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$sunrise_clocked</span><span class="keyword">));<br />
<br />
echo </span><span class="string">'Daylight period is ' </span><span class="keyword">. </span><span class="default">$time_past </span><span class="keyword">. </span><span class="string">' (hours:minutes)'</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
The above example will output<br />
<br />
&nbsp;&nbsp;&nbsp; Daylight period is 13:20 (hours:minutes)<br />
<br />
The fun part comes in when the sunset time is next day (and therefore in value lower than the sunrise clock time), for example:<br />
<br />
&nbsp;&nbsp; &nbsp; $sunrise_clocked = '18:45';<br />
&nbsp;&nbsp; &nbsp; $sunset_clocked = '09:30';<br />
<br />
will output<br />
<br />
&nbsp;&nbsp; &nbsp; Daylight period is 14:45 (hours:minutes)<br />
<br />
This trick does NOT work with date(), because the output may then be off a number of hours, depending on your time zone.<br />
Tested with PHP 5.6.35 and 7.2.4.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119814""></a>
  <div class="note">
   <strong class="user">genna87 at gmail dot com</strong>
   <a href="#119814" class="date">31-Aug-2016 11:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A function to get the ISO 8601 timestamp in UTC with precision up to microseconds<br />
<br />
function iso_8601_utc_time($precision = 0)<br />
{<br />
&nbsp;&nbsp;&nbsp; $time = gettimeofday();<br />
<br />
&nbsp;&nbsp;&nbsp; if (is_int($precision) &amp;&amp; $precision &gt;= 0 &amp;&amp; $precision &lt;= 6) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $total = (string) $time['sec'] . '.' . str_pad((string) $time['usec'], 6, '0', STR_PAD_LEFT);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $total_rounded = bcadd($total, '0.' . str_repeat('0', $precision) . '5', $precision);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; @list($integer, $fraction) = explode('.', $total_rounded);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $format = $precision == 0<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ? "Y-m-d\TH:i:s\Z"<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; : "Y-m-d\TH:i:s,".$fraction."\Z";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return gmdate($format, $integer);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return false;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84970""></a>
  <div class="note">
   <strong class="user">QED2000</strong>
   <a href="#84970" class="date">07-Aug-2008 11:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a very simple UTC timestamp:<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;</span><span class="keyword">print </span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">"Y-m-d\TH:i:s\Z"</span><span class="keyword">); <br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76656""></a>
  <div class="note">
   <strong class="user">jhechtf at gmail dot com</strong>
   <a href="#76656" class="date">24-Jul-2007 08:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
My function for something like this is like so:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">actual_time</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">,</span><span class="default">$offset</span><span class="keyword">,</span><span class="default">$timestamp</span><span class="keyword">){<br />
&nbsp;&nbsp; </span><span class="comment">//Offset is in hours from gmt, including a - sign if applicable. <br />
&nbsp;&nbsp; //So lets turn offset into seconds<br />
&nbsp;&nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">$offset</span><span class="keyword">*</span><span class="default">60</span><span class="keyword">*</span><span class="default">60</span><span class="keyword">;<br />
&nbsp;&nbsp; </span><span class="default">$timestamp </span><span class="keyword">= </span><span class="default">$timestamp </span><span class="keyword">+ </span><span class="default">$offset</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//Remember, adding a negative is still subtraction ;)<br />
&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">gmdate</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">,</span><span class="default">$timestamp</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span>It's always worked fine for me.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75772""></a>
  <div class="note">
   <strong class="user">Blazeme</strong>
   <a href="#75772" class="date">15-Jun-2007 03:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here, I wrote a function (from code above) for easy time zone<br />
settings.<br />
Regards.<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">datum</span><span class="keyword">(</span><span class="default">$datum</span><span class="keyword">=</span><span class="default">true</span><span class="keyword">) {<br />
</span><span class="default">$sign </span><span class="keyword">= </span><span class="string">"+"</span><span class="keyword">; </span><span class="comment">// Whichever direction from GMT to your timezone. + or -<br />
</span><span class="default">$h </span><span class="keyword">= </span><span class="string">"1"</span><span class="keyword">; </span><span class="comment">// offset for time (hours)<br />
</span><span class="default">$dst </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">; </span><span class="comment">// true - use dst ; false - don't<br />
<br />
</span><span class="keyword">if (</span><span class="default">$dst</span><span class="keyword">==</span><span class="default">true</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$daylight_saving </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'I'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$daylight_saving</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$sign </span><span class="keyword">== </span><span class="string">"-"</span><span class="keyword">){ </span><span class="default">$h</span><span class="keyword">=</span><span class="default">$h</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else { </span><span class="default">$h</span><span class="keyword">=</span><span class="default">$h</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">; }<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">$hm </span><span class="keyword">= </span><span class="default">$h </span><span class="keyword">* </span><span class="default">60</span><span class="keyword">;<br />
</span><span class="default">$ms </span><span class="keyword">= </span><span class="default">$hm </span><span class="keyword">* </span><span class="default">60</span><span class="keyword">;<br />
if (</span><span class="default">$sign </span><span class="keyword">== </span><span class="string">"-"</span><span class="keyword">){ </span><span class="default">$timestamp </span><span class="keyword">= </span><span class="default">time</span><span class="keyword">()-(</span><span class="default">$ms</span><span class="keyword">); }<br />
else { </span><span class="default">$timestamp </span><span class="keyword">= </span><span class="default">time</span><span class="keyword">()+(</span><span class="default">$ms</span><span class="keyword">); }<br />
</span><span class="default">$gmdate </span><span class="keyword">= </span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">"m.d.Y. g:i A"</span><span class="keyword">, </span><span class="default">$timestamp</span><span class="keyword">);<br />
if(</span><span class="default">$datum</span><span class="keyword">==</span><span class="default">true</span><span class="keyword">) {<br />
return </span><span class="default">$gmdate</span><span class="keyword">;<br />
}<br />
else {<br />
return </span><span class="default">$timestamp</span><span class="keyword">;<br />
}<br />
<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
If you set first argument to true, it'll return formated date.<br />
If false, will return $timestamp.<br />
Enjoy!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="63711""></a>
  <div class="note">
   <strong class="user">ttech5593 at gmail dot com</strong>
   <a href="#63711" class="date">28-Mar-2006 02:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For me most of the examples here needed the + or - seconds to set the time zone. I wanted a faster way to get the time zone in seconds. So I created this : <br />
<span class="default">&lt;?php <br />
$h </span><span class="keyword">= </span><span class="string">"3"</span><span class="keyword">;</span><span class="comment">// Hour for time zone goes here e.g. +7 or -4, just remove the + or -<br />
</span><span class="default">$hm </span><span class="keyword">= </span><span class="default">$h </span><span class="keyword">* </span><span class="default">60</span><span class="keyword">; <br />
</span><span class="default">$ms </span><span class="keyword">= </span><span class="default">$hm </span><span class="keyword">* </span><span class="default">60</span><span class="keyword">;<br />
</span><span class="default">$gmdate </span><span class="keyword">= </span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">"m/d/Y g:i:s A"</span><span class="keyword">, </span><span class="default">time</span><span class="keyword">()-(</span><span class="default">$ms</span><span class="keyword">)); </span><span class="comment">// the "-" can be switched to a plus if that's what your time zone is.<br />
</span><span class="keyword">echo </span><span class="string">"Your current time now is :&nbsp; </span><span class="default">$gmdate</span><span class="string"> . "</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span> <br />
It works. Hope it helps.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="62885""></a>
  <div class="note">
   <strong class="user">gefiltefishee at comcast dot net</strong>
   <a href="#62885" class="date">11-Mar-2006 01:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was struggling with how to get my browser to output MY local time using gmdate().<br />
<br />
I figured it out and here's what you do (ASSUMING THE SERVER IS ON GMT, If not, just echo a generic gmdate() without timezone setting and calculate the number of hours ahead or behind you are of that time, convert it to seconds and add [for ahead] or subtract [for behind] that value to time() ):<br />
<br />
NOTE: these are US times [setlocale(LC_TIME, 'en_US')]<br />
<br />
for Central Time (7 hours behind GMT):<br />
gmdate("format", time()-(25200));<br />
<br />
For Pacific Time (9 hours behind GMT):<br />
gmdate("format", time()-(32400));<br />
<br />
REMEMBER - THE VALUES ABOVE ASSUME THE SERVER IS ON GMT<br />
<br />
I used the following gmdate() format:<br />
"l, F jS, Y&nbsp; g:i a"<br />
but you can use what you like ;)<br />
<br />
Hope this helps!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60159""></a>
  <div class="note">
   <strong class="user">fernandobassani at gmail dot com</strong>
   <a href="#60159" class="date">28-Dec-2005 05:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you have the same application running in different countries, you may have some troubles getting the local time..<br />
In my case, I was having troubles with a clock created with Macromedia Flash... the time shown by the clock was supposed to be set up by the server, passing the timestamp. When I moved the file to another country, I got a wrong time...<br />
You can use the timezone offset ( date("Z") ) to handle this kind of thing...<br />
<br />
<span class="default">&lt;?php<br />
$timestamp </span><span class="keyword">= </span><span class="default">time</span><span class="keyword">()+</span><span class="default">date</span><span class="keyword">(</span><span class="string">"Z"</span><span class="keyword">);<br />
echo </span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">"Y/m/d H:i:s"</span><span class="keyword">,</span><span class="default">$timestamp</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="59054""></a>
  <div class="note">
   <strong class="user">Sir Derek G</strong>
   <a href="#59054" class="date">24-Nov-2005 11:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a nifty little function that returns a random timestamp between two dates.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">//////////////////////////////////////////////////////////
<br />
// Return a random timestamp between two dates (inclusive)
<br />
// Example: Tue, 08 Nov 2004 06:47:10 GMT
<br />
//
<br />
// time - Starting time string
<br />
// Valid Examples:
<br />
// 10 September 2001
<br />
// next Thursday
<br />
// last Monday
<br />
// now
<br />
// 
<br />
// time2 - Ending time string
<br />
</span><span class="keyword">function </span><span class="default">randomTimestamp</span><span class="keyword">(</span><span class="default">$time </span><span class="keyword">= </span><span class="string">"" </span><span class="keyword">, </span><span class="default">$time2 </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">$time</span><span class="keyword">) </span><span class="default">$time </span><span class="keyword">= </span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">"10 September 2000"</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">$time2</span><span class="keyword">) </span><span class="default">$time2 </span><span class="keyword">= </span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">"24 November 2005"</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$timestamp </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">" D, d M Y"</span><span class="keyword">, </span><span class="default">rand</span><span class="keyword">( </span><span class="default">settype</span><span class="keyword">(</span><span class="default">$time </span><span class="keyword">, </span><span class="default">int</span><span class="keyword">) , </span><span class="default">settype</span><span class="keyword">(</span><span class="default">$time2 </span><span class="keyword">, </span><span class="default">int</span><span class="keyword">) )); </span><span class="comment">//Must be called once before becoming random, ???
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$timestamp </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">" D, d M Y"</span><span class="keyword">, </span><span class="default">rand</span><span class="keyword">(</span><span class="default">$time </span><span class="keyword">, </span><span class="default">$time2</span><span class="keyword">)).</span><span class="string">" "</span><span class="keyword">;</span><span class="comment">//Now it's random
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$h </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">23</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$h</span><span class="keyword">) == </span><span class="default">1 </span><span class="keyword">) </span><span class="default">$h </span><span class="keyword">= </span><span class="string">"0</span><span class="default">$h</span><span class="string">"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$t </span><span class="keyword">= </span><span class="default">$h</span><span class="keyword">.</span><span class="string">":"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$d </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">29</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">) == </span><span class="default">1 </span><span class="keyword">) </span><span class="default">$d </span><span class="keyword">= </span><span class="string">"0</span><span class="default">$d</span><span class="string">"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$t </span><span class="keyword">.= </span><span class="default">$d</span><span class="keyword">.</span><span class="string">":"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">59</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">) == </span><span class="default">1 </span><span class="keyword">) </span><span class="default">$s </span><span class="keyword">= </span><span class="string">"0</span><span class="default">$s</span><span class="string">"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$t </span><span class="keyword">.= </span><span class="default">$s</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$timestamp </span><span class="keyword">.= </span><span class="default">$t</span><span class="keyword">.</span><span class="string">" GMT"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$timestamp</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58538""></a>
  <div class="note">
   <strong class="user">rob at geek dot co dot nz</strong>
   <a href="#58538" class="date">07-Nov-2005 12:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It's worth noting the distinction between gmgate() and date() with regards to day light savings time. If your server uses universal time and makes an adjustment by locale for daylight savings time, you will want to use date(). gmdate will display the non-adjuisted time.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57088""></a>
  <div class="note">
   <strong class="user">paul at sysnyx dot com</strong>
   <a href="#57088" class="date">23-Sep-2005 01:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Gives user the ability to use their timezone preferences.
<br />
I had to create this script for a very large community. I first made any posts to the database that would display the date using just time();
<br />

<br />
Example: mysql_query("INSERT INTO `table` (`datetime`) VALUES ('".time()."')");
<br />

<br />
Also, for their timezone preference, I had the values as (example):
<br />
(Eastern Timezone) -5 hours
<br />
(Newfoundland) -3 hours -30 minutes
<br />

<br />
This information would be saved in the users table.
<br />
To display the date and time in their respective timezone preference:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">datetime</span><span class="keyword">(</span><span class="default">$datetime</span><span class="keyword">,</span><span class="default">$zone</span><span class="keyword">){
<br />
if(</span><span class="default">date</span><span class="keyword">(</span><span class="string">'I'</span><span class="keyword">)):</span><span class="default">$datetime</span><span class="keyword">+=</span><span class="default">60</span><span class="keyword">*</span><span class="default">60</span><span class="keyword">;endif;
<br />
return </span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">'m-d-Y - h:i:sa'</span><span class="keyword">,</span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$zone</span><span class="keyword">,</span><span class="default">$datetime</span><span class="keyword">));
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
$datetime would be the information pulled from the database from a post for news, forums, etcetera (remember, the inserted table data for the time was using time();)
<br />
$zone would be the information pulled from the database from the users timezone preference.
<br />

<br />
I also used cookies to store their timezone:
<br />
$sth=mysql_query("SELECT `datetime` FROM `table` LIMIT 1");
<br />
$row=mysql_fetch_assoc($sth);
<br />
echo datetime($row['datetime'],$_COOKIE['timezone']);
<br />

<br />
Remember to set the 'm-d-Y - h:i:sa' to how you wish the time to display. Visit the manual about date().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53002""></a>
  <div class="note">
   <strong class="user">ncofreNOSPAMPLEASE at step2u dot com</strong>
   <a href="#53002" class="date">20-May-2005 04:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Want to put different International Times in your web?
<br />

<br />
First create a database including the GMT and the DST (find it f.i. at timeanddate.com). Be careful, because there are several different DST dates and options.
<br />

<br />
Once you have your function which calculates the GMT hour difference (it can be a decimal!!), sum it to the Unix Time (remember that unix time is GMT, not local: f.i. gmdate("U")===date("U)).
<br />

<br />
Don't forget to recalculate the GMT difference to seconds before it.
<br />

<br />
Then format your date using gmdate() (not date()!) and... you've got your International Time!
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
$city</span><span class="keyword">[</span><span class="string">"Name"</span><span class="keyword">] = </span><span class="string">"Barcelona"</span><span class="keyword">;
<br />
</span><span class="default">$city</span><span class="keyword">[</span><span class="string">"GMT"</span><span class="keyword">] = </span><span class="default">1.0</span><span class="keyword">;
<br />
</span><span class="default">$city</span><span class="keyword">[</span><span class="string">"actualDST"</span><span class="keyword">] = </span><span class="default">1.0</span><span class="keyword">; </span><span class="comment">//Because it's summer time
<br />

<br />
</span><span class="default">$gmt_diff </span><span class="keyword">= </span><span class="default">$city</span><span class="keyword">[</span><span class="string">"GMT"</span><span class="keyword">]+</span><span class="default">$city</span><span class="keyword">[</span><span class="string">"actualDST"</span><span class="keyword">]; </span><span class="comment">//your functions for getting the hour difference betweer the city and the GMT
<br />
</span><span class="default">$city_time </span><span class="keyword">= </span><span class="default">time</span><span class="keyword">()+(</span><span class="default">$gmt_diff</span><span class="keyword">*</span><span class="default">3600</span><span class="keyword">); </span><span class="comment">//sum the timestamps
<br />
</span><span class="keyword">echo </span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">"H:i"</span><span class="keyword">,</span><span class="default">$city_time</span><span class="keyword">); </span><span class="comment">//echo the formatted date
<br />
</span><span class="keyword">echo </span><span class="string">" h. in the beautiful city of "</span><span class="keyword">.</span><span class="default">$city</span><span class="keyword">[</span><span class="string">"Name"</span><span class="keyword">];
<br />

<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="43921""></a>
  <div class="note">
   <strong class="user">Kogik inc dot  -- info at kogik dot com</strong>
   <a href="#43921" class="date">08-Jul-2004 02:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Wath out for summer time and winter time...
<br />

<br />
If you want to get the current date and time based on GMT you could use this :
<br />

<br />
<span class="default">&lt;?php
<br />
$timezone&nbsp; </span><span class="keyword">= -</span><span class="default">5</span><span class="keyword">; </span><span class="comment">//(GMT -5:00) EST (U.S. &amp; Canada)
<br />
</span><span class="keyword">echo </span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">"Y/m/j H:i:s"</span><span class="keyword">, </span><span class="default">time</span><span class="keyword">() + </span><span class="default">3600</span><span class="keyword">*(</span><span class="default">$timezone</span><span class="keyword">+</span><span class="default">date</span><span class="keyword">(</span><span class="string">"I"</span><span class="keyword">))); 
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
this would gives: 2004/07/8 14:35:19 in summer time
<br />
and 2004/07/8 13:35:19 in winter time.
<br />

<br />
Note that date("I") returns 1 in summer and 0 in winter.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37401""></a>
  <div class="note">
   <strong class="user">www.l-serwis.wpt.pl</strong>
   <a href="#37401" class="date">13-Nov-2003 01:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to get time in your timezone try this:
<br />

<br />
<span class="default">&lt;?php
<br />
$zone</span><span class="keyword">=</span><span class="default">3600</span><span class="keyword">*</span><span class="default">0 </span><span class="comment">//GMT
<br />
</span><span class="default">$zone</span><span class="keyword">=</span><span class="default">3600</span><span class="keyword">*</span><span class="default">1 </span><span class="comment">//CET
<br />
</span><span class="default">$zone</span><span class="keyword">=</span><span class="default">3600</span><span class="keyword">*-</span><span class="default">5</span><span class="comment">//USA
<br />
</span><span class="default">$date</span><span class="keyword">=</span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">"D M Y H:i"</span><span class="keyword">, </span><span class="default">time</span><span class="keyword">() + </span><span class="default">$zone</span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="25031""></a>
  <div class="note">
   
   <a href="#25031" class="date">08-Sep-2002 09:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Do not use the "T" timezone specifier to generate "GMT", as this may return "UTC" or "GMT+0000" or "Z" or something else which depends on the running platform, which would not be RFC1123 compliant.
<br />

<br />
Use 'D, d M Y H:i:s \G\M\T' which forces the value of the timezone indicator.
<br />

<br />
Note that RFC1123 requires the use of ENGLISH day and month abbreviations. They MUST NOT be localized!
<br />

<br />
An example of the RFC1123 format for full dates is:
<br />
Sun, 06 Nov 1994 08:49:37 GMT
<br />

<br />
Note the presence of the leading 0 (RFC1123 dates have a fixed size, and space padding is prohibited because it causes problems with fixed size handling when such dates are used in HTTP headers that may compress whitespaces.
<br />

<br />
Some proxies accept also the ISO 8601 format, but this is not documented in HTTP/1.1 specs (RFC2616).
<br />

<br />
Examples:
<br />
<span class="default">&lt;?php
<br />
header</span><span class="keyword">(</span><span class="string">'Date: '</span><span class="keyword">.</span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">'D, d M Y H:i:s \G\M\T'</span><span class="keyword">, </span><span class="default">time</span><span class="keyword">()));
<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">'Last-Modified: '</span><span class="keyword">.</span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">'D, d M Y H:i:s \G\M\T'</span><span class="keyword">, </span><span class="default">time</span><span class="keyword">()));
<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">'Expires: '</span><span class="keyword">.</span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">'D, d M Y H:i:s \G\M\T'</span><span class="keyword">, </span><span class="default">time</span><span class="keyword">() + </span><span class="default">3600</span><span class="keyword">));
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
or if you prefer double quotes and don't want to bother with double backslashes:
<br />
<span class="default">&lt;?php
<br />
header</span><span class="keyword">(</span><span class="string">"Date: "</span><span class="keyword">.</span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">"D, d M Y H:i:s"</span><span class="keyword">, </span><span class="default">time</span><span class="keyword">()).</span><span class="string">" GMT"</span><span class="keyword">);
<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">"Last-Modified: "</span><span class="keyword">.</span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">"D, d M Y H:i:s"</span><span class="keyword">, </span><span class="default">time</span><span class="keyword">()).</span><span class="string">" GMT"</span><span class="keyword">);;
<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">"Expires: "</span><span class="keyword">.</span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">"D, d M Y H:i:s"</span><span class="keyword">, </span><span class="default">time</span><span class="keyword">() + </span><span class="default">3600</span><span class="keyword">).</span><span class="string">" GMT"</span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="22366""></a>
  <div class="note">
   
   <a href="#22366" class="date">14-Jun-2002 08:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For an RFC 1123 (HTTP header date) date, try:
<br />

<br />
<span class="default">&lt;?php
<br />
$rfc_1123_date </span><span class="keyword">= </span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">'D, d M Y H:i:s T'</span><span class="keyword">, </span><span class="default">time</span><span class="keyword">());
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>列出指定路径中的文件和目录</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.rewinddir.html">? rewinddir</a></li>
      <li style="float: right;"><a href="book.fileinfo.html">Fileinfo ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.dir.html">目录函数函数</a></li>
    <li>列出指定路径中的文件和目录</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.scandir" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">scandir</h1>
  <p class="verinfo">(PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">scandir</span> &mdash; <span class="dc-title">列出指定路径中的文件和目录</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.scandir-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>scandir</strong></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$directory</code></span>, <span class="methodparam"><span class="type">int</span> <code class="parameter">$sorting_order</code><span class="initializer"> = ?</span></span>, <span class="methodparam"><span class="type">resource</span> <code class="parameter">$context</code><span class="initializer"> = ?</span></span>): <span class="type">array</span></div>

  <p class="para rdfs-comment">
   返回一个 <span class="type">array</span>，包含有
   <code class="parameter">directory</code> 中的文件和目录。
  </p>

 </div>


 <div class="refsect1 parameters" id="refsect1-function.scandir-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">directory</code></dt>

     <dd>

      <p class="para">
       要被浏览的目录
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">sorting_order</code></dt>

     <dd>

      <p class="para">
       默认的排序顺序是按字母升序排列。如果使用了可选参数
       <code class="parameter">sorting_order</code>（设为
       1），则排序顺序是按字母降序排列。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">context</code></dt>

     <dd>

      <p class="para">
       <code class="parameter">context</code> 参数的说明见手册中的
       <a href="ref.stream.html" class="link">Streams API</a> 一章。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.scandir-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   成功则返回包含有文件名的 <span class="type">array</span>，如果失败则返回
   <strong><code>false</code></strong>。如果 <code class="parameter">directory</code>
   不是个目录，则返回布尔值 <strong><code>false</code></strong> 并生成一条
   <strong><code>E_WARNING</code></strong> 级的错误。
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.scandir-changelog">
  <h3 class="title">更新日志</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>版本</th>
       <th>说明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.4.0</td>
       <td>
        <code class="parameter">sorting_order</code> now accepts constants. Any
        nonzero value caused descending order in previous versions.
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.scandir-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-2070">
    <p><strong>Example #1 一个简单的 <span class="function"><strong>scandir()</strong></span> 例子</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$dir&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'/tmp'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$files1&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">scandir</span><span style="color: #007700">(</span><span style="color: #0000BB">$dir</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$files2&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">scandir</span><span style="color: #007700">(</span><span style="color: #0000BB">$dir</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$files1</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$files2</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程的输出类似于：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [0] =&gt; .
    [1] =&gt; ..
    [2] =&gt; bar.php
    [3] =&gt; foo.txt
    [4] =&gt; somedir
)
Array
(
    [0] =&gt; somedir
    [1] =&gt; foo.txt
    [2] =&gt; bar.php
    [3] =&gt; ..
    [4] =&gt; .
)
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   <div class="example" id="example-2071">
    <p><strong>Example #2 <span class="function"><strong>scandir()</strong></span> 在 PHP 4 中的实现</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$dir&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"/tmp"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$dh&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">opendir</span><span style="color: #007700">(</span><span style="color: #0000BB">$dir</span><span style="color: #007700">);<br />while&nbsp;(</span><span style="color: #0000BB">false&nbsp;</span><span style="color: #007700">!==&nbsp;(</span><span style="color: #0000BB">$filename&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">readdir</span><span style="color: #007700">(</span><span style="color: #0000BB">$dh</span><span style="color: #007700">)))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$files</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">$filename</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">sort</span><span style="color: #007700">(</span><span style="color: #0000BB">$files</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$files</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">rsort</span><span style="color: #007700">(</span><span style="color: #0000BB">$files</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$files</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程的输出类似于：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [0] =&gt; .
    [1] =&gt; ..
    [2] =&gt; bar.php
    [3] =&gt; foo.txt
    [4] =&gt; somedir
)
Array
(
    [0] =&gt; somedir
    [1] =&gt; foo.txt
    [2] =&gt; bar.php
    [3] =&gt; ..
    [4] =&gt; .
)
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.scandir-notes">
  <h3 class="title">注释</h3>
  <div class="tip"><strong class="tip">Tip</strong><p class="simpara">如已启用<a href="filesystem.configuration.html#ini.allow-url-fopen" class="link">fopen 包装器</a>，在此函数中， URL 可作为文件名。关于如何指定文件名详见 <span class="function"><a href="function.fopen.html" class="function">fopen()</a></span>。各种
wapper 的不同功能请参见 <a href="wrappers.html" class="xref">支持的协议和封装协议</a>，注意其用法及其可提供的预定义变量。</p></div>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.scandir-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.opendir.html" class="function" rel="rdfs-seeAlso">opendir()</a> - 打开目录句柄</span></li>
    <li class="member"><span class="function"><a href="function.readdir.html" class="function" rel="rdfs-seeAlso">readdir()</a> - 从目录句柄中读取条目</span></li>
    <li class="member"><span class="function"><a href="function.glob.html" class="function" rel="rdfs-seeAlso">glob()</a> - 寻找与模式匹配的文件路径</span></li>
    <li class="member"><span class="function"><a href="function.is-dir.html" class="function" rel="rdfs-seeAlso">is_dir()</a> - 判断给定文件名是否是一个目录</span></li>
    <li class="member"><span class="function"><a href="function.sort.html" class="function" rel="rdfs-seeAlso">sort()</a> - 对数组升序排序</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="126663""></a>
  <div class="note">
   <strong class="user">coolbikram0 at gmail dot com</strong>
   <a href="#126663" class="date">04-Dec-2021 05:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A simple recursive function to list all files and subdirectories in a directory:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">listAllFiles</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">), array(</span><span class="string">'.'</span><span class="keyword">, </span><span class="string">'..'</span><span class="keyword">));<br />
&nbsp; <br />
&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as &amp;</span><span class="default">$item</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$item </span><span class="keyword">= </span><span class="default">$dir </span><span class="keyword">. </span><span class="default">$item</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; unset(</span><span class="default">$item</span><span class="keyword">);<br />
&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$item</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$item</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">listAllFiles</span><span class="keyword">(</span><span class="default">$item </span><span class="keyword">. </span><span class="default">DIRECTORY_SEPARATOR</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$array</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124679""></a>
  <div class="note">
   <strong class="user">djacobson at usa dot rugby</strong>
   <a href="#124679" class="date">03-Feb-2020 09:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp; * Get rid of the dots, the occasional `.DS_Store` file and reindex the <br />
&nbsp; * resulting array all at once.<br />
&nbsp; *<br />
&nbsp; * @param string $path_to_directory The relative path to your target directory.<br />
&nbsp; *<br />
&nbsp; * @return array The reindexed array of files.<br />
&nbsp; */<br />
</span><span class="keyword">function </span><span class="default">get_the_files</span><span class="keyword">( </span><span class="default">$path_to_directory </span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">array_slice</span><span class="keyword">( </span><span class="default">array_diff</span><span class="keyword">( </span><span class="default">scandir</span><span class="keyword">( </span><span class="default">$path_to_directory </span><span class="keyword">), array( </span><span class="string">'..'</span><span class="keyword">, </span><span class="string">'.'</span><span class="keyword">, </span><span class="string">'.DS_Store' </span><span class="keyword">) ), </span><span class="default">0 </span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124346""></a>
  <div class="note">
   <strong class="user">webmaster at gmail dot com</strong>
   <a href="#124346" class="date">27-Oct-2019 08:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
easy way to list every item in a directory<br />
<br />
<span class="default">&lt;?php<br />
$itemnum </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
</span><span class="default">$dir </span><span class="keyword">= </span><span class="string">'C:/Path/To/Directory'</span><span class="keyword">;<br />
foreach(</span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">) as </span><span class="default">$item</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; if (!(</span><span class="default">$item </span><span class="keyword">== </span><span class="string">'.'</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!(</span><span class="default">$item </span><span class="keyword">== </span><span class="string">'..'</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo(</span><span class="default">$itemnum</span><span class="keyword">.</span><span class="string">" = "</span><span class="keyword">.</span><span class="default">$item</span><span class="keyword">.</span><span class="string">"&lt;br&gt;"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$itemnum </span><span class="keyword">= (</span><span class="default">$itemnum </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">);<br />
}}}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124079""></a>
  <div class="note">
   <strong class="user">Nerbert</strong>
   <a href="#124079" class="date">29-Jul-2019 12:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you use array_diff() to eliminate "." and ".." you must use array_values() on the result because array_diff() will return an associative array, which may cause problems for a for loop beginning at 0.<br />
<br />
$files = array_values(array_diff(scandir($directory), array('..', '.')));</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="123647""></a>
  <div class="note">
   <strong class="user">artmanniako at gmail dot com</strong>
   <a href="#123647" class="date">02-Mar-2019 11:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
How i solved problem with '.' and '..'<br />
<br />
$x = scandir__DIR__; //any directory<br />
foreach ($x as $key =&gt; $value) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ('.' !== $value &amp;&amp; '..' !== $value){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo $value;<br />
&nbsp;&nbsp; } <br />
}<br />
Simple and working</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="123057""></a>
  <div class="note">
   <strong class="user">admin at kmoz000 dot free</strong>
   <a href="#123057" class="date">21-Aug-2018 01:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
function ScaniDir($path){<br />
&nbsp; $ptd= opendir($path);<br />
&nbsp; while (( $ptdf=readdir($ptd))){<br />
&nbsp;&nbsp; &nbsp;&nbsp; $srca = $path.'/'.$ptdf;<br />
&nbsp;&nbsp; &nbsp; if (is_file($srca) and pathinfo($srca, PATHINFO_EXTENSION)=='pdf') {$files['src'][]=$srca;$files['name'][]=explode('.',$ptdf)[0];}<br />
&nbsp;&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
return $files ;<br />
<br />
&nbsp;}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="122438""></a>
  <div class="note">
   <strong class="user">info at remark dot no</strong>
   <a href="#122438" class="date">25-Feb-2018 07:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Someone wrote that array_slice could be used to quickly remove directory entries "." and "..". However, "-" is a valid entry that would come before those, so array_slice would remove the wrong entries.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="121183""></a>
  <div class="note">
   <strong class="user">SPekary</strong>
   <a href="#121183" class="date">03-Jun-2017 06:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Unless you specify no sorting, file names are sorted in ASCII alphabetic order, meaning numbers first, then uppercase, then lowercase letters, even on operating systems whose file system ignores the case of file names when it does its own sorting.<br />
<br />
For example, on Mac OS, the following files will appear in this order in the Finder, when your disk is formated using the standard file system:<br />
1file.php<br />
a.inc<br />
B.txt<br />
c.txt<br />
<br />
However, scandir will produce an array in the following order:<br />
1file.php<br />
B.txt<br />
a.inc<br />
c.txt</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119422""></a>
  <div class="note">
   <strong class="user">simon dot riget at gmail dot com</strong>
   <a href="#119422" class="date">02-Jun-2016 07:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a simple and versatile function that returns an array tree of files, matching wildcards:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// List files in tree, matching wildcards * and ?<br />
</span><span class="keyword">function </span><span class="default">tree</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">){<br />
&nbsp; static </span><span class="default">$match</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="comment">// Find the real directory part of the path, and set the match parameter<br />
&nbsp; </span><span class="default">$last</span><span class="keyword">=</span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">,</span><span class="string">"/"</span><span class="keyword">);<br />
&nbsp; if(!</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">)){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$match</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">,</span><span class="default">$last</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; while(!</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$last</span><span class="keyword">)) &amp;&amp; </span><span class="default">$last</span><span class="keyword">!==</span><span class="default">false</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$last</span><span class="keyword">=</span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">,</span><span class="string">"/"</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">);<br />
&nbsp; }<br />
&nbsp; if(empty(</span><span class="default">$match</span><span class="keyword">)) </span><span class="default">$match</span><span class="keyword">=</span><span class="string">"/*"</span><span class="keyword">;<br />
&nbsp; if(!</span><span class="default">$path</span><span class="keyword">=</span><span class="default">realpath</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">)) return;<br />
<br />
&nbsp; </span><span class="comment">// List files<br />
&nbsp; </span><span class="keyword">foreach(</span><span class="default">glob</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">.</span><span class="default">$match</span><span class="keyword">) as </span><span class="default">$file</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$list</span><span class="keyword">[]=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">,</span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">,</span><span class="string">"/"</span><span class="keyword">)+</span><span class="default">1</span><span class="keyword">);<br />
&nbsp; }&nbsp; <br />
<br />
&nbsp; </span><span class="comment">// Process sub directories<br />
&nbsp; </span><span class="keyword">foreach(</span><span class="default">glob</span><span class="keyword">(</span><span class="string">"</span><span class="default">$path</span><span class="string">/*"</span><span class="keyword">, </span><span class="default">GLOB_ONLYDIR</span><span class="keyword">) as </span><span class="default">$dir</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$list</span><span class="keyword">[</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">,</span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">,</span><span class="string">"/"</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">)+</span><span class="default">1</span><span class="keyword">)]=</span><span class="default">tree</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">);<br />
&nbsp; }<br />
&nbsp; <br />
&nbsp; return @</span><span class="default">$list</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117575""></a>
  <div class="note">
   <strong class="user">telefoontoestel59 at hotmail dot com</strong>
   <a href="#117575" class="date">01-Jul-2015 02:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was looking for an easy way to get only files from a certain directory. I came up with the following line of code that will result in an array listing only files. the samen can be done for directories ofcourse.<br />
<br />
<span class="default">&lt;?php<br />
$files </span><span class="keyword">= </span><span class="default">array_filter</span><span class="keyword">(</span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$directory</span><span class="keyword">), function(</span><span class="default">$file</span><span class="keyword">) { return </span><span class="default">is_file</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">); })<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116581""></a>
  <div class="note">
   <strong class="user">Tom</strong>
   <a href="#116581" class="date">24-Jan-2015 04:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just was curious to count files and lines in a project<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp; </span><span class="keyword">function </span><span class="default">DirLineCounter</span><span class="keyword">( </span><span class="default">$dir </span><span class="keyword">, </span><span class="default">$result </span><span class="keyword">= array(</span><span class="string">'lines_html' </span><span class="keyword">=&gt; </span><span class="default">false</span><span class="keyword">, </span><span class="string">'files_count' </span><span class="keyword">=&gt; </span><span class="default">false</span><span class="keyword">, </span><span class="string">'lines_count' </span><span class="keyword">=&gt; </span><span class="default">false </span><span class="keyword">), </span><span class="default">$complete_table </span><span class="keyword">= </span><span class="default">true </span><span class="keyword">)<br />
&nbsp; {<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$file_read </span><span class="keyword">= array( </span><span class="string">'php'</span><span class="keyword">, </span><span class="string">'html'</span><span class="keyword">, </span><span class="string">'js'</span><span class="keyword">, </span><span class="string">'css' </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$dir_ignore </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$scan_result </span><span class="keyword">= </span><span class="default">scandir</span><span class="keyword">( </span><span class="default">$dir </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; foreach ( </span><span class="default">$scan_result </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( !</span><span class="default">in_array</span><span class="keyword">( </span><span class="default">$value</span><span class="keyword">, array( </span><span class="string">'.'</span><span class="keyword">, </span><span class="string">'..' </span><span class="keyword">) ) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">is_dir</span><span class="keyword">( </span><span class="default">$dir </span><span class="keyword">. </span><span class="default">DIRECTORY_SEPARATOR </span><span class="keyword">. </span><span class="default">$value </span><span class="keyword">) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">in_array</span><span class="keyword">( </span><span class="default">$value</span><span class="keyword">, </span><span class="default">$dir_ignore </span><span class="keyword">) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">DirLineCounter</span><span class="keyword">( </span><span class="default">$dir </span><span class="keyword">. </span><span class="default">DIRECTORY_SEPARATOR </span><span class="keyword">. </span><span class="default">$value</span><span class="keyword">, </span><span class="default">$result</span><span class="keyword">, </span><span class="default">false </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$type </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">( </span><span class="string">'.'</span><span class="keyword">, </span><span class="default">$value </span><span class="keyword">); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$type </span><span class="keyword">= </span><span class="default">array_reverse</span><span class="keyword">( </span><span class="default">$type </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( !</span><span class="default">in_array</span><span class="keyword">( </span><span class="default">$type</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="default">$file_read </span><span class="keyword">) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$lines </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$handle </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">( </span><span class="default">$dir </span><span class="keyword">. </span><span class="default">DIRECTORY_SEPARATOR </span><span class="keyword">. </span><span class="default">$value</span><span class="keyword">, </span><span class="string">'r' </span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while ( !</span><span class="default">feof</span><span class="keyword">( </span><span class="default">$handle </span><span class="keyword">) ) {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">is_bool</span><span class="keyword">( </span><span class="default">$handle </span><span class="keyword">) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$line </span><span class="keyword">= </span><span class="default">fgets</span><span class="keyword">( </span><span class="default">$handle </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$lines</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">fclose</span><span class="keyword">( </span><span class="default">$handle </span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="string">'lines_html'</span><span class="keyword">][] = </span><span class="string">'&lt;tr&gt;&lt;td&gt;' </span><span class="keyword">. </span><span class="default">$dir </span><span class="keyword">. </span><span class="string">'&lt;/td&gt;&lt;td&gt;' </span><span class="keyword">. </span><span class="default">$value </span><span class="keyword">. </span><span class="string">'&lt;/td&gt;&lt;td&gt;' </span><span class="keyword">. </span><span class="default">$lines </span><span class="keyword">. </span><span class="string">'&lt;/td&gt;&lt;/tr&gt;'</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="string">'lines_count'</span><span class="keyword">] = </span><span class="default">$result</span><span class="keyword">[</span><span class="string">'lines_count'</span><span class="keyword">] + </span><span class="default">$lines</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="string">'files_count'</span><span class="keyword">] = </span><span class="default">$result</span><span class="keyword">[</span><span class="string">'files_count'</span><span class="keyword">] + </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; if ( </span><span class="default">$complete_table </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$lines_html </span><span class="keyword">= </span><span class="default">implode</span><span class="keyword">(</span><span class="string">''</span><span class="keyword">, </span><span class="default">$result</span><span class="keyword">[</span><span class="string">'lines_html'</span><span class="keyword">]) . </span><span class="string">'&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td style="border: 1px solid #222"&gt;Files Total: ' </span><span class="keyword">. </span><span class="default">$result</span><span class="keyword">[</span><span class="string">'files_count'</span><span class="keyword">] . </span><span class="string">'&lt;/td&gt;&lt;td style="border: 1px solid #222"&gt;Lines Total: ' </span><span class="keyword">. </span><span class="default">$result</span><span class="keyword">[</span><span class="string">'lines_count'</span><span class="keyword">] . </span><span class="string">'&lt;/td&gt;&lt;/tr&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'&lt;table&gt;&lt;tr&gt;&lt;td style="width: 60%; background-color:#ddd;"&gt;Dir&lt;/td&gt;&lt;td style="width: 30%; background-color:#ddd;"&gt;File&lt;/td&gt;&lt;td style="width: 10%; background-color:#ddd;"&gt;Lines&lt;/td&gt;&lt;/tr&gt;' </span><span class="keyword">. </span><span class="default">$lines_html </span><span class="keyword">. </span><span class="string">'&lt;/table&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp; }<br />
<br />
&nbsp; echo </span><span class="default">DirLineCounter</span><span class="keyword">( </span><span class="string">'.' </span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115871""></a>
  <div class="note">
   <strong class="user">eep2004 at ukr dot net</strong>
   <a href="#115871" class="date">07-Oct-2014 09:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Fastest way to get a list of files without dots.<br />
<span class="default">&lt;?php<br />
$files </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">scandir</span><span class="keyword">(</span><span class="string">'/path/to/directory/'</span><span class="keyword">), </span><span class="default">2</span><span class="keyword">);</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114184""></a>
  <div class="note">
   <strong class="user">gambit_642 AT hotmailDOTcom</strong>
   <a href="#114184" class="date">22-Jan-2014 02:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Needed something that could return the contents of single or multiple directories, recursively or non-recursively,<br />
for all files or specified file extensions that would be<br />
accessible easily from any scope or script.<br />
<br />
And I wanted to allow overloading cause sometimes I'm too lazy to pass all params.<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">scanDir </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; static private </span><span class="default">$directories</span><span class="keyword">, </span><span class="default">$files</span><span class="keyword">, </span><span class="default">$ext_filter</span><span class="keyword">, </span><span class="default">$recursive</span><span class="keyword">;<br />
<br />
</span><span class="comment">// ----------------------------------------------------------------------------------------------<br />
&nbsp;&nbsp;&nbsp; // scan(dirpath::string|array, extensions::string|array, recursive::true|false)<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">static public function </span><span class="default">scan</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Initialize defaults<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$recursive </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$directories </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$files </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$ext_filter </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Check we have minimum parameters<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(!</span><span class="default">$args </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">()){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; die(</span><span class="string">"Must provide a path string or array of path strings"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) != </span><span class="string">"string" </span><span class="keyword">&amp;&amp; </span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) != </span><span class="string">"array"</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; die(</span><span class="string">"Must provide a path string or array of path strings"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Check if recursive scan | default action: no sub-directories<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(isset(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]) &amp;&amp; </span><span class="default">$args</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] == </span><span class="default">true</span><span class="keyword">){</span><span class="default">self</span><span class="keyword">::</span><span class="default">$recursive </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;}<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Was a filter on file extensions included? | default action: return all file types<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(isset(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">])){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]) == </span><span class="string">"array"</span><span class="keyword">){</span><span class="default">self</span><span class="keyword">::</span><span class="default">$ext_filter </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'strtolower'</span><span class="keyword">, </span><span class="default">$args</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]) == </span><span class="string">"string"</span><span class="keyword">){</span><span class="default">self</span><span class="keyword">::</span><span class="default">$ext_filter</span><span class="keyword">[] = </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);}<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Grab path(s)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">verifyPaths</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">self</span><span class="keyword">::</span><span class="default">$files</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; static private function </span><span class="default">verifyPaths</span><span class="keyword">(</span><span class="default">$paths</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path_errors </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$paths</span><span class="keyword">) == </span><span class="string">"string"</span><span class="keyword">){</span><span class="default">$paths </span><span class="keyword">= array(</span><span class="default">$paths</span><span class="keyword">);}<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$paths </span><span class="keyword">as </span><span class="default">$path</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$directories</span><span class="keyword">[] = </span><span class="default">$path</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dirContents </span><span class="keyword">= </span><span class="default">self</span><span class="keyword">::</span><span class="default">find_contents</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path_errors</span><span class="keyword">[] = </span><span class="default">$path</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$path_errors</span><span class="keyword">){echo </span><span class="string">"The following directories do not exists&lt;br /&gt;"</span><span class="keyword">;die(</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$path_errors</span><span class="keyword">));}<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// This is how we scan directories<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">static private function </span><span class="default">find_contents</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$root </span><span class="keyword">= </span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$root </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$value </span><span class="keyword">=== </span><span class="string">'.' </span><span class="keyword">|| </span><span class="default">$value </span><span class="keyword">=== </span><span class="string">'..'</span><span class="keyword">) {continue;}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_file</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">.</span><span class="default">DIRECTORY_SEPARATOR</span><span class="keyword">.</span><span class="default">$value</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">self</span><span class="keyword">::</span><span class="default">$ext_filter </span><span class="keyword">|| </span><span class="default">in_array</span><span class="keyword">(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">pathinfo</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">.</span><span class="default">DIRECTORY_SEPARATOR</span><span class="keyword">.</span><span class="default">$value</span><span class="keyword">, </span><span class="default">PATHINFO_EXTENSION</span><span class="keyword">)), </span><span class="default">self</span><span class="keyword">::</span><span class="default">$ext_filter</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$files</span><span class="keyword">[] = </span><span class="default">$result</span><span class="keyword">[] = </span><span class="default">$dir</span><span class="keyword">.</span><span class="default">DIRECTORY_SEPARATOR</span><span class="keyword">.</span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">self</span><span class="keyword">::</span><span class="default">$recursive</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">self</span><span class="keyword">::</span><span class="default">find_contents</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">.</span><span class="default">DIRECTORY_SEPARATOR</span><span class="keyword">.</span><span class="default">$value</span><span class="keyword">) as </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$files</span><span class="keyword">[] = </span><span class="default">$result</span><span class="keyword">[] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Return required for recursive search<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$result</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Usage:<br />
scanDir::scan(path(s):string|array, [file_extensions:string|array], [subfolders?:true|false]);<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//Scan a single directory for all files, no sub-directories<br />
</span><span class="default">$files </span><span class="keyword">= </span><span class="default">scanDir</span><span class="keyword">::</span><span class="default">scan</span><span class="keyword">(</span><span class="string">'D:\Websites\temp'</span><span class="keyword">);<br />
<br />
</span><span class="comment">//Scan multiple directories for all files, no sub-dirs<br />
</span><span class="default">$dirs </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'D:\folder'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'D:\folder2'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'C:\Other'</span><span class="keyword">;<br />
);<br />
</span><span class="default">$files </span><span class="keyword">= </span><span class="default">scanDir</span><span class="keyword">::</span><span class="default">scan</span><span class="keyword">(</span><span class="default">$dirs</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Scan multiple directories for files with provided file extension,<br />
// no sub-dirs<br />
</span><span class="default">$files </span><span class="keyword">= </span><span class="default">scanDir</span><span class="keyword">::</span><span class="default">scan</span><span class="keyword">(</span><span class="default">$dirs</span><span class="keyword">, </span><span class="string">"jpg"</span><span class="keyword">);<br />
</span><span class="comment">//or with an array of extensions<br />
</span><span class="default">$file_ext </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"jpg"</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"bmp"</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"png"<br />
</span><span class="keyword">);<br />
</span><span class="default">$files </span><span class="keyword">= </span><span class="default">scanDir</span><span class="keyword">::</span><span class="default">scan</span><span class="keyword">(</span><span class="default">$dirs</span><span class="keyword">, </span><span class="default">$file_ext</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Scan multiple directories for files with any extension,<br />
// include files in recursive sub-folders<br />
</span><span class="default">$files </span><span class="keyword">= </span><span class="default">scanDir</span><span class="keyword">::</span><span class="default">scan</span><span class="keyword">(</span><span class="default">$dirs</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Multiple dirs, with specified extensions, include sub-dir files<br />
</span><span class="default">$files </span><span class="keyword">= </span><span class="default">scanDir</span><span class="keyword">::</span><span class="default">scan</span><span class="keyword">(</span><span class="default">$dirs</span><span class="keyword">, </span><span class="default">$file_ext</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114116""></a>
  <div class="note">
   <strong class="user">Patrick</strong>
   <a href="#114116" class="date">12-Jan-2014 09:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is my recursive function, placing directories into new array keys and its contents within.<br />
<br />
/* find_files( string, &amp;array )<br />
** Recursive function to return a multidimensional array of folders and files<br />
** that are contained within the directory given<br />
*/<br />
function find_files($dir, &amp;$dir_array)<br />
{<br />
&nbsp;&nbsp;&nbsp; // Create array of current directory<br />
&nbsp;&nbsp;&nbsp; $files = scandir($dir);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if(is_array($files))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach($files as $val)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // Skip home and previous listings<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if($val == '.' || $val == '..')<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // If directory then dive deeper, else add file to directory key<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(is_dir($dir.'/'.$val))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // Add value to current array, dir or file<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $dir_array[$dir][] = $val;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; find_files($dir.'/'.$val, $dir_array);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $dir_array[$dir][] = $val;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; ksort($dir_array);<br />
}<br />
<br />
// Example<br />
$folder_list = array();<br />
find_files('/path', $folder_list)<br />
<br />
var_dump($folder_list);<br />
<br />
array(3) {<br />
&nbsp; ["directory_01"]=&gt;<br />
&nbsp; array(4) {<br />
&nbsp;&nbsp;&nbsp; [0]=&gt;<br />
&nbsp;&nbsp;&nbsp; string(12) "directory_02"<br />
&nbsp;&nbsp;&nbsp; [1]=&gt;<br />
&nbsp;&nbsp;&nbsp; string(12) "directory_03"<br />
&nbsp;&nbsp;&nbsp; [2]=&gt;<br />
&nbsp;&nbsp;&nbsp; string(11) "file_01.txt"<br />
&nbsp;&nbsp;&nbsp; [3]=&gt;<br />
&nbsp;&nbsp;&nbsp; string(11) "file_02.txt"<br />
&nbsp; }<br />
&nbsp; ["directory_01/directory_02"]=&gt;<br />
&nbsp; array(2) {<br />
&nbsp;&nbsp;&nbsp; [0]=&gt;<br />
&nbsp;&nbsp;&nbsp; string(11) "file_03.txt"<br />
&nbsp;&nbsp;&nbsp; [1]=&gt;<br />
&nbsp;&nbsp;&nbsp; string(11) "file_04.txt"<br />
&nbsp; }<br />
&nbsp; ["directory_01/directory_03"]=&gt;<br />
&nbsp; array(2) {<br />
&nbsp;&nbsp;&nbsp; [0]=&gt;<br />
&nbsp;&nbsp;&nbsp; string(11) "file_05.txt"<br />
&nbsp;&nbsp;&nbsp; [1]=&gt;<br />
&nbsp;&nbsp;&nbsp; string(11) "file_06.txt"<br />
&nbsp; }<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113167""></a>
  <div class="note">
   <strong class="user">hex at mail dot nnov dot ru</strong>
   <a href="#113167" class="date">07-Sep-2013 07:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
// Extreme minimal version recursive scan:<br />
function rscandir($dir){<br />
&nbsp; $dirs = array_fill_keys( array_diff( scandir( $dir ), array( '.', '..' ) ), array());<br />
&nbsp; foreach( $dirs as $d =&gt; $v )<br />
&nbsp;&nbsp;&nbsp; if( is_dir($dir."/".$d) )<br />
&nbsp;&nbsp; &nbsp;&nbsp; $dirs[$d] = rscandir($dir."/".$d);<br />
&nbsp; return $dirs;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110570""></a>
  <div class="note">
   <strong class="user">mmda dot nl at gmail dot com</strong>
   <a href="#110570" class="date">08-Nov-2012 12:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is my 2 cents. I wanted to create an array of my directory structure recursively. I wanted to easely access data in a certain directory using foreach. I came up with the following:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">dirToArray</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">) {
<br />
&nbsp;&nbsp; 
<br />
&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array();
<br />

<br />
&nbsp;&nbsp; </span><span class="default">$cdir </span><span class="keyword">= </span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">);
<br />
&nbsp;&nbsp; foreach (</span><span class="default">$cdir </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)
<br />
&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (!</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">,array(</span><span class="string">"."</span><span class="keyword">,</span><span class="string">".."</span><span class="keyword">)))
<br />
&nbsp;&nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$dir </span><span class="keyword">. </span><span class="default">DIRECTORY_SEPARATOR </span><span class="keyword">. </span><span class="default">$value</span><span class="keyword">))
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$value</span><span class="keyword">] = </span><span class="default">dirToArray</span><span class="keyword">(</span><span class="default">$dir </span><span class="keyword">. </span><span class="default">DIRECTORY_SEPARATOR </span><span class="keyword">. </span><span class="default">$value</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; else
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[] = </span><span class="default">$value</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; } 
<br />
&nbsp;&nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; }
<br />
&nbsp;&nbsp; 
<br />
&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Output
<br />
Array
<br />
(
<br />
&nbsp;&nbsp; [subdir1] =&gt; Array
<br />
&nbsp;&nbsp; (
<br />
&nbsp;&nbsp; &nbsp;&nbsp; [0] =&gt; file1.txt
<br />
&nbsp;&nbsp; &nbsp;&nbsp; [subsubdir] =&gt; Array
<br />
&nbsp;&nbsp; &nbsp;&nbsp; (
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; [0] =&gt; file2.txt
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; [1] =&gt; file3.txt
<br />
&nbsp;&nbsp; &nbsp;&nbsp; )
<br />
&nbsp;&nbsp; )
<br />
&nbsp;&nbsp; [subdir2] =&gt; Array
<br />
&nbsp;&nbsp; (
<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; file4.txt
<br />
&nbsp;&nbsp; }
<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109140""></a>
  <div class="note">
   <strong class="user">carneiro at isharelife dot com dot br</strong>
   <a href="#109140" class="date">22-Jun-2012 06:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Get an array that represents directory tree<br />
&nbsp;&nbsp; &nbsp; * @param string $directory&nbsp; &nbsp;&nbsp; Directory path<br />
&nbsp;&nbsp; &nbsp; * @param bool $recursive&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Include sub directories<br />
&nbsp;&nbsp; &nbsp; * @param bool $listDirs&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Include directories on listing<br />
&nbsp;&nbsp; &nbsp; * @param bool $listFiles&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Include files on listing<br />
&nbsp;&nbsp; &nbsp; * @param regex $exclude&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Exclude paths that matches this regex<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">directoryToArray</span><span class="keyword">(</span><span class="default">$directory</span><span class="keyword">, </span><span class="default">$recursive </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">, </span><span class="default">$listDirs </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">, </span><span class="default">$listFiles </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">, </span><span class="default">$exclude </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arrayItems </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$skipByExclude </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$handle </span><span class="keyword">= </span><span class="default">opendir</span><span class="keyword">(</span><span class="default">$directory</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$handle</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while (</span><span class="default">false </span><span class="keyword">!== (</span><span class="default">$file </span><span class="keyword">= </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">))) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/(^(([\.]){1,2})$|(\.(svn|git|md))|(Thumbs\.db|\.DS_STORE))$/iu"</span><span class="keyword">, </span><span class="default">$file</span><span class="keyword">, </span><span class="default">$skip</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$exclude</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="default">$exclude</span><span class="keyword">, </span><span class="default">$file</span><span class="keyword">, </span><span class="default">$skipByExclude</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">$skip </span><span class="keyword">&amp;&amp; !</span><span class="default">$skipByExclude</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$directory</span><span class="keyword">. </span><span class="default">DIRECTORY_SEPARATOR </span><span class="keyword">. </span><span class="default">$file</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$recursive</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arrayItems </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$arrayItems</span><span class="keyword">, </span><span class="default">directoryToArray</span><span class="keyword">(</span><span class="default">$directory</span><span class="keyword">. </span><span class="default">DIRECTORY_SEPARATOR </span><span class="keyword">. </span><span class="default">$file</span><span class="keyword">, </span><span class="default">$recursive</span><span class="keyword">, </span><span class="default">$listDirs</span><span class="keyword">, </span><span class="default">$listFiles</span><span class="keyword">, </span><span class="default">$exclude</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$listDirs</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$file </span><span class="keyword">= </span><span class="default">$directory </span><span class="keyword">. </span><span class="default">DIRECTORY_SEPARATOR </span><span class="keyword">. </span><span class="default">$file</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arrayItems</span><span class="keyword">[] = </span><span class="default">$file</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$listFiles</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$file </span><span class="keyword">= </span><span class="default">$directory </span><span class="keyword">. </span><span class="default">DIRECTORY_SEPARATOR </span><span class="keyword">. </span><span class="default">$file</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arrayItems</span><span class="keyword">[] = </span><span class="default">$file</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">closedir</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$arrayItems</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109115""></a>
  <div class="note">
   <strong class="user">2bbasic at gmail dot com</strong>
   <a href="#109115" class="date">21-Jun-2012 11:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">//-- Directory Navigation with SCANDIR<br />
//-- <br />
//-- optional placemenet<br />
</span><span class="default">$exclude_list </span><span class="keyword">= array(</span><span class="string">"."</span><span class="keyword">, </span><span class="string">".."</span><span class="keyword">, </span><span class="string">"example.txt"</span><span class="keyword">);<br />
if (isset(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">"dir"</span><span class="keyword">])) {<br />
&nbsp; </span><span class="default">$dir_path </span><span class="keyword">= </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">"DOCUMENT_ROOT"</span><span class="keyword">].</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">"dir"</span><span class="keyword">];<br />
}<br />
else {<br />
&nbsp; </span><span class="default">$dir_path </span><span class="keyword">= </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">"DOCUMENT_ROOT"</span><span class="keyword">].</span><span class="string">"/"</span><span class="keyword">;<br />
}<br />
</span><span class="comment">//-- until here<br />
</span><span class="keyword">function </span><span class="default">dir_nav</span><span class="keyword">() {<br />
&nbsp; global </span><span class="default">$exclude_list</span><span class="keyword">, </span><span class="default">$dir_path</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$directories </span><span class="keyword">= </span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$dir_path</span><span class="keyword">), </span><span class="default">$exclude_list</span><span class="keyword">);<br />
&nbsp; echo </span><span class="string">"&lt;ul style='list-style:none;padding:0'&gt;"</span><span class="keyword">;<br />
&nbsp; foreach(</span><span class="default">$directories </span><span class="keyword">as </span><span class="default">$entry</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$dir_path</span><span class="keyword">.</span><span class="default">$entry</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;li style='margin-left:1em;'&gt;[`] &lt;a href='?dir="</span><span class="keyword">.</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">"dir"</span><span class="keyword">].</span><span class="default">$entry</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="string">"'&gt;"</span><span class="keyword">.</span><span class="default">$entry</span><span class="keyword">.</span><span class="string">"&lt;/a&gt;&lt;/li&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; echo </span><span class="string">"&lt;/ul&gt;"</span><span class="keyword">;<br />
&nbsp; </span><span class="comment">//-- separator<br />
&nbsp; </span><span class="keyword">echo </span><span class="string">"&lt;ul style='list-style:none;padding:0'&gt;"</span><span class="keyword">;<br />
&nbsp; foreach(</span><span class="default">$directories </span><span class="keyword">as </span><span class="default">$entry</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_file</span><span class="keyword">(</span><span class="default">$dir_path</span><span class="keyword">.</span><span class="default">$entry</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;li style='margin-left:1em;'&gt;[ ] &lt;a href='?file="</span><span class="keyword">.</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">"dir"</span><span class="keyword">].</span><span class="default">$entry</span><span class="keyword">.</span><span class="string">"'&gt;"</span><span class="keyword">.</span><span class="default">$entry</span><span class="keyword">.</span><span class="string">"&lt;/a&gt;&lt;/li&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; echo </span><span class="string">"&lt;/ul&gt;"</span><span class="keyword">;<br />
}<br />
</span><span class="default">dir_nav</span><span class="keyword">();<br />
</span><span class="comment">//-- optional placement<br />
</span><span class="keyword">if (isset(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">"file"</span><span class="keyword">])) {<br />
&nbsp; echo </span><span class="string">"&lt;div style='margin:1em;border:1px solid Silver;'&gt;"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">highlight_file</span><span class="keyword">(</span><span class="default">$dir_path</span><span class="keyword">.</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'file'</span><span class="keyword">]);<br />
&nbsp; echo </span><span class="string">"&lt;/div&gt;"</span><span class="keyword">;<br />
}<br />
</span><span class="comment">//-- until here<br />
//--<br />
//-- Because I love php.net<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108229""></a>
  <div class="note">
   <strong class="user">fazle dot elahee at gmail dot com</strong>
   <a href="#108229" class="date">09-Apr-2012 06:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
/**<br />
&nbsp;* This function will scan all files recursively in the sub-folder and folder.<br />
&nbsp;*<br />
&nbsp;* @author Fazle Elahee<br />
&nbsp;*<br />
&nbsp;*/<br />
<br />
function scanFileNameRecursivly($path = '', &amp;$name = array() )<br />
{<br />
&nbsp; $path = $path == ''? dirname(__FILE__) : $path;<br />
&nbsp; $lists = @scandir($path);<br />
&nbsp; <br />
&nbsp; if(!empty($lists))<br />
&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; foreach($lists as $f)<br />
&nbsp;&nbsp; &nbsp;&nbsp; { <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; if(is_dir($path.DIRECTORY_SEPARATOR.$f) &amp;&amp; $f != ".." &amp;&amp; $f != ".")<br />
&nbsp;&nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; scanFileNameRecursivly($path.DIRECTORY_SEPARATOR.$f, &amp;$name); <br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $name[] = $path.DIRECTORY_SEPARATOR.$f;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; return $name;<br />
}<br />
<br />
$path = "/var/www/SimplejQueryDropdowns";<br />
$file_names = scanFileNameRecursivly($path);<br />
<br />
echo "&lt;pre&gt;";<br />
var_dump($file_names);<br />
echo "&lt;/pre&gt;";</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107215""></a>
  <div class="note">
   <strong class="user">dwieeb at gmail dot com</strong>
   <a href="#107215" class="date">22-Jan-2012 08:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Easy way to get rid of the dots that scandir() picks up in Linux environments:<br />
<br />
<span class="default">&lt;?php<br />
$directory </span><span class="keyword">= </span><span class="string">'/path/to/my/directory'</span><span class="keyword">;<br />
</span><span class="default">$scanned_directory </span><span class="keyword">= </span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$directory</span><span class="keyword">), array(</span><span class="string">'..'</span><span class="keyword">, </span><span class="string">'.'</span><span class="keyword">));<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107117""></a>
  <div class="note">
   <strong class="user">kodlee at kodleeshare dot net</strong>
   <a href="#107117" class="date">08-Jan-2012 03:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed to find a way to get the full path of all files in the directory and all subdirectories of a directory.
<br />
Here's my solution: Recursive functions!
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">find_all_files</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$root </span><span class="keyword">= </span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$root </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$value </span><span class="keyword">=== </span><span class="string">'.' </span><span class="keyword">|| </span><span class="default">$value </span><span class="keyword">=== </span><span class="string">'..'</span><span class="keyword">) {continue;}
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_file</span><span class="keyword">(</span><span class="string">"</span><span class="default">$dir</span><span class="string">/</span><span class="default">$value</span><span class="string">"</span><span class="keyword">)) {</span><span class="default">$result</span><span class="keyword">[]=</span><span class="string">"</span><span class="default">$dir</span><span class="string">/</span><span class="default">$value</span><span class="string">"</span><span class="keyword">;continue;}
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">find_all_files</span><span class="keyword">(</span><span class="string">"</span><span class="default">$dir</span><span class="string">/</span><span class="default">$value</span><span class="string">"</span><span class="keyword">) as </span><span class="default">$value</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[]=</span><span class="default">$value</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96326""></a>
  <div class="note">
   <strong class="user">boen dot robot at gmail dot com</strong>
   <a href="#96326" class="date">20-Feb-2010 10:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you have a folder with many files and/or subfolders, doing a recursive scandir will likely either slow down your application, or cause a high rise in RAM consumption due to the large size of the generated array.<br />
<br />
To help with this, as well as to make processing of files in a folder easier, I wrote a function that reads a folder and its subfolders recursively, and calls a function upon each match.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* Calls a function for every file in a folder.<br />
&nbsp;*<br />
&nbsp;* @author Vasil Rangelov a.k.a. boen_robot<br />
&nbsp;*<br />
&nbsp;* @param string $callback The function to call. It must accept one argument that is a relative filepath of the file.<br />
&nbsp;* @param string $dir The directory to traverse.<br />
&nbsp;* @param array $types The file types to call the function for. Leave as NULL to match all types.<br />
&nbsp;* @param bool $recursive Whether to list subfolders as well.<br />
&nbsp;* @param string $baseDir String to append at the beginning of every filepath that the callback will receive.<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">dir_walk</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">, </span><span class="default">$dir</span><span class="keyword">, </span><span class="default">$types </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">, </span><span class="default">$recursive </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">, </span><span class="default">$baseDir </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$dh </span><span class="keyword">= </span><span class="default">opendir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while ((</span><span class="default">$file </span><span class="keyword">= </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$dh</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$file </span><span class="keyword">=== </span><span class="string">'.' </span><span class="keyword">|| </span><span class="default">$file </span><span class="keyword">=== </span><span class="string">'..'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_file</span><span class="keyword">(</span><span class="default">$dir </span><span class="keyword">. </span><span class="default">$file</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$types</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">pathinfo</span><span class="keyword">(</span><span class="default">$dir </span><span class="keyword">. </span><span class="default">$file</span><span class="keyword">, </span><span class="default">PATHINFO_EXTENSION</span><span class="keyword">)), </span><span class="default">$types</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$callback</span><span class="keyword">(</span><span class="default">$baseDir </span><span class="keyword">. </span><span class="default">$file</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }elseif(</span><span class="default">$recursive </span><span class="keyword">&amp;&amp; </span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$dir </span><span class="keyword">. </span><span class="default">$file</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">dir_walk</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">, </span><span class="default">$dir </span><span class="keyword">. </span><span class="default">$file </span><span class="keyword">. </span><span class="default">DIRECTORY_SEPARATOR</span><span class="keyword">, </span><span class="default">$types</span><span class="keyword">, </span><span class="default">$recursive</span><span class="keyword">, </span><span class="default">$baseDir </span><span class="keyword">. </span><span class="default">$file </span><span class="keyword">. </span><span class="default">DIRECTORY_SEPARATOR</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">closedir</span><span class="keyword">(</span><span class="default">$dh</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Of course, because it is recursive, a folder with many levels of folders could potentially consume lots of memory, but then again, so can every other recursive scandir implementation here.<br />
<br />
BTW, there's also the RecursiveDirectoryIterator SPL class:<br />
<a href="http://bg.php.net/manual/en/class.recursivedirectoryiterator.php" rel="nofollow" target="_blank">http://bg.php.net/manual/en/class.recursivedirectoryiterator.php</a><br />
which, even if using the same approach, will most likely be faster and hold down deeper levels (because it works on the C level), but this one will always work, regardless of settings... even on PHP4.<br />
<br />
Point is, avoid recursive scandir implementations.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95913""></a>
  <div class="note">
   <strong class="user">moik78 at gmail dot com</strong>
   <a href="#95913" class="date">28-Jan-2010 05:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a function to count the number of files of a directory
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">countFiles</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">){
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$files </span><span class="keyword">= array();
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$directory </span><span class="keyword">= </span><span class="default">opendir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">); 
<br />
&nbsp;&nbsp;&nbsp; while(</span><span class="default">$item </span><span class="keyword">= </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$directory</span><span class="keyword">)){
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// We filter the elements that we don't want to appear ".", ".." and ".svn" 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if((</span><span class="default">$item </span><span class="keyword">!= </span><span class="string">"."</span><span class="keyword">) &amp;&amp; (</span><span class="default">$item </span><span class="keyword">!= </span><span class="string">".."</span><span class="keyword">) &amp;&amp; (</span><span class="default">$item </span><span class="keyword">!= </span><span class="string">".svn"</span><span class="keyword">) ){ 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$files</span><span class="keyword">[] = </span><span class="default">$item</span><span class="keyword">; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; } 
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$numFiles </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$files</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$numFiles</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95588""></a>
  <div class="note">
   <strong class="user">phpnet at novaclic dot com</strong>
   <a href="#95588" class="date">11-Jan-2010 02:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Was looking for a simple way to search for a file/directory using a mask. Here is such a function.
<br />

<br />
By default, this function will keep in memory the scandir() result, to avoid scaning multiple time for the same directory.
<br />

<br />
Requires at least PHP5.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">sdir</span><span class="keyword">( </span><span class="default">$path</span><span class="keyword">=</span><span class="string">'.'</span><span class="keyword">, </span><span class="default">$mask</span><span class="keyword">=</span><span class="string">'*'</span><span class="keyword">, </span><span class="default">$nocache</span><span class="keyword">=</span><span class="default">0 </span><span class="keyword">){
<br />
&nbsp;&nbsp;&nbsp; static </span><span class="default">$dir </span><span class="keyword">= array(); </span><span class="comment">// cache result in memory
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if ( !isset(</span><span class="default">$dir</span><span class="keyword">[</span><span class="default">$path</span><span class="keyword">]) || </span><span class="default">$nocache</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dir</span><span class="keyword">[</span><span class="default">$path</span><span class="keyword">] = </span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; } 
<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$dir</span><span class="keyword">[</span><span class="default">$path</span><span class="keyword">] as </span><span class="default">$i</span><span class="keyword">=&gt;</span><span class="default">$entry</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$entry</span><span class="keyword">!=</span><span class="string">'.' </span><span class="keyword">&amp;&amp; </span><span class="default">$entry</span><span class="keyword">!=</span><span class="string">'..' </span><span class="keyword">&amp;&amp; </span><span class="default">fnmatch</span><span class="keyword">(</span><span class="default">$mask</span><span class="keyword">, </span><span class="default">$entry</span><span class="keyword">) ) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sdir</span><span class="keyword">[] = </span><span class="default">$entry</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return (</span><span class="default">$sdir</span><span class="keyword">);
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91380""></a>
  <div class="note">
   <strong class="user">magicmind at netcabo dot pt</strong>
   <a href="#91380" class="date">09-Jun-2009 05:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hello all,
<br />

<br />
I just added a extension filter to the getDirectoryTree function, so it can filter an extension for files in the folders/subfolders:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">getDirectoryTree</span><span class="keyword">( </span><span class="default">$outerDir </span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">){ 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dirs </span><span class="keyword">= </span><span class="default">array_diff</span><span class="keyword">( </span><span class="default">scandir</span><span class="keyword">( </span><span class="default">$outerDir </span><span class="keyword">), Array( </span><span class="string">"."</span><span class="keyword">, </span><span class="string">".." </span><span class="keyword">) ); 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dir_array </span><span class="keyword">= Array(); 
<br />
&nbsp;&nbsp;&nbsp; foreach( </span><span class="default">$dirs </span><span class="keyword">as </span><span class="default">$d </span><span class="keyword">){ 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$outerDir</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$d</span><span class="keyword">)&nbsp; ){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dir_array</span><span class="keyword">[ </span><span class="default">$d </span><span class="keyword">] = </span><span class="default">getDirectoryTree</span><span class="keyword">( </span><span class="default">$outerDir</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$d </span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">); 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }else{
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; if ((</span><span class="default">$x</span><span class="keyword">)?</span><span class="default">ereg</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">.</span><span class="string">'$'</span><span class="keyword">,</span><span class="default">$d</span><span class="keyword">):</span><span class="default">1</span><span class="keyword">) 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dir_array</span><span class="keyword">[ </span><span class="default">$d </span><span class="keyword">] = </span><span class="default">$d</span><span class="keyword">; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; } 
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$dir_array</span><span class="keyword">; 
<br />
} 
<br />

<br />
</span><span class="default">$dirlist </span><span class="keyword">= </span><span class="default">getDirectoryTree</span><span class="keyword">(</span><span class="string">'filmes'</span><span class="keyword">,</span><span class="string">'flv'</span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90628""></a>
  <div class="note">
   <strong class="user">phpdotnet at lavavortex dot com</strong>
   <a href="#90628" class="date">01-May-2009 05:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
How a ninja may retrieve a list of files, files filtered by extension, or directories:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">//NNNIIIinnnjaaa::
<br />
//array of files without directories... optionally filtered by extension
<br />
</span><span class="keyword">function </span><span class="default">file_list</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">,</span><span class="default">$x</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; foreach(</span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">),array(</span><span class="string">'.'</span><span class="keyword">,</span><span class="string">'..'</span><span class="keyword">)) as </span><span class="default">$f</span><span class="keyword">)if(</span><span class="default">is_file</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">.</span><span class="string">'/'</span><span class="keyword">.</span><span class="default">$f</span><span class="keyword">)&amp;&amp;((</span><span class="default">$x</span><span class="keyword">)?</span><span class="default">ereg</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">.</span><span class="string">'$'</span><span class="keyword">,</span><span class="default">$f</span><span class="keyword">):</span><span class="default">1</span><span class="keyword">))</span><span class="default">$l</span><span class="keyword">[]=</span><span class="default">$f</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; return </span><span class="default">$l</span><span class="keyword">;
<br />
}
<br />

<br />
</span><span class="comment">//NNNIIIinnnjaaa::
<br />
//array of directories
<br />
</span><span class="keyword">function </span><span class="default">dir_list</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; foreach(</span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">),array(</span><span class="string">'.'</span><span class="keyword">,</span><span class="string">'..'</span><span class="keyword">)) as </span><span class="default">$f</span><span class="keyword">)if(</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">.</span><span class="string">'/'</span><span class="keyword">.</span><span class="default">$f</span><span class="keyword">))</span><span class="default">$l</span><span class="keyword">[]=</span><span class="default">$f</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; return </span><span class="default">$l</span><span class="keyword">;
<br />
}
<br />

<br />
</span><span class="comment">/********************************************************************\
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; PRETTY PRETTY LIGHTS (DOCUMENTATION)
<br />
\********************************************************************/
<br />

<br />
/********************************************************************
<br />
Overloaded PHP file listing function:
<br />
array file_list ( string $directory [, string $file_extension] )
<br />

<br />
$directory
<br />
&nbsp; path without backslash, e.g. "/home/public_html/blarg"
<br />

<br />
$file_extention
<br />
&nbsp; optionally filter specific filename extentions, e.g. ".jpg"
<br />

<br />
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; TRANSLATION &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
<br />
file_list("/home");&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //return list of files (no directories)
<br />
file_list("/home", ".jpg");&nbsp; //return only .jpg file list
<br />
\********************************************************************/
<br />

<br />
//(note: one slash (/) below and you enable all your test functions, guess where ;-))
<br />
/********************************************************************\
<br />
// TEST FUNCTIONS... IF THESE WORK, THIS FUNCTION WORKS ON THIS PLATFORM
<br />
echo "&lt;hr&gt;&lt;b&gt;File List:&lt;/b&gt;&lt;br&gt;";
<br />
$n = file_list(getcwd());
<br />
if($n) foreach($n as $f) echo "$f&lt;br&gt;";&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //current files
<br />

<br />
echo "&lt;hr&gt;&lt;b&gt;Files with extension .php:&lt;/b&gt;&lt;br&gt;";
<br />
$n = file_list(getcwd(),".php");
<br />
if($n) foreach($n as $f) echo "$f&lt;br&gt;";&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //files with .php extensions
<br />

<br />
echo "&lt;hr&gt;&lt;b&gt;Directories:&lt;/b&gt;&lt;br&gt;";
<br />
$d = dir_list(getcwd());
<br />
if($d) foreach($d as $f) echo "$f&lt;br&gt;";&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //directories
<br />
/********************************************************************/
<br />

<br />
/************\
<br />
RUNTIME NOTES:
<br />
file_list($arg1); // php issues a warning that there is no second parameter, but we know that, izz ok
<br />
\************/
<br />

<br />
/*******************************\
<br />
TESTED AND WORKING ON 2009.04.30:
<br />
OS:&nbsp; &nbsp;&nbsp; Linux 2.6.9-78.0.17.ELsmp
<br />
APACHE: 2.2.9
<br />
PHP:&nbsp; &nbsp; 5.2.5
<br />
\*******************************/
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87527""></a>
  <div class="note">
   <strong class="user">dsiembab at fullchannel dot net</strong>
   <a href="#87527" class="date">08-Dec-2008 11:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Back in the saddle of scandir I wrote this function for a function that I needed to seperate directories from files. Since I am still learning from my last example way below I would figure I would add it so it can be criticized.<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">dirlist</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">, </span><span class="default">$bool </span><span class="keyword">= </span><span class="string">"dirs"</span><span class="keyword">){<br />
&nbsp;&nbsp; </span><span class="default">$truedir </span><span class="keyword">= </span><span class="default">$dir</span><span class="keyword">;<br />
&nbsp;&nbsp; </span><span class="default">$dir </span><span class="keyword">= </span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">);<br />
&nbsp;&nbsp; if(</span><span class="default">$bool </span><span class="keyword">== </span><span class="string">"files"</span><span class="keyword">){ </span><span class="comment">// dynamic function based on second pram<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$direct </span><span class="keyword">= </span><span class="string">'is_dir'</span><span class="keyword">; <br />
&nbsp;&nbsp; }elseif(</span><span class="default">$bool </span><span class="keyword">== </span><span class="string">"dirs"</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$direct </span><span class="keyword">= </span><span class="string">'is_file'</span><span class="keyword">;<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; foreach(</span><span class="default">$dir </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp;&nbsp; if((</span><span class="default">$direct</span><span class="keyword">(</span><span class="default">$truedir</span><span class="keyword">.</span><span class="default">$dir</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">])) || </span><span class="default">$dir</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] == </span><span class="string">'.' </span><span class="keyword">|| </span><span class="default">$dir</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] == </span><span class="string">'..' </span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; unset(</span><span class="default">$dir</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; </span><span class="default">$dir </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">);<br />
&nbsp;&nbsp; return </span><span class="default">$dir</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
&lt;?php<br />
print_r</span><span class="keyword">(</span><span class="default">dirlist</span><span class="keyword">(</span><span class="string">"../"</span><span class="keyword">));&nbsp; </span><span class="comment">//confirm array of subdirectories<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">dirlist</span><span class="keyword">(</span><span class="string">"../"</span><span class="keyword">, </span><span class="string">"files"</span><span class="keyword">) </span><span class="comment">// confirm list on files in the directory <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81597""></a>
  <div class="note">
   <strong class="user">asamir at asamir dot net</strong>
   <a href="#81597" class="date">05-Mar-2008 04:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a modification of scanDirectories function that generates a list of all files in the chosen directory and all subdirectories of specific extentions $allowext<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">scanDirectories</span><span class="keyword">(</span><span class="default">$rootDir</span><span class="keyword">, </span><span class="default">$allowext</span><span class="keyword">, </span><span class="default">$allData</span><span class="keyword">=array()) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dirContent </span><span class="keyword">= </span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$rootDir</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$dirContent </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$content</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path </span><span class="keyword">= </span><span class="default">$rootDir</span><span class="keyword">.</span><span class="string">'/'</span><span class="keyword">.</span><span class="default">$content</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ext </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">, </span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">, </span><span class="string">'.'</span><span class="keyword">) + </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$ext</span><span class="keyword">, </span><span class="default">$allowext</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_file</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">) &amp;&amp; </span><span class="default">is_readable</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$allData</span><span class="keyword">[] = </span><span class="default">$path</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }elseif(</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">) &amp;&amp; </span><span class="default">is_readable</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// recursive callback to open new directory<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$allData </span><span class="keyword">= </span><span class="default">scanDirectories</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, </span><span class="default">$allData</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$allData</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$rootDir </span><span class="keyword">= </span><span class="string">"www"</span><span class="keyword">;<br />
</span><span class="default">$allowext </span><span class="keyword">= array(</span><span class="string">"zip"</span><span class="keyword">,</span><span class="string">"rar"</span><span class="keyword">,</span><span class="string">"html"</span><span class="keyword">);<br />
</span><span class="default">$files_array </span><span class="keyword">= </span><span class="default">scanDirectories</span><span class="keyword">(</span><span class="default">$rootDir</span><span class="keyword">,</span><span class="default">$allowext</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$files_array</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80057""></a>
  <div class="note">
   <strong class="user">fatpratmatt dot  at  dot gmail dot com</strong>
   <a href="#80057" class="date">27-Dec-2007 04:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function generates a list of all files in the chosen directory and all subdirectories, throws them into a NON-multidimentional array and returns them.<br />
<br />
Most of the recursive functions on this page only return a multi-dimensional array.<br />
<br />
This is actually a modification of some one else's function (thanks mail at bartrail dot de ;])<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">scanDirectories</span><span class="keyword">(</span><span class="default">$rootDir</span><span class="keyword">, </span><span class="default">$allData</span><span class="keyword">=array()) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// set filenames invisible if you want<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$invisibleFileNames </span><span class="keyword">= array(</span><span class="string">"."</span><span class="keyword">, </span><span class="string">".."</span><span class="keyword">, </span><span class="string">".htaccess"</span><span class="keyword">, </span><span class="string">".htpasswd"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// run through content of root directory<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dirContent </span><span class="keyword">= </span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$rootDir</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$dirContent </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$content</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// filter all files not accessible<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path </span><span class="keyword">= </span><span class="default">$rootDir</span><span class="keyword">.</span><span class="string">'/'</span><span class="keyword">.</span><span class="default">$content</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">, </span><span class="default">$invisibleFileNames</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// if content is file &amp; readable, add to array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">is_file</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">) &amp;&amp; </span><span class="default">is_readable</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// save file name with path<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$allData</span><span class="keyword">[] = </span><span class="default">$path</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// if content is a directory and readable, add path and name<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}elseif(</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">) &amp;&amp; </span><span class="default">is_readable</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// recursive callback to open new directory<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$allData </span><span class="keyword">= </span><span class="default">scanDirectories</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, </span><span class="default">$allData</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$allData</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Example output:<br />
<br />
print_r(scanDirectories("www"));<br />
---<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; www/index.php<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; www/admin.php<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; www/css/css.css<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; www/articles/2007/article1.txt<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; www/articles/2006/article1.txt<br />
&nbsp;&nbsp;&nbsp; [8] =&gt; www/img/img1.png<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78977""></a>
  <div class="note">
   <strong class="user">cHH</strong>
   <a href="#78977" class="date">05-Nov-2007 09:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Since scandir() returns and array, here is a more concise method of dealing with the '.' and '..' problem when listing directories:
<br />

<br />
<span class="default">&lt;?php
<br />
$target </span><span class="keyword">= </span><span class="string">'/'</span><span class="keyword">;
<br />
</span><span class="default">$weeds </span><span class="keyword">= array(</span><span class="string">'.'</span><span class="keyword">, </span><span class="string">'..'</span><span class="keyword">);
<br />
</span><span class="default">$directories </span><span class="keyword">= </span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$target</span><span class="keyword">), </span><span class="default">$weeds</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; 
<br />
foreach(</span><span class="default">$directories </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp; if(</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$target</span><span class="keyword">.</span><span class="default">$value</span><span class="keyword">))
<br />
&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; echo </span><span class="default">$value</span><span class="keyword">.</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;
<br />
&nbsp;&nbsp; }
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68856""></a>
  <div class="note">
   <strong class="user">beingmrkenny at gmail dot com</strong>
   <a href="#68856" class="date">13-Aug-2006 11:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wrote this function to read a folder and place all the folders and sub folders it contains into an array.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// Initialise empty array, otherwise an error occurs<br />
</span><span class="default">$folders </span><span class="keyword">= array();<br />
<br />
function </span><span class="default">recursive_subfolders</span><span class="keyword">(</span><span class="default">$folders</span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Set path here<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$path </span><span class="keyword">= </span><span class="string">'/path/to/folder'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Create initial "Folders" array<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$dir </span><span class="keyword">= </span><span class="default">opendir</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$j </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while ((</span><span class="default">$file </span><span class="keyword">= </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$file </span><span class="keyword">!= </span><span class="string">'.' </span><span class="keyword">&amp;&amp; </span><span class="default">$file </span><span class="keyword">!= </span><span class="string">'..' </span><span class="keyword">&amp;&amp; </span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$j</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$folders</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">] = </span><span class="default">$path </span><span class="keyword">. </span><span class="default">$file</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">closedir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Then check each folder in that array for subfolders and add the subfolders to the "Folders" array.<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$j </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$folders</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$folders </span><span class="keyword">as </span><span class="default">$folder</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$dir </span><span class="keyword">= </span><span class="default">opendir</span><span class="keyword">(</span><span class="default">$folder</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while ((</span><span class="default">$file </span><span class="keyword">= </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pathto </span><span class="keyword">= </span><span class="default">$folder</span><span class="keyword">. </span><span class="string">'/' </span><span class="keyword">. </span><span class="default">$file</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$file </span><span class="keyword">!= </span><span class="string">'.' </span><span class="keyword">&amp;&amp; </span><span class="default">$file </span><span class="keyword">!= </span><span class="string">'..' </span><span class="keyword">&amp;&amp; </span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$pathto</span><span class="keyword">) &amp;&amp; !</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$pathto</span><span class="keyword">, </span><span class="default">$folders</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$j</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$folders</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">] = </span><span class="default">$pathto</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$folders </span><span class="keyword">= </span><span class="default">recursive_subfolders</span><span class="keyword">(</span><span class="default">$folders</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">closedir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">sort</span><span class="keyword">(</span><span class="default">$folders</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$folders</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$folders </span><span class="keyword">= </span><span class="default">recursive_subfolders</span><span class="keyword">(</span><span class="default">$folders</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
$folders now contains an array with the full paths to each subfolder. E.g.:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; /path/to/folder/dir1<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; /path/to/folder/dir1/subdir<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; /path/to/folder/dir1/subdir/subsubdir<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; /path/to/dolfer/dir2<br />
)<br />
<br />
This function has only been tested on Linux.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54344""></a>
  <div class="note">
   <strong class="user">progrium+php at gmail dot com</strong>
   <a href="#54344" class="date">30-Jun-2005 04:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I made this to represent a directory tree in an array that uses the file or directory names as keys and full paths as the value for files. Directories are nested arrays.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">generatePathTree</span><span class="keyword">(</span><span class="default">$rootPath</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pathStack </span><span class="keyword">= array(</span><span class="default">$rootPath</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$contentsRoot </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$contents </span><span class="keyword">= &amp;</span><span class="default">$contentsRoot</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">$path </span><span class="keyword">= </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$pathStack</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$contents</span><span class="keyword">[</span><span class="default">basename</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">)] = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$contents </span><span class="keyword">= &amp;</span><span class="default">$contents</span><span class="keyword">[</span><span class="default">basename</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">)];<br />
&nbsp;&nbsp; &nbsp; &nbsp; foreach (</span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">) as </span><span class="default">$filename</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="string">'.' </span><span class="keyword">!= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$newPath </span><span class="keyword">= </span><span class="default">$path</span><span class="keyword">.</span><span class="string">'/'</span><span class="keyword">.</span><span class="default">$filename</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$newPath</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$pathStack</span><span class="keyword">, </span><span class="default">$newPath</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$contents</span><span class="keyword">[</span><span class="default">basename</span><span class="keyword">(</span><span class="default">$newPath</span><span class="keyword">)] = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$contents</span><span class="keyword">[</span><span class="default">basename</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">)] = </span><span class="default">$newPath</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$contentsRoot</span><span class="keyword">[</span><span class="default">basename</span><span class="keyword">(</span><span class="default">$rootPath</span><span class="keyword">)];<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
The function will return something like this:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [index.php] =&gt; /usr/local/www/index.php<br />
&nbsp;&nbsp;&nbsp; [js] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [async.js] =&gt; /usr/local/www/js/async.js<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [dom.js] =&gt; /usr/local/www/js/dom.js<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [effects.js] =&gt; /usr/local/www/js/effects.js<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [prototype.js] =&gt; /usr/local/www/js/prototype.js<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [logo.png] =&gt; /usr/local/www/logo.png<br />
&nbsp;&nbsp;&nbsp; [server.php] =&gt; /usr/local/www/server.php<br />
&nbsp;&nbsp;&nbsp; [test.js] =&gt; /usr/local/www/test.js<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52755""></a>
  <div class="note">
   <strong class="user">Pawel Dlugosz</strong>
   <a href="#52755" class="date">11-May-2005 11:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For directory containing files like (for example) -.jpg the results of scandir are a little "weird" ;)<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; <br />
&nbsp;&nbsp; $dir </span><span class="keyword">= </span><span class="string">'/somedir'</span><span class="keyword">;<br />
&nbsp;&nbsp; </span><span class="default">$files </span><span class="keyword">= </span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$files</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; -.jpg<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; .<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; ..<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; foo.txt<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; somedir<br />
)<br />
<br />
Beware - sorting is in ASCII order :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51839""></a>
  <div class="note">
   <strong class="user">wwwebdesigner at web doott de</strong>
   <a href="#51839" class="date">12-Apr-2005 12:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
using sort of scandir() that returns the content sorted by Filemodificationtime.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">scandir_by_mtime</span><span class="keyword">(</span><span class="default">$folder</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$dircontent </span><span class="keyword">= </span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$folder</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$arr </span><span class="keyword">= array();<br />
&nbsp; foreach(</span><span class="default">$dircontent </span><span class="keyword">as </span><span class="default">$filename</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$filename </span><span class="keyword">!= </span><span class="string">'.' </span><span class="keyword">&amp;&amp; </span><span class="default">$filename </span><span class="keyword">!= </span><span class="string">'..'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">filemtime</span><span class="keyword">(</span><span class="default">$folder</span><span class="keyword">.</span><span class="default">$filename</span><span class="keyword">) === </span><span class="default">false</span><span class="keyword">) return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$dat </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">"YmdHis"</span><span class="keyword">, </span><span class="default">filemtime</span><span class="keyword">(</span><span class="default">$folder</span><span class="keyword">.</span><span class="default">$filename</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$dat</span><span class="keyword">] = </span><span class="default">$filename</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; if (!</span><span class="default">ksort</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">)) return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp; return </span><span class="default">$arr</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
returns false if an error occured<br />
otherwise it returns an array like this.<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [20040813231320] =&gt; DSC00023.JPG<br />
&nbsp;&nbsp;&nbsp; [20040813231456] =&gt; DSC00024.JPG<br />
&nbsp;&nbsp;&nbsp; [20040814003728] =&gt; MOV00055.MPG<br />
&nbsp;&nbsp;&nbsp; [20040814003804] =&gt; DSC00056.JPG<br />
&nbsp;&nbsp;&nbsp; [20040814003946] =&gt; DSC00057.JPG<br />
&nbsp;&nbsp;&nbsp; [20040814004030] =&gt; DSC00058.JPG<br />
&nbsp;&nbsp;&nbsp; [20040814014516] =&gt; DSC00083.JPG<br />
&nbsp;&nbsp;&nbsp; [20050401161718] =&gt; album.txt<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50623""></a>
  <div class="note">
   <strong class="user">csaba at alum dot mit dot edu</strong>
   <a href="#50623" class="date">04-Mar-2005 03:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Scandir on steroids:
<br />
For when you want to filter your file list, or only want to list so many levels of subdirectories...
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">dirList</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">, </span><span class="default">$types</span><span class="keyword">=</span><span class="default">2</span><span class="keyword">, </span><span class="default">$levels</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">, </span><span class="default">$aFilter</span><span class="keyword">=array()) {
<br />
</span><span class="comment">//&nbsp; returns an array of the specified files/directories
<br />
//&nbsp; start search in $path (defaults to current working directory)
<br />
//&nbsp; return $types:&nbsp; 2 =&gt; files; 1 =&gt; directories; 3 =&gt; both;
<br />
//&nbsp; $levels: 1 =&gt; look in the $path only; 2 =&gt; $path and all children;
<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3 =&gt; $path, children, grandchildren; 0 =&gt; $path and all subdirectories;
<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; less than 0 =&gt; complement of -$levels, OR everything starting -$levels down
<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; e.g. -1 =&gt; everthing except $path; -2 =&gt; all descendants except $path + children
<br />
//&nbsp; Remaining argument(s) is(are) a filter array(list) of regular expressions which operate on the full path.
<br />
//&nbsp; &nbsp; First character (before the '/' of the regExp) '-' =&gt; NOT.
<br />
//&nbsp; &nbsp; First character (after a possible '-') 'd' =&gt; apply to directory name
<br />
//&nbsp; &nbsp; The filters may be passed in as an array of strings or as a list of strings
<br />
//&nbsp; Note that output directories are prefixed with a '*' (done in the line above the return)
<br />
&nbsp;&nbsp; </span><span class="default">$dS </span><span class="keyword">= </span><span class="default">DIRECTORY_SEPARATOR</span><span class="keyword">;
<br />
&nbsp;&nbsp; if (!(</span><span class="default">$path </span><span class="keyword">= </span><span class="default">realpath</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">?</span><span class="default">$path</span><span class="keyword">:</span><span class="default">getcwd</span><span class="keyword">()))) return array();&nbsp; &nbsp; </span><span class="comment">// bad path
<br />
&nbsp;&nbsp; // next line rids terminating \ on drives (works since c: == c:\ on PHP).&nbsp; OK in *nix?
<br />
&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">)==</span><span class="default">$dS</span><span class="keyword">) </span><span class="default">$path </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">);
<br />
&nbsp;&nbsp; if (</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$types</span><span class="keyword">)) </span><span class="default">$types </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;
<br />
&nbsp;&nbsp; if (</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$levels</span><span class="keyword">)) </span><span class="default">$levels </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp; if (</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$aFilter</span><span class="keyword">)) </span><span class="default">$aFilter</span><span class="keyword">=array();
<br />

<br />
&nbsp;&nbsp; </span><span class="comment">// last argument may be passed as a list or as an array
<br />
&nbsp;&nbsp; </span><span class="default">$aFilter </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">func_get_args</span><span class="keyword">(),</span><span class="default">3</span><span class="keyword">);
<br />
&nbsp;&nbsp; if (</span><span class="default">$aFilter </span><span class="keyword">&amp;&amp; </span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$aFilter</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">])==</span><span class="string">"array"</span><span class="keyword">) </span><span class="default">$aFilter</span><span class="keyword">=</span><span class="default">$aFilter</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];
<br />
&nbsp;&nbsp; </span><span class="default">$adFilter </span><span class="keyword">= array();
<br />
&nbsp;&nbsp; </span><span class="comment">// now move directory filters to separate array:
<br />
&nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$aFilter </span><span class="keyword">as </span><span class="default">$i</span><span class="keyword">=&gt;</span><span class="default">$filter</span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// for each directory filter...
<br />
&nbsp;&nbsp; &nbsp; </span><span class="keyword">if ((</span><span class="default">$pos</span><span class="keyword">=</span><span class="default">stripos</span><span class="keyword">(</span><span class="string">" </span><span class="default">$filter</span><span class="string">"</span><span class="keyword">,</span><span class="string">"d"</span><span class="keyword">)) &amp;&amp; </span><span class="default">$pos</span><span class="keyword">&lt;</span><span class="default">3</span><span class="keyword">) {&nbsp; </span><span class="comment">// next line eliminates the 'd'
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$adFilter</span><span class="keyword">[] = </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$filter</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$pos</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">) . </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$filter</span><span class="keyword">,</span><span class="default">$pos</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; unset(</span><span class="default">$aFilter</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]); }
<br />
&nbsp;&nbsp; </span><span class="default">$aFilter </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$aFilter</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// reset indeces
<br />

<br />
&nbsp;&nbsp; </span><span class="default">$aRes </span><span class="keyword">= array();&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// results, $aAcc is an Accumulator
<br />
&nbsp;&nbsp; </span><span class="default">$aDir </span><span class="keyword">= array(</span><span class="default">$path</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// dirs to check
<br />
&nbsp;&nbsp; </span><span class="keyword">for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">$levels</span><span class="keyword">&gt;</span><span class="default">0</span><span class="keyword">?</span><span class="default">$levels</span><span class="keyword">++:-</span><span class="default">1</span><span class="keyword">;(</span><span class="default">$aAcc</span><span class="keyword">=array())||</span><span class="default">$i</span><span class="keyword">--&amp;&amp;</span><span class="default">$aDir</span><span class="keyword">;</span><span class="default">$aDir</span><span class="keyword">=</span><span class="default">$aAcc</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; while (</span><span class="default">$dir </span><span class="keyword">= </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$aDir</span><span class="keyword">))
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">scandir </span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">) as </span><span class="default">$fileOrDir</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$fileOrDir</span><span class="keyword">!=</span><span class="string">"." </span><span class="keyword">&amp;&amp; </span><span class="default">$fileOrDir</span><span class="keyword">!=</span><span class="string">".."</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$dirP </span><span class="keyword">= </span><span class="default">is_dir </span><span class="keyword">(</span><span class="default">$rp</span><span class="keyword">=</span><span class="string">"</span><span class="default">$dir$dS$fileOrDir</span><span class="string">"</span><span class="keyword">))
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">pathFilter</span><span class="keyword">(</span><span class="string">"</span><span class="default">$rp$dS</span><span class="string">"</span><span class="keyword">, </span><span class="default">$adFilter</span><span class="keyword">))
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$aAcc</span><span class="keyword">[] = </span><span class="default">$rp</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$levels</span><span class="keyword">-</span><span class="default">1 </span><span class="keyword">&amp;&amp; (</span><span class="default">$types </span><span class="keyword">&amp; (</span><span class="default">2</span><span class="keyword">-</span><span class="default">$dirP</span><span class="keyword">)))
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">pathFilter</span><span class="keyword">(</span><span class="default">$rp</span><span class="keyword">, </span><span class="default">$aFilter</span><span class="keyword">))
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$aRes</span><span class="keyword">[] = (</span><span class="default">$dirP</span><span class="keyword">?</span><span class="string">"*"</span><span class="keyword">:</span><span class="string">""</span><span class="keyword">) . </span><span class="default">$rp</span><span class="keyword">; }
<br />
&nbsp;&nbsp; return </span><span class="default">$aRes</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
example usage:
<br />
<span class="default">&lt;?php
<br />
define </span><span class="keyword">(</span><span class="string">"_"</span><span class="keyword">, </span><span class="default">NULL</span><span class="keyword">);
<br />
</span><span class="comment">// this will find all non .jpg, non .Thumbs.db files under c:\Photo
<br />
</span><span class="default">$aFiles </span><span class="keyword">= </span><span class="default">dirList</span><span class="keyword">(</span><span class="string">'c:\Photo'</span><span class="keyword">, </span><span class="default">_</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="string">'-/\.jpg$/i'</span><span class="keyword">, </span><span class="string">'-/\\\\Thumbs.db$/'</span><span class="keyword">);
<br />
</span><span class="default">$aFiles </span><span class="keyword">= </span><span class="default">dirList</span><span class="keyword">();&nbsp; &nbsp; </span><span class="comment">// find the files in the current directory
<br />
// next lines will find .jpg files in non Photo(s) subdirectories, excluding Temporary Internet Files
<br />
</span><span class="default">set_time_limit</span><span class="keyword">(</span><span class="default">60</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// iterating from the top level can take a while
<br />
</span><span class="default">$aFiles </span><span class="keyword">= </span><span class="default">dirList</span><span class="keyword">(</span><span class="string">"c:\\"</span><span class="keyword">, </span><span class="default">_</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="string">'/\.jpg$/i'</span><span class="keyword">, </span><span class="string">'-d/\\\\Photos?$/i'</span><span class="keyword">, </span><span class="string">'-d/Temporary Internet/i'</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Note that this function will consume a lot of time if scanning large
<br />
directory structures (which is the reason for the '[-]d/.../' filters).
<br />

<br />
Csaba Gabor from Vienna</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50600""></a>
  <div class="note">
   <strong class="user">csaba at alum dot mit dot edu</strong>
   <a href="#50600" class="date">04-Mar-2005 04:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A nice way to filter the files/directories you get back from scandir:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">pathFilter </span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, </span><span class="default">$aFilter</span><span class="keyword">) {<br />
&nbsp;&nbsp; </span><span class="comment">// returns true iff $path survives the tests from $aFilter<br />
&nbsp;&nbsp; // $aFilter is an array of regular expressions: [-]/regExp/modifiers<br />
&nbsp;&nbsp; // if there is a leading '-' it means exclude $path upon a match (a NOT test)<br />
&nbsp;&nbsp; // If the first expression has a leading '-', $path is in, unless it gets excluded.<br />
&nbsp;&nbsp; // Otherwise, $path is out, unless it gets included via the filter tests.<br />
&nbsp;&nbsp; // The tests are applied in succession.<br />
&nbsp;&nbsp; // A NOT test is applied only if $path is currently (within the tests) included<br />
&nbsp;&nbsp; // Other tests are applied only if $path is currently excluded.&nbsp; Thus,<br />
&nbsp;&nbsp; // array("/a/", "-/b/", "/c/") =&gt; passes if $path has a c or if $path has an a but no b<br />
&nbsp;&nbsp; // array("/a/", "/c/", "-/b/") =&gt; passes if $path has an a or c, but no b<br />
&nbsp;&nbsp; // array("-/b/", "/a/", "/c/") =&gt; passes if $path has no b, or if $path has an a or c<br />
&nbsp;&nbsp; </span><span class="keyword">if (!</span><span class="default">$aFilter</span><span class="keyword">) return </span><span class="default">true</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// automatic inclusion (pass) if no filters<br />
&nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$aFilter </span><span class="keyword">as </span><span class="default">$filter</span><span class="keyword">) break;&nbsp; </span><span class="comment">// we don't know how it's indexed<br />
&nbsp;&nbsp; </span><span class="default">$in </span><span class="keyword">= </span><span class="default">$filter</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]==</span><span class="string">"-"</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// initial in/exclusion based on first filter<br />
&nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$aFilter </span><span class="keyword">as </span><span class="default">$filter</span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// walk the filters<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$in</span><span class="keyword">==</span><span class="default">$not</span><span class="keyword">=(</span><span class="default">$filter</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]==</span><span class="string">"-"</span><span class="keyword">))&nbsp;&nbsp; </span><span class="comment">//&nbsp; &nbsp;&nbsp; testing only when necessary<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$in </span><span class="keyword">^= </span><span class="default">preg_match</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$filter</span><span class="keyword">,</span><span class="default">$not</span><span class="keyword">),</span><span class="default">$path</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// flip in/exclusion upon a match<br />
&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$in</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Csaba Gabor from Vienna</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46872""></a>
  <div class="note">
   <strong class="user">Stan P. van de Burgt</strong>
   <a href="#46872" class="date">26-Oct-2004 09:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
scandir() with regexp matching on file name and sorting options based on stat().
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">myscandir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">, </span><span class="default">$exp</span><span class="keyword">, </span><span class="default">$how</span><span class="keyword">=</span><span class="string">'name'</span><span class="keyword">, </span><span class="default">$desc</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$r </span><span class="keyword">= array();
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dh </span><span class="keyword">= @</span><span class="default">opendir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$dh</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while ((</span><span class="default">$fname </span><span class="keyword">= </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$dh</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="default">$exp</span><span class="keyword">, </span><span class="default">$fname</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$stat </span><span class="keyword">= </span><span class="default">stat</span><span class="keyword">(</span><span class="string">"</span><span class="default">$dir</span><span class="string">/</span><span class="default">$fname</span><span class="string">"</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r</span><span class="keyword">[</span><span class="default">$fname</span><span class="keyword">] = (</span><span class="default">$how </span><span class="keyword">== </span><span class="string">'name'</span><span class="keyword">)? </span><span class="default">$fname</span><span class="keyword">: </span><span class="default">$stat</span><span class="keyword">[</span><span class="default">$how</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">closedir</span><span class="keyword">(</span><span class="default">$dh</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$desc</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">arsort</span><span class="keyword">(</span><span class="default">$r</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">asort</span><span class="keyword">(</span><span class="default">$r</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return(</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$r</span><span class="keyword">));
<br />
}
<br />

<br />
</span><span class="default">$r </span><span class="keyword">= </span><span class="default">myscandir</span><span class="keyword">(</span><span class="string">'./book/'</span><span class="keyword">, </span><span class="string">'/^article[0-9]{4}\.txt$/i'</span><span class="keyword">, </span><span class="string">'ctime'</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$r</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
files can be sorted on name and stat() attributes, ascending and descending:
<br />

<br />
name&nbsp; &nbsp; file name
<br />
dev&nbsp; &nbsp;&nbsp; device number
<br />
ino&nbsp; &nbsp;&nbsp; inode number
<br />
mode&nbsp; &nbsp; inode protection mode
<br />
nlink&nbsp;&nbsp; number of links
<br />
uid&nbsp; &nbsp;&nbsp; userid of owner
<br />
gid&nbsp; &nbsp;&nbsp; groupid of owner
<br />
rdev&nbsp; &nbsp; device type, if inode device *
<br />
size&nbsp; &nbsp; size in bytes
<br />
atime&nbsp;&nbsp; time of last access (Unix timestamp)
<br />
mtime&nbsp;&nbsp; time of last modification (Unix timestamp)
<br />
ctime&nbsp;&nbsp; time of last inode change (Unix timestamp)
<br />
blksize blocksize of filesystem IO *
<br />
blocks&nbsp; number of blocks allocated</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

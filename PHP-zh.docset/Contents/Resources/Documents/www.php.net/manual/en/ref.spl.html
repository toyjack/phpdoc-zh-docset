<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>SPL 函数</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="class.unexpectedvalueexception.html">? UnexpectedValueException</a></li>
      <li style="float: right;"><a href="function.class-implements.html">class_implements ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="book.spl.html">SPL</a></li>
    <li>SPL 函数</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="ref.spl" class="reference">
 <h1 class="title">SPL 函数</h1>

 














































































































<h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="function.class-implements.html">class_implements</a> &mdash; 返回指定的类实现的所有接口。</li><li><a href="function.class-parents.html">class_parents</a> &mdash; 返回指定类的父类。</li><li><a href="function.class-uses.html">class_uses</a> &mdash; Return the traits used by the given class</li><li><a href="function.iterator-apply.html">iterator_apply</a> &mdash; 为迭代器中每个元素调用一个用户自定义函数</li><li><a href="function.iterator-count.html">iterator_count</a> &mdash; 计算迭代器中元素的个数</li><li><a href="function.iterator-to-array.html">iterator_to_array</a> &mdash; 将迭代器中的元素拷贝到数组</li><li><a href="function.spl-autoload-call.html">spl_autoload_call</a> &mdash; 尝试调用所有已注册的 __autoload() 函数来装载请求类</li><li><a href="function.spl-autoload-extensions.html">spl_autoload_extensions</a> &mdash; 注册并返回 spl_autoload 函数使用的默认文件扩展名</li><li><a href="function.spl-autoload-functions.html">spl_autoload_functions</a> &mdash; 返回所有已注册的 __autoload() 函数</li><li><a href="function.spl-autoload-register.html">spl_autoload_register</a> &mdash; 注册给定的函数作为 __autoload 的实现</li><li><a href="function.spl-autoload-unregister.html">spl_autoload_unregister</a> &mdash; 注销已注册的 __autoload() 函数</li><li><a href="function.spl-autoload.html">spl_autoload</a> &mdash; __autoload()函数的默认实现</li><li><a href="function.spl-classes.html">spl_classes</a> &mdash; 返回所有可用的SPL类</li><li><a href="function.spl-object-hash.html">spl_object_hash</a> &mdash; 返回指定对象的hash id</li><li><a href="function.spl-object-id.html">spl_object_id</a> &mdash; Return the integer object handle for given object</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="84627""></a>
  <div class="note">
   <strong class="user">benny at whitewashing dot de</strong>
   <a href="#84627" class="date">22-Jul-2008 09:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have to correct my implementation from before. The example before only supported correct read-access but failed on setting new values after creation of the ArrayMultiObject. Also i had to correct a bug that occured from my CopyPasteChange into the comment textarea.
<br />

<br />
This snippet now hopefully implements a fully functional multidimensional array, represented by an ArrayObject:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">class </span><span class="default">ArrayMultiObject </span><span class="keyword">extends </span><span class="default">ArrayObject
<br />
</span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$flags </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$iterator_class </span><span class="keyword">= </span><span class="string">"ArrayIterator"</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$objects </span><span class="keyword">= array();
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">AS </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$objects</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = new </span><span class="default">ArrayMultiObject</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$flags</span><span class="keyword">, </span><span class="default">$iterator_class</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$objects</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">parent</span><span class="keyword">::</span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$objects</span><span class="keyword">, </span><span class="default">$flags</span><span class="keyword">, </span><span class="default">$iterator_class</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">offsetSet</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= new </span><span class="default">ArrayMultiObject</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">parent</span><span class="keyword">::</span><span class="default">offsetSet</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83295""></a>
  <div class="note">
   <strong class="user">loaded67 at hotmail dot com</strong>
   <a href="#83295" class="date">19-May-2008 01:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For some application I needed to reverse some standard iterators. <br />
<br />
So I mocked up this flexible function.<br />
Enjoy<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">reverse_iterator</span><span class="keyword">(</span><span class="default">Iterator $iterator</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$type&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$iterator</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">array_reverse</span><span class="keyword">(</span><span class="default">iterator_to_array</span><span class="keyword">(</span><span class="default">$iterator</span><span class="keyword">), </span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return new </span><span class="default">$type</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77794""></a>
  <div class="note">
   <strong class="user">prometheus - csaba dot dobai at php-sparcle dot hu</strong>
   <a href="#77794" class="date">13-Sep-2007 02:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This code is an example. By using classes like this, you gives a chance to create classes which extends another class but have most of the ability what a class extends ArrayObject (like multiple inheritance):
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
</span><span class="keyword">class </span><span class="default">foo 
<br />
</span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$foo </span><span class="keyword">= </span><span class="string">'foo'</span><span class="keyword">;
<br />
} </span><span class="comment">// class
<br />

<br />
</span><span class="keyword">class </span><span class="default">foobar </span><span class="keyword">extends </span><span class="default">foo </span><span class="keyword">implements </span><span class="default">ArrayAccess</span><span class="keyword">,</span><span class="default">IteratorAggregate</span><span class="keyword">,</span><span class="default">Countable
<br />
</span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">offsetExists</span><span class="keyword">(</span><span class="default">$offset</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$offset</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">offsetGet</span><span class="keyword">(</span><span class="default">$offset</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$offset</span><span class="keyword">];
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">offsetSet</span><span class="keyword">(</span><span class="default">$offset</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Makes "array" to readonly
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">offsetUnset</span><span class="keyword">(</span><span class="default">$offset</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Makes "array" to readonly
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">count</span><span class="keyword">()
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; } </span><span class="comment">// function
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">getArray</span><span class="keyword">()
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return array(</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; } </span><span class="comment">// function
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">getIterator</span><span class="keyword">()
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return new </span><span class="default">ArrayIterator</span><span class="keyword">(array(</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">));
<br />
&nbsp;&nbsp;&nbsp; } </span><span class="comment">// function
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">__toString</span><span class="keyword">()
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'String test'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; } </span><span class="comment">// function
<br />
</span><span class="keyword">} </span><span class="comment">// class
<br />

<br />
</span><span class="default">$foobar </span><span class="keyword">= new </span><span class="default">foobar</span><span class="keyword">();
<br />
print </span><span class="default">$foobar</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">].</span><span class="string">'&lt;br/&gt;'</span><span class="keyword">;
<br />
print </span><span class="default">$foobar</span><span class="keyword">-&gt;</span><span class="default">foo</span><span class="keyword">.</span><span class="string">'&lt;br/&gt;'</span><span class="keyword">;
<br />
print </span><span class="default">count</span><span class="keyword">(</span><span class="default">$foobar</span><span class="keyword">).</span><span class="string">'&lt;br/&gt;'</span><span class="keyword">;
<br />

<br />
foreach (</span><span class="default">$foobar </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; print </span><span class="default">$k</span><span class="keyword">.</span><span class="string">'=&gt;'</span><span class="keyword">.</span><span class="default">$v</span><span class="keyword">.</span><span class="string">'&lt;br/&gt;'</span><span class="keyword">;
<br />
} </span><span class="comment">// foreach
<br />

<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$foobar</span><span class="keyword">-&gt;</span><span class="default">getArray</span><span class="keyword">());
<br />

<br />
print </span><span class="default">$foobar</span><span class="keyword">;
<br />

<br />
</span><span class="comment">/* Generated output:
<br />
1
<br />
foo
<br />
4
<br />
0=&gt;1
<br />
1=&gt;2
<br />
2=&gt;3
<br />
3=&gt;4
<br />
array
<br />
&nbsp; 0 =&gt; int 1
<br />
&nbsp; 1 =&gt; int 2
<br />
&nbsp; 2 =&gt; int 3
<br />
&nbsp; 3 =&gt; int 4
<br />
String test
<br />
*/
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
For proper use you must be define all these methods except getArray()
<br />

<br />
Browse SPL's sources to be a very helpful think.
<br />

<br />
ps.: sry for my english</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72790""></a>
  <div class="note">
   <strong class="user">semperluc (at) yahoo._forgot_the_rest</strong>
   <a href="#72790" class="date">01-Feb-2007 01:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php <br />
</span><span class="comment">/*<br />
How to store SPL Iterator results (rather than just echo-and-forget):<br />
<br />
The library of Iterators&nbsp; are object based, so you need to trick the little rascals into an array.&nbsp; <br />
Here's how (two ways) ...<br />
<br />
1. Explicit typecasts: $a[] = (array)$Obj-&gt;objMethod();<br />
<br />
2. Array definition: $a[] = array( key =&gt; $Obj-&gt;objMethod() );<br />
<br />
Examples: DirectoryIterator()<br />
*/<br />
<br />
// 1. explicity typecast object as array<br />
</span><span class="keyword">foreach ( new </span><span class="default">DirectoryIterator</span><span class="keyword">(</span><span class="string">'./'</span><span class="keyword">) as </span><span class="default">$Item </span><span class="keyword">)<br />
{<br />
&nbsp; </span><span class="default">$fname </span><span class="keyword">= (array)</span><span class="default">$Item</span><span class="keyword">-&gt;</span><span class="default">getFilename</span><span class="keyword">();<br />
&nbsp; </span><span class="default">$dir_listing</span><span class="keyword">[] = </span><span class="default">$fname</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
}<br />
<br />
</span><span class="comment">//<br />
</span><span class="keyword">echo </span><span class="string">"&lt;pre&gt;"</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$dir_listing</span><span class="keyword">); unset(</span><span class="default">$dir_listing</span><span class="keyword">);<br />
echo</span><span class="string">"&lt;/pre&gt;&lt;hr /&gt;"</span><span class="keyword">;<br />
</span><span class="comment">//<br />
<br />
// or<br />
<br />
// 2. define array as key =&gt; object-&gt;method<br />
</span><span class="keyword">foreach ( new </span><span class="default">DirectoryIterator</span><span class="keyword">(</span><span class="string">'./'</span><span class="keyword">) as </span><span class="default">$Item </span><span class="keyword">)<br />
{<br />
&nbsp; </span><span class="default">$dir_listing</span><span class="keyword">[] = array (<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"fname" </span><span class="keyword">=&gt; </span><span class="default">$Item</span><span class="keyword">-&gt;</span><span class="default">getFilename</span><span class="keyword">(),&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"path" </span><span class="keyword">=&gt; </span><span class="default">$Item</span><span class="keyword">-&gt;</span><span class="default">getPathname</span><span class="keyword">(),<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"size" </span><span class="keyword">=&gt; </span><span class="default">$Item</span><span class="keyword">-&gt;</span><span class="default">getSize</span><span class="keyword">(),&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"mtime" </span><span class="keyword">=&gt; </span><span class="default">$Item</span><span class="keyword">-&gt;</span><span class="default">getMTime</span><span class="keyword">() <br />
&nbsp; );<br />
}<br />
<br />
</span><span class="comment">//<br />
</span><span class="keyword">echo </span><span class="string">"&lt;pre&gt;"</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$dir_listing</span><span class="keyword">); unset(</span><span class="default">$dir_listing</span><span class="keyword">);<br />
echo</span><span class="string">"&lt;/pre&gt;"</span><span class="keyword">;<br />
</span><span class="comment">//<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60636""></a>
  <div class="note">
   <strong class="user">ville&lt;/.&gt;witt&lt;/a&gt;gmail&lt;/.&gt;com</strong>
   <a href="#60636" class="date">12-Jan-2006 12:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
These to funtions has excatly the same output, the only diff. is in which directory iterator they use. I hope someone out there can use it:
<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">listfilesin1 </span><span class="keyword">(</span><span class="default">$dir </span><span class="keyword">= </span><span class="string">"."</span><span class="keyword">, </span><span class="default">$depth</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"Dir: "</span><span class="keyword">.</span><span class="default">$dir</span><span class="keyword">.</span><span class="string">"&lt;br/&gt;"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; foreach(new </span><span class="default">DirectoryIterator</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">) as </span><span class="default">$file</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">$file</span><span class="keyword">-&gt;</span><span class="default">isDot</span><span class="keyword">()) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$file</span><span class="keyword">-&gt;</span><span class="default">isDir</span><span class="keyword">()) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newdir </span><span class="keyword">= </span><span class="default">$file</span><span class="keyword">-&gt;</span><span class="default">getPathname</span><span class="keyword">();
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">listfilesin1</span><span class="keyword">(</span><span class="default">$newdir</span><span class="keyword">, </span><span class="default">$depth</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"(</span><span class="default">$depth</span><span class="string">)"</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">-&gt;</span><span class="default">getPathname</span><span class="keyword">() . </span><span class="string">"&lt;br/&gt;"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />
function </span><span class="default">listfilesin2 </span><span class="keyword">(</span><span class="default">$dir </span><span class="keyword">= </span><span class="string">"."</span><span class="keyword">, </span><span class="default">$depth</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"Dir: "</span><span class="keyword">.</span><span class="default">$dir</span><span class="keyword">.</span><span class="string">"&lt;br/&gt;"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; foreach(new </span><span class="default">RecursiveDirectoryIterator</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">) as </span><span class="default">$file</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$file</span><span class="keyword">-&gt;</span><span class="default">hasChildren</span><span class="keyword">(</span><span class="default">false</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newdir </span><span class="keyword">= </span><span class="default">$file</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">();
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">listfilesin2</span><span class="keyword">(</span><span class="default">$newdir</span><span class="keyword">, </span><span class="default">$depth</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"(</span><span class="default">$depth</span><span class="string">)"</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">() . </span><span class="string">"&lt;br/&gt;"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />
</span><span class="default">listfilesin</span><span class="keyword">();
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57663""></a>
  <div class="note">
   <strong class="user">adove at booyahnetworks dot com</strong>
   <a href="#57663" class="date">10-Oct-2005 10:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Something to note that, at least to me, seems pretty important and is not entirely clear in the documentation is the fact that the ArrayObject class supports get/set on uni-dimensional keys and get ONLY on *passed* multi-dimensional keys/paths (see source below). If you, like me, need to support array accesss overloading for multi-dimensional data, you will need to derive from ArrayObject and overide the ArrayAccess interface methods to "walk" passed data and convert embedded arrays to objects of some kind... 
<br />

<br />
Reference Bug 34816 @ <a href="http://bugs.php.net/bug.php?id=34816." rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=34816.</a>
<br />

<br />
Illustration of the issue:
<br />

<br />
$a = array(
<br />
&nbsp;&nbsp;&nbsp; "test" =&gt; array(
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "one" =&gt; "dunno",
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "two" =&gt; array(
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; "peekabo" =&gt; "do you see me?",
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; "anyone" =&gt; array("there")
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )
<br />
&nbsp;&nbsp;&nbsp; );
<br />
$oArray = new ArrayObject($a);
<br />
var_dump($oArray);
<br />

<br />
$oArray["three"] = "No problems here.";
<br />

<br />
echo "\n\\test\\one == " . $oArray["test"]["one"] . "\n\n";
<br />

<br />
// NEITHER of the two below will work!
<br />
$oArray["test"]["one"] = "Yes I do!"; 
<br />
$oArray["test"]["yes"] = array(
<br />
&nbsp;&nbsp;&nbsp; "hello" =&gt; "Goodbye!"
<br />
&nbsp;&nbsp;&nbsp; );
<br />

<br />
var_dump($oArray);
<br />

<br />
---
<br />
Note from the extension author:
<br />
Actually there is RecursiveArrayObject and RecursiveArrayIterator to deal with recursive structures. However this does not always solve all multidimensional issues as expected.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57147""></a>
  <div class="note">
   <strong class="user">helly at php dot net</strong>
   <a href="#57147" class="date">25-Sep-2005 02:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is a RecursiveFilterIterator that makes the above code much easier. And then ther is ParentIterator thta is already a filtering recursive iterator that only accepts elements that have children, with a RecursiveDirectoryIterator as inner iterator you would obviously get only the directories. Further more it ensures that it creates the correct children. All in all you simply need to do this:
<br />

<br />
$it = new RecursiveDirectoryIterator($path);
<br />
$it = new ParentIterator($it);
<br />
$it = new RecursiveIteratorIteator($it);
<br />

<br />
foreach($it as $dir&nbsp; =&gt; $o) { ... }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41636""></a>
  <div class="note">
   <strong class="user">phil &amp;ampersat; flatnet.net</strong>
   <a href="#41636" class="date">17-Apr-2004 03:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a sample implementation of the RecursiveDirectoryIterator class. It prints a simple treeview of a given directory:
<br />
<span class="default">&lt;?php 
<br />
</span><span class="keyword">function </span><span class="default">recurse</span><span class="keyword">(</span><span class="default">$it</span><span class="keyword">) { 
<br />
&nbsp;&nbsp; echo </span><span class="string">'&lt;ul&gt;'</span><span class="keyword">; 
<br />
&nbsp;&nbsp; for( ; </span><span class="default">$it</span><span class="keyword">-&gt;</span><span class="default">valid</span><span class="keyword">(); </span><span class="default">$it</span><span class="keyword">-&gt;</span><span class="default">next</span><span class="keyword">()) { 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; if(</span><span class="default">$it</span><span class="keyword">-&gt;</span><span class="default">isDir</span><span class="keyword">() &amp;&amp; !</span><span class="default">$it</span><span class="keyword">-&gt;</span><span class="default">isDot</span><span class="keyword">()) { 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">printf</span><span class="keyword">(</span><span class="string">'&lt;li class="dir"&gt;%s&lt;/li&gt;'</span><span class="keyword">, </span><span class="default">$it</span><span class="keyword">-&gt;</span><span class="default">current</span><span class="keyword">()); 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$it</span><span class="keyword">-&gt;</span><span class="default">hasChildren</span><span class="keyword">()) { 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$bleh </span><span class="keyword">= </span><span class="default">$it</span><span class="keyword">-&gt;</span><span class="default">getChildren</span><span class="keyword">(); 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">'&lt;ul&gt;' </span><span class="keyword">. </span><span class="default">recurse</span><span class="keyword">(</span><span class="default">$bleh</span><span class="keyword">) . </span><span class="string">'&lt;/ul&gt;'</span><span class="keyword">; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; } elseif(</span><span class="default">$it</span><span class="keyword">-&gt;</span><span class="default">isFile</span><span class="keyword">()) { 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">'&lt;li class="file"&gt;'</span><span class="keyword">. </span><span class="default">$it</span><span class="keyword">-&gt;</span><span class="default">current</span><span class="keyword">() . </span><span class="string">' (' </span><span class="keyword">. </span><span class="default">$it</span><span class="keyword">-&gt;</span><span class="default">getSize</span><span class="keyword">(). </span><span class="string">' Bytes)&lt;/li&gt;'</span><span class="keyword">; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; } 
<br />
&nbsp;&nbsp; } 
<br />
&nbsp;&nbsp; echo </span><span class="string">'&lt;/ul&gt;'</span><span class="keyword">; 
<br />
} 
<br />

<br />
</span><span class="default">recurse</span><span class="keyword">(new </span><span class="default">RecursiveDirectoryIterator</span><span class="keyword">(</span><span class="string">'D:/'</span><span class="keyword">)); 
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

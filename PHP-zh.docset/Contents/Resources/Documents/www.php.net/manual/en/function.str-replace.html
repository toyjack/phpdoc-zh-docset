<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>子字符串替换</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.str-repeat.html">? str_repeat</a></li>
      <li style="float: right;"><a href="function.str-rot13.html">str_rot13 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.strings.html">字符串 函数</a></li>
    <li>子字符串替换</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.str-replace" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">str_replace</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">str_replace</span> &mdash; <span class="dc-title">子字符串替换</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.str-replace-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>str_replace</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span> <code class="parameter">$search</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span> <code class="parameter">$replace</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span> <code class="parameter">$subject</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">int</span> <code class="parameter reference">&$count</code><span class="initializer"> = ?</span></span><br>): <span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span></div>

  <p class="para rdfs-comment">
   该函数返回一个字符串或者数组。该字符串或数组是将 <code class="parameter">subject</code> 中全部的 <code class="parameter">search</code> 都被 <code class="parameter">replace</code> 替换之后的结果。
  </p>
  <p class="para">
   如果没有一些特殊的替换需求（比如正则表达式），你应该使用该函数替换 <span class="function"><strong>ereg_replace()</strong></span> 和 <span class="function"><a href="function.preg-replace.html" class="function">preg_replace()</a></span>。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.str-replace-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   如果 <code class="parameter">search</code> 和 <code class="parameter">replace</code> 为数组，那么 <span class="function"><strong>str_replace()</strong></span> 将对 <code class="parameter">subject</code> 做二者的映射替换。如果 <code class="parameter">replace</code> 的值的个数少于 <code class="parameter">search</code> 的个数，多余的替换将使用空字符串来进行。如果 <code class="parameter">search</code> 是一个数组而 <code class="parameter">replace</code> 是一个字符串，那么 <code class="parameter">search</code> 中每个元素的替换将始终使用这个字符串。该转换不会改变大小写。
  </p>
  <p class="para">
   如果 <code class="parameter">search</code> 和 <code class="parameter">replace</code> 都是数组，它们的值将会被依次处理。
  </p>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">search</code></dt>

     <dd>

      <p class="para">
       查找的目标值，也就是 <em class="emphasis">needle</em>。一个数组可以指定多个目标。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">replace</code></dt>

     <dd>

      <p class="para">
       <code class="parameter">search</code> 的替换值。一个数组可以被用来指定多重替换。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">subject</code></dt>

     <dd>

      <p class="para">
       执行替换的数组或者字符串。也就是 <em class="emphasis">haystack</em>。
      </p>
      <p class="para">
       如果 <code class="parameter">subject</code> 是一个数组，替换操作将遍历整个 <code class="parameter">subject</code>，返回值也将是一个数组。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">count</code></dt>

     <dd>

      <p class="para">
        如果被指定，它的值将被设置为替换发生的次数。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.str-replace-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   该函数返回替换后的数组或者字符串。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.str-replace-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-4722">
    <p><strong>Example #1 <span class="function"><strong>str_replace()</strong></span> 基本范例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;赋值:&nbsp;&lt;body&nbsp;text='black'&gt;<br /></span><span style="color: #0000BB">$bodytag&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">"%body%"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"black"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"&lt;body&nbsp;text='%body%'&gt;"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;赋值:&nbsp;Hll&nbsp;Wrld&nbsp;f&nbsp;PHP<br /></span><span style="color: #0000BB">$vowels&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"a"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"e"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"i"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"o"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"u"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"A"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"E"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"I"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"O"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"U"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$onlyconsonants&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #0000BB">$vowels</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"Hello&nbsp;World&nbsp;of&nbsp;PHP"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;赋值:&nbsp;You&nbsp;should&nbsp;eat&nbsp;pizza,&nbsp;beer,&nbsp;and&nbsp;ice&nbsp;cream&nbsp;every&nbsp;day<br /></span><span style="color: #0000BB">$phrase&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"You&nbsp;should&nbsp;eat&nbsp;fruits,&nbsp;vegetables,&nbsp;and&nbsp;fiber&nbsp;every&nbsp;day."</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$healthy&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"fruits"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"vegetables"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"fiber"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$yummy&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"pizza"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"beer"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"ice&nbsp;cream"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$newphrase&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #0000BB">$healthy</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$yummy</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$phrase</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;赋值:&nbsp;2<br /></span><span style="color: #0000BB">$str&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">"ll"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"good&nbsp;golly&nbsp;miss&nbsp;molly!"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$count</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$count</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-4723">
    <p><strong>Example #2 可能的 <span class="function"><strong>str_replace()</strong></span> 替换范例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;替换顺序<br /></span><span style="color: #0000BB">$str&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"Line&nbsp;1\nLine&nbsp;2\rLine&nbsp;3\r\nLine&nbsp;4\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$order&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"\r\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\r"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$replace&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;首先替换&nbsp;\r\n&nbsp;字符，因此它们不会被两次转换<br /></span><span style="color: #0000BB">$newstr&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #0000BB">$order</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$replace</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$str</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;输出&nbsp;F&nbsp;，因为&nbsp;A&nbsp;被&nbsp;B&nbsp;替换，B&nbsp;又被&nbsp;C&nbsp;替换，以此类推...<br />//&nbsp;由于从左到右依次替换，最终&nbsp;E&nbsp;被&nbsp;F&nbsp;替换<br /></span><span style="color: #0000BB">$search&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'A'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'B'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'C'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'D'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'E'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$replace&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'B'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'C'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'D'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'E'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'F'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$subject&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'A'</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #0000BB">$search</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$replace</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$subject</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;输出:&nbsp;apearpearle&nbsp;pear<br />//&nbsp;由于上面提到的原因<br /></span><span style="color: #0000BB">$letters&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'a'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'p'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$fruit&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'apple'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'pear'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$text&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'a&nbsp;p'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$output&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #0000BB">$letters</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$fruit</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$text</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$output</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.str-replace-notes">
  <h3 class="title">注释</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">此函数可安全用于二进制对象。</span></p></blockquote>
  <div class="caution"><strong class="caution">Caution</strong>
   <h1 class="title">了解替换顺序</h1>
   <p class="para">
    由于 <span class="function"><strong>str_replace()</strong></span> 的替换时从左到右依次进行的，进行多重替换的时候可能会替换掉之前插入的值。参见该文档的范例。
   </p>
  </div>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    该函数区分大小写。使用 <span class="function"><a href="function.str-ireplace.html" class="function">str_ireplace()</a></span> 可以进行不区分大小写的替换。
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.str-replace-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.str-ireplace.html" class="function" rel="rdfs-seeAlso">str_ireplace()</a> - str_replace 的忽略大小写版本</span></li>
    <li class="member"><span class="function"><a href="function.substr-replace.html" class="function" rel="rdfs-seeAlso">substr_replace()</a> - 替换字符串的子串</span></li>
    <li class="member"><span class="function"><a href="function.preg-replace.html" class="function" rel="rdfs-seeAlso">preg_replace()</a> - 执行一个正则表达式的搜索和替换</span></li>
    <li class="member"><span class="function"><a href="function.strtr.html" class="function" rel="rdfs-seeAlso">strtr()</a> - 转换指定字符</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="126182""></a>
  <div class="note">
   <strong class="user">ressing1 at gmail dot com</strong>
   <a href="#126182" class="date">21-Jun-2021 08:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To remove all characters from string $b that exist in string $a:<br />
<br />
$a="ABC";<br />
$b="teAsBtC";<br />
echo str_replace(str_split($a),'',$b); <br />
<br />
Output: test<br />
<br />
To remove all characters from string $b that don't exist in string $a:<br />
<br />
$a="ABC";<br />
$b="teAsBtC";<br />
echo str_replace(str_split(str_replace(str_split($a),'',$b)),'',$b);<br />
<br />
Output: ABC</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="125165""></a>
  <div class="note">
   <strong class="user">hyperzlib at outlook dot com</strong>
   <a href="#125165" class="date">04-Jul-2020 12:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Use str_replace to remove all dashes but one from the string '-aaa----b-c-----d--e---f' (resulting is: '-aaa-b-c-d-e-f')<br />
<br />
<span class="default">&lt;?php<br />
$challenge </span><span class="keyword">= </span><span class="string">'-aaa----b-c-----d--e---f'</span><span class="keyword">;<br />
do </span><span class="default">$challenge </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'--'</span><span class="keyword">, </span><span class="string">'-'</span><span class="keyword">, </span><span class="default">$challenge</span><span class="keyword">, </span><span class="default">$count</span><span class="keyword">); while(</span><span class="default">$count</span><span class="keyword">);<br />
echo </span><span class="default">$challenge</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124733""></a>
  <div class="note">
   <strong class="user">iskus1981 at gmail dot com</strong>
   <a href="#124733" class="date">19-Feb-2020 09:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
bracesChecker($str) {<br />
&nbsp;&nbsp;&nbsp; while($str) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $str = str_replace(['()','[]','{}'], '', $str, $count);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!$str) return true;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!$count &amp;&amp; $str) return false;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
$str = '[}]{(){][}()';<br />
echo bracesChecker($str);<br />
//false<br />
$str = '([]{})[{}[]{[]}([{[]}])';<br />
echo bracesChecker ($str);<br />
//true</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="122929""></a>
  <div class="note">
   <strong class="user">ravenswd at gmail dot com</strong>
   <a href="#122929" class="date">11-Jul-2018 01:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is what happens when the search and replace arrays are different sizes:<br />
<br />
<span class="default">&lt;?php<br />
$search&nbsp; </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">, </span><span class="string">'c'</span><span class="keyword">, </span><span class="string">'d'</span><span class="keyword">, </span><span class="string">'e'</span><span class="keyword">);<br />
</span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">);<br />
</span><span class="default">$subject </span><span class="keyword">= </span><span class="string">'abcdefg'</span><span class="keyword">;<br />
echo </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">);<br />
</span><span class="comment">// result: 'ABCfg'<br />
<br />
</span><span class="default">$search&nbsp; </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">, </span><span class="string">'c'</span><span class="keyword">);<br />
</span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">);<br />
</span><span class="default">$subject </span><span class="keyword">= </span><span class="string">'abcdefg'</span><span class="keyword">;<br />
echo </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">);<br />
</span><span class="comment">// result: 'ABCdefg'<br />
</span><span class="default">?&gt;<br />
</span><br />
No warning or error is generated in either of these cases.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="122751""></a>
  <div class="note">
   <strong class="user">ASchmidt at Anamera dot net</strong>
   <a href="#122751" class="date">20-May-2018 04:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Escaping strings with control characters, quotes and backslashes for subsequent use in MySQL commands.<br />
<br />
MySQL has documented a number of backslash escape sequences that need to be used to pass certain values in SQL commands: https://dev.mysql.com/doc/refman/5.7/en/string-literals.html<br />
<br />
It's crucial to escape existing backslashes first to prevent double-escaping, before escaping the various control sequences:<br />
<br />
<span class="default">&lt;?php<br />
$result </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array( </span><span class="string">'\\'</span><span class="keyword">,&nbsp; &nbsp; </span><span class="string">"\0"</span><span class="keyword">,&nbsp;&nbsp; </span><span class="string">"'"</span><span class="keyword">,&nbsp; &nbsp; </span><span class="string">"\x8" </span><span class="comment">/* BS */</span><span class="keyword">, </span><span class="string">"\n"</span><span class="keyword">,&nbsp;&nbsp; </span><span class="string">"\r"</span><span class="keyword">,&nbsp;&nbsp; </span><span class="string">"\t"</span><span class="keyword">,&nbsp;&nbsp; </span><span class="string">"\x1A" </span><span class="comment">/* Ctrl+Z */ </span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array( </span><span class="string">'\\\\'</span><span class="keyword">,&nbsp; </span><span class="string">'\\0'</span><span class="keyword">,&nbsp; </span><span class="string">'\\\''</span><span class="keyword">, </span><span class="string">'\\b'</span><span class="keyword">,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'\\n'</span><span class="keyword">,&nbsp; </span><span class="string">'\\r'</span><span class="keyword">,&nbsp; </span><span class="string">'\\t'</span><span class="keyword">,&nbsp; </span><span class="string">'\\Z' </span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
This code is NOT intended to protect against SQL insertions, it's intended to PRESERVE string content correctly, if it contains control characters.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="122463""></a>
  <div class="note">
   <strong class="user">jefrey at forteras dot tech</strong>
   <a href="#122463" class="date">02-Mar-2018 02:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
NEVER USE this function to protect against SQL Injection.<br />
<br />
It may sound ridiculous but I've seen a couple of developers doing so.<br />
<br />
It's interesting that these developers use str_replace (let's ignore the fact that they don't even use the str_ireplace which is case-insensitive) to remove common SQL commands such as "SELECT" or "DROP" from user-entered inputs.<br />
<br />
A funny thing to note is that:<br />
<br />
<span class="default">&lt;?php<br />
$input </span><span class="keyword">= </span><span class="string">"SELSELECTECT"</span><span class="keyword">;<br />
echo </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"SELECT"</span><span class="keyword">, </span><span class="default">null</span><span class="keyword">, </span><span class="default">$input</span><span class="keyword">); </span><span class="comment">// = SELECT<br />
</span><span class="default">?&gt;<br />
</span><br />
Yeah you could loop it, but str_replace was never meant to be used this way. There are proper ways to protect against SQL Injections, such as using prepared statements (placeholders).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="121739""></a>
  <div class="note">
   <strong class="user">Oyedele Hammed Horlah - itz dot harmid at gmail dot com</strong>
   <a href="#121739" class="date">08-Oct-2017 08:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
this is a simple function to replace all newlines to &lt;br&gt; tags.<br />
<br />
\r\n - windows line break<br />
\n - linux line break<br />
\r - mac line break<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">nl_to_br</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) {<br />
return </span><span class="default">str_replace</span><span class="keyword">(array(</span><span class="string">"\r\n"</span><span class="keyword">,</span><span class="string">"\n"</span><span class="keyword">,</span><span class="string">"\r"</span><span class="keyword">), </span><span class="string">"&lt;br/&gt;"</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />
}<br />
echo </span><span class="default">nl_to_br</span><span class="keyword">(</span><span class="string">'Hello world\n I am Oyedele Hammed Horlah'</span><span class="keyword">); </span><span class="comment">// =&gt; Hello World &lt;br&gt; I am Oyedele Hammed Horlah<br />
</span><span class="default">?&gt;<br />
</span><br />
Enjoy</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="121612""></a>
  <div class="note">
   <strong class="user">vuabid at hotmail dot com</strong>
   <a href="#121612" class="date">06-Sep-2017 08:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Consider this while using str_replace function when $search and $replace are arrays.<br />
<br />
$search = array( 'login_reactivate', 'login_reactivate_date' );<br />
$replace = array( 'login reactivate status', 'login reactivate date' );<br />
$subject = "fname, email, login_reactivate, login_reactivate_date";<br />
<br />
$returnValue = str_replace( $search, $replace, $subject );<br />
<br />
$returnValue will be:<br />
fname, email, login reactivate status, login reactivate status_date<br />
<br />
You can see we are expecting "login_reactivate_date" to be replaced with "login reactivate date" but it will replace to "login reactivate status_date"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119930""></a>
  <div class="note">
   <strong class="user">flame2000 at mail dot ru</strong>
   <a href="#119930" class="date">21-Sep-2016 07:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Replace chars in multi-byte string.<br />
In example, replacing 'f'=&gt;'b', 'o'=&gt;'e', 't'=&gt;'r' and etc.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">mb_chars_replace</span><span class="keyword">(</span><span class="default">$from</span><span class="keyword">, </span><span class="default">$to</span><span class="keyword">, </span><span class="default">$subj</span><span class="keyword">, </span><span class="default">$delSymb</span><span class="keyword">=</span><span class="string">'_'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$nsubj</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">'/(.)/u'</span><span class="keyword">, </span><span class="default">$subj</span><span class="keyword">, </span><span class="default">$subj</span><span class="keyword">);</span><span class="default">$subj</span><span class="keyword">=</span><span class="default">$subj</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$from</span><span class="keyword">)) {</span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">'/(.)/u'</span><span class="keyword">, </span><span class="default">$from</span><span class="keyword">, </span><span class="default">$from</span><span class="keyword">);</span><span class="default">$from</span><span class="keyword">=</span><span class="default">$from</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];} <br />
&nbsp;&nbsp; &nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$to</span><span class="keyword">)) {</span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">'/(.)/u'</span><span class="keyword">, </span><span class="default">$to</span><span class="keyword">, </span><span class="default">$to</span><span class="keyword">);</span><span class="default">$to</span><span class="keyword">=</span><span class="default">$to</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];}<br />
&nbsp;&nbsp; &nbsp; if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$from</span><span class="keyword">)!==</span><span class="default">count</span><span class="keyword">(</span><span class="default">$to</span><span class="keyword">)) return </span><span class="default">false</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; foreach(</span><span class="default">$subj </span><span class="keyword">as </span><span class="default">$s</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$from </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$f</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$s</span><span class="keyword">===</span><span class="default">$f</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$s</span><span class="keyword">=</span><span class="default">$to</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; if(</span><span class="default">$s</span><span class="keyword">!==</span><span class="default">$delSymb</span><span class="keyword">) </span><span class="default">$nsubj</span><span class="keyword">.=</span><span class="default">$s</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$nsubj</span><span class="keyword">;<br />
} <br />
<br />
</span><span class="comment">//examples:<br />
<br />
</span><span class="default">$from</span><span class="keyword">=</span><span class="string">"fotber, "</span><span class="keyword">;<br />
</span><span class="default">$to</span><span class="keyword">=</span><span class="string">"berfot+_"</span><span class="keyword">;<br />
<br />
</span><span class="comment">// or<br />
<br />
</span><span class="default">$from</span><span class="keyword">=array(</span><span class="string">"f"</span><span class="keyword">,</span><span class="string">"o"</span><span class="keyword">,</span><span class="string">"t"</span><span class="keyword">,</span><span class="string">"b"</span><span class="keyword">,</span><span class="string">"e"</span><span class="keyword">,</span><span class="string">"r"</span><span class="keyword">,</span><span class="string">","</span><span class="keyword">,</span><span class="string">" "</span><span class="keyword">);<br />
</span><span class="default">$to</span><span class="keyword">=array(</span><span class="string">"b"</span><span class="keyword">,</span><span class="string">"e"</span><span class="keyword">,</span><span class="string">"r"</span><span class="keyword">,</span><span class="string">"f"</span><span class="keyword">,</span><span class="string">"o"</span><span class="keyword">,</span><span class="string">"t"</span><span class="keyword">,</span><span class="string">"+"</span><span class="keyword">,</span><span class="string">"_"</span><span class="keyword">);<br />
<br />
</span><span class="comment">//out:<br />
</span><span class="keyword">echo </span><span class="default">mb_chars_replace</span><span class="keyword">(</span><span class="default">$from</span><span class="keyword">,</span><span class="default">$to</span><span class="keyword">,</span><span class="string">"foot, beer"</span><span class="keyword">); </span><span class="comment">//beer+foot<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119793""></a>
  <div class="note">
   <strong class="user">viundan at gmail dot com</strong>
   <a href="#119793" class="date">26-Aug-2016 04:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Decision to avoid problem "it might replace a previously inserted value when doing multiple replacements. See also the examples in this document." <br />
<br />
$urls - array of urls i want to replace with tag &lt;a&gt; and urls could be similar<br />
<a href="http://abc.com/parameter/" rel="nofollow" target="_blank">http://abc.com/parameter/</a><br />
<a href="http://abc.com/" rel="nofollow" target="_blank">http://abc.com/</a><br />
<br />
// at first sort by length to have longest firstly<br />
usort($urls,'sortByLen');<br />
<br />
$replaces=[];<br />
<br />
// replace all urls with unique<br />
foreach($urls as $url){<br />
&nbsp;&nbsp;&nbsp; $replace = '__REPLACE' . uniqid() . '__';&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; $text = str_replace($url,$replace, $text);<br />
&nbsp;&nbsp;&nbsp; $replaces[$replace] = '&lt;a href="' . $url . '"&gt;' . $url . '&lt;/a&gt;';<br />
}<br />
<br />
foreach($replaces as $key =&gt; $replace){<br />
&nbsp;&nbsp;&nbsp; $text = str_replace($key,$replace, $text);<br />
}<br />
<br />
--------------<br />
<br />
function sortByLen($a,$b){<br />
&nbsp;&nbsp;&nbsp; return strlen($b)-strlen($a);<br />
}<br />
<br />
Hope it will help others like me</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119293""></a>
  <div class="note">
   <strong class="user">Mohsin Ali (puregenius02 at gmail dot com)</strong>
   <a href="#119293" class="date">06-May-2016 10:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
$myString = "It was the best of mine it was the worst of mine,";<br />
// Displays "It was the best of bananas, it was the worst of bananas,"<br />
echo str_replace( "mine", "bananas", $myString );<br />
If you want to know how many times the search string was replaced, pass in a variable as an optional<br />
fourth argument. After the function runs, this variable holds the number of replacements:<br />
$myString = "It was the best of mine, it was the worst of mine,";<br />
// Displays "It was the best of bananas, it was the worst of bananas,"<br />
echo str_replace( "mine", "bananas", $myString, $num ) . " &lt; br/ &gt; ";<br />
// Displays "The text was replaced 2 times."<br />
echo "The text was replaced $num times. &lt; br/ &gt; ";</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118785""></a>
  <div class="note">
   <strong class="user">David Holt</strong>
   <a href="#118785" class="date">05-Feb-2016 02:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be aware that if you use this for filtering &amp; sanitizing some form of user input, or remove ALL instances of a string, there's another gotcha to watch out for:<br />
<br />
// Remove all double characters<br />
$string="1001011010";<br />
$string=str_replace(array("11","00"),"",$string);<br />
// Output: "110010"<br />
<br />
$string="&lt;ht&lt;html&gt;ml&gt; Malicious code &lt;/&lt;html&gt;html&gt; etc";<br />
$string=str_replace(array("&lt;html&gt;","&lt;/html&gt;"),"",$string);<br />
// Output: "&lt;html&gt; Malicious code &lt;/html&gt; etc"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117026""></a>
  <div class="note">
   <strong class="user">mrrehbein at gmail dot com</strong>
   <a href="#117026" class="date">03-Apr-2015 01:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
nikolaz dot tang at hotmail dot com's solution of using json_encode/decode is interesting, but a couple of issues to be aware of with it.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// From: nikolaz dot tang at hotmail dot com's post<br />
</span><span class="keyword">function </span><span class="default">str_replace_json</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; return </span><span class="default">json_decode</span><span class="keyword">(</span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">,&nbsp; </span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">)));<br />
}<br />
</span><span class="default">?&gt;</span> <br />
<br />
json_decode will return objects, where arrays are probably expected.&nbsp; This is easily remedied by adding 2nd parameter 'true' to json_decode.<br />
<br />
$search and $replace could contain strings that match json encoding, which will either change the structure returned by this method, or break the json.<br />
<br />
ie:<br />
<span class="default">&lt;?php<br />
var_dump</span><span class="keyword">(</span><span class="default">str_replace_json</span><span class="keyword">(</span><span class="string">'":"'</span><span class="keyword">, </span><span class="string">'","'</span><span class="keyword">, [</span><span class="string">'this' </span><span class="keyword">=&gt; </span><span class="string">'stuff'</span><span class="keyword">]));<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">str_replace_json</span><span class="keyword">(</span><span class="string">'this":"'</span><span class="keyword">, </span><span class="string">'this" : "thing", "with":"'</span><span class="keyword">, [</span><span class="string">'this' </span><span class="keyword">=&gt; </span><span class="string">'stuff'</span><span class="keyword">]));<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116797""></a>
  <div class="note">
   <strong class="user">borasahin at gmail dot com</strong>
   <a href="#116797" class="date">02-Mar-2015 08:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
jSON Turkish Characters Problem - (PHP &lt; 5.4 for example)<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">json_decode_tr</span><span class="keyword">(</span><span class="default">$json</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$json_char </span><span class="keyword">= array(</span><span class="string">"u00e7"</span><span class="keyword">,</span><span class="string">"u0131"</span><span class="keyword">,</span><span class="string">"u00fc"</span><span class="keyword">,</span><span class="string">"u011f"</span><span class="keyword">,</span><span class="string">"u00f6"</span><span class="keyword">,</span><span class="string">"u015f"</span><span class="keyword">,</span><span class="string">"u0130"</span><span class="keyword">,</span><span class="string">"u011e"</span><span class="keyword">,</span><span class="string">"u00dc"</span><span class="keyword">,</span><span class="string">"u00d6"</span><span class="keyword">,</span><span class="string">"u015e"</span><span class="keyword">,</span><span class="string">"u00c7"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$turkish </span><span class="keyword">= array(</span><span class="string">"?"</span><span class="keyword">,</span><span class="string">"?"</span><span class="keyword">,</span><span class="string">"ü"</span><span class="keyword">,</span><span class="string">"?"</span><span class="keyword">,</span><span class="string">"?"</span><span class="keyword">,</span><span class="string">"?"</span><span class="keyword">,</span><span class="string">"?"</span><span class="keyword">,</span><span class="string">"?"</span><span class="keyword">,</span><span class="string">"ü"</span><span class="keyword">,</span><span class="string">"?"</span><span class="keyword">,</span><span class="string">"?"</span><span class="keyword">,</span><span class="string">"?"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$json_char</span><span class="keyword">, </span><span class="default">$turkish</span><span class="keyword">, </span><span class="default">$json</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; return </span><span class="default">json_decode</span><span class="keyword">(</span><span class="default">$json</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115946""></a>
  <div class="note">
   <strong class="user">karst at onlinq dot nl</strong>
   <a href="#115946" class="date">17-Oct-2014 01:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
"If search is an array and replace is a string, then this replacement string is used for every value of search. The converse would not make sense, though. "<br />
<br />
I think one important (and not at all vaguely theoretical) use-case is completely ignored here. Take, for example, the way the PDO handles parameter replacement.<br />
<br />
If we have the following query:<br />
"SELECT * FROM my_table WHERE (id = ? AND my_column = ? AND other_column = ?);"<br />
The "?"s should be replaced by each successive variable in a $parameters array. That is EXACTLY the use case for "search" being a value and "replace" being an array. <br />
<br />
Considering that this is not only a real-world example but also part of a core PHP functionality I find it very strange that it's dismissed so easily here.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115660""></a>
  <div class="note">
   <strong class="user">Ing. Mirko Plazotta</strong>
   <a href="#115660" class="date">04-Sep-2014 09:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">// a very beatiful way to do multiple replacements is this one, using just one array<br />
</span><span class="default">$replaceThis </span><span class="keyword">= Array(<br />
</span><span class="string">'old word' </span><span class="keyword">=&gt; </span><span class="string">'new word'</span><span class="keyword">,<br />
</span><span class="string">'was' </span><span class="keyword">=&gt; </span><span class="string">'it'</span><span class="keyword">,<br />
</span><span class="string">'past' </span><span class="keyword">=&gt; </span><span class="string">'future'</span><span class="keyword">,<br />
);<br />
<br />
</span><span class="default">$originalText </span><span class="keyword">= </span><span class="string">"every old word was a thing of the past..."</span><span class="keyword">;<br />
</span><span class="default">$replacedText </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$replaceThis</span><span class="keyword">), </span><span class="default">$replaceThis</span><span class="keyword">, </span><span class="default">$originalText</span><span class="keyword">);<br />
echo </span><span class="default">$replacedText</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115625""></a>
  <div class="note">
   <strong class="user">markem at sim1 dot us</strong>
   <a href="#115625" class="date">27-Aug-2014 08:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was working with MySQL and displaying the title to things on the web page.&nbsp; I'd written a script to ensure single and double quotes were removed from the title.&nbsp; I used<br />
<br />
&nbsp;&nbsp;&nbsp; $title = str_replace( "'", "", $title );<br />
<br />
and<br />
<br />
&nbsp;&nbsp; &nbsp; $title = str_replace( '"', "", $title );<br />
<br />
But still the single and double quotes continued.&nbsp; So I wrote a bit of code to print out each character separated by a dash.&nbsp; Like so:<br />
<br />
&nbsp;&nbsp; &nbsp; for( $i=0; $i&lt;strlen($title); $i++ ){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; echo "$i-";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; echo "&lt;br&gt;\n";<br />
<br />
This displayed:<br />
<br />
&nbsp;&nbsp; &nbsp; m-y-c-o-m-p-a-n-y- b-b-&amp;-#-3-9-;-s<br />
<br />
Which made me go "Oh!&nbsp; I get it."<br />
<br />
The MySQL function real_escape_string modifies the single quotes to be &amp;#39; and double quotes as &amp;#34;&nbsp; These still show up as single and double quotes under HTML and most importantly - <br />
<br />
&nbsp;&nbsp; &nbsp; JAVASCRIPT sees the &amp;#34; and &amp;#39; as actual single or double<br />
&nbsp;&nbsp; &nbsp; quotes.&nbsp; So if you are passing arguments to a function you have<br />
&nbsp;&nbsp; &nbsp; to get rid of them or else you will get an error on trying to call<br />
&nbsp;&nbsp; &nbsp; a given function.&nbsp; Example:<br />
<br />
&nbsp;&nbsp; &nbsp; &lt;a href="javascript:func1('mycompany bbs&amp;#39;s")'"&gt;<br />
<br />
&nbsp;&nbsp; &nbsp; becomes<br />
<br />
&nbsp;&nbsp; &nbsp; &lt;a href="javascript:func1('mycompany bbs's');"&gt;<br />
<br />
Which then will give you an error because there is a single quote inside of the single quoted string.&nbsp; HOWEVER, the<br />
<br />
&nbsp;&nbsp; &nbsp; $title = str_replace( "'", "", $title );<br />
<br />
WILL NOT FIND a single quote.&nbsp; Instead, you have to do this:<br />
<br />
&nbsp;&nbsp; &nbsp; $title = str_replace( "&amp;#39;", "'", $title );<br />
and<br />
&nbsp;&nbsp; &nbsp; $title = str_relace( "&amp;#34;", '"', $title );<br />
<br />
(Or you could just get rid of them.)<br />
<br />
So remember!&nbsp; If you are trying to remove single and double quotes and are using MySQL and MySQL's real_escape_string() function that you might be having single and double quotes hanging around which are defined as &amp;#39; and &amp;#34; but which show up as single and double quotes as well as causing problems in your Javascripts.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112749""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#112749" class="date">19-Jul-2013 10:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
@moostende at gmail dot com<br />
If you want to remove all dashes but one from the string '-aaa----b-c-----d--e---f' resulting in '-aaa-b-c-d-e-f', you CAN use str_replace !<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">foo</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; do {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"--"</span><span class="keyword">, </span><span class="string">"-"</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">, </span><span class="default">$count</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; } while (</span><span class="default">$count </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$str</span><span class="keyword">;<br />
}<br />
echo </span><span class="default">foo</span><span class="keyword">(</span><span class="string">"-aaa----b-c-----d--e---f"</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
This outputs the following: <br />
-aaa-b-c-d-e-f</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109487""></a>
  <div class="note">
   <strong class="user">kriscraig at php dot net</strong>
   <a href="#109487" class="date">20-Jul-2012 11:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php
<br />

<br />
</span><span class="comment">/**
<br />
&nbsp;* Convert foreign 8859-1 characters into HTML entities.
<br />
&nbsp;* 
<br />
&nbsp;* @param string $str
<br />
&nbsp;*&nbsp;&nbsp; The string being parsed.
<br />
&nbsp;* 
<br />
&nbsp;* @return string
<br />
&nbsp;*&nbsp;&nbsp; The converted string.
<br />
&nbsp;*/
<br />
</span><span class="keyword">public static function </span><span class="default">convert_chars_to_entities</span><span class="keyword">( </span><span class="default">$str </span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'à'</span><span class="keyword">, </span><span class="string">'&amp;#192;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'á'</span><span class="keyword">, </span><span class="string">'&amp;#193;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'&amp;#194;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'&amp;#195;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'&amp;#196;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'&amp;#197;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'&amp;#198;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'&amp;#199;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'è'</span><span class="keyword">, </span><span class="string">'&amp;#200;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'é'</span><span class="keyword">, </span><span class="string">'&amp;#201;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ê'</span><span class="keyword">, </span><span class="string">'&amp;#202;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'&amp;#203;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ì'</span><span class="keyword">, </span><span class="string">'&amp;#204;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'í'</span><span class="keyword">, </span><span class="string">'&amp;#205;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'&amp;#206;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'&amp;#207;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'&amp;#208;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'&amp;#209;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ò'</span><span class="keyword">, </span><span class="string">'&amp;#210;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ó'</span><span class="keyword">, </span><span class="string">'&amp;#211;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'&amp;#212;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'&amp;#213;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'&amp;#214;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'×'</span><span class="keyword">, </span><span class="string">'&amp;#215;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);&nbsp; </span><span class="comment">// Yeah, I know.&nbsp; But otherwise the gap is confusing.&nbsp; --Kris
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'&amp;#216;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ù'</span><span class="keyword">, </span><span class="string">'&amp;#217;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ú'</span><span class="keyword">, </span><span class="string">'&amp;#218;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'&amp;#219;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ü'</span><span class="keyword">, </span><span class="string">'&amp;#220;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Y'</span><span class="keyword">, </span><span class="string">'&amp;#221;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'T'</span><span class="keyword">, </span><span class="string">'&amp;#222;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'&amp;#223;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'à'</span><span class="keyword">, </span><span class="string">'&amp;#224;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'á'</span><span class="keyword">, </span><span class="string">'&amp;#225;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'&amp;#226;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'&amp;#227;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'&amp;#228;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'&amp;#229;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'&amp;#230;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'&amp;#231;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'è'</span><span class="keyword">, </span><span class="string">'&amp;#232;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'é'</span><span class="keyword">, </span><span class="string">'&amp;#233;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ê'</span><span class="keyword">, </span><span class="string">'&amp;#234;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'&amp;#235;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ì'</span><span class="keyword">, </span><span class="string">'&amp;#236;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'í'</span><span class="keyword">, </span><span class="string">'&amp;#237;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'&amp;#238;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'&amp;#239;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'&amp;#240;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'&amp;#241;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ò'</span><span class="keyword">, </span><span class="string">'&amp;#242;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ó'</span><span class="keyword">, </span><span class="string">'&amp;#243;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'&amp;#244;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'&amp;#245;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'&amp;#246;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'÷'</span><span class="keyword">, </span><span class="string">'&amp;#247;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);&nbsp; </span><span class="comment">// Yeah, I know.&nbsp; But otherwise the gap is confusing.&nbsp; --Kris
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'&amp;#248;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ù'</span><span class="keyword">, </span><span class="string">'&amp;#249;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ú'</span><span class="keyword">, </span><span class="string">'&amp;#250;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'&amp;#251;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ü'</span><span class="keyword">, </span><span class="string">'&amp;#252;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'y'</span><span class="keyword">, </span><span class="string">'&amp;#253;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'t'</span><span class="keyword">, </span><span class="string">'&amp;#254;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'&amp;#255;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$str</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108430""></a>
  <div class="note">
   <strong class="user">christof dot rieger at r-tron dot de</strong>
   <a href="#108430" class="date">25-Apr-2012 08:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In many countries the numeric format is 1.000,33 in english it is 1,000.33<br />
<br />
This function converts numeric arguments always into the PHP confirm numeric format. If only one seperator is into the numericstring so it is interpreted as the decimalpoint.<br />
<br />
&nbsp;function dp($zahl)<br />
{<br />
&nbsp; if ((strpos($zahl,".") &gt; "-1") | (strpos($zahl,",") &gt; "-1")) {<br />
&nbsp;&nbsp;&nbsp; if ((strpos($zahl,".") &gt; "-1") &amp; (strpos($zahl,",") &gt; "-1")) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (strpos($zahl,".") &gt; strpos($zahl,",")){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return str_replace(",","",$zahl);<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return str_replace(",",".",str_replace(".","",$zahl));<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (strpos($zahl,".") &gt; "-1") {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (strpos($zahl,".") == strrpos($zahl,".")) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return $zahl;<br />
&nbsp;&nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return str_replace(".","",$zahl);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (strpos($zahl,",") == strrpos($zahl,",")) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return str_replace(",",".",$zahl);<br />
&nbsp;&nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return str_replace(",","",$zahl);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; } }<br />
} else {<br />
&nbsp;&nbsp;&nbsp; return $zahl;<br />
} }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108196""></a>
  <div class="note">
   <strong class="user">Denzel Morris</strong>
   <a href="#108196" class="date">06-Apr-2012 02:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Maybe obvious to veteran PHP programmers but less so to novice PHP programmers is the fact that this is invalid:<br />
<span class="default">&lt;?php<br />
str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>At a glance it appears to be a reasonable request, until you realize that the fourth parameter must be a variable in order to be passed as a reference. A replacement:<br />
<span class="default">&lt;?php<br />
str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$temp </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">);<br />
</span><span class="comment">// or<br />
</span><span class="default">$temp </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
</span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$temp</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108134""></a>
  <div class="note">
   <strong class="user">cc at cc dot com</strong>
   <a href="#108134" class="date">31-Mar-2012 05:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I found a pretty low tech solution to avoid the "gotcha" without worrying about the array order of how things are replaced. I could not "order" the replacement array easily because it was being read from a database table.<br />
<br />
Anyway if you add an identifiable token to each replaced word, then just filter this out at the very end, no nested search terms are found. I just dynamically add the %% after the first char of each word before pumping it into the str_ireplace function.<br />
<br />
$find = array("as1", "as2", "as3", "flex");<br />
$replace = array("&lt;a href = \"#as1\"&gt;A%%uto S%%entry R%%ev. A%%&lt;/a&gt;", "&lt;a href = \"#as2\"&gt;A%%uto S%%entry E%%xp&lt;/a&gt;", "&lt;a href = \"#as3\"&gt;A%%uto S%%entry f%%lex&lt;/a&gt;", "&lt;a style = \"color: red;\" href = \"#flex\"&gt;f%%lex&lt;/a&gt;");<br />
$text = str_ireplace($find, $replace, $text);<br />
echo str_ireplace("%%", "", $text);<br />
<br />
In this case I am using %% as my token as this is an unlikely char combo for me.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105939""></a>
  <div class="note">
   <strong class="user">moostende at gmail dot com</strong>
   <a href="#105939" class="date">26-Sep-2011 11:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that this does not replace strings that become part of replacement strings. This may be a problem when you want to remove multiple instances of the same repetative pattern, several times in a row.
<br />

<br />
If you want to remove all dashes but one from the string '-aaa----b-c-----d--e---f' resulting in '-aaa-b-c-d-e-f', you cannot use str_replace. Instead, use preg_replace:
<br />

<br />
<span class="default">&lt;?php
<br />
$challenge </span><span class="keyword">= </span><span class="string">'-aaa----b-c-----d--e---f'</span><span class="keyword">;
<br />
echo </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'--'</span><span class="keyword">, </span><span class="string">'-'</span><span class="keyword">, </span><span class="default">$challenge</span><span class="keyword">).</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;
<br />
echo </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/--+/'</span><span class="keyword">, </span><span class="string">'-'</span><span class="keyword">, </span><span class="default">$challenge</span><span class="keyword">).</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
This outputs the following:
<br />
-aaa--b-c---d-e--f
<br />
-aaa-b-c-d-e-f</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104890""></a>
  <div class="note">
   <strong class="user">mbullard at accuvista dot co dot uk</strong>
   <a href="#104890" class="date">14-Jul-2011 02:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Insert space after comma.<br />
<br />
If you have a form that stores results in a database field as comma separated values, when you display this data you can use the following to insert a space after each comma:<br />
<br />
<span class="default">&lt;?php<br />
$find</span><span class="keyword">[] = </span><span class="string">','</span><span class="keyword">;<br />
</span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">'&amp;#44;&amp;nbsp;'</span><span class="keyword">;<br />
</span><span class="default">$text </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$find</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$row_rsRecordset</span><span class="keyword">[</span><span class="string">'Field'</span><span class="keyword">]);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Notes:<br />
1) To get round the Replacement Order Gotcha, the comma is also replaced with its code equivalent: &amp;#44;<br />
2) You can adapt the $replace section to suit your needs: swap out the &amp;nbsp; code with &lt;br/&gt; or replace comma and space with &amp;nbsp;&amp;middot;&amp;nbsp; etc.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102465""></a>
  <div class="note">
   <strong class="user">jay_knows_(all)uk at hotmail dot com</strong>
   <a href="#102465" class="date">16-Feb-2011 07:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This strips out horrible MS word characters. <br />
<br />
Just keep fine tuning it until you get what you need, you'll see ive commented some out which caused problems for me.<br />
<br />
There could be some that need adding in, but its a start to anyone who wishes to make their own custom function.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">msword_conversion</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) <br />
{ <br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">130</span><span class="keyword">), </span><span class="string">','</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// baseline single quote<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">131</span><span class="keyword">), </span><span class="string">'NLG'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; </span><span class="comment">// florin<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">132</span><span class="keyword">), </span><span class="string">'"'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// baseline double quote<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">133</span><span class="keyword">), </span><span class="string">'...'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; </span><span class="comment">// ellipsis<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">134</span><span class="keyword">), </span><span class="string">'**'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp;&nbsp; </span><span class="comment">// dagger (a second footnote)<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">135</span><span class="keyword">), </span><span class="string">'***'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; </span><span class="comment">// double dagger (a third footnote)<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">136</span><span class="keyword">), </span><span class="string">'^'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// circumflex accent<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">137</span><span class="keyword">), </span><span class="string">'o/oo'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">); </span><span class="comment">// permile<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">138</span><span class="keyword">), </span><span class="string">'Sh'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp;&nbsp; </span><span class="comment">// S Hacek<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">139</span><span class="keyword">), </span><span class="string">'&lt;'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// left single guillemet<br />
// $str = str_replace(chr(140), 'OE', $str);&nbsp;&nbsp; // OE ligature<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">145</span><span class="keyword">), </span><span class="string">"'"</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// left single quote<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">146</span><span class="keyword">), </span><span class="string">"'"</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// right single quote<br />
// $str = str_replace(chr(147), '"', $str);&nbsp; &nbsp; // left double quote<br />
// $str = str_replace(chr(148), '"', $str);&nbsp; &nbsp; // right double quote<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">149</span><span class="keyword">), </span><span class="string">'-'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// bullet<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">150</span><span class="keyword">), </span><span class="string">'--'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// endash<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">151</span><span class="keyword">), </span><span class="string">'--'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp;&nbsp; </span><span class="comment">// emdash<br />
// $str = str_replace(chr(152), '~', $str);&nbsp; &nbsp; // tilde accent<br />
// $str = str_replace(chr(153), '(TM)', $str); // trademark ligature<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">154</span><span class="keyword">), </span><span class="string">'sh'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp;&nbsp; </span><span class="comment">// s Hacek<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">155</span><span class="keyword">), </span><span class="string">'&gt;'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// right single guillemet<br />
// $str = str_replace(chr(156), 'oe', $str);&nbsp;&nbsp; // oe ligature<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">159</span><span class="keyword">), </span><span class="string">'Y'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// Y Dieresis<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'°C'</span><span class="keyword">, </span><span class="string">'&amp;deg;C'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// Celcius is used quite a lot so it makes sense to add this in<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'￡'</span><span class="keyword">, </span><span class="string">'&amp;pound;'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">); <br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"'"</span><span class="keyword">, </span><span class="string">"'"</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'"'</span><span class="keyword">, </span><span class="string">'"'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'-'</span><span class="keyword">, </span><span class="string">'&amp;ndash;'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />
<br />
return </span><span class="default">$str</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100871""></a>
  <div class="note">
   <strong class="user">nikolaz dot tang at hotmail dot com</strong>
   <a href="#100871" class="date">11-Nov-2010 08:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A faster way to replace the strings in multidimensional array is to json_encode() it, do the str_replace() and then json_decode() it, like this:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">str_replace_json</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; return </span><span class="default">json_decode</span><span class="keyword">(</span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">,&nbsp; </span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">)));
<br />

<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
This method is almost 3x faster (in 10000 runs.) than using recursive calling and looping method, and 10x simpler in coding.
<br />

<br />
Compared to:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">str_replace_deep</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">))
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$subject </span><span class="keyword">as &amp;</span><span class="default">$oneSubject</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$oneSubject </span><span class="keyword">= </span><span class="default">str_replace_deep</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$oneSubject</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$oneSubject</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$subject</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98511""></a>
  <div class="note">
   <strong class="user">apmuthu at usa dot net</strong>
   <a href="#98511" class="date">19-Jun-2010 12:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If we have a html template that contains placeholders in curly braces that need to be replaced in runtime, the following function will do it using str_replace:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">parse_template</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">) {<br />
</span><span class="comment">// example template variables {a} and {bc}<br />
// example $data array<br />
// $data = Array("a" =&gt; 'one', "bc" =&gt; 'two');<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$q </span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$data </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$q </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'{'</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">.</span><span class="string">'}'</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">, </span><span class="default">$q</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$q</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97904""></a>
  <div class="note">
   <strong class="user">christian dot reinecke at web dot de</strong>
   <a href="#97904" class="date">14-May-2010 12:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need to replace a string in another, but only once but still in all possible combinations (f.e. to replace "a" with "x" in "aba" to get array("xba", "abx")) you can use this function:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">getSingleReplaceCombinations</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$with</span><span class="keyword">, </span><span class="default">$inHaystack</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$splits </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$inHaystack</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">, </span><span class="default">$ix </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$splits</span><span class="keyword">); </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$ix</span><span class="keyword">; ++</span><span class="default">$i</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$previous </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$splits</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$next&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$splits</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$combine&nbsp; </span><span class="keyword">= </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$previous</span><span class="keyword">) . </span><span class="default">$with </span><span class="keyword">. </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$next</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[] = </span><span class="default">implode</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">, </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$previous</span><span class="keyword">, array(</span><span class="default">$combine</span><span class="keyword">), </span><span class="default">$next</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
}<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">getSingleReplaceCombinations</span><span class="keyword">(</span><span class="string">"a"</span><span class="keyword">, </span><span class="string">"x"</span><span class="keyword">, </span><span class="string">"aba"</span><span class="keyword">)); </span><span class="comment">// result as mentioned above<br />
</span><span class="default">?&gt;<br />
</span>It may not be the best in performance, but it works.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97574""></a>
  <div class="note">
   <strong class="user">jbarnett at jmbelite dot com</strong>
   <a href="#97574" class="date">26-Apr-2010 01:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Might be worth mentioning that a SIMPLE way to accomplish Example 2 (potential gotchas) is to simply start your "replacements" in reverse.
<br />

<br />
So instead of starting from "A" and ending with "E":
<br />

<br />
<span class="default">&lt;?php
<br />
$search&nbsp; </span><span class="keyword">= array(</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">);
<br />
</span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'F'</span><span class="keyword">);
<br />
</span><span class="comment">// replaces A to B, B to C, C to D, D to E, E to F (makes them all F)
<br />
// start from "E" and end with "A":
<br />

<br />
</span><span class="default">$search&nbsp; </span><span class="keyword">= array(</span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">);
<br />
</span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">'F'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'B'</span><span class="keyword">);
<br />
</span><span class="comment">// replaces E to F, D to E, C to D, B to C, A to B (prevents from
<br />
// multiple replacements of already replaced values)
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
So basically start from the "end" and put the replacements in an order where the "replaced value" won't equal a value that exists later in the "search array".</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97526""></a>
  <div class="note">
   <strong class="user">pjcdawkins at googlemail dot com</strong>
   <a href="#97526" class="date">23-Apr-2010 05:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a deep replace function allowing multi-dimensional arrays in $search, $replace and $subject. The keys and other structure of $subject are preserved.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Auxiliary function:<br />
</span><span class="keyword">function </span><span class="default">_replaceWithAnything</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">,</span><span class="default">$replace</span><span class="keyword">,</span><span class="default">$subject</span><span class="keyword">){<br />
&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">) || !</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">)){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$search</span><span class="keyword">=array(</span><span class="default">$search</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$replace</span><span class="keyword">=array(</span><span class="default">$replace</span><span class="keyword">);<br />
&nbsp; }<br />
&nbsp; </span><span class="default">$match</span><span class="keyword">=</span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">,</span><span class="default">$search</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">);<br />
&nbsp; if(</span><span class="default">$match</span><span class="keyword">!==</span><span class="default">false </span><span class="keyword">&amp;&amp; </span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$match</span><span class="keyword">,</span><span class="default">$replace</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$subject</span><span class="keyword">=</span><span class="default">$replace</span><span class="keyword">[</span><span class="default">$match</span><span class="keyword">];<br />
&nbsp; return </span><span class="default">$subject</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// Main function:<br />
</span><span class="keyword">function </span><span class="default">deepReplace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">,</span><span class="default">$replace</span><span class="keyword">,</span><span class="default">$subject</span><span class="keyword">){<br />
&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">_replaceWithAnything</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">,</span><span class="default">$replace</span><span class="keyword">,</span><span class="default">$subject</span><span class="keyword">);<br />
&nbsp; foreach(</span><span class="default">$subject </span><span class="keyword">as &amp;</span><span class="default">$val</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$val</span><span class="keyword">=</span><span class="default">deepReplace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">,</span><span class="default">$replace</span><span class="keyword">,</span><span class="default">$val</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; continue;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$val</span><span class="keyword">=</span><span class="default">_replaceWithAnything</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">,</span><span class="default">$replace</span><span class="keyword">,</span><span class="default">$val</span><span class="keyword">);<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$subject</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95198""></a>
  <div class="note">
   <strong class="user">Wes Foster</strong>
   <a href="#95198" class="date">17-Dec-2009 01:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Feel free to optimize this using the while/for or anything else, but this is a bit of code that allows you to replace strings found in an associative array.
<br />

<br />
For example:
<br />
<span class="default">&lt;?php
<br />
$replace </span><span class="keyword">= array(
<br />
</span><span class="string">'dog' </span><span class="keyword">=&gt; </span><span class="string">'cat'</span><span class="keyword">,
<br />
</span><span class="string">'apple' </span><span class="keyword">=&gt; </span><span class="string">'orange'
<br />
'chevy' </span><span class="keyword">=&gt; </span><span class="string">'ford'
<br />
</span><span class="keyword">);
<br />

<br />
</span><span class="default">$string </span><span class="keyword">= </span><span class="string">'I like to eat an apple with my dog in my chevy'</span><span class="keyword">;
<br />

<br />
echo </span><span class="default">str_replace_assoc</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">,</span><span class="default">$string</span><span class="keyword">);
<br />

<br />
</span><span class="comment">// Echo: I like to eat an orange with my cat in my ford
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Here is the function:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">strReplaceAssoc</span><span class="keyword">(array </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">) {
<br />
&nbsp;&nbsp; return </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">), </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">), </span><span class="default">$subject</span><span class="keyword">);&nbsp; &nbsp; 
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
[Jun 1st, 2010 - EDIT BY thiago AT php DOT net: Function has been replaced with an updated version sent by ljelinek AT gmail DOT com]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91536""></a>
  <div class="note">
   <strong class="user">Alberto Lepe</strong>
   <a href="#91536" class="date">15-Jun-2009 07:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be careful when replacing characters (or repeated patterns in the FROM and TO arrays):
<br />

<br />
For example:
<br />

<br />
<span class="default">&lt;?php
<br />
$arrFrom </span><span class="keyword">= array(</span><span class="string">"1"</span><span class="keyword">,</span><span class="string">"2"</span><span class="keyword">,</span><span class="string">"3"</span><span class="keyword">,</span><span class="string">"B"</span><span class="keyword">);
<br />
</span><span class="default">$arrTo </span><span class="keyword">= array(</span><span class="string">"A"</span><span class="keyword">,</span><span class="string">"B"</span><span class="keyword">,</span><span class="string">"C"</span><span class="keyword">,</span><span class="string">"D"</span><span class="keyword">);
<br />
</span><span class="default">$word </span><span class="keyword">= </span><span class="string">"ZBB2"</span><span class="keyword">;
<br />
echo </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$arrFrom</span><span class="keyword">, </span><span class="default">$arrTo</span><span class="keyword">, </span><span class="default">$word</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
I would expect as result: "ZDDB"
<br />
However, this return: "ZDDD"
<br />
(Because B = D according to our array)
<br />

<br />
To make this work, use "strtr" instead:
<br />

<br />
<span class="default">&lt;?php
<br />
$arr </span><span class="keyword">= array(</span><span class="string">"1" </span><span class="keyword">=&gt; </span><span class="string">"A"</span><span class="keyword">,</span><span class="string">"2" </span><span class="keyword">=&gt; </span><span class="string">"B"</span><span class="keyword">,</span><span class="string">"3" </span><span class="keyword">=&gt; </span><span class="string">"C"</span><span class="keyword">,</span><span class="string">"B" </span><span class="keyword">=&gt; </span><span class="string">"D"</span><span class="keyword">);
<br />
</span><span class="default">$word </span><span class="keyword">= </span><span class="string">"ZBB2"</span><span class="keyword">;
<br />
echo </span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">,</span><span class="default">$arr</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
This returns: "ZDDB"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88569""></a>
  <div class="note">
   <strong class="user">michael dot moussa at gmail dot com</strong>
   <a href="#88569" class="date">29-Jan-2009 06:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As previous commentators mentioned, when $search contains values that occur earlier in $replace, str_replace will factor those previous replacements into the process rather than operating solely on the original string.&nbsp; This may produce unexpected output.<br />
<br />
Example:<br />
<br />
<span class="default">&lt;?php<br />
$search </span><span class="keyword">= array(</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">);<br />
</span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'F'</span><span class="keyword">);<br />
</span><span class="default">$subject </span><span class="keyword">= </span><span class="string">'ABCDE'</span><span class="keyword">;<br />
<br />
echo </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">); </span><span class="comment">// output: 'FFFFFF'<br />
</span><span class="default">?&gt;<br />
</span><br />
In the above code, the $search and $replace should replace each occurrence in the $subject with the next letter in the alphabet.&nbsp; The expected output for this sample is 'BCDEF'; however, the actual output is 'FFFFF'.<br />
<br />
To more clearly illustrate this, consider the following example:<br />
<br />
<span class="default">&lt;?php<br />
$search </span><span class="keyword">= array(</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">);<br />
</span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'F'</span><span class="keyword">);<br />
</span><span class="default">$subject </span><span class="keyword">= </span><span class="string">'A'</span><span class="keyword">;<br />
<br />
echo </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">); </span><span class="comment">// output: 'F'<br />
</span><span class="default">?&gt;<br />
</span><br />
Since 'A' is the only letter in the $search array that appears in $subject, one would expect the result to be 'B'; however, replacement number $n does *not* operate on $subject, it operates on $subject after the previous $n-1 replacements have been completed.<br />
<br />
The following function utilizes array_combine and strtr to produce the expected output, and I believe it is the most efficient way to perform the desired string replacement without prior replacements affecting the final result.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
* When using str_replace(...), values that did not exist in the original string (but were put there by previous<br />
* replacements) will be replaced continuously.&nbsp; This string replacement function is designed replace the values<br />
* in $search with those in $replace while not factoring in prior replacements.&nbsp; Note that this function will<br />
* always look for the longest possible match first and then work its way down to individual characters.<br />
*<br />
* The "o" in "stro_replace" represents "original", indicating that the function operates only on the original string.<br />
*<br />
* @param array $search list of strings or characters that need to be replaced<br />
* @param array $replace list of strings or characters that will replace the corresponding values in $search<br />
* @param string $subject the string on which this operation is being performed<br />
*<br />
* @return string $subject with all substrings in the $search array replaced by the values in the $replace array<br />
*/<br />
</span><span class="keyword">function </span><span class="default">stro_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">strtr</span><span class="keyword">( </span><span class="default">$subject</span><span class="keyword">, </span><span class="default">array_combine</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">) );<br />
}<br />
<br />
</span><span class="default">$search </span><span class="keyword">= array(</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">);<br />
</span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'F'</span><span class="keyword">);<br />
</span><span class="default">$subject </span><span class="keyword">= </span><span class="string">'ABCDE'</span><span class="keyword">;<br />
<br />
echo </span><span class="default">stro_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">); </span><span class="comment">// output: 'BCDEF'<br />
</span><span class="default">?&gt;<br />
</span><br />
Some other examples:<br />
<br />
<span class="default">&lt;?php<br />
$search </span><span class="keyword">= array(</span><span class="string">' '</span><span class="keyword">, </span><span class="string">'&amp;'</span><span class="keyword">);<br />
</span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">'&amp;nbsp;'</span><span class="keyword">, </span><span class="string">'&amp;amp;'</span><span class="keyword">);<br />
</span><span class="default">$subject </span><span class="keyword">= </span><span class="string">'Hello &amp; goodbye!'</span><span class="keyword">;<br />
<br />
</span><span class="comment">// We want to replace the spaces with &amp;nbsp; and the ampersand with &amp;amp;<br />
</span><span class="keyword">echo </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">); </span><span class="comment">// output: "Hello&amp;amp;nbsp&amp;amp;&amp;amp;nbspgoodbye!" - wrong!<br />
<br />
</span><span class="keyword">echo </span><span class="default">stro_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">); </span><span class="comment">// output: "Hello&amp;nbsp;&amp;amp;&amp;nbsp;goodbye!" - correct!<br />
<br />
/*<br />
&nbsp;&nbsp;&nbsp; Note:&nbsp; Run the above code in the CLI or view source on your web browser - the replacement strings for stro_replace are HTML entities which the browser interprets.<br />
*/<br />
</span><span class="default">?&gt;<br />
</span><br />
<span class="default">&lt;?php<br />
$search </span><span class="keyword">= array(</span><span class="string">'ERICA'</span><span class="keyword">, </span><span class="string">'AMERICA'</span><span class="keyword">);<br />
</span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">'JON'</span><span class="keyword">, </span><span class="string">'PHP'</span><span class="keyword">);<br />
</span><span class="default">$subject </span><span class="keyword">= </span><span class="string">'MIKE AND ERICA LIKE AMERICA'</span><span class="keyword">;<br />
<br />
</span><span class="comment">// We want to replace the name "ERICA" with "JON" and the word "AMERICA" with "PHP"<br />
</span><span class="keyword">echo </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">); </span><span class="comment">// output: "MIKE AND JON LIKE AMJON", which is not correct<br />
<br />
</span><span class="keyword">echo </span><span class="default">stro_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">); </span><span class="comment">// output: "MIKE AND JON LIKE PHP", which is correct<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="63783""></a>
  <div class="note">
   <strong class="user">matt wheaton</strong>
   <a href="#63783" class="date">30-Mar-2006 07:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As an effort to remove those Word copy and paste smart quotes, I've found that this works with UTF8 encoded strings (where $text in the following example is UTF8). Also the elipsis and em and en dashes are replaced.<br />
<br />
There is an "invisible" character after the a for the right side double smart quote that doesn't seem to display here. It is chr(157).<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; $find</span><span class="keyword">[] = </span><span class="string">'a?'</span><span class="keyword">;&nbsp; </span><span class="comment">// left side double smart quote<br />
&nbsp; </span><span class="default">$find</span><span class="keyword">[] = </span><span class="string">'a?'</span><span class="keyword">;&nbsp; </span><span class="comment">// right side double smart quote<br />
&nbsp; </span><span class="default">$find</span><span class="keyword">[] = </span><span class="string">'a?'</span><span class="keyword">;&nbsp; </span><span class="comment">// left side single smart quote<br />
&nbsp; </span><span class="default">$find</span><span class="keyword">[] = </span><span class="string">'a&trade;'</span><span class="keyword">;&nbsp; </span><span class="comment">// right side single smart quote<br />
&nbsp; </span><span class="default">$find</span><span class="keyword">[] = </span><span class="string">'a|'</span><span class="keyword">;&nbsp; </span><span class="comment">// elipsis<br />
&nbsp; </span><span class="default">$find</span><span class="keyword">[] = </span><span class="string">'a"'</span><span class="keyword">;&nbsp; </span><span class="comment">// em dash<br />
&nbsp; </span><span class="default">$find</span><span class="keyword">[] = </span><span class="string">'a"'</span><span class="keyword">;&nbsp; </span><span class="comment">// en dash<br />
<br />
&nbsp; </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">'"'</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">'"'</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">"'"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">"'"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">"..."</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">"-"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">"-"</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$find</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

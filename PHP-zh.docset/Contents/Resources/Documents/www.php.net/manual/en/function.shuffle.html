<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>打乱数组</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.rsort.html">? rsort</a></li>
      <li style="float: right;"><a href="function.sizeof.html">sizeof ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.array.html">数组 函数</a></li>
    <li>打乱数组</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.shuffle" class="refentry">
   <div class="refnamediv">
    <h1 class="refname">shuffle</h1>
    <p class="verinfo">(PHP 4, PHP 5, PHP 7)</p><p class="refpurpose"><span class="refname">shuffle</span> &mdash; <span class="dc-title">打乱数组</span></p>

   </div>
 <div class="refsect1 description" id="refsect1-function.shuffle-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>shuffle</strong></span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter reference">&$array</code></span>
   ) : <span class="type">bool</span></div>

    <p class="para rdfs-comment">
     本函数打乱（随机排列单元的顺序）一个数组。
     它使用的是伪随机数产生器，并不适合密码学的场合。
    </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
 <p class="para">
  If two members compare as equal, their relative order in the sorted array is undefined.
 </p>
</p></blockquote>

   </div>

 <div class="refsect1 parameters" id="refsect1-function.shuffle-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">array</code></dt>

     <dd>

      <p class="para">
       待操作的数组。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.shuffle-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   成功时返回 <strong><code>TRUE</code></strong>， 或者在失败时返回 <strong><code>FALSE</code></strong>。
  </p>
 </div>

 <div class="refsect1 changelog" id="refsect1-function.shuffle-changelog">
  <h3 class="title">更新日志</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>版本</th>
       <th>说明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>7.1.0</td>
       <td>
        <a href="migration71.incompatible.html#migration71.incompatible.rand-srand-aliases" class="link">内置的随机数产生算法从 libc rand 函数改成 <a href="http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/emt.html" class="link external" title="Link : http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/emt.html">&raquo;&nbsp;梅森旋转</a>伪随机数生成算法。</a>
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>

 
 <div class="refsect1 examples" id="refsect1-function.shuffle-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-6160">
    <p><strong>Example #1 <span class="function"><strong>shuffle()</strong></span> 例子</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$numbers&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">range</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">20</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">shuffle</span><span style="color: #007700">(</span><span style="color: #0000BB">$numbers</span><span style="color: #007700">);<br />foreach&nbsp;(</span><span style="color: #0000BB">$numbers&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$number</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$number</span><span style="color: #DD0000">&nbsp;"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>

 <div class="refsect1 notes" id="refsect1-function.shuffle-notes">
  <h3 class="title">注释</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">此函数为 <code class="parameter">array</code>
中的元素赋与新的键名。这将删除原有的键名，而不是仅仅将键名重新排序。</span></p></blockquote>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.shuffle-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
        <li class="member"><span class="function"><a href="function.array-rand.html" class="function" rel="rdfs-seeAlso">array_rand()</a> - 从数组中随机取出一个或多个单元</span></li>
    <li class="member"><a href="array.sorting.html" class="link">数组排序函数对比</a></li>
   </ul>
  </p>
 </div>

  </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="121088""></a>
  <div class="note">
   <strong class="user">thomas dot sahlin at invented dot se</strong>
   <a href="#121088" class="date">16-May-2017 08:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a simple one liner for shuffling associative arrays:<br />
<br />
<span class="default">&lt;?php<br />
<br />
uksort</span><span class="keyword">(</span><span class="default">$myArray</span><span class="keyword">, function (</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {return </span><span class="default">mt_rand</span><span class="keyword">(-</span><span class="default">10</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">);});<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117379""></a>
  <div class="note">
   <strong class="user">xzero at elite7hackers dot net</strong>
   <a href="#117379" class="date">30-May-2015 01:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is an function which uses native shuffle() but preserves keys, and their order, so at end, only values are shuffled.<br />
<br />
<span class="default">&lt;?PHP<br />
</span><span class="comment">/**<br />
&nbsp;* Array Quake - Give an array good quake so every value will endup with random given space.<br />
&nbsp;* Keys, and their order are preserved.<br />
&nbsp;* @author xZero &lt;xzero@elite7hackers.net&gt;<br />
&nbsp;* @param array $array<br />
&nbsp;* @return boolean false on failure<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">array_quake</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); </span><span class="comment">// We need this to preserve keys<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$temp </span><span class="keyword">= </span><span class="default">$array</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$temp</span><span class="keyword">); </span><span class="comment">// Array shuffle<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$temp </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$item</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$keys</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]] = </span><span class="default">$item</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// Example<br />
</span><span class="default">$numbers </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'ZERO' </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'ONE' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'TWO' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'THREE' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'FOUR' </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'FIVE' </span><span class="keyword">=&gt; </span><span class="default">5</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'SIX' </span><span class="keyword">=&gt; </span><span class="default">6</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'SEVEN' </span><span class="keyword">=&gt; </span><span class="default">7</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'EIGHT' </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'NINE' </span><span class="keyword">=&gt; </span><span class="default">9<br />
</span><span class="keyword">);<br />
echo </span><span class="string">"\nBefore (original):\n"</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$numbers</span><span class="keyword">);<br />
</span><span class="default">array_quake</span><span class="keyword">(</span><span class="default">$numbers</span><span class="keyword">);<br />
echo </span><span class="string">"\n\nAfter (Array Quake);\n"</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$numbers</span><span class="keyword">);<br />
echo </span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
Result example:<br />
Before (original):<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [ZERO] =&gt; 0<br />
&nbsp;&nbsp;&nbsp; [ONE] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [TWO] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [THREE] =&gt; 3<br />
&nbsp;&nbsp;&nbsp; [FOUR] =&gt; 4<br />
&nbsp;&nbsp;&nbsp; [FIVE] =&gt; 5<br />
&nbsp;&nbsp;&nbsp; [SIX] =&gt; 6<br />
&nbsp;&nbsp;&nbsp; [SEVEN] =&gt; 7<br />
&nbsp;&nbsp;&nbsp; [EIGHT] =&gt; 8<br />
&nbsp;&nbsp;&nbsp; [NINE] =&gt; 9<br />
)<br />
<br />
After (Array Quake);<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [ZERO] =&gt; 4<br />
&nbsp;&nbsp;&nbsp; [ONE] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [TWO] =&gt; 0<br />
&nbsp;&nbsp;&nbsp; [THREE] =&gt; 8<br />
&nbsp;&nbsp;&nbsp; [FOUR] =&gt; 3<br />
&nbsp;&nbsp;&nbsp; [FIVE] =&gt; 6<br />
&nbsp;&nbsp;&nbsp; [SIX] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [SEVEN] =&gt; 7<br />
&nbsp;&nbsp;&nbsp; [EIGHT] =&gt; 5<br />
&nbsp;&nbsp;&nbsp; [NINE] =&gt; 9<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113790""></a>
  <div class="note">
   <strong class="user">peter at removethisplease dot ddcrew dot com</strong>
   <a href="#113790" class="date">02-Dec-2013 01:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This seems to do reasonably well as a shuffle() that preserves index assocation:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">ashuffle </span><span class="keyword">(&amp;</span><span class="default">$arr</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">uasort</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, function (</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">rand</span><span class="keyword">(-</span><span class="default">1</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; });<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Obviously only works if PHP has closures enabled...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105309""></a>
  <div class="note">
   <strong class="user">timtrinidad at gmail dot com</strong>
   <a href="#105309" class="date">08-Aug-2011 12:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It appears that the suhosin extensions &gt;= 0.9.26 that have the suhosin.mt_srand.ignore and suhosin.srand.ignore settings set to "Off" do not affect shuffle().<br />
<br />
In other words, the only way I was able to get pseudo-random and predictable results through shuffle() was to disable the extension.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103161""></a>
  <div class="note">
   <strong class="user">Eric Anderson</strong>
   <a href="#103161" class="date">29-Mar-2011 09:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Copy and paste this script and refresh the page to see the shuffling effect.
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**
<br />
&nbsp;&nbsp;&nbsp; * Shuffles and displays cards in a deck
<br />
&nbsp;&nbsp;&nbsp; * @author:&nbsp; &nbsp;&nbsp; Eric Anderson
<br />
&nbsp;&nbsp;&nbsp; * @filename:&nbsp;&nbsp; deckofcards.php
<br />
&nbsp;&nbsp;&nbsp; */
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; // Create an array of face values
<br />
&nbsp;&nbsp;&nbsp; // and an array of card values
<br />
&nbsp;&nbsp;&nbsp; // then merge them together
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$cards </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(array(</span><span class="string">"J"</span><span class="keyword">, </span><span class="string">"Q"</span><span class="keyword">, </span><span class="string">"K"</span><span class="keyword">, </span><span class="string">"A"</span><span class="keyword">), </span><span class="default">range</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">,</span><span class="default">10</span><span class="keyword">)); </span><span class="comment">// 13 cards
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; // Shuffle the cards
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$cards</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Create an multidimentional array to hold the 4 suits
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$suits </span><span class="keyword">= array(
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Heart' </span><span class="keyword">=&gt; array(), 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Spade' </span><span class="keyword">=&gt; array(), 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Diamond' </span><span class="keyword">=&gt; array(),
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Club' </span><span class="keyword">=&gt; array()
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; );
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Add cards to their respective suits
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$suits</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$j </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$j </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$cards</span><span class="keyword">); </span><span class="default">$j</span><span class="keyword">++)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$suits</span><span class="keyword">[</span><span class="string">'Heart'</span><span class="keyword">][</span><span class="default">$j</span><span class="keyword">] = </span><span class="default">$cards</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">].</span><span class="string">"&lt;span style=color:#FF0000;&gt;&amp;hearts;&lt;/span&gt;"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$suits</span><span class="keyword">[</span><span class="string">'Spade'</span><span class="keyword">][</span><span class="default">$j</span><span class="keyword">] = </span><span class="default">$cards</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">].</span><span class="string">"&amp;spades;"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$suits</span><span class="keyword">[</span><span class="string">'Diamond'</span><span class="keyword">][</span><span class="default">$j</span><span class="keyword">] = </span><span class="default">$cards</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">].</span><span class="string">"&lt;span style=color:#FF0000;&gt;&amp;diams;&lt;/span&gt;"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$suits</span><span class="keyword">[</span><span class="string">'Club'</span><span class="keyword">][</span><span class="default">$j</span><span class="keyword">] = </span><span class="default">$cards</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">].</span><span class="string">"&amp;clubs;"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Create a deck
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$deck </span><span class="keyword">= array();
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Merge the suits into the empty deck array
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$deck </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$deck</span><span class="keyword">, </span><span class="default">$suits</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Display the deck to the screen
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="string">"&lt;p&gt;&lt;b&gt;Deck of cards:&lt;/b&gt;&lt;/p&gt;"</span><span class="keyword">; 
<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$deck </span><span class="keyword">as </span><span class="default">$k1 </span><span class="keyword">=&gt; </span><span class="default">$v1</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Display suit name
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">echo </span><span class="string">"&lt;p&gt;&amp;emsp;</span><span class="default">$k1</span><span class="string">'s&lt;br /&gt;&amp;emsp;{&lt;br /&gt;&amp;emsp;&amp;emsp;"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$acc </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Display card value
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">foreach(</span><span class="default">$v1 </span><span class="keyword">as </span><span class="default">$k2 </span><span class="keyword">=&gt; </span><span class="default">$v2</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"</span><span class="default">$v2</span><span class="string">&amp;nbsp"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$acc</span><span class="keyword">++;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$acc </span><span class="keyword">== </span><span class="default">4</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;br /&gt;&amp;emsp;&amp;emsp;"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$acc </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;br /&gt;&amp;emsp;}&lt;/p&gt;"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99624""></a>
  <div class="note">
   <strong class="user">andjones at gmail dot com</strong>
   <a href="#99624" class="date">26-Aug-2010 09:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Shuffle associative and non-associative array while preserving key, value pairs. Also returns the shuffled array instead of shuffling it in place.
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
</span><span class="keyword">function </span><span class="default">shuffle_assoc</span><span class="keyword">(</span><span class="default">$list</span><span class="keyword">) {
<br />
&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$list</span><span class="keyword">)) return </span><span class="default">$list</span><span class="keyword">;
<br />

<br />
&nbsp; </span><span class="default">$keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$list</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$random </span><span class="keyword">= array();
<br />
&nbsp; foreach (</span><span class="default">$keys </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$random</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$list</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];
<br />

<br />
&nbsp; return </span><span class="default">$random</span><span class="keyword">;
<br />
}
<br />

<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99059""></a>
  <div class="note">
   <strong class="user">ezakto at ezakto dot com</strong>
   <a href="#99059" class="date">24-Jul-2010 11:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a replica of shuffle() but preserving keys (associative and non-associative)<br />
<br />
bool kshuffle&nbsp; (&nbsp; array &amp;$array&nbsp; )<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">kshuffle</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) || empty(</span><span class="default">$array</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$tmp </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp</span><span class="keyword">[] = array(</span><span class="string">'k' </span><span class="keyword">=&gt; </span><span class="default">$key</span><span class="keyword">, </span><span class="string">'v' </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$tmp </span><span class="keyword">as </span><span class="default">$entry</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$entry</span><span class="keyword">[</span><span class="string">'k'</span><span class="keyword">]] = </span><span class="default">$entry</span><span class="keyword">[</span><span class="string">'v'</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$array </span><span class="keyword">= array(</span><span class="string">'first' </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">, </span><span class="string">'second' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'third' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">);<br />
</span><span class="default">kshuffle</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); </span><span class="comment">// [second] =&gt; 1 [first] =&gt; 0 [third] =&gt; 2<br />
<br />
</span><span class="default">$array </span><span class="keyword">= array(</span><span class="string">'first'</span><span class="keyword">, </span><span class="string">'second'</span><span class="keyword">, </span><span class="string">'third'</span><span class="keyword">);<br />
</span><span class="default">kshuffle</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); </span><span class="comment">// [1] =&gt; second [2] =&gt; third [0] =&gt; first<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98742""></a>
  <div class="note">
   <strong class="user">m0gr14 at gmail dot com</strong>
   <a href="#98742" class="date">04-Jul-2010 10:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function shuffles an associative array recursive.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/**<br />
* Shuffles an associative array recursive<br />
* @author Mogria &lt;m0gr14@gmail.com&gt;<br />
* @param array $array<br />
* @return array<br />
*<br />
*/<br />
<br />
</span><span class="keyword">function </span><span class="default">rec_assoc_shuffle</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)<br />
{<br />
&nbsp; </span><span class="default">$ary_keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$ary_values </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp; </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$ary_values</span><span class="keyword">);<br />
&nbsp; foreach(</span><span class="default">$ary_keys </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$ary_values</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]) AND </span><span class="default">$ary_values</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] != </span><span class="default">NULL</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$ary_values</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">rec_assoc_shuffle</span><span class="keyword">(</span><span class="default">$ary_values</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$new</span><span class="keyword">[</span><span class="default">$value</span><span class="keyword">] = </span><span class="default">$ary_values</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$new</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Example of use:<br />
<span class="default">&lt;?php<br />
$array </span><span class="keyword">=<br />
&nbsp;&nbsp;&nbsp; Array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; Array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">2</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">3</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">4</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">2</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">3</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">4</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">5<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">2</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">3</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; Array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">2</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">3</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">4</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">6</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">5</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">2</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">3<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">4</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">5</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">6</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">7<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">);<br />
</span><span class="default">$array </span><span class="keyword">= </span><span class="default">rec_assoc_shuffle</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
echo </span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;<br />
<br />
</span><span class="comment">/*<br />
Returns:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; 6<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 5<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 3<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 3<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; 2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [3] =&gt; 4<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [4] =&gt; 5<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [3] =&gt; 2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [4] =&gt; 4<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; 3<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 3<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; 4<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [3] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 5<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; 3<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [3] =&gt; 6<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [4] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [5] =&gt; 2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [4] =&gt; 2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; 0<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [5] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [6] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [7] =&gt; 4<br />
&nbsp;&nbsp;&nbsp; [8] =&gt; 7<br />
)<br />
<br />
*/<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96956""></a>
  <div class="note">
   <strong class="user">rick at suggestive dot com</strong>
   <a href="#96956" class="date">24-Mar-2010 02:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Many people in SEO need to supply an array and shuffle the results and need the same result each time that page is generated. This is my implementation with a working example:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">seoShuffle</span><span class="keyword">(&amp;</span><span class="default">$items</span><span class="keyword">,</span><span class="default">$string</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">mt_srand</span><span class="keyword">(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">));
<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$items</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">--){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$j </span><span class="keyword">= @</span><span class="default">mt_rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">$items</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$items</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$items</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$items</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">] = </span><span class="default">$tmp</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />

<br />
</span><span class="default">$items </span><span class="keyword">= array(</span><span class="string">'one'</span><span class="keyword">,</span><span class="string">'two'</span><span class="keyword">,</span><span class="string">'three'</span><span class="keyword">,</span><span class="string">'four'</span><span class="keyword">,</span><span class="string">'five'</span><span class="keyword">,</span><span class="string">'six'</span><span class="keyword">);
<br />
</span><span class="default">$string </span><span class="keyword">= </span><span class="string">'whatever'</span><span class="keyword">;
<br />

<br />
echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$items</span><span class="keyword">);
<br />
echo </span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;
<br />

<br />
</span><span class="default">seoShuffle</span><span class="keyword">(</span><span class="default">$items</span><span class="keyword">,</span><span class="default">$string</span><span class="keyword">);
<br />

<br />
echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$items</span><span class="keyword">);
<br />
echo </span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95414""></a>
  <div class="note">
   <strong class="user">tyler at CompLangs dot com</strong>
   <a href="#95414" class="date">01-Jan-2010 06:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a quick function I wrote that generates a random password and uses shuffle() to easily shuffle the order. 
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">public function </span><span class="default">randPass</span><span class="keyword">(</span><span class="default">$upper </span><span class="keyword">= </span><span class="default">3</span><span class="keyword">, </span><span class="default">$lower </span><span class="keyword">= </span><span class="default">3</span><span class="keyword">, </span><span class="default">$numeric </span><span class="keyword">= </span><span class="default">3</span><span class="keyword">, </span><span class="default">$other </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//we need these vars to create a password string
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$passOrder </span><span class="keyword">= Array();
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$passWord </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//generate the contents of the password
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$upper</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$passOrder</span><span class="keyword">[] = </span><span class="default">chr</span><span class="keyword">(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">65</span><span class="keyword">, </span><span class="default">90</span><span class="keyword">));
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$lower</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$passOrder</span><span class="keyword">[] = </span><span class="default">chr</span><span class="keyword">(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">97</span><span class="keyword">, </span><span class="default">122</span><span class="keyword">));
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$numeric</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$passOrder</span><span class="keyword">[] = </span><span class="default">chr</span><span class="keyword">(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">48</span><span class="keyword">, </span><span class="default">57</span><span class="keyword">));
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$other</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$passOrder</span><span class="keyword">[] = </span><span class="default">chr</span><span class="keyword">(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">33</span><span class="keyword">, </span><span class="default">47</span><span class="keyword">));
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//randomize the order of characters
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$passOrder</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//concatenate into a string
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$passOrder </span><span class="keyword">as </span><span class="default">$char</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$passWord </span><span class="keyword">.= </span><span class="default">$char</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//we're done
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$passWord</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94697""></a>
  <div class="note">
   <strong class="user">ahmad at ahmadnassri dot com</strong>
   <a href="#94697" class="date">18-Nov-2009 08:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
shuffle for associative arrays, preserves key=&gt;value pairs.<br />
(Based on (Vladimir Kornea of typetango.com)'s function) <br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">shuffle_assoc</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$keys </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">$new</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
*note: as of PHP 5.2.10, array_rand's resulting array of keys is no longer shuffled, so we use array_keys + shuffle.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93214""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#93214" class="date">28-Aug-2009 09:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed a simple function two shuffle a two dimensional array. Please note the second level arrays must be indexed using integers, for example $myarray[0]["Name"] and not $myarray["One"]["Name"]. Here is the function:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">twodshuffle</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Get array length<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Create a range of indicies<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$indi </span><span class="keyword">= </span><span class="default">range</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">$count</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Randomize indicies array<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$indi</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Initialize new array<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$newarray </span><span class="keyword">= array(</span><span class="default">$count</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Holds current index<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Shuffle multidimensional array<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$indi </span><span class="keyword">as </span><span class="default">$index</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newarray</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$newarray</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Please note it only works on two dimensional arrays. Here is an example:<br />
<br />
<span class="default">&lt;?php<br />
$myarray </span><span class="keyword">= array(</span><span class="string">"Google" </span><span class="keyword">=&gt; array(</span><span class="string">"Name" </span><span class="keyword">=&gt; </span><span class="string">"Google"</span><span class="keyword">, </span><span class="string">"URL" </span><span class="keyword">=&gt; </span><span class="string">"www.google.com"</span><span class="keyword">, </span><span class="string">"Usage" </span><span class="keyword">=&gt; </span><span class="string">"Googling"</span><span class="keyword">), </span><span class="string">"Yahoo" </span><span class="keyword">=&gt; array(</span><span class="string">"Name" </span><span class="keyword">=&gt; </span><span class="string">"Yahoo"</span><span class="keyword">, </span><span class="string">"URL" </span><span class="keyword">=&gt; </span><span class="string">"www.yahoo.com"</span><span class="keyword">, </span><span class="string">"Usage" </span><span class="keyword">=&gt; </span><span class="string">"Yahooing?"</span><span class="keyword">), </span><span class="string">"Ask" </span><span class="keyword">=&gt; array(</span><span class="string">"Name" </span><span class="keyword">=&gt; </span><span class="string">"Ask"</span><span class="keyword">, </span><span class="string">"URL" </span><span class="keyword">=&gt; </span><span class="string">"www.ask.com"</span><span class="keyword">, </span><span class="string">"Usage" </span><span class="keyword">=&gt; </span><span class="string">"Asking Jeeves"</span><span class="keyword">));<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">twodshuffle</span><span class="keyword">(</span><span class="default">$myarray</span><span class="keyword">));<br />
<br />
</span><span class="comment">/* And the result is:<br />
Array ( [0] =&gt; Array ( [Name] =&gt; Ask [URL] =&gt; www.ask.com [Usage] =&gt; Asking Jeeves ) [1] =&gt; Array ( [Name] =&gt; Google [URL] =&gt; www.google.com [Usage] =&gt; Googling ) [2] =&gt; Array ( [Name] =&gt; Yahoo [URL] =&gt; www.yahoo.com [Usage] =&gt; Yahooing? ) ) <br />
*/<br />
</span><span class="default">?&gt;<br />
</span><br />
Hope you find it useful!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91360""></a>
  <div class="note">
   <strong class="user">aalaap at gmail dot com</strong>
   <a href="#91360" class="date">08-Jun-2009 05:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've been wondering why shuffle() doesn't provide the shuffled array as a return value instead of a bool. I mean, what could possibly go wrong in shuffling elements from an array?
<br />

<br />
So I use something like this:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">array_shuffle</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">FALSE</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90946""></a>
  <div class="note">
   <strong class="user">sivaji2009 at gmail dot com</strong>
   <a href="#90946" class="date">17-May-2009 02:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here i wrote a custom shuffle function which preserves the array index and distributes the array element randomly.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/*<br />
&nbsp;* return an array whose elements are shuffled in random order.<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">custom_shuffle</span><span class="keyword">(</span><span class="default">$my_array </span><span class="keyword">= array()) {<br />
&nbsp; </span><span class="default">$copy </span><span class="keyword">= array();<br />
&nbsp; while (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$my_array</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// takes a rand array elements by its key<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$element </span><span class="keyword">= </span><span class="default">array_rand</span><span class="keyword">(</span><span class="default">$my_array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// assign the array and its value to an another array<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$copy</span><span class="keyword">[</span><span class="default">$element</span><span class="keyword">] = </span><span class="default">$my_array</span><span class="keyword">[</span><span class="default">$element</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//delete the element from source array<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">unset(</span><span class="default">$my_array</span><span class="keyword">[</span><span class="default">$element</span><span class="keyword">]);<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$copy</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$array </span><span class="keyword">= array(<br />
&nbsp; </span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="string">'apple'</span><span class="keyword">,<br />
&nbsp; </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="string">'ball'</span><span class="keyword">,<br />
&nbsp; </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="string">'cat'</span><span class="keyword">,<br />
&nbsp; </span><span class="string">'d' </span><span class="keyword">=&gt; </span><span class="string">'dog'</span><span class="keyword">,<br />
&nbsp; </span><span class="string">'e' </span><span class="keyword">=&gt; </span><span class="string">'egg'</span><span class="keyword">,<br />
&nbsp; </span><span class="string">'f' </span><span class="keyword">=&gt; </span><span class="string">'fan'</span><span class="keyword">,<br />
&nbsp; </span><span class="string">'g' </span><span class="keyword">=&gt; </span><span class="string">'gun'<br />
</span><span class="keyword">);<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">custom_shuffle</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">));<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [</span><span class="default">c</span><span class="keyword">] =&gt; </span><span class="default">cat<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">e</span><span class="keyword">] =&gt; </span><span class="default">egg<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">f</span><span class="keyword">] =&gt; </span><span class="default">fan<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">a</span><span class="keyword">] =&gt; </span><span class="default">apple<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">b</span><span class="keyword">] =&gt; </span><span class="default">ball<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">g</span><span class="keyword">] =&gt; </span><span class="default">gun<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">d</span><span class="keyword">] =&gt; </span><span class="default">dog<br />
</span><span class="keyword">)<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90615""></a>
  <div class="note">
   <strong class="user">dirk dot avery a t gmail</strong>
   <a href="#90615" class="date">30-Apr-2009 08:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Building on examples by m227 and pineappleclock, here is a function that returns all permutations of each set in the power set of an array of strings (instead of a string).&nbsp; Thanks for the great examples!<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/*<br />
&nbsp;Use: $arr = power_perms($in);<br />
<br />
&nbsp;Example:<br />
&nbsp; $in = array("A","B","C");<br />
&nbsp; $power_perms = power_perms($in);<br />
&nbsp;<br />
&nbsp;Returns:<br />
&nbsp; Array<br />
&nbsp; (<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; A<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; B<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; C<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; A<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; C<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; B<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; B<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; A<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; C<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; B<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; C<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; A<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; C<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; A<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; B<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [5] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; C<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; B<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; A<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [6] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; A<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; B<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [7] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; B<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; A<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [8] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; B<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; C<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [9] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; C<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; B<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [10] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; A<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; C<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [11] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; C<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; A<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [12] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; A<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [13] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; B<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [14] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; C<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp; )<br />
<br />
*/<br />
<br />
</span><span class="keyword">function </span><span class="default">power_perms</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$power_set </span><span class="keyword">= </span><span class="default">power_set</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$power_set </span><span class="keyword">as </span><span class="default">$set</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$perms </span><span class="keyword">= </span><span class="default">perms</span><span class="keyword">(</span><span class="default">$set</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">,</span><span class="default">$perms</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">power_set</span><span class="keyword">(</span><span class="default">$in</span><span class="keyword">,</span><span class="default">$minLength </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$in</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$members </span><span class="keyword">= </span><span class="default">pow</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">,</span><span class="default">$count</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= array();<br />
&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$members</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$b </span><span class="keyword">= </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">"%0"</span><span class="keyword">.</span><span class="default">$count</span><span class="keyword">.</span><span class="string">"b"</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp;&nbsp; for (</span><span class="default">$j </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$j </span><span class="keyword">&lt; </span><span class="default">$count</span><span class="keyword">; </span><span class="default">$j</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$b</span><span class="keyword">{</span><span class="default">$j</span><span class="keyword">} == </span><span class="string">'1'</span><span class="keyword">) </span><span class="default">$out</span><span class="keyword">[] = </span><span class="default">$in</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$out</span><span class="keyword">) &gt;= </span><span class="default">$minLength</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$return</span><span class="keyword">[] = </span><span class="default">$out</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; </span><span class="comment">//usort($return,"cmp");&nbsp; //can sort here by length<br />
&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$return</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">factorial</span><span class="keyword">(</span><span class="default">$int</span><span class="keyword">){<br />
&nbsp;&nbsp; if(</span><span class="default">$int </span><span class="keyword">&lt; </span><span class="default">2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; return </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; for(</span><span class="default">$f </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">; </span><span class="default">$int</span><span class="keyword">-</span><span class="default">1 </span><span class="keyword">&gt; </span><span class="default">1</span><span class="keyword">; </span><span class="default">$f </span><span class="keyword">*= </span><span class="default">$int</span><span class="keyword">--);<br />
<br />
&nbsp;&nbsp; return </span><span class="default">$f</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">perm</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$nth </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$nth </span><span class="keyword">=== </span><span class="default">null</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">perms</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$length </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">$length</span><span class="keyword">--) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$f </span><span class="keyword">= </span><span class="default">factorial</span><span class="keyword">(</span><span class="default">$length</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$p </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$nth </span><span class="keyword">/ </span><span class="default">$f</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[] = </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$p</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_delete_by_key</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$p</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nth </span><span class="keyword">-= </span><span class="default">$p </span><span class="keyword">* </span><span class="default">$f</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">,</span><span class="default">$arr</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">perms</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$p </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">factorial</span><span class="keyword">(</span><span class="default">count</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">)); </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$p</span><span class="keyword">[] = </span><span class="default">perm</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$p</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">array_delete_by_key</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$delete_key</span><span class="keyword">, </span><span class="default">$use_old_keys </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp;&nbsp; unset(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$delete_key</span><span class="keyword">]);<br />
<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">$use_old_keys</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">TRUE</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88408""></a>
  <div class="note">
   <strong class="user">pineappleclock at gmail dot com</strong>
   <a href="#88408" class="date">22-Jan-2009 10:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want the Power Set (set of all unique subsets) of an array instead of permutations, you can use this simple algorithm:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">/**
<br />
* Returns the power set of a one dimensional array,
<br />
* a 2-D array.
<br />
* array(a,b,c) -&gt;
<br />
* array(array(a),array(b),array(c),array(a,b),array(b,c),array(a,b,c))
<br />
*/
<br />
</span><span class="keyword">function </span><span class="default">powerSet</span><span class="keyword">(</span><span class="default">$in</span><span class="keyword">,</span><span class="default">$minLength </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">) { 
<br />
&nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$in</span><span class="keyword">); 
<br />
&nbsp;&nbsp; </span><span class="default">$members </span><span class="keyword">= </span><span class="default">pow</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">,</span><span class="default">$count</span><span class="keyword">); 
<br />
&nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= array();
<br />
&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$members</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$b </span><span class="keyword">= </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">"%0"</span><span class="keyword">.</span><span class="default">$count</span><span class="keyword">.</span><span class="string">"b"</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">= array();
<br />
&nbsp;&nbsp; &nbsp;&nbsp; for (</span><span class="default">$j </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$j </span><span class="keyword">&lt; </span><span class="default">$count</span><span class="keyword">; </span><span class="default">$j</span><span class="keyword">++) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$b</span><span class="keyword">{</span><span class="default">$j</span><span class="keyword">} == </span><span class="string">'1'</span><span class="keyword">) </span><span class="default">$out</span><span class="keyword">[] = </span><span class="default">$in</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$out</span><span class="keyword">) &gt;= </span><span class="default">$minLength</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$return</span><span class="keyword">[] = </span><span class="default">$out</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; }
<br />
&nbsp;&nbsp; return </span><span class="default">$return</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86949""></a>
  <div class="note">
   <strong class="user">tony at brokerbin dot com</strong>
   <a href="#86949" class="date">11-Nov-2008 07:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is IMO the simplest and extremely fast way to shuffle an associative array AND keep the key=&gt;value relationship.&nbsp; However, it ONLY works if there are NO NUMERIC keys AT ALL.&nbsp; Look into array_merge for the reason why.<br />
<br />
<span class="default">&lt;?php<br />
<br />
$unshuffled </span><span class="keyword">= array(</span><span class="string">'one'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">,</span><span class="string">'two'</span><span class="keyword">=&gt;</span><span class="default">2</span><span class="keyword">,</span><span class="string">'three'</span><span class="keyword">=&gt;</span><span class="default">3</span><span class="keyword">);<br />
<br />
</span><span class="default">$shuffled </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">( </span><span class="default">array_flip</span><span class="keyword">(</span><span class="default">array_rand</span><span class="keyword">(</span><span class="default">$unshuffled</span><span class="keyword">,</span><span class="default">count</span><span class="keyword">(</span><span class="default">$unshuffled</span><span class="keyword">))),</span><span class="default">$unshuffled </span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
peace</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83007""></a>
  <div class="note">
   <strong class="user">Antonio Ognio</strong>
   <a href="#83007" class="date">06-May-2008 09:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Another shuffle() implementation that preserves keys, does not use extra memory and perhaps is a bit easier to grasp.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">if (</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'shuffle_with_keys'</span><span class="keyword">)===</span><span class="default">false</span><span class="keyword">) {
<br />
&nbsp; function </span><span class="default">shuffle_with_keys</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/* Auxiliary array to hold the new order */
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$aux </span><span class="keyword">= array(); 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/* We work with an array of the keys */
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/* We shuffle the keys */
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/* We iterate thru' the new order of the keys */
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach(</span><span class="default">$keys </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="comment">/* We insert the key, value pair in its new order */
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$aux</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="comment">/* We remove the element from the old array to save memory */
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">unset(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/* The auxiliary array with the new order overwrites the old variable */
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">$aux</span><span class="keyword">;
<br />
&nbsp; }
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="67432""></a>
  <div class="note">
   
   <a href="#67432" class="date">07-Jun-2006 02:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Posted below is code that you would expect to work<br />
<br />
<span class="default">&lt;?php<br />
<br />
$keys </span><span class="keyword">= </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">));<br />
<br />
foreach (</span><span class="default">$keys </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">) {<br />
<br />
&nbsp; </span><span class="default">$arr_elem </span><span class="keyword">= </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp; </span><span class="comment">// do what you want with the array element<br />
<br />
</span><span class="keyword">}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
This in fact does not work because shuffle returns a boolean true or false. More accurate code using this method would be:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
</span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">);<br />
<br />
foreach (</span><span class="default">$keys </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">) {<br />
<br />
&nbsp; </span><span class="default">$arr_elem </span><span class="keyword">= </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp; </span><span class="comment">// do what you want with the array element<br />
<br />
</span><span class="keyword">}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57068""></a>
  <div class="note">
   <strong class="user">bill at SWScripts dot com</strong>
   <a href="#57068" class="date">22-Sep-2005 09:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just a quick note to let people know that shuffle() will work on multidimensional associative arrays provided that the first key is already numeric.<br />
<br />
So this array can be shuffled without losing any of the secondary keys or their values:<br />
<br />
$array[0]['color'], $array[0]['size'], $array[0]['fabric']<br />
. . .<br />
$array[50]['color'], $array[50]['size'], $array[50]['fabric']<br />
<br />
I recently ran up against needing to randomize this array and tried shuffle even though it's not really for associative arrays.<br />
<br />
Hope it helps somebody out there.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

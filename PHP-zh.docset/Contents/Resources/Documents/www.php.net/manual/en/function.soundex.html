<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Calculate the soundex key of a string</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.similar-text.html">? similar_text</a></li>
      <li style="float: right;"><a href="function.sprintf.html">sprintf ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.strings.html">字符串 函数</a></li>
    <li>Calculate the soundex key of a string</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.soundex" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">soundex</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">soundex</span> &mdash; <span class="dc-title">Calculate the soundex key of a string</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.soundex-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>soundex</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$string</code></span>
   ) : <span class="type">string</span></div>

  <p class="para rdfs-comment">
   Calculates the soundex key of <code class="parameter">string</code>.
  </p>
  <p class="para">
   Soundex keys have the property that words pronounced similarly
   produce the same soundex key, and can thus be used to simplify
   searches in databases where you know the pronunciation but not
   the spelling.
  </p>
  <p class="para">
   This particular soundex function is one described by Donald Knuth
   in &quot;The Art Of Computer Programming, vol. 3: Sorting And
   Searching&quot;, Addison-Wesley (1973), pp. 391-392.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.soundex-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">string</code></dt>

     <dd>

      <p class="para">
       The input string.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.soundex-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   Returns the soundex key as a <span class="type">string</span> with four characters.
   If at least one letter is contained in <code class="parameter">string</code>, the returned
   string starts with a letter. Otherwise <code class="literal">&quot;0000&quot;</code> is returned.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.soundex-changelog">
  <h3 class="title">更新日志</h3>
  <table class="doctable informaltable">
   
    <thead>
     <tr>
      <th>版本</th>
      <th>说明</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td>8.0.0</td>
      <td>
       Prior to this version, calling the function with an empty string returned <strong><code>false</code></strong>
       for no particular reason.
      </td>
     </tr>

    </tbody>
   
  </table>

 </div>


 <div class="refsect1 examples" id="refsect1-function.soundex-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-5164">
    <p><strong>Example #1 Soundex Examples</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />soundex</span><span style="color: #007700">(</span><span style="color: #DD0000">"Euler"</span><span style="color: #007700">)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&nbsp;</span><span style="color: #0000BB">soundex</span><span style="color: #007700">(</span><span style="color: #DD0000">"Ellery"</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;E460<br /></span><span style="color: #0000BB">soundex</span><span style="color: #007700">(</span><span style="color: #DD0000">"Gauss"</span><span style="color: #007700">)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&nbsp;</span><span style="color: #0000BB">soundex</span><span style="color: #007700">(</span><span style="color: #DD0000">"Ghosh"</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;G200<br /></span><span style="color: #0000BB">soundex</span><span style="color: #007700">(</span><span style="color: #DD0000">"Hilbert"</span><span style="color: #007700">)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&nbsp;</span><span style="color: #0000BB">soundex</span><span style="color: #007700">(</span><span style="color: #DD0000">"Heilbronn"</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;H416<br /></span><span style="color: #0000BB">soundex</span><span style="color: #007700">(</span><span style="color: #DD0000">"Knuth"</span><span style="color: #007700">)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&nbsp;</span><span style="color: #0000BB">soundex</span><span style="color: #007700">(</span><span style="color: #DD0000">"Kant"</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;K530<br /></span><span style="color: #0000BB">soundex</span><span style="color: #007700">(</span><span style="color: #DD0000">"Lloyd"</span><span style="color: #007700">)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&nbsp;</span><span style="color: #0000BB">soundex</span><span style="color: #007700">(</span><span style="color: #DD0000">"Ladd"</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;L300<br /></span><span style="color: #0000BB">soundex</span><span style="color: #007700">(</span><span style="color: #DD0000">"Lukasiewicz"</span><span style="color: #007700">)&nbsp;==&nbsp;</span><span style="color: #0000BB">soundex</span><span style="color: #007700">(</span><span style="color: #DD0000">"Lissajous"</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;L222<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.soundex-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.levenshtein.html" class="function" rel="rdfs-seeAlso">levenshtein()</a> - 计算两个字符串之间的编辑距离</span></li>
    <li class="member"><span class="function"><a href="function.metaphone.html" class="function" rel="rdfs-seeAlso">metaphone()</a> - Calculate the metaphone key of a string</span></li>
    <li class="member"><span class="function"><a href="function.similar-text.html" class="function" rel="rdfs-seeAlso">similar_text()</a> - 计算两个字符串的相似度</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="124963""></a>
  <div class="note">
   <strong class="user">synnus at gmail dot com</strong>
   <a href="#124963" class="date">29-Apr-2020 03:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">/*&nbsp; &nbsp; SOUNDEX FRENCH <br />
Frederic Bouchery&nbsp; &nbsp;&nbsp; 26-Sep-2003<br />
<a href="http://www.php-help.net/sources-php/a.french.adapted.soundex.289.html" rel="nofollow" target="_blank">http://www.php-help.net/sources-php/a.french.adapted.soundex.289.html</a><br />
*/<br />
<br />
</span><span class="keyword">function </span><span class="default">soundex2</span><span class="keyword">( </span><span class="default">$sIn </span><span class="keyword">) {<br />
&nbsp;&nbsp; </span><span class="comment">// Si il n'y a pas de mot, on sort immédiatement<br />
&nbsp;&nbsp; </span><span class="keyword">if ( </span><span class="default">$sIn </span><span class="keyword">=== </span><span class="string">'' </span><span class="keyword">) return </span><span class="string">'&nbsp; &nbsp; '</span><span class="keyword">;<br />
&nbsp;&nbsp; </span><span class="comment">// On met tout en minuscule<br />
&nbsp;&nbsp; </span><span class="default">$sIn </span><span class="keyword">= </span><span class="default">strtoupper</span><span class="keyword">( </span><span class="default">$sIn </span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="comment">// On supprime les accents<br />
&nbsp;&nbsp; </span><span class="default">$sIn </span><span class="keyword">= </span><span class="default">strtr</span><span class="keyword">( </span><span class="default">$sIn</span><span class="keyword">, </span><span class="string">'??à?èéê?&amp;#338;????ù?ü'</span><span class="keyword">, </span><span class="string">'AAASEEEEEIIOOUUU' </span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="comment">// On supprime tout ce qui n'est pas une lettre<br />
&nbsp;&nbsp; </span><span class="default">$sIn </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">( </span><span class="string">'`[^A-Z]`'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$sIn </span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="comment">// Si la cha?ne ne fait qu'un seul caractère, on sort avec.<br />
&nbsp;&nbsp; </span><span class="keyword">if ( </span><span class="default">strlen</span><span class="keyword">( </span><span class="default">$sIn </span><span class="keyword">) === </span><span class="default">1 </span><span class="keyword">) return </span><span class="default">$sIn </span><span class="keyword">. </span><span class="string">'&nbsp;&nbsp; '</span><span class="keyword">;<br />
&nbsp;&nbsp; </span><span class="comment">// on remplace les consonnances primaires<br />
&nbsp;&nbsp; </span><span class="default">$convIn </span><span class="keyword">= array( </span><span class="string">'GUI'</span><span class="keyword">, </span><span class="string">'GUE'</span><span class="keyword">, </span><span class="string">'GA'</span><span class="keyword">, </span><span class="string">'GO'</span><span class="keyword">, </span><span class="string">'GU'</span><span class="keyword">, </span><span class="string">'CA'</span><span class="keyword">, </span><span class="string">'CO'</span><span class="keyword">, </span><span class="string">'CU'</span><span class="keyword">,<br />
</span><span class="string">'Q'</span><span class="keyword">, </span><span class="string">'CC'</span><span class="keyword">, </span><span class="string">'CK' </span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$convOut </span><span class="keyword">= array( </span><span class="string">'KI'</span><span class="keyword">, </span><span class="string">'KE'</span><span class="keyword">, </span><span class="string">'KA'</span><span class="keyword">, </span><span class="string">'KO'</span><span class="keyword">, </span><span class="string">'K'</span><span class="keyword">, </span><span class="string">'KA'</span><span class="keyword">, </span><span class="string">'KO'</span><span class="keyword">, </span><span class="string">'KU'</span><span class="keyword">, </span><span class="string">'K'</span><span class="keyword">,<br />
</span><span class="string">'K'</span><span class="keyword">, </span><span class="string">'K' </span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$sIn </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="default">$convIn</span><span class="keyword">, </span><span class="default">$convOut</span><span class="keyword">, </span><span class="default">$sIn </span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="comment">// on remplace les voyelles sauf le Y et sauf la première par A<br />
&nbsp;&nbsp; </span><span class="default">$sIn </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">( </span><span class="string">'`(?&lt;!^)[EIOU]`'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">, </span><span class="default">$sIn </span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="comment">// on remplace les préfixes puis on conserve la première lettre<br />
&nbsp;&nbsp; // et on fait les remplacements complémentaires<br />
&nbsp;&nbsp; </span><span class="default">$convIn </span><span class="keyword">= array( </span><span class="string">'`^KN`'</span><span class="keyword">, </span><span class="string">'`^(PH|PF)`'</span><span class="keyword">, </span><span class="string">'`^MAC`'</span><span class="keyword">, </span><span class="string">'`^SCH`'</span><span class="keyword">, </span><span class="string">'`^ASA`'</span><span class="keyword">,<br />
</span><span class="string">'`(?&lt;!^)KN`'</span><span class="keyword">, </span><span class="string">'`(?&lt;!^)(PH|PF)`'</span><span class="keyword">, </span><span class="string">'`(?&lt;!^)MAC`'</span><span class="keyword">, </span><span class="string">'`(?&lt;!^)SCH`'</span><span class="keyword">,<br />
</span><span class="string">'`(?&lt;!^)ASA`' </span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$convOut </span><span class="keyword">= array( </span><span class="string">'NN'</span><span class="keyword">, </span><span class="string">'FF'</span><span class="keyword">, </span><span class="string">'MCC'</span><span class="keyword">, </span><span class="string">'SSS'</span><span class="keyword">, </span><span class="string">'AZA'</span><span class="keyword">, </span><span class="string">'NN'</span><span class="keyword">, </span><span class="string">'FF'</span><span class="keyword">, </span><span class="string">'MCC'</span><span class="keyword">,<br />
</span><span class="string">'SSS'</span><span class="keyword">, </span><span class="string">'AZA' </span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$sIn </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">( </span><span class="default">$convIn</span><span class="keyword">, </span><span class="default">$convOut</span><span class="keyword">, </span><span class="default">$sIn </span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="comment">// suppression des H sauf CH ou SH<br />
&nbsp;&nbsp; </span><span class="default">$sIn </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">( </span><span class="string">'`(?&lt;![CS])H`'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$sIn </span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="comment">// suppression des Y sauf précédés d'un A<br />
&nbsp;&nbsp; </span><span class="default">$sIn </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">( </span><span class="string">'`(?&lt;!A)Y`'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$sIn </span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="comment">// on supprime les terminaisons A, T, D, S<br />
&nbsp;&nbsp; </span><span class="default">$sIn </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">( </span><span class="string">'`[ATDS]$`'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$sIn </span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="comment">// suppression de tous les A sauf en tête<br />
&nbsp;&nbsp; </span><span class="default">$sIn </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">( </span><span class="string">'`(?!^)A`'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$sIn </span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="comment">// on supprime les lettres répétitives<br />
&nbsp;&nbsp; </span><span class="default">$sIn </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">( </span><span class="string">'`(.)\1`'</span><span class="keyword">, </span><span class="string">'$1'</span><span class="keyword">, </span><span class="default">$sIn </span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="comment">// on ne retient que 4 caractères ou on complète avec des blancs<br />
&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">substr</span><span class="keyword">( </span><span class="default">$sIn </span><span class="keyword">. </span><span class="string">'&nbsp; &nbsp; '</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117564""></a>
  <div class="note">
   <strong class="user">synnus at gmail dot com</strong>
   <a href="#117564" class="date">30-Jun-2015 11:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">// https://github.com/Fruneau/Fruneau.github.io/blob/master/assets/soundex_fr.php<br />
// <a href="http://blog.mymind.fr/blog/2007/03/15/soundex-francais/" rel="nofollow" target="_blank">http://blog.mymind.fr/blog/2007/03/15/soundex-francais/</a><br />
</span><span class="keyword">function </span><span class="default">soundex_fr</span><span class="keyword">(</span><span class="default">$sIn</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; static </span><span class="default">$convVIn</span><span class="keyword">, </span><span class="default">$convVOut</span><span class="keyword">, </span><span class="default">$convGuIn</span><span class="keyword">, </span><span class="default">$convGuOut</span><span class="keyword">, </span><span class="default">$accents</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (!isset(</span><span class="default">$convGuIn</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$accents </span><span class="keyword">= array(</span><span class="string">'é' </span><span class="keyword">=&gt; </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'è' </span><span class="keyword">=&gt; </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'ê' </span><span class="keyword">=&gt; </span><span class="string">'E'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'á' </span><span class="keyword">=&gt; </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'à' </span><span class="keyword">=&gt; </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'A'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'ì' </span><span class="keyword">=&gt; </span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'í' </span><span class="keyword">=&gt; </span><span class="string">'I'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'ò' </span><span class="keyword">=&gt; </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'ó' </span><span class="keyword">=&gt; </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'O'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'ú' </span><span class="keyword">=&gt; </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'ù' </span><span class="keyword">=&gt; </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'ü' </span><span class="keyword">=&gt; </span><span class="string">'U'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'N'</span><span class="keyword">, </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'S'</span><span class="keyword">, </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'E'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'é' </span><span class="keyword">=&gt; </span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'è' </span><span class="keyword">=&gt; </span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'ê' </span><span class="keyword">=&gt; </span><span class="string">'e'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'á' </span><span class="keyword">=&gt; </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'à' </span><span class="keyword">=&gt; </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'a'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'ì' </span><span class="keyword">=&gt; </span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'í' </span><span class="keyword">=&gt; </span><span class="string">'i'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'ò' </span><span class="keyword">=&gt; </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'ó' </span><span class="keyword">=&gt; </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'o'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'ú' </span><span class="keyword">=&gt; </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'ù' </span><span class="keyword">=&gt; </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'ü' </span><span class="keyword">=&gt; </span><span class="string">'u'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'c'</span><span class="keyword">, </span><span class="string">'?' </span><span class="keyword">=&gt; </span><span class="string">'n'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$convGuIn&nbsp; </span><span class="keyword">= array( </span><span class="string">'GUI'</span><span class="keyword">, </span><span class="string">'GUE'</span><span class="keyword">, </span><span class="string">'GA'</span><span class="keyword">, </span><span class="string">'GO'</span><span class="keyword">, </span><span class="string">'GU'</span><span class="keyword">, </span><span class="string">'SCI'</span><span class="keyword">, </span><span class="string">'SCE'</span><span class="keyword">, </span><span class="string">'SC'</span><span class="keyword">, </span><span class="string">'CA'</span><span class="keyword">, </span><span class="string">'CO'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'CU'</span><span class="keyword">, </span><span class="string">'QU'</span><span class="keyword">, </span><span class="string">'Q'</span><span class="keyword">, </span><span class="string">'CC'</span><span class="keyword">, </span><span class="string">'CK'</span><span class="keyword">, </span><span class="string">'G'</span><span class="keyword">, </span><span class="string">'ST'</span><span class="keyword">, </span><span class="string">'PH'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$convGuOut </span><span class="keyword">= array( </span><span class="string">'KI'</span><span class="keyword">, </span><span class="string">'KE'</span><span class="keyword">, </span><span class="string">'KA'</span><span class="keyword">, </span><span class="string">'KO'</span><span class="keyword">, </span><span class="string">'K'</span><span class="keyword">, </span><span class="string">'SI'</span><span class="keyword">, </span><span class="string">'SE'</span><span class="keyword">, </span><span class="string">'SK'</span><span class="keyword">, </span><span class="string">'KA'</span><span class="keyword">, </span><span class="string">'KO'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'KU'</span><span class="keyword">, </span><span class="string">'K'</span><span class="keyword">, </span><span class="string">'K'</span><span class="keyword">, </span><span class="string">'K'</span><span class="keyword">, </span><span class="string">'K'</span><span class="keyword">, </span><span class="string">'J'</span><span class="keyword">, </span><span class="string">'T'</span><span class="keyword">, </span><span class="string">'F'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$convVIn&nbsp;&nbsp; </span><span class="keyword">= array( </span><span class="string">'/E?(AU)/'</span><span class="keyword">, </span><span class="string">'/([EA])?[UI]([NM])([^EAIOUY]|$)/'</span><span class="keyword">, </span><span class="string">'/[AE]O?[NM]([^AEIOUY]|$)/'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'/[EA][IY]([NM]?[^NM]|$)/'</span><span class="keyword">, </span><span class="string">'/(^|[^OEUIA])(OEU|OE|EU)([^OEUIA]|$)/'</span><span class="keyword">, </span><span class="string">'/OI/'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'/(ILLE?|I)/'</span><span class="keyword">, </span><span class="string">'/O(U|W)/'</span><span class="keyword">, </span><span class="string">'/O[NM]($|[^EAOUIY])/'</span><span class="keyword">, </span><span class="string">'/(SC|S|C)H/'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'/([^AEIOUY1])[^AEIOUYLKTPNR]([UAO])([^AEIOUY])/'</span><span class="keyword">, </span><span class="string">'/([^AEIOUY]|^)([AUO])[^AEIOUYLKTP]([^AEIOUY1])/'</span><span class="keyword">, </span><span class="string">'/^KN/'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'/^PF/'</span><span class="keyword">, </span><span class="string">'/C([^AEIOUY]|$)/'</span><span class="keyword">,&nbsp; </span><span class="string">'/E(Z|R)$/'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'/C/'</span><span class="keyword">, </span><span class="string">'/Z$/'</span><span class="keyword">, </span><span class="string">'/(?&lt;!^)Z+/'</span><span class="keyword">, </span><span class="string">'/H/'</span><span class="keyword">, </span><span class="string">'/W/'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$convVOut&nbsp; </span><span class="keyword">= array( </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'1\3'</span><span class="keyword">, </span><span class="string">'A\1'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'E\1'</span><span class="keyword">, </span><span class="string">'\1E\3'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Y'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'O\1'</span><span class="keyword">, </span><span class="string">'9'</span><span class="keyword">, <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'\1\2\3'</span><span class="keyword">, </span><span class="string">'\1\2\3'</span><span class="keyword">, </span><span class="string">'N'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'F'</span><span class="keyword">, </span><span class="string">'K\1'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'S'</span><span class="keyword">, </span><span class="string">'SE'</span><span class="keyword">, </span><span class="string">'S'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="string">'V'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; if ( </span><span class="default">$sIn </span><span class="keyword">=== </span><span class="string">'' </span><span class="keyword">) return </span><span class="string">'&nbsp; &nbsp; '</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$sIn </span><span class="keyword">= </span><span class="default">strtr</span><span class="keyword">( </span><span class="default">$sIn</span><span class="keyword">, </span><span class="default">$accents</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$sIn </span><span class="keyword">= </span><span class="default">strtoupper</span><span class="keyword">( </span><span class="default">$sIn </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$sIn </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">( </span><span class="string">'`[^A-Z]`'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$sIn </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if ( </span><span class="default">strlen</span><span class="keyword">( </span><span class="default">$sIn </span><span class="keyword">) === </span><span class="default">1 </span><span class="keyword">) return </span><span class="default">$sIn </span><span class="keyword">. </span><span class="string">'&nbsp;&nbsp; '</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$sIn </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="default">$convGuIn</span><span class="keyword">, </span><span class="default">$convGuOut</span><span class="keyword">, </span><span class="default">$sIn </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$sIn </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">( </span><span class="string">'`(.)\1`'</span><span class="keyword">, </span><span class="string">'$1'</span><span class="keyword">, </span><span class="default">$sIn </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$sIn </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">( </span><span class="default">$convVIn</span><span class="keyword">, </span><span class="default">$convVOut</span><span class="keyword">, </span><span class="default">$sIn</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$sIn </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">( </span><span class="string">'`L?[TDX]?S?$`'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$sIn </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$sIn </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">( </span><span class="string">'`(?!^)Y([^AEOU]|$)`'</span><span class="keyword">, </span><span class="string">'\1'</span><span class="keyword">, </span><span class="default">$sIn</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$sIn </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">( </span><span class="string">'`(?!^)[EA]`'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$sIn</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">( </span><span class="default">$sIn </span><span class="keyword">. </span><span class="string">'&nbsp; &nbsp; '</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114220""></a>
  <div class="note">
   <strong class="user">Dirk Hoeschen - Feenders de</strong>
   <a href="#114220" class="date">26-Jan-2014 11:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I made some improvements to the "Cologne Phonetic" function of niclas zimmer. Key and value of the arrays are inverted to uses simple arrays instead of multidimensional arrays. Therefore all loops and iterations are not longer necessary to find the matching value&nbsp; for a char.<br />
I put the function into a static class and moved the array declarations outside the function.<br />
<br />
The result is more reliable and five times faster than the original.<br />
<br />
<span class="default">&lt;?php&nbsp;&nbsp; <br />
</span><span class="keyword">class </span><span class="default">CologneHash</span><span class="keyword">() {<br />
<br />
&nbsp;&nbsp;&nbsp; static </span><span class="default">$eLeading </span><span class="keyword">= array(</span><span class="string">"ca" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">"ch" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">"ck" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">"cl" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">"co" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">"cq" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">"cu" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">"cx" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">"dc" </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">, </span><span class="string">"ds" </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">, </span><span class="string">"dz" </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">, </span><span class="string">"tc" </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">, </span><span class="string">"ts" </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">, </span><span class="string">"tz" </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">); <br />
<br />
&nbsp;&nbsp;&nbsp; static </span><span class="default">$eFollow </span><span class="keyword">= array(</span><span class="string">"sc"</span><span class="keyword">, </span><span class="string">"zc"</span><span class="keyword">, </span><span class="string">"cx"</span><span class="keyword">, </span><span class="string">"kx"</span><span class="keyword">, </span><span class="string">"qx"</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; static </span><span class="default">$codingTable </span><span class="keyword">= array(</span><span class="string">"a" </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">, </span><span class="string">"e" </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">, </span><span class="string">"i" </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">, </span><span class="string">"j" </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">, </span><span class="string">"o" </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">, </span><span class="string">"u" </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">, </span><span class="string">"y" </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"b" </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">"p" </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">"d" </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">"t" </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">"f" </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">"v" </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">"w" </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">"c" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">"g" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">"k" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">"q" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"x" </span><span class="keyword">=&gt; </span><span class="default">48</span><span class="keyword">, </span><span class="string">"l" </span><span class="keyword">=&gt; </span><span class="default">5</span><span class="keyword">, </span><span class="string">"m" </span><span class="keyword">=&gt; </span><span class="default">6</span><span class="keyword">, </span><span class="string">"n" </span><span class="keyword">=&gt; </span><span class="default">6</span><span class="keyword">, </span><span class="string">"r" </span><span class="keyword">=&gt; </span><span class="default">7</span><span class="keyword">, </span><span class="string">"c" </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">, </span><span class="string">"s" </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">, </span><span class="string">"z" </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">getCologneHash</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (empty(</span><span class="default">$word</span><span class="keyword">)) return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">);<br />
&nbsp;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$len</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Exceptions<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$i </span><span class="keyword">== </span><span class="default">0 </span><span class="keyword">&amp;&amp; </span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] . </span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">] == </span><span class="string">"cr"</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">4</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (isset(</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">]) &amp;&amp; isset(</span><span class="default">self</span><span class="keyword">::</span><span class="default">$eLeading</span><span class="keyword">[</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] . </span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">]])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">self</span><span class="keyword">::</span><span class="default">$eLeading</span><span class="keyword">[</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] . </span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">]];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$i </span><span class="keyword">!= </span><span class="default">0 </span><span class="keyword">&amp;&amp; (</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">] . </span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], </span><span class="default">self</span><span class="keyword">::</span><span class="default">$eFollow</span><span class="keyword">))) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">8</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// normal encoding<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]==</span><span class="string">""</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (isset(</span><span class="default">self</span><span class="keyword">::</span><span class="default">$codingTable</span><span class="keyword">[</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">self</span><span class="keyword">::</span><span class="default">$codingTable</span><span class="keyword">[</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// delete double values<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$len </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$len</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] == </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">]) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// delete vocals<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&gt; </span><span class="default">$len</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// omitting first characer code and h<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] == </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">array_filter</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">implode</span><span class="keyword">(</span><span class="string">""</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84881""></a>
  <div class="note">
   <strong class="user">nicolas dot zimmer at einfachmarke dot de</strong>
   <a href="#84881" class="date">03-Aug-2008 03:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Since soundex() does not produce optimal results for German language<br />
we have written a function to implement the so called K?lner Phonetik<br />
(Cologne Phonetic).<br />
<br />
Please find the code below in the hope it might be useful:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* A function for retrieving the K?lner Phonetik value of a string<br />
&nbsp;* <br />
&nbsp;* As described at <a href="http://de.wikipedia.org/wiki/K?lner_Phonetik" rel="nofollow" target="_blank">http://de.wikipedia.org/wiki/K?lner_Phonetik</a><br />
&nbsp;* Based on Hans Joachim Postel: Die K?lner Phonetik. <br />
&nbsp;* Ein Verfahren zur Identifizierung von Personennamen auf der <br />
&nbsp;* Grundlage der Gestaltanalyse. <br />
&nbsp;* in: IBM-Nachrichten, 19. Jahrgang, 1969, S. 925-931<br />
&nbsp;* <br />
&nbsp;* This program is distributed in the hope that it will be useful,<br />
&nbsp;* but WITHOUT ANY WARRANTY; without even the implied warranty of<br />
&nbsp;* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.&nbsp; See the<br />
&nbsp;* GNU General Public License for more details.<br />
&nbsp;*<br />
&nbsp;* @package phonetics<br />
&nbsp;* @version 1.0<br />
&nbsp;* @link <a href="http://www.einfachmarke.de" rel="nofollow" target="_blank">http://www.einfachmarke.de</a><br />
&nbsp;* @license GPL 3.0 &lt;<a href="http://www.gnu.org/licenses/&gt;" rel="nofollow" target="_blank">http://www.gnu.org/licenses/&gt;</a><br />
&nbsp;* @copyright&nbsp; 2008 by einfachmarke.de<br />
&nbsp;* @author Nicolas Zimmer &lt;nicolas dot zimmer at einfachmarke.de&gt;<br />
&nbsp;*/<br />
<br />
</span><span class="keyword">function </span><span class="default">cologne_phon</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp; </span><span class="comment">/**<br />
&nbsp; * @param&nbsp; string&nbsp; $word string to be analyzed<br />
&nbsp; * @return string&nbsp; $value represents the K?lner Phonetik value<br />
&nbsp; * @access public<br />
&nbsp; */<br />
&nbsp; <br />
&nbsp;&nbsp;&nbsp; //prepare for processing<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$word</span><span class="keyword">=</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$substitution</span><span class="keyword">=array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"?"</span><span class="keyword">=&gt;</span><span class="string">"a"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"?"</span><span class="keyword">=&gt;</span><span class="string">"o"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"ü"</span><span class="keyword">=&gt;</span><span class="string">"u"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"?"</span><span class="keyword">=&gt;</span><span class="string">"ss"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"ph"</span><span class="keyword">=&gt;</span><span class="string">"f"<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$substitution </span><span class="keyword">as </span><span class="default">$letter</span><span class="keyword">=&gt;</span><span class="default">$substitution</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$word</span><span class="keyword">=</span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$letter</span><span class="keyword">,</span><span class="default">$substitution</span><span class="keyword">,</span><span class="default">$word</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$len</span><span class="keyword">=</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//Rule for exeptions<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$exceptionsLeading</span><span class="keyword">=array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">4</span><span class="keyword">=&gt;array(</span><span class="string">"ca"</span><span class="keyword">,</span><span class="string">"ch"</span><span class="keyword">,</span><span class="string">"ck"</span><span class="keyword">,</span><span class="string">"cl"</span><span class="keyword">,</span><span class="string">"co"</span><span class="keyword">,</span><span class="string">"cq"</span><span class="keyword">,</span><span class="string">"cu"</span><span class="keyword">,</span><span class="string">"cx"</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">8</span><span class="keyword">=&gt;array(</span><span class="string">"dc"</span><span class="keyword">,</span><span class="string">"ds"</span><span class="keyword">,</span><span class="string">"dz"</span><span class="keyword">,</span><span class="string">"tc"</span><span class="keyword">,</span><span class="string">"ts"</span><span class="keyword">,</span><span class="string">"tz"</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; );<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$exceptionsFollowing</span><span class="keyword">=array(</span><span class="string">"sc"</span><span class="keyword">,</span><span class="string">"zc"</span><span class="keyword">,</span><span class="string">"cx"</span><span class="keyword">,</span><span class="string">"kx"</span><span class="keyword">,</span><span class="string">"qx"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//Table for coding<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$codingTable</span><span class="keyword">=array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">0</span><span class="keyword">=&gt;array(</span><span class="string">"a"</span><span class="keyword">,</span><span class="string">"e"</span><span class="keyword">,</span><span class="string">"i"</span><span class="keyword">,</span><span class="string">"j"</span><span class="keyword">,</span><span class="string">"o"</span><span class="keyword">,</span><span class="string">"u"</span><span class="keyword">,</span><span class="string">"y"</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">1</span><span class="keyword">=&gt;array(</span><span class="string">"b"</span><span class="keyword">,</span><span class="string">"p"</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">2</span><span class="keyword">=&gt;array(</span><span class="string">"d"</span><span class="keyword">,</span><span class="string">"t"</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">3</span><span class="keyword">=&gt;array(</span><span class="string">"f"</span><span class="keyword">,</span><span class="string">"v"</span><span class="keyword">,</span><span class="string">"w"</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">4</span><span class="keyword">=&gt;array(</span><span class="string">"c"</span><span class="keyword">,</span><span class="string">"g"</span><span class="keyword">,</span><span class="string">"k"</span><span class="keyword">,</span><span class="string">"q"</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">48</span><span class="keyword">=&gt;array(</span><span class="string">"x"</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">5</span><span class="keyword">=&gt;array(</span><span class="string">"l"</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">6</span><span class="keyword">=&gt;array(</span><span class="string">"m"</span><span class="keyword">,</span><span class="string">"n"</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">7</span><span class="keyword">=&gt;array(</span><span class="string">"r"</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">8</span><span class="keyword">=&gt;array(</span><span class="string">"c"</span><span class="keyword">,</span><span class="string">"s"</span><span class="keyword">,</span><span class="string">"z"</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; );<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$len</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]=</span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Exceptions<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$i</span><span class="keyword">==</span><span class="default">0 </span><span class="keyword">AND </span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">].</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">]==</span><span class="string">"cr"</span><span class="keyword">) </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]=</span><span class="default">4</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$exceptionsLeading </span><span class="keyword">as </span><span class="default">$code</span><span class="keyword">=&gt;</span><span class="default">$letters</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">].</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">],</span><span class="default">$letters</span><span class="keyword">)){<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]=</span><span class="default">$code</span><span class="keyword">;<br />
<br />
}&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$i</span><span class="keyword">!=</span><span class="default">0 </span><span class="keyword">AND (</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">].</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], <br />
</span><span class="default">$exceptionsFollowing</span><span class="keyword">))) {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]=</span><span class="default">8</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; <br />
<br />
}&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Normal encoding<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]==</span><span class="string">""</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$codingTable </span><span class="keyword">as </span><span class="default">$code</span><span class="keyword">=&gt;</span><span class="default">$letters</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">],</span><span class="default">$letters</span><span class="keyword">))</span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]=</span><span class="default">$code</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//delete double values<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$len</span><span class="keyword">=</span><span class="default">count</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$len</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]==</span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">]) </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]=</span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//delete vocals <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&gt;</span><span class="default">$len</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++){</span><span class="comment">//omitting first characer code and h<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]==</span><span class="default">0</span><span class="keyword">) </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]=</span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$value</span><span class="keyword">=</span><span class="default">array_filter</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$value</span><span class="keyword">=</span><span class="default">implode</span><span class="keyword">(</span><span class="string">""</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71138""></a>
  <div class="note">
   <strong class="user">shortcut</strong>
   <a href="#71138" class="date">13-Nov-2006 11:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The answer to whether soundex works except for the first letter in klancy vs clancy is to always prefix words with the same letter.<br />
<br />
aklancy will match aclancy<br />
bklancy will match bclancy<br />
<br />
soundex seems to only check the 1st 2 syllables.??<br />
ie:&nbsp; spectacular matches spectacle<br />
<br />
just a thought if you rely on soundex.<br />
<br />
k-</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57437""></a>
  <div class="note">
   
   <a href="#57437" class="date">04-Oct-2005 12:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Since the first letter is included in the phonetic representation in the output, it is worth pointing out that if you want a soundex key to work without the problems of klansy and clansy sounding different, take the substring from the first letter, as the first letter is the main constant of the word, and the numerical value is that of the phontic structure of the word.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56724""></a>
  <div class="note">
   <strong class="user">crchafer-php at c2se dot com</strong>
   <a href="#56724" class="date">13-Sep-2005 08:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Rewritten, maybe -- but the algorithm has some obvious<br />
optimisations which can be done, for example...<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function text__soundex( $text ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $k = ' 123 12&nbsp; 22455 12623 1 2 2';<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $nl = strlen( $tN = strtoupper( $text ) );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $p = trim( $k{ ord( $tS = $tN{0} ) - 65 } );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for( $n = 1; $n &lt; $nl; ++$n )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( ( $l = trim( $k{ ord( $tN{ $n } ) - 65 } ) ) != $p )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $tS .= ( $p = $l );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return substr( $tS . '000', 0, 4 );<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
// Notes:<br />
// $k is the $key, essentially $SoundKey inverted<br />
// $tN is the uppercase of the text to be optimised<br />
// $tS is the partaully generated output <br />
// $l is the current letter, $p the previous<br />
// $n and $nl are iteration indicies<br />
// 65 is ord('A'), precalculated for speed<br />
// none ascii letters are not supported<br />
// watch the brackets, quite a mixture here<br />
<br />
(Code has suffered only basic tests, though it appears to<br />
match the output of PHP's soundex(), speed untested --<br />
though this should be /much/ faster than a4_perfect's<br />
rewrite due to the removal of most loops and compares.)<br />
<br />
C<br />
2005-09-13</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="48763""></a>
  <div class="note">
   <strong class="user">Marc Quinton.</strong>
   <a href="#48763" class="date">06-Jan-2005 06:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
a French soundex version ; could be used for other foreigns languages where soudex lacks. Perhaps, a class with each language specifics could be writen.<br />
<br />
<a href="http://www.php-help.net/sources-php/a.french.adapted.soundex.289.html" rel="nofollow" target="_blank">http://www.php-help.net/sources-php/a.french.adapted.soundex.289.html</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="45843""></a>
  <div class="note">
   <strong class="user">justin at NO dot blukrew dot SPAM dot com</strong>
   <a href="#45843" class="date">21-Sep-2004 04:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I originally looked at soundex() because I wanted to compare how individual letters sounded. So, when pronouncing a string of generated characters it would be easy to to distinguish them from eachother.&nbsp; (ie, TGDE is hard to distinguish, whereas RFQA is easier to understand). The goal was to generate IDs that could be easily understood with a high degree of accuracy over a radio of varying quality. I quickly figured out that soundex and metaphone wouldn't do this (they work for words), so I wrote the following to help out. The ID generation function iteratively calls chrSoundAlike() to compare each new character with the preceeding characters. I'd be interested in recieving any feedback on this. Thanks.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">chrSoundAlike</span><span class="keyword">(</span><span class="default">$char1</span><span class="keyword">, </span><span class="default">$char2</span><span class="keyword">, </span><span class="default">$opts </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$char1 </span><span class="keyword">= </span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$char1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$char2 </span><span class="keyword">= </span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$char2</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$opts&nbsp; </span><span class="keyword">= </span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$opts</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Setup the sets of characters that sound alike.<br />
&nbsp;&nbsp;&nbsp; // (Options: include numbers, include W, include both, or default is none of those.)<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">switch (</span><span class="default">$opts</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; case </span><span class="string">'NUMBERS'</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sets </span><span class="keyword">= array(</span><span class="default">0 </span><span class="keyword">=&gt; array(</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'J'</span><span class="keyword">, </span><span class="string">'K'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; array(</span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'G'</span><span class="keyword">, </span><span class="string">'P'</span><span class="keyword">, </span><span class="string">'T'</span><span class="keyword">, </span><span class="string">'V'</span><span class="keyword">, </span><span class="string">'Z'</span><span class="keyword">, </span><span class="string">'3'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">2 </span><span class="keyword">=&gt; array(</span><span class="string">'F'</span><span class="keyword">, </span><span class="string">'S'</span><span class="keyword">, </span><span class="string">'X'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">3 </span><span class="keyword">=&gt; array(</span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'Y'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">4 </span><span class="keyword">=&gt; array(</span><span class="string">'M'</span><span class="keyword">, </span><span class="string">'N'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">5 </span><span class="keyword">=&gt; array(</span><span class="string">'Q'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'W'</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; break;<br />
<br />
&nbsp;&nbsp;&nbsp; case </span><span class="string">'STRICT'</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sets </span><span class="keyword">= array(</span><span class="default">0 </span><span class="keyword">=&gt; array(</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'J'</span><span class="keyword">, </span><span class="string">'K'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; array(</span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'G'</span><span class="keyword">, </span><span class="string">'P'</span><span class="keyword">, </span><span class="string">'T'</span><span class="keyword">, </span><span class="string">'V'</span><span class="keyword">, </span><span class="string">'Z'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">2 </span><span class="keyword">=&gt; array(</span><span class="string">'F'</span><span class="keyword">, </span><span class="string">'S'</span><span class="keyword">, </span><span class="string">'X'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">3 </span><span class="keyword">=&gt; array(</span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'Y'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">4 </span><span class="keyword">=&gt; array(</span><span class="string">'M'</span><span class="keyword">, </span><span class="string">'N'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">5 </span><span class="keyword">=&gt; array(</span><span class="string">'Q'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'W'</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; case </span><span class="string">'BOTH'</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sets </span><span class="keyword">= array(</span><span class="default">0 </span><span class="keyword">=&gt; array(</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'J'</span><span class="keyword">, </span><span class="string">'K'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; array(</span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'G'</span><span class="keyword">, </span><span class="string">'P'</span><span class="keyword">, </span><span class="string">'T'</span><span class="keyword">, </span><span class="string">'V'</span><span class="keyword">, </span><span class="string">'Z'</span><span class="keyword">, </span><span class="string">'3'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">2 </span><span class="keyword">=&gt; array(</span><span class="string">'F'</span><span class="keyword">, </span><span class="string">'S'</span><span class="keyword">, </span><span class="string">'X'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">3 </span><span class="keyword">=&gt; array(</span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'Y'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">4 </span><span class="keyword">=&gt; array(</span><span class="string">'M'</span><span class="keyword">, </span><span class="string">'N'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">5 </span><span class="keyword">=&gt; array(</span><span class="string">'Q'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'W'</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; break;<br />
<br />
&nbsp;&nbsp;&nbsp; default:<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sets </span><span class="keyword">= array(</span><span class="default">0 </span><span class="keyword">=&gt; array(</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'J'</span><span class="keyword">, </span><span class="string">'K'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; array(</span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'G'</span><span class="keyword">, </span><span class="string">'P'</span><span class="keyword">, </span><span class="string">'T'</span><span class="keyword">, </span><span class="string">'V'</span><span class="keyword">, </span><span class="string">'Z'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">2 </span><span class="keyword">=&gt; array(</span><span class="string">'F'</span><span class="keyword">, </span><span class="string">'S'</span><span class="keyword">, </span><span class="string">'X'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">3 </span><span class="keyword">=&gt; array(</span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'Y'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">4 </span><span class="keyword">=&gt; array(</span><span class="string">'M'</span><span class="keyword">, </span><span class="string">'N'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">5 </span><span class="keyword">=&gt; array(</span><span class="string">'Q'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// See if $char1 is in a set.<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$matchset </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$sets</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$char1</span><span class="keyword">, </span><span class="default">$sets</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$matchset </span><span class="keyword">= </span><span class="default">$sets</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// IF char2 is in the same set as char1, or if char1 and char2 and the same, then return true.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$char2</span><span class="keyword">, </span><span class="default">$matchset</span><span class="keyword">) OR </span><span class="default">$char1 </span><span class="keyword">== </span><span class="default">$char2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">TRUE</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="33922""></a>
  <div class="note">
   <strong class="user">mail at gettheeawayspam dot iaindooley dot com</strong>
   <a href="#33922" class="date">10-Jul-2003 11:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The soundex 'different letter in front' problem can be solved by using levenshtein() on the soundex codes. in my application, which is searching a database of album names for entries that match a particular user provided string, i do the following:<br />
<br />
1. Search the database for the exact name<br />
2. Search the database for entries where the name occurs anyway as a string<br />
3. Search the database for entries where any of the words in the name (if the user has typed in more than one word) is present, except for little words (and, the, of etc)<br />
4. Then, if all this fails, I go to plan b:<br />
<br />
- calculate the levenshtein distance (levenshtein()) between the user search term and each of the entries in the database as a percentage of the length of the user search term entered<br />
<br />
- calculate the levenshtein distance between the metphone codes of the user search term entered and each field in the database as a percentage of the length of the metaphone code of the user search term entered<br />
<br />
- calculate the levenshtein distance between the soundex codes of the user search term entered and each field in the database as a percentage of the length of the soundex code of the original user search term entered<br />
<br />
if any of these percentages is less than 50 (means that two soundex codes with different first letters will be accepted!!) then the entry is accepted as a possible match.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="32854""></a>
  <div class="note">
   <strong class="user">pee whitt at dental dot ufl dor edu</strong>
   <a href="#32854" class="date">09-Jun-2003 06:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
fie at myrealbox dot com-<br />
<br />
regarding your soudex syllable request- i think counting vowel clusters in the word will result in an accurate count of syllables.&nbsp; so no soudex feature is necessary, just count through the chars in the word, and everytime you run from vowel to consanant, increment the syllable count.<br />
<br />
using this logic, this sentence is categorized as follows.<br />
2 1 2 1 1 (3) (0) (4) (0) 2<br />
<br />
where (#) marks a word that is incorrectly categorized.&nbsp; i'm sure usiong a little thinking one could figure out the logic in those cases that would result in an accurate count.&nbsp; counting changes from vowel to consanant would yield-<br />
(1) 1 2 1 2 1 (4) 1 2<br />
<br />
taking the average and then cieling of the two types would fix most of the errors.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="30163""></a>
  <div class="note">
   <strong class="user">fie at myrealbox dot com</strong>
   <a href="#30163" class="date">08-Mar-2003 05:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
eek... hosting got taken down on that server.. here's the code for the previous<br />
<br />
function cg_sylc($nos){<br />
&nbsp; $nos = strtoupper($nos);<br />
&nbsp; $syllables = 0;<br />
<br />
&nbsp; $before = strlen($nos);<br />
&nbsp; $nos = str_replace(array('AA','AE','AI','AO','AU',<br />
&nbsp; 'EA','EE','EI','EO','EU','IA','IE','II','IO',<br />
&nbsp; 'IU','OA','OE','OI','OO','OU','UA','UE',<br />
&nbsp; 'UI','UO','UU'), "", $nos);<br />
&nbsp; $after = strlen($nos);<br />
&nbsp; $diference = $before - $after;<br />
&nbsp; if($before != $after) $syllables += $diference / 2;<br />
<br />
&nbsp; if($nos[strlen($nos)-1] == "E") $syllables --;<br />
&nbsp; if($nos[strlen($nos)-1] == "Y") $syllables ++;<br />
<br />
&nbsp; $before = $after;<br />
&nbsp; $nos = str_replace(array('A','E','I','O','U'),"",$nos);<br />
&nbsp; $after = strlen($nos);<br />
&nbsp; $syllables += ($before - $after);<br />
<br />
&nbsp; return $syllables;<br />
}<br />
<br />
function cg_SoundEx($SExStr){<br />
&nbsp; $syl = cg_sylc($SExStr);<br />
&nbsp; $SExStr = strtoupper($SExStr);<br />
<br />
&nbsp;&nbsp;&nbsp; for($i = 1, $ii = 2,print $SExStr[0]; ;$ii++){<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(($SExStr[$i] != $SExStr[$ii])){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $tsstr .= $SExStr[$ii];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $i ++;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; if($SExStr[$ii] == false){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp; $tsstr = str_replace(array('A', 'E', 'H', 'I', 'O', 'U', 'W', 'Y'), "", $tsstr);<br />
&nbsp; $tsstr = str_replace(array('B', 'F', 'P', 'V'), "1", $tsstr);<br />
&nbsp; $tsstr = str_replace(array('C', 'G', 'J', 'K', 'Q', 'S', 'X', 'Z', '?'), "2", $tsstr);<br />
&nbsp; $tsstr = str_replace(array('D', 'T'), "3", $tsstr);<br />
&nbsp; $tsstr = str_replace(array('L'), "4", $tsstr);<br />
&nbsp; $tsstr = str_replace(array('M', 'N', '?'), "5", $tsstr);<br />
&nbsp; $tsstr = str_replace(array('R'), "6", $tsstr);<br />
<br />
&nbsp; while($iii &lt; 3){<br />
&nbsp;&nbsp;&nbsp; if($tsstr[$iii] != false){<br />
&nbsp;&nbsp; &nbsp;&nbsp; $ttsstr .= $tsstr[$iii];<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp;&nbsp; $ttsstr .= "0";<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; $iii ++;<br />
&nbsp; }<br />
&nbsp; $ttsstr .= $syl;<br />
&nbsp; print $ttsstr;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="29815""></a>
  <div class="note">
   <strong class="user">fie at myrealbox dot com</strong>
   <a href="#29815" class="date">25-Feb-2003 05:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
administrator at zinious dot com:<br />
<br />
Sorry but your code wasnt soundex compliant<br />
here were my results with your code, my code, and the default..<br />
<br />
string: rest<br />
R620 perform administrator's function 0.009452<br />
R230 perform cg's function 0.001779<br />
R230 perform default soundex function 9.4999999999956E-005<br />
<br />
string: reset<br />
R620 perform administrator's function 0.0055900000000001<br />
R230 perform cg's function 0.00091799999999997<br />
R230 perform default soundex function 0.00010600000000005<br />
<br />
i dunno why the default, every once in a while, will for some reason be 9.xxx. very odd i think..<br />
my code is at the bottom.. these tests were before the soundex modification as i discribe below..<br />
btw for all the original specs on the soundex algorithm goto<br />
<a href="http://www.star-shine.net/~functionifelse/GFD/?word=soundex" rel="nofollow" target="_blank">http://www.star-shine.net/~functionifelse/GFD/?word=soundex</a><br />
<br />
dalibor dot toth at podravka dot hr:<br />
<br />
yes it is perhaps sad that it gives you the same code,<br />
even metaphone has that problem..<br />
but one might not want to be so accurate.. if somone<br />
is on search engine.. lets call it shmoogle looking<br />
for "php array reset" and search for "php array rest"<br />
then shmoogle might return stuff about beds and such..<br />
(if they were all stupid and didnt use the first words<br />
as more important) so anyways shmoogle might need it to<br />
be less accurate in such cases.. but nonetheless..<br />
my fix for this is to add the number of syllables at the end of the string making it 5 characters long..<br />
this would work as fallows..<br />
<br />
code at: <a href="http://star-shine.net/~functionifelse/cg_soundex.php" rel="nofollow" target="_blank">http://star-shine.net/~functionifelse/cg_soundex.php</a><br />
<br />
or if you wanted to just use the default soundex function<br />
<br />
$str = soundex($str).cg_sylc($str);<br />
<br />
revolutionary more or less.. problly less...<br />
This function is only meant for one word though.. i'd like to see someone<br />
modify it to use split and run it through a loop to get each words cg_soundex<br />
that'll be fun ;)<br />
i would also like to sujest to the php zend apache kinda people who make php<br />
to add an optional additional variable the user can specify as fallows<br />
<br />
soundex("string",SYL);<br />
<br />
which would return the number of syllables at the end of the string<br />
highly accurate sound testing woo! also you could add VOW for vowels<br />
and CONS for consonant or whatever else someone would want..<br />
but i really think the number of syllables will be pleanty efficiant.<br />
umm.. if this helps anyone your welcome.. ummm.. good luck in all<br />
your php adventures.. oh... and the final results<br />
<br />
syllables<br />
1 rest<br />
2 reset<br />
metaphone<br />
RST rest<br />
RST reset<br />
soundex<br />
R230 rest<br />
R230 reset<br />
<br />
string: rest<br />
R2301 perform cg's function 0.00211<br />
R230 perform default soundex function 0.00011299999999997<br />
<br />
string: reset<br />
R2302 perform cg's function 0.001691<br />
R230 perform default soundex function 0.00010399999999999<br />
<br />
the default function is a tad bit faster..<br />
so maybe they will add this option and we'll have speed and accuracy.<br />
<br />
SILENT WIND OF DOOM WOOSH!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="28544""></a>
  <div class="note">
   <strong class="user">jr</strong>
   <a href="#28544" class="date">16-Jan-2003 09:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
a workaround for the mysql/php differences in implementation of soundex is to do the soundex comparison entirely within mysql.<br />
<br />
for example:<br />
$sql = "SELECT * FROM table WHERE substring(soundex(field), 1, 4) =&nbsp; substring(soundex('".$wordsearch."'), 1, 4)";</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="27838""></a>
  <div class="note">
   <strong class="user">info at nederlandsch dot net</strong>
   <a href="#27838" class="date">20-Dec-2002 05:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
MySQL soundex (3.23.49) doesn't examine the first character at all to see whether it should be skipped. Therefore the Dutch name of The Hague, the country's government seat, 's-Gravenhage will give a soundex value of '261 in MySQL and S615 in PHP.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="22210""></a>
  <div class="note">
   <strong class="user">dcallaghan at linuxmail dot org</strong>
   <a href="#22210" class="date">10-Jun-2002 04:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Although the standard soundex string is 4 characters long, and this is what's returned by the php function, some database programs return an arbitrary number of strings. MySQL, for instance.<br />
<br />
The MySQL documentation covers this, recommending that you may wish to use substring to output the standard 4 characters. Let's take 'Dostoyevski' as an example.<br />
<br />
select soundex("Dostoyevski")<br />
returns D2312<br />
select substring(soundex("Dostoyevski"), 1, 4);<br />
returns D231<br />
<br />
PHP will return the value as 'D231'<br />
<br />
So, to use the soundex function to generate a WHERE parameter in a MySQL SELECT statement, you might try this:<br />
$s = soundex('Dostoyevski');<br />
SELECT * FROM authors WHERE substring(soundex(lastname), 1 , 4) = "' . $s&nbsp; . '"';<br />
<br />
Or, if you want to bypass the php function<br />
$result = mysql_query("select soundex('Dostoyevski')");<br />
$s = mysql_result($result, 0, 0);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="21564""></a>
  <div class="note">
   <strong class="user">witold4249 at rogers dot com</strong>
   <a href="#21564" class="date">17-May-2002 10:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A MUCH easier way to check for similarity between words and avoid the problems that come up with Klancy/Clancy would be to simply add any letter infront of the string<br />
<br />
ie:&nbsp; OKlancy/OClancy</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="21563""></a>
  <div class="note">
   
   <a href="#21563" class="date">17-May-2002 10:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A MUCH easier way to do the above search would be to simply add any letter in front of the string and then compare them. <br />
<br />
ie. Klancy =&gt; LKlancy<br />
&nbsp;&nbsp;&nbsp; Clancy =&gt; LClancy</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="20612""></a>
  <div class="note">
   <strong class="user">administrator at zinious dot com</strong>
   <a href="#20612" class="date">09-Apr-2002 08:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wrote this function a long time ago in CGI-perl and then translated (if you can call it that) into PHP.&nbsp; A little clunky to say the least, but should handle true soundex specs 100%:<br />
<br />
// ---begin code---<br />
<br />
function MakeSoundEx($stringtomakesoundexof)<br />
{<br />
&nbsp;&nbsp;&nbsp; $temp_Name = $stringtomakesoundexof;<br />
&nbsp;&nbsp;&nbsp; $SoundKey1 = "BPFV";<br />
&nbsp;&nbsp;&nbsp; $SoundKey2 = "CSKGJQXZ";<br />
&nbsp;&nbsp;&nbsp; $SoundKey3 = "DT";<br />
&nbsp;&nbsp;&nbsp; $SoundKey4 = "L";<br />
&nbsp;&nbsp;&nbsp; $SoundKey5 = "MN";<br />
&nbsp;&nbsp;&nbsp; $SoundKey6 = "R";<br />
&nbsp;&nbsp;&nbsp; $SoundKey7 = "AEHIOUWY";<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $temp_Name = strtoupper($temp_Name);<br />
&nbsp;&nbsp;&nbsp; $temp_Last = "";<br />
&nbsp;&nbsp;&nbsp; $temp_Soundex = substr($temp_Name, 0, 1);<br />
<br />
&nbsp;&nbsp;&nbsp; $n = 1;<br />
&nbsp;&nbsp;&nbsp; for ($i = 0; $i &lt; strlen($SoundKey1); $i++)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($temp_Soundex == substr($SoundKey1, i - 1, 1))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $temp_Last = "1";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; for ($i = 0; $i &lt; strlen($SoundKey2); $i++)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($temp_Soundex == substr($SoundKey2, i - 1, 1))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $temp_Last = "2";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; for ($i = 0; $i &lt; strlen($SoundKey3); $i++)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($temp_Soundex == substr($SoundKey3, i - 1, 1))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $temp_Last = "3";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; for ($i = 0; $i &lt; strlen($SoundKey4); $i++)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($temp_Soundex == substr($SoundKey4, i - 1, 1))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $temp_Last = "4";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; for ($i = 0; $i &lt; strlen($SoundKey5); $i++)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($temp_Soundex == substr($SoundKey5, i - 1, 1))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $temp_Last = "5";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; for ($i = 0; $i &lt; strlen($SoundKey6); $i++)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($temp_Soundex == substr($SoundKey6, i - 1, 1))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $temp_Last = "6";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; for ($i = 0; $i &lt; strlen($SoundKey6); $i++)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($temp_Soundex == substr($SoundKey6, i - 1, 1))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $temp_Last = "";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; for ($n = 1; $n &lt; strlen($temp_Name); $n++)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (strlen($temp_Soundex) &lt; 4)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for ($i = 0; $i &lt; strlen($SoundKey1); $i++)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (substr($temp_Name, $n - 1, 1) == substr($SoundKey1, $i - 1, 1) &amp;&amp; $temp_Last != "1")<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $temp_Soundex = $temp_Soundex."1";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $temp_Last = "1";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for ($i = 0; $i &lt; strlen($SoundKey2); $i++)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (substr($temp_Name, $n - 1, 1) == substr($SoundKey2, $i - 1, 1) &amp;&amp; $temp_Last != "2")<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $temp_Soundex = $temp_Soundex."2";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $temp_Last = "2";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for ($i = 0; $i &lt; strlen($SoundKey3); $i++)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (substr($temp_Name, $n - 1, 1) == substr($SoundKey3, $i - 1, 1) &amp;&amp; $temp_Last != "3")<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $temp_Soundex = $temp_Soundex."3";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $temp_Last = "3";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for ($i = 0; $i &lt; strlen($SoundKey4); $i++)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (substr($temp_Name, $n - 1, 1) == substr($SoundKey4, $i - 1, 1) &amp;&amp; $temp_Last != "4")<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $temp_Soundex = $temp_Soundex."4";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $temp_Last = "4";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for ($i = 0; $i &lt; strlen($SoundKey5); $i++)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (substr($temp_Name, $n - 1, 1) == substr($SoundKey5, $i - 1, 1) &amp;&amp; $temp_Last != "5")<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $temp_Soundex = $temp_Soundex."5";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $temp_Last = "5";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for ($i = 0; $i &lt; strlen($SoundKey6); $i++)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (substr($temp_Name, $n - 1, 1) == substr($SoundKey6, $i - 1, 1) &amp;&amp; $temp_Last != "6")<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $temp_Soundex = $temp_Soundex."6";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $temp_Last = "6";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for ($i = 0; $i &lt; strlen($SoundKey7); $i++)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (substr($temp_Name, $n - 1, 1) == substr($SoundKey7, $i - 1, 1))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $temp_Last = "";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; while (strlen($temp_Soundex) &lt; 4)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $temp_Soundex = $temp_Soundex."0";<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return $temp_Soundex;<br />
}<br />
<br />
// --- end code---</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="2708""></a>
  <div class="note">
   <strong class="user">cap at capsi dot cx</strong>
   <a href="#2708" class="date">13-Dec-1999 07:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
soundex() unfortunately is very sensitive about the first character. It is not possible to use it and have Clansy and Klansy return the same value. If you want to do a phonetic search on such names you will still need to write a routine to evaluate C452 as being similar to K452.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

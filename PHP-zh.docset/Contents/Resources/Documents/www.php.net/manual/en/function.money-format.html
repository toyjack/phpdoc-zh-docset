<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>将数字格式化成货币字符串</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.metaphone.html">? metaphone</a></li>
      <li style="float: right;"><a href="function.nl-langinfo.html">nl_langinfo ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.strings.html">字符串 函数</a></li>
    <li>将数字格式化成货币字符串</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.money-format" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">money_format</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.3.0, PHP 5, PHP 7)</p><p class="refpurpose"><span class="refname">money_format</span> &mdash; <span class="dc-title">将数字格式化成货币字符串</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.money-format-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>money_format</strong></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$format</code></span>, <span class="methodparam"><span class="type">float</span> <code class="parameter">$number</code></span>): <span class="type">string</span></div>

  <p class="para rdfs-comment">
   <span class="function"><strong>money_format()</strong></span> 返回格式化好的 
   <code class="parameter">number</code> 版本。
   此函数包装了 C 函数库中的 <span class="function"><strong>strfmon()</strong></span>，不同之处是：此实现每次只能转化一个数字。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.money-format-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">format</code></dt>

     <dd>

      <p class="para">
       格式字符串由以下几部分组成：
       <ul class="itemizedlist">
        <li class="listitem"><p class="para">单个 <code class="literal">%</code> 字符</p></li>
        <li class="listitem"><p class="para">可选的标记（flags）</p></li>
        <li class="listitem"><p class="para">可选的字段宽度</p></li>
        <li class="listitem"><p class="para">可选的，左侧精度</p></li>
        <li class="listitem"><p class="para">可选的，右侧精度</p></li>
        <li class="listitem"><p class="para">必选的，单个转化字符</p></li>
       </ul>
      </p>
      <p class="formalpara">
       <h5 class="title">标记(Flags)</h5>
       <p class="para">
        可选多个标记，分别是：
        <dl>
         
          <dt>
<code class="literal">=</code><span class="replaceable">f</span></dt>

          <dd>

           <p class="para">
            字符：<code class="literal">=</code>，并紧跟一个字符（单字节） <span class="replaceable">f</span>，用于数字填充。默认的填充字符是空格。
           </p>
          </dd>

         
         
          <dt>
<code class="literal">^</code></dt>

          <dd>

           <p class="para">
            禁用分组字符（比如金额中的逗号。在本地区域设置 locale 中定义）。
           </p>
          </dd>

         
         
          <dt>
<code class="literal">+</code> or <code class="literal">(</code></dt>

          <dd>

           <p class="para">
            正负数字的格式。使用 <code class="literal">+</code>，将使用区域设置（locale）中相当于 <code class="literal">+</code> 和 <code class="literal">-</code> 的符号。
            如果使用 <code class="literal">(</code>，负数将被圆括号围绕。不设置的话，默认为
            <code class="literal">+</code>。
           </p>
          </dd>

         
         
          <dt>
<code class="literal">!</code></dt>

          <dd>

           <p class="para">
            不输出货币符号（比如 ￥）。
           </p>
          </dd>

         
         
          <dt>
<code class="literal">-</code></dt>

          <dd>

           <p class="para">
            有这个符号的时候，将使字段左对齐（填充到右边），默认是相反的，是右对齐的（填充到左边）。
           </p>
          </dd>

         
        </dl>

       </p>
      </p>
      <p class="formalpara">
       <h5 class="title">字段宽度</h5>
       <p class="para">
        <dl>
         
          <dt>
<span class="replaceable">w</span></dt>

          <dd>

           <p class="para">
            十进制数值字符串的宽度。字段将右对齐，除非使用了 <code class="literal">-</code> 标记。默认值 0。
           </p>
          </dd>

         
        </dl>

       </p>
      </p>
      <p class="formalpara">
       <h5 class="title">左侧精度</h5>
       <p class="para">
        <dl>
         
          <dt>
<code class="literal">#</code><span class="replaceable">n</span></dt>

          <dd>

           <p class="para">
            小数字符（比如小数点）前的最大位数 (<span class="replaceable">n</span>)。
            常用于同一列中的格式对齐。
            如果位数小于 <span class="replaceable">n</span> 则使用填充字符填满。
            如果实际位数大于 <span class="replaceable">n</span>，此设置将被忽略。
           </p>
           <p class="para">
            如果没用 <code class="literal">^</code> 标识禁用分组，分组分隔符会在添加填充字符之前插入（如果有的话）。
            分组分隔符不会应用到填充字符里，哪怕填充字符是个数字。
           </p>
           <p class="para">
            为了保证对齐，出现在之前或者之后的字符，都会填充必要的空格，保证正负情况下长度都一样。
           </p>
          </dd>

         
        </dl>

       </p>
      </p>
      <p class="formalpara">
       <h5 class="title">
        右侧精度
       </h5>
       <p class="para">
        <dl>
         
          <dt>
<code class="literal">.</code><span class="replaceable">p</span></dt>

          <dd>

           <p class="para">
            小数点后的一段数字
            (<span class="replaceable">p</span>)。
            如果 <span class="replaceable">p</span> 的值是 0（零），小数点右侧的数值将被删除。
            如果不使用这个标记，默认展现取决于当前的区域设置。
            小数点后指定位数的数字，四舍五入格式化。
           </p>
          </dd>

         
        </dl>

       </p>
      </p>
      <p class="formalpara">
       <h5 class="title">
        转化字符
       </h5>
       <p class="para">
        <dl>
         
          <dt>
<code class="literal">i</code></dt>

          <dd>

           <p class="para">
            根据国际化区域设置中的货币格式，格式化数值。（比如，locale 是 USA：USD 1,234.56）。
           </p>
          </dd>

         
         
          <dt>
<code class="literal">n</code></dt>

          <dd>

           <p class="para">
            根据国际化区域设置中国家的货币格式，格式化数值。（比如，locale 是 de_DE：EU1.234,56）。
           </p>
          </dd>

         
         
          <dt>
<code class="literal">%</code></dt>

          <dd>

           <p class="para">
            返回字符 <code class="literal">%</code>。
           </p>
          </dd>

         
        </dl>

       </p>
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">number</code></dt>

     <dd>

      <p class="para">
       需要格式化的数字。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.money-format-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   返回格式化后的字符。格式字符串前后的字符将原封不动返回。
   传入的 <code class="parameter">number</code> 如果不是数字，将返回  <strong><code>null</code></strong> 并且产生
    <strong><code>E_WARNING</code></strong>。
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.money-format-notes">
  <h3 class="title">注释</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    具有 strfmon 的系统才有 <span class="function"><strong>money_format()</strong></span> 函数。
    例如 Windows 不具备，所以 Windows 系统上 <span class="function"><strong>money_format()</strong></span> 未定义。
   </p>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    locale 设置中， <strong><code>LC_MONETARY</code></strong> 会影响此函数的行为。
在使用函数前，首先要用  <span class="function"><a href="function.setlocale.html" class="function">setlocale()</a></span> 来设置合适的区域设置（locale）。
   </p>
  </p></blockquote>   
 </div>


 <div class="refsect1 examples" id="refsect1-function.money-format-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-4691">
    <p><strong>Example #1 <span class="function"><strong>money_format()</strong></span> 例子</strong></p>
    <div class="example-contents"><p>
     使用不同的 locale 和格式字符串，来说明此函数的用法。
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$number&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1234.56</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;让我们打印&nbsp;en_US&nbsp;locale&nbsp;的国际化格式<br /></span><span style="color: #0000BB">setlocale</span><span style="color: #007700">(</span><span style="color: #0000BB">LC_MONETARY</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'en_US'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">money_format</span><span style="color: #007700">(</span><span style="color: #DD0000">'%i'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$number</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #FF8000">//&nbsp;USD&nbsp;1,234.56<br /><br />//&nbsp;意大利国家的格式，带两位浮点小数`<br /></span><span style="color: #0000BB">setlocale</span><span style="color: #007700">(</span><span style="color: #0000BB">LC_MONETARY</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'it_IT'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">money_format</span><span style="color: #007700">(</span><span style="color: #DD0000">'%.2n'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$number</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #FF8000">//&nbsp;Eu&nbsp;1.234,56<br /><br />//&nbsp;负数的使用<br /></span><span style="color: #0000BB">$number&nbsp;</span><span style="color: #007700">=&nbsp;-</span><span style="color: #0000BB">1234.5672</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;美国国家的格式，使用圆括号&nbsp;()&nbsp;标记负数。<br />//&nbsp;左侧精度使用十位<br /></span><span style="color: #0000BB">setlocale</span><span style="color: #007700">(</span><span style="color: #0000BB">LC_MONETARY</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'en_US'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">money_format</span><span style="color: #007700">(</span><span style="color: #DD0000">'%(#10n'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$number</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #FF8000">//&nbsp;($&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,234.57)<br /><br />//&nbsp;相似的格式，添加了右侧两位小数点的精度，同时用&nbsp;*&nbsp;来填充<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">money_format</span><span style="color: #007700">(</span><span style="color: #DD0000">'%=*(#10.2n'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$number</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #FF8000">//&nbsp;($********1,234.57)<br /><br />//&nbsp;让我们左对齐，14位宽，左侧八位，右侧两位，不带分组字符<br />//&nbsp;de_DE&nbsp;的国际化格式<br /></span><span style="color: #0000BB">setlocale</span><span style="color: #007700">(</span><span style="color: #0000BB">LC_MONETARY</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'de_DE'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">money_format</span><span style="color: #007700">(</span><span style="color: #DD0000">'%=*^-14#8.2i'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1234.56</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #FF8000">//&nbsp;Eu&nbsp;1234,56****<br /><br />//&nbsp;让我们在格式字符串前后，添加一些简介<br /></span><span style="color: #0000BB">setlocale</span><span style="color: #007700">(</span><span style="color: #0000BB">LC_MONETARY</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'en_GB'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$fmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'The&nbsp;final&nbsp;value&nbsp;is&nbsp;%i&nbsp;(after&nbsp;a&nbsp;10%%&nbsp;discount)'</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">money_format</span><span style="color: #007700">(</span><span style="color: #0000BB">$fmt</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1234.56</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #FF8000">//&nbsp;The&nbsp;final&nbsp;value&nbsp;is&nbsp;&nbsp;GBP&nbsp;1,234.56&nbsp;(after&nbsp;a&nbsp;10%&nbsp;discount)<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.money-format-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.setlocale.html" class="function" rel="rdfs-seeAlso">setlocale()</a> - 设置地区信息</span></li>
    <li class="member"><span class="function"><a href="function.sscanf.html" class="function" rel="rdfs-seeAlso">sscanf()</a> - 根据指定格式解析输入的字符</span></li>
    <li class="member"><span class="function"><a href="function.sprintf.html" class="function" rel="rdfs-seeAlso">sprintf()</a> - 返回格式化字符串</span></li>
    <li class="member"><span class="function"><a href="function.printf.html" class="function" rel="rdfs-seeAlso">printf()</a> - 输出格式化字符串</span></li>
    <li class="member"><span class="function"><a href="function.number-format.html" class="function" rel="rdfs-seeAlso">number_format()</a> - 以千位分隔符方式格式化一个数字</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="125222""></a>
  <div class="note">
   <strong class="user">sainthyoga2003 at gmail dot com</strong>
   <a href="#125222" class="date">28-Jul-2020 04:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be aware, since PHP 7.3 this method is deprecated and from PHP 7.4 this launch a deprecated error, so, setup your PHP web server to untrack E_DEPRECATED error reporting.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="121312""></a>
  <div class="note">
   <strong class="user">justsomeone</strong>
   <a href="#121312" class="date">04-Jul-2017 11:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Using the money_format function with float values which have more than two decimal digits can result in rounding errors. <br />
Maybe this function will help you to avoid these failures:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// A product with a base price of 12.95<br />
</span><span class="default">$price </span><span class="keyword">= </span><span class="default">1295</span><span class="keyword">;<br />
<br />
</span><span class="comment">// The quantity is also an integer but translated it would be 11.91<br />
</span><span class="default">$quantity </span><span class="keyword">= </span><span class="default">1191</span><span class="keyword">;<br />
<br />
</span><span class="comment">// Result: 154.2345<br />
// It's the same like 12.95 * 11.91<br />
</span><span class="default">$sum </span><span class="keyword">= (</span><span class="default">$price </span><span class="keyword">/ </span><span class="default">100</span><span class="keyword">) * (</span><span class="default">$quantity&nbsp; </span><span class="keyword">/</span><span class="default">100</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Wrong result: 154.23<br />
</span><span class="default">money_format</span><span class="keyword">(</span><span class="string">'%!i'</span><span class="keyword">, </span><span class="default">$sum</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Wrong result: 154.23<br />
</span><span class="default">number_format</span><span class="keyword">(</span><span class="default">$sum</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Wrong result: 154.23<br />
</span><span class="default">bcmul</span><span class="keyword">(</span><span class="default">$price </span><span class="keyword">/ </span><span class="default">100</span><span class="keyword">, </span><span class="default">$quantity </span><span class="keyword">/ </span><span class="default">100</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Correct result : 154.24<br />
</span><span class="default">money_format_rounded</span><span class="keyword">(</span><span class="string">'%!i'</span><span class="keyword">, </span><span class="default">$sum</span><span class="keyword">);<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* Formats a number as a currency string. Rounds every decimal digit to a defined precision on its own.<br />
&nbsp;*<br />
&nbsp;* @param string $format The format for the money_format function<br />
&nbsp;* @param float|int|string $number The number to be formatted<br />
&nbsp;* @param int $maxPrecision Round up to the $maxPrecision number of decimal digit. Default is: 2<br />
&nbsp;* @param int $roundingType Rounding type for the round function. Default is: \PHP_ROUND_HALF_UP<br />
&nbsp;*<br />
&nbsp;* @return string<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">money_format_rounded</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">$number</span><span class="keyword">, </span><span class="default">$maxPrecision </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">, </span><span class="default">$roundingType </span><span class="keyword">= \</span><span class="default">PHP_ROUND_HALF_UP</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$strlen </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$strlen </span><span class="keyword">=== </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">money_format</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">$number</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$length </span><span class="keyword">= </span><span class="default">$strlen </span><span class="keyword">- </span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">, </span><span class="string">'.'</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$length </span><span class="keyword">&lt;= </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">money_format</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">$number</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rounded </span><span class="keyword">= </span><span class="default">$number</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= --</span><span class="default">$length</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&gt;= </span><span class="default">$maxPrecision</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">--) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rounded </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">(</span><span class="default">$rounded</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">$roundingType</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">money_format</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">$rounded</span><span class="keyword">);<br />
}</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119530""></a>
  <div class="note">
   <strong class="user">Felix Duterloo</strong>
   <a href="#119530" class="date">30-Jun-2016 12:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Improvement to Rafael M. Salvioni's solution for money_format on Windows: when no currency symbol is selected, in the formatting, the minus sign was also lost when the locale puts it in position 3 or 4. Changed $currency = '';&nbsp; to: $currency = $cprefix .$csuffix;<br />
<br />
function money_format($format, $number) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $regex = '/%((?:[\^!\-]|\+|\(|\=.)*)([0-9]+)?' .<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; '(?:#([0-9]+))?(?:\.([0-9]+))?([in%])/';<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (setlocale(LC_MONETARY, 0) == 'C') {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; setlocale(LC_MONETARY, '');<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $locale = localeconv();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; preg_match_all($regex, $format, $matches, PREG_SET_ORDER);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach ($matches as $fmatch) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $value = floatval($number);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $flags = array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 'fillchar' =&gt; preg_match('/\=(.)/', $fmatch[1], $match) ?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $match[1] : ' ',<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 'nogroup' =&gt; preg_match('/\^/', $fmatch[1]) &gt; 0,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 'usesignal' =&gt; preg_match('/\+|\(/', $fmatch[1], $match) ?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $match[0] : '+',<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 'nosimbol' =&gt; preg_match('/\!/', $fmatch[1]) &gt; 0,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 'isleft' =&gt; preg_match('/\-/', $fmatch[1]) &gt; 0<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $width = trim($fmatch[2]) ? (int) $fmatch[2] : 0;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $left = trim($fmatch[3]) ? (int) $fmatch[3] : 0;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $right = trim($fmatch[4]) ? (int) $fmatch[4] : $locale['int_frac_digits'];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $conversion = $fmatch[5];<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $positive = true;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($value &lt; 0) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $positive = false;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $value *= -1;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $letter = $positive ? 'p' : 'n';<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $prefix = $suffix = $cprefix = $csuffix = $signal = '';<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $signal = $positive ? $locale['positive_sign'] : $locale['negative_sign'];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; switch (true) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case $locale["{$letter}_sign_posn"] == 1 &amp;&amp; $flags['usesignal'] == '+':<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $prefix = $signal;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case $locale["{$letter}_sign_posn"] == 2 &amp;&amp; $flags['usesignal'] == '+':<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $suffix = $signal;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case $locale["{$letter}_sign_posn"] == 3 &amp;&amp; $flags['usesignal'] == '+':<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $cprefix = $signal;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case $locale["{$letter}_sign_posn"] == 4 &amp;&amp; $flags['usesignal'] == '+':<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $csuffix = $signal;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case $flags['usesignal'] == '(':<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case $locale["{$letter}_sign_posn"] == 0:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $prefix = '(';<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $suffix = ')';<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!$flags['nosimbol']) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $currency = $cprefix .<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ($conversion == 'i' ? $locale['int_curr_symbol'] : $locale['currency_symbol']) .<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $csuffix;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $currency = $cprefix .$csuffix;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $space = $locale["{$letter}_sep_by_space"] ? ' ' : '';<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $value = number_format($value, $right, $locale['mon_decimal_point'], $flags['nogroup'] ? '' : $locale['mon_thousands_sep']);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $value = @explode($locale['mon_decimal_point'], $value);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $n = strlen($prefix) + strlen($currency) + strlen($value[0]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($left &gt; 0 &amp;&amp; $left &gt; $n) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $value[0] = str_repeat($flags['fillchar'], $left - $n) . $value[0];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $value = implode($locale['mon_decimal_point'], $value);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($locale["{$letter}_cs_precedes"]) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $value = $prefix . $currency . $space . $value . $suffix;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $value = $prefix . $value . $space . $currency . $suffix;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($width &gt; 0) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $value = str_pad($value, $width, $flags['fillchar'], $flags['isleft'] ?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; STR_PAD_RIGHT : STR_PAD_LEFT);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $format = str_replace($fmatch[0], $value, $format);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $format;<br />
&nbsp;&nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116725""></a>
  <div class="note">
   <strong class="user">tim</strong>
   <a href="#116725" class="date">19-Feb-2015 10:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For most of us in the US, we don't want to see a "USD" for our currency symbol, so '%i' doesn't cut it.&nbsp; Here's what I used that worked to get what most&nbsp; people expect to see for a number format.<br />
<br />
$number = 123.4<br />
setlocale(LC_MONETARY, 'en_US.UTF-8');<br />
money_format('%.2n', $number);<br />
<br />
output:<br />
$123.40<br />
<br />
That gives me a dollar sign at the beginning, and 2 digits at the end.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115202""></a>
  <div class="note">
   <strong class="user">kaigillmann at googlemail dot com</strong>
   <a href="#115202" class="date">12-Jun-2014 07:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you get "EUR" instead of the euro symbol, set the locale to utf8 charset like this:<br />
<br />
<span class="default">&lt;?php<br />
setlocale</span><span class="keyword">(</span><span class="default">LC_MONETARY</span><span class="keyword">, </span><span class="string">'de_DE.utf8'</span><span class="keyword">);<br />
echo </span><span class="default">money_format</span><span class="keyword">(</span><span class="string">'%+n'</span><span class="keyword">, </span><span class="default">1234.56</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114074""></a>
  <div class="note">
   <strong class="user">todoventas at xarxa-cat dot net</strong>
   <a href="#114074" class="date">09-Jan-2014 03:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In Rafael M. Salvioni function localeconv(); returns an invalid array in my Windows XP SP3 running PHP 5.4.13 so to prevent the Warning Message: implode(): Invalid arguments passed i just add the $locale manually. For other languages just fill the array with the correct settings.<br />
<br />
&lt;?<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; $locale = array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'decimal_point'&nbsp; &nbsp; &nbsp; &nbsp; =&gt; '.',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'thousands_sep'&nbsp; &nbsp; &nbsp; &nbsp; =&gt; '',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'int_curr_symbol'&nbsp; &nbsp; =&gt; 'EUR',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'currency_symbol'&nbsp; &nbsp; =&gt; '',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'mon_decimal_point'&nbsp; &nbsp; =&gt; ',',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'mon_thousands_sep'&nbsp; &nbsp; =&gt; '.',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'positive_sign'&nbsp; &nbsp; &nbsp; &nbsp; =&gt; '',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'negative_sign'&nbsp; &nbsp;&nbsp; =&gt; '-',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'int_frac_digits'&nbsp; &nbsp; =&gt; 2,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'frac_digits'&nbsp; &nbsp; &nbsp; &nbsp; =&gt; 2,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'p_cs_precedes'&nbsp; &nbsp; &nbsp; &nbsp; =&gt; 0,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'p_sep_by_space'&nbsp; &nbsp; =&gt; 1,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'p_sign_posn'&nbsp; &nbsp; &nbsp; &nbsp; =&gt; 1,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'n_sign_posn'&nbsp; &nbsp; &nbsp; &nbsp; =&gt; 1,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'grouping'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; array(),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'mon_grouping'&nbsp; &nbsp; &nbsp; &nbsp; =&gt; array(0 =&gt; 3, 1 =&gt; 3)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; );<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112890""></a>
  <div class="note">
   <strong class="user">jsb17NO at SPAMcornell dot edu</strong>
   <a href="#112890" class="date">02-Aug-2013 08:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To drop zero value decimals, use the following:<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; Same as php number_format(), but if ends in .0, .00, .000, etc... , drops the decimals altogether<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; Returns string type, rounded number - same as php number_format()):<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; Examples:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; number_format_drop_zero_decimals(54.378, 2) ==&gt; '54.38'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; number_format_drop_zero_decimals(54.00, 2) ==&gt; '54'<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">number_format_drop_zero_decimals</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">, </span><span class="default">$n_decimals</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return ((</span><span class="default">floor</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">) == </span><span class="default">round</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">, </span><span class="default">$n_decimals</span><span class="keyword">)) ? </span><span class="default">number_format</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">) : </span><span class="default">number_format</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">, </span><span class="default">$n_decimals</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span>Results:<br />
number_format_drop_zero_decimals(54.377, 2) ==&gt; 54.38<br />
number_format_drop_zero_decimals('54.377', 2) ==&gt; 54.38<br />
number_format_drop_zero_decimals(54.377, 3) ==&gt; 54.377<br />
number_format_drop_zero_decimals(54.007, 2) ==&gt; 54.01<br />
number_format_drop_zero_decimals(54.000, 2) ==&gt; 54<br />
number_format_drop_zero_decimals(54.00, 2) ==&gt; 54<br />
number_format_drop_zero_decimals(54.0, 2) ==&gt; 54<br />
number_format_drop_zero_decimals(54.1, 2) ==&gt; 54.10<br />
number_format_drop_zero_decimals(54., 2) ==&gt; 54<br />
number_format_drop_zero_decimals(54, 2) ==&gt; 54<br />
number_format_drop_zero_decimals(54, 3) ==&gt; 54<br />
number_format_drop_zero_decimals(54 + .13, 2) ==&gt; 54.13<br />
number_format_drop_zero_decimals(54 + .00, 2) ==&gt; 54<br />
number_format_drop_zero_decimals(54.0007, 4) ==&gt; 54.0007<br />
number_format_drop_zero_decimals(54.0007, 3) ==&gt; 54.001<br />
number_format_drop_zero_decimals(54.00007, 3) ==&gt; 54&nbsp; //&nbsp; take notice</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109762""></a>
  <div class="note">
   <strong class="user">~B</strong>
   <a href="#109762" class="date">17-Aug-2012 04:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
We found that after switching from Ubuntu 10.04 php -v 5.3.2, to Ubuntu 12.04 php -v 5.3.10 this no longer worked:
<br />

<br />
<span class="default">&lt;?php setlocale</span><span class="keyword">(</span><span class="default">LC_MONETARY</span><span class="keyword">, </span><span class="string">'en_US'</span><span class="keyword">); </span><span class="default">?&gt;
<br />
</span>
<br />
Found that using:
<br />

<br />
<span class="default">&lt;?php setlocale</span><span class="keyword">(</span><span class="default">LC_MONETARY</span><span class="keyword">, </span><span class="string">'en_US.UTF-8'</span><span class="keyword">); </span><span class="default">?&gt;
<br />
</span>
<br />
worked find</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105961""></a>
  <div class="note">
   <strong class="user">phpdeveloperbalaji at gmail dot com</strong>
   <a href="#105961" class="date">28-Sep-2011 01:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi,
<br />

<br />
For South Asian Currencies, this function could be a handy one.
<br />

<br />
It will handle negative as well as float(Paise).
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">my_money_format</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">strstr</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">,</span><span class="string">"-"</span><span class="keyword">))
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$number </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"-"</span><span class="keyword">,</span><span class="string">""</span><span class="keyword">,</span><span class="default">$number</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$negative </span><span class="keyword">= </span><span class="string">"-"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$split_number </span><span class="keyword">= @</span><span class="default">explode</span><span class="keyword">(</span><span class="string">"."</span><span class="keyword">,</span><span class="default">$number</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rupee </span><span class="keyword">= </span><span class="default">$split_number</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$paise </span><span class="keyword">= @</span><span class="default">$split_number</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; if(@</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$rupee</span><span class="keyword">)&gt;</span><span class="default">3</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$hundreds </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$rupee</span><span class="keyword">,</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$rupee</span><span class="keyword">)-</span><span class="default">3</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$thousands_in_reverse </span><span class="keyword">= </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$rupee</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$rupee</span><span class="keyword">)-</span><span class="default">3</span><span class="keyword">));
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$thousands_in_reverse</span><span class="keyword">)); </span><span class="default">$i</span><span class="keyword">=</span><span class="default">$i</span><span class="keyword">+</span><span class="default">2</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$thousands </span><span class="keyword">.= </span><span class="default">$thousands_in_reverse</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">].</span><span class="default">$thousands_in_reverse</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">].</span><span class="string">","</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$thousands </span><span class="keyword">= </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$thousands</span><span class="keyword">,</span><span class="string">","</span><span class="keyword">));
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$formatted_rupee </span><span class="keyword">= </span><span class="default">$thousands</span><span class="keyword">.</span><span class="string">","</span><span class="keyword">.</span><span class="default">$hundreds</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; else
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$formatted_rupee </span><span class="keyword">= </span><span class="default">$rupee</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; if((int)</span><span class="default">$paise</span><span class="keyword">&gt;</span><span class="default">0</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$formatted_paise </span><span class="keyword">= </span><span class="string">"."</span><span class="keyword">.</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$paise</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$negative</span><span class="keyword">.</span><span class="default">$formatted_rupee</span><span class="keyword">.</span><span class="default">$formatted_paise</span><span class="keyword">;
<br />

<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Thanks,</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98783""></a>
  <div class="note">
   <strong class="user">andrey.dobrozhanskiy [-a-t-] gmail com</strong>
   <a href="#98783" class="date">07-Jul-2010 09:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function divides integer value by commas. F.e.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">echo </span><span class="default">formatMoney</span><span class="keyword">(</span><span class="default">1050</span><span class="keyword">); </span><span class="comment"># 1,050
<br />
</span><span class="keyword">echo </span><span class="default">formatMoney</span><span class="keyword">(</span><span class="default">1321435.4</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">); </span><span class="comment"># 1,321,435.40
<br />
</span><span class="keyword">echo </span><span class="default">formatMoney</span><span class="keyword">(</span><span class="default">10059240.42941</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">); </span><span class="comment"># 10,059,240.43
<br />
</span><span class="keyword">echo </span><span class="default">formatMoney</span><span class="keyword">(</span><span class="default">13245</span><span class="keyword">); </span><span class="comment"># 13,245
<br />

<br />
</span><span class="keyword">function </span><span class="default">formatMoney</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">, </span><span class="default">$fractional</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$fractional</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$number </span><span class="keyword">= </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">'%.2f'</span><span class="keyword">, </span><span class="default">$number</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">true</span><span class="keyword">) { 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$replaced </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/(-?\d+)(\d\d\d)/'</span><span class="keyword">, </span><span class="string">'$1,$2'</span><span class="keyword">, </span><span class="default">$number</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$replaced </span><span class="keyword">!= </span><span class="default">$number</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$number </span><span class="keyword">= </span><span class="default">$replaced</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$number</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89060""></a>
  <div class="note">
   <strong class="user">Rafael M. Salvioni</strong>
   <a href="#89060" class="date">19-Feb-2009 12:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a some function posted before, however various bugs were corrected.
<br />

<br />
Thank you to Stuart Roe by reporting the bug on printing signals.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">/*
<br />
That it is an implementation of the function money_format for the
<br />
platforms that do not it bear.&nbsp; 
<br />

<br />
The function accepts to same string of format accepts for the
<br />
original function of the PHP.&nbsp; 
<br />

<br />
(Sorry. my writing in English is very bad)&nbsp; 
<br />

<br />
The function is tested using PHP 5.1.4 in Windows XP
<br />
and Apache WebServer.
<br />
*/
<br />
</span><span class="keyword">function </span><span class="default">money_format</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">$number</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$regex&nbsp; </span><span class="keyword">= </span><span class="string">'/%((?:[\^!\-]|\+|\(|\=.)*)([0-9]+)?'</span><span class="keyword">.
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'(?:#([0-9]+))?(?:\.([0-9]+))?([in%])/'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_MONETARY</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">) == </span><span class="string">'C'</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_MONETARY</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$locale </span><span class="keyword">= </span><span class="default">localeconv</span><span class="keyword">();
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="default">$regex</span><span class="keyword">, </span><span class="default">$format</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">, </span><span class="default">PREG_SET_ORDER</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$matches </span><span class="keyword">as </span><span class="default">$fmatch</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">floatval</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$flags </span><span class="keyword">= array(
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'fillchar'&nbsp; </span><span class="keyword">=&gt; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/\=(.)/'</span><span class="keyword">, </span><span class="default">$fmatch</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$match</span><span class="keyword">) ?
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$match</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] : </span><span class="string">' '</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'nogroup'&nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/\^/'</span><span class="keyword">, </span><span class="default">$fmatch</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]) &gt; </span><span class="default">0</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'usesignal' </span><span class="keyword">=&gt; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/\+|\(/'</span><span class="keyword">, </span><span class="default">$fmatch</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$match</span><span class="keyword">) ?
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$match</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] : </span><span class="string">'+'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'nosimbol'&nbsp; </span><span class="keyword">=&gt; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/\!/'</span><span class="keyword">, </span><span class="default">$fmatch</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]) &gt; </span><span class="default">0</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'isleft'&nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/\-/'</span><span class="keyword">, </span><span class="default">$fmatch</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]) &gt; </span><span class="default">0
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$width&nbsp; &nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$fmatch</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]) ? (int)</span><span class="default">$fmatch</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] : </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$left&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$fmatch</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]) ? (int)</span><span class="default">$fmatch</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">] : </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$right&nbsp; &nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$fmatch</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">]) ? (int)</span><span class="default">$fmatch</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">] : </span><span class="default">$locale</span><span class="keyword">[</span><span class="string">'int_frac_digits'</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$conversion </span><span class="keyword">= </span><span class="default">$fmatch</span><span class="keyword">[</span><span class="default">5</span><span class="keyword">];
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$positive </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$value </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$positive </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value&nbsp; </span><span class="keyword">*= -</span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$letter </span><span class="keyword">= </span><span class="default">$positive </span><span class="keyword">? </span><span class="string">'p' </span><span class="keyword">: </span><span class="string">'n'</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$prefix </span><span class="keyword">= </span><span class="default">$suffix </span><span class="keyword">= </span><span class="default">$cprefix </span><span class="keyword">= </span><span class="default">$csuffix </span><span class="keyword">= </span><span class="default">$signal </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$signal </span><span class="keyword">= </span><span class="default">$positive </span><span class="keyword">? </span><span class="default">$locale</span><span class="keyword">[</span><span class="string">'positive_sign'</span><span class="keyword">] : </span><span class="default">$locale</span><span class="keyword">[</span><span class="string">'negative_sign'</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; switch (</span><span class="default">true</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="default">$locale</span><span class="keyword">[</span><span class="string">"</span><span class="keyword">{</span><span class="default">$letter</span><span class="keyword">}</span><span class="string">_sign_posn"</span><span class="keyword">] == </span><span class="default">1 </span><span class="keyword">&amp;&amp; </span><span class="default">$flags</span><span class="keyword">[</span><span class="string">'usesignal'</span><span class="keyword">] == </span><span class="string">'+'</span><span class="keyword">:
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$prefix </span><span class="keyword">= </span><span class="default">$signal</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="default">$locale</span><span class="keyword">[</span><span class="string">"</span><span class="keyword">{</span><span class="default">$letter</span><span class="keyword">}</span><span class="string">_sign_posn"</span><span class="keyword">] == </span><span class="default">2 </span><span class="keyword">&amp;&amp; </span><span class="default">$flags</span><span class="keyword">[</span><span class="string">'usesignal'</span><span class="keyword">] == </span><span class="string">'+'</span><span class="keyword">:
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$suffix </span><span class="keyword">= </span><span class="default">$signal</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="default">$locale</span><span class="keyword">[</span><span class="string">"</span><span class="keyword">{</span><span class="default">$letter</span><span class="keyword">}</span><span class="string">_sign_posn"</span><span class="keyword">] == </span><span class="default">3 </span><span class="keyword">&amp;&amp; </span><span class="default">$flags</span><span class="keyword">[</span><span class="string">'usesignal'</span><span class="keyword">] == </span><span class="string">'+'</span><span class="keyword">:
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$cprefix </span><span class="keyword">= </span><span class="default">$signal</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="default">$locale</span><span class="keyword">[</span><span class="string">"</span><span class="keyword">{</span><span class="default">$letter</span><span class="keyword">}</span><span class="string">_sign_posn"</span><span class="keyword">] == </span><span class="default">4 </span><span class="keyword">&amp;&amp; </span><span class="default">$flags</span><span class="keyword">[</span><span class="string">'usesignal'</span><span class="keyword">] == </span><span class="string">'+'</span><span class="keyword">:
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$csuffix </span><span class="keyword">= </span><span class="default">$signal</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="default">$flags</span><span class="keyword">[</span><span class="string">'usesignal'</span><span class="keyword">] == </span><span class="string">'('</span><span class="keyword">:
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="default">$locale</span><span class="keyword">[</span><span class="string">"</span><span class="keyword">{</span><span class="default">$letter</span><span class="keyword">}</span><span class="string">_sign_posn"</span><span class="keyword">] == </span><span class="default">0</span><span class="keyword">:
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$prefix </span><span class="keyword">= </span><span class="string">'('</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$suffix </span><span class="keyword">= </span><span class="string">')'</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">$flags</span><span class="keyword">[</span><span class="string">'nosimbol'</span><span class="keyword">]) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$currency </span><span class="keyword">= </span><span class="default">$cprefix </span><span class="keyword">.
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (</span><span class="default">$conversion </span><span class="keyword">== </span><span class="string">'i' </span><span class="keyword">? </span><span class="default">$locale</span><span class="keyword">[</span><span class="string">'int_curr_symbol'</span><span class="keyword">] : </span><span class="default">$locale</span><span class="keyword">[</span><span class="string">'currency_symbol'</span><span class="keyword">]) .
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$csuffix</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$currency </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$space&nbsp; </span><span class="keyword">= </span><span class="default">$locale</span><span class="keyword">[</span><span class="string">"</span><span class="keyword">{</span><span class="default">$letter</span><span class="keyword">}</span><span class="string">_sep_by_space"</span><span class="keyword">] ? </span><span class="string">' ' </span><span class="keyword">: </span><span class="string">''</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">number_format</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$right</span><span class="keyword">, </span><span class="default">$locale</span><span class="keyword">[</span><span class="string">'mon_decimal_point'</span><span class="keyword">],
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$flags</span><span class="keyword">[</span><span class="string">'nogroup'</span><span class="keyword">] ? </span><span class="string">'' </span><span class="keyword">: </span><span class="default">$locale</span><span class="keyword">[</span><span class="string">'mon_thousands_sep'</span><span class="keyword">]);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= @</span><span class="default">explode</span><span class="keyword">(</span><span class="default">$locale</span><span class="keyword">[</span><span class="string">'mon_decimal_point'</span><span class="keyword">], </span><span class="default">$value</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$n </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$prefix</span><span class="keyword">) + </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$currency</span><span class="keyword">) + </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$left </span><span class="keyword">&gt; </span><span class="default">0 </span><span class="keyword">&amp;&amp; </span><span class="default">$left </span><span class="keyword">&gt; </span><span class="default">$n</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="default">str_repeat</span><span class="keyword">(</span><span class="default">$flags</span><span class="keyword">[</span><span class="string">'fillchar'</span><span class="keyword">], </span><span class="default">$left </span><span class="keyword">- </span><span class="default">$n</span><span class="keyword">) . </span><span class="default">$value</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">implode</span><span class="keyword">(</span><span class="default">$locale</span><span class="keyword">[</span><span class="string">'mon_decimal_point'</span><span class="keyword">], </span><span class="default">$value</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$locale</span><span class="keyword">[</span><span class="string">"</span><span class="keyword">{</span><span class="default">$letter</span><span class="keyword">}</span><span class="string">_cs_precedes"</span><span class="keyword">]) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">$prefix </span><span class="keyword">. </span><span class="default">$currency </span><span class="keyword">. </span><span class="default">$space </span><span class="keyword">. </span><span class="default">$value </span><span class="keyword">. </span><span class="default">$suffix</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">$prefix </span><span class="keyword">. </span><span class="default">$value </span><span class="keyword">. </span><span class="default">$space </span><span class="keyword">. </span><span class="default">$currency </span><span class="keyword">. </span><span class="default">$suffix</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$width </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">str_pad</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$width</span><span class="keyword">, </span><span class="default">$flags</span><span class="keyword">[</span><span class="string">'fillchar'</span><span class="keyword">], </span><span class="default">$flags</span><span class="keyword">[</span><span class="string">'isleft'</span><span class="keyword">] ?
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">STR_PAD_RIGHT </span><span class="keyword">: </span><span class="default">STR_PAD_LEFT</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$format </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$fmatch</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="default">$value</span><span class="keyword">, </span><span class="default">$format</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$format</span><span class="keyword">;
<br />
}
<br />

<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86039""></a>
  <div class="note">
   <strong class="user">jeremy</strong>
   <a href="#86039" class="date">30-Sep-2008 10:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If money_format doesn't seem to be working properly, make sure you are defining a valid locale.&nbsp; For example, on Debian, 'en_US' is not a valid locale - you need 'en_US.UTF-8' or 'en_US.ISO-8559-1'.<br />
<br />
This was frustrating me for a while.&nbsp; Debian has a list of valid locales at /usr/share/i18n/SUPPORTED; find yours there if it's not working properly.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84634""></a>
  <div class="note">
   <strong class="user">swapnet</strong>
   <a href="#84634" class="date">22-Jul-2008 08:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Consider formatting currency for some South Asian countries that use ##,##,###.## money format.
<br />
The following code generates something like Rs. 4,54,234.00 and so on.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">convertcash</span><span class="keyword">(</span><span class="default">$num</span><span class="keyword">, </span><span class="default">$currency</span><span class="keyword">){
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$num</span><span class="keyword">)&gt;</span><span class="default">3</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$lastthree </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$num</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$num</span><span class="keyword">)-</span><span class="default">3</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$num</span><span class="keyword">));
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$restunits </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$num</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$num</span><span class="keyword">)-</span><span class="default">3</span><span class="keyword">); </span><span class="comment">// extracts the last three digits
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$restunits </span><span class="keyword">= (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$restunits</span><span class="keyword">)%</span><span class="default">2 </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">)?</span><span class="string">"0"</span><span class="keyword">.</span><span class="default">$restunits</span><span class="keyword">:</span><span class="default">$restunits</span><span class="keyword">; </span><span class="comment">// explodes the remaining digits in 2's formats, adds a zero in the beginning to maintain the 2's grouping.
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$expunit </span><span class="keyword">= </span><span class="default">str_split</span><span class="keyword">(</span><span class="default">$restunits</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$expunit</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$explrestunits </span><span class="keyword">.= (int)</span><span class="default">$expunit</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">].</span><span class="string">","</span><span class="keyword">; </span><span class="comment">// creates each of the 2's group and adds a comma to the end
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}&nbsp; &nbsp; 
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$thecash </span><span class="keyword">= </span><span class="default">$explrestunits</span><span class="keyword">.</span><span class="default">$lastthree</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$thecash </span><span class="keyword">= </span><span class="default">$convertnum</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$currency</span><span class="keyword">.</span><span class="default">$thecash</span><span class="keyword">.</span><span class="string">".00"</span><span class="keyword">; </span><span class="comment">// writes the final format where $currency is the currency symbol.
<br />
</span><span class="keyword">}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
now call the function as&nbsp; convertcash($row['price'], 'Rs '); // that's the price from the database I called using an Indian Rupees prefix where the price has to be a plain number format, say something like 454234.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78315""></a>
  <div class="note">
   <strong class="user">scot from ezyauctionz.co.nz</strong>
   <a href="#78315" class="date">06-Oct-2007 03:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a handy little bit of code I just wrote, as I was not able to find anything else suitable for my situation.
<br />
This will handle monetary values that are passed to the script by a user, to reformat any comma use so that it is not broken when it passes through an input validation system that checks for a float.
<br />

<br />
It is not foolproof, but will handle the common input as most users would input it, such as 1,234,567 (outputs 1234567) or 1,234.00 (outputs 1234.00), even handles 12,34 (outputs 12.34), I expect it would work with negative numbers, but have not tested it, as it is not used for that in my situation.
<br />

<br />
This worked when other options such as money_format() were not suitable or possible.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">///////////////
<br />
// BEGIN CODE convert all price amounts into well formatted values
<br />
</span><span class="keyword">function </span><span class="default">converttonum</span><span class="keyword">(</span><span class="default">$convertnum</span><span class="keyword">,</span><span class="default">$fieldinput</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$bits </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">","</span><span class="keyword">,</span><span class="default">$convertnum</span><span class="keyword">); </span><span class="comment">// split input value up to allow checking
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$first </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$bits</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]); </span><span class="comment">// gets part before first comma (thousands/millions)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$last </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$bits</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]); </span><span class="comment">// gets part after first comma (thousands (or decimals if incorrectly used by user)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$last </span><span class="keyword">&lt;</span><span class="default">3</span><span class="keyword">){ </span><span class="comment">// checks for comma being used as decimal place
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$convertnum </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">","</span><span class="keyword">,</span><span class="string">"."</span><span class="keyword">,</span><span class="default">$convertnum</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else{ </span><span class="comment">// assume comma is a thousands seperator, so remove it
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$convertnum </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">","</span><span class="keyword">,</span><span class="string">""</span><span class="keyword">,</span><span class="default">$convertnum</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_POST</span><span class="keyword">[</span><span class="default">$fieldinput</span><span class="keyword">] = </span><span class="default">$convertnum</span><span class="keyword">; </span><span class="comment">// redefine the vlaue of the variable, to be the new corrected one
<br />
</span><span class="keyword">}
<br />

<br />
@</span><span class="default">converttonum</span><span class="keyword">(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="default">inputone</span><span class="keyword">],</span><span class="string">"inputone"</span><span class="keyword">);
<br />
@</span><span class="default">converttonum</span><span class="keyword">(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="default">inputtwo</span><span class="keyword">],</span><span class="string">"inputtwo"</span><span class="keyword">);
<br />
@</span><span class="default">converttonum</span><span class="keyword">(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="default">inputthree</span><span class="keyword">],</span><span class="string">"inputthree"</span><span class="keyword">);
<br />
</span><span class="comment">// END CODE
<br />
//////////////
<br />

<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
This is suitable for the English usage, it may need tweaking to work with other types.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="62024""></a>
  <div class="note">
   <strong class="user">richard dot selby at uk dot clara dot net</strong>
   <a href="#62024" class="date">17-Feb-2006 07:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Double check that money_format() is defined on any version of PHP you plan your code to run on.&nbsp; You might be surprised.<br />
<br />
For example, it worked on my Linux box where I code, but not on&nbsp; servers running&nbsp; BSD 4.11 variants. (This is presumably because strfmon&nbsp; is not defined - see note at the top of teis page). It's not just a windows/unix issue.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

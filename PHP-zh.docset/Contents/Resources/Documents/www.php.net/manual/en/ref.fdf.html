<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>FDF º¯Êý</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="fdf.examples.html">? ·¶Àý</a></li>
      <li style="float: right;"><a href="function.fdf-add-doc-javascript.html">fdf_add_doc_javascript ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="book.fdf.html">FDF</a></li>
    <li>FDF º¯Êý</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="ref.fdf" class="reference">
 <h1 class="title">FDF º¯Êý</h1>

 



















































































































































































































<h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="function.fdf-add-doc-javascript.html">fdf_add_doc_javascript</a> &mdash; Adds javascript code to the FDF document</li><li><a href="function.fdf-add-template.html">fdf_add_template</a> &mdash; Adds a template into the FDF document</li><li><a href="function.fdf-close.html">fdf_close</a> &mdash; Close an FDF document</li><li><a href="function.fdf-create.html">fdf_create</a> &mdash; Create a new FDF document</li><li><a href="function.fdf-enum-values.html">fdf_enum_values</a> &mdash; Call a user defined function for each document value</li><li><a href="function.fdf-errno.html">fdf_errno</a> &mdash; Return error code for last fdf operation</li><li><a href="function.fdf-error.html">fdf_error</a> &mdash; Return error description for FDF error code</li><li><a href="function.fdf-get-ap.html">fdf_get_ap</a> &mdash; Get the appearance of a field</li><li><a href="function.fdf-get-attachment.html">fdf_get_attachment</a> &mdash; Extracts uploaded file embedded in the FDF</li><li><a href="function.fdf-get-encoding.html">fdf_get_encoding</a> &mdash; Get the value of the /Encoding key</li><li><a href="function.fdf-get-file.html">fdf_get_file</a> &mdash; Get the value of the /F key</li><li><a href="function.fdf-get-flags.html">fdf_get_flags</a> &mdash; Gets the flags of a field</li><li><a href="function.fdf-get-opt.html">fdf_get_opt</a> &mdash; Gets a value from the opt array of a field</li><li><a href="function.fdf-get-status.html">fdf_get_status</a> &mdash; Get the value of the /STATUS key</li><li><a href="function.fdf-get-value.html">fdf_get_value</a> &mdash; Get the value of a field</li><li><a href="function.fdf-get-version.html">fdf_get_version</a> &mdash; Gets version number for FDF API or file</li><li><a href="function.fdf-header.html">fdf_header</a> &mdash; Sets FDF-specific output headers</li><li><a href="function.fdf-next-field-name.html">fdf_next_field_name</a> &mdash; Get the next field name</li><li><a href="function.fdf-open-string.html">fdf_open_string</a> &mdash; Read a FDF document from a string</li><li><a href="function.fdf-open.html">fdf_open</a> &mdash; Open a FDF document</li><li><a href="function.fdf-remove-item.html">fdf_remove_item</a> &mdash; Sets target frame for form</li><li><a href="function.fdf-save-string.html">fdf_save_string</a> &mdash; Returns the FDF document as a string</li><li><a href="function.fdf-save.html">fdf_save</a> &mdash; Save a FDF document</li><li><a href="function.fdf-set-ap.html">fdf_set_ap</a> &mdash; Set the appearance of a field</li><li><a href="function.fdf-set-encoding.html">fdf_set_encoding</a> &mdash; Sets FDF character encoding</li><li><a href="function.fdf-set-file.html">fdf_set_file</a> &mdash; Set PDF document to display FDF data in</li><li><a href="function.fdf-set-flags.html">fdf_set_flags</a> &mdash; Sets a flag of a field</li><li><a href="function.fdf-set-javascript-action.html">fdf_set_javascript_action</a> &mdash; Sets an javascript action of a field</li><li><a href="function.fdf-set-on-import-javascript.html">fdf_set_on_import_javascript</a> &mdash; Adds javascript code to be executed when Acrobat opens the FDF</li><li><a href="function.fdf-set-opt.html">fdf_set_opt</a> &mdash; Sets an option of a field</li><li><a href="function.fdf-set-status.html">fdf_set_status</a> &mdash; Set the value of the /STATUS key</li><li><a href="function.fdf-set-submit-form-action.html">fdf_set_submit_form_action</a> &mdash; Sets a submit form action of a field</li><li><a href="function.fdf-set-target-frame.html">fdf_set_target_frame</a> &mdash; Set target frame for form display</li><li><a href="function.fdf-set-value.html">fdf_set_value</a> &mdash; Set the value of a field</li><li><a href="function.fdf-set-version.html">fdf_set_version</a> &mdash; Sets version number for a FDF file</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="126490""></a>
  <div class="note">
   <strong class="user">JFS at TRASH-MAIL dot COM</strong>
   <a href="#126490" class="date">09-Oct-2021 02:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
function parseFDF($file) {<br />
&nbsp;&nbsp;&nbsp; $pattern = "/\/T\s\(([^)]*)\)[\n]\/V\s\(([^)]*)\)/ism";<br />
<br />
&nbsp;&nbsp;&nbsp; if (preg_match_all($pattern, $file, $out, PREG_SET_ORDER, 0)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for ($i=0; $i&lt;count($out); $i++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (preg_match($pattern, $out[$i][0], $regs)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $key = $regs[1];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $val = $regs[2];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $key = preg_replace("/^\s*\(/","",$key);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $key = preg_replace("/\)$/","",$key);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $key = preg_replace("/\\\/","",$key);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $val = preg_replace("/^\s*\(/","",$val);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $val = preg_replace("/\)$/","",$val);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $matches[$key] = $val;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $matches;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
$fdfFile = file_get_contents('testfdf.fdf');<br />
var_dump(parseFDF($fdfFile));</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105432""></a>
  <div class="note">
   <strong class="user">bea dot el dot tea at gmail dot com</strong>
   <a href="#105432" class="date">17-Aug-2011 09:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you can't get the php_fdf.dll working in PHP 5.3 on Windows, one possible work around is to use the activeX version from the "FDF Toolkit for Windows" from the Adobe website.&nbsp; Here is part of a class I built for one of my projects.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">FDF</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$NormalAP </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$RolloverAP </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$DownAP </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; protected </span><span class="default">$fdf</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$com </span><span class="keyword">= new </span><span class="default">COM</span><span class="keyword">(</span><span class="string">'FdfApp.FdfApp'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">fdf </span><span class="keyword">= </span><span class="default">$com</span><span class="keyword">-&gt;</span><span class="default">FDFCreate</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">setFile</span><span class="keyword">(</span><span class="default">$fileName</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">fdf</span><span class="keyword">-&gt;</span><span class="default">FDFSetFile</span><span class="keyword">(</span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">, </span><span class="string">'%20'</span><span class="keyword">, </span><span class="default">$fileName</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">setValue</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">fdf</span><span class="keyword">-&gt;</span><span class="default">FDFSetValue</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">setAP</span><span class="keyword">(</span><span class="default">$field</span><span class="keyword">, </span><span class="default">$whichFace</span><span class="keyword">, </span><span class="default">$fileName</span><span class="keyword">, </span><span class="default">$pageNumber</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">fdf</span><span class="keyword">-&gt;</span><span class="default">FDFSetAP</span><span class="keyword">(</span><span class="default">$field</span><span class="keyword">, </span><span class="default">$whichFace</span><span class="keyword">, </span><span class="default">$fileName</span><span class="keyword">, </span><span class="default">$pageNumber</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">savetoFile</span><span class="keyword">(</span><span class="default">$saveFileName</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">fdf</span><span class="keyword">-&gt;</span><span class="default">FDFSavetoFile</span><span class="keyword">(</span><span class="default">$saveFileName</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">close</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">fdf</span><span class="keyword">-&gt;</span><span class="default">FDFclose</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76381""></a>
  <div class="note">
   <strong class="user">info at theindigoworks dot com</strong>
   <a href="#76381" class="date">12-Jul-2007 08:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
re. g8z at yahoo dot com 18-Oct-2004 06:46<br />
<br />
I think there is a line missing in <br />
<br />
foreach ($keys as $key =&gt; $value)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $key = addcslashes($key, "\n\r\t\\()");<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $fdf .= "&lt;&lt; /T ($key) /V /$value &gt;&gt; \n";<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
I have changed it to read<br />
<br />
&nbsp;$key = addcslashes($key, "\n\r\t\\()");<br />
$value = addcslashes($value, "\n\r\t\\()");<br />
&nbsp;&nbsp; $fdf .= "&lt;&lt; /T ($key) /V /$value &gt;&gt; \n";<br />
<br />
Now all the check boxes and radio buttons are populated, not just the last one in the form as was happening before.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60593""></a>
  <div class="note">
   <strong class="user">wesley_grant at yahoo dot com</strong>
   <a href="#60593" class="date">11-Jan-2006 03:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Changing the <br />
<br />
session.cache_limiter<br />
<br />
directive in the php.ini file to 'private'<br />
<br />
seems to resolve the issue with sending fdf data and session headers at the same time to Internet Explorer.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57935""></a>
  <div class="note">
   <strong class="user">bmount at livid dot us</strong>
   <a href="#57935" class="date">19-Oct-2005 08:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those of you struggling with FDF in Internet Explorer, here is your solution:<br />
<br />
DO NOT INITIALIZE A SESSION ON THE PAGE THAT GENERATES AND OUTPUTS FDF DATA. <br />
<br />
This will fix the page not found error.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52502""></a>
  <div class="note">
   
   <a href="#52502" class="date">03-May-2005 01:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Use "Yes" instead of "On" to populate checkboxes.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46624""></a>
  <div class="note">
   <strong class="user">g8z at yahoo dot com</strong>
   <a href="#46624" class="date">17-Oct-2004 11:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is for users who are looking for a way to merge HTML form data with a PDF Form, then output the PDF Form with data populated in it, to a web browser.<br />
<br />
This is a pure PHP solution which does NOT require the FDF toolkit. Contributed by www.TUFaT.com<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// the full http path to the PDF form<br />
</span><span class="default">$form </span><span class="keyword">= </span><span class="string">'<a href="http://my_domain.com/my_pdf_form.pdf" rel="nofollow" target="_blank">http://my_domain.com/my_pdf_form.pdf</a>'</span><span class="keyword">;<br />
<br />
function </span><span class="default">create_fdf </span><span class="keyword">(</span><span class="default">$pdffile</span><span class="keyword">, </span><span class="default">$strings</span><span class="keyword">, </span><span class="default">$keys</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$fdf </span><span class="keyword">= </span><span class="string">"%FDF-1.2\n%????\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$fdf </span><span class="keyword">.= </span><span class="string">"1 0 obj \n&lt;&lt; /FDF &lt;&lt; /Fields [\n"</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$strings </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$key </span><span class="keyword">= </span><span class="default">addcslashes</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="string">"\n\r\t\\()"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">addcslashes</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="string">"\n\r\t\\()"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$fdf </span><span class="keyword">.= </span><span class="string">"&lt;&lt; /T (</span><span class="default">$key</span><span class="string">) /V (</span><span class="default">$value</span><span class="string">) &gt;&gt; \n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$keys </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$key </span><span class="keyword">= </span><span class="default">addcslashes</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="string">"\n\r\t\\()"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$fdf </span><span class="keyword">.= </span><span class="string">"&lt;&lt; /T (</span><span class="default">$key</span><span class="string">) /V /</span><span class="default">$value</span><span class="string"> &gt;&gt; \n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$fdf </span><span class="keyword">.= </span><span class="string">"]\n/F (</span><span class="default">$pdffile</span><span class="string">) &gt;&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$fdf </span><span class="keyword">.= </span><span class="string">"&gt;&gt;\nendobj\ntrailer\n&lt;&lt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$fdf </span><span class="keyword">.= </span><span class="string">"/Root 1 0 R \n\n&gt;&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$fdf </span><span class="keyword">.= </span><span class="string">"%%EOF"</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$fdf</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// Fill in text fields<br />
</span><span class="default">$strings </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'date' </span><span class="keyword">=&gt; </span><span class="string">'10/17/2004'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'full_name' </span><span class="keyword">=&gt; </span><span class="string">'Joe Doe'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'phone_num' </span><span class="keyword">=&gt; </span><span class="string">'123-4567'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'company' </span><span class="keyword">=&gt; </span><span class="string">'ACME Widgets'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'amount' </span><span class="keyword">=&gt; </span><span class="string">'USD 100.00'<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">);<br />
<br />
</span><span class="comment">// Fill in check boxes/radio buttons<br />
</span><span class="default">$keys </span><span class="keyword">= array(</span><span class="string">'<br />
&nbsp;&nbsp;&nbsp; gender' </span><span class="keyword">=&gt; </span><span class="string">'male'</span><span class="keyword">,</span><span class="comment">//radio button<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'is_adult' </span><span class="keyword">=&gt; </span><span class="string">'Off'</span><span class="keyword">,</span><span class="comment">//checkbox<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'urgent' </span><span class="keyword">=&gt; </span><span class="string">'On'</span><span class="comment">//checkbox<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">);<br />
<br />
</span><span class="comment">// Output the PDF form, with form data filled-in<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">'Content-type: application/vnd.fdf'</span><span class="keyword">);<br />
echo </span><span class="default">create_fdf</span><span class="keyword">(</span><span class="default">$form</span><span class="keyword">, </span><span class="default">$strings</span><span class="keyword">, </span><span class="default">$keys</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46345""></a>
  <div class="note">
   <strong class="user">sid at accesspdf dot com</strong>
   <a href="#46345" class="date">07-Oct-2004 11:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Basic FDF data is easy to create using native PHP; you don't need Adobe's FDF Toolkit. I wrote a function for this purpose called forge_fdf(). You can download it from:<br />
<br />
<a href="http://www.pdfhacks.com/forge_fdf/" rel="nofollow" target="_blank">http://www.pdfhacks.com/forge_fdf/</a><br />
<br />
I created it for my book, PDF Hacks. An example of forge_fdf() in action can be viewed online:<br />
<br />
<a href="http://pdfhacks.com/form_session/form_session-1.1/" rel="nofollow" target="_blank">http://pdfhacks.com/form_session/form_session-1.1/</a><br />
<br />
Download the full code for this online example from:<br />
<br />
<a href="http://pdfhacks.com/form_session/" rel="nofollow" target="_blank">http://pdfhacks.com/form_session/</a><br />
<br />
Note how the PDF form data is submitted back to the server via POST rather than FDF. No need to parse FDF.<br />
<br />
Cheers-<br />
<br />
Sid Steward</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="43713""></a>
  <div class="note">
   <strong class="user">m1tk4 at hotmail dot com</strong>
   <a href="#43713" class="date">30-Jun-2004 10:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to add FDF support without rebuilding your RedHat EL3 / Fedora PHP RPMs, see instructions at <a href="http://phprpms.sourceforge.net/fdf" rel="nofollow" target="_blank">http://phprpms.sourceforge.net/fdf</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="40991""></a>
  <div class="note">
   <strong class="user">software at yvanrodrigues dot com</strong>
   <a href="#40991" class="date">25-Mar-2004 02:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Do not use version 6 of the fdftk.dll (windows) with PHP4.3.4, use the one that comes with PHP.<br />
<br />
If you use the newer DLL fdf_create will not return a valid handle.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="38370""></a>
  <div class="note">
   <strong class="user">fleischer at mail dot com</strong>
   <a href="#38370" class="date">18-Dec-2003 07:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The code suggested by greg@... and adam@... is extremely helpful, but I've found out (the hard way) that unclosed parentheses within strings contained in the input array ($values in greg's code or $pdf_data in adam's) will cause Acrobat to issue an error to the effect that the file is corrupted. In other words, if there are strings such as "a) my first point; b) my second point" in the input array, the resulting PDF/FDF file will be considered corrupted by Acrobat. This apparently happens because all the field names in the structure of an FDF file are enclosed in parentheses.<br />
<br />
The solution I've devised is to escape all opening and closing parentheses with a backslash, which in turn means you need to escape all backslashes. The code below does all that.<br />
<br />
Erik<br />
<br />
---------------<br />
<br />
function output_fdf ($pdf_file, $pdf_data)<br />
{<br />
&nbsp;&nbsp;&nbsp; $fdf = "%FDF-1.2\n%????\n";<br />
&nbsp;&nbsp;&nbsp; $fdf .= "1 0 obj \n&lt;&lt; /FDF ";<br />
&nbsp;&nbsp;&nbsp; $fdf .= "&lt;&lt; /Fields [\n"; <br />
<br />
&nbsp;&nbsp;&nbsp; $search = array('\\', '(', ')');<br />
&nbsp;&nbsp;&nbsp; $replace = array('\\\\', '\(', '\)');<br />
&nbsp;&nbsp;&nbsp; foreach ($pdf_data as $key =&gt; $val)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $clean_key = str_replace($search, $replace, $key);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $clean_val = str_replace($search, $replace, $val);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $fdf .= "&lt;&lt; /V ($clean_val)/T ($clean_key) &gt;&gt; \n";<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; $fdf .= "]\n/F ($pdf_file) &gt;&gt;";<br />
&nbsp;&nbsp;&nbsp; $fdf .= "&gt;&gt;\nendobj\ntrailer\n&lt;&lt;\n";<br />
&nbsp;&nbsp;&nbsp; $fdf .= "/Root 1 0 R \n\n&gt;&gt;\n";<br />
&nbsp;&nbsp;&nbsp; $fdf .= "%%EOF";<br />
<br />
&nbsp;&nbsp;&nbsp; return $fdf;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="31900""></a>
  <div class="note">
   <strong class="user">mirage at rateaprof dot com</strong>
   <a href="#31900" class="date">08-May-2003 05:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you get the new&nbsp; fdftkv5.tar.gz&nbsp; from adobe's site (per the link above), you'll get some totally new spacing and capitalization of files.&nbsp; To make the current 4.3.1 configure, you need to do a few things.<br />
<br />
untar fdftkv5.tar.gz into /usr/local<br />
cd /usr/local<br />
#for ease of use<br />
ln -s FDFToolkit\ for\ UNIX fdf<br />
<br />
cd fdf<br />
ln -s Headers\ And\ Libraries HeadersAndLibraries<br />
<br />
#may need to modify the following for your OS<br />
ln -s LINUX linux<br />
cd linux/C<br />
ln -s LIBFDFTK.SO libfdftk.so<br />
<br />
cd ..<br />
cd ..<br />
ln -s Headers headers<br />
cd headers<br />
ln -s FDFTK.H fdftk.h<br />
<br />
And that should get you going... and to whoever is maintaining the configure script, please be aware there are changes in the FDF Toolkit.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="30054""></a>
  <div class="note">
   <strong class="user">Teemu</strong>
   <a href="#30054" class="date">05-Mar-2003 06:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Maybe you have to use Header-function that your browser will regonize xfdf-file. Like this:<br />
<br />
Header( "Content-type: application/vnd.adobe.xfdf");</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="28657""></a>
  <div class="note">
   <strong class="user">jeff at cowart dot net</strong>
   <a href="#28657" class="date">19-Jan-2003 08:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have tried to use the scripts above by adam and Toppi and I have been unable to get them to work unless I save the generated fdf file and then open it manually in acrobat.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="27192""></a>
  <div class="note">
   <strong class="user">Toppi at i-Mehl dot De</strong>
   <a href="#27192" class="date">26-Nov-2002 12:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I tried a lot with FDF -&gt; PDF and merging these documents...<br />
in my opinon xfdf is more handy than fdf... for those who'd like to try: feel free to use this little function to generate an xfdf document from an array.<br />
<br />
ToPPi<br />
<br />
function array2xfdf($xfdf_data, $pdf_file) { <br />
// Creates an XFDF File from a 2 dimensional <br />
// Array Format: "array ("key1" =&gt; "content1", "key2" =&gt; "content2"); <br />
$xfdf = "&lt;?xml version='1.0' encoding='UTF-8'?&gt;\n"; <br />
$xfdf .= "&lt;xfdf xmlns='<a href="http://ns.adobe.com/xfdf/" rel="nofollow" target="_blank">http://ns.adobe.com/xfdf/</a>' xml:space='preserve'&gt;\n"; <br />
$xfdf .= "&lt;fields&gt;\n"; <br />
// Loop -&gt; Array to XFDF Data <br />
foreach ($xfdf_data as $key =&gt; $val) { <br />
$xfdf .= "&lt;field name='".$key."'&gt;\n"; <br />
$xfdf .= "&lt;value&gt;".$val."&lt;/value&gt;\n"; <br />
$xfdf .= "&lt;/field&gt;\n"; <br />
}; <br />
// XFDF "Footer" <br />
$xfdf .= "&lt;/fields&gt;"; <br />
$xfdf .= "&lt;f href='".$pdf_file."'/&gt;"; <br />
$xfdf .= "&lt;/xfdf&gt;"; <br />
return $xfdf; <br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="26183""></a>
  <div class="note">
   <strong class="user">mitka at actdev.com</strong>
   <a href="#26183" class="date">21-Oct-2002 04:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
IMPORTANT:<br />
<br />
If you handled the FDF POSTs via $HTTP_RAW_POST_DATA as in user contributed scripts above, it's good to know that once you decide to rebuild PHP with FDFToolkit support, $HTTP_RAW_POST_DATA will be undefined.<br />
<br />
Good news - $HTTP_FDF_DATA _will_ be defined instead. (Look at the example above).To get the user contributed scripts working in both plain PHP and PHP+FDFToolkit use <br />
<br />
&nbsp;$HTTP_RAW_POST_DATA . $HTTP_FDF_DATA <br />
<br />
where $HTTP_RAW_POST_DATA mentioned.<br />
<br />
Dimitri Tarassenko</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="23978""></a>
  <div class="note">
   <strong class="user">adam at andemyte dot com</strong>
   <a href="#23978" class="date">02-Aug-2002 11:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is yet another example of generating pre-filled PDFs without using the FDF functions. This function takes two args: a URL to the PDF (like "<a href="http://domain.com/path/to/form.pdf" rel="nofollow" target="_blank">http://domain.com/path/to/form.pdf</a>" and an array with all the field's values. <br />
<br />
/* <br />
&nbsp;&nbsp;&nbsp; WARNING!! THIS FUNCTION SENDS HTTP HEADERS! It MUST be called before&nbsp; <br />
&nbsp;&nbsp;&nbsp; any content is spooled to the browser, or the function will fail! <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; void output_fdf (string $pdf_file, array $pdf_data)<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $pdf_file:&nbsp; a string containing a URL path to a PDF file on the <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; server. This PDF MUST exist and contain fields with<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; the names referenced by $pdf_data for this function<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; to work.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $pdf_data:&nbsp; an array of any fields in $pdf_file that you want to<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; populate, of the form key=&gt;val; where the field <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; name is the key, and the field's value is in val.<br />
&nbsp;&nbsp;&nbsp; <br />
*/&nbsp; &nbsp; <br />
<br />
function output_fdf ($pdf_file, $pdf_data) {<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; $fdf = "%FDF-1.2\n%????\n";<br />
&nbsp;&nbsp;&nbsp; $fdf .= "1 0 obj \n&lt;&lt; /FDF ";<br />
&nbsp;&nbsp;&nbsp; $fdf .= "&lt;&lt; /Fields [\n"; <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; foreach ($pdf_data as $key =&gt; $val)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $fdf .= "&lt;&lt; /V ($val)/T ($key) &gt;&gt; \n";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; $fdf .= "]\n/F ($pdf_file) &gt;&gt;";<br />
&nbsp;&nbsp;&nbsp; $fdf .= "&gt;&gt;\nendobj\ntrailer\n&lt;&lt;\n";<br />
&nbsp;&nbsp;&nbsp; $fdf .= "/Root 1 0 R \n\n&gt;&gt;\n";<br />
&nbsp;&nbsp;&nbsp; $fdf .= "%%EOF";<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; /* Now we display the FDF data which causes Acrobat to start&nbsp; */<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; header ("Content-Type: application/vnd.fdf");<br />
&nbsp;&nbsp;&nbsp; print $fdf;<br />
&nbsp;&nbsp;&nbsp; <br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="19735""></a>
  <div class="note">
   <strong class="user">noah at NOSPAMbrandfidelity dot com</strong>
   <a href="#19735" class="date">08-Mar-2002 08:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
function parse($file) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!preg_match_all("/&lt;&lt;\s*\/V([^&gt;]*)&gt;&gt;/x",<br />
$file,$out,PREG_SET_ORDER))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for ($i=0;$i&lt;count($out);$i++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $pattern = "&lt;&lt;.*/V\s*(.*)\s*/T\s*(.*)\s*&gt;&gt;";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $thing = $out[$i][1];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (eregi($pattern,$out[$i][0],$regs)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $key = $regs[2];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $val = $regs[1];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $key = preg_replace("/^\s*\(/","",$key);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $key = preg_replace("/\)$/","",$key);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $key = preg_replace("/\\\/","",$key);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $val = preg_replace("/^\s*\(/","",$val);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $val = preg_replace("/\)$/","",$val);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $matches[$key] = $val;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return $matches;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="17752""></a>
  <div class="note">
   <strong class="user">gregDELETETHIS at laundrymat dot tv</strong>
   <a href="#17752" class="date">21-Dec-2001 03:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is an easy script to output fdf data to the browser without using the fdf toolkit or creating an actual fdf file on the server.
<br />
By the way acrobat is very picky about line breaks so you must leave the "\n" in the script. The script reads the variables posted to it from a form use POST and creates a fdf file from them. The field names posted to this script must match the field names in the pdf. Acrobat will ignore any that don't match.
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
</span><span class="comment">//path to pdf file
<br />
</span><span class="default">$url</span><span class="keyword">=</span><span class="string">"<a href="http://www.some_url.com/form.pdf" rel="nofollow" target="_blank">http://www.some_url.com/form.pdf</a>"</span><span class="keyword">;
<br />

<br />
</span><span class="default">$values</span><span class="keyword">=</span><span class="default">$HTTP_POST_VARS</span><span class="keyword">;
<br />

<br />
</span><span class="default">$fdfdata </span><span class="keyword">= </span><span class="string">"%FDF-1.2\n%????\n"</span><span class="keyword">;
<br />
</span><span class="default">$fdfdata </span><span class="keyword">.= </span><span class="string">"1 0 obj \n&lt;&lt; /FDF "</span><span class="keyword">;
<br />
</span><span class="default">$fdfdata </span><span class="keyword">.= </span><span class="string">"&lt;&lt; /Fields [\n"</span><span class="keyword">; 
<br />

<br />
</span><span class="comment">//loop that adds the field names and values
<br />
</span><span class="keyword">foreach(</span><span class="default">$values </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$val</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$fdfdata</span><span class="keyword">.=</span><span class="string">"&lt;&lt; /V (</span><span class="default">$val</span><span class="string">)/T (</span><span class="default">$key</span><span class="string">) &gt;&gt; "</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; 
<br />
</span><span class="default">$fdfdata </span><span class="keyword">.= </span><span class="string">"]\n"</span><span class="keyword">;
<br />
</span><span class="default">$fdfdata </span><span class="keyword">.= </span><span class="string">"/F (</span><span class="default">$url</span><span class="string">) &gt;&gt;"</span><span class="keyword">;
<br />
</span><span class="default">$fdfdata </span><span class="keyword">.= </span><span class="string">"&gt;&gt;\nendobj\ntrailer\n&lt;&lt;\n/Root 1 0 R\n&gt;&gt;\n"</span><span class="keyword">;
<br />
</span><span class="default">$fdfdata </span><span class="keyword">.= </span><span class="string">"%%EOF"</span><span class="keyword">;
<br />

<br />
</span><span class="comment">/*** Now we display the FDF data which causes Acrobat to start&nbsp; ***/
<br />

<br />
</span><span class="default">header </span><span class="keyword">(</span><span class="string">"Content-Type: application/vnd.fdf"</span><span class="keyword">);
<br />
print </span><span class="default">$fdfdata</span><span class="keyword">;
<br />

<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
You can use javascript in the pdf to read the values from a GET method posted directly to the pdf. you can see both methods here: <a href="http://laundrymat.tv/pdf/" rel="nofollow" target="_blank">http://laundrymat.tv/pdf/</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="5420""></a>
  <div class="note">
   <strong class="user">joe at koontz dot net</strong>
   <a href="#5420" class="date">28-Apr-2000 04:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The simplest thing to do is get the FDF data from $HTTP_RAW_POST_DATA.&nbsp; (unless you have the server library installed none of the fdf data gets parsed!) This is typical of&nbsp; what you get:
<br />
%FDF-1.2
<br />
1 0 obj
<br />
&lt;&lt; 
<br />
/FDF &lt;&lt; /Fields [ &lt;&lt; /V (0)/T (amount0)&gt;&gt; &lt;&lt; /V (0)/T (amount1)&gt;&gt; &lt;&lt; /V (0)/T (amount2)&gt;&gt; 
<br />
&lt;&lt; /V (0)/T (amount3)&gt;&gt; &lt;&lt; /V (0)/T (amount4)&gt;&gt; &lt;&lt; /V (0)/T (amount5)&gt;&gt; 
<br />
&lt;&lt; /V (0)/T (amount6)&gt;&gt; &lt;&lt; /V (0)/T (amount7)&gt;&gt; &lt;&lt; /V (0)/T (amount8)&gt;&gt; 
<br />
&lt;&lt; /V (0)/T (amount9)&gt;&gt; &lt;&lt; /V /0102 /T (chase_bk)&gt;&gt; &lt;&lt; /V (0)/T (count)&gt;&gt; 
<br />
&lt;&lt; /V (0)/T (invtotal)&gt;&gt; &lt;&lt; /V (12/21/2000)/T (sent_ap)&gt;&gt; &lt;&lt; /V /Off /T (spec_hand)&gt;&gt; 
<br />
&lt;&lt; /V (041232)/T (transit_no)&gt;&gt; &lt;&lt; /V (THIS FORM IS NOT COMPLETE!!!)/T (X)&gt;&gt; 
<br />
] 
<br />
/F (<a href="http://x.com/forms/AA00390q.pdf" rel="nofollow" target="_blank">http://x.com/forms/AA00390q.pdf</a>)&gt;&gt; 
<br />
&gt;&gt; 
<br />
endobj
<br />
trailer
<br />
&lt;&lt;
<br />
/Root 1 0 R 
<br />

<br />
&gt;&gt;
<br />
%%EOF
<br />
kill everything before the [ and then parse it down into key value pairs.&nbsp; 
<br />
I wrote this to create an FDF, make sure you do a 
<br />
header("Content-type: application/vnd.fdf");
<br />
before you echo the returned value to the user.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">FDFput</span><span class="keyword">(</span><span class="default">$FDFpage</span><span class="keyword">){
<br />
&nbsp;</span><span class="default">$A </span><span class="keyword">= </span><span class="string">"%FDF-1.2\n1 0 obj\n&lt;&lt; \n/FDF &lt;&lt; /Fields [ \n"</span><span class="keyword">;
<br />
&nbsp;</span><span class="default">$C </span><span class="keyword">= </span><span class="string">" ] \n"&nbsp; &nbsp; </span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; if (</span><span class="default">$FDFpage</span><span class="keyword">&gt;</span><span class="string">"" </span><span class="keyword">) {</span><span class="default">$C </span><span class="keyword">.=</span><span class="string">" /F (</span><span class="default">$FDFpage</span><span class="string">)&gt;&gt;\n"</span><span class="keyword">;}
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$C </span><span class="keyword">.= </span><span class="string">"&gt;&gt;\n&gt;&gt; \nendobj\ntrailer\n\n&lt;&lt;/Root 1 0 R&gt;&gt;\n%%EOF\n"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$B </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;
<br />
&nbsp;</span><span class="default">reset</span><span class="keyword">(</span><span class="default">$FDFData</span><span class="keyword">);
<br />
&nbsp;while (list(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">) = </span><span class="default">each</span><span class="keyword">(</span><span class="default">$FDFData</span><span class="keyword">))
<br />
&nbsp; {
<br />
&nbsp; if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)) &gt; </span><span class="default">0 </span><span class="keyword">&amp;&amp; </span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">))
<br />
&nbsp;&nbsp; {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$B </span><span class="keyword">.= </span><span class="string">"&lt;&lt;/T (</span><span class="default">$key</span><span class="string">) /V ("</span><span class="keyword">. </span><span class="default">$val </span><span class="keyword">. </span><span class="string">")&gt;&gt;\n"</span><span class="keyword">;
<br />
</span><span class="comment">//echo&nbsp; &nbsp;&nbsp; "&lt;&lt;/T ($key) /V (". $val . ")&gt;&gt;\n";
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}
<br />
&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$A</span><span class="keyword">.</span><span class="default">$B</span><span class="keyword">.</span><span class="default">$C</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span> 
<br />
It ain't perfect - but it works. (I use HTML for posting to the server, FDF to the browser)
<br />
joe</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Interprets an XML file into an object</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.simplexml-import-dom.html">? simplexml_import_dom</a></li>
      <li style="float: right;"><a href="function.simplexml-load-string.html">simplexml_load_string ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.simplexml.html">SimpleXML 函数</a></li>
    <li>Interprets an XML file into an object</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.simplexml-load-file" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">simplexml_load_file</h1>
  <p class="verinfo">(PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">simplexml_load_file</span> &mdash; <span class="dc-title">
   Interprets an XML file into an object
  </span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.simplexml-load-file-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>simplexml_load_file</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$filename</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">?</span><span class="type"><span class="type">string</span><span class="type"></span></span> <code class="parameter">$class_name</code><span class="initializer"> = SimpleXMLElement::class</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">int</span> <code class="parameter">$options</code><span class="initializer"> = 0</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$namespace_or_prefix</code><span class="initializer"> = &quot;&quot;</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">bool</span> <code class="parameter">$is_prefix</code><span class="initializer"> = <strong><code>false</code></strong></span></span><br>): <span class="type"><span class="type"><a href="class.simplexmlelement.html" class="type SimpleXMLElement">SimpleXMLElement</a></span>|<span class="type"><span class="type false">false</span></span></span></div>

  <p class="para rdfs-comment">
   Convert the well-formed XML document in the given file to an object.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.simplexml-load-file-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">filename</code></dt>

     <dd>

      <p class="para">
       Path to the XML file
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">class_name</code></dt>

     <dd>

      <p class="para">
       You may use this optional parameter so that
       <span class="function"><strong>simplexml_load_file()</strong></span> will return an object of 
       the specified class. That class should extend the 
       <span class="type"><a href="class.simplexmlelement.html" class="type SimpleXMLElement">SimpleXMLElement</a></span> class.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">options</code></dt>

     <dd>

      <p class="para">
       Since Libxml 2.6.0, you may also use the
       <code class="parameter">options</code> parameter to specify <a href="libxml.constants.html" class="link">additional Libxml parameters</a>.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">namespace_or_prefix</code></dt>

     <dd>

      <p class="para">
       Namespace prefix or URI.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">is_prefix</code></dt>

     <dd>

      <p class="para">
       <strong><code>true</code></strong> if <code class="parameter">namespace_or_prefix</code> is a prefix, <strong><code>false</code></strong> if it&#039;s a URI;
       defaults to <strong><code>false</code></strong>.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.simplexml-load-file-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   Returns an <span class="type">object</span> of class <span class="type"><a href="class.simplexmlelement.html" class="type SimpleXMLElement">SimpleXMLElement</a></span> with
   properties containing the data held within the XML document, 或者在失败时返回 <strong><code>false</code></strong>.
  </p>
  <div class="warning"><strong class="warning">Warning</strong><p class="simpara">此函数可能返回布尔值
<strong><code>false</code></strong>，但也可能返回等同于 <strong><code>false</code></strong> 的非布尔值。请阅读 <a href="language.types.boolean.html" class="link">布尔类型</a>章节以获取更多信息。应使用
<a href="language.operators.comparison.html" class="link">===
运算符</a>来测试此函数的返回值。</p></div>
 </div>


 <div class="refsect1 errors" id="refsect1-function.simplexml-load-file-errors">
  <h3 class="title">错误／异常</h3>
  <p class="para">
   Produces an <strong><code>E_WARNING</code></strong> error message for each error
   found in the XML data.
  </p>
  <div class="tip"><strong class="tip">Tip</strong>
   <p class="para">
    Use <span class="function"><a href="function.libxml-use-internal-errors.html" class="function">libxml_use_internal_errors()</a></span> to suppress all XML
    errors, and <span class="function"><a href="function.libxml-get-errors.html" class="function">libxml_get_errors()</a></span> to iterate over them
    afterwards.
   </p>
  </div>
 </div>


 <div class="refsect1 examples" id="refsect1-function.simplexml-load-file-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-5284">
    <p><strong>Example #1 Interpret an XML document</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;The&nbsp;file&nbsp;test.xml&nbsp;contains&nbsp;an&nbsp;XML&nbsp;document&nbsp;with&nbsp;a&nbsp;root&nbsp;element<br />//&nbsp;and&nbsp;at&nbsp;least&nbsp;an&nbsp;element&nbsp;/[root]/title.<br /><br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">file_exists</span><span style="color: #007700">(</span><span style="color: #DD0000">'test.xml'</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$xml&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">simplexml_load_file</span><span style="color: #007700">(</span><span style="color: #DD0000">'test.xml'</span><span style="color: #007700">);<br />&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml</span><span style="color: #007700">);<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;exit(</span><span style="color: #DD0000">'Failed&nbsp;to&nbsp;open&nbsp;test.xml.'</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     This script will display, on success:
    </p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
SimpleXMLElement Object
(
  [title] =&gt; Example Title
  ...
)
</pre></div>
    </div>
    <div class="example-contents"><p>
     At this point, you can go about using <code class="literal">$xml-&gt;title</code>
     and any other elements.
    </p></div>
   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.simplexml-load-file-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.simplexml-load-string.html" class="function" rel="rdfs-seeAlso">simplexml_load_string()</a> - Interprets a string of XML into an object</span></li>
    <li class="member"><span class="methodname"><a href="simplexmlelement.construct.html" class="methodname" rel="rdfs-seeAlso">SimpleXMLElement::__construct()</a> - Creates a new SimpleXMLElement object</span></li>
    <li class="member"><a href="simplexml.examples-errors.html" class="xref">Dealing with XML errors</a></li>
    <li class="member"><span class="function"><a href="function.libxml-use-internal-errors.html" class="function" rel="rdfs-seeAlso">libxml_use_internal_errors()</a> - Disable libxml errors and allow user to fetch error information as needed</span></li>
    <li class="member"><a href="simplexml.examples-basic.html" class="xref">Basic SimpleXML usage</a></li>
    <li class="member"><span class="function"><a href="function.libxml-set-streams-context.html" class="function" rel="rdfs-seeAlso">libxml_set_streams_context()</a> - Set the streams context for the next libxml document load or write</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="126774""></a>
  <div class="note">
   <strong class="user">visualmind at nospam dot php dot net</strong>
   <a href="#126774" class="date">18-Jan-2022 02:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This may sometimes get missed, but if your xml nodes are in the format:<br />
&lt;prefix:element /&gt;<br />
<br />
You need to make sure to set the [namespace or prefix] argument and the [isPrefix] argument to true. Also when recalling elements you need to avoid adding the prefix if that is already set, so in the above example "prefix:element" should be added as "element" but when saved the prefix will be added automatically.<br />
<br />
If prefix is not set during load or object construction, load will fail to get the nodes correctly and you will not be able to recall elements directly so $xml-&gt;{'prefix:element'} will not work either.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119934""></a>
  <div class="note">
   <strong class="user">sirgrayjn at gmail dot com</strong>
   <a href="#119934" class="date">22-Sep-2016 09:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
// Be carefull if you migrate or use local machine<br />
// for test/development.<br />
<br />
// Windows directory separators: "\" and "/"<br />
// You may mix separators "C:\somedir\www/img/bg.jpg".<br />
<br />
// Mixed separators path work fine in other functions<br />
// But simplexml_load_file() failed with mixed separators.<br />
<br />
// Examples:<br />
include("C:\dir\my.php");&nbsp; &nbsp; // work (windows)<br />
include("C:\dir/my.php");&nbsp; &nbsp; // work (windows) with mixed<br />
include("C:/dir/my.php");&nbsp; &nbsp; // work (windows, linux)<br />
simplexml_load_file("C:\dir\my.php");&nbsp; &nbsp; // work<br />
simplexml_load_file("C:\dir/my.php");&nbsp; &nbsp; // failed with mixed<br />
simplexml_load_file("C:/dir/my.php");&nbsp; &nbsp; // work</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119867""></a>
  <div class="note">
   <strong class="user">rex111 at bigmir dot net</strong>
   <a href="#119867" class="date">08-Sep-2016 03:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Get all tags and their values. (recursive)<br />
<br />
<span class="default">&lt;?php<br />
$xml </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="string">'settings.xml'</span><span class="keyword">);<br />
<br />
function </span><span class="default">all_tag</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$name </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$xml </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tag </span><span class="keyword">= </span><span class="default">$k</span><span class="keyword">-&gt;</span><span class="default">getName</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tag_value </span><span class="keyword">= </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">$tag</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$name </span><span class="keyword">== </span><span class="default">$tag</span><span class="keyword">){ </span><span class="default">$i</span><span class="keyword">++;&nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$name </span><span class="keyword">= </span><span class="default">$tag</span><span class="keyword">;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$tag </span><span class="keyword">.</span><span class="string">' '</span><span class="keyword">.</span><span class="default">$tag_value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">].</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// recursive<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">all_tag</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">$tag</span><span class="keyword">-&gt;</span><span class="default">children</span><span class="keyword">());<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">all_tag</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118372""></a>
  <div class="note">
   <strong class="user">Rich</strong>
   <a href="#118372" class="date">24-Nov-2015 02:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I stumbled on this: a single element with a simple string in it becomes a string, but a single element with a *space* in it becomes an Array, with one element, the string space.<br />
<br />
I'm sure to XML mystics this is wise and wonderful but it really confused me,&nbsp; and I thought it might confuse others.<br />
<br />
<span class="default">&lt;?php<br />
$parsed </span><span class="keyword">= </span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="string">'&lt;container&gt;&lt;space&gt; &lt;/space&gt;&lt;blank&gt;&lt;/blank&gt;&lt;string&gt;hello&lt;/string&gt;&lt;/container&gt;'</span><span class="keyword">);<br />
</span><span class="default">$content </span><span class="keyword">= </span><span class="default">json_decode</span><span class="keyword">(</span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$parsed</span><span class="keyword">),</span><span class="default">TRUE</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">);<br />
</span><span class="comment">/* Output is:<br />
array(3) {<br />
&nbsp; 'space' =&gt; array(1) {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ← did NOT expect this!<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; string(1) " "<br />
&nbsp; }<br />
&nbsp; 'blank' =&gt; array(0) { }<br />
&nbsp; 'string' =&gt; string(5) "hello"<br />
}<br />
&nbsp;*/</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117566""></a>
  <div class="note">
   <strong class="user">tuxedobob</strong>
   <a href="#117566" class="date">30-Jun-2015 01:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Occasionally you may try to load a file and have it complain about an entity and throw a parser error.<br />
<br />
If this is the case, check to make sure that the file in question does not contain an ampersand (&amp;) without a corresponding entity reference.<br />
<br />
If it does, or if you want to err on the side of caution, then instead of using simplexml_load_file, try this:<br />
<br />
$file = file_get_contents('stuff.xml');<br />
$temp = preg_replace('/&amp;(?!(quot|amp|pos|lt|gt);)/', '&amp;amp;', $file);<br />
$xml = simplexml_load_string($temp) or die("xml not loading");<br />
<br />
Read the file into a string, add 'amp;' after any '&amp;' that is not part of a character entity, then parse the string as xml.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109935""></a>
  <div class="note">
   <strong class="user">kannan at 99deals dot in</strong>
   <a href="#109935" class="date">04-Sep-2012 06:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you have some nodes which are having special characters, it would not load properly<br />
<br />
for an instance see the nodes below<br />
&lt;node:number&gt;1538-7445&lt;/node:number&gt;<br />
&lt;node:coverDisplayDate&gt;Sep&nbsp; 1 2012 12:00:00:000AM&lt;/node:coverDisplayDate&gt;<br />
<br />
either you have to change the : to other special characters like '-' in order to convert it properly<br />
<br />
Correct Node<br />
&lt;node-number&gt;1538-7445&lt;/node-number&gt;<br />
&lt;node-coverDisplayDate&gt;Sep&nbsp; 1 2012 12:00:00:000AM&lt;/node-coverDisplayDate&gt;<br />
<br />
I have wasted my precious time while debugging this. Please aware about this. ?</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109795""></a>
  <div class="note">
   <strong class="user">ricardo at ricardomartins dot info</strong>
   <a href="#109795" class="date">21-Aug-2012 05:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Sometimes we have xml's with hyphens nodes, like<br />
<br />
&lt;my_xml&gt;<br />
&nbsp;&lt;some-node&gt;value&lt;/some-node&gt;<br />
&lt;/my_xml&gt;<br />
<br />
You'll need to use<br />
<span class="default">&lt;?php<br />
$simpleXmlObj</span><span class="keyword">-&gt;{</span><span class="string">'some-node'</span><span class="keyword">}<br />
</span><span class="default">?&gt;<br />
</span><br />
instead of <br />
<span class="default">&lt;?php<br />
$simpleXmlObj</span><span class="keyword">-&gt;</span><span class="default">some</span><span class="keyword">-</span><span class="default">node</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108180""></a>
  <div class="note">
   <strong class="user">fusionstream at gmail dot com</strong>
   <a href="#108180" class="date">05-Apr-2012 04:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are loading many files, this may slow down your page load time.<br />
<br />
To set a timeout, use file_get_context and then simplexml_load_string<br />
<br />
<span class="default">&lt;?php<br />
<br />
$fp </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">'<a href="http://www.example.com/rss" rel="nofollow" target="_blank">http://www.example.com/rss</a>'</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">, </span><span class="default">stream_create_context</span><span class="keyword">(array(</span><span class="string">'http' </span><span class="keyword">=&gt; array(</span><span class="string">'timeout'</span><span class="keyword">, </span><span class="string">'1.5'</span><span class="keyword">))));<br />
<br />
if (</span><span class="default">$fp</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">( </span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">) );<br />
} else {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"The request timed out"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102974""></a>
  <div class="note">
   <strong class="user">sean at aliencreations dot com</strong>
   <a href="#102974" class="date">17-Mar-2011 10:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you find that you are receiving 500 errors with simplexml_load_file() but you can access the xml/rss feed manually through a browser, your script is probably being blocked by a user agent sniffer.<br />
<br />
Add this code before your xml call to remedy this issue<br />
<br />
<span class="default">&lt;?php<br />
<br />
ini_set</span><span class="keyword">(</span><span class="string">"user_agent"</span><span class="keyword">,</span><span class="string">"Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0)"</span><span class="keyword">);<br />
</span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">"max_execution_time"</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">"memory_limit"</span><span class="keyword">, </span><span class="string">"10000M"</span><span class="keyword">);<br />
<br />
</span><span class="default">$rss </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="default">$feed_url</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102309""></a>
  <div class="note">
   <strong class="user">Nanuit at ossi dot at</strong>
   <a href="#102309" class="date">08-Feb-2011 01:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A little function very helpfull in using simplexml_load_file behind a proxy
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">getXMLfromURL</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$Proxy </span><span class="keyword">= </span><span class="default">getenv</span><span class="keyword">(</span><span class="string">"HTTP_PROXY"</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$Proxy</span><span class="keyword">) &gt; </span><span class="default">1</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r_default_context </span><span class="keyword">= </span><span class="default">stream_context_get_default </span><span class="keyword">( array
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (</span><span class="string">'http' </span><span class="keyword">=&gt; array(
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'proxy' </span><span class="keyword">=&gt; </span><span class="default">$Proxy</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'request_fulluri' </span><span class="keyword">=&gt; </span><span class="default">True</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ),
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; );
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">libxml_set_streams_context</span><span class="keyword">(</span><span class="default">$r_default_context</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$daten </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp;&nbsp; return (</span><span class="default">$daten</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
where HTTP_PROXY is set to e.g.: tcp://proxy:8080</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100889""></a>
  <div class="note">
   <strong class="user">guego dot ol at ig dot com dot br</strong>
   <a href="#100889" class="date">12-Nov-2010 03:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Analyze fully XML.<br />
<br />
<span class="default">&lt;?php<br />
$xml </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="string">'file.xml'</span><span class="keyword">);<br />
<br />
foreach(</span><span class="default">$xml </span><span class="keyword">as </span><span class="default">$key0 </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">){<br />
echo </span><span class="string">"..1..[</span><span class="default">$key0</span><span class="string">] =&gt; </span><span class="default">$value</span><span class="string">"</span><span class="keyword">;<br />
foreach(</span><span class="default">$value</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">() as </span><span class="default">$attributeskey0 </span><span class="keyword">=&gt; </span><span class="default">$attributesvalue1</span><span class="keyword">){<br />
echo </span><span class="string">"________[</span><span class="default">$attributeskey0</span><span class="string">] = </span><span class="default">$attributesvalue1</span><span class="string">"</span><span class="keyword">;<br />
}<br />
echo </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
</span><span class="comment">////////////////////////////////////////////////<br />
</span><span class="keyword">foreach(</span><span class="default">$value </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value2</span><span class="keyword">){<br />
echo </span><span class="string">"....2.....[</span><span class="default">$key</span><span class="string">] =&gt; </span><span class="default">$value2</span><span class="string">"</span><span class="keyword">;<br />
foreach(</span><span class="default">$value2</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">() as </span><span class="default">$attributeskey </span><span class="keyword">=&gt; </span><span class="default">$attributesvalue2</span><span class="keyword">){<br />
echo </span><span class="string">"________[</span><span class="default">$attributeskey</span><span class="string">] = </span><span class="default">$attributesvalue2</span><span class="string">"</span><span class="keyword">;<br />
}<br />
echo </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
</span><span class="comment">////////////////////////////////////////////////<br />
</span><span class="keyword">foreach(</span><span class="default">$value2 </span><span class="keyword">as </span><span class="default">$key2 </span><span class="keyword">=&gt; </span><span class="default">$value3</span><span class="keyword">){<br />
echo </span><span class="string">".........3..........[</span><span class="default">$key2</span><span class="string">] =&gt; </span><span class="default">$value3</span><span class="string">"</span><span class="keyword">;<br />
foreach(</span><span class="default">$value3</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">() as </span><span class="default">$attributeskey2 </span><span class="keyword">=&gt; </span><span class="default">$attributesvalue3</span><span class="keyword">){<br />
echo </span><span class="string">"________[</span><span class="default">$attributeskey2</span><span class="string">] = </span><span class="default">$attributesvalue3</span><span class="string">"</span><span class="keyword">;<br />
}<br />
echo </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
</span><span class="comment">////////////////////////////////////////////////<br />
</span><span class="keyword">foreach(</span><span class="default">$value3 </span><span class="keyword">as </span><span class="default">$key3 </span><span class="keyword">=&gt; </span><span class="default">$value4</span><span class="keyword">){<br />
echo </span><span class="string">"...................4....................[</span><span class="default">$key3</span><span class="string">] =&gt; </span><span class="default">$value4</span><span class="string">"</span><span class="keyword">;<br />
foreach(</span><span class="default">$value4</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">() as </span><span class="default">$attributeskey3 </span><span class="keyword">=&gt; </span><span class="default">$attributesvalue4</span><span class="keyword">){<br />
echo </span><span class="string">"________[</span><span class="default">$attributeskey3</span><span class="string">] = </span><span class="default">$attributesvalue4</span><span class="string">"</span><span class="keyword">;<br />
}<br />
echo </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
</span><span class="comment">////////////////////////////////////////////////<br />
</span><span class="keyword">foreach(</span><span class="default">$value4 </span><span class="keyword">as </span><span class="default">$key4 </span><span class="keyword">=&gt; </span><span class="default">$value5</span><span class="keyword">){<br />
echo </span><span class="string">".....................5......................[</span><span class="default">$key4</span><span class="string">] =&gt; </span><span class="default">$value5</span><span class="string">"</span><span class="keyword">;<br />
foreach(</span><span class="default">$value5</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">() as </span><span class="default">$attributeskey4 </span><span class="keyword">=&gt; </span><span class="default">$attributesvalue5</span><span class="keyword">){<br />
echo </span><span class="string">"________[</span><span class="default">$attributeskey4</span><span class="string">] = </span><span class="default">$attributesvalue5</span><span class="string">"</span><span class="keyword">;<br />
}<br />
echo </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
</span><span class="comment">////////////////////////////////////////////////<br />
</span><span class="keyword">foreach(</span><span class="default">$value5 </span><span class="keyword">as </span><span class="default">$key5 </span><span class="keyword">=&gt; </span><span class="default">$value6</span><span class="keyword">){<br />
echo </span><span class="string">"......................6.......................[</span><span class="default">$key5</span><span class="string">] =&gt; </span><span class="default">$value6</span><span class="string">"</span><span class="keyword">;<br />
foreach(</span><span class="default">$value6</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">() as </span><span class="default">$attributeskey5 </span><span class="keyword">=&gt; </span><span class="default">$attributesvalue6</span><span class="keyword">){<br />
echo </span><span class="string">"________[</span><span class="default">$attributeskey5</span><span class="string">] = </span><span class="default">$attributesvalue6</span><span class="string">"</span><span class="keyword">;<br />
}<br />
echo </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
}}}}}<br />
echo </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100526""></a>
  <div class="note">
   <strong class="user">raduispas at gmail dot com</strong>
   <a href="#100526" class="date">21-Oct-2010 06:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if you want to check when this function fails,make sure to compare the return value with ===&nbsp; instead of == :
<br />

<br />
<span class="default">&lt;?php
<br />
$url </span><span class="keyword">= </span><span class="string">'<a href="http://www.example.com" rel="nofollow" target="_blank">http://www.example.com</a>'</span><span class="keyword">;
<br />
</span><span class="default">$xml </span><span class="keyword">= </span><span class="default">simpleXML_load_file</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">,</span><span class="string">"SimpleXMLElement"</span><span class="keyword">,</span><span class="default">LIBXML_NOCDATA</span><span class="keyword">);
<br />
if(</span><span class="default">$xml </span><span class="keyword">===&nbsp; </span><span class="default">FALSE</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp; </span><span class="comment">//deal with error
<br />
</span><span class="keyword">}
<br />
else { </span><span class="comment">//do stuff } 
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Otherwise you may end up with FALSE all the time even if the document is ok. Hope this helps someone ;)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97077""></a>
  <div class="note">
   <strong class="user">jamie at splooshmedia dot co dot uk</strong>
   <a href="#97077" class="date">31-Mar-2010 06:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A wrapper around simplexml_load_file to circumvent nasty error messages when the xml server times out or gives a 500 error etc.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">loadXML2</span><span class="keyword">(</span><span class="default">$domain</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">, </span><span class="default">$timeout </span><span class="keyword">= </span><span class="default">30</span><span class="keyword">) {
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/*
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; Usage:
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $xml = loadXML2("127.0.0.1", "/path/to/xml/server.php?code=do_something");
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if($xml) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // xml doc loaded
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // failed. show friendly error message.
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; */
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$fp </span><span class="keyword">= </span><span class="default">fsockopen</span><span class="keyword">(</span><span class="default">$domain</span><span class="keyword">, </span><span class="default">80</span><span class="keyword">, </span><span class="default">$errno</span><span class="keyword">, </span><span class="default">$errstr</span><span class="keyword">, </span><span class="default">$timeout</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$fp</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// make request
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">= </span><span class="string">"GET </span><span class="default">$path</span><span class="string"> HTTP/1.1\r\n"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">.= </span><span class="string">"Host: </span><span class="default">$domain</span><span class="string">\r\n"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">.= </span><span class="string">"Connection: Close\r\n\r\n"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">$out</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// get response
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$resp </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while (!</span><span class="default">feof</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$resp </span><span class="keyword">.= </span><span class="default">fgets</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">128</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// check status is 200
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$status_regex </span><span class="keyword">= </span><span class="string">"/HTTP\/1\.\d\s(\d+)/"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="default">$status_regex</span><span class="keyword">, </span><span class="default">$resp</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">) &amp;&amp; </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] == </span><span class="default">200</span><span class="keyword">) {&nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// load xml as object
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$parts </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"\r\n\r\n"</span><span class="keyword">, </span><span class="default">$resp</span><span class="keyword">);&nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">$parts</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; 
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96764""></a>
  <div class="note">
   <strong class="user">Smokey</strong>
   <a href="#96764" class="date">14-Mar-2010 10:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
for nested and same name values i'v made up this little bit for getting and displaying multiable values from google's geocode when a exact match is not found it returns all close matches in the following format(this is an abriged version of there output)<br />
<br />
&lt;Response&gt;<br />
&nbsp; &lt;Placemark id="1"&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;address&gt; New York 24, NY, USA&lt;/address&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;AddressDetails&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; ..................<br />
&nbsp;&nbsp;&nbsp; &lt;/AddressDetails&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;Point&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;coordinates&gt;-73.5850086,40.7207442,0&lt;/coordinates&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/Point&gt;<br />
&nbsp; &lt;/Placemark&gt;<br />
&nbsp; &lt;Placemark id="2"&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;address&gt;New York 27, NY, USA&lt;/address&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;AddressDetails&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; ...................<br />
&nbsp;&nbsp;&nbsp; &lt;/AddressDetails&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;Point&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;coordinates&gt;-72.8987835,40.8003588,0&lt;/coordinates&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/Point&gt;<br />
&nbsp; &lt;/Placemark&gt;<br />
&nbsp; &lt;Placemark id="3"&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;address&gt;Cedar Place School, 20 Cedar Pl, Yonkers, NY 10705, USA&lt;/address&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;AddressDetails&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; ..................<br />
&nbsp;&nbsp;&nbsp; &lt;/AddressDetails&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;Point&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;coordinates&gt;-73.8966320,40.9256520,0&lt;/coordinates&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/Point&gt;<br />
&nbsp; &lt;/Placemark&gt;<br />
&lt;/Response&gt;<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// get and breakdown the results then store them in $var's<br />
</span><span class="default">$Address </span><span class="keyword">= </span><span class="string">"99999 parkplace, new york, NY"</span><span class="keyword">;<br />
</span><span class="default">$urladdress </span><span class="keyword">= </span><span class="default">urlencode</span><span class="keyword">(</span><span class="default">$Address</span><span class="keyword">);<br />
</span><span class="default">$Base_url </span><span class="keyword">= </span><span class="string">"<a href="http://maps.google.com/maps/geo?q=" rel="nofollow" target="_blank">http://maps.google.com/maps/geo?q=</a>"</span><span class="keyword">;<br />
</span><span class="default">$urlParts </span><span class="keyword">= </span><span class="string">"&amp;output=xml"</span><span class="keyword">;<br />
</span><span class="default">$urlrequest </span><span class="keyword">= </span><span class="default">$Base_url </span><span class="keyword">. </span><span class="default">$urladdress </span><span class="keyword">. </span><span class="default">$urlParts</span><span class="keyword">;<br />
</span><span class="default">$xml </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="default">$urlrequest</span><span class="keyword">);<br />
</span><span class="default">$num </span><span class="keyword">= </span><span class="string">"0"</span><span class="keyword">;<br />
foreach (</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">Response</span><span class="keyword">-&gt;</span><span class="default">Placemark </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">){ <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$num</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$GeoFindAdd</span><span class="keyword">{</span><span class="default">$num</span><span class="keyword">} = </span><span class="default">$value</span><span class="keyword">-&gt;</span><span class="default">address</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$GeoFindCords</span><span class="keyword">{</span><span class="default">$num</span><span class="keyword">} = </span><span class="default">$value</span><span class="keyword">-&gt;</span><span class="default">Point</span><span class="keyword">-&gt;</span><span class="default">coordinates</span><span class="keyword">;<br />
} <br />
<br />
</span><span class="comment">// a simple display for the results <br />
</span><span class="keyword">echo </span><span class="string">"Found "</span><span class="keyword">,</span><span class="default">$num</span><span class="keyword">,</span><span class="string">" Possable Geo Data Sets &lt;br&gt;"</span><span class="keyword">;<br />
</span><span class="default">$CountNumResults </span><span class="keyword">= </span><span class="string">"0"</span><span class="keyword">;<br />
for ( ; </span><span class="default">$num </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">; </span><span class="default">$num</span><span class="keyword">--){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$CountNumResults</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$countnum</span><span class="keyword">,</span><span class="string">"&lt;br&gt; Address = "</span><span class="keyword">,</span><span class="default">$GeoFindAdd</span><span class="keyword">{</span><span class="default">$num</span><span class="keyword">},</span><span class="string">"&lt;br&gt; Coordinates = "</span><span class="keyword">,</span><span class="default">$GeoFindCords</span><span class="keyword">{</span><span class="default">$num</span><span class="keyword">},</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
}<br />
echo </span><span class="string">"END"</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93478""></a>
  <div class="note">
   <strong class="user">knl at bitflop dot com</strong>
   <a href="#93478" class="date">11-Sep-2009 12:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need to parse the data from SimpleXML into a session variable remember to define the data as a string first.
<br />

<br />
If you don't you will get warnings of "Node no longer exists" pointing to your session_start() function.
<br />

<br />
This will work:
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
&nbsp;&nbsp;&nbsp; $new_version </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="string">'<a href="http://example.com/version.xml" rel="nofollow" target="_blank">http://example.com/version.xml</a>'</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">'current_version'</span><span class="keyword">] = (string)</span><span class="default">$new_version</span><span class="keyword">-&gt;</span><span class="default">version</span><span class="keyword">;
<br />

<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92969""></a>
  <div class="note">
   <strong class="user">neil art neilanddeb dort com</strong>
   <a href="#92969" class="date">17-Aug-2009 06:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Because the encoding of my XML file is UTF-8 and the <br />
encoding of my web page is iso-8859-1 I was getting strange characters such as a&trade; instead of a right single quote.<br />
<br />
The solution to this turned out to be hard to find, but really easy to implement.<br />
<br />
<a href="http://uk3.php.net/manual/en/function.iconv.php" rel="nofollow" target="_blank">http://uk3.php.net/manual/en/function.iconv.php</a><br />
<br />
Using the iconv() function you can convert from one encodign to another, the TRANSLIT option seems to work best for what I needed.&nbsp; Here's my example:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// convert string from utf-8 to iso8859-1<br />
</span><span class="default">$horoscope </span><span class="keyword">= </span><span class="default">iconv</span><span class="keyword">( </span><span class="string">"UTF-8"</span><span class="keyword">, </span><span class="string">"ISO-8859-1//TRANSLIT"</span><span class="keyword">, </span><span class="default">$horoscope </span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
I found the solution on this page...<br />
<a href="http://tinyurl.com/lm39xc" rel="nofollow" target="_blank">http://tinyurl.com/lm39xc</a><br />
Hope this helps</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86471""></a>
  <div class="note">
   <strong class="user">cryonyx at cerebrate dot ru</strong>
   <a href="#86471" class="date">21-Oct-2008 03:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In case you have a XML file with a series of equally named elements on one level simplexml incorrectly processes them and doesn't allow to walk through the array using foreach(). As far as I'm concerned, it is the problem caused by PHP xml_parser (see: <a href="http://ru2.php.net/manual/ru/function.xml-parser-create.php#53188" rel="nofollow" target="_blank">http://ru2.php.net/manual/ru/function.xml-parser-create.php#53188</a>).
<br />

<br />
To avoid this, just use count() and walk through the array using for().
<br />

<br />
Example:
<br />

<br />
&lt;params&gt;
<br />
&nbsp; &lt;param&gt;
<br />
&nbsp;&nbsp;&nbsp; &lt;name&gt;version.shell&lt;/name&gt;
<br />
&nbsp;&nbsp;&nbsp; &lt;value&gt;1.0&lt;/value&gt;
<br />
&nbsp; &lt;/param&gt;
<br />
&nbsp; &lt;param&gt;
<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;name&gt;version.core&lt;/name&gt;
<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;value&gt;1.0&lt;/value&gt;
<br />
&nbsp; &lt;/param&gt;
<br />
&nbsp; &lt;param&gt;
<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;name&gt;file.lang&lt;/name&gt;
<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;value&gt;vc.lang&lt;/value&gt;
<br />
&nbsp; &lt;/param&gt;
<br />
&nbsp; ...
<br />
&lt;/params&gt;
<br />

<br />
<span class="default">&lt;?php
<br />
$filename </span><span class="keyword">= </span><span class="string">'...'</span><span class="keyword">;
<br />
</span><span class="default">$xml </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">);
<br />
</span><span class="default">$p_cnt </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">param</span><span class="keyword">);
<br />
for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$p_cnt</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {
<br />
&nbsp; </span><span class="default">$param </span><span class="keyword">= </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">param</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];
<br />
&nbsp; ...;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85484""></a>
  <div class="note">
   <strong class="user">mario</strong>
   <a href="#85484" class="date">02-Sep-2008 02:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want CDATA in your object you should use LIBXML_NOCDATA
<br />

<br />
<span class="default">&lt;?php
<br />
$xml </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="default">$file_xml</span><span class="keyword">, </span><span class="string">'SimpleXMLElement'</span><span class="keyword">,</span><span class="default">LIBXML_NOCDATA</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82067""></a>
  <div class="note">
   <strong class="user">l [DOT] anzinger [AT] gmail [DOT] com</strong>
   <a href="#82067" class="date">26-Mar-2008 09:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you don't want that the CDATA values get escaped, just load the XML with LIBXML_NOCDATA as an 3rd argument.
<br />

<br />
Note: A PHP version &gt;= 5.1.0 is required for this to work.
<br />

<br />
Example: 
<br />

<br />
<span class="default">&lt;?php simplexml_load_file</span><span class="keyword">(</span><span class="string">'xmldatei.xml'</span><span class="keyword">, </span><span class="default">null</span><span class="keyword">, </span><span class="default">LIBXML_NOCDATA</span><span class="keyword">); </span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74192""></a>
  <div class="note">
   <strong class="user">php at werner dash ott dot de</strong>
   <a href="#74192" class="date">29-Mar-2007 01:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Making SimpleXMLElement objects session save.
<br />

<br />
Besides the effect of not surviving sessions, the SimpleXMLElement object may even crash the session_start() function when trying to re-enter the session!
<br />

<br />
To come up with a solution for this, I used a pattern as follows. The core idea is to transform the SimpleXMLElement between session calls to and from a string representation which of course is session save.
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp; </span><span class="comment">//
<br />
&nbsp; // session save handling of SimpleXMLElement objects
<br />
&nbsp; // (applies to/ tested with PHP 5.1.5 and PHP 5.2.1)
<br />
&nbsp; // The myClass pattern allows for conveniently accessing
<br />
&nbsp; // XML structures while being session save
<br />
&nbsp; //
<br />
&nbsp; </span><span class="keyword">class </span><span class="default">myClass
<br />
&nbsp; </span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$o_XMLconfig </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$s_XMLconfig </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$args_configfile</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">o_XMLconfig </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="default">$args_configfile</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">s_XMLconfig </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">o_XMLconfig</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();
<br />
&nbsp;&nbsp;&nbsp; } </span><span class="comment">// __construct()
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">__destruct</span><span class="keyword">()
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">s_XMLconfig </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">o_XMLconfig</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();
<br />
&nbsp;&nbsp; &nbsp;&nbsp; unset(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">o_XMLconfig</span><span class="keyword">); </span><span class="comment">// this object would otherwise crash 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // the subsequent call of 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // session_start()!
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">} </span><span class="comment">// __destruct()
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">__wakeup</span><span class="keyword">()
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">o_XMLconfig </span><span class="keyword">= </span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">s_XMLconfig</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; } </span><span class="comment">// __wakeup()
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp; </span><span class="keyword">} </span><span class="comment">// class myClass
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73367""></a>
  <div class="note">
   <strong class="user">wouter at code-b dot nl</strong>
   <a href="#73367" class="date">20-Feb-2007 02:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To correctly extract a value from a CDATA just make sure you cast the SimpleXML Element to a string value by using the cast operator:
<br />

<br />
<span class="default">&lt;?php
<br />
$xml </span><span class="keyword">= </span><span class="string">'&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
<br />
&lt;rss&gt;
<br />
&nbsp;&nbsp;&nbsp; &lt;channel&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;item&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;title&gt;&lt;![CDATA[Tom &amp; Jerry]]&gt;&lt;/title&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;/item&gt;
<br />
&nbsp;&nbsp;&nbsp; &lt;/channel&gt;
<br />
&lt;/rss&gt;'</span><span class="keyword">;
<br />

<br />
</span><span class="default">$xml </span><span class="keyword">= </span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">);
<br />

<br />
</span><span class="comment">// echo does the casting for you
<br />
</span><span class="keyword">echo </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">channel</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">-&gt;</span><span class="default">title</span><span class="keyword">;
<br />

<br />
</span><span class="comment">// but vardump (or print_r) not!
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">channel</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">-&gt;</span><span class="default">title</span><span class="keyword">);
<br />

<br />
</span><span class="comment">// so cast the SimpleXML Element to 'string' solve this issue
<br />
</span><span class="default">var_dump</span><span class="keyword">((string) </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">channel</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">-&gt;</span><span class="default">title</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Above will output:
<br />

<br />
Tom &amp; Jerry
<br />

<br />
object(SimpleXMLElement)#4 (0) {}
<br />

<br />
string(11) "Tom &amp; Jerry"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71667""></a>
  <div class="note">
   <strong class="user">Kyle</strong>
   <a href="#71667" class="date">10-Dec-2006 02:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In regards to Anonymous on 7th April 2006<br />
<br />
There is a way to get back HTML tags. For example:<br />
<br />
&lt;?xml version="1.0"?&gt;<br />
&lt;intro&gt;<br />
&nbsp;&nbsp;&nbsp; Welcome to &lt;b&gt;Example.com&lt;/b&gt;!<br />
&lt;/intro&gt;<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// I use @ so that it doesn't spit out content of my XML in an error message if the load fails. The content could be passwords so this is just to be safe.<br />
</span><span class="default">$xml </span><span class="keyword">= @</span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="string">'content_intro.xml'</span><span class="keyword">);<br />
if (</span><span class="default">$xml</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// asXML() will keep the HTML tags but it will also keep the parent tag &lt;intro&gt; so I strip them out with a str_replace. You could obviously also use a preg_replace if you have lots of tags.<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$intro </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(array(</span><span class="string">'&lt;intro&gt;'</span><span class="keyword">, </span><span class="string">'&lt;/intro&gt;'</span><span class="keyword">), </span><span class="string">''</span><span class="keyword">, </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">());<br />
} else {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$error </span><span class="keyword">= </span><span class="string">"Could not load intro XML file."</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
With this method someone can change the intro in content_intro.xml and ensure that the HTML is well formed and not ruin the whole site design.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="64080""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#64080" class="date">06-Apr-2006 09:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
What has been found when using the script is that simplexml_load_file() will remove any HTML formating inside the XML file, and will also only load so many layers deep. If your XML file is to deap, it will return a boolean false.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="62781""></a>
  <div class="note">
   <strong class="user">fdouteaud at gmail dot com</strong>
   <a href="#62781" class="date">09-Mar-2006 05:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be careful if you are using simplexml data directly to feed your MySQL database using MYSQLi and bind parameters. <br />
<br />
The data coming from simplexml are Objects and the bind parameters functions of MySQLi do NOT like that! (it causes some memory leak and can crash Apache/PHP)<br />
<br />
In order to do this properly you MUST cast your values to the right type (string, integer...) before passing them to the binding methods of MySQLi.<br />
I did not find that in the documentation and it caused me a lot of headache.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="61549""></a>
  <div class="note">
   <strong class="user">info at evasion dot cc</strong>
   <a href="#61549" class="date">06-Feb-2006 08:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Sorry there's a mistake in the previous function :<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; </span><span class="keyword">function &amp;</span><span class="default">getXMLnode</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">, </span><span class="default">$param</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$object </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(isset(</span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">-&gt;</span><span class="default">$param</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">-&gt;</span><span class="default">$param</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">)&amp;&amp;!empty(</span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$new_obj </span><span class="keyword">= </span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Must use getXMLnode function there (recursive)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ret </span><span class="keyword">= </span><span class="default">getXMLnode</span><span class="keyword">(</span><span class="default">$new_obj</span><span class="keyword">, </span><span class="default">$param</span><span class="keyword">);&nbsp;&nbsp; <br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; if(</span><span class="default">$ret</span><span class="keyword">) return (string) </span><span class="default">$ret</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="61450""></a>
  <div class="note">
   <strong class="user">skutter at imprecision dot net</strong>
   <a href="#61450" class="date">03-Feb-2006 09:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
So it seems SimpleXML doesn't support CDATA... I bashed together this little regex function to sort out the CDATA before trying to parse XML with the likes of simplexml_load_file / simplexml_load_string. Hope it might help somebody and would be very interested to hear of better solutions. (Other than *not* using SimpleXML of course! ;)<br />
<br />
It looks for any &lt;![CDATA [Text and HTML etc in here]]&gt; elements, htmlspecialchar()'s the encapsulated data and then strips the "&lt;![CDATA [" and "]]&gt;" tags out.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">simplexml_unCDATAise</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$new_xml </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">"/\&lt;\!\[CDATA \[(.*)\]\]\&gt;/U"</span><span class="keyword">, </span><span class="default">$xml</span><span class="keyword">, </span><span class="default">$args</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (isset(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) &amp;&amp; isset(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new_xml </span><span class="keyword">= </span><span class="default">$xml</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">count</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]); </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$old_text </span><span class="keyword">= </span><span class="default">$args</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new_text </span><span class="keyword">= </span><span class="default">htmlspecialchars</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new_xml </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$old_text</span><span class="keyword">, </span><span class="default">$new_text</span><span class="keyword">, </span><span class="default">$new_xml</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$new_xml</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">//Usage:<br />
</span><span class="default">$xml </span><span class="keyword">= </span><span class="string">'Your XML with CDATA...'</span><span class="keyword">;<br />
</span><span class="default">$xml </span><span class="keyword">= </span><span class="default">simplexml_unCDATAise</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">);<br />
</span><span class="default">$xml_object </span><span class="keyword">= </span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="61438""></a>
  <div class="note">
   <strong class="user">info at evasion dot cc</strong>
   <a href="#61438" class="date">03-Feb-2006 03:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Suppose you have loaded a XML file into $simpleXML_obj. <br />
The structure is like below :<br />
<br />
SimpleXMLElement Object<br />
(<br />
<br />
&nbsp;&nbsp;&nbsp; [node1] =&gt; SimpleXMLElement Object<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [subnode1] =&gt; value1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [subnode2] =&gt; value2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [subnode3] =&gt; value3<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [node2] =&gt; SimpleXMLElement Object<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [subnode4] =&gt; value4<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [subnode5] =&gt; value5<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [subnode6] =&gt; value6<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)<br />
<br />
When searching a specific node in the object, you may use this function :<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function &amp;</span><span class="default">getXMLnode</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">, </span><span class="default">$param</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$object </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(isset(</span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">-&gt;</span><span class="default">$param</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">-&gt;</span><span class="default">$param</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">)&amp;&amp;!empty(</span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new_obj </span><span class="keyword">= </span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ret </span><span class="keyword">= </span><span class="default">getCfgParam</span><span class="keyword">(</span><span class="default">$new_obj</span><span class="keyword">, </span><span class="default">$param</span><span class="keyword">);&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$ret</span><span class="keyword">) return (string) </span><span class="default">$ret</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
So if you want to get subnode4 value you may use this function like this : <br />
<br />
<span class="default">&lt;?php<br />
$result </span><span class="keyword">= </span><span class="default">getXMLnode</span><span class="keyword">(</span><span class="default">$simpleXML_obj</span><span class="keyword">, </span><span class="string">'subnode4'</span><span class="keyword">);<br />
echo </span><span class="default">$result</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
It display "value4"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57326""></a>
  <div class="note">
   <strong class="user">genialbrainmachine at NOSPAM dot tiscali dot it</strong>
   <a href="#57326" class="date">30-Sep-2005 08:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Micro$oft Word uses non-standard characters and they create problems in using simplexml_load_file.<br />
Many systems include non-standard Word character in their implementation of ISO-8859-1. So an XML document containing that characters can appear well-formed (i.e.) to many browsers. But if you try to load this kind of documents with simplexml_load_file you'll have a little bunch of troubles..<br />
I believe that this is exactly the same question discussed in htmlentites. Following notes to htmlentitles are interesting here too (given in the reverse order, to grant the history):<br />
<a href="http://it.php.net/manual/en/function.htmlentities.php#26379" rel="nofollow" target="_blank">http://it.php.net/manual/en/function.htmlentities.php#26379</a><br />
<a href="http://it.php.net/manual/en/function.htmlentities.php#41152" rel="nofollow" target="_blank">http://it.php.net/manual/en/function.htmlentities.php#41152</a><br />
<a href="http://it.php.net/manual/en/function.htmlentities.php#42126" rel="nofollow" target="_blank">http://it.php.net/manual/en/function.htmlentities.php#42126</a><br />
<a href="http://it.php.net/manual/en/function.htmlentities.php#42511" rel="nofollow" target="_blank">http://it.php.net/manual/en/function.htmlentities.php#42511</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56691""></a>
  <div class="note">
   <strong class="user">mark</strong>
   <a href="#56691" class="date">12-Sep-2005 11:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If the property of an object is empty the array is not created. Here is a version object2array that transfers properly.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">object2array</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; 
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">))
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$object </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">object2array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; } 
<br />
&nbsp;&nbsp;&nbsp; else 
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$var </span><span class="keyword">= </span><span class="default">get_object_vars</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$var</span><span class="keyword">) 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$var </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = (</span><span class="default">$key </span><span class="keyword">&amp;&amp; !</span><span class="default">$value</span><span class="keyword">) ? </span><span class="default">NULL </span><span class="keyword">: </span><span class="default">object2array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else return </span><span class="default">$object</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$return</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

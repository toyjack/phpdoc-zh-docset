<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>类型转换的判别</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="language.pseudo-types.html">? 本文档中使用的伪类型与变量</a></li>
      <li style="float: right;"><a href="language.variables.html">变量 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="language.types.html">类型</a></li>
    <li>类型转换的判别</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="language.types.type-juggling" class="sect1">
 <h2 class="title">类型转换的判别</h2>

 <p class="simpara">
  PHP 在变量定义中不需要（或不支持）明确的类型定义；变量类型是根据使用该变量的上下文所决定的。也就是说，如果把一个 <span class="type"><a href="language.types.string.html" class="type string">string</a></span> 值赋给变量
<var class="varname"><var class="varname">$var</var></var>，<var class="varname"><var class="varname">$var</var></var>
  就成了一个 <span class="type"><a href="language.types.string.html" class="type string">string</a></span>。如果又把一个<span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span> 赋给
  <var class="varname"><var class="varname">$var</var></var>，那它就成了一个<span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>。
 </p>

 <p class="para">
  PHP 的自动类型转换的一个例子是乘法运算符"*"。如果任何一个操作数是<span class="type"><a href="language.types.float.html" class="type float">float</a></span>，则所有的操作数都被当成<span class="type"><a href="language.types.float.html" class="type float">float</a></span>，结果也是<span class="type"><a href="language.types.float.html" class="type float">float</a></span>。否则操作数会被解释为<span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>，结果也是<span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>。注意这并<em class="emphasis">没有</em>改变这些操作数本身的类型；改变的仅是这些操作数如何被求值以及表达式本身的类型。
 </p>

 <div class="informalexample">
  <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$foo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"1"</span><span style="color: #007700">;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$foo&nbsp;是字符串&nbsp;(ASCII&nbsp;49)<br /></span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">*=&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$foo&nbsp;现在是一个整数&nbsp;(2)<br /></span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">1.3</span><span style="color: #007700">;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$foo&nbsp;现在是一个浮点数&nbsp;(2.6)<br /></span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">5&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #DD0000">"10&nbsp;Little&nbsp;Piggies"</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;$foo&nbsp;是整数&nbsp;(50)<br /></span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">5&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #DD0000">"10&nbsp;Small&nbsp;Pigs"</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$foo&nbsp;是整数&nbsp;(50)<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>

  </div>

 </div>

 <p class="simpara">
  如果上面两个例子看上去古怪的话，参见<a href="language.types.string.html#language.types.string.conversion" class="link">字符串转换为数值</a>。
 </p>

 <p class="simpara">
  如果要强制将一个变量当作某种类型来求值，参见<a href="language.types.type-juggling.html#language.types.typecasting" class="link">类型强制转换</a>一节。如果要改变一个变量的类型，参见 <span class="function"><a href="function.settype.html" class="function">settype()</a></span>。
 </p>

 <p class="para">
  如果想要测试本节中任何例子的话，可以用 <span class="function"><a href="function.var-dump.html" class="function">var_dump()</a></span> 函数。
 </p>

 <blockquote class="note"><p><strong class="note">Note</strong>: 
  <p class="para">
   自动转换为 <span class="type"><span class="type 数组">数组</span></span> 的行为目前没有定义。
  </p>

  <p class="para">
   此外，由于 PHP 支持使用和数组下标同样的语法访问字符串下标，以下例子在所有 PHP 版本中都有效：
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$a&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'car'</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;$a&nbsp;is&nbsp;a&nbsp;string<br /></span><span style="color: #0000BB">$a</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'b'</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$a&nbsp;is&nbsp;still&nbsp;a&nbsp;string<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;bar<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>

  <p class="para">
   请参阅<a href="language.types.string.html#language.types.string.substr" class="link">存取和修改字符串中的字符</a>一节以获取更多信息。
  </p>
 </p></blockquote>

 <div class="sect2" id="language.types.typecasting">
  <h3 class="title">类型强制转换</h3>

  <p class="para">
   PHP 中的类型强制转换和 C 中的非常像：在要转换的变量之前加上用括号括起来的目标类型。
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$foo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">10</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$foo&nbsp;is&nbsp;an&nbsp;integer<br /></span><span style="color: #0000BB">$bar&nbsp;</span><span style="color: #007700">=&nbsp;(boolean)&nbsp;</span><span style="color: #0000BB">$foo</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$bar&nbsp;is&nbsp;a&nbsp;boolean<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>

  <p class="para">
   允许的强制转换有：
  </p>

  <ul class="itemizedlist">
   <li class="listitem">
    <span class="simpara">(int), (integer) - 转换为整形 <span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span></span>
   </li>
   <li class="listitem">
    <span class="simpara">(bool), (boolean) - 转换为布尔类型 <span class="type"><a href="language.types.boolean.html" class="type boolean">boolean</a></span></span>
   </li>
   <li class="listitem">
    <span class="simpara">(float), (double), (real) - 转换为浮点型 <span class="type"><a href="language.types.float.html" class="type float">float</a></span></span>
   </li>
   <li class="listitem">
    <span class="simpara">(string) - 转换为字符串 <span class="type"><a href="language.types.string.html" class="type string">string</a></span></span>
   </li>
   <li class="listitem">
    <span class="simpara">(array) - 转换为数组 <span class="type"><a href="language.types.array.html" class="type array">array</a></span></span>
   </li>
   <li class="listitem">
    <span class="simpara">(object) - 转换为对象 <span class="type"><a href="language.types.object.html" class="type object">object</a></span></span>
   </li>
   <li class="listitem">
    <span class="simpara">(unset) - 转换为 <span class="type"><a href="language.types.null.html" class="type NULL">NULL</a></span> (PHP 5)</span>
   </li>
  </ul>

  <p class="para">
   (binary) 转换和 b 前缀转换支持为 PHP 5.2.1 新增。
  </p>

  <p class="para">
   注意在括号内允许有空格和制表符，所以下面两个例子功能相同：
  </p>
   
  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$foo&nbsp;</span><span style="color: #007700">=&nbsp;(int)&nbsp;</span><span style="color: #0000BB">$bar</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;(&nbsp;int&nbsp;)&nbsp;</span><span style="color: #0000BB">$bar</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>


   <p class="para">
    将字符串文字和变量转换为二进制字符串：
   </p>

   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$binary&nbsp;</span><span style="color: #007700">=&nbsp;(binary)</span><span style="color: #0000BB">$string</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$binary&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">b"binary&nbsp;string"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>

  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    可以将变量放置在双引号中的方式来代替将变量转换成字符串：
   </p>

   <div class="informalexample">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$foo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">10</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$foo&nbsp;是一个整数<br /></span><span style="color: #0000BB">$str&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$foo</span><span style="color: #DD0000">"</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$str&nbsp;是一个字符串<br /></span><span style="color: #0000BB">$fst&nbsp;</span><span style="color: #007700">=&nbsp;(string)&nbsp;</span><span style="color: #0000BB">$foo</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;$fst&nbsp;也是一个字符串<br /><br />//&nbsp;输出&nbsp;"they&nbsp;are&nbsp;the&nbsp;same"<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$fst&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">$str</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"they&nbsp;are&nbsp;the&nbsp;same"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p></blockquote>
   
  <p class="para">
   有时在类型之间强制转换时确切地会发生什么可能不是很明显。更多信息见如下小节：
  </p>
  
  <ul class="itemizedlist">
   <li class="listitem">
    <span class="simpara">
     <a href="language.types.boolean.html#language.types.boolean.casting" class="link">转换为布尔型</a>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <a href="language.types.integer.html#language.types.integer.casting" class="link">转换为整型</a>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <a href="language.types.float.html#language.types.float.casting" class="link">转换为浮点型</a>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <a href="language.types.string.html#language.types.string.casting" class="link">转换为字符串</a>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <a href="language.types.array.html#language.types.array.casting" class="link">转换为数组</a>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <a href="language.types.object.html#language.types.object.casting" class="link">转换为对象</a>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <a href="language.types.resource.html#language.types.resource.casting" class="link">转换为资源</a>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <a href="language.types.null.html#language.types.null.casting" class="link">转换为 NULL</a>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <a href="types.comparisons.html" class="link">类型比较表</a>
    </span>
   </li>
  </ul>

 </div>
</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="124070""></a>
  <div class="note">
   <strong class="user">Dhairya Lakhera</strong>
   <a href="#124070" class="date">25-Jul-2019 10:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Value of uninitialized variable of different data types.<br />
<br />
settype($a,'bool');<br />
var_dump($a);&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //boolean false<br />
<br />
settype($b,'string');<br />
var_dump($b);&nbsp; &nbsp; &nbsp; &nbsp; //string '' (length=0)<br />
<br />
settype($c,'array');<br />
var_dump($c);&nbsp; &nbsp; &nbsp; &nbsp; //array (size=0)&nbsp; empty<br />
<br />
settype($d,'int');<br />
var_dump($d);&nbsp; &nbsp; &nbsp;&nbsp; //int 0<br />
<br />
settype($e,'float');<br />
var_dump($e);&nbsp; &nbsp; &nbsp; //float 0<br />
<br />
settype($f,'object');<br />
var_dump($f);&nbsp; &nbsp;&nbsp; //object(stdClass)[1]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="123680""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#123680" class="date">11-Mar-2019 05:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
"An example of PHP's automatic type conversion is the multiplication operator '*'. If either operand is a float, then both operands are evaluated as floats, and the result will be a float. Otherwise, the operands will be interpreted as integers, and the result will also be an integer. Note that this does not change the types of the operands themselves; the only change is in how the operands are evaluated and what the type of the expression itself is."<br />
<br />
I understand what the doc is trying to say here, but this sentence is not correct as stated, other types can be coerced into floats.<br />
<br />
e.g.<br />
<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= </span><span class="string">"1.5"</span><span class="keyword">; </span><span class="comment">// $a is a string<br />
</span><span class="default">$b </span><span class="keyword">= </span><span class="default">100</span><span class="keyword">; </span><span class="comment">// $b is an int<br />
</span><span class="default">$c </span><span class="keyword">= </span><span class="default">$a </span><span class="keyword">* </span><span class="default">$b</span><span class="keyword">; </span><span class="comment">// $c is a float, value is 150<br />
// multiplication resulted in a float despite fact that neither operand was a float</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117994""></a>
  <div class="note">
   <strong class="user">berniev</strong>
   <a href="#117994" class="date">15-Sep-2015 11:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
May be expected, but not stated ..<br />
Casting to the existing (same) type has no effect.<br />
$t = 'abc';&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // string 'abc'<br />
$u=(array) $t;&nbsp;&nbsp; // array 0 =&gt; string 'abc'&nbsp; &lt;-- now an array<br />
$v=(array) $u;&nbsp; // array 0 =&gt; string 'abc'&nbsp; &lt;-- unchanged</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117391""></a>
  <div class="note">
   <strong class="user">davaakhuu at outlook dot com</strong>
   <a href="#117391" class="date">03-Jun-2015 07:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Type Juggling&lt;br/&gt;<br />
&nbsp;&nbsp; <span class="default">&lt;?php $count </span><span class="keyword">= </span><span class="string">"2 cats"</span><span class="keyword">; </span><span class="default">?&gt;<br />
</span>&nbsp;&nbsp; Type: <span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$count</span><span class="keyword">); </span><span class="default">?&gt;</span>&lt;br/&gt;<br />
&nbsp;&nbsp; <span class="default">&lt;?php $count </span><span class="keyword">+= </span><span class="default">3</span><span class="keyword">; </span><span class="default">?&gt;<br />
</span>&nbsp;&nbsp; Type: <span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$count</span><span class="keyword">); </span><span class="default">?&gt;</span>&lt;br/&gt; <br />
&nbsp;&nbsp; <span class="default">&lt;?php $cats </span><span class="keyword">= </span><span class="string">"I have " </span><span class="keyword">. </span><span class="default">$count </span><span class="keyword">. </span><span class="string">"cats."</span><span class="keyword">; </span><span class="default">?&gt;<br />
</span>&nbsp;&nbsp; Cats: <span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$cats</span><span class="keyword">); </span><span class="default">?&gt;</span>&lt;br/&gt;<br />
&nbsp;&nbsp; &lt;br/&gt;<br />
&nbsp;&nbsp; Type Casting&lt;br/&gt;<br />
&nbsp;&nbsp; <span class="default">&lt;?php settype</span><span class="keyword">(</span><span class="default">$count</span><span class="keyword">, </span><span class="string">"integer"</span><span class="keyword">); </span><span class="default">?&gt;<br />
</span>&nbsp;&nbsp; count: <span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$count</span><span class="keyword">); </span><span class="default">?&gt;</span>&lt;br/&gt;<br />
<br />
&nbsp;&nbsp; <span class="default">&lt;?php $count2 </span><span class="keyword">= (string)</span><span class="default">$count</span><span class="keyword">; </span><span class="default">?&gt;<br />
</span>&nbsp;&nbsp; count: <span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$count</span><span class="keyword">); </span><span class="default">?&gt;</span>&lt;br/&gt;<br />
&nbsp;&nbsp; count2: <span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$count2</span><span class="keyword">); </span><span class="default">?&gt;</span>&lt;br/&gt;<br />
<br />
&nbsp;&nbsp; <span class="default">&lt;?php $test1 </span><span class="keyword">= </span><span class="default">3</span><span class="keyword">; </span><span class="default">?&gt;<br />
</span>&nbsp;&nbsp; <span class="default">&lt;?php $test2 </span><span class="keyword">= </span><span class="default">3</span><span class="keyword">; </span><span class="default">?&gt;<br />
</span>&nbsp;&nbsp; <span class="default">&lt;?php settype</span><span class="keyword">(</span><span class="default">$test1</span><span class="keyword">, </span><span class="string">"string"</span><span class="keyword">); </span><span class="default">?&gt;<br />
</span>&nbsp;&nbsp; <span class="default">&lt;?php </span><span class="keyword">(string)</span><span class="default">$test2</span><span class="keyword">; </span><span class="default">?&gt;<br />
</span>&nbsp;&nbsp; test1: <span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$test1</span><span class="keyword">); </span><span class="default">?&gt;</span>&lt;br/&gt;<br />
&nbsp;&nbsp; test2: <span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$test2</span><span class="keyword">); </span><span class="default">?&gt;</span>&lt;br/&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116397""></a>
  <div class="note">
   <strong class="user">mbrowne83 (at GM)</strong>
   <a href="#116397" class="date">27-Dec-2014 01:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The code listed in some of the comments here for supposedly "casting" from one class to another using unserialize/serialize does not actually change the class of the existing object; it creates a new object. So it's not the same as a cast.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115845""></a>
  <div class="note">
   <strong class="user">Eric Lavoie</strong>
   <a href="#115845" class="date">02-Oct-2014 09:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
(array) null<br />
array(null)<br />
<br />
are not the same.<br />
<br />
var_dump((array) null) =&gt; <br />
array (size=0)<br />
&nbsp; empty<br />
<br />
var_dump(array (null)) =&gt; <br />
array (size=1)<br />
&nbsp; 0 =&gt; null</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115373""></a>
  <div class="note">
   <strong class="user">kuzawinski dot marcin at NOSPAM dot gmail dot com</strong>
   <a href="#115373" class="date">14-Jul-2014 09:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You REALLY must be aware what you are doing, when you cast a lot&nbsp; in your code. For example, you can accidentaly change FALSE to TRUE&nbsp; (probably not in one line, like here):<br />
<br />
if(TRUE === (boolean) (array) (int) FALSE) {<br />
&nbsp;&nbsp;&nbsp; kaboom();<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111930""></a>
  <div class="note">
   <strong class="user">fardelian</strong>
   <a href="#111930" class="date">13-Apr-2013 03:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Casting objects to arrays is a pain. Example:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">MyClass </span><span class="keyword">{<br />
<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$priv </span><span class="keyword">= </span><span class="string">'priv_value'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; protected </span><span class="default">$prot </span><span class="keyword">= </span><span class="string">'prot_value'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$pub </span><span class="keyword">= </span><span class="string">'pub_value'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$MyClasspriv </span><span class="keyword">= </span><span class="string">'second_pub_value'</span><span class="keyword">;<br />
<br />
}<br />
<br />
</span><span class="default">$test </span><span class="keyword">= new </span><span class="default">MyClass</span><span class="keyword">();<br />
echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">((array) </span><span class="default">$test</span><span class="keyword">);<br />
<br />
</span><span class="comment">/*<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [MyClasspriv] =&gt; priv_value<br />
&nbsp;&nbsp;&nbsp; [*prot] =&gt; prot_value<br />
&nbsp;&nbsp;&nbsp; [pub] =&gt; pub_value<br />
&nbsp;&nbsp;&nbsp; [MyClasspriv] =&gt; second_pub_value<br />
)<br />
&nbsp;*/<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Yes, that looks like an array with two keys with the same name and it looks like the protected field was prepended with an asterisk. But that's not true:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">foreach ((array) </span><span class="default">$test </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"</span><span class="keyword">{</span><span class="default">$key</span><span class="keyword">}</span><span class="string"> (</span><span class="keyword">{</span><span class="default">$len</span><span class="keyword">}</span><span class="string">) =&gt; </span><span class="keyword">{</span><span class="default">$value</span><span class="keyword">}</span><span class="string">&lt;br /&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$len</span><span class="keyword">; ++</span><span class="default">$i</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]) . </span><span class="string">' '</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'&lt;hr /&gt;'</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">/*<br />
MyClasspriv (13) =&gt; priv_value<br />
0 77 121 67 108 97 115 115 0 112 114 105 118<br />
*prot (7) =&gt; prot_value<br />
0 42 0 112 114 111 116<br />
pub (3) =&gt; pub_value<br />
112 117 98<br />
MyClasspriv (11) =&gt; second_pub_value<br />
77 121 67 108 97 115 115 112 114 105 118<br />
&nbsp;*/<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
The char codes show that the protected keys are prepended with '\0*\0' and private keys are prepended with '\0'.__CLASS__.'\0' so be careful when playing around with this.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109059""></a>
  <div class="note">
   <strong class="user">ieee at REMOVE dot bk dot ru</strong>
   <a href="#109059" class="date">17-Jun-2012 04:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There are some shorter and faster (at least on my machine) ways to perform a type cast.<br />
<span class="default">&lt;?php<br />
$string</span><span class="keyword">=</span><span class="string">'12345.678'</span><span class="keyword">;<br />
</span><span class="default">$float</span><span class="keyword">=+</span><span class="default">$string</span><span class="keyword">; <br />
</span><span class="default">$integer</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">|</span><span class="default">$string</span><span class="keyword">;<br />
</span><span class="default">$boolean</span><span class="keyword">=!!</span><span class="default">$string</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107419""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#107419" class="date">07-Feb-2012 06:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
namaroulis stated "I found it tricky to check if a posted value was an integer"; to test if a variable is a number or a numeric string (such as form input, which is always a string), you must use is_numeric():<br />
<br />
<span class="default">&lt;?php<br />
$_POST</span><span class="keyword">[</span><span class="string">'a'</span><span class="keyword">] = </span><span class="string">"42"</span><span class="keyword">;<br />
<br />
</span><span class="default">is_numeric</span><span class="keyword">( </span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'a'</span><span class="keyword">] ); </span><span class="comment">// true<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105671""></a>
  <div class="note">
   <strong class="user">hemi68 at hotmail dot com</strong>
   <a href="#105671" class="date">06-Sep-2011 08:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Cast a string to binary using PHP &lt; 5.2.1<br />
<br />
&nbsp;$binary = unpack('c*', $string);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103594""></a>
  <div class="note">
   <strong class="user">jphansen at uga dot edu</strong>
   <a href="#103594" class="date">21-Apr-2011 10:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Type casting from string to int and vice versa is probably the most common conversation. PHP does this very simply through the +. and .= operators, removing any explicit casting:<br />
<br />
<span class="default">&lt;?php<br />
$x </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">); </span><span class="comment">// int(1)<br />
</span><span class="default">$x </span><span class="keyword">.= </span><span class="default">1</span><span class="keyword">;<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">); </span><span class="comment">// string(2) "11"; also an empty string ("") would cast to string without changing $x<br />
<br />
</span><span class="default">$x </span><span class="keyword">= </span><span class="string">"1"</span><span class="keyword">;<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">);&nbsp; </span><span class="comment">// string(1) "1"<br />
</span><span class="default">$x </span><span class="keyword">+= </span><span class="default">1</span><span class="keyword">;<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">); </span><span class="comment">// int(2); also a zero value (0) would cast to int without changing $x<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102877""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#102877" class="date">11-Mar-2011 11:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Checking for strings to be integers?<br />
How about if a string is a float?<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/* checks if a string is an integer with possible whitespace before and/or after, and also isolates the integer */<br />
</span><span class="default">$isInt</span><span class="keyword">=</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/^\s*([0-9]+)\s*$/'</span><span class="keyword">, </span><span class="default">$myString</span><span class="keyword">, </span><span class="default">$myInt</span><span class="keyword">);<br />
<br />
echo </span><span class="string">'Is Integer? '</span><span class="keyword">,&nbsp; (</span><span class="default">$isInt</span><span class="keyword">) ? </span><span class="string">'Yes: '</span><span class="keyword">.</span><span class="default">$myInt</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] : </span><span class="string">'No'</span><span class="keyword">, </span><span class="string">"\n"</span><span class="keyword">;<br />
<br />
</span><span class="comment">/* checks if a string is an integer with no whitespace before or after&nbsp; */<br />
</span><span class="default">$isInt</span><span class="keyword">=</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/^[0-9]+$/'</span><span class="keyword">, </span><span class="default">$myString</span><span class="keyword">);<br />
<br />
echo </span><span class="string">'Is Integer? '</span><span class="keyword">,&nbsp; (</span><span class="default">$isInt</span><span class="keyword">) ? </span><span class="string">'Yes' </span><span class="keyword">: </span><span class="string">'No'</span><span class="keyword">, </span><span class="string">"\n"</span><span class="keyword">;<br />
<br />
</span><span class="comment">/* When checking for floats, we assume the possibility of no decimals needed.&nbsp; If you MUST require decimals (forcing the user to type 7.0 for example) replace the sequence:<br />
[0-9]+(\.[0-9]+)? <br />
with <br />
[0-9]+\.[0-9]+ <br />
*/<br />
<br />
/* checks if a string is a float with possible whitespace before and/or after, and also isolates the number */<br />
</span><span class="default">$isFloat</span><span class="keyword">=</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/^\s*([0-9]+(\.[0-9]+)?)\s*$/'</span><span class="keyword">, </span><span class="default">$myString</span><span class="keyword">, </span><span class="default">$myNum</span><span class="keyword">);<br />
<br />
echo </span><span class="string">'Is Number? '</span><span class="keyword">,&nbsp; (</span><span class="default">$isFloat</span><span class="keyword">) ? </span><span class="string">'Yes: '</span><span class="keyword">.</span><span class="default">$myNum</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] : </span><span class="string">'No'</span><span class="keyword">, </span><span class="string">"\n"</span><span class="keyword">;<br />
<br />
</span><span class="comment">/* checks if a string is a float with no whitespace before or after */<br />
</span><span class="default">$isInt</span><span class="keyword">=</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/^[0-9]+(\.[0-9]+)?$/'</span><span class="keyword">, </span><span class="default">$myString</span><span class="keyword">);<br />
<br />
echo </span><span class="string">'Is Number? '</span><span class="keyword">,&nbsp; (</span><span class="default">$isFloat</span><span class="keyword">) ? </span><span class="string">'Yes' </span><span class="keyword">: </span><span class="string">'No'</span><span class="keyword">, </span><span class="string">"\n"</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102737""></a>
  <div class="note">
   <strong class="user">namaroulis at gmail dot com</strong>
   <a href="#102737" class="date">02-Mar-2011 01:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I found it tricky to check if a posted value was an integer.<br />
<br />
<span class="default">&lt;?php<br />
<br />
$_POST</span><span class="keyword">[</span><span class="string">'a'</span><span class="keyword">] = </span><span class="string">"42"</span><span class="keyword">;<br />
<br />
</span><span class="default">is_int</span><span class="keyword">( </span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'a'</span><span class="keyword">] ); </span><span class="comment">//false<br />
</span><span class="default">is_int</span><span class="keyword">( </span><span class="default">intval</span><span class="keyword">( </span><span class="string">"anything" </span><span class="keyword">) ); </span><span class="comment">//always true<br />
</span><span class="default">?&gt;<br />
</span><br />
A method I use for checking if a string represents an integer value.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">check_int</span><span class="keyword">( </span><span class="default">$str </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return&nbsp; </span><span class="default">is_numeric</span><span class="keyword">( </span><span class="default">$str </span><span class="keyword">) &amp;&amp; </span><span class="default">intval</span><span class="keyword">( </span><span class="default">$str </span><span class="keyword">) - </span><span class="default">$str </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100460""></a>
  <div class="note">
   <strong class="user">rmirabelle</strong>
   <a href="#100460" class="date">17-Oct-2010 10:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The object casting methods presented here do not take into account the class hierarchy of the class you're trying to cast your object into.<br />
<br />
/**<br />
&nbsp;&nbsp; &nbsp; * Convert an object to a specific class.<br />
&nbsp;&nbsp; &nbsp; * @param object $object<br />
&nbsp;&nbsp; &nbsp; * @param string $class_name The class to cast the object to<br />
&nbsp;&nbsp; &nbsp; * @return object<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; public static function cast($object, $class_name) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if($object === false) return false;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(class_exists($class_name)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $ser_object&nbsp; &nbsp;&nbsp; = serialize($object);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $obj_name_len&nbsp; &nbsp;&nbsp; = strlen(get_class($object));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $start&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; = $obj_name_len + strlen($obj_name_len) + 6;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $new_object&nbsp; &nbsp; &nbsp; = 'O:' . strlen($class_name) . ':"' . $class_name . '":';<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $new_object&nbsp; &nbsp;&nbsp; .= substr($ser_object, $start);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $new_object&nbsp; &nbsp;&nbsp; = unserialize($new_object);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; /**<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * The new object is of the correct type but<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * is not fully initialized throughout its graph.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * To get the full object graph (including parent<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * class data, we need to create a new instance of <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * the specified class and then assign the new <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * properties to it.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; */<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $graph = new $class_name;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach($new_object as $prop =&gt; $val) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $graph-&gt;$prop = $val;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return $graph;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; throw new CoreException(false, "could not find class $class_name for casting in DB::cast");<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return false;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100050""></a>
  <div class="note">
   <strong class="user">martinscotta at gmail dot com</strong>
   <a href="#100050" class="date">21-Sep-2010 08:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
in response to bhsmither at gmail.com<br />
<br />
It raises a warning because of the bad enquoted variable<br />
<br />
<span class="default">&lt;?php<br />
<br />
error_reporting</span><span class="keyword">( </span><span class="default">E_ALL </span><span class="keyword">| </span><span class="default">E_STRICT </span><span class="keyword">);<br />
<br />
</span><span class="default">$foo</span><span class="keyword">[</span><span class="string">'ten'</span><span class="keyword">] = </span><span class="default">10</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// $foo['ten'] is an array holding an integer at key "ten"<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="string">"</span><span class="keyword">{</span><span class="default">$foo</span><span class="keyword">[</span><span class="string">'ten'</span><span class="keyword">]}</span><span class="string">"</span><span class="keyword">;&nbsp; </span><span class="comment">// works "10"<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="string">"</span><span class="default">$foo</span><span class="keyword">[</span><span class="default">ten</span><span class="keyword">]</span><span class="string">"</span><span class="keyword">;&nbsp; &nbsp; &nbsp; </span><span class="comment">// DO NOT work!</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96869""></a>
  <div class="note">
   <strong class="user">bhsmither at gmail.com</strong>
   <a href="#96869" class="date">19-Mar-2010 03:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
$foo</span><span class="keyword">[</span><span class="string">'ten'</span><span class="keyword">] = </span><span class="default">10</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// $foo['ten'] is an array holding an integer at key "ten"<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="string">"</span><span class="default">$foo</span><span class="keyword">[</span><span class="string">'ten']"</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// throws T_ENCAPSED_AND_WHITESPACE error<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="string">"</span><span class="default">$foo</span><span class="keyword">[</span><span class="default">ten</span><span class="keyword">]</span><span class="string">"</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// works because constants are skipped in quotes<br />
</span><span class="default">$fst </span><span class="keyword">= (string) </span><span class="default">$foo</span><span class="keyword">[</span><span class="string">'ten'</span><span class="keyword">]; </span><span class="comment">// works with clear intention<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89637""></a>
  <div class="note">
   <strong class="user">edgar dot klerks at gmail dot com</strong>
   <a href="#89637" class="date">17-Mar-2009 08:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It seems (unset) is pretty useless. But for people who like to make their code really compact (and probably unreadable). You can use it to use an variable and unset it on the same line:<br />
<br />
Without cast: <br />
<br />
<span class="default">&lt;?php<br />
<br />
$hello </span><span class="keyword">= </span><span class="string">'Hello world'</span><span class="keyword">;<br />
print </span><span class="default">$hello</span><span class="keyword">;<br />
unset(</span><span class="default">$hello</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
With the unset cast: <br />
<br />
<span class="default">&lt;?php<br />
<br />
$hello </span><span class="keyword">= </span><span class="string">'Hello world'</span><span class="keyword">;<br />
</span><span class="default">$hello </span><span class="keyword">= (unset) print </span><span class="default">$hello</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Hoorah, we lost another line!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87399""></a>
  <div class="note">
   <strong class="user">kajsunansis at that gmail</strong>
   <a href="#87399" class="date">03-Dec-2008 11:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
json_decode users consider this, when casting stdClass to array:<br />
<span class="default">&lt;?php<br />
$obj </span><span class="keyword">= new </span><span class="default">stdClass</span><span class="keyword">();<br />
</span><span class="default">$obj</span><span class="keyword">-&gt;{</span><span class="string">"2"</span><span class="keyword">} = </span><span class="string">"id"</span><span class="keyword">;<br />
</span><span class="default">$arr </span><span class="keyword">= (array) </span><span class="default">$obj</span><span class="keyword">;<br />
</span><span class="default">$result </span><span class="keyword">= isset(</span><span class="default">$arr</span><span class="keyword">[</span><span class="string">"2"</span><span class="keyword">]) || </span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">); </span><span class="comment">// false<br />
</span><span class="default">?&gt;<br />
</span>..though casting is at least 2x faster than foreach.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86896""></a>
  <div class="note">
   <strong class="user">Jeffrey</strong>
   <a href="#86896" class="date">09-Nov-2008 11:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
IMAGINATION REQUIRED...<br />
<br />
We can be a witness to PHP's 'type-jugglin' in real-time with a simple implementation of a MemoryMap. For the sake our purposes, pretend that this is an empty MemoryMap.<br />
+-------+------+------+-------+<br />
| index | $var | type | value |<br />
+-------+------+------+-------+<br />
|&nbsp; &nbsp;&nbsp; 1 |&nbsp; --- | NULL |&nbsp; null |<br />
|&nbsp; &nbsp;&nbsp; 2 |&nbsp; --- | NULL |&nbsp; null |<br />
|&nbsp; &nbsp;&nbsp; 3 |&nbsp; --- | NULL |&nbsp; null |<br />
|&nbsp; &nbsp;&nbsp; 4 |&nbsp; --- | NULL |&nbsp; null |<br />
+-------+------+------+-------+<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment"># create some variables...<br />
</span><span class="default">$a </span><span class="keyword">= </span><span class="default">10</span><span class="keyword">;<br />
</span><span class="default">$b </span><span class="keyword">= </span><span class="string">"Hello"</span><span class="keyword">;<br />
</span><span class="default">$c </span><span class="keyword">= array(</span><span class="default">55.45</span><span class="keyword">, </span><span class="default">98.65</span><span class="keyword">);<br />
</span><span class="comment"># Now look at map...<br />
</span><span class="default">?&gt;<br />
</span>+-------+-------+---------+--------+<br />
| index |&nbsp; $var |&nbsp; &nbsp; type |&nbsp; value |<br />
+-------+-------+---------+--------+<br />
|&nbsp; &nbsp;&nbsp; 1 |&nbsp; &nbsp; $a | INTEGER |&nbsp; &nbsp;&nbsp; 10 |<br />
|&nbsp; &nbsp;&nbsp; 2 |&nbsp; &nbsp; $b |&nbsp; STRING |&nbsp; Hello |<br />
|&nbsp; &nbsp;&nbsp; 3 | $c[0] |&nbsp;&nbsp; FLOAT |&nbsp; 55.45 |<br />
|&nbsp; &nbsp;&nbsp; 4 | $c[1] |&nbsp;&nbsp; FLOAT |&nbsp; 98.65 |<br />
+-------+-------+---------+--------+<br />
<span class="default">&lt;?php<br />
</span><span class="comment"># Now, change the variable types...<br />
</span><span class="default">$a </span><span class="keyword">= </span><span class="string">"Bye"</span><span class="keyword">;<br />
</span><span class="default">$b </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;<br />
</span><span class="default">$c</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="string">"Buy"</span><span class="keyword">;<br />
</span><span class="default">$c</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = </span><span class="string">"Now!"</span><span class="keyword">;<br />
</span><span class="comment">#Look at map...<br />
</span><span class="default">?&gt;<br />
</span>+-------+-------+---------+--------+<br />
| index |&nbsp; $var |&nbsp; &nbsp; type |&nbsp; value |<br />
+-------+-------+---------+--------+<br />
|&nbsp; &nbsp;&nbsp; 1 |&nbsp; &nbsp; $a |&nbsp; STRING |&nbsp; &nbsp; Bye | &lt;- used to be INTEGER<br />
|&nbsp; &nbsp;&nbsp; 2 |&nbsp; &nbsp; $b | INTEGER |&nbsp; &nbsp; &nbsp; 2 | &lt;- used to be STRING<br />
|&nbsp; &nbsp;&nbsp; 3 | $c[0] |&nbsp; STRING |&nbsp; &nbsp; Buy | &lt;- used to be FLOAT<br />
|&nbsp; &nbsp;&nbsp; 4 | $c[1] |&nbsp; STRING |&nbsp; Right | &lt;- used to be FLOAT<br />
+-------+-------+---------+--------+</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86419""></a>
  <div class="note">
   <strong class="user">hek at theeks dot net</strong>
   <a href="#86419" class="date">17-Oct-2008 09:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It would be useful to know the precedence (for lack of a better word) for type juggling.&nbsp; This entry currently explains that "if either operand is a float, then both operands are evaluated as floats, and the result will be a float" but could (and I think should) provide a hierarchy that indicates, for instance, "between an int and a boolean, int wins; between a float and an int, float wins; between a string and a float, string wins" and so on (and don't count on my example accurately capturing the true hierarchy, as I haven't actually done the tests to figure it out).&nbsp; Thanks!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86205""></a>
  <div class="note">
   <strong class="user">wbcarts at juno dot com</strong>
   <a href="#86205" class="date">07-Oct-2008 06:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
WHERE'S THE BEEF?<br />
<br />
Looks like type-casting user-defined objects is a real pain, and ya gotta be nuttin' less than a brain jus ta cypher-it. But since PHP supports OOP, you can add the capabilities right now. Start with any simple class.<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Point </span><span class="keyword">{<br />
&nbsp; protected </span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">;<br />
<br />
&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$xVal </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$yVal </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">x </span><span class="keyword">= </span><span class="default">$xVal</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">y </span><span class="keyword">= </span><span class="default">$yVal</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; public function </span><span class="default">getX</span><span class="keyword">() { return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">x</span><span class="keyword">; }<br />
&nbsp; public function </span><span class="default">getY</span><span class="keyword">() { return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">y</span><span class="keyword">; }<br />
}<br />
<br />
</span><span class="default">$p </span><span class="keyword">= new </span><span class="default">Point</span><span class="keyword">(</span><span class="default">25</span><span class="keyword">, </span><span class="default">35</span><span class="keyword">);<br />
echo </span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">getX</span><span class="keyword">();&nbsp; &nbsp; &nbsp; </span><span class="comment">// 25<br />
</span><span class="keyword">echo </span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">getY</span><span class="keyword">();&nbsp; &nbsp; &nbsp; </span><span class="comment">// 35<br />
</span><span class="default">?&gt;<br />
</span>Ok, now we need extra powers. PHP gives us several options:<br />
&nbsp; A. We can tag on extra properties on-the-fly using everyday PHP syntax...<br />
&nbsp;&nbsp;&nbsp; $p-&gt;z = 45; // here, $p is still an object of type [Point] but gains no capability, and it's on a per-instance basis, blah.<br />
&nbsp; B. We can try type-casting it to a different type to access more functions...<br />
&nbsp;&nbsp;&nbsp; $p = (SuperDuperPoint) $p; // if this is even allowed, I doubt it. But even if PHP lets this slide, the small amount of data Point holds would probably not be enough for the extra functions to work anyway. And we still need the class def + all extra data. We should have just instantiated a [SuperDuperPoint] object to begin with... and just like above, this only works on a per-instance basis.<br />
&nbsp; C. Do it the right way using OOP - and just extend the Point class already.<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Point3D </span><span class="keyword">extends </span><span class="default">Point </span><span class="keyword">{<br />
&nbsp; protected </span><span class="default">$z</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// add extra properties...<br />
<br />
&nbsp; </span><span class="keyword">public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$xVal </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$yVal </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$zVal </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">parent</span><span class="keyword">::</span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$xVal</span><span class="keyword">, </span><span class="default">$yVal</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">z </span><span class="keyword">= </span><span class="default">$zVal</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; public function </span><span class="default">getZ</span><span class="keyword">() { return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">z</span><span class="keyword">; }&nbsp; </span><span class="comment">// add extra functions...<br />
</span><span class="keyword">}<br />
<br />
</span><span class="default">$p3d </span><span class="keyword">= new </span><span class="default">Point3D</span><span class="keyword">(</span><span class="default">25</span><span class="keyword">, </span><span class="default">35</span><span class="keyword">, </span><span class="default">45</span><span class="keyword">);&nbsp; </span><span class="comment">// more data, more functions, more everything...<br />
</span><span class="keyword">echo </span><span class="default">$p3d</span><span class="keyword">-&gt;</span><span class="default">getX</span><span class="keyword">();&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// 25<br />
</span><span class="keyword">echo </span><span class="default">$p3d</span><span class="keyword">-&gt;</span><span class="default">getY</span><span class="keyword">();&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// 35<br />
</span><span class="keyword">echo </span><span class="default">$p3d</span><span class="keyword">-&gt;</span><span class="default">getZ</span><span class="keyword">();&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// 45<br />
</span><span class="default">?&gt;<br />
</span>Once the new class definition is written, you can make as many Point3D objects as you want. Each of them will have more data and functions already built-in. This is much better than trying to beef-up any "single lesser object" on-the-fly, and it's way easier to do.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85906""></a>
  <div class="note">
   <strong class="user">lucazd at gmail dot com</strong>
   <a href="#85906" class="date">23-Sep-2008 09:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
@alexgr (20-Jun-2008)<br />
<br />
Correct me if I'm wrong, but that is not a cast, it might be useful sometimes, but the IDE will not reflect what's really happening:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">MyObject </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * @param MyObject $object<br />
&nbsp;&nbsp; &nbsp; * @return MyObject<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">static public function </span><span class="default">cast</span><span class="keyword">(</span><span class="default">MyObject $object</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$object</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/** Does nothing */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">f</span><span class="keyword">() {}<br />
}<br />
<br />
class </span><span class="default">X </span><span class="keyword">extends </span><span class="default">MyObject </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/** Throws exception */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">f</span><span class="keyword">() { throw new </span><span class="default">exception</span><span class="keyword">(); }<br />
}<br />
<br />
</span><span class="default">$x </span><span class="keyword">= </span><span class="default">MyObject</span><span class="keyword">::</span><span class="default">cast</span><span class="keyword">(new </span><span class="default">X</span><span class="keyword">);<br />
</span><span class="default">$x</span><span class="keyword">-&gt;</span><span class="default">f</span><span class="keyword">(); </span><span class="comment">// Your IDE tells 'f() Does nothing'<br />
</span><span class="default">?&gt;<br />
</span><br />
However, when you run the script, you will get an exception.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85627""></a>
  <div class="note">
   <strong class="user">nullhilty at gmail dot com</strong>
   <a href="#85627" class="date">09-Sep-2008 11:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just a little experiment on the (unset) type cast:<br />
<br />
<span class="default">&lt;?php<br />
$var </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
</span><span class="default">$var_unset </span><span class="keyword">= (unset) </span><span class="default">$var</span><span class="keyword">;<br />
</span><span class="default">$var_ref_unset </span><span class="keyword">&amp;= (unset) </span><span class="default">$var</span><span class="keyword">;<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$var_unset</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$var_ref_unset</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
output:<br />
int(1)<br />
NULL<br />
int(0)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83956""></a>
  <div class="note">
   <strong class="user">alexgr at gmail dot com</strong>
   <a href="#83956" class="date">20-Jun-2008 03:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For a Cast to a User Defined Object you can define a cast method:<br />
<br />
class MyObject {<br />
&nbsp;&nbsp;&nbsp; /**<br />
&nbsp;&nbsp; &nbsp; * @param MyObject $object<br />
&nbsp;&nbsp; &nbsp; * @return MyObject<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; static public function cast(MyObject $object) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $object;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
In your php page code you can:<br />
$myObject = MyObject::cast($_SESSION["myObject"]);<br />
<br />
Then, PHP will validate the value and your IDE will help you.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="62113""></a>
  <div class="note">
   <strong class="user">miracle at 1oo-percent dot de</strong>
   <a href="#62113" class="date">20-Feb-2006 05:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to convert a string automatically to float or integer (e.g. "0.234" to float and "123" to int), simply add 0 to the string - PHP will do the rest.<br />
<br />
e.g.<br />
<br />
$val = 0 + "1.234";<br />
(type of $val is float now)<br />
<br />
$val = 0 + "123";<br />
(type of $val is integer now)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54070""></a>
  <div class="note">
   
   <a href="#54070" class="date">22-Jun-2005 05:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you have a boolean, performing increments on it won't do anything despite it being 1.&nbsp; This is a case where you have to use a cast.<br />
<br />
&lt;html&gt;<br />
&lt;body&gt; &lt;!-- don't want w3.org to get mad... --&gt;<br />
<span class="default">&lt;?php<br />
$bar </span><span class="keyword">= </span><span class="default">TRUE</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span>I have <span class="default">&lt;?=$bar?&gt;</span> bar.<br />
<span class="default">&lt;?php<br />
$bar</span><span class="keyword">++;<br />
</span><span class="default">?&gt;<br />
</span>I now have <span class="default">&lt;?=$bar?&gt;</span> bar.<br />
<span class="default">&lt;?php<br />
$bar </span><span class="keyword">= (int) </span><span class="default">$bar</span><span class="keyword">;<br />
</span><span class="default">$bar</span><span class="keyword">++;<br />
</span><span class="default">?&gt;<br />
</span>I finally have <span class="default">&lt;?=$bar?&gt;</span> bar.<br />
&lt;/body&gt;<br />
&lt;/html&gt;<br />
<br />
That will print<br />
<br />
I have 1 bar.<br />
I now have 1 bar.<br />
I finally have 2 bar.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50791""></a>
  <div class="note">
   <strong class="user">toma at smartsemantics dot com</strong>
   <a href="#50791" class="date">09-Mar-2005 06:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In my much of my coding I have found it necessary to type-cast between objects of different class types.<br />
<br />
More specifically, I often want to take information from a database, convert it into the class it was before it was inserted, then have the ability to call its class functions as well.<br />
<br />
The following code is much shorter than some of the previous examples and seems to suit my purposes.&nbsp; It also makes use of some regular expression matching rather than string position, replacing, etc.&nbsp; It takes an object ($obj) of any type and casts it to an new type ($class_type).&nbsp; Note that the new class type must exist:<br />
<br />
function ClassTypeCast(&amp;$obj,$class_type){<br />
&nbsp;&nbsp;&nbsp; if(class_exists($class_type,true)){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $obj = unserialize(preg_replace"/^O:[0-9]+:\"[^\"]+\":/i", <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; "O:".strlen($class_type).":\"".$class_type."\":", serialize($obj)));<br />
&nbsp;&nbsp;&nbsp; }<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49849""></a>
  <div class="note">
   <strong class="user">Raja</strong>
   <a href="#49849" class="date">10-Feb-2005 03:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Uneven division of an integer variable by another integer variable will result in a float by automatic conversion -- you do not have to cast the variables to floats in order to avoid integer truncation (as you would in C, for example):<br />
<br />
$dividend = 2;<br />
$divisor = 3;<br />
$quotient = $dividend/$divisor;<br />
print $quotient; // 0.66666666666667</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="45062""></a>
  <div class="note">
   <strong class="user">tom5025_ at hotmail dot com</strong>
   <a href="#45062" class="date">24-Aug-2004 01:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
function strhex($string)<br />
{<br />
&nbsp;&nbsp; $hex="";<br />
&nbsp;&nbsp; for ($i=0;$i&lt;strlen($string);$i++)<br />
&nbsp;&nbsp; &nbsp; &nbsp; $hex.=dechex(ord($string[$i]));<br />
&nbsp;&nbsp; return $hex;<br />
}<br />
function hexstr($hex)<br />
{<br />
&nbsp;&nbsp; $string="";<br />
&nbsp;&nbsp; for ($i=0;$i&lt;strlen($hex)-1;$i+=2)<br />
&nbsp;&nbsp; &nbsp; &nbsp; $string.=chr(hexdec($hex[$i].$hex[$i+1]));<br />
&nbsp;&nbsp; return $string;<br />
}<br />
<br />
to convert hex to str and vice versa</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="40639""></a>
  <div class="note">
   <strong class="user">dimo dot vanchev at bianor dot com</strong>
   <a href="#40639" class="date">10-Mar-2004 07:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For some reason the code-fix posted by philip_snyder at hotmail dot com [27-Feb-2004 02:08]<br />
didn't work for me neither with long_class_names nor with short_class_names. I'm using PHP v4.3.5 for Linux.<br />
Anyway here's what I wrote to solve the long_named_classes problem:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">typecast</span><span class="keyword">(</span><span class="default">$old_object</span><span class="keyword">, </span><span class="default">$new_classname</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">class_exists</span><span class="keyword">(</span><span class="default">$new_classname</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$old_serialized_object </span><span class="keyword">= </span><span class="default">serialize</span><span class="keyword">(</span><span class="default">$old_object</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$old_object_name_length </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$old_object</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$subtring_offset </span><span class="keyword">= </span><span class="default">$old_object_name_length </span><span class="keyword">+ </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$old_object_name_length</span><span class="keyword">) + </span><span class="default">6</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new_serialized_object&nbsp; </span><span class="keyword">= </span><span class="string">'O:' </span><span class="keyword">. </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$new_classname</span><span class="keyword">) . </span><span class="string">':"' </span><span class="keyword">. </span><span class="default">$new_classname </span><span class="keyword">. </span><span class="string">'":'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new_serialized_object </span><span class="keyword">.= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$old_serialized_object</span><span class="keyword">, </span><span class="default">$subtring_offset</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">unserialize</span><span class="keyword">(</span><span class="default">$new_serialized_object</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="40282""></a>
  <div class="note">
   <strong class="user">philip_snyder at hotmail dot com</strong>
   <a href="#40282" class="date">27-Feb-2004 07:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Re: the typecasting between classes post below... fantastic, but slightly flawed. Any class name longer than 9 characters becomes a problem... SO here's a simple fix:<br />
<br />
function typecast($old_object, $new_classname) {<br />
&nbsp; if(class_exists($new_classname)) {<br />
&nbsp;&nbsp;&nbsp; // Example serialized object segment<br />
&nbsp;&nbsp;&nbsp; // O:5:"field":9:{s:5:...&nbsp;&nbsp; &lt;--- Class: Field<br />
&nbsp;&nbsp;&nbsp; $old_serialized_prefix&nbsp; = "O:".strlen(get_class($old_object));<br />
&nbsp;&nbsp;&nbsp; $old_serialized_prefix .= ":\"".get_class($old_object)."\":";<br />
<br />
&nbsp;&nbsp;&nbsp; $old_serialized_object = serialize($old_object);<br />
&nbsp;&nbsp;&nbsp; $new_serialized_object = 'O:'.strlen($new_classname).':"'.$new_classname . '":';<br />
&nbsp;&nbsp;&nbsp; $new_serialized_object .= substr($old_serialized_object,strlen($old_serialized_prefix));<br />
&nbsp;&nbsp; return unserialize($new_serialized_object);<br />
&nbsp; }<br />
&nbsp; else<br />
&nbsp;&nbsp; return false;<br />
}<br />
<br />
Thanks for the previous code. Set me in the right direction to solving my typecasting problem. ;)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="31781""></a>
  <div class="note">
   <strong class="user">post_at_henribeige_dot_de</strong>
   <a href="#31781" class="date">03-May-2003 09:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to do not only typecasting between basic data types but between classes, try this function. It converts any class into another. All variables that equal name in both classes will be copied.<br />
<br />
function typecast($old_object, $new_classname) {<br />
&nbsp; if(class_exists($new_classname)) {<br />
&nbsp;&nbsp;&nbsp; $old_serialized_object = serialize($old_object);<br />
&nbsp;&nbsp;&nbsp; $new_serialized_object = 'O:' . strlen($new_classname) . ':"' . $new_classname . '":' . <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr($old_serialized_object, $old_serialized_object[2] + 7);<br />
&nbsp;&nbsp;&nbsp; return unserialize($new_serialized_object);<br />
&nbsp; }<br />
&nbsp; else<br />
&nbsp;&nbsp;&nbsp; return false;<br />
}<br />
<br />
Example:<br />
<br />
class A {<br />
&nbsp; var $secret;<br />
&nbsp; function A($secret) {$this-&gt;secret = $secret;}<br />
&nbsp; function output() {echo("Secret class A: " . $this-&gt;secret);}<br />
}<br />
<br />
class B extends A {<br />
&nbsp; var $secret;<br />
&nbsp; function output() {echo("Secret class B: " . strrev($this-&gt;secret));}<br />
}<br />
<br />
$a = new A("Paranoia");<br />
$b = typecast($a, "B");<br />
<br />
$a-&gt;output();<br />
$b-&gt;output();<br />
echo("Classname \$a: " . get_class($a) . "Classname \$b: " . get_class($b));<br />
<br />
Output of the example code above:<br />
<br />
Secret class A: Paranoia<br />
Secret class B: aionaraP<br />
Classname $a: a<br />
Classname $b: b</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="27205""></a>
  <div class="note">
   <strong class="user">yury at krasu dot ru</strong>
   <a href="#27205" class="date">27-Nov-2002 01:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
incremental operator ("++") doesn't make type conversion from boolean to int, and if an variable is boolean and equals TRUE than after ++ operation it remains as TRUE, so:<br />
<br />
$a = TRUE; <br />
echo ($a++).$a;&nbsp; // prints "11"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="24809""></a>
  <div class="note">
   
   <a href="#24809" class="date">28-Aug-2002 10:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Printing or echoing a FALSE boolean value or a NULL value results in an empty string:<br />
(string)TRUE //returns "1"<br />
(string)FALSE //returns ""<br />
echo TRUE; //prints "1"<br />
echo FALSE; //prints nothing!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

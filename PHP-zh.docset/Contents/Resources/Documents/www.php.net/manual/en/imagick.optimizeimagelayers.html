<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Removes repeated portions of images to optimize</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="imagick.opaquepaintimage.html">? Imagick::opaquePaintImage</a></li>
      <li style="float: right;"><a href="imagick.orderedposterizeimage.html">Imagick::orderedPosterizeImage ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.imagick.html">Imagick</a></li>
    <li>Removes repeated portions of images to optimize</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="imagick.optimizeimagelayers" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">Imagick::optimizeImageLayers</h1>
  <p class="verinfo">(PECL imagick 2.0.0)</p><p class="refpurpose"><span class="refname">Imagick::optimizeImageLayers</span> &mdash; <span class="dc-title">Removes repeated portions of images to optimize</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-imagick.optimizeimagelayers-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>Imagick::optimizeImageLayers</strong></span>
    ( <span class="methodparam">void</span>
   ) : <span class="type">bool</span></div>


  <p class="para rdfs-comment">
   Compares each image the GIF disposed forms of the previous image
   in the sequence.  From this it attempts to select the smallest
   cropped image to replace each frame, while preserving the results
   of the animation. 
   此方法在Imagick基于ImageMagick 6.2.9以上版本编译时可用。
  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-imagick.optimizeimagelayers-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   成功时返回 <strong><code>TRUE</code></strong>。
  </p>
 </div>


 <div class="refsect1 errors" id="refsect1-imagick.optimizeimagelayers-errors">
  <h3 class="title">错误／异常</h3>
  <p class="para">
   错误时抛出 ImagickException。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-imagick.optimizeimagelayers-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-3893">
    <p><strong>Example #1 Using <span class="function"><strong>Imagick::optimizeImageLayers()</strong></span></strong></p>
    <div class="example-contents"><p>
      Reading, optimizing and writing a GIF image
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;create&nbsp;new&nbsp;imagick&nbsp;object&nbsp;*/<br /></span><span style="color: #0000BB">$im&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Imagick</span><span style="color: #007700">(</span><span style="color: #DD0000">"test.gif"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;optimize&nbsp;the&nbsp;image&nbsp;layers&nbsp;*/<br /></span><span style="color: #0000BB">$im</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">optimizeImageLayers</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">/*&nbsp;write&nbsp;the&nbsp;image&nbsp;back&nbsp;*/<br /></span><span style="color: #0000BB">$im</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">writeImages</span><span style="color: #007700">(</span><span style="color: #DD0000">"test_optimized.gif"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-imagick.optimizeimagelayers-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="imagick.compareimagelayers.html" class="function" rel="rdfs-seeAlso">Imagick::compareImageLayers()</a> - Returns the maximum bounding region between images</span></li>
    <li class="member"><span class="function"><a href="imagick.writeimages.html" class="function" rel="rdfs-seeAlso">Imagick::writeImages()</a> - Writes an image or image sequence</span></li>
    <li class="member"><span class="function"><a href="imagick.writeimage.html" class="function" rel="rdfs-seeAlso">Imagick::writeImage()</a> - 把图片写入指定的文件</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="112428""></a>
  <div class="note">
   <strong class="user">f21 dot groups at gmail dot com</strong>
   <a href="#112428" class="date">16-Jun-2013 02:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In imagick 3.x (have not checked 2.x), this returns an imagemagick object and not a boolean.<br />
<br />
<span class="default">&lt;?php<br />
<br />
$image </span><span class="keyword">= new </span><span class="default">Imagick</span><span class="keyword">(</span><span class="string">'myanimation.gif'</span><span class="keyword">);<br />
<br />
</span><span class="default">$image </span><span class="keyword">= </span><span class="default">$image</span><span class="keyword">-&gt;</span><span class="default">optimizeImageLayers</span><span class="keyword">(); </span><span class="comment">//Does not return a boolean!<br />
<br />
</span><span class="default">$image</span><span class="keyword">-&gt;</span><span class="default">writeImage</span><span class="keyword">(</span><span class="string">'optimized.gif'</span><span class="keyword">);</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

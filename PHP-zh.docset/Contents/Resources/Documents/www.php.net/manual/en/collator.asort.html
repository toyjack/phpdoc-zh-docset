<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Sort array maintaining index association</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="class.collator.html">? Collator</a></li>
      <li style="float: right;"><a href="collator.compare.html">Collator::compare ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.collator.html">Collator</a></li>
    <li>Sort array maintaining index association</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="collator.asort" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">Collator::asort</h1>
  <h1 class="refname">collator_asort</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.3.0, PHP 7, PECL intl &gt;= 1.0.0)</p><p class="refpurpose"><span class="refname">Collator::asort</span> -- <span class="refname">collator_asort</span> &mdash; <span class="dc-title">Sort array maintaining index association</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-collator.asort-description">
  <h3 class="title">说明</h3>
  <p class="para">面向对象风格</p>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><strong>Collator::asort</strong></span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter reference">&$array</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$flags</code><span class="initializer"> = Collator::SORT_REGULAR</span></span>
   ) : <span class="type">bool</span></div>

  <p class="para rdfs-comment">
   过程化风格
  </p>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>collator_asort</strong></span>
    ( <span class="methodparam"><span class="type"><a href="class.collator.html" class="type Collator">Collator</a></span> <code class="parameter">$object</code></span>
   , <span class="methodparam"><span class="type">array</span> <code class="parameter reference">&$array</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$flags</code><span class="initializer"> = Collator::SORT_REGULAR</span></span>
   ) : <span class="type">bool</span></div>

  <p class="para rdfs-comment">
   This function sorts an array such that array indices maintain their
   correlation with the array elements they are associated with. This is used
   mainly when sorting associative arrays where the actual element order is
   significant. Array elements will have sort order according to current
   locale rules.
  </p>
  <p class="para">
   Equivalent to standard PHP
   <span class="function"><a href="function.asort.html" class="function">asort()</a></span>.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-collator.asort-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">object</code></dt>

     <dd>

      <p class="para">
       <a href="class.collator.html" class="classname">Collator</a> object.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">array</code></dt>

     <dd>

      <p class="para">Array of strings to sort.</p>
     </dd>

    
    
     <dt>
<code class="parameter">flags</code></dt>

     <dd>

      <p class="para">
       Optional sorting type, one of the following:
       <ul class="itemizedlist">
        <li class="listitem">
         <p class="para">
          <strong><code>Collator::SORT_REGULAR</code></strong>
          - compare items normally (don&#039;t change types)
         </p>
        </li>
        <li class="listitem">
         <p class="para">
          <strong><code>Collator::SORT_NUMERIC</code></strong>
          - compare items numerically
         </p>
        </li>
        <li class="listitem">
         <p class="para">
          <strong><code>Collator::SORT_STRING</code></strong>
          - compare items as strings
         </p>
        </li>
       </ul>
      </p>
      <p class="para">
       Default $sort_flag value is
       <strong><code>Collator::SORT_REGULAR</code></strong>.
       It is also used if an invalid $sort_flag value has been specified.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>



 <div class="refsect1 returnvalues" id="refsect1-collator.asort-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   成功时返回 <strong><code>true</code></strong>， 或者在失败时返回 <strong><code>false</code></strong>。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-collator.asort-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-2664">
    <p><strong>Example #1 <span class="function"><strong>collator_asort()</strong></span>example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$coll&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">collator_create</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'en_US'&nbsp;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$arr&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'a'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'100'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'b'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'50'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'c'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'7'<br /></span><span style="color: #007700">);<br /></span><span style="color: #0000BB">collator_asort</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$coll</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">Collator</span><span style="color: #007700">::</span><span style="color: #0000BB">SORT_NUMERIC&nbsp;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_export</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$arr&nbsp;</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">collator_asort</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$coll</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">Collator</span><span style="color: #007700">::</span><span style="color: #0000BB">SORT_STRING&nbsp;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_export</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$arr&nbsp;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
array (
  &#039;c&#039; =&gt; &#039;7&#039;,
  &#039;b&#039; =&gt; &#039;50&#039;,
  &#039;a&#039; =&gt; &#039;100&#039;,
)array (
  &#039;a&#039; =&gt; &#039;100&#039;,
  &#039;b&#039; =&gt; &#039;50&#039;,
  &#039;c&#039; =&gt; &#039;7&#039;,
)
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-collator.asort-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><a href="class.collator.html#intl.collator-constants" class="link"><a href="class.collator.html" class="classname">Collator</a> constants</a></li>
    <li class="member"><span class="function"><a href="collator.sort.html" class="function" rel="rdfs-seeAlso">collator_sort()</a> - Sort array using specified collator</span></li>
    <li class="member"><span class="function"><a href="collator.sortwithsortkeys.html" class="function" rel="rdfs-seeAlso">collator_sort_with_sort_keys()</a> - Sort array using specified collator and sort keys</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="102542""></a>
  <div class="note">
   <strong class="user">alix dot axel at NOSPAM dot gmail dot com</strong>
   <a href="#102542" class="date">20-Feb-2011 07:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those of you who are looking for a way to integrate natural sorting with the UCA rules this hack seems to work:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$array </span><span class="keyword">= array<br />
(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'1'</span><span class="keyword">, </span><span class="string">'100'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'al'</span><span class="keyword">, </span><span class="string">'be'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'Alpha'</span><span class="keyword">, </span><span class="string">'Beta'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'álpha'</span><span class="keyword">, </span><span class="string">'àlpha'</span><span class="keyword">, </span><span class="string">'?lpha'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'かたかな'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'img1.png'</span><span class="keyword">, </span><span class="string">'img2.png'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'img10.png'</span><span class="keyword">, </span><span class="string">'img20.png'<br />
</span><span class="keyword">);<br />
<br />
echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">sortIntl</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">));<br />
echo </span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;<br />
<br />
function </span><span class="default">sortIntl</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$natural </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$data </span><span class="keyword">= </span><span class="default">$array</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$natural </span><span class="keyword">=== </span><span class="default">true</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$data </span><span class="keyword">= </span><span class="default">preg_replace_callback</span><span class="keyword">(</span><span class="string">'~([0-9]+)~'</span><span class="keyword">, </span><span class="string">'natsortIntl'</span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">collator_asort</span><span class="keyword">(</span><span class="default">collator_create</span><span class="keyword">(</span><span class="string">'root'</span><span class="keyword">), </span><span class="default">$data</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">array_intersect_key</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">);<br />
}<br />
<br />
function </span><span class="default">natsortIntl</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">'%032d'</span><span class="keyword">, </span><span class="default">$number</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Output:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 100<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; al<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; be<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; Alpha<br />
&nbsp;&nbsp;&nbsp; [5] =&gt; Beta<br />
&nbsp;&nbsp;&nbsp; [6] =&gt; álpha<br />
&nbsp;&nbsp;&nbsp; [7] =&gt; àlpha<br />
&nbsp;&nbsp;&nbsp; [8] =&gt; ?lpha<br />
&nbsp;&nbsp;&nbsp; [9] =&gt; かたかな<br />
&nbsp;&nbsp;&nbsp; [10] =&gt; img1.png<br />
&nbsp;&nbsp;&nbsp; [11] =&gt; img2.png<br />
&nbsp;&nbsp;&nbsp; [12] =&gt; img10.png<br />
&nbsp;&nbsp;&nbsp; [13] =&gt; img20.png<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

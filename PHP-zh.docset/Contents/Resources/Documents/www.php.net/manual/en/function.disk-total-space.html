<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>返回一个目录的磁盘总大小</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.disk-free-space.html">? disk_free_space</a></li>
      <li style="float: right;"><a href="function.diskfreespace.html">diskfreespace ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.filesystem.html">文件系统函数</a></li>
    <li>返回一个目录的磁盘总大小</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.disk-total-space" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">disk_total_space</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.1.0, PHP 5, PHP 7)</p><p class="refpurpose"><span class="refname">disk_total_space</span> &mdash; <span class="dc-title">返回一个目录的磁盘总大小</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.disk-total-space-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>disk_total_space</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$directory</code></span>
   ) : <span class="type">float</span></div>

  <p class="para rdfs-comment">
   给出一个包含有一个目录的字符串，本函数将根据相应的文件系统或磁盘分区返回所有的字节数。
   【译者注】本函数返回的是该目录所在的磁盘分区的总大小，因此在给出同一个磁盘分区的不同目录作为参数所得到的结果完全相同。
   在 Unix 和 Windows 200x/XP 中都支持将一个磁盘分区加载为一个子目录，这时正确使用本函数就很有意义。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.disk-total-space-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">directory</code></dt>

     <dd>

      <p class="para">
       文件系统的目录或者磁盘分区。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.disk-total-space-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   以浮点返回一个目录的磁盘总大小字节数， 或者在失败时返回 <strong><code>FALSE</code></strong>。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.disk-total-space-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-2801">
    <p><strong>Example #1 <span class="function"><strong>disk_total_space()</strong></span> 例子</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;$df&nbsp;包含&nbsp;"/"&nbsp;目录的磁盘大小<br /></span><span style="color: #0000BB">$ds&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">disk_total_space</span><span style="color: #007700">(</span><span style="color: #DD0000">"/"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//在&nbsp;Windows&nbsp;下:<br /></span><span style="color: #0000BB">$ds&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">disk_total_space</span><span style="color: #007700">(</span><span style="color: #DD0000">"C:"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$ds&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">disk_total_space</span><span style="color: #007700">(</span><span style="color: #DD0000">"D:"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.disk-total-space-notes">
  <h3 class="title">注释</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">此函数不能作用于<a href="features.remote-files.html" class="link">远程文件</a>，被检查的文件必须是可通过服务器的文件系统访问的。</span></p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.disk-total-space-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.disk-free-space.html" class="function" rel="rdfs-seeAlso">disk_free_space()</a> - 返回目录中的可用空间</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="114256""></a>
  <div class="note">
   <strong class="user">ryan at designedbyrayn dot co dot uk</strong>
   <a href="#114256" class="date">29-Jan-2014 09:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">//This is&nbsp; a more readable way of viewing the returned float<br />
<br />
//&nbsp;$Bytes&nbsp;contains&nbsp;the&nbsp;total number&nbsp;of&nbsp;bytes on "/"<br />
</span><span class="default">$Bytes&nbsp;</span><span class="keyword">=</span><span class="default">&nbsp;disk_total_space</span><span class="keyword">(</span><span class="string">"/"</span><span class="keyword">);<br />
<br />
</span><span class="default">function&nbsp;dataSize</span><span class="keyword">(</span><span class="default">$Bytes</span><span class="keyword">)<br />
{<br />
</span><span class="default">$Type</span><span class="keyword">=array(</span><span class="string">""</span><span class="keyword">,</span><span class="default">&nbsp;</span><span class="string">"kilo"</span><span class="keyword">,</span><span class="default">&nbsp;</span><span class="string">"mega"</span><span class="keyword">,</span><span class="default">&nbsp;</span><span class="string">"giga"</span><span class="keyword">,</span><span class="default">&nbsp;</span><span class="string">"tera"</span><span class="keyword">);<br />
</span><span class="default">$counter</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
while(</span><span class="default">$Bytes</span><span class="keyword">&gt;=</span><span class="default">1024</span><span class="keyword">)<br />
{<br />
</span><span class="default">$Bytes</span><span class="keyword">/=</span><span class="default">1024</span><span class="keyword">;<br />
</span><span class="default">$counter</span><span class="keyword">++;<br />
}<br />
return(</span><span class="string">""</span><span class="keyword">.</span><span class="default">$Bytes</span><span class="keyword">.</span><span class="string">" "</span><span class="keyword">.</span><span class="default">$Type</span><span class="keyword">[</span><span class="default">$counter</span><span class="keyword">].</span><span class="string">"bytes"</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98050""></a>
  <div class="note">
   <strong class="user">khumlo at gmail dot com</strong>
   <a href="#98050" class="date">23-May-2010 01:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PHP 6 has already come to the market but still there are no standard function that can help retrieve directory size as it has to calculate disk space such as disk_total_space. Although we can use system level call such as exec() and system(), it is too risky to enable these function. So we look for an alternate method so as to calculate directory size.<br />
<br />
Sol: retrieving directory size using php<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">get_dir_size</span><span class="keyword">(</span><span class="default">$dir_name</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dir_size </span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$dir_name</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$dh </span><span class="keyword">= </span><span class="default">opendir</span><span class="keyword">(</span><span class="default">$dir_name</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while ((</span><span class="default">$file </span><span class="keyword">= </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$dh</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$file </span><span class="keyword">!=</span><span class="default">"</span><span class="keyword">.</span><span class="default">" </span><span class="keyword">&amp;&amp; </span><span class="default">$file </span><span class="keyword">!= </span><span class="default">"</span><span class="keyword">..</span><span class="default">"</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_file</span><span class="keyword">(</span><span class="default">$dir_name</span><span class="keyword">.</span><span class="default">"</span><span class="keyword">/</span><span class="default">"</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$dir_size </span><span class="keyword">+= </span><span class="default">filesize</span><span class="keyword">(</span><span class="default">$dir_name</span><span class="keyword">.</span><span class="default">"</span><span class="keyword">/</span><span class="default">"</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">/* check for any new directory inside this directory */<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if(</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$dir_name</span><span class="keyword">.</span><span class="default">"</span><span class="keyword">/</span><span class="default">"</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dir_size </span><span class="keyword">+=&nbsp; </span><span class="default">get_dir_size</span><span class="keyword">(</span><span class="default">$dir_name</span><span class="keyword">.</span><span class="default">"</span><span class="keyword">/</span><span class="default">"</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
</span><span class="default">closedir</span><span class="keyword">(</span><span class="default">$dh</span><span class="keyword">);<br />
return </span><span class="default">$dir_size</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$dir_name </span><span class="keyword">= </span><span class="default">"directory name here"</span><span class="keyword">;<br />
</span><span class="comment">/* 1048576 bytes == 1MB */<br />
</span><span class="default">$total_size</span><span class="keyword">= </span><span class="default">round</span><span class="keyword">((</span><span class="default">get_dir_size</span><span class="keyword">(</span><span class="default">$dir_name</span><span class="keyword">) / </span><span class="default">1048576</span><span class="keyword">),</span><span class="default">2</span><span class="keyword">) ;<br />
print </span><span class="default">"Directory $dir_name size </span><span class="keyword">: </span><span class="default">$total_size MB"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
Depending upon the size format you want to achieve, divide directory size by 1024 or 1024 * 1024 or 1024 * 1024 * 1024 for KB or MB or GB respectively.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95305""></a>
  <div class="note">
   <strong class="user">cotact[at]covac-software[dot]com</strong>
   <a href="#95305" class="date">25-Dec-2009 06:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Something that might go well with this function is the ability to list available disks. On Windows, here's the relevant code:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">/**
<br />
&nbsp;* Finds a list of disk drives on the server.
<br />
&nbsp;* @return array The array velues are the existing disks.
<br />
&nbsp;*/
<br />
</span><span class="keyword">function </span><span class="default">get_disks</span><span class="keyword">(){
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">php_uname</span><span class="keyword">(</span><span class="string">'s'</span><span class="keyword">)==</span><span class="string">'Windows NT'</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// windows
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$disks</span><span class="keyword">=`</span><span class="string">fsutil fsinfo drives</span><span class="keyword">`;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$disks</span><span class="keyword">=</span><span class="default">str_word_count</span><span class="keyword">(</span><span class="default">$disks</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$disks</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]!=</span><span class="string">'Drives'</span><span class="keyword">)return </span><span class="string">''</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$disks</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$disks </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$disk</span><span class="keyword">)</span><span class="default">$disks</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]=</span><span class="default">$disk</span><span class="keyword">.</span><span class="string">':\\'</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$disks</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }else{
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// unix
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$data</span><span class="keyword">=`</span><span class="string">mount</span><span class="keyword">`;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$data</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">,</span><span class="default">$data</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$disks</span><span class="keyword">=array();
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$data </span><span class="keyword">as </span><span class="default">$token</span><span class="keyword">)if(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$token</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">)==</span><span class="string">'/dev/'</span><span class="keyword">)</span><span class="default">$disks</span><span class="keyword">[]=</span><span class="default">$token</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$disks</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
EXAMPLE OF USE:
<br />
<span class="default">&lt;?php print_r</span><span class="keyword">(</span><span class="default">get_disks</span><span class="keyword">()); </span><span class="default">?&gt;
<br />
</span>
<br />
EXAMPLE RESULT:
<br />
Array
<br />
(
<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; A:\
<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; C:\
<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; D:\
<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; E:\
<br />
&nbsp;&nbsp;&nbsp; [5] =&gt; F:\
<br />
&nbsp;&nbsp;&nbsp; [6] =&gt; G:\
<br />
&nbsp;&nbsp;&nbsp; [7] =&gt; H:\
<br />
&nbsp;&nbsp;&nbsp; [8] =&gt; I:\
<br />
&nbsp;&nbsp;&nbsp; [9] =&gt; M:\
<br />
&nbsp;&nbsp;&nbsp; [10] =&gt; X:\
<br />
&nbsp;&nbsp;&nbsp; [11] =&gt; Z:\
<br />
)
<br />

<br />
Warning: This also finds empty disk drives (eg; CD or SMD drives or the more common floppy drive).
<br />

<br />
Warning2: If you want to find space usage using the info from my function, prepend the disk function with the "@", eg:
<br />

<br />
$free=@disk_free_space('A:\\');</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80850""></a>
  <div class="note">
   <strong class="user">Viitala</strong>
   <a href="#80850" class="date">04-Feb-2008 01:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Beware of empty files!<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Wrong<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$exp </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">log</span><span class="keyword">(</span><span class="default">$bytes</span><span class="keyword">) / </span><span class="default">log</span><span class="keyword">(</span><span class="default">1024</span><span class="keyword">));<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//Correct<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$exp </span><span class="keyword">= </span><span class="default">$bytes </span><span class="keyword">? </span><span class="default">floor</span><span class="keyword">(</span><span class="default">log</span><span class="keyword">(</span><span class="default">$bytes</span><span class="keyword">) / </span><span class="default">log</span><span class="keyword">(</span><span class="default">1024</span><span class="keyword">)) : </span><span class="default">0</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75971""></a>
  <div class="note">
   <strong class="user">tularis at php dot net</strong>
   <a href="#75971" class="date">25-Jun-2007 03:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For a non-looping way to add symbols to a number of bytes:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">getSymbolByQuantity</span><span class="keyword">(</span><span class="default">$bytes</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$symbols </span><span class="keyword">= array(</span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'KiB'</span><span class="keyword">, </span><span class="string">'MiB'</span><span class="keyword">, </span><span class="string">'GiB'</span><span class="keyword">, </span><span class="string">'TiB'</span><span class="keyword">, </span><span class="string">'PiB'</span><span class="keyword">, </span><span class="string">'EiB'</span><span class="keyword">, </span><span class="string">'ZiB'</span><span class="keyword">, </span><span class="string">'YiB'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$exp </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">log</span><span class="keyword">(</span><span class="default">$bytes</span><span class="keyword">)/</span><span class="default">log</span><span class="keyword">(</span><span class="default">1024</span><span class="keyword">));<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">'%.2f '</span><span class="keyword">.</span><span class="default">$symbol</span><span class="keyword">[</span><span class="default">$exp</span><span class="keyword">], (</span><span class="default">$bytes</span><span class="keyword">/</span><span class="default">pow</span><span class="keyword">(</span><span class="default">1024</span><span class="keyword">, </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$exp</span><span class="keyword">))));<br />
}</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75967""></a>
  <div class="note">
   <strong class="user">stierguy1 at msn dot com</strong>
   <a href="#75967" class="date">24-Jun-2007 07:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
function roundsize($size){<br />
&nbsp;&nbsp;&nbsp; $i=0;<br />
&nbsp;&nbsp;&nbsp; $iec = array("B", "Kb", "Mb", "Gb", "Tb");<br />
&nbsp;&nbsp;&nbsp; while (($size/1024)&gt;1) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $size=$size/1024;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $i++;}<br />
&nbsp;&nbsp;&nbsp; return(round($size,1)." ".$iec[$i]);}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74570""></a>
  <div class="note">
   <strong class="user">nikolayku at tut dot by</strong>
   <a href="#74570" class="date">17-Apr-2007 01:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Very simple function that convert bytes to kilobytes, megabytes ...<br />
<br />
function ConvertBytes($number)<br />
{<br />
&nbsp;&nbsp;&nbsp; $len = strlen($number);<br />
&nbsp;&nbsp;&nbsp; if($len &lt; 4)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return sprintf("%d b", $number);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if($len &gt;= 4 &amp;&amp; $len &lt;=6)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return sprintf("%0.2f Kb", $number/1024);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if($len &gt;= 7 &amp;&amp; $len &lt;=9)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return sprintf("%0.2f Mb", $number/1024/1024);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return sprintf("%0.2f Gb", $number/1024/1024/1024);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72723""></a>
  <div class="note">
   <strong class="user">JulieC</strong>
   <a href="#72723" class="date">30-Jan-2007 07:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
"filesystem or disk partition" does not equal "directory" for Windows.&nbsp; Thanks.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="22234""></a>
  <div class="note">
   <strong class="user">andudi at gmx dot ch</strong>
   <a href="#22234" class="date">11-Jun-2002 03:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To find the total size of a file/directory you have to differ two situations:<br />
(on Linux/Unix based systems only!?)<br />
<br />
you are interested:<br />
1) in the total size of the files in the dir/subdirs<br />
2) what place on the disk your dir/subdirs/files uses<br />
<br />
- 1) and 2) normaly differs, depending on the size of the inodes<br />
- mostly 2) is greater than 1) (in the order of any kB)<br />
- filesize($file) gives 1)<br />
- "du -ab $file" gives 2)<br />
<br />
so you have to choose your situation!<br />
<br />
on my server I have no rights to use "exec du" in the case of 2), so I use:<br />
&nbsp; $s = stat($file);<br />
&nbsp; $size = $s[11]*$s[12]/8);<br />
whitch is counting the inodes [12] times the size of them in Bits [11]<br />
<br />
hopes this helps to count the used disk place in a right way... :-)<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Andreas Dick</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Enhances the contrast of a color image</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="imagick.contrastimage.html">? Imagick::contrastImage</a></li>
      <li style="float: right;"><a href="imagick.convolveimage.html">Imagick::convolveImage ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.imagick.html">Imagick</a></li>
    <li>Enhances the contrast of a color image</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="imagick.contraststretchimage" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">Imagick::contrastStretchImage</h1>
  <p class="verinfo">(PECL imagick 2, PECL imagick 3)</p><p class="refpurpose"><span class="refname">Imagick::contrastStretchImage</span> &mdash; <span class="dc-title">Enhances the contrast of a color image</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-imagick.contraststretchimage-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><strong>Imagick::contrastStretchImage</strong></span>
    ( <span class="methodparam"><span class="type">float</span> <code class="parameter">$black_point</code></span>
   , <span class="methodparam"><span class="type">float</span> <code class="parameter">$white_point</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$channel</code><span class="initializer"> = Imagick::CHANNEL_DEFAULT</span></span>
   ) : <span class="type">bool</span></div>


  <p class="para rdfs-comment">
   Enhances the contrast of a color image by adjusting the pixels
   color to span the entire range of colors available. 此方法在Imagick基于ImageMagick 6.2.9以上版本编译时可用。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-imagick.contraststretchimage-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">black_point</code></dt>

     <dd>

      <p class="para">
      The black point.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">white_point</code></dt>

     <dd>

      <p class="para">
      The white point.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">channel</code></dt>

     <dd>

      <p class="para">
       Provide any channel constant that is valid for your channel mode. To
       apply to more than one channel, combine channeltype constants using
       bitwise operators. <strong><code>Imagick::CHANNEL_ALL</code></strong>. Refer to this
       list of  <a href="imagick.constants.html#imagick.constants.channel" class="link">channel constants</a>.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-imagick.contraststretchimage-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   成功时返回 <strong><code>true</code></strong>。
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="115191""></a>
  <div class="note">
   <strong class="user">SkepticaLee</strong>
   <a href="#115191" class="date">11-Jun-2014 10:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The black and white points refer to the absolute number of pixels. In the following example a coloured image is first desaturated (turned into a grey scale image) and then the darkest 90% of pixels are turned black, the brightest 5% are made white, and those between 90% and 95% are grey-scaled:<br />
<br />
<span class="default">&lt;?php<br />
$im </span><span class="keyword">= new </span><span class="default">Imagick </span><span class="keyword">(</span><span class="string">"some_image.jpg"</span><span class="keyword">);<br />
list (</span><span class="default">$width</span><span class="keyword">, </span><span class="default">$height</span><span class="keyword">) = </span><span class="default">array_values </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">-&gt;</span><span class="default">getImageGeometry </span><span class="keyword">());<br />
</span><span class="default">$im</span><span class="keyword">-&gt;</span><span class="default">modulateImage </span><span class="keyword">(</span><span class="default">100</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">100</span><span class="keyword">);<br />
</span><span class="default">$im</span><span class="keyword">-&gt;</span><span class="default">contrastStretchImage </span><span class="keyword">(</span><span class="default">$width </span><span class="keyword">* </span><span class="default">$height </span><span class="keyword">* </span><span class="default">0.90</span><span class="keyword">, </span><span class="default">$width </span><span class="keyword">* </span><span class="default">$height </span><span class="keyword">* </span><span class="default">0.95</span><span class="keyword">);<br />
</span><span class="default">$im</span><span class="keyword">-&gt;</span><span class="default">writeImage </span><span class="keyword">(</span><span class="string">"temp.jpg"</span><span class="keyword">);<br />
echo </span><span class="string">"&lt;img src=\"temp.jpg\"&gt;"</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114451""></a>
  <div class="note">
   <strong class="user">SkepticaLee</strong>
   <a href="#114451" class="date">21-Feb-2014 06:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Trying to figure out what values the black and white points can have and what their effects are nearly drove me around the bend. However, this works:<br />
<br />
<span class="default">&lt;?php<br />
$width </span><span class="keyword">= </span><span class="default">480</span><span class="keyword">;<br />
</span><span class="default">$height </span><span class="keyword">= </span><span class="default">360</span><span class="keyword">;<br />
</span><span class="default">$mask </span><span class="keyword">= new </span><span class="default">Imagick </span><span class="keyword">();<br />
</span><span class="default">$mask</span><span class="keyword">-&gt;</span><span class="default">newImage </span><span class="keyword">(</span><span class="default">$width</span><span class="keyword">, </span><span class="default">$height</span><span class="keyword">, </span><span class="string">"black"</span><span class="keyword">);<br />
</span><span class="default">$draw </span><span class="keyword">= new </span><span class="default">ImagickDraw </span><span class="keyword">();<br />
</span><span class="default">$draw</span><span class="keyword">-&gt;</span><span class="default">setFillColor </span><span class="keyword">(</span><span class="string">"white"</span><span class="keyword">);<br />
</span><span class="default">$draw</span><span class="keyword">-&gt;</span><span class="default">ellipse </span><span class="keyword">(</span><span class="default">$width </span><span class="keyword">/ </span><span class="default">2</span><span class="keyword">, </span><span class="default">$height </span><span class="keyword">/ </span><span class="default">2</span><span class="keyword">, </span><span class="default">$width </span><span class="keyword">* </span><span class="default">5 </span><span class="keyword">/ </span><span class="default">12</span><span class="keyword">, </span><span class="default">$height </span><span class="keyword">* </span><span class="default">5 </span><span class="keyword">/ </span><span class="default">12</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">360</span><span class="keyword">);<br />
</span><span class="default">$mask</span><span class="keyword">-&gt;</span><span class="default">drawImage </span><span class="keyword">(</span><span class="default">$draw</span><span class="keyword">);<br />
</span><span class="default">$mask</span><span class="keyword">-&gt;</span><span class="default">blurImage </span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">50</span><span class="keyword">);<br />
</span><span class="default">$mask</span><span class="keyword">-&gt;</span><span class="default">contrastStretchImage </span><span class="keyword">(</span><span class="default">10</span><span class="keyword">, </span><span class="default">125000</span><span class="keyword">);<br />
</span><span class="default">$mask</span><span class="keyword">-&gt;</span><span class="default">writeImage </span><span class="keyword">(</span><span class="string">"mask.png"</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
The result will be a vignette mask with the pixels in the corner being pure black, and the ones in the middle pure white (which is not the case if the line is commented out). Reducing the white value to, say, 100, turns most of the grey pixels white.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

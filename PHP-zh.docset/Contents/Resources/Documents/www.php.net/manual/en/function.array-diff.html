<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>计算数组的差集</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.array-diff-ukey.html">? array_diff_ukey</a></li>
      <li style="float: right;"><a href="function.array-fill-keys.html">array_fill_keys ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.array.html">数组 函数</a></li>
    <li>计算数组的差集</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.array-diff" class="refentry">
   <div class="refnamediv">
    <h1 class="refname">array_diff</h1>
    <p class="verinfo">(PHP 4 &gt;= 4.0.1, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">array_diff</span> &mdash; <span class="dc-title">计算数组的差集</span></p>

   </div> 

 <div class="refsect1 description" id="refsect1-function.array-diff-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>array_diff</strong></span>(<span class="methodparam"><span class="type">array</span> <code class="parameter">$array</code></span>, <span class="methodparam"><span class="type">array</span> <code class="parameter">...$arrays</code></span>): <span class="type">array</span></div>

  <p class="para rdfs-comment">
   对比 <code class="parameter">array</code> 和其他一个或者多个数组，返回在
     <code class="parameter">array</code> 中但是不在其他 array 里的值。
  </p>
 </div>

    <div class="refsect1 parameters" id="refsect1-function.array-diff-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">array</code></dt>

     <dd>

      <p class="para">
       要被对比的数组
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">arrays</code></dt>

     <dd>

      <p class="para">
       和更多数组进行比较
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

   
    <div class="refsect1 returnvalues" id="refsect1-function.array-diff-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
    返回一个数组，该数组包括了所有在
     <code class="parameter">array</code> 中但是不在任何其它参数数组中的值。注意键名保留不变。
    保留数组 <code class="parameter">array</code> 里的键。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.array-diff-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-4794">
    <p><strong>Example #1 <span class="function"><strong>array_diff()</strong></span> 例子</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$array1&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"a"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"green"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"red"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"blue"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"red"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$array2&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"b"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"green"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"yellow"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"red"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_diff</span><span style="color: #007700">(</span><span style="color: #0000BB">$array1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$array2</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     在 <var class="varname">$array1</var> 中多次出现的值一样处理，输出结果为：
    </p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [1] =&gt; blue
)
</pre></div>
    </div>
   </div>
  </p>
  
  <p class="para">
   <div class="example" id="example-4795">
    <p><strong>Example #2 <span class="function"><strong>array_diff()</strong></span> 不匹配类型的示例</strong></p>
    <div class="example-contents"><p>
     两个元素只有在 <code class="literal">(string) $elem1 === (string) $elem2</code> 相等时视为一致。 也就是<a href="language.types.string.html#language.types.string.casting" class="link">字符串转换表达</a>相同。
    </p></div>
    <div class="example-contents">
     <div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;数组无法转换成字符串时会产生&nbsp;Notice&nbsp;警告<br /></span><span style="color: #0000BB">$source&nbsp;</span><span style="color: #007700">=&nbsp;[</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">$filter&nbsp;</span><span style="color: #007700">=&nbsp;[</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;[</span><span style="color: #0000BB">5</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">6</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_diff</span><span style="color: #007700">(</span><span style="color: #0000BB">$source</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$filter</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;而这个就可以，因为对象可以转换成字符串<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">S&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;private&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">__construct</span><span style="color: #007700">(</span><span style="color: #0000BB">string&nbsp;$v</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">v&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #007700">;<br />&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">__toString</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">v</span><span style="color: #007700">;<br />&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">$source&nbsp;</span><span style="color: #007700">=&nbsp;[new&nbsp;</span><span style="color: #0000BB">S</span><span style="color: #007700">(</span><span style="color: #DD0000">'a'</span><span style="color: #007700">),&nbsp;new&nbsp;</span><span style="color: #0000BB">S</span><span style="color: #007700">(</span><span style="color: #DD0000">'b'</span><span style="color: #007700">),&nbsp;new&nbsp;</span><span style="color: #0000BB">S</span><span style="color: #007700">(</span><span style="color: #DD0000">'c'</span><span style="color: #007700">)];<br /></span><span style="color: #0000BB">$filter&nbsp;</span><span style="color: #007700">=&nbsp;[new&nbsp;</span><span style="color: #0000BB">S</span><span style="color: #007700">(</span><span style="color: #DD0000">'b'</span><span style="color: #007700">),&nbsp;new&nbsp;</span><span style="color: #0000BB">S</span><span style="color: #007700">(</span><span style="color: #DD0000">'c'</span><span style="color: #007700">),&nbsp;new&nbsp;</span><span style="color: #0000BB">S</span><span style="color: #007700">(</span><span style="color: #DD0000">'d'</span><span style="color: #007700">)];<br /><br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_diff</span><span style="color: #007700">(</span><span style="color: #0000BB">$source</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$filter</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;$result&nbsp;包含了一个&nbsp;S('a');&nbsp;实例<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     想要使用函数来比较，可使用 <span class="function"><a href="function.array-udiff.html" class="function">array_udiff()</a></span>。
    </p></div>
   </div>
  </p>
 </div>

   
    <div class="refsect1 notes" id="refsect1-function.array-diff-notes">
  <h3 class="title">注释</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    注意本函数只检查了多维数组中的一维。当然可以用
      <code class="literal">array_diff($array1[0], $array2[0]);</code>
      检查更深的维度。
   </p>
  </p></blockquote>
 </div>

   
    <div class="refsect1 seealso" id="refsect1-function.array-diff-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.array-diff-assoc.html" class="function" rel="rdfs-seeAlso">array_diff_assoc()</a> - 带索引检查计算数组的差集</span></li>
    <li class="member"><span class="function"><a href="function.array-udiff.html" class="function" rel="rdfs-seeAlso">array_udiff()</a> - 用回调函数比较数据来计算数组的差集</span></li>
    <li class="member"><span class="function"><a href="function.array-intersect.html" class="function" rel="rdfs-seeAlso">array_intersect()</a> - 计算数组的交集</span></li>
    <li class="member"><span class="function"><a href="function.array-intersect-assoc.html" class="function" rel="rdfs-seeAlso">array_intersect_assoc()</a> - 带索引检查计算数组的交集</span></li>
   </ul>
  </p>
 </div>

   
  </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="125384""></a>
  <div class="note">
   <strong class="user">Al Amin Chayan (mail at chayan dot me)</strong>
   <a href="#125384" class="date">21-Sep-2020 04:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;&nbsp; * Check If An Array Is A Subset Of Another Array<br />
&nbsp;&nbsp; *<br />
&nbsp;&nbsp; * @param&nbsp; array $subset<br />
&nbsp;&nbsp; * @param&nbsp; array $set<br />
&nbsp;&nbsp; * @return bool<br />
&nbsp;&nbsp; */<br />
</span><span class="keyword">function </span><span class="default">is_subset</span><span class="keyword">(array </span><span class="default">$subset</span><span class="keyword">, array </span><span class="default">$set</span><span class="keyword">): </span><span class="default">bool </span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; return (bool)!</span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$subset</span><span class="keyword">, </span><span class="default">$set</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">$u </span><span class="keyword">= [</span><span class="default">1</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">, </span><span class="default">6</span><span class="keyword">, </span><span class="default">8</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">];<br />
</span><span class="default">$a </span><span class="keyword">= [</span><span class="default">1</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">];<br />
</span><span class="default">$b </span><span class="keyword">= [</span><span class="default">6</span><span class="keyword">, </span><span class="default">7</span><span class="keyword">];<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">is_subset</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$u</span><span class="keyword">)); </span><span class="comment">// true<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">is_subset</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">, </span><span class="default">$u</span><span class="keyword">)); </span><span class="comment">// false</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="122008""></a>
  <div class="note">
   <strong class="user">Prakashgun</strong>
   <a href="#122008" class="date">11-Dec-2017 12:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If duplicate value comes in the first array, that will be also included. See in the output "blue" comes twice.<br />
<br />
<span class="default">&lt;?php<br />
<br />
$array1 </span><span class="keyword">= array(</span><span class="string">"a" </span><span class="keyword">=&gt; </span><span class="string">"green"</span><span class="keyword">, </span><span class="string">"red"</span><span class="keyword">, </span><span class="string">"blue"</span><span class="keyword">, </span><span class="string">"red"</span><span class="keyword">, </span><span class="string">"blue"</span><span class="keyword">);<br />
</span><span class="default">$array2 </span><span class="keyword">= array(</span><span class="string">"b" </span><span class="keyword">=&gt; </span><span class="string">"green"</span><span class="keyword">, </span><span class="string">"yellow"</span><span class="keyword">, </span><span class="string">"red"</span><span class="keyword">);<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">, </span><span class="default">$array2</span><span class="keyword">);<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">);<br />
<br />
</span><span class="comment">//Output<br />
//Array ( [1] =&gt; blue [3] =&gt; blue )</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="121254""></a>
  <div class="note">
   <strong class="user">wes dot melton at gmail dot com</strong>
   <a href="#121254" class="date">20-Jun-2017 09:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It's important to note that array_diff() is NOT a fast or memory-efficient function on larger arrays. <br />
<br />
In my experience, when I find myself running array_diff() on larger arrays (50+ k/v/pairs) I almost always realize that I'm working the problem from the wrong angle. <br />
<br />
Typically, when reworking the problem to not require array_diff(), especially on bigger datasets, I find significant performance improvements and optimizations.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120821""></a>
  <div class="note">
   <strong class="user">james dot PLZNOSPAM at bush dot cc</strong>
   <a href="#120821" class="date">16-Mar-2017 01:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want a simple way to show values that are in either array, but not both, you can use this:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">arrayDiff</span><span class="keyword">(</span><span class="default">$A</span><span class="keyword">, </span><span class="default">$B</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$intersect </span><span class="keyword">= </span><span class="default">array_intersect</span><span class="keyword">(</span><span class="default">$A</span><span class="keyword">, </span><span class="default">$B</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$A</span><span class="keyword">, </span><span class="default">$intersect</span><span class="keyword">), </span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$B</span><span class="keyword">, </span><span class="default">$intersect</span><span class="keyword">));<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
If you want to account for keys, use array_diff_assoc() instead; and if you want to remove empty values, use array_filter().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119307""></a>
  <div class="note">
   <strong class="user">emeka dot echeruo at gmail dot com</strong>
   <a href="#119307" class="date">10-May-2016 03:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Resubmitting... the update for takes into account comparison issues&nbsp; <br />
Computes the difference of all the arrays<br />
<span class="default">&lt;?php <br />
<br />
</span><span class="comment">/**<br />
&nbsp;* array_diffs a" Computes the difference of all the arrays <br />
&nbsp;* <br />
&nbsp;* @param array <br />
&nbsp;* <br />
&nbsp;*&nbsp; &nbsp; array1 - The array to compare from and against<br />
&nbsp;*&nbsp; &nbsp; array2 - The array to compare from and against<br />
&nbsp;*&nbsp; &nbsp; array(n) - More arrays to compare from and against<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;* @return array Returns all the arrays that do contains entries that cannot be matched in any of the arrays.<br />
&nbsp;*/<br />
&nbsp;<br />
</span><span class="keyword">function </span><span class="default">array_diffs</span><span class="keyword">() {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">func_num_args</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$count </span><span class="keyword">&lt; </span><span class="default">2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">'Must provide at least 2 arrays for comparison.'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$check </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; </span><span class="comment">//resolve comparison issue<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$func </span><span class="keyword">= function(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dbl </span><span class="keyword">= function(</span><span class="default">$i</span><span class="keyword">, </span><span class="default">$d</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$e </span><span class="keyword">= </span><span class="default">0.00001</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">abs</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">-</span><span class="default">$d</span><span class="keyword">) &lt; </span><span class="default">$e</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; };<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if((</span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">) == </span><span class="string">'integer' </span><span class="keyword">&amp;&amp; </span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">]) == </span><span class="string">'double'</span><span class="keyword">) || (</span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">) == </span><span class="string">'double' </span><span class="keyword">&amp;&amp; </span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">]) == </span><span class="string">'integer'</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if((</span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">) == </span><span class="string">'integer' </span><span class="keyword">&amp;&amp; </span><span class="default">$dbl</span><span class="keyword">((double) </span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">])) || (</span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">]) == </span><span class="string">'integer' </span><span class="keyword">&amp;&amp; </span><span class="default">$dbl</span><span class="keyword">((double) </span><span class="default">$b</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">], </span><span class="default">$a</span><span class="keyword">))) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } elseif((</span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">) == </span><span class="string">'double'</span><span class="keyword">) &amp;&amp; (</span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">]) == </span><span class="string">'double'</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$dbl</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$b</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } elseif(</span><span class="default">$a </span><span class="keyword">== </span><span class="default">$b</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">]) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; };<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$count</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">func_get_arg</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">))) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">'Parameters must be passed as arrays.'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">func_get_arg</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">) as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) &amp;&amp; </span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$check</span><span class="keyword">) &amp;&amp; </span><span class="default">$func</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$check</span><span class="keyword">[</span><span class="default">$value</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$check</span><span class="keyword">[</span><span class="default">$value</span><span class="keyword">][</span><span class="string">'count'</span><span class="keyword">] = </span><span class="default">$check</span><span class="keyword">[</span><span class="default">$value</span><span class="keyword">][</span><span class="string">'count'</span><span class="keyword">] + </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$check</span><span class="keyword">[</span><span class="default">$value</span><span class="keyword">][</span><span class="string">'value'</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$check</span><span class="keyword">[</span><span class="default">$value</span><span class="keyword">][</span><span class="string">'count'</span><span class="keyword">] = </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } elseif(</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) &amp;&amp; (</span><span class="default">is_bool</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) || </span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) || </span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) || </span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) || </span><span class="default">is_resource</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">))) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$update </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$check </span><span class="keyword">as </span><span class="default">$check_key </span><span class="keyword">=&gt; </span><span class="default">$check_value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) &amp;&amp; (</span><span class="default">is_bool</span><span class="keyword">(</span><span class="default">$check_value</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">]) || </span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$check_value</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">]) || </span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$check_value</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">]) || </span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$check_value</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">]) || </span><span class="default">is_resource</span><span class="keyword">(</span><span class="default">$check_value</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">])) &amp;&amp; </span><span class="default">$func</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$check_value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$update </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$check</span><span class="keyword">[</span><span class="default">$check_key</span><span class="keyword">][</span><span class="string">'count'</span><span class="keyword">] = </span><span class="default">$check</span><span class="keyword">[</span><span class="default">$check_key</span><span class="keyword">][</span><span class="string">'count'</span><span class="keyword">] + </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">$update</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$check</span><span class="keyword">[] = array(</span><span class="string">'value' </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">, </span><span class="string">'count' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$check</span><span class="keyword">) &amp;&amp; </span><span class="default">$func</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$check</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$check</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'count'</span><span class="keyword">] = </span><span class="default">$check</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'count'</span><span class="keyword">] + </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$check</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'value'</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$check</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'count'</span><span class="keyword">] = </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$check </span><span class="keyword">as </span><span class="default">$check_key </span><span class="keyword">=&gt; </span><span class="default">$check_value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$check_value</span><span class="keyword">[</span><span class="string">'count'</span><span class="keyword">] == </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$count</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">func_get_arg</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">) as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) &amp;&amp; </span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) &amp;&amp; (</span><span class="default">$value </span><span class="keyword">== (string) </span><span class="default">$check_key</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } elseif(</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) &amp;&amp; (</span><span class="default">$check_value</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">] == </span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } elseif(</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) &amp;&amp; (</span><span class="default">$check_value</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">] == </span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$out</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119273""></a>
  <div class="note">
   <strong class="user">emeka at echeruo at gmail dot com</strong>
   <a href="#119273" class="date">30-Apr-2016 11:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Resubmitting... the update for takes into account comparison issues&nbsp; <br />
<br />
Computes the difference of all the arrays<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* array_diffs &mdash; Computes the difference of all the arrays <br />
&nbsp;* <br />
&nbsp;* @param array <br />
&nbsp;* <br />
&nbsp;*&nbsp; &nbsp; array1 - The array to compare from and against<br />
&nbsp;*&nbsp; &nbsp; array2 - The array to compare from and against<br />
&nbsp;*&nbsp; &nbsp; array(n) - More arrays to compare from and against<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;* @return array Returns all the arrays that do contains entries that cannot be matched in any of the arrays.&nbsp; <br />
&nbsp;*/<br />
&nbsp;<br />
</span><span class="keyword">function </span><span class="default">array_diffs</span><span class="keyword">() {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">func_num_args</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$count </span><span class="keyword">&lt; </span><span class="default">2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">'Must provide at least 2 arrays for comparison.'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$check </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; </span><span class="comment">//resolve comparison issues in PHP<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$func </span><span class="keyword">= function(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">) == </span><span class="string">'integer' </span><span class="keyword">&amp;&amp; </span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">]) == </span><span class="string">'double' </span><span class="keyword">|| </span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">) == </span><span class="string">'double' </span><span class="keyword">&amp;&amp; </span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">]) == </span><span class="string">'integer'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">) == </span><span class="string">'integer'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if((double) </span><span class="default">$a </span><span class="keyword">== </span><span class="default">$b</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">]) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if((double) </span><span class="default">$b</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">] == </span><span class="default">$a</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } elseif(</span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">) == </span><span class="string">'double' </span><span class="keyword">&amp;&amp; </span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">]) == </span><span class="string">'double'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$epsilon </span><span class="keyword">= </span><span class="default">0.00001</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">abs</span><span class="keyword">(</span><span class="default">$a </span><span class="keyword">- </span><span class="default">$b</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">]) &lt; </span><span class="default">$epsilon</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$a </span><span class="keyword">== </span><span class="default">$b</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">]) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; };<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$count</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">func_get_arg</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">))) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">'Parameters must be passed as arrays.'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">func_get_arg</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">) as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) &amp;&amp; </span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$check</span><span class="keyword">) &amp;&amp; </span><span class="default">$func</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$check</span><span class="keyword">[</span><span class="default">$value</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$check</span><span class="keyword">[</span><span class="default">$value</span><span class="keyword">][</span><span class="string">'count'</span><span class="keyword">] = </span><span class="default">$check</span><span class="keyword">[</span><span class="default">$value</span><span class="keyword">][</span><span class="string">'count'</span><span class="keyword">] + </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$check</span><span class="keyword">[</span><span class="default">$value</span><span class="keyword">][</span><span class="string">'value'</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$check</span><span class="keyword">[</span><span class="default">$value</span><span class="keyword">][</span><span class="string">'count'</span><span class="keyword">] = </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } elseif(</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) &amp;&amp; (</span><span class="default">is_bool</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) || </span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) || </span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) || </span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) || </span><span class="default">is_resource</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">))) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$update </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$check </span><span class="keyword">as </span><span class="default">$check_key </span><span class="keyword">=&gt; </span><span class="default">$check_value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) &amp;&amp; (</span><span class="default">is_bool</span><span class="keyword">(</span><span class="default">$check_value</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">]) || </span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$check_value</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">]) || </span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$check_value</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">]) || </span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$check_value</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">]) || </span><span class="default">is_resource</span><span class="keyword">(</span><span class="default">$check_value</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">]))) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$func</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$check_value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$update </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$check</span><span class="keyword">[</span><span class="default">$check_key</span><span class="keyword">][</span><span class="string">'count'</span><span class="keyword">] = </span><span class="default">$check</span><span class="keyword">[</span><span class="default">$check_key</span><span class="keyword">][</span><span class="string">'count'</span><span class="keyword">] + </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">$update</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$check</span><span class="keyword">[] = array(</span><span class="string">'value' </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">, </span><span class="string">'count' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$check</span><span class="keyword">) &amp;&amp; </span><span class="default">$func</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$check</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$check</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'count'</span><span class="keyword">] = </span><span class="default">$check</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'count'</span><span class="keyword">] + </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$check</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'value'</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$check</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'count'</span><span class="keyword">] = </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$check </span><span class="keyword">as </span><span class="default">$check_key </span><span class="keyword">=&gt; </span><span class="default">$check_value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$check_value</span><span class="keyword">[</span><span class="string">'count'</span><span class="keyword">] == </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$count</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">func_get_arg</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">) as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) &amp;&amp; </span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$value </span><span class="keyword">== (string) </span><span class="default">$check_key</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } elseif(</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) &amp;&amp; (</span><span class="default">is_bool</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) || </span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) || </span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) || </span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) || </span><span class="default">is_resource</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">))) { <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) &amp;&amp; (</span><span class="default">is_bool</span><span class="keyword">(</span><span class="default">$check_value</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">]) || </span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$check_value</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">]) || </span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$check_value</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">]) || </span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$check_value</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">]) || </span><span class="default">is_resource</span><span class="keyword">(</span><span class="default">$check_value</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">]))) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$check_value</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">] == </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$key </span><span class="keyword">== </span><span class="default">$check_key</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$out</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117219""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#117219" class="date">05-May-2015 06:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I always wanted something like this to avoid listing all the files and folders you want to exclude in a project directory.<br />
<br />
function array_preg_diff($a, $p) {<br />
&nbsp;&nbsp;&nbsp; foreach ($a as $i =&gt; $v)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (preg_match($p, $v))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset($a[$i]);<br />
&nbsp;&nbsp;&nbsp; return $a;<br />
}<br />
<br />
$relevantFiles = array_preg_diff(scandir('somedir'), '/^\./');<br />
<br />
instead of <br />
<br />
$relevantFiles = array_diff(scandir('somedir'), array('.', '..', '.idea', '.project));</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116607""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#116607" class="date">28-Jan-2015 04:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you're not getting a count(array_diff($a1,$a2))&gt;0 with something similar to the following arrays should use the php.net/array_diff_assoc function instead.<br />
<br />
$a1 = Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; id<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; id_1<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; id_2<br />
)<br />
<br />
$a2 = Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; id<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; id_2<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; id_1<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116269""></a>
  <div class="note">
   <strong class="user">wrey75 at gmail dot com</strong>
   <a href="#116269" class="date">03-Dec-2014 10:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The difference is made only on the first level. If you want compare 2 arrays, you can use the code available at https://gist.github.com/wrey75/c631f6fe9c975354aec7 (including a class with an function to patch the array)<br />
<br />
Here the basic function:<br />
<br />
function my_array_diff($arr1, $arr2) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $diff = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // Check the similarities<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach( $arr1 as $k1=&gt;$v1 ){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( isset( $arr2[$k1]) ){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $v2 = $arr2[$k1];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( is_array($v1) &amp;&amp; is_array($v2) ){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // 2 arrays: just go further...<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // .. and explain it's an update!<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $changes = self::diff($v1, $v2);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( count($changes) &gt; 0 ){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // If we have no change, simply ignore<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $diff[$k1] = array('upd' =&gt; $changes);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset($arr2[$k1]); // don't forget<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else if( $v2 === $v1 ){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // unset the value on the second array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // for the "surplus"<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset( $arr2[$k1] );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // Don't mind if arrays or not.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $diff[$k1] = array( 'old' =&gt; $v1, 'new'=&gt;$v2 );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset( $arr2[$k1] );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // remove information<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $diff[$k1] = array( 'old' =&gt; $v1 ); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // Now, check for new stuff in $arr2<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; reset( $arr2 ); // Don't argue it's unnecessary (even I believe you)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach( $arr2 as $k=&gt;$v ){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // OK, it is quite stupid my friend<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $diff[$k] = array( 'new' =&gt; $v );<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $diff;<br />
&nbsp;&nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110572""></a>
  <div class="note">
   <strong class="user">Jeppe Utzon</strong>
   <a href="#110572" class="date">08-Nov-2012 02:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you just need to know if two arrays' values are exactly the same (regardless of keys and order), then instead of using array_diff, this is a simple method:
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
</span><span class="keyword">function </span><span class="default">identical_values</span><span class="keyword">( </span><span class="default">$arrayA </span><span class="keyword">, </span><span class="default">$arrayB </span><span class="keyword">) {
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">sort</span><span class="keyword">( </span><span class="default">$arrayA </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">sort</span><span class="keyword">( </span><span class="default">$arrayB </span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$arrayA </span><span class="keyword">== </span><span class="default">$arrayB</span><span class="keyword">;
<br />
}
<br />

<br />
</span><span class="comment">// Examples:
<br />

<br />
</span><span class="default">$array1 </span><span class="keyword">= array( </span><span class="string">"red" </span><span class="keyword">, </span><span class="string">"green" </span><span class="keyword">, </span><span class="string">"blue" </span><span class="keyword">);
<br />
</span><span class="default">$array2 </span><span class="keyword">= array( </span><span class="string">"green" </span><span class="keyword">, </span><span class="string">"red" </span><span class="keyword">, </span><span class="string">"blue" </span><span class="keyword">);
<br />
</span><span class="default">$array3 </span><span class="keyword">= array( </span><span class="string">"red" </span><span class="keyword">, </span><span class="string">"green" </span><span class="keyword">, </span><span class="string">"blue" </span><span class="keyword">, </span><span class="string">"yellow" </span><span class="keyword">);
<br />
</span><span class="default">$array4 </span><span class="keyword">= array( </span><span class="string">"red" </span><span class="keyword">, </span><span class="string">"yellow" </span><span class="keyword">, </span><span class="string">"blue" </span><span class="keyword">);
<br />
</span><span class="default">$array5 </span><span class="keyword">= array( </span><span class="string">"x" </span><span class="keyword">=&gt; </span><span class="string">"red" </span><span class="keyword">, </span><span class="string">"y" </span><span class="keyword">=&gt;&nbsp; </span><span class="string">"green" </span><span class="keyword">, </span><span class="string">"z" </span><span class="keyword">=&gt; </span><span class="string">"blue" </span><span class="keyword">);
<br />

<br />
</span><span class="default">identical_values</span><span class="keyword">( </span><span class="default">$array1 </span><span class="keyword">, </span><span class="default">$array2 </span><span class="keyword">);&nbsp; </span><span class="comment">// true
<br />
</span><span class="default">identical_values</span><span class="keyword">( </span><span class="default">$array1 </span><span class="keyword">, </span><span class="default">$array3 </span><span class="keyword">);&nbsp; </span><span class="comment">// false
<br />
</span><span class="default">identical_values</span><span class="keyword">( </span><span class="default">$array1 </span><span class="keyword">, </span><span class="default">$array4 </span><span class="keyword">);&nbsp; </span><span class="comment">// false
<br />
</span><span class="default">identical_values</span><span class="keyword">( </span><span class="default">$array1 </span><span class="keyword">, </span><span class="default">$array5 </span><span class="keyword">);&nbsp; </span><span class="comment">// true
<br />

<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
The function returns true only if the two arrays contain the same number of values and each value in one array has an exact duplicate in the other array. Everything else will return false.
<br />

<br />
my alternative method for evaluating if two arrays contain (all) identical values:
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
sort</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">); </span><span class="default">$sort</span><span class="keyword">(</span><span class="default">b</span><span class="keyword">); return </span><span class="default">$a </span><span class="keyword">== </span><span class="default">$b</span><span class="keyword">;
<br />

<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
may be slightly faster (10-20%) than this array_diff method:
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
</span><span class="keyword">return ( </span><span class="default">count</span><span class="keyword">( </span><span class="default">$a </span><span class="keyword">) == </span><span class="default">count</span><span class="keyword">( </span><span class="default">$b </span><span class="keyword">) &amp;&amp; !</span><span class="default">array_diff</span><span class="keyword">( </span><span class="default">$a </span><span class="keyword">, </span><span class="default">$b </span><span class="keyword">) ? </span><span class="default">true </span><span class="keyword">: </span><span class="default">false </span><span class="keyword">);
<br />

<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
but only when the two arrays contain the same number of values and then only in some cases. Otherwise the latter method will be radically faster due to the use of a count() test before the array_diff().
<br />

<br />
Also, if the two arrays contain a different number of values, then which method is faster will depend on whether both arrays need to be sorted or not. Two times sort() is a bit slower than one time array_diff(), but if one of the arrays have already been sorted, then you only have to sort the other array and this will be almost twice as fast as array_diff().
<br />

<br />
Basically: 2 x sort() is slower than 1 x array_diff() is slower than 1 x sort().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107928""></a>
  <div class="note">
   <strong class="user">merlyn dot tgz at gmail dot com</strong>
   <a href="#107928" class="date">15-Mar-2012 10:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is more fast implementation of array_diff, but with some limitations. If you need compare two arrays of integers or strings you can use such function:<br />
<br />
&nbsp;&nbsp;&nbsp; public static function arrayDiffEmulation($arrayFrom, $arrayAgainst)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $arrayAgainst = array_flip($arrayAgainst);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach ($arrayFrom as $key =&gt; $value) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(isset($arrayAgainst[$value])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset($arrayFrom[$key]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $arrayFrom;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
It is ~10x faster than array_diff<br />
<br />
php &gt; $t = microtime(true);$a = range(0,25000); $b = range(15000,500000); $c = array_diff($a, $b);echo microtime(true) - $t;<br />
4.4335179328918<br />
php &gt; $t = microtime(true);$a = range(0,25000); $b = range(15000,500000); $c = arrayDiffEmulation($a, $b);echo microtime(true) - $t;<br />
0.37219095230103</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101613""></a>
  <div class="note">
   <strong class="user">eugeny dot yakimovitch at gmail dot com</strong>
   <a href="#101613" class="date">30-Dec-2010 03:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that array_diff is not equivalent to 
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">fullArrayDiff</span><span class="keyword">(</span><span class="default">$left</span><span class="keyword">, </span><span class="default">$right</span><span class="keyword">) 
<br />
{
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$left</span><span class="keyword">, </span><span class="default">$right</span><span class="keyword">), </span><span class="default">array_intersect</span><span class="keyword">(</span><span class="default">$left</span><span class="keyword">, </span><span class="default">$right</span><span class="keyword">));
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
since it is a set-theoretical complement as in 
<br />

<br />
<a href="http://en.wikipedia.org/wiki/Complement_(set_theory" rel="nofollow" target="_blank">http://en.wikipedia.org/wiki/Complement_(set_theory</a>)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101512""></a>
  <div class="note">
   <strong class="user">javierchinapequeno at yahoo dot es</strong>
   <a href="#101512" class="date">21-Dec-2010 11:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi, I′d like to give a piece of advice to all who need to use this function to compare two arrays that have a great quantity of elements. You should sort both arrays first before comparing, it will work faster.<br />
Thanks</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94410""></a>
  <div class="note">
   <strong class="user">vojtech dot hordejcuk at gmail dot com</strong>
   <a href="#94410" class="date">03-Nov-2009 07:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Based on one lad's code, I created following function for creating something like HTML diff. I hope it will be useful.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">private function </span><span class="default">diff </span><span class="keyword">(</span><span class="default">$old</span><span class="keyword">, </span><span class="default">$new</span><span class="keyword">)
<br />
{
<br />
&nbsp; </span><span class="default">$old </span><span class="keyword">= </span><span class="default">preg_replace </span><span class="keyword">(</span><span class="string">'/ +/'</span><span class="keyword">, </span><span class="string">' '</span><span class="keyword">, </span><span class="default">$old</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$new </span><span class="keyword">= </span><span class="default">preg_replace </span><span class="keyword">(</span><span class="string">'/ +/'</span><span class="keyword">, </span><span class="string">' '</span><span class="keyword">, </span><span class="default">$new</span><span class="keyword">);
<br />
&nbsp; 
<br />
&nbsp; </span><span class="default">$lo </span><span class="keyword">= </span><span class="default">explode </span><span class="keyword">(</span><span class="string">"\n"</span><span class="keyword">, </span><span class="default">trim </span><span class="keyword">(</span><span class="default">$old</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$ln </span><span class="keyword">= </span><span class="default">explode </span><span class="keyword">(</span><span class="string">"\n"</span><span class="keyword">, </span><span class="default">trim </span><span class="keyword">(</span><span class="default">$new</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$size </span><span class="keyword">= </span><span class="default">max </span><span class="keyword">(</span><span class="default">count </span><span class="keyword">(</span><span class="default">$lo</span><span class="keyword">), </span><span class="default">count </span><span class="keyword">(</span><span class="default">$ln</span><span class="keyword">));
<br />

<br />
&nbsp; </span><span class="default">$equ </span><span class="keyword">= </span><span class="default">array_intersect </span><span class="keyword">(</span><span class="default">$lo</span><span class="keyword">, </span><span class="default">$ln</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$ins </span><span class="keyword">= </span><span class="default">array_diff </span><span class="keyword">(</span><span class="default">$ln</span><span class="keyword">, </span><span class="default">$lo</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$del </span><span class="keyword">= </span><span class="default">array_diff </span><span class="keyword">(</span><span class="default">$lo</span><span class="keyword">, </span><span class="default">$ln</span><span class="keyword">);
<br />
&nbsp; 
<br />
&nbsp; </span><span class="default">$out </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;
<br />
&nbsp; 
<br />
&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$size</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)
<br />
&nbsp; {
<br />
&nbsp;&nbsp;&nbsp; if (isset (</span><span class="default">$del </span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]))
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">.= </span><span class="string">'&lt;p&gt;&lt;del&gt;' </span><span class="keyword">. </span><span class="default">$del </span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] . </span><span class="string">'&lt;/del&gt;&lt;/p&gt;'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; if (isset (</span><span class="default">$equ </span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]))
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">.= </span><span class="string">'&lt;p&gt;' </span><span class="keyword">. </span><span class="default">$equ </span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] . </span><span class="string">'&lt;/p&gt;'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; if (isset (</span><span class="default">$ins </span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]))
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">.= </span><span class="string">'&lt;p&gt;&lt;ins&gt;' </span><span class="keyword">. </span><span class="default">$ins </span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] . </span><span class="string">'&lt;/ins&gt;&lt;/p&gt;'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp; }
<br />
&nbsp; 
<br />
&nbsp; return </span><span class="default">$out</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94090""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#94090" class="date">15-Oct-2009 11:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi!<br />
I tried hard to find a solution to a problem I'm going to explain here, and after have read all the array functions and possibilities, I had to create what I think should exist on next PHP releases.<br />
<br />
What I needed, it's some kind of Difference, but working with two arrays and modifying them at time, not returning an array as a result with the diference itself.<br />
<br />
So, as an example:<br />
<br />
A = 1,2,3<br />
B = 2,3,4<br />
<br />
should NOT be:<br />
<br />
C = 1,4<br />
<br />
but:<br />
<br />
A = 1<br />
B = 4<br />
<br />
so basically, I wanted to delete coincidences on both arrays.<br />
<br />
Now, I've some actions to do, and I know wich one I've to do with the values from one array or another.<br />
With the normal DIFF I can't, because if I've an array like C=1,4, I dont know if I've to do the Action_A with 1 or with 4, but I really know that everything in A, will go to the Action_A and everithing in B, will go to Action_B. So same happens with 4, don't know wich action to apply...<br />
<br />
So I created this:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_diff_ORG_NEW</span><span class="keyword">(&amp;</span><span class="default">$org</span><span class="keyword">, &amp;</span><span class="default">$new</span><span class="keyword">, </span><span class="default">$type</span><span class="keyword">=</span><span class="string">'VALUES'</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; switch(</span><span class="default">$type</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="string">'VALUES'</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$int </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">array_intersect</span><span class="keyword">(</span><span class="default">$org</span><span class="keyword">, </span><span class="default">$new</span><span class="keyword">)); </span><span class="comment">//C = A ^ B<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$org </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$org</span><span class="keyword">, </span><span class="default">$int</span><span class="keyword">)); </span><span class="comment">//A' = A - C<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new</span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$new</span><span class="keyword">, </span><span class="default">$int</span><span class="keyword">)); </span><span class="comment">//B' = B - C<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">break;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="string">'KEYS'</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$int </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">array_intersect_key</span><span class="keyword">(</span><span class="default">$org</span><span class="keyword">, </span><span class="default">$new</span><span class="keyword">)); </span><span class="comment">//C = A ^ B<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$org </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">array_diff_key</span><span class="keyword">(</span><span class="default">$org</span><span class="keyword">, </span><span class="default">$int</span><span class="keyword">)); </span><span class="comment">//A' = A - C<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new</span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">array_diff_key</span><span class="keyword">(</span><span class="default">$new</span><span class="keyword">, </span><span class="default">$int</span><span class="keyword">)); </span><span class="comment">//B' = B - C<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">break;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
This cute, works by reference, and modifies the arrays deleting coincidences on both, and leaving intact the non coincidences.<br />
<br />
So a call to this will be somethin' like:<br />
<br />
<span class="default">&lt;?php<br />
$original </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">);<br />
</span><span class="default">$new </span><span class="keyword">= array(</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">);<br />
<br />
</span><span class="default">array_diff_ORG_NEW</span><span class="keyword">(</span><span class="default">$original</span><span class="keyword">, </span><span class="default">$new</span><span class="keyword">, </span><span class="string">'VALUES'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
And HERE, I'll have my arrays as I wanted:<br />
<br />
$original = 1<br />
$new = 4<br />
<br />
Now, why I use it precisely?<br />
<br />
Imagine you've some "Events" and some users you select when create the event, can "see" this event you create. So you "share" the event with some users. Ok?<br />
<br />
Imagine you created and Event_A, and shared with users 1,2,3.<br />
<br />
Now you want to modify the event, and you decide to modify the users to share it. Imagine you change it to users 2,3,4.<br />
<br />
(numbers are users ID).<br />
<br />
So you can manage when you are going to modify, to have an array with the IDs in DDBB ($original), and then, have another array with ID's corresponding to the users to share after modifying ($new). Wich ones you've to DELETE from DDBB, and wich ones do you've to INSERT?<br />
<br />
If you do a simple difference or somehow, you get somethin' like C=1,4.<br />
You have no clue on wich one you've to insert or delete.<br />
<br />
But on this way, you can know it, and that's why:<br />
<br />
- What keeps on $original, it's somethin not existing in $new at the beggining. So you know that all what you've inside $original, have to be deleted from DDBB because what you did in the modifying process, it's to unselect those users keeping in $original.<br />
- What keeps on $new, it's something not existing in $original at the beggining. Wich means that in the modifying process you added some new users. And those have to be inserted in DDBB. So, everything keeping inside $new, have to be inserted in the DDBB.<br />
<br />
Conclusion:<br />
<br />
- Remaining in $original --&gt; delete from DB.<br />
- Remaining in $new --&gt; insert into DB.<br />
<br />
And that's all!<br />
<br />
I hope you find it useful, and I encourage PHP "makers", to add in a not distant future, somethin' like this one natively, because I'm shure that I'm not the first one needing something like this.<br />
<br />
Best regards all,<br />
<br />
Light.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91756""></a>
  <div class="note">
   <strong class="user">firegun at terra dot com dot br</strong>
   <a href="#91756" class="date">24-Jun-2009 10:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hello guys,
<br />

<br />
I′ve been looking for a array_diff that works with recursive arrays, I′ve tried the ottodenn at gmail dot com function but to my case it doesn′t worked as expected, so I made my own. I′ve haven′t tested this extensively, but I′ll explain my scenario, and this works great at that case :D
<br />

<br />
We got 2 arrays like these:
<br />

<br />
<span class="default">&lt;?php
<br />
$aArray1</span><span class="keyword">[</span><span class="string">'marcie'</span><span class="keyword">] = array(</span><span class="string">'banana' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'orange' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'pasta' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">);
<br />
</span><span class="default">$aArray1</span><span class="keyword">[</span><span class="string">'kenji'</span><span class="keyword">] = array(</span><span class="string">'apple' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'pie' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'pasta' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">);
<br />

<br />
</span><span class="default">$aArray2</span><span class="keyword">[</span><span class="string">'marcie'</span><span class="keyword">] = array(</span><span class="string">'banana' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'orange' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
As array_diff, this function returns all the items that is in aArray1 and IS NOT at aArray2, so the result we should expect is:
<br />

<br />
<span class="default">&lt;?php
<br />
$aDiff</span><span class="keyword">[</span><span class="string">'marcie'</span><span class="keyword">] = array(</span><span class="string">'pasta' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">);
<br />
</span><span class="default">$aDiff</span><span class="keyword">[</span><span class="string">'kenji'</span><span class="keyword">] = array(</span><span class="string">'apple' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'pie' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'pasta' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Ok, now some comments about this function:
<br />
&nbsp;- Different from the PHP array_diff, this function DON′T uses the === operator, but the ==, so 0 is equal to '0' or false, but this can be changed with no impacts.
<br />
&nbsp;- This function checks the keys of the arrays, array_diff only compares the values.
<br />

<br />
I realy hopes that this could help some1 as I′ve been helped a lot with some users experiences. (Just please double check if it would work for your case, as I sad I just tested to a scenario like the one I exposed)
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">arrayRecursiveDiff</span><span class="keyword">(</span><span class="default">$aArray1</span><span class="keyword">, </span><span class="default">$aArray2</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$aReturn </span><span class="keyword">= array();
<br />
&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$aArray1 </span><span class="keyword">as </span><span class="default">$mKey </span><span class="keyword">=&gt; </span><span class="default">$mValue</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$mKey</span><span class="keyword">, </span><span class="default">$aArray2</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$mValue</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$aRecursiveDiff </span><span class="keyword">= </span><span class="default">arrayRecursiveDiff</span><span class="keyword">(</span><span class="default">$mValue</span><span class="keyword">, </span><span class="default">$aArray2</span><span class="keyword">[</span><span class="default">$mKey</span><span class="keyword">]);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$aRecursiveDiff</span><span class="keyword">)) { </span><span class="default">$aReturn</span><span class="keyword">[</span><span class="default">$mKey</span><span class="keyword">] = </span><span class="default">$aRecursiveDiff</span><span class="keyword">; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$mValue </span><span class="keyword">!= </span><span class="default">$aArray2</span><span class="keyword">[</span><span class="default">$mKey</span><span class="keyword">]) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$aReturn</span><span class="keyword">[</span><span class="default">$mKey</span><span class="keyword">] = </span><span class="default">$mValue</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$aReturn</span><span class="keyword">[</span><span class="default">$mKey</span><span class="keyword">] = </span><span class="default">$mValue</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$aReturn</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82297""></a>
  <div class="note">
   <strong class="user">Tim Trefren</strong>
   <a href="#82297" class="date">04-Apr-2008 08:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a little wrapper for array_diff - I found myself needing to iterate through the edited array, and I didn't need to original keys for anything.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">arrayDiff</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">, </span><span class="default">$array2</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment"># This wrapper for array_diff rekeys the array returned<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$valid_array </span><span class="keyword">= </span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">,</span><span class="default">$array2</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment"># reinstantiate $array1 variable <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array1 </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment"># loop through the validated array and move elements to $array1<br />
&nbsp;&nbsp;&nbsp; # this is necessary because the array_diff function returns arrays that retain their original keys<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$valid_array </span><span class="keyword">as </span><span class="default">$valid</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array1</span><span class="keyword">[] = </span><span class="default">$valid</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$array1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82143""></a>
  <div class="note">
   <strong class="user">merlinyoda at dorproject dot net</strong>
   <a href="#82143" class="date">28-Mar-2008 10:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As touched on in kitchin's comment of 19-Jun-2007 03:49 and nilsandre at gmx dot de's comment of 17-Jul-2007 10:45, array_diff's behavior may be counter-intuitive if you aren't thinking in terms of set theory. <br />
<br />
array_diff() returns a *mathematical* difference (a.k.a. subtraction) of elements in array A that are in array B and *not* what elements are different between the arrays (i.e. those that elements that are in either A or B but aren't in both A and B).<br />
<br />
Drawing one of those Ven diagrams or Euler diagrams may help with visualization...<br />
<br />
As far as a function for returning what you may be expecting, here's one:<br />
<br />
<span class="default">&lt;?php <br />
</span><span class="keyword">function </span><span class="default">array_xor </span><span class="keyword">(</span><span class="default">$array_a</span><span class="keyword">, </span><span class="default">$array_b</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$union_array </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$array_a</span><span class="keyword">, </span><span class="default">$array_b</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$intersect_array </span><span class="keyword">= </span><span class="default">array_intersect</span><span class="keyword">(</span><span class="default">$array_a</span><span class="keyword">, </span><span class="default">$array_b</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$union_array</span><span class="keyword">, </span><span class="default">$intersect_array</span><span class="keyword">)<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76484""></a>
  <div class="note">
   <strong class="user">nilsandre at gmx dot de</strong>
   <a href="#76484" class="date">17-Jul-2007 09:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Again, the function's description is misleading right now. I sought a function, which (mathematically) computes A - B, or, written differently, A \ B. Or, again in other words, suppose <br />
<br />
A := {a1, ..., an} and B:= {a1, b1, ... , bm}<br />
<br />
=&gt; array_diff(A,B) = {a2, ..., an}<br />
<br />
array_diff(A,B) returns all elements from A, which are not elements of B (= A without B).<br />
<br />
You should include this in the documentation more precisely, I think.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75731""></a>
  <div class="note">
   <strong class="user">gilthans at NOgmailSPAM dot com</strong>
   <a href="#75731" class="date">13-Jun-2007 10:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed a function to only remove the element the amount of times he appears in the second array. In other words, if you have Array(1, 1, 2) and Array(1), the return value should be Array(1, 2).<br />
So I built this function right here:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_diff_once</span><span class="keyword">(){<br />
&nbsp;&nbsp;&nbsp; if((</span><span class="default">$args </span><span class="keyword">= </span><span class="default">func_num_args</span><span class="keyword">()) &lt; </span><span class="default">2</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arr1 </span><span class="keyword">= </span><span class="default">func_get_arg</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arr2 </span><span class="keyword">= </span><span class="default">func_get_arg</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arr1</span><span class="keyword">) || !</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arr2</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$arr2 </span><span class="keyword">as </span><span class="default">$remove</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$arr1 </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if((string)</span><span class="default">$v </span><span class="keyword">=== (string)</span><span class="default">$remove</span><span class="keyword">){ </span><span class="comment">//NOTE: if you need the diff to be STRICT, remove both the '(string)'s<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">unset(</span><span class="default">$arr1</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break; </span><span class="comment">//That's pretty much the only difference from the real array_diff :P<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//Handle more than 2 arguments<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="default">$args</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; while(</span><span class="default">$c </span><span class="keyword">&gt; </span><span class="default">2</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$c</span><span class="keyword">--;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arr1 </span><span class="keyword">= </span><span class="default">array_diff_once</span><span class="keyword">(</span><span class="default">$arr1</span><span class="keyword">, </span><span class="default">func_get_arg</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">-</span><span class="default">$c</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$arr1</span><span class="keyword">;<br />
}<br />
</span><span class="default">$arr1 </span><span class="keyword">= Array(</span><span class="string">"blue"</span><span class="keyword">, </span><span class="string">"four"</span><span class="keyword">=&gt;</span><span class="default">4</span><span class="keyword">, </span><span class="string">"color"</span><span class="keyword">=&gt;</span><span class="string">"red"</span><span class="keyword">, </span><span class="string">"blue"</span><span class="keyword">, </span><span class="string">"green"</span><span class="keyword">, </span><span class="string">"green"</span><span class="keyword">, </span><span class="string">"name"</span><span class="keyword">=&gt;</span><span class="string">"jon"</span><span class="keyword">, </span><span class="string">"green"</span><span class="keyword">);<br />
</span><span class="default">$arr2 </span><span class="keyword">= Array(</span><span class="string">"4"</span><span class="keyword">, </span><span class="string">"red"</span><span class="keyword">, </span><span class="string">"blue"</span><span class="keyword">, </span><span class="string">"green"</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_diff_once</span><span class="keyword">(</span><span class="default">$arr1</span><span class="keyword">, </span><span class="default">$arr2</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span>This prints:<br />
Array ( [1] =&gt; blue [3] =&gt; green [name] =&gt; jon [4] =&gt; green )<br />
<br />
Note that it removes the elements left to right, opposite to what you might expect; in my case the order of elements had no importance. Fixing that would require a small variation.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68623""></a>
  <div class="note">
   
   <a href="#68623" class="date">03-Aug-2006 12:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
array_diff provides a handy way of deleting array elements by their value, without having to unset it by key, through a lengthy foreach loop and then having to rekey the array.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">//pass value you wish to delete and the array to delete from<br />
</span><span class="keyword">function </span><span class="default">array_delete</span><span class="keyword">( </span><span class="default">$value</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">array_diff</span><span class="keyword">( </span><span class="default">$array</span><span class="keyword">, array(</span><span class="default">$value</span><span class="keyword">) );<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60975""></a>
  <div class="note">
   <strong class="user">Simon Riget at paragi.dk</strong>
   <a href="#60975" class="date">21-Jan-2006 05:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A simple multidimentional key aware array_diff function.<br />
&nbsp;&nbsp;&nbsp; <br />
<span class="default">&lt;?php&nbsp; &nbsp; <br />
</span><span class="keyword">function </span><span class="default">arr_diff</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">,</span><span class="default">$a2</span><span class="keyword">){<br />
&nbsp; foreach(</span><span class="default">$a1 </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; unset(</span><span class="default">$dv</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_int</span><span class="keyword">(</span><span class="default">$k</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="comment">// Compare values<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">,</span><span class="default">$a2</span><span class="keyword">)===</span><span class="default">false</span><span class="keyword">) </span><span class="default">$dv</span><span class="keyword">=</span><span class="default">$v</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; else if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)) </span><span class="default">$dv</span><span class="keyword">=</span><span class="default">arr_diff</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">,</span><span class="default">$a2</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(</span><span class="default">$dv</span><span class="keyword">) </span><span class="default">$diff</span><span class="keyword">[]=</span><span class="default">$dv</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="comment">// Compare noninteger keys<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">if(!</span><span class="default">$a2</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]) </span><span class="default">$dv</span><span class="keyword">=</span><span class="default">$v</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; else if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)) </span><span class="default">$dv</span><span class="keyword">=</span><span class="default">arr_diff</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">,</span><span class="default">$a2</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(</span><span class="default">$dv</span><span class="keyword">) </span><span class="default">$diff</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]=</span><span class="default">$dv</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }&nbsp; &nbsp; <br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$diff</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
This function meets my immidiate needs but I'm shure it can be improved.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60320""></a>
  <div class="note">
   <strong class="user">Viking Coder</strong>
   <a href="#60320" class="date">03-Jan-2006 09:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To anybody wanting a double-sided array_diff - mentioned by rudigier at noxx dot at. Remember, array_diff gives you everything in the first array that isn't in the subsequent arrays. <br />
<br />
$array1=array('blue','red','green');<br />
$array2=array('blue','yellow','green');<br />
<br />
array_merge(array_diff($array1, $array2),array_diff($array2, $array1));<br />
<br />
Result<br />
------<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; red<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; yellow<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="48583""></a>
  <div class="note">
   <strong class="user">j dot j dot d dot mol at ewi dot tudelft dot nl</strong>
   <a href="#48583" class="date">31-Dec-2004 12:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is some code to take the difference of two arrays. It allows custom modifications like prefixing with a certain string (as shown) or custom compare functions.<br />
<br />
<span class="default">&lt;?php <br />
&nbsp;</span><span class="comment">// returns all elements in $all which are not in $used in O(n log n) time.<br />
&nbsp; // elements from $all are prefixed with $prefix_all.<br />
&nbsp; // elements from $used are prefixed with $prefix_used.<br />
&nbsp; </span><span class="keyword">function </span><span class="default">filter_unused</span><span class="keyword">( </span><span class="default">$all</span><span class="keyword">, </span><span class="default">$used</span><span class="keyword">, </span><span class="default">$prefix_all </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">, </span><span class="default">$prefix_used </span><span class="keyword">= </span><span class="string">"" </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$unused </span><span class="keyword">= array();<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="comment">// prefixes are not needed for sorting<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">sort</span><span class="keyword">( </span><span class="default">$all </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">sort</span><span class="keyword">( </span><span class="default">$used </span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$a </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$u </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$maxa </span><span class="keyword">= </span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$all</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$maxu </span><span class="keyword">= </span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$used</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; while( </span><span class="default">true </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">$a </span><span class="keyword">&gt; </span><span class="default">$maxa </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// done; rest of $used isn't in $all<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">$u </span><span class="keyword">&gt; </span><span class="default">$maxu </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// rest of $all is unused<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">for( ; </span><span class="default">$a </span><span class="keyword">&lt;= </span><span class="default">$maxa</span><span class="keyword">; </span><span class="default">$a</span><span class="keyword">++ ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$unused</span><span class="keyword">[] = </span><span class="default">$all</span><span class="keyword">[</span><span class="default">$a</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">$prefix_all</span><span class="keyword">.</span><span class="default">$all</span><span class="keyword">[</span><span class="default">$a</span><span class="keyword">] &gt; </span><span class="default">$prefix_used</span><span class="keyword">.</span><span class="default">$used</span><span class="keyword">[</span><span class="default">$u</span><span class="keyword">] ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// $used[$u] isn't in $all?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$u</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">$prefix_all</span><span class="keyword">.</span><span class="default">$all</span><span class="keyword">[</span><span class="default">$a</span><span class="keyword">] == </span><span class="default">$prefix_used</span><span class="keyword">.</span><span class="default">$used</span><span class="keyword">[</span><span class="default">$u</span><span class="keyword">] ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// $all[$a] is used<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$u</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$unused</span><span class="keyword">[] = </span><span class="default">$all</span><span class="keyword">[</span><span class="default">$a</span><span class="keyword">];<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">$unused</span><span class="keyword">;<br />
&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37527""></a>
  <div class="note">
   
   <a href="#37527" class="date">18-Nov-2003 04:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
From the page:
<br />
Note:&nbsp; Please note that this function only checks one dimension of a n-dimensional array. Of course you can check deeper dimensions by using array_diff($array1[0], $array2[0]);
<br />

<br />
I've found a way to bypass that. I had 2 arrays made of arrays.
<br />
I wanted to extract from the first array all the arrays not found in the second array. So I used the serialize() function:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">my_serialize</span><span class="keyword">(&amp;</span><span class="default">$arr</span><span class="keyword">,</span><span class="default">$pos</span><span class="keyword">){
<br />
&nbsp; </span><span class="default">$arr </span><span class="keyword">= </span><span class="default">serialize</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);
<br />
}
<br />

<br />
function </span><span class="default">my_unserialize</span><span class="keyword">(&amp;</span><span class="default">$arr</span><span class="keyword">,</span><span class="default">$pos</span><span class="keyword">){
<br />
&nbsp; </span><span class="default">$arr </span><span class="keyword">= </span><span class="default">unserialize</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);
<br />
}
<br />

<br />
&nbsp;</span><span class="comment">//make a copy
<br />
</span><span class="default">$first_array_s </span><span class="keyword">= </span><span class="default">$first_array</span><span class="keyword">;
<br />
</span><span class="default">$second_array_s </span><span class="keyword">= </span><span class="default">$second_array</span><span class="keyword">;
<br />

<br />
</span><span class="comment">// serialize all sub-arrays
<br />
</span><span class="default">array_walk</span><span class="keyword">(</span><span class="default">$first_array_s</span><span class="keyword">,</span><span class="string">'my_serialize'</span><span class="keyword">); 
<br />
</span><span class="default">array_walk</span><span class="keyword">(</span><span class="default">$second_array_s</span><span class="keyword">,</span><span class="string">'my_serialize'</span><span class="keyword">);
<br />

<br />
</span><span class="comment">// array_diff the serialized versions
<br />
</span><span class="default">$diff </span><span class="keyword">= </span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$first_array_s</span><span class="keyword">,</span><span class="default">$second_array_s</span><span class="keyword">);
<br />

<br />
</span><span class="comment">// unserialize the result
<br />
</span><span class="default">array_walk</span><span class="keyword">(</span><span class="default">$diff</span><span class="keyword">,</span><span class="string">'my_unserialize'</span><span class="keyword">);
<br />

<br />
</span><span class="comment">// you've got it!
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$diff</span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="29742""></a>
  <div class="note">
   <strong class="user">ds2u  at the  hotmail  dot  com</strong>
   <a href="#29742" class="date">23-Feb-2003 04:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Yes you can get rid of gaps/missing keys by using:
<br />

<br />
<span class="default">&lt;?php
<br />
$result </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">,</span><span class="default">$array2</span><span class="keyword">));
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
But to drop the storage of void spaces (actually a line feed) which are irritatingly indexed when reading from files - just use difference:
<br />

<br />
<span class="default">&lt;?php
<br />
$array </span><span class="keyword">= array ();
<br />
</span><span class="default">$array</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="string">"\n"</span><span class="keyword">;
<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">,</span><span class="default">$array</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
dst</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="16097""></a>
  <div class="note">
   <strong class="user">SeanECoates at !donotspam!yahoo dot ca</strong>
   <a href="#16097" class="date">16-Oct-2001 10:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I just came upon a really good use for array_diff(). When reading a dir(opendir;readdir), I _rarely_ want "." or ".." to be in the array of files I'm creating. Here's a simple way to remove them:
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp;$someFiles </span><span class="keyword">= array();
<br />
&nbsp;</span><span class="default">$dp </span><span class="keyword">= </span><span class="default">opendir</span><span class="keyword">(</span><span class="string">"/some/dir"</span><span class="keyword">);
<br />
&nbsp;while(</span><span class="default">$someFiles</span><span class="keyword">[] = </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$dp</span><span class="keyword">));
<br />
&nbsp;</span><span class="default">closedir</span><span class="keyword">(</span><span class="default">$dp</span><span class="keyword">);
<br />
&nbsp;
<br />
&nbsp;</span><span class="default">$removeDirs </span><span class="keyword">= array(</span><span class="string">"."</span><span class="keyword">,</span><span class="string">".."</span><span class="keyword">);
<br />
&nbsp;</span><span class="default">$someFiles </span><span class="keyword">= </span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$someFiles</span><span class="keyword">, </span><span class="default">$removeDirs</span><span class="keyword">);
<br />
&nbsp;
<br />
&nbsp;foreach(</span><span class="default">$someFiles </span><span class="keyword">AS </span><span class="default">$thisFile</span><span class="keyword">) echo </span><span class="default">$thisFile</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
S</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>

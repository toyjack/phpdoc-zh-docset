<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>转义一个字符串用于 mysql_query</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.mysql-error.html">? mysql_error</a></li>
      <li style="float: right;"><a href="function.mysql-fetch-array.html">mysql_fetch_array ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.mysql.html">MySQL 函数</a></li>
    <li>转义一个字符串用于 mysql_query</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.mysql-escape-string" class="refentry">
   <div class="refnamediv">
    <h1 class="refname">mysql_escape_string</h1>
    <p class="verinfo">(PHP 4 &gt;= 4.0.3, PHP 5)</p><p class="refpurpose"><span class="refname">mysql_escape_string</span> &mdash; <span class="dc-title">
     转义一个字符串用于 mysql_query
    </span></p>

   </div>
   <div class="refsect1 unknown-unknown-unknown-seealsr" id="refsect1-function.mysql-escape-string-unknown-unknown-unknown-seealsr">
    <h3 class="title">说明</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>mysql_escape_string</strong></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$unescaped_string</code></span>): <span class="type">string</span></div>

    <p class="para rdfs-comment">
     本函数将 <code class="parameter">unescaped_string</code> 转义，使之可以安全用于
     <span class="function"><a href="function.mysql-query.html" class="function">mysql_query()</a></span>。
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      <span class="function"><strong>mysql_escape_string()</strong></span> 并不转义
      <code class="literal">%</code> 和 <code class="literal">_</code>。
     </span>
     <span class="simpara">
      本函数和
      <span class="function"><a href="function.mysql-real-escape-string.html" class="function">mysql_real_escape_string()</a></span> 完全一样，除了
      <span class="function"><a href="function.mysql-real-escape-string.html" class="function">mysql_real_escape_string()</a></span>
      接受的是一个连接句柄并根据当前字符集转移字符串之外。<span class="function"><strong>mysql_escape_string()</strong></span>
      并不接受连接参数，也不管当前字符集设定。
     </span>
    </p></blockquote>
    <p class="para">
     <div class="example" id="example-1720">
      <p><strong>Example #1 <span class="function"><strong>mysql_escape_string()</strong></span> 例子</strong></p>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;&nbsp;&nbsp;$item&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"Zak's&nbsp;Laptop"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$escaped_item&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysql_escape_string</span><span style="color: #007700">(</span><span style="color: #0000BB">$item</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">"Escaped&nbsp;string:&nbsp;%s\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$escaped_item</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

      <div class="example-contents"><p>
       以上例子将产生如下输出：
      </p></div>
      <div class="example-contents screen">
<div class="cdata"><pre>
Escaped string: Zak\&#039;s Laptop
</pre></div>
      </div>
     </div>
    </p>
    <p class="para">
     参见
     <span class="function"><a href="function.mysql-real-escape-string.html" class="function">mysql_real_escape_string()</a></span>，<span class="function"><a href="function.addslashes.html" class="function">addslashes()</a></span>
     和 <a href="info.configuration.html#ini.magic-quotes-gpc" class="link">magic_quotes_gpc</a> 指令。
    </p>
   </div>

  </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="116881""></a>
  <div class="note">
   <strong class="user">PHPguru</strong>
   <a href="#116881" class="date">15-Mar-2015 02:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can use this function safely with your MySQL database queries if and only if you are sure that your database connection is using ASCII, UTF-8, or ISO-8859-* and that the backslash is your database's escape character. If you're not sure, then use mysqli_real_escape_string instead. This function is not safe to use on databases with multi-byte character sets.<br />
<br />
The only benefit of this function is that it does not require a database connection.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102073""></a>
  <div class="note">
   <strong class="user">s dot marechal at jejik dot com</strong>
   <a href="#102073" class="date">26-Jan-2011 02:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The exact characters that are escaped by this function are the null byte (0), newline (\n), carriage return (\r), backslash (\), single quote ('), double quote (") and substiture (SUB, or \032).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
